var e,t,n,r,s,i,a,o,l,c,d,u,h,p,m,f,g,x,v,y,b,w,j,N,_,S,M,C,E,k,A,T,P,O,R,I,D,L,F,z,B,U,V,H,W,$,G,q,X,K,Y,Z,J,Q,ee,te,ne,re,se,ie,ae,oe,le,ce,de,ue,he,pe,me,fe,ge,xe,ve,ye,be,we,je,Ne,_e,Se,Me,Ce,Ee,ke,Ae,Te,Pe,Oe,Re,Ie,De,Le,Fe,ze,Be,Ue,Ve,He,We,$e,Ge,qe,Xe,Ke,Ye,Ze,Je,Qe,et,tt,nt,rt,st,it,at,ot,lt,ct,dt,ut,ht,pt,mt,ft,gt,xt,vt,yt,bt,wt,jt=Object.defineProperty,Nt=e=>{throw TypeError(e)},_t=(e,t,n)=>((e,t,n)=>t in e?jt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n),St=(e,t,n)=>t.has(e)||Nt("Cannot "+n),Mt=(e,t,n)=>(St(e,t,"read from private field"),n?n.call(e):t.get(e)),Ct=(e,t,n)=>t.has(e)?Nt("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Et=(e,t,n,r)=>(St(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),kt=(e,t,n)=>(St(e,t,"access private method"),n);import{c as At,i as Tt,a as Pt,j as Ot,B as Rt,P as It,f as Dt,d as Lt,g as Ft,b as zt,t as Bt,k as Ut,u as Vt,v as Ht,w as Wt,I as $t,x as Gt,n as qt,y as Xt,z as Kt,A as Yt,E as Zt,G as Jt,H as Qt,J as en,K as tn,L as nn,h as rn,m as sn,R as an,F as on,D as ln,l as cn,e as dn}from"./js/chunk-DUF6JkqQ.js";import{a as un,r as hn,e as pn,f as mn,R as fn,h as gn,i as xn,b as vn}from"./js/chunk-mXrEHHhv.js";import{a3 as yn,d as bn,a4 as wn,a5 as jn,u as Nn,W as _n,C as Sn,Q as Mn,a6 as Cn,a7 as En,a8 as kn,S as An,B as Tn,a9 as Pn,aa as On,a0 as Rn,ab as In,j as Dn,K as Ln,ac as Fn,H as zn,ad as Bn,w as Un,y as Vn,z as Hn,A as Wn,E as $n,ae as Gn,k as qn,af as Xn,ag as Kn,Z as Yn,ah as Zn,ai as Jn,aj as Qn,e as er,Y as tr,ak as nr,al as rr,am as sr,an as ir,ao as ar,ap as or,M as lr,T as cr,a as dr,b as ur,c as hr,I as pr,aq as mr,ar as fr,as as gr,at as xr,q as vr,D as yr,l as br,P as wr,n as jr,o as Nr,p as _r,F as Sr,s as Mr,t as Cr,v as Er,x as kr,G as Ar,J as Tr,L as Pr,au as Or,O as Rr,R as Ir,m as Dr,f as Lr,av as Fr,g as zr,aw as Br,h as Ur,ax as Vr,ay as Hr,az as Wr,aA as $r,aB as Gr,aC as qr,aD as Xr,aE as Kr,aF as Yr,aG as Zr,aH as Jr,aI as Qr,aJ as es,aK as ts,aL as ns,a2 as rs,aM as ss,aN as is,r as as,aO as ls,aP as cs,aQ as ds,aR as us,aS as hs,aT as ps,aU as ms,_ as fs,aV as gs,aW as xs,V as vs,aX as ys,aY as bs,aZ as ws,a_ as js,a$ as Ns,b0 as _s,b1 as Ss,b2 as Ms,b3 as Cs,b4 as Es,b5 as ks,b6 as As,b7 as Ts,b8 as Ps,b9 as Os,ba as Rs,bb as Is,bc as Ds,bd as Ls,be as Fs,a1 as zs,bf as Bs,i as Us,bg as Vs,bh as Hs,bi as Ws,bj as $s,bk as Gs,bl as qs,bm as Xs,bn as Ks,bo as Ys,bp as Zs,bq as Js,br as Qs,bs as ei,bt as ti,bu as ni,bv as ri,bw as si,bx as ii,by as ai,bz as oi,bA as li,bB as ci,bC as di,bD as ui,bE as hi,bF as pi,bG as mi,bH as fi,bI as gi,bJ as xi,bK as vi,bL as yi,bM as bi,bN as wi,bO as ji,bP as Ni,bQ as _i,bR as Si,bS as Mi,bT as Ci,bU as Ei,bV as ki,bW as Ai,bX as Ti,bY as Pi,U as Oi,bZ as Ri,b_ as Ii,$ as Di,b$ as Li,c0 as Fi,c1 as zi,c2 as Bi,c3 as Ui,c4 as Vi,c5 as Hi,c6 as Wi,c7 as $i,c8 as Gi,c9 as qi,ca as Xi,cb as Ki,cc as Yi,cd as Zi,ce as Ji,cf as Qi,cg as ea,ch as ta,ci as na,cj as ra,ck as sa,cl as ia,cm as aa,cn as oa,co as la,cp as ca,cq as da,cr as ua,cs as ha,ct as pa,cu as ma,cv as fa,cw as ga,cx as xa,cy as va,cz as ya,cA as ba,cB as wa,cC as ja,cD as Na,cE as _a,cF as Sa,cG as Ma,cH as Ca,cI as Ea,cJ as ka,cK as Aa,cL as Ta,cM as Pa,cN as Oa,cO as Ra,cP as Ia,cQ as Da}from"./js/chunk-__GxGkAU.js";import{a as La,b as Fa,u as za,c as Ba}from"./js/chunk-DQaGpX7Y.js";import{u as Ua}from"./js/chunk-DSb96EXs.js";import{e as Va,i as Ha,f as Wa,g as $a,h as Ga,j as qa,k as Xa,l as Ka,m as Ya,s as Za,y as Ja,n as Qa,o as eo,p as to,q as no,r as ro,t as so,u as io,v as ao,a as oo,b as lo,G as co,P as uo,A as ho,c as po,T as mo,d as fo,H as go,M as xo,w as vo,x as yo,z as bo}from"./js/chunk-B7NqNl_4.js";import{m as wo,A as jo,u as No,a as _o,b as So,c as Mo,d as Co}from"./js/chunk-Blh_UkJo.js";import{o as Eo,b as ko,s as Ao,e as To,g as Po,l as Oo,d as Ro,n as Io,h as Do,i as Lo,j as Fo,k as zo,c as Bo,m as Uo,p as Vo,q as Ho,v as Wo,w as $o,x as Go,y as qo,A as Xo,B as Ko,C as Yo,D as Zo,E as Jo,F as Qo,G as el,H as tl,I as nl,J as rl,K as sl,L as il,M as al,N as ol,O as ll,P as cl,Q as dl,R as ul,S as hl,T as pl,U as ml,V as fl,W as gl,X as xl,r as vl}from"./js/chunk-CDr5KqzG.js";import{C as yl,a as bl}from"./js/chunk-CPzMrc8n.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}(),wt=un.createRoot;var wl="ToastProvider",[jl,Nl,_l]=Tt("Toast"),[Sl]=At("Toast",[_l]),[Ml,Cl]=Sl(wl),El=e=>{const{__scopeToast:t,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:a}=e,[o,l]=hn.useState(null),[c,d]=hn.useState(0),u=hn.useRef(!1),h=hn.useRef(!1);return n.trim(),Ot.jsx(jl.Provider,{scope:t,children:Ot.jsx(Ml,{scope:t,label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:c,viewport:o,onViewportChange:l,onToastAdd:hn.useCallback(()=>d(e=>e+1),[]),onToastRemove:hn.useCallback(()=>d(e=>e-1),[]),isFocusedToastEscapeKeyDownRef:u,isClosePausedRef:h,children:a})})};El.displayName=wl;var kl="ToastViewport",Al=["F8"],Tl="toast.viewportPause",Pl="toast.viewportResume",Ol=hn.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:r=Al,label:s="Notifications ({hotkey})",...i}=e,a=Cl(kl,n),o=Nl(n),l=hn.useRef(null),c=hn.useRef(null),d=hn.useRef(null),u=hn.useRef(null),h=Pt(t,u,a.onViewportChange),p=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),m=a.toastCount>0;hn.useEffect(()=>{const e=e=>{0!==r.length&&r.every(t=>e[t]||e.code===t)&&u.current?.focus()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[r]),hn.useEffect(()=>{const e=l.current,t=u.current;if(m&&e&&t){const n=()=>{if(!a.isClosePausedRef.current){const e=new CustomEvent(Tl);t.dispatchEvent(e),a.isClosePausedRef.current=!0}},r=()=>{if(a.isClosePausedRef.current){const e=new CustomEvent(Pl);t.dispatchEvent(e),a.isClosePausedRef.current=!1}},s=t=>{!e.contains(t.relatedTarget)&&r()},i=()=>{e.contains(document.activeElement)||r()};return e.addEventListener("focusin",n),e.addEventListener("focusout",s),e.addEventListener("pointermove",n),e.addEventListener("pointerleave",i),window.addEventListener("blur",n),window.addEventListener("focus",r),()=>{e.removeEventListener("focusin",n),e.removeEventListener("focusout",s),e.removeEventListener("pointermove",n),e.removeEventListener("pointerleave",i),window.removeEventListener("blur",n),window.removeEventListener("focus",r)}}},[m,a.isClosePausedRef]);const f=hn.useCallback(({tabbingDirection:e})=>{const t=o().map(t=>{const n=t.ref.current,r=[n,...Zl(n)];return"forwards"===e?r:r.reverse()});return("forwards"===e?t.reverse():t).flat()},[o]);return hn.useEffect(()=>{const e=u.current;if(e){const t=t=>{const n=t.altKey||t.ctrlKey||t.metaKey;if("Tab"===t.key&&!n){const n=document.activeElement,r=t.shiftKey;if(t.target===e&&r)return void c.current?.focus();const s=f({tabbingDirection:r?"backwards":"forwards"}),i=s.findIndex(e=>e===n);Jl(s.slice(i+1))?t.preventDefault():r?c.current?.focus():d.current?.focus()}};return e.addEventListener("keydown",t),()=>e.removeEventListener("keydown",t)}},[o,f]),Ot.jsxs(Rt,{ref:l,role:"region","aria-label":s.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:m?void 0:"none"},children:[m&&Ot.jsx(Il,{ref:c,onFocusFromOutsideViewport:()=>{Jl(f({tabbingDirection:"forwards"}))}}),Ot.jsx(jl.Slot,{scope:n,children:Ot.jsx(It.ol,{tabIndex:-1,...i,ref:h})}),m&&Ot.jsx(Il,{ref:d,onFocusFromOutsideViewport:()=>{Jl(f({tabbingDirection:"backwards"}))}})]})});Ol.displayName=kl;var Rl="ToastFocusProxy",Il=hn.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=e,i=Cl(Rl,n);return Ot.jsx(yn,{"aria-hidden":!0,tabIndex:0,...s,ref:t,style:{position:"fixed"},onFocus:e=>{const t=e.relatedTarget;!i.viewport?.contains(t)&&r()}})});Il.displayName=Rl;var Dl="Toast",Ll=hn.forwardRef((e,t)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:i,...a}=e,[o=!0,l]=Dt({prop:r,defaultProp:s,onChange:i});return Ot.jsx(Lt,{present:n||o,children:Ot.jsx(Bl,{open:o,...a,ref:t,onClose:()=>l(!1),onPause:zt(e.onPause),onResume:zt(e.onResume),onSwipeStart:Ft(e.onSwipeStart,e=>{e.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Ft(e.onSwipeMove,e=>{const{x:t,y:n}=e.detail.delta;e.currentTarget.setAttribute("data-swipe","move"),e.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${t}px`),e.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${n}px`)}),onSwipeCancel:Ft(e.onSwipeCancel,e=>{e.currentTarget.setAttribute("data-swipe","cancel"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Ft(e.onSwipeEnd,e=>{const{x:t,y:n}=e.detail.delta;e.currentTarget.setAttribute("data-swipe","end"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${t}px`),e.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${n}px`),l(!1)})})})});Ll.displayName=Dl;var[Fl,zl]=Sl(Dl,{onClose(){}}),Bl=hn.forwardRef((e,t)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:i,onClose:a,onEscapeKeyDown:o,onPause:l,onResume:c,onSwipeStart:d,onSwipeMove:u,onSwipeCancel:h,onSwipeEnd:p,...m}=e,f=Cl(Dl,n),[g,x]=hn.useState(null),v=Pt(t,e=>x(e)),y=hn.useRef(null),b=hn.useRef(null),w=s||f.duration,j=hn.useRef(0),N=hn.useRef(w),_=hn.useRef(0),{onToastAdd:S,onToastRemove:M}=f,C=zt(()=>{const e=g?.contains(document.activeElement);e&&f.viewport?.focus(),a()}),E=hn.useCallback(e=>{e&&e!==1/0&&(window.clearTimeout(_.current),j.current=(new Date).getTime(),_.current=window.setTimeout(C,e))},[C]);hn.useEffect(()=>{const e=f.viewport;if(e){const t=()=>{E(N.current),c?.()},n=()=>{const e=(new Date).getTime()-j.current;N.current=N.current-e,window.clearTimeout(_.current),l?.()};return e.addEventListener(Tl,n),e.addEventListener(Pl,t),()=>{e.removeEventListener(Tl,n),e.removeEventListener(Pl,t)}}},[f.viewport,w,l,c,E]),hn.useEffect(()=>{i&&!f.isClosePausedRef.current&&E(w)},[i,w,f.isClosePausedRef,E]),hn.useEffect(()=>(S(),()=>M()),[S,M]);const k=hn.useMemo(()=>g?Xl(g):null,[g]);return f.viewport?Ot.jsxs(Ot.Fragment,{children:[k&&Ot.jsx(Ul,{__scopeToast:n,role:"status","aria-live":"foreground"===r?"assertive":"polite","aria-atomic":!0,children:k}),Ot.jsx(Fl,{scope:n,onClose:C,children:un.createPortal(Ot.jsx(jl.ItemSlot,{scope:n,children:Ot.jsx(Bt,{asChild:!0,onEscapeKeyDown:Ft(o,()=>{f.isFocusedToastEscapeKeyDownRef.current||C(),f.isFocusedToastEscapeKeyDownRef.current=!1}),children:Ot.jsx(It.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":f.swipeDirection,...m,ref:v,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:Ft(e.onKeyDown,e=>{"Escape"===e.key&&(o?.(e.nativeEvent),e.nativeEvent.defaultPrevented||(f.isFocusedToastEscapeKeyDownRef.current=!0,C()))}),onPointerDown:Ft(e.onPointerDown,e=>{0===e.button&&(y.current={x:e.clientX,y:e.clientY})}),onPointerMove:Ft(e.onPointerMove,e=>{if(!y.current)return;const t=e.clientX-y.current.x,n=e.clientY-y.current.y,r=Boolean(b.current),s=["left","right"].includes(f.swipeDirection),i=["left","up"].includes(f.swipeDirection)?Math.min:Math.max,a=s?i(0,t):0,o=s?0:i(0,n),l="touch"===e.pointerType?10:2,c={x:a,y:o},h={originalEvent:e,delta:c};r?(b.current=c,Kl("toast.swipeMove",u,h,{discrete:!1})):Yl(c,f.swipeDirection,l)?(b.current=c,Kl("toast.swipeStart",d,h,{discrete:!1}),e.target.setPointerCapture(e.pointerId)):(Math.abs(t)>l||Math.abs(n)>l)&&(y.current=null)}),onPointerUp:Ft(e.onPointerUp,e=>{const t=b.current,n=e.target;if(n.hasPointerCapture(e.pointerId)&&n.releasePointerCapture(e.pointerId),b.current=null,y.current=null,t){const n=e.currentTarget,r={originalEvent:e,delta:t};Yl(t,f.swipeDirection,f.swipeThreshold)?Kl("toast.swipeEnd",p,r,{discrete:!0}):Kl("toast.swipeCancel",h,r,{discrete:!0}),n.addEventListener("click",e=>e.preventDefault(),{once:!0})}})})})}),f.viewport)})]}):null}),Ul=e=>{const{__scopeToast:t,children:n,...r}=e,s=Cl(Dl,t),[i,a]=hn.useState(!1),[o,l]=hn.useState(!1);return function(e=()=>{}){const t=zt(e);Vt(()=>{let e=0,n=0;return e=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(e),window.cancelAnimationFrame(n)}},[t])}(()=>a(!0)),hn.useEffect(()=>{const e=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(e)},[]),o?null:Ot.jsx(Ut,{asChild:!0,children:Ot.jsx(yn,{...r,children:i&&Ot.jsxs(Ot.Fragment,{children:[s.label," ",n]})})})},Vl=hn.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return Ot.jsx(It.div,{...r,ref:t})});Vl.displayName="ToastTitle";var Hl=hn.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return Ot.jsx(It.div,{...r,ref:t})});Hl.displayName="ToastDescription";var Wl=hn.forwardRef((e,t)=>{const{altText:n,...r}=e;return n.trim()?Ot.jsx(ql,{altText:n,asChild:!0,children:Ot.jsx(Gl,{...r,ref:t})}):null});Wl.displayName="ToastAction";var $l="ToastClose",Gl=hn.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e,s=zl($l,n);return Ot.jsx(ql,{asChild:!0,children:Ot.jsx(It.button,{type:"button",...r,ref:t,onClick:Ft(e.onClick,s.onClose)})})});Gl.displayName=$l;var ql=hn.forwardRef((e,t)=>{const{__scopeToast:n,altText:r,...s}=e;return Ot.jsx(It.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:t})});function Xl(e){const t=[];return Array.from(e.childNodes).forEach(e=>{if(e.nodeType===e.TEXT_NODE&&e.textContent&&t.push(e.textContent),function(e){return e.nodeType===e.ELEMENT_NODE}(e)){const n=e.ariaHidden||e.hidden||"none"===e.style.display,r=""===e.dataset.radixToastAnnounceExclude;if(!n)if(r){const n=e.dataset.radixToastAnnounceAlt;n&&t.push(n)}else t.push(...Xl(e))}}),t}function Kl(e,t,n,{discrete:r}){const s=n.originalEvent.currentTarget,i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),r?Ht(s,i):s.dispatchEvent(i)}var Yl=(e,t,n=0)=>{const r=Math.abs(e.x),s=Math.abs(e.y),i=r>s;return"left"===t||"right"===t?i&&r>n:!i&&s>n};function Zl(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Jl(e){const t=document.activeElement;return e.some(e=>e===t||(e.focus(),document.activeElement!==t))}var Ql=Ol,ec=Ll,tc=Vl,nc=Hl,rc=Wl,sc=Gl;const ic=El,ac=hn.forwardRef(({className:e,...t},n)=>Ot.jsx(Ql,{ref:n,className:bn("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));ac.displayName=Ql.displayName;const oc=wn("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"premium-surface border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),lc=hn.forwardRef(({className:e,variant:t,"data-surface-intensity":n,"data-surface-tone":r,"data-surface":s,...i},a)=>{const o=s??("destructive"===t?"flat":void 0),l=n??("destructive"===t?void 0:"delicate"),c=r??("destructive"===t?void 0:"warm");return Ot.jsx(ec,{ref:a,"data-surface":o,"data-surface-intensity":l,"data-surface-tone":c,className:bn(oc({variant:t}),e),...i})});lc.displayName=ec.displayName;hn.forwardRef(({className:e,...t},n)=>Ot.jsx(rc,{ref:n,className:bn("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t})).displayName=rc.displayName;const cc=hn.forwardRef(({className:e,...t},n)=>Ot.jsx(sc,{ref:n,className:bn("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:Ot.jsx(jn,{className:"h-4 w-4"})}));cc.displayName=sc.displayName;const dc=hn.forwardRef(({className:e,...t},n)=>Ot.jsx(tc,{ref:n,className:bn("text-sm font-semibold",e),...t}));dc.displayName=tc.displayName;const uc=hn.forwardRef(({className:e,...t},n)=>Ot.jsx(nc,{ref:n,className:bn("text-sm opacity-90",e),...t}));function hc(){const{toasts:e}=Nn();return Ot.jsxs(ic,{children:[e.map(function({id:e,title:t,description:n,action:r,...s}){return Ot.jsxs(lc,{...s,children:[Ot.jsxs("div",{className:"grid gap-1",children:[t&&Ot.jsx(dc,{children:t}),n&&Ot.jsx(uc,{children:n})]}),r,Ot.jsx(cc,{})]},e)}),Ot.jsx(ac,{})]})}uc.displayName=nc.displayName;const pc=Object.create(null);pc.open="0",pc.close="1",pc.ping="2",pc.pong="3",pc.message="4",pc.upgrade="5",pc.noop="6";const mc=Object.create(null);Object.keys(pc).forEach(e=>{mc[pc[e]]=e});const fc={type:"error",data:"parser error"},gc="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),xc="function"==typeof ArrayBuffer,vc=e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,yc=({type:e,data:t},n,r)=>gc&&t instanceof Blob?n?r(t):bc(t,r):xc&&(t instanceof ArrayBuffer||vc(t))?n?r(t):bc(new Blob([t]),r):r(pc[e]+(t||"")),bc=(e,t)=>{const n=new FileReader;return n.onload=function(){const e=n.result.split(",")[1];t("b"+(e||""))},n.readAsDataURL(e)};function wc(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let jc;const Nc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",_c="undefined"==typeof Uint8Array?[]:new Uint8Array(256);for(let os=0;os<64;os++)_c[Nc.charCodeAt(os)]=os;const Sc="function"==typeof ArrayBuffer,Mc=(e,t)=>{if("string"!=typeof e)return{type:"message",data:Ec(e,t)};const n=e.charAt(0);if("b"===n)return{type:"message",data:Cc(e.substring(1),t)};return mc[n]?e.length>1?{type:mc[n],data:e.substring(1)}:{type:mc[n]}:fc},Cc=(e,t)=>{if(Sc){const n=(e=>{let t,n,r,s,i,a=.75*e.length,o=e.length,l=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);const c=new ArrayBuffer(a),d=new Uint8Array(c);for(t=0;t<o;t+=4)n=_c[e.charCodeAt(t)],r=_c[e.charCodeAt(t+1)],s=_c[e.charCodeAt(t+2)],i=_c[e.charCodeAt(t+3)],d[l++]=n<<2|r>>4,d[l++]=(15&r)<<4|s>>2,d[l++]=(3&s)<<6|63&i;return c})(e);return Ec(n,t)}return{base64:!0,data:e}},Ec=(e,t)=>"blob"===t?e instanceof Blob?e:new Blob([e]):e instanceof ArrayBuffer?e:e.buffer,kc=String.fromCharCode(30);function Ac(){return new TransformStream({transform(e,t){!function(e,t){gc&&e.data instanceof Blob?e.data.arrayBuffer().then(wc).then(t):xc&&(e.data instanceof ArrayBuffer||vc(e.data))?t(wc(e.data)):yc(e,!1,e=>{jc||(jc=new TextEncoder),t(jc.encode(e))})}(e,n=>{const r=n.length;let s;if(r<126)s=new Uint8Array(1),new DataView(s.buffer).setUint8(0,r);else if(r<65536){s=new Uint8Array(3);const e=new DataView(s.buffer);e.setUint8(0,126),e.setUint16(1,r)}else{s=new Uint8Array(9);const e=new DataView(s.buffer);e.setUint8(0,127),e.setBigUint64(1,BigInt(r))}e.data&&"string"!=typeof e.data&&(s[0]|=128),t.enqueue(s),t.enqueue(n)})}})}let Tc;function Pc(e){return e.reduce((e,t)=>e+t.length,0)}function Oc(e,t){if(e[0].length===t)return e.shift();const n=new Uint8Array(t);let r=0;for(let s=0;s<t;s++)n[s]=e[0][r++],r===e[0].length&&(e.shift(),r=0);return e.length&&r<e[0].length&&(e[0]=e[0].slice(r)),n}function Rc(e){if(e)return function(e){for(var t in Rc.prototype)e[t]=Rc.prototype[t];return e}(e)}Rc.prototype.on=Rc.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},Rc.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},Rc.prototype.off=Rc.prototype.removeListener=Rc.prototype.removeAllListeners=Rc.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var s=0;s<r.length;s++)if((n=r[s])===t||n.fn===t){r.splice(s,1);break}return 0===r.length&&delete this._callbacks["$"+e],this},Rc.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){r=0;for(var s=(n=n.slice(0)).length;r<s;++r)n[r].apply(this,t)}return this},Rc.prototype.emitReserved=Rc.prototype.emit,Rc.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},Rc.prototype.hasListeners=function(e){return!!this.listeners(e).length};const Ic="function"==typeof Promise&&"function"==typeof Promise.resolve?e=>Promise.resolve().then(e):(e,t)=>t(e,0),Dc="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")();function Lc(e,...t){return t.reduce((t,n)=>(e.hasOwnProperty(n)&&(t[n]=e[n]),t),{})}const Fc=Dc.setTimeout,zc=Dc.clearTimeout;function Bc(e,t){t.useNativeTimers?(e.setTimeoutFn=Fc.bind(Dc),e.clearTimeoutFn=zc.bind(Dc)):(e.setTimeoutFn=Dc.setTimeout.bind(Dc),e.clearTimeoutFn=Dc.clearTimeout.bind(Dc))}function Uc(e){return"string"==typeof e?function(e){let t=0,n=0;for(let r=0,s=e.length;r<s;r++)t=e.charCodeAt(r),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n}(e):Math.ceil(1.33*(e.byteLength||e.size))}function Vc(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}class Hc extends Error{constructor(e,t,n){super(e),this.description=t,this.context=n,this.type="TransportError"}}class Wc extends Rc{constructor(e){super(),this.writable=!1,Bc(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,n){return super.emitReserved("error",new Hc(e,t,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(e){"open"===this.readyState&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=Mc(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return-1===e.indexOf(":")?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(443!==this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?":"+this.opts.port:""}_query(e){const t=function(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}(e);return t.length?"?"+t:""}}class $c extends Wc{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let e=0;this._polling&&(e++,this.once("pollComplete",function(){--e||t()})),this.writable||(e++,this.once("drain",function(){--e||t()}))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){((e,t)=>{const n=e.split(kc),r=[];for(let s=0;s<n.length;s++){const e=Mc(n[s],t);if(r.push(e),"error"===e.type)break}return r})(e,this.socket.binaryType).forEach(e=>{if("opening"===this.readyState&&"open"===e.type&&this.onOpen(),"close"===e.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(e)}),"closed"!==this.readyState&&(this._polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};"open"===this.readyState?e():this.once("open",e)}write(e){this.writable=!1,((e,t)=>{const n=e.length,r=new Array(n);let s=0;e.forEach((e,i)=>{yc(e,!1,e=>{r[i]=e,++s===n&&t(r.join(kc))})})})(e,e=>{this.doWrite(e,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=Vc()),this.supportsBinary||t.sid||(t.b64=1),this.createUri(e,t)}}let Gc=!1;try{Gc="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(PUe){}const qc=Gc;function Xc(){}class Kc extends $c{constructor(e){if(super(e),"undefined"!=typeof location){const t="https:"===location.protocol;let n=location.port;n||(n=t?"443":"80"),this.xd="undefined"!=typeof location&&e.hostname!==location.hostname||n!==e.port}}doWrite(e,t){const n=this.request({method:"POST",data:e});n.on("success",t),n.on("error",(e,t)=>{this.onError("xhr post error",e,t)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(e,t)=>{this.onError("xhr poll error",e,t)}),this.pollXhr=e}}let Yc=class e extends Rc{constructor(e,t,n){super(),this.createRequest=e,Bc(this,n),this._opts=n,this._method=n.method||"GET",this._uri=t,this._data=void 0!==n.data?n.data:null,this._create()}_create(){var t;const n=Lc(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(n);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let e in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(e)&&r.setRequestHeader(e,this._opts.extraHeaders[e])}}catch(s){}if("POST"===this._method)try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(s){}try{r.setRequestHeader("Accept","*/*")}catch(s){}null===(t=this._opts.cookieJar)||void 0===t||t.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var e;3===r.readyState&&(null===(e=this._opts.cookieJar)||void 0===e||e.parseCookies(r.getResponseHeader("set-cookie"))),4===r.readyState&&(200===r.status||1223===r.status?this._onLoad():this.setTimeoutFn(()=>{this._onError("number"==typeof r.status?r.status:0)},0))},r.send(this._data)}catch(s){return void this.setTimeoutFn(()=>{this._onError(s)},0)}"undefined"!=typeof document&&(this._index=e.requestsCount++,e.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(t){if(void 0!==this._xhr&&null!==this._xhr){if(this._xhr.onreadystatechange=Xc,t)try{this._xhr.abort()}catch(n){}"undefined"!=typeof document&&delete e.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}};if(Yc.requestsCount=0,Yc.requests={},"undefined"!=typeof document)if("function"==typeof attachEvent)attachEvent("onunload",Zc);else if("function"==typeof addEventListener){addEventListener("onpagehide"in Dc?"pagehide":"unload",Zc,!1)}function Zc(){for(let e in Yc.requests)Yc.requests.hasOwnProperty(e)&&Yc.requests[e].abort()}const Jc=function(){const e=Qc({xdomain:!1});return e&&null!==e.responseType}();function Qc(e){const t=e.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!t||qc))return new XMLHttpRequest}catch(n){}if(!t)try{return new(Dc[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(n){}}const ed="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class td extends Wc{get name(){return"websocket"}doOpen(){const e=this.uri(),t=this.opts.protocols,n=ed?{}:Lc(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,n)}catch(PUe){return this.emitReserved("error",PUe)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],r=t===e.length-1;yc(n,this.supportsBinary,e=>{try{this.doWrite(n,e)}catch(t){}r&&Ic(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){void 0!==this.ws&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=Vc()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}const nd=Dc.WebSocket||Dc.MozWebSocket;const rd={websocket:class extends td{createSocket(e,t,n){return ed?new nd(e,t,n):t?new nd(e,t):new nd(e)}doWrite(e,t){this.ws.send(t)}},webtransport:class extends Wc{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(PUe){return this.emitReserved("error",PUe)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const t=function(e,t){Tc||(Tc=new TextDecoder);const n=[];let r=0,s=-1,i=!1;return new TransformStream({transform(a,o){for(n.push(a);;){if(0===r){if(Pc(n)<1)break;const e=Oc(n,1);i=!(128&~e[0]),s=127&e[0],r=s<126?3:126===s?1:2}else if(1===r){if(Pc(n)<2)break;const e=Oc(n,2);s=new DataView(e.buffer,e.byteOffset,e.length).getUint16(0),r=3}else if(2===r){if(Pc(n)<8)break;const e=Oc(n,8),t=new DataView(e.buffer,e.byteOffset,e.length),i=t.getUint32(0);if(i>Math.pow(2,21)-1){o.enqueue(fc);break}s=i*Math.pow(2,32)+t.getUint32(4),r=3}else{if(Pc(n)<s)break;const e=Oc(n,s);o.enqueue(Mc(i?e:Tc.decode(e),t)),r=0}if(0===s||s>e){o.enqueue(fc);break}}}})}(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=e.readable.pipeThrough(t).getReader(),r=Ac();r.readable.pipeTo(e.writable),this._writer=r.writable.getWriter();const s=()=>{n.read().then(({done:e,value:t})=>{e||(this.onPacket(t),s())}).catch(e=>{})};s();const i={type:"open"};this.query.sid&&(i.data=`{"sid":"${this.query.sid}"}`),this._writer.write(i).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],r=t===e.length-1;this._writer.write(n).then(()=>{r&&Ic(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;null===(e=this._transport)||void 0===e||e.close()}},polling:class extends Kc{constructor(e){super(e);const t=e&&e.forceBase64;this.supportsBinary=Jc&&!t}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new Yc(Qc,this.uri(),e)}}},sd=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,id=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function ad(e){if(e.length>8e3)throw"URI too long";const t=e,n=e.indexOf("["),r=e.indexOf("]");-1!=n&&-1!=r&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length));let s=sd.exec(e||""),i={},a=14;for(;a--;)i[id[a]]=s[a]||"";return-1!=n&&-1!=r&&(i.source=t,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=function(e,t){const n=/\/{2,9}/g,r=t.replace(n,"/").split("/");"/"!=t.slice(0,1)&&0!==t.length||r.splice(0,1);"/"==t.slice(-1)&&r.splice(r.length-1,1);return r}(0,i.path),i.queryKey=function(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(e,t,r){t&&(n[t]=r)}),n}(0,i.query),i}const od="function"==typeof addEventListener&&"function"==typeof removeEventListener,ld=[];od&&addEventListener("offline",()=>{ld.forEach(e=>e())},!1);class cd extends Rc{constructor(e,t){if(super(),this.binaryType="arraybuffer",this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&"object"==typeof e&&(t=e,e=null),e){const n=ad(e);t.hostname=n.host,t.secure="https"===n.protocol||"wss"===n.protocol,t.port=n.port,n.query&&(t.query=n.query)}else t.host&&(t.hostname=ad(t.host).host);Bc(this,t),this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach(e=>{const t=e.prototype.name;this.transports.push(t),this._transportsByName[t]=e}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),"string"==typeof this.opts.query&&(this.opts.query=function(e){let t={},n=e.split("&");for(let r=0,s=n.length;r<s;r++){let e=n[r].split("=");t[decodeURIComponent(e[0])]=decodeURIComponent(e[1])}return t}(this.opts.query)),od&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),"localhost"!==this.hostname&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},ld.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=4,t.transport=e,this.id&&(t.sid=this.id);const n=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](n)}_open(){if(0===this.transports.length)return void this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);const e=this.opts.rememberUpgrade&&cd.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket")?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",e=>this._onClose("transport close",e))}onOpen(){this.readyState="open",cd.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush()}_onPacket(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const t=new Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let t=0;t<this.writeBuffer.length;t++){const n=this.writeBuffer[t].data;if(n&&(e+=Uc(n)),t>0&&e>this._maxPayload)return this.writeBuffer.slice(0,t);e+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,Ic(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,t,n){return this._sendPacket("message",e,t,n),this}send(e,t,n){return this._sendPacket("message",e,t,n),this}_sendPacket(e,t,n,r){if("function"==typeof t&&(r=t,t=void 0),"function"==typeof n&&(r=n,n=null),"closing"===this.readyState||"closed"===this.readyState)return;(n=n||{}).compress=!1!==n.compress;const s={type:e,data:t,options:n};this.emitReserved("packetCreate",s),this.writeBuffer.push(s),r&&this.once("flush",r),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},n=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():e()}):this.upgrading?n():e()),this}_onError(e){if(cd.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&"opening"===this.readyState)return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),od&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const e=ld.indexOf(this._offlineEventListener);-1!==e&&ld.splice(e,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}cd.protocol=4;class dd extends cd{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),"open"===this.readyState&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),n=!1;cd.priorWebsocketSuccess=!1;const r=()=>{n||(t.send([{type:"ping",data:"probe"}]),t.once("packet",e=>{if(!n)if("pong"===e.type&&"probe"===e.data){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;cd.priorWebsocketSuccess="websocket"===t.name,this.transport.pause(()=>{n||"closed"!==this.readyState&&(c(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{const e=new Error("probe error");e.transport=t.name,this.emitReserved("upgradeError",e)}}))};function s(){n||(n=!0,c(),t.close(),t=null)}const i=e=>{const n=new Error("probe error: "+e);n.transport=t.name,s(),this.emitReserved("upgradeError",n)};function a(){i("transport closed")}function o(){i("socket closed")}function l(e){t&&e.name!==t.name&&s()}const c=()=>{t.removeListener("open",r),t.removeListener("error",i),t.removeListener("close",a),this.off("close",o),this.off("upgrading",l)};t.once("open",r),t.once("error",i),t.once("close",a),this.once("close",o),this.once("upgrading",l),-1!==this._upgrades.indexOf("webtransport")&&"webtransport"!==e?this.setTimeoutFn(()=>{n||t.open()},200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const t=[];for(let n=0;n<e.length;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}let ud=class extends dd{constructor(e,t={}){const n="object"==typeof e?e:t;(!n.transports||n.transports&&"string"==typeof n.transports[0])&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map(e=>rd[e]).filter(e=>!!e)),super(e,n)}};const hd="function"==typeof ArrayBuffer,pd=Object.prototype.toString,md="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===pd.call(Blob),fd="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===pd.call(File);function gd(e){return hd&&(e instanceof ArrayBuffer||(e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer)(e))||md&&e instanceof Blob||fd&&e instanceof File}function xd(e,t){if(!e||"object"!=typeof e)return!1;if(Array.isArray(e)){for(let t=0,n=e.length;t<n;t++)if(xd(e[t]))return!0;return!1}if(gd(e))return!0;if(e.toJSON&&"function"==typeof e.toJSON&&1===arguments.length)return xd(e.toJSON(),!0);for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&xd(e[n]))return!0;return!1}function vd(e){const t=[],n=e.data,r=e;return r.data=yd(n,t),r.attachments=t.length,{packet:r,buffers:t}}function yd(e,t){if(!e)return e;if(gd(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}if(Array.isArray(e)){const n=new Array(e.length);for(let r=0;r<e.length;r++)n[r]=yd(e[r],t);return n}if("object"==typeof e&&!(e instanceof Date)){const n={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=yd(e[r],t));return n}return e}function bd(e,t){return e.data=wd(e.data,t),delete e.attachments,e}function wd(e,t){if(!e)return e;if(e&&!0===e._placeholder){if("number"==typeof e.num&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=wd(e[n],t);else if("object"==typeof e)for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=wd(e[n],t));return e}const jd=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"];var Nd,_d;(_d=Nd||(Nd={}))[_d.CONNECT=0]="CONNECT",_d[_d.DISCONNECT=1]="DISCONNECT",_d[_d.EVENT=2]="EVENT",_d[_d.ACK=3]="ACK",_d[_d.CONNECT_ERROR=4]="CONNECT_ERROR",_d[_d.BINARY_EVENT=5]="BINARY_EVENT",_d[_d.BINARY_ACK=6]="BINARY_ACK";function Sd(e){return"[object Object]"===Object.prototype.toString.call(e)}class Md extends Rc{constructor(e){super(),this.reviver=e}add(e){let t;if("string"==typeof e){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const n=t.type===Nd.BINARY_EVENT;n||t.type===Nd.BINARY_ACK?(t.type=n?Nd.EVENT:Nd.ACK,this.reconstructor=new Cd(t),0===t.attachments&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else{if(!gd(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t))}}decodeString(e){let t=0;const n={type:Number(e.charAt(0))};if(void 0===Nd[n.type])throw new Error("unknown packet type "+n.type);if(n.type===Nd.BINARY_EVENT||n.type===Nd.BINARY_ACK){const r=t+1;for(;"-"!==e.charAt(++t)&&t!=e.length;);const s=e.substring(r,t);if(s!=Number(s)||"-"!==e.charAt(t))throw new Error("Illegal attachments");n.attachments=Number(s)}if("/"===e.charAt(t+1)){const r=t+1;for(;++t;){if(","===e.charAt(t))break;if(t===e.length)break}n.nsp=e.substring(r,t)}else n.nsp="/";const r=e.charAt(t+1);if(""!==r&&Number(r)==r){const r=t+1;for(;++t;){const n=e.charAt(t);if(null==n||Number(n)!=n){--t;break}if(t===e.length)break}n.id=Number(e.substring(r,t+1))}if(e.charAt(++t)){const r=this.tryParse(e.substr(t));if(!Md.isPayloadValid(n.type,r))throw new Error("invalid payload");n.data=r}return n}tryParse(e){try{return JSON.parse(e,this.reviver)}catch(t){return!1}}static isPayloadValid(e,t){switch(e){case Nd.CONNECT:return Sd(t);case Nd.DISCONNECT:return void 0===t;case Nd.CONNECT_ERROR:return"string"==typeof t||Sd(t);case Nd.EVENT:case Nd.BINARY_EVENT:return Array.isArray(t)&&("number"==typeof t[0]||"string"==typeof t[0]&&-1===jd.indexOf(t[0]));case Nd.ACK:case Nd.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Cd{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const e=bd(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const Ed=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Md,Encoder:class{constructor(e){this.replacer=e}encode(e){return e.type!==Nd.EVENT&&e.type!==Nd.ACK||!xd(e)?[this.encodeAsString(e)]:this.encodeAsBinary({type:e.type===Nd.EVENT?Nd.BINARY_EVENT:Nd.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id})}encodeAsString(e){let t=""+e.type;return e.type!==Nd.BINARY_EVENT&&e.type!==Nd.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=vd(e),n=this.encodeAsString(t.packet),r=t.buffers;return r.unshift(n),r}},get PacketType(){return Nd},protocol:5},Symbol.toStringTag,{value:"Module"}));function kd(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const Ad=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Td extends Rc{constructor(e,t,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[kd(e,"open",this.onopen.bind(this)),kd(e,"packet",this.onpacket.bind(this)),kd(e,"error",this.onerror.bind(this)),kd(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){var n,r,s;if(Ad.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;const i={type:Nd.EVENT,data:t,options:{}};if(i.options.compress=!1!==this.flags.compress,"function"==typeof t[t.length-1]){const e=this.ids++,n=t.pop();this._registerAckCallback(e,n),i.id=e}const a=null===(r=null===(n=this.io.engine)||void 0===n?void 0:n.transport)||void 0===r?void 0:r.writable,o=this.connected&&!(null===(s=this.io.engine)||void 0===s?void 0:s._hasPingExpired());return this.flags.volatile&&!a||(o?(this.notifyOutgoingListeners(i),this.packet(i)):this.sendBuffer.push(i)),this.flags={},this}_registerAckCallback(e,t){var n;const r=null!==(n=this.flags.timeout)&&void 0!==n?n:this._opts.ackTimeout;if(void 0===r)return void(this.acks[e]=t);const s=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let t=0;t<this.sendBuffer.length;t++)this.sendBuffer[t].id===e&&this.sendBuffer.splice(t,1);t.call(this,new Error("operation has timed out"))},r),i=(...e)=>{this.io.clearTimeoutFn(s),t.apply(this,e)};i.withError=!0,this.acks[e]=i}emitWithAck(e,...t){return new Promise((n,r)=>{const s=(e,t)=>e?r(e):n(t);s.withError=!0,t.push(s),this.emit(e,...t)})}_addToQueue(e){let t;"function"==typeof e[e.length-1]&&(t=e.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((e,...r)=>{if(n!==this._queue[0])return;return null!==e?n.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(e)):(this._queue.shift(),t&&t(null,...r)),n.pending=!1,this._drainQueue()}),this._queue.push(n),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||0===this._queue.length)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){"function"==typeof this.auth?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:Nd.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(t=>String(t.id)===e)){const t=this.acks[e];delete this.acks[e],t.withError&&t.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case Nd.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Nd.EVENT:case Nd.BINARY_EVENT:this.onevent(e);break;case Nd.ACK:case Nd.BINARY_ACK:this.onack(e);break;case Nd.DISCONNECT:this.ondisconnect();break;case Nd.CONNECT_ERROR:this.destroy();const t=new Error(e.data.message);t.data=e.data.data,this.emitReserved("connect_error",t)}}onevent(e){const t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const n of t)n.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&"string"==typeof e[e.length-1]&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let n=!1;return function(...r){n||(n=!0,t.packet({type:Nd.ACK,id:e,data:r}))}}onack(e){const t=this.acks[e.id];"function"==typeof t&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Nd.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const n of t)n.apply(this,e.data)}}}function Pd(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}Pd.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=1&Math.floor(10*t)?e+n:e-n}return 0|Math.min(e,this.max)},Pd.prototype.reset=function(){this.attempts=0},Pd.prototype.setMin=function(e){this.ms=e},Pd.prototype.setMax=function(e){this.max=e},Pd.prototype.setJitter=function(e){this.jitter=e};class Od extends Rc{constructor(e,t){var n;super(),this.nsps={},this.subs=[],e&&"object"==typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.opts=t,Bc(this,t),this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(n=t.randomizationFactor)&&void 0!==n?n:.5),this.backoff=new Pd({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this._readyState="closed",this.uri=e;const r=t.parser||Ed;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this._autoConnect=!1!==t.autoConnect,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}randomizationFactor(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new ud(this.uri,this.opts);const t=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const r=kd(t,"open",function(){n.onopen(),e&&e()}),s=t=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",t),e?e(t):this.maybeReconnectOnOpen()},i=kd(t,"error",s);if(!1!==this._timeout){const e=this._timeout,n=this.setTimeoutFn(()=>{r(),s(new Error("timeout")),t.close()},e);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}return this.subs.push(r),this.subs.push(i),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(kd(e,"ping",this.onping.bind(this)),kd(e,"data",this.ondata.bind(this)),kd(e,"error",this.onerror.bind(this)),kd(e,"close",this.onclose.bind(this)),kd(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(t){this.onclose("parse error",t)}}ondecoded(e){Ic(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let n=this.nsps[e];return n?this._autoConnect&&!n.active&&n.connect():(n=new Td(this,e,t),this.nsps[e]=n),n}_destroy(e){const t=Object.keys(this.nsps);for(const n of t){if(this.nsps[n].active)return}this._close()}_packet(e){const t=this.encoder.encode(e);for(let n=0;n<t.length;n++)this.engine.write(t[n],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var n;this.cleanup(),null===(n=this.engine)||void 0===n||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect||e.open(t=>{t?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",t)):e.onreconnect()}))},t);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Rd={};function Id(e,t){"object"==typeof e&&(t=e,e=void 0);const n=function(e,t="",n){let r=e;n=n||"undefined"!=typeof location&&location,null==e&&(e=n.protocol+"//"+n.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?n.protocol+e:n.host+e),/^(https?|wss?):\/\//.test(e)||(e=void 0!==n?n.protocol+"//"+e:"https://"+e),r=ad(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const s=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+s+":"+r.port+t,r.href=r.protocol+"://"+s+(n&&n.port===r.port?"":":"+r.port),r}(e,(t=t||{}).path||"/socket.io"),r=n.source,s=n.id,i=n.path,a=Rd[s]&&i in Rd[s].nsps;let o;return t.forceNew||t["force new connection"]||!1===t.multiplex||a?o=new Od(r,t):(Rd[s]||(Rd[s]=new Od(r,t)),o=Rd[s]),n.query&&!t.query&&(t.query=n.queryKey),o.socket(n.path,t)}Object.assign(Id,{Manager:Od,Socket:Td,io:Id,connect:Id});const Dd=hn.createContext(null);function Ld({children:e}){const{user:t,isAuthenticated:n}=Ua(),{toast:r}=Nn(),s=hn.useRef(null),[i,a]=hn.useState(!1),[o,l]=hn.useState(new Map),[c,d]=hn.useState(new Map);hn.useEffect(()=>{if(!n||!t)return void(s.current&&(s.current.disconnect(),s.current=null,a(!1)));if(s.current)return;const e=Id({transports:["websocket","polling"],reconnection:!0,reconnectionAttempts:5,reconnectionDelay:1e3,withCredentials:!0});return s.current=e,e.on("connect",()=>{a(!0)}),e.on("disconnect",e=>{a(!1)}),e.on("connect_error",e=>{a(!1)}),e.on("notification",e=>{r({title:e.title,description:e.message})}),e.on("presence:updated",({userId:e,status:t})=>{l(n=>{const r=new Map(n);return r.set(e,t),r})}),e.on("typing:start",({userId:e,conversationId:t})=>{d(n=>{const r=new Map(n),s=r.get(t)||[];return s.includes(e)||r.set(t,[...s,e]),r})}),e.on("typing:stop",({userId:e,conversationId:t})=>{d(n=>{const r=new Map(n),s=r.get(t)||[];return r.set(t,s.filter(t=>t!==e)),r})}),e.on("message:new",e=>{window.dispatchEvent(new CustomEvent("new-message",{detail:e}))}),e.on("business:update",e=>{window.dispatchEvent(new CustomEvent("business-update",{detail:e}))}),e.on("order:update",e=>{r({title:"Order Updated",description:`Order #${e.id.slice(-8)} is now ${e.status}`}),window.dispatchEvent(new CustomEvent("order-update",{detail:e}))}),()=>{e.disconnect(),s.current=null,a(!1)}},[n,t,r]);const u={socket:s.current,connected:i,onlineUsers:o,typingUsers:c};return Ot.jsx(Dd.Provider,{value:u,children:e})}function Fd(){const[e]=_n(),{toast:t}=Nn();return hn.useEffect(()=>{const n=new URLSearchParams(window.location.search),r=n.get("error"),s=n.get("reason");if(r&&"/api/login"===e){let e="Authentication Error",n="An error occurred during login. Please try again.";switch(r){case"auth_failed":e="Login Failed",n=s?`Authentication failed: ${decodeURIComponent(s)}`:"Unable to authenticate with Replit. Please try again.";break;case"session_failed":e="Session Error",n=s?`Session creation failed: ${decodeURIComponent(s)}`:"Unable to create your session. Please try logging in again.";break;case"strategy_not_found":e="Configuration Error",n="Authentication is not properly configured for this domain. Please contact support.";break;default:n=s?decodeURIComponent(s):"An unexpected error occurred. Please try again."}t({title:e,description:n,variant:"destructive"}),window.history.replaceState({},"",window.location.pathname)}},[e,t]),null}function zd(){const{toast:e}=Nn();return hn.useEffect(()=>{const t=async()=>{try{const t=await fetch("/api/auth/session-info");if(t.ok){const n=await t.json();if(!n.expires)return;const r=new Date(n.expires).getTime(),s=r-Date.now();if(s>0&&s<=864e5){const t=Math.round(s/36e5);e({title:"Session Expiring Soon",description:`Your session will expire in approximately ${t} hours. Please save your work and log in again to avoid losing access.`,variant:"default"})}}}catch(PUe){}},n=setInterval(t,36e5);return t(),()=>clearInterval(n)},[e]),null}function Bd(){return Ot.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:Ot.jsx(Sn,{className:"w-full max-w-md mx-4",children:Ot.jsxs(Mn,{className:"pt-6",children:[Ot.jsxs("div",{className:"flex mb-4 gap-2",children:[Ot.jsx(Cn,{className:"h-8 w-8 text-red-500"}),Ot.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),Ot.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}function Ud(){const[e,t]=hn.useState(""),[n,r]=hn.useState(void 0),[s,i]=hn.useState(127),[a]=hn.useState(2847),[o]=hn.useState(18392);hn.useState(!0),hn.useEffect(()=>{const e=setInterval(()=>{i(e=>{const t=e+(Math.floor(10*Math.random())-5);return Math.max(50,Math.min(300,t))})},5e3);return()=>clearInterval(e)},[]);return Ot.jsxs("section",{className:"relative min-h-screen flex items-center justify-center overflow-hidden miami-hero-section",children:[Ot.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-fixed",style:{backgroundImage:"linear-gradient(135deg, rgba(25,182,246,0.08) 0%, rgba(255,255,255,0.12) 25%, rgba(250,245,220,0.10) 50%, rgba(255,152,67,0.08) 75%, rgba(255,255,255,0.12) 100%), url('https://images.unsplash.com/photo-1507525428034-b723cf961d3e?ixlib=rb-4.0.3&auto=format&fit=crop&w=2073&q=80')"}}),Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-white/3 to-cyan-500/8"}),Ot.jsx("div",{className:"absolute inset-0 miami-mesh-overlay opacity-40"}),Ot.jsxs("div",{className:"absolute top-20 right-10 miami-float float-gentle group premium-pop stagger-1",children:[Ot.jsx(En,{className:"text-4xl text-cyan-400 group-hover:text-cyan-300 transition-colors duration-500 drop-shadow-lg",size:40}),Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-cyan-400/20 to-emerald-400/20 opacity-0 group-hover:opacity-100 transition-opacity duration-500 rounded-full blur-xl"})]}),Ot.jsxs("div",{className:"absolute bottom-20 left-10 miami-float float-medium group premium-pop stagger-2",style:{animationDelay:"2s"},children:[Ot.jsx(kn,{className:"text-3xl text-orange-400 group-hover:text-orange-300 transition-colors duration-500 drop-shadow-lg",size:32}),Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-orange-400/20 to-pink-400/20 opacity-0 group-hover:opacity-100 transition-opacity duration-500 rounded-full blur-xl"})]}),Ot.jsxs("div",{className:"absolute top-1/3 left-20 miami-float float-dynamic group premium-pop stagger-3",style:{animationDelay:"4s"},children:[Ot.jsx(An,{className:"text-2xl text-pink-400 group-hover:text-pink-300 transition-colors duration-500 drop-shadow-lg",size:24}),Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-pink-400/20 to-cyan-400/20 opacity-0 group-hover:opacity-100 transition-opacity duration-500 rounded-full blur-xl"})]}),Ot.jsxs("div",{className:"relative z-10 text-center text-slate-900 max-w-4xl mx-auto px-4",children:[Ot.jsxs(wo.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex flex-wrap justify-center gap-3 mb-6",children:[Ot.jsxs(Tn,{className:"bg-gradient-to-r from-purple-500 to-pink-500 text-white px-4 py-2 text-sm font-semibold shadow-lg hover:shadow-xl transition-all duration-300",children:[Ot.jsx(Pn,{className:"w-4 h-4 mr-2"}),"AI-Powered Platform"]}),Ot.jsx(wo.div,{className:"inline-flex items-center",animate:{scale:[1,1.05,1]},transition:{duration:2,repeat:1/0},children:Ot.jsxs(Tn,{className:"bg-gradient-to-r from-green-500 to-emerald-500 text-white px-4 py-2 text-sm font-semibold shadow-lg hover:shadow-xl transition-all duration-300",children:[Ot.jsx(On,{className:"w-4 h-4 mr-2"}),Ot.jsx(jo,{mode:"wait",children:Ot.jsxs(wo.span,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},transition:{duration:.3},children:[s," Active Now"]},s)})]})}),Ot.jsxs(Tn,{className:"bg-gradient-to-r from-blue-500 to-cyan-500 text-white px-4 py-2 text-sm font-semibold shadow-lg hover:shadow-xl transition-all duration-300",children:[Ot.jsx(Rn,{className:"w-4 h-4 mr-2"}),"Verified Businesses"]})]}),Ot.jsxs("h1",{className:"text-5xl md:text-7xl font-serif font-bold mb-6 leading-tight miami-heading entrance-fade-up bg-white/80 backdrop-blur-sm px-8 py-4 rounded-2xl inline-block",children:[Ot.jsx("span",{className:"text-gray-900",children:"Life's "}),Ot.jsx("span",{className:"miami-gradient-text",children:"BETTER"}),Ot.jsx("span",{className:"text-gray-900",children:" when you're"}),Ot.jsx("br",{}),Ot.jsx("span",{className:"text-gray-900",children:"Living Like a "}),Ot.jsx("span",{className:"miami-accent-text",children:"LOCAL"})]}),Ot.jsx("p",{className:"text-xl md:text-2xl mb-8 text-gray-900 max-w-2xl mx-auto leading-relaxed miami-body-text entrance-fade-up stagger-1 bg-white/85 backdrop-blur-sm px-6 py-4 rounded-xl font-medium",children:"Discover, connect, and thrive with Florida's most vibrant business community. Where local entrepreneurs build lasting relationships and grow together."}),Ot.jsxs(wo.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.3},className:"flex flex-wrap justify-center gap-6 mb-12",children:[Ot.jsxs("div",{className:"flex items-center gap-2 bg-white/90 backdrop-blur-md px-4 py-2 rounded-full shadow-lg hover:shadow-xl transition-all duration-300",children:[Ot.jsx(In,{className:"w-5 h-5 text-yellow-500"}),Ot.jsx("span",{className:"font-bold text-gray-900",children:a.toLocaleString()}),Ot.jsx("span",{className:"text-sm font-semibold text-gray-900",children:"Businesses"})]}),Ot.jsxs("div",{className:"flex items-center gap-2 bg-white/90 backdrop-blur-md px-4 py-2 rounded-full shadow-lg hover:shadow-xl transition-all duration-300",children:[Ot.jsx(Dn,{className:"w-5 h-5 text-green-500"}),Ot.jsx("span",{className:"font-bold text-gray-900",children:o.toLocaleString()}),Ot.jsx("span",{className:"text-sm font-semibold text-gray-900",children:"Transactions"})]}),Ot.jsxs("div",{className:"flex items-center gap-2 bg-white/90 backdrop-blur-md px-4 py-2 rounded-full shadow-lg hover:shadow-xl transition-all duration-300",children:[Ot.jsx(An,{className:"w-5 h-5 text-purple-500"}),Ot.jsx("span",{className:"font-bold text-gray-900",children:"AI-Enhanced"}),Ot.jsx("span",{className:"text-sm font-semibold text-gray-900",children:"Search & Insights"})]})]}),Ot.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center mb-16",children:[Ot.jsx(Ln,{variant:"fl-gold",size:"xl",className:"miami-hover-lift ambient-glow-gold shimmer-gold-hover entrance-scale-fade stagger-2",onClick:e=>{try{window.location.href="/api/login"}catch(t){alert("Failed to initiate login. Please refresh the page and try again.")}},"data-testid":"button-join-community",children:"Join the Community"}),Ot.jsx(Ln,{variant:"fl-glass",size:"xl",className:"miami-hover-lift ambient-glow-teal shimmer-on-hover entrance-scale-fade stagger-3","data-testid":"button-explore-businesses",children:"Explore Businesses"})]}),Ot.jsx("div",{className:"max-w-3xl mx-auto premium-search-hero entrance-fade-up stagger-4",children:Ot.jsxs("div",{className:"miami-glass rounded-2xl p-8 miami-card-glow ambient-glow-cyan elevation-3 mouse-track-glow dynamic-gradient-bg",children:[Ot.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[Ot.jsxs("div",{className:"flex-1 relative group",children:[Ot.jsx(Fn,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-5 w-5 text-slate-600 group-hover:text-primary transition-colors duration-300"}),Ot.jsx(zn,{type:"search",placeholder:"What type of business are you looking for?",value:e,onChange:e=>t(e.target.value),className:"w-full pl-12 pr-4 py-4 premium-search-input-hero text-slate-900 placeholder-slate-700 font-medium focus:placeholder-primary/60 transition-all duration-300 bg-white","data-testid":"input-search-businesses"}),Ot.jsx("div",{className:"absolute inset-0 rounded-lg bg-gradient-to-r from-primary/5 to-accent/5 opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none"})]}),Ot.jsxs("div",{className:"flex-1 relative group",children:[Ot.jsx(Bn,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-5 w-5 text-slate-600 group-hover:text-secondary transition-colors duration-300"}),Ot.jsxs(Un,{value:n,onValueChange:r,children:[Ot.jsx(Vn,{className:"w-full pl-12 pr-4 py-4 premium-search-input-hero text-slate-900 border-slate-300 hover:border-slate-400 focus:border-primary/60 transition-all duration-300","data-testid":"select-city",children:Ot.jsx(Hn,{placeholder:"Select City"})}),Ot.jsxs(Wn,{className:"premium-dropdown",children:[Ot.jsx($n,{value:"miami",children:" Miami"}),Ot.jsx($n,{value:"orlando",children:" Orlando"}),Ot.jsx($n,{value:"tampa",children:" Tampa"}),Ot.jsx($n,{value:"jacksonville",children:" Jacksonville"}),Ot.jsx($n,{value:"fort-lauderdale",children:" Fort Lauderdale"}),Ot.jsx($n,{value:"tallahassee",children:" Tallahassee"})]})]}),Ot.jsx("div",{className:"absolute inset-0 rounded-lg bg-gradient-to-r from-secondary/5 to-primary/5 opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none"})]}),Ot.jsxs(Ln,{variant:"default",size:"lg",className:"px-8 py-4 metallic hover-lift btn-press group font-semibold",onClick:()=>{},"data-testid":"button-search-hero",children:[Ot.jsx(Fn,{className:"h-5 w-5 mr-3 group-hover:scale-110 transition-transform duration-300"}),Ot.jsx("span",{className:"relative z-10",children:"Search"}),Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary/20 to-accent/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300 rounded-md"})]})]}),Ot.jsx("div",{className:"flex justify-center mt-4",children:Ot.jsx(Va,{variant:"inline"})}),Ot.jsx("div",{className:"flex flex-wrap gap-3 mt-4 justify-center",children:["Restaurants","Wellness","Beauty","Shopping","Events"].map((e,t)=>Ot.jsxs("button",{className:`px-4 py-2 bg-white/90 backdrop-blur-sm border-2 border-slate-300 text-slate-900 hover:text-slate-900 text-sm font-semibold rounded-full hover-lift transition-all duration-300 group shadow-md hover:shadow-lg ${["ambient-glow-orange","ambient-glow-teal","ambient-glow-pink","ambient-glow-purple","ambient-glow-gold"][t]}`,children:[Ot.jsx("span",{className:"relative z-10",children:e}),Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary/10 to-accent/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300 rounded-full"})]},e))})]})})]}),Ot.jsxs("div",{className:"absolute bottom-8 left-1/2 transform -translate-x-1/2 animate-bounce group cursor-pointer bg-white/80 backdrop-blur-sm rounded-full p-2",children:[Ot.jsx(Gn,{className:"text-slate-900 group-hover:text-primary text-2xl transition-colors duration-300",size:24}),Ot.jsx("div",{className:"absolute inset-0 bg-primary/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300 rounded-full"})]})]})}const Vd="/assets/images/elegant_restaurant_i_5b327bb1-CvO2W4yK.jpg",Hd="/assets/images/luxury_spa_wellness__78221b18-JaFjwzBz.jpg",Wd="/assets/images/beach_wedding_ceremo_59009157-DscHmboQ.jpg",$d=e=>{const t=e.category?.toLowerCase()||"",n=e.tags||[],r=e.name?.toLowerCase()||"",s=e.description?.toLowerCase()||"";if(t.includes("restaurant")||t.includes("food")||t.includes("dining")||n.some(e=>["restaurant","food","dining","culinary","cuisine","chef"].includes(e.toLowerCase()))||r.includes("restaurant")||r.includes("kitchen")||r.includes("bistro")||s.includes("food")||s.includes("dining")||s.includes("restaurant")){const e=[Wa,$a,Ga,Vd,qa,Xa];return e[Math.floor(Math.random()*e.length)]}if(t.includes("wellness")||t.includes("spa")||t.includes("health")||t.includes("fitness")||n.some(e=>["wellness","spa","massage","yoga","meditation","health","fitness","beauty"].includes(e.toLowerCase()))||r.includes("spa")||r.includes("wellness")||r.includes("yoga")||r.includes("fitness")||s.includes("wellness")||s.includes("spa")||s.includes("massage")){const e=[Hd,"/assets/images/luxury_spa_wellness__78221b18-JaFjwzBz.jpg",Ka,Ya,Za,Ja,"/assets/images/yoga_meditation_peac_dd325b82-2CZgT960.jpg","/assets/images/yoga_meditation_peac_dd325b82-2CZgT960.jpg"];return e[Math.floor(Math.random()*e.length)]}if(t.includes("wedding")||t.includes("event")||t.includes("planning")||n.some(e=>["wedding","event","planning","ceremony","celebration","party"].includes(e.toLowerCase()))||r.includes("wedding")||r.includes("event")||r.includes("planner")||s.includes("wedding")||s.includes("event")||s.includes("ceremony")){const e=[Qa,Wd,"/assets/images/beach_wedding_ceremo_b81563df-BTNZTPRW.jpg",eo];return e[Math.floor(Math.random()*e.length)]}if(t.includes("photography")||t.includes("creative")||t.includes("art")||n.some(e=>["photography","photographer","creative","art","design","visual"].includes(e.toLowerCase()))||r.includes("photo")||r.includes("creative")||r.includes("studio")||s.includes("photography")||s.includes("creative")||s.includes("photo")){const e=[to,no,"/assets/images/professional_photogr_d7e01cb5-Cir8Neu9.jpg",ro];return e[Math.floor(Math.random()*e.length)]}if(t.includes("hotel")||t.includes("travel")||t.includes("hospitality")||n.some(e=>["hotel","travel","hospitality","accommodation","tourism"].includes(e.toLowerCase()))||r.includes("hotel")||r.includes("resort")||r.includes("travel")||s.includes("hotel")||s.includes("travel")||s.includes("accommodation"))return so;if(t.includes("art")||t.includes("craft")||t.includes("handmade")||n.some(e=>["art","craft","handmade","artisan","pottery","ceramic"].includes(e.toLowerCase()))||r.includes("art")||r.includes("craft")||r.includes("studio")||s.includes("handmade")||s.includes("artisan")||s.includes("craft"))return io;const i=[ao,"/assets/images/premium_brand_identi_88f6d862-Dp5HuSOS.jpg",Wa,Ka];return i[Math.floor(Math.random()*i.length)]};function Gd({business:e,spotlightType:t,spotlightPosition:n}){const{isAuthenticated:r}=Ua(),{toast:s}=Nn(),i=La(),[a,o]=hn.useState(!1),l=Fa({mutationFn:async()=>{a?await qn("DELETE",`/api/businesses/${e.id}/follow`):await qn("POST",`/api/businesses/${e.id}/follow`)},onSuccess:()=>{o(!a),i.invalidateQueries({queryKey:["/api/businesses/spotlight"]}),s({title:a?"Unfollowed":"Following",description:a?`You unfollowed ${e.name}`:`You are now following ${e.name}`})},onError:e=>{if(Ha(e))return s({title:"Unauthorized",description:"You are logged out. Logging in again...",variant:"destructive"}),void setTimeout(()=>{window.location.href="/api/login"},500);s({title:"Error",description:"Failed to update follow status",variant:"destructive"})}});return Ot.jsx("div",{className:"group relative cursor-pointer "+("daily"===t&&1===n?"ring-4 ring-secondary/30 ring-offset-4 ring-offset-background":""),children:Ot.jsxs("div",{className:"business-card-luxury",children:[Ot.jsxs("div",{className:"business-card-image-wrapper business-card-content",children:[Ot.jsx("div",{className:"absolute inset-0 bg-cover bg-center transition-transform duration-700 group-hover:scale-110",style:{backgroundImage:`url(${e.coverImageUrl||$d(e)})`,filter:"contrast(1.08) saturate(1.2) brightness(1.05)"}}),Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/12 via-transparent to-transparent opacity-50"}),Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/8 via-transparent to-secondary/6 mix-blend-soft-light"}),Ot.jsx("div",{className:"business-card-image-frame"}),Ot.jsx("div",{className:"absolute top-5 left-5 z-30 transform transition-transform duration-400 group-hover:scale-105",children:(()=>{if(!t||!n)return null;const e={daily:{1:{icon:"fas fa-trophy",text:"Daily #1",className:"metallic shadow-md"},2:{icon:"fas fa-star",text:"Daily #2",className:"glass-panel border-primary/50 shadow-sm"},3:{icon:"fas fa-fire",text:"Daily #3",className:"glass-panel border-accent/50 shadow-sm"}},weekly:{1:{icon:"fas fa-crown",text:"Weekly #1",className:"metallic shadow-md"},2:{icon:"fas fa-medal",text:"Weekly #2",className:"glass-panel border-secondary/50 shadow-sm"},3:{icon:"fas fa-award",text:"Weekly #3",className:"glass-panel border-accent/50 shadow-sm"},4:{icon:"fas fa-star",text:"Weekly #4",className:"glass-panel border-primary/50 shadow-sm"},5:{icon:"fas fa-thumbs-up",text:"Weekly #5",className:"glass-panel border-accent/50 shadow-sm"}},monthly:{1:{icon:"fas fa-gem",text:"Monthly Winner",className:"metallic shadow-md"}}}[t]?.[n];return e?Ot.jsxs(Tn,{className:`${e.className} font-bold text-sm px-3 py-2 rounded-xl border-2`,children:[Ot.jsx("i",{className:`${e.icon} mr-2`})," ",e.text]}):null})()}),Ot.jsx("div",{className:"absolute bottom-5 right-5 z-30",children:e.rating&&parseFloat(e.rating)>0&&Ot.jsxs("div",{className:"luxury-badge-container flex items-center gap-2",children:[Ot.jsx("i",{className:"fas fa-star text-secondary text-base"}),Ot.jsx("span",{className:"text-slate-900 font-black text-base",children:parseFloat(e.rating).toFixed(1)})]})}),Ot.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-40 transition-opacity duration-1200",children:Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent transform -skew-x-12 translate-x-[-120%] group-hover:translate-x-[420%] transition-transform duration-1200 ease-out"})})]}),Ot.jsxs("div",{className:"p-8 relative business-card-content",children:[Ot.jsxs("div",{className:"flex items-start justify-between mb-6",children:[Ot.jsxs("div",{className:"flex-1 pr-4",children:[Ot.jsxs("div",{className:"flex items-center gap-3 mb-2 flex-wrap",children:[Ot.jsx("h3",{className:"business-name-luxury text-3xl",children:e.name}),Xn({gmbConnected:e.gmbConnected,averageRating:e.rating?parseFloat(e.rating):void 0,totalReviews:e.reviewCount,monthlyEngagement:(e.followerCount||0)+10*(e.postCount||0),isSpotlightFeatured:e.isVerified})&&Ot.jsx(Kn,{type:Xn({gmbConnected:e.gmbConnected,averageRating:e.rating?parseFloat(e.rating):void 0,totalReviews:e.reviewCount,monthlyEngagement:(e.followerCount||0)+10*(e.postCount||0),isSpotlightFeatured:e.isVerified}),size:"sm",showLabel:!0})]}),e.tagline&&Ot.jsx("p",{className:"text-sm text-primary font-semibold uppercase tracking-wide opacity-80 mb-2",children:e.tagline}),Ot.jsx("div",{className:"h-0.5 w-14 bg-gradient-to-r from-secondary via-primary to-transparent rounded-full opacity-70 group-hover:w-20 transition-all duration-400"})]}),r&&Ot.jsx(Ln,{variant:"ghost",size:"sm",onClick:()=>l.mutate(),disabled:l.isPending,className:"relative p-3 rounded-xl transition-all duration-400 hover:scale-110 info-badge-glass "+(a?"text-accent border-accent/30":"text-muted-foreground hover:text-accent"),"data-testid":`button-follow-${e.id}`,children:Ot.jsx("i",{className:`${a?"fas fa-heart":"far fa-heart"} text-lg transition-all duration-400 ${a?"text-accent":""}`})})]}),Ot.jsx("p",{className:"text-muted-foreground mb-6 line-clamp-2 leading-relaxed text-base font-light",children:e.description||"A distinguished local business serving Florida's most discerning clientele with exceptional quality and unparalleled service."}),Ot.jsxs("div",{className:"flex items-center text-sm text-muted-foreground mb-6 info-badge-glass",children:[Ot.jsx("div",{className:"flex items-center justify-center w-9 h-9 rounded-lg bg-gradient-to-br from-secondary/90 to-secondary/70 mr-3 shadow-md",children:Ot.jsx("i",{className:"fas fa-map-marker-alt text-white text-xs"})}),Ot.jsx("span",{className:"font-semibold",children:e.location||"Miami, Florida"})]}),Ot.jsxs("div",{className:"flex justify-between text-sm mb-6 gap-2",children:[Ot.jsx("div",{className:"flex-1 text-center group",children:Ot.jsxs("div",{className:"stat-card-glass",children:[Ot.jsx("div",{className:"font-black text-slate-900 text-2xl mb-1",children:e.followerCount||0}),Ot.jsx("div",{className:"text-muted-foreground text-xs uppercase tracking-wide font-semibold",children:"Followers"})]})}),Ot.jsx("div",{className:"flex-1 text-center group",children:Ot.jsxs("div",{className:"stat-card-glass",children:[Ot.jsx("div",{className:"font-black text-slate-900 text-2xl mb-1",children:e.postCount||0}),Ot.jsx("div",{className:"text-muted-foreground text-xs uppercase tracking-wide font-semibold",children:"Posts"})]})}),Ot.jsx("div",{className:"flex-1 text-center group",children:Ot.jsxs("div",{className:"stat-card-glass",children:[Ot.jsx("div",{className:"font-black text-slate-900 text-2xl mb-1",children:0}),Ot.jsx("div",{className:"text-muted-foreground text-xs uppercase tracking-wide font-semibold",children:"Products"})]})})]}),Ot.jsxs("div",{className:"flex gap-3",children:[Ot.jsx(Yn,{href:`/business/${e.id}`,className:"flex-1",children:Ot.jsxs(Ln,{className:"btn-luxury-action w-full h-14 text-base font-bold relative overflow-hidden","data-testid":`button-view-profile-${e.id}`,children:[Ot.jsx("span",{className:"relative z-10 tracking-wide",children:"View Profile"}),Ot.jsx("div",{className:"absolute top-0 -left-full w-full h-full bg-gradient-to-r from-transparent via-white/30 to-transparent skew-x-12 group-hover:left-full transition-all duration-700 ease-out"})]})}),r&&Ot.jsx(Ln,{variant:"outline",className:"btn-glass-secondary px-6 h-14","data-testid":`button-message-${e.id}`,children:Ot.jsx("i",{className:"fas fa-comment text-lg transition-all duration-400"})})]})]})]})})}const qd=({children:e,className:t="",style:n={},href:r,target:s="_blank"})=>{const i={boxShadow:"0 6px 6px rgba(0, 0, 0, 0.2), 0 0 20px rgba(0, 0, 0, 0.1)",transitionTimingFunction:"cubic-bezier(0.175, 0.885, 0.32, 2.2)",...n},a=Ot.jsxs("div",{className:`relative flex font-semibold overflow-hidden text-black cursor-pointer transition-all duration-700 ${t}`,style:i,children:[Ot.jsx("div",{className:"absolute inset-0 z-0 overflow-hidden rounded-inherit rounded-3xl",style:{backdropFilter:"blur(3px)",filter:"url(#glass-distortion)",isolation:"isolate"}}),Ot.jsx("div",{className:"absolute inset-0 z-10 rounded-inherit",style:{background:"rgba(255, 255, 255, 0.25)"}}),Ot.jsx("div",{className:"absolute inset-0 z-20 rounded-inherit rounded-3xl overflow-hidden",style:{boxShadow:"inset 2px 2px 1px 0 rgba(255, 255, 255, 0.5), inset -1px -1px 1px 1px rgba(255, 255, 255, 0.5)"}}),Ot.jsx("div",{className:"relative z-30",children:e})]});return r?Ot.jsx("a",{href:r,target:s,rel:"noopener noreferrer",className:"block",children:a}):a},Xd=()=>Ot.jsx("svg",{style:{display:"none"},children:Ot.jsxs("filter",{id:"glass-distortion",x:"0%",y:"0%",width:"100%",height:"100%",filterUnits:"objectBoundingBox",children:[Ot.jsx("feTurbulence",{type:"fractalNoise",baseFrequency:"0.001 0.005",numOctaves:"1",seed:"17",result:"turbulence"}),Ot.jsxs("feComponentTransfer",{in:"turbulence",result:"mapped",children:[Ot.jsx("feFuncR",{type:"gamma",amplitude:"1",exponent:"10",offset:"0.5"}),Ot.jsx("feFuncG",{type:"gamma",amplitude:"0",exponent:"1",offset:"0"}),Ot.jsx("feFuncB",{type:"gamma",amplitude:"0",exponent:"1",offset:"0.5"})]}),Ot.jsx("feGaussianBlur",{in:"turbulence",stdDeviation:"3",result:"softMap"}),Ot.jsx("feSpecularLighting",{in:"softMap",surfaceScale:"5",specularConstant:"1",specularExponent:"100",lightingColor:"white",result:"specLight",children:Ot.jsx("fePointLight",{x:"-200",y:"-200",z:"300"})}),Ot.jsx("feComposite",{in:"specLight",operator:"arithmetic",k1:"0",k2:"1",k3:"1",k4:"0",result:"litImage"}),Ot.jsx("feDisplacementMap",{in:"SourceGraphic",in2:"softMap",scale:"200",xChannelSelector:"R",yChannelSelector:"G"})]})}),Kd=({children:e,className:t=""})=>Ot.jsx("div",{className:`relative overflow-hidden ${t}`,style:{backgroundImage:'url("https://images.unsplash.com/photo-1432251407527-504a6b4174a2?q=80&w=1480&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D")',backgroundPosition:"center center",backgroundSize:"cover",animation:"moveBackground 300s linear infinite"},children:e}),Yd=({title:e,subtitle:t,className:n="",withAnimatedBackground:r=!0,size:s="default",withDarkTint:i=!1})=>{const a="hero"===s,o=a?"px-12 py-12 md:px-16 md:py-16":"px-8 py-6",l=a?"text-5xl md:text-7xl":"text-4xl md:text-5xl",c=a?"text-2xl md:text-3xl mt-6":"text-lg md:text-xl",d=Ot.jsx(qd,{className:`rounded-3xl ${o} ${n}`,children:Ot.jsxs("div",{className:"text-center w-full",children:[Ot.jsx("h2",{className:`${l} font-bold text-white`,style:{textShadow:"0 6px 16px rgba(0,0,0,0.95), 0 3px 8px rgba(0,0,0,0.8), 0 1px 4px rgba(0,0,0,0.6)",marginBottom:t?"0.75rem":"0"},children:e}),t&&Ot.jsx("p",{className:`${c} text-white leading-relaxed`,style:{textShadow:"0 4px 12px rgba(0,0,0,0.9), 0 2px 6px rgba(0,0,0,0.7), 0 1px 3px rgba(0,0,0,0.5)"},children:t})]})}),u=r?Ot.jsx(Kd,{className:"rounded-3xl p-1",children:d}):d;return i?Ot.jsxs("div",{className:"relative",children:[Ot.jsx("div",{className:"absolute inset-0 -mx-4 -my-8 lg:-mx-8 pointer-events-none",style:{background:"linear-gradient(to bottom, rgba(0,0,0,0.6) 0%, rgba(0,0,0,0.4) 70%, rgba(0,0,0,0) 100%)",zIndex:0}}),Ot.jsx("div",{className:"relative z-10",children:u})]}):u};function Zd(){const[e,t]=hn.useState("daily"),[n,r]=hn.useState(!1),{user:s}=Ua(),{toast:i}=Nn(),a=La(),{data:o,isLoading:l,refetch:c}=za({queryKey:["/api/businesses/spotlight"]}),{data:d}=za({queryKey:["/api/spotlight/eligible/monthly"],enabled:n&&"monthly"===e}),u=(new Date).toISOString().slice(0,7),{data:h}=za({queryKey:["/api/spotlight/votes",u],enabled:n&&"monthly"===e}),p=Fa({mutationFn:async e=>qn("POST","/api/spotlight/vote",{businessId:e}),onSuccess:()=>{i({title:"Vote Recorded!",description:"Your vote for the monthly spotlight has been recorded successfully."}),a.invalidateQueries({queryKey:["/api/spotlight/votes",u]})},onError:e=>{i({title:"Vote Failed",description:e.message||"Failed to record your vote. Please try again.",variant:"destructive"})}}),m=o?.[e]||[];return Ot.jsxs("section",{className:"py-12 lg:py-20 relative overflow-hidden spotlight-section gradient-shift",children:[Ot.jsx(Xd,{}),Ot.jsx("div",{className:"absolute top-10 right-20 w-96 h-96 gradient-iridescent float-dynamic rounded-full opacity-[0.08] blur-3xl will-change-transform premium-pop stagger-1"}),Ot.jsx("div",{className:"absolute bottom-10 left-20 w-80 h-80 gradient-iridescent float-gentle rounded-full opacity-[0.08] blur-3xl will-change-transform premium-pop stagger-2"}),Ot.jsxs("div",{className:"container mx-auto px-4 lg:px-8 relative z-10",children:[Ot.jsxs("div",{className:"text-center mb-16 entrance-fade-up",children:[Ot.jsx("div",{className:"max-w-4xl mx-auto mb-8",children:Ot.jsx(Yd,{title:"Community Spotlight",subtitle:"Celebrating the businesses that make Florida communities thrive. Discover featured entrepreneurs selected by our intelligent promotion algorithms."})}),Ot.jsxs("div",{className:"mt-8 flex justify-center gap-4 entrance-scale-fade stagger-2",children:[Ot.jsxs(Ln,{onClick:()=>c(),variant:"outline",className:"metallic-chrome flex items-center gap-2 shine-sweep-hover metallic-button-press group border-white/50 hover:shadow-lg","data-testid":"button-refresh-spotlight",children:[Ot.jsx(Dn,{className:"w-4 h-4 group-hover:scale-110 transition-transform duration-300 text-gray-900"}),Ot.jsx("span",{className:"relative z-10 text-gray-900",children:"Refresh Spotlights"})]}),"monthly"===e&&Ot.jsxs(Ln,{onClick:()=>r(!n),className:`flex items-center gap-2 metallic-button-press group transition-all duration-300 ${n?"metallic-teal text-white":"metallic-chrome text-gray-900"} shine-sweep-hover`,"data-testid":"button-toggle-voting",children:[Ot.jsx(Zn,{className:"w-4 h-4 group-hover:scale-110 transition-transform duration-300"}),Ot.jsx("span",{className:"relative z-10",children:n?"Hide Voting":"Vote for Monthly"})]})]})]}),Ot.jsx("div",{className:"flex justify-center mb-8",children:Ot.jsxs("div",{className:"glass-card-futuristic rounded-2xl p-2 inline-flex gap-2",children:[Ot.jsxs(Ln,{variant:"ghost",onClick:()=>t("daily"),className:"px-6 py-3 rounded-xl font-semibold transition-all duration-400 group relative overflow-hidden "+("daily"===e?"futuristic-tab active metallic-chrome":"futuristic-tab"),"data-testid":"tab-daily-spotlight",children:[Ot.jsx(Jn,{className:"w-4 h-4 mr-2 group-hover:scale-110 transition-transform duration-300 "+("daily"===e?"text-gray-900":"text-gray-700")}),Ot.jsx("span",{className:"relative z-10 "+("daily"===e?"text-gray-900":"text-gray-700"),children:"Daily"})]}),Ot.jsxs(Ln,{variant:"ghost",onClick:()=>t("weekly"),className:"px-6 py-3 rounded-xl font-semibold transition-all duration-400 group relative overflow-hidden "+("weekly"===e?"futuristic-tab active metallic-chrome":"futuristic-tab"),"data-testid":"tab-weekly-spotlight",children:[Ot.jsx(Qn,{className:"w-4 h-4 mr-2 group-hover:scale-110 transition-transform duration-300 "+("weekly"===e?"text-gray-900":"text-gray-700")}),Ot.jsx("span",{className:"relative z-10 "+("weekly"===e?"text-gray-900":"text-gray-700"),children:"Weekly"})]}),Ot.jsxs(Ln,{variant:"ghost",onClick:()=>t("monthly"),className:"px-6 py-3 rounded-xl font-semibold transition-all duration-400 group relative overflow-hidden "+("monthly"===e?"futuristic-tab active metallic-chrome":"futuristic-tab"),"data-testid":"tab-monthly-spotlight",children:[Ot.jsx(Zn,{className:"w-4 h-4 mr-2 group-hover:scale-110 transition-transform duration-300 "+("monthly"===e?"text-gray-900":"text-gray-700")}),Ot.jsx("span",{className:"relative z-10 "+("monthly"===e?"text-gray-900":"text-gray-700"),children:"Monthly"})]})]})}),Ot.jsx("div",{className:"text-center mb-8",children:Ot.jsx(Tn,{className:"glass-panel border-border/30 px-6 py-3 text-sm font-medium text-luxury",children:(()=>{switch(e){case"daily":return"Updated every 24 hours using our AI algorithm (30% engagement + 25% recency + 20% reviews + 15% growth + 10% community)";case"weekly":return"Updated weekly with merit-based selection ensuring category diversity and regional representation";case"monthly":return"Selected through community voting (70%) combined with admin curation (30%) for exceptional businesses";default:return""}})()})}),Ot.jsx("div",{className:"relative rounded-3xl p-8 mb-16 spotlight-grid-container",children:Ot.jsx("div",{className:"relative z-10 grid md:grid-cols-3 gap-8",children:l?[...Array("daily"===e?3:"weekly"===e?5:1)].map((e,t)=>Ot.jsxs("div",{className:"glass-panel rounded-2xl overflow-hidden card-rim-light transform-3d-float",children:[Ot.jsx(er,{className:"h-48 w-full gradient-iridescent"}),Ot.jsxs("div",{className:"p-6 space-y-3",children:[Ot.jsx(er,{className:"h-6 w-3/4 gradient-iridescent"}),Ot.jsx(er,{className:"h-4 w-full gradient-iridescent"}),Ot.jsx(er,{className:"h-4 w-2/3 gradient-iridescent"}),Ot.jsxs("div",{className:"flex justify-between",children:[Ot.jsx(er,{className:"h-8 w-16 gradient-iridescent"}),Ot.jsx(er,{className:"h-8 w-16 gradient-iridescent"}),Ot.jsx(er,{className:"h-8 w-16 gradient-iridescent"})]})]})]},t)):m.length>0?m.map((t,n)=>Ot.jsx("div",{className:"transform-3d-float",children:Ot.jsx(Gd,{business:t,spotlightType:e,spotlightPosition:n+1})},t.id)):Ot.jsx("div",{className:"col-span-full spotlight-empty-state",children:Ot.jsxs("div",{className:"relative z-10 text-center",children:[Ot.jsx("div",{className:"relative inline-block mb-6",children:Ot.jsx("i",{className:"fas fa-star text-6xl spotlight-empty-icon"})}),Ot.jsx("h3",{className:"text-2xl font-bold mb-4 spotlight-empty-title text-white",style:{textShadow:"0 2px 6px rgba(0,0,0,0.35)"},children:"No spotlight businesses yet"}),Ot.jsx("p",{className:"text-white max-w-md mx-auto",style:{textShadow:"0 1px 2px rgba(0,0,0,0.25)"},children:"Check back soon to see featured businesses in this category."})]})})})}),n&&"monthly"===e&&Ot.jsx("div",{className:"mt-16 relative backdrop-elite rounded-3xl p-8 card-rim-light voting-section-container",children:Ot.jsxs("div",{className:"relative z-10",children:[Ot.jsxs("div",{className:"text-center mb-8",children:[Ot.jsxs("div",{className:"relative inline-block mb-6",children:[Ot.jsxs("h3",{className:"text-3xl font-bold flex items-center justify-center gap-3 gradient-text text-luxury font-serif filter-luxury-glow",children:[Ot.jsx(Zn,{className:"w-8 h-8 text-accent"}),"Vote for Monthly Spotlight"]}),Ot.jsx("div",{className:"absolute -bottom-2 left-1/2 transform -translate-x-1/2 w-24 h-px bg-gradient-to-r from-transparent via-accent to-transparent"})]}),Ot.jsx("p",{className:"text-white max-w-2xl mx-auto leading-relaxed",style:{textShadow:"0 1px 2px rgba(0,0,0,0.25)"},children:"Help choose next month's featured business! Your vote counts for 70% of the selection process."})]}),Ot.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:[d?.map(e=>{const t=h?.find(t=>t.businessId===e.id)?.voteCount||0;return Ot.jsx("div",{className:"relative transform-3d-card float-dynamic rounded-2xl p-6 miami-hover-lift miami-card-glow transition-all duration-300 voting-business-card",children:Ot.jsxs("div",{className:"relative z-10",children:[Ot.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[e.logoUrl?Ot.jsxs("div",{className:"relative",children:[Ot.jsx("img",{src:e.logoUrl,alt:e.name,className:"w-12 h-12 rounded-full object-cover ring-2 ring-primary/20"}),Ot.jsx("div",{className:"absolute inset-0 rounded-full bg-gradient-to-br from-primary/10 to-accent/10"})]}):Ot.jsx("div",{className:"w-12 h-12 rounded-full glass-panel flex items-center justify-center border border-border/30",children:Ot.jsx("span",{className:"text-lg font-bold gradient-text-primary",children:e.name?.charAt(0)||"B"})}),Ot.jsxs("div",{className:"flex-1",children:[Ot.jsx("h4",{className:"font-semibold text-slate-900",children:e.name}),Ot.jsx("p",{className:"text-sm text-slate-700 font-medium",children:e.category})]})]}),Ot.jsx("p",{className:"text-sm text-slate-600 mb-6 line-clamp-2 leading-relaxed",children:e.tagline||e.description}),Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{className:"flex items-center gap-2 text-sm vote-counter-badge px-3 py-2 rounded-lg",children:[Ot.jsx(Zn,{className:"w-4 h-4 text-accent"}),Ot.jsxs("span",{className:"text-slate-900 font-bold",children:[t," votes"]})]}),Ot.jsx(Ln,{onClick:()=>(async e=>{s?await p.mutateAsync(e):i({title:"Login Required",description:"Please log in to vote for the monthly spotlight.",variant:"destructive"})})(e.id),disabled:p.isPending,size:"sm",className:"flex items-center gap-2 btn-vote-metallic hover-lift group px-4 py-2 rounded-lg","data-testid":`button-vote-${e.id}`,children:p.isPending?Ot.jsxs(Ot.Fragment,{children:[Ot.jsx("div",{className:"w-4 h-4 animate-spin rounded-full border-2 border-background border-t-foreground"}),Ot.jsx("span",{className:"relative z-10",children:"Voting..."})]}):Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(Zn,{className:"w-4 h-4 group-hover:scale-110 transition-transform duration-300"}),Ot.jsx("span",{className:"relative z-10",children:"Vote"})]})})]})]})},e.id)}),0===d?.length&&Ot.jsx("div",{className:"col-span-full spotlight-empty-state",children:Ot.jsxs("div",{className:"relative z-10 text-center",children:[Ot.jsx("div",{className:"relative inline-block mb-6",children:Ot.jsx(Zn,{className:"w-16 h-16 spotlight-empty-icon mx-auto"})}),Ot.jsx("p",{className:"text-muted-foreground text-lg font-medium",children:"No businesses are currently eligible for voting."})]})})]})]})})]})]})}function Jd(){const[e,t]=hn.useState(""),[n]=hn.useState(void 0),[r,s]=hn.useState([]),[i,a]=hn.useState(""),[o,l]=hn.useState(""),[c,d]=hn.useState(""),[u,h]=hn.useState(!1),[p,m]=hn.useState(!1),[f]=hn.useState([]),[g,x]=hn.useState("rating_desc"),[v]=hn.useState(8),[y,b]=hn.useState(""),{data:w=[],isLoading:j}=za({queryKey:["/api/products/featured",20,"unique=images"],queryFn:()=>fetch("/api/products/featured?limit=20&unique=images").then(e=>e.json())});hn.useEffect(()=>{const t=setTimeout(()=>b(e.trim()),300);return()=>clearTimeout(t)},[e]);const N=hn.useMemo(()=>{const e=new URLSearchParams;y&&e.set("q",y);const t=r.length?r:n?[n]:[];return t.length&&e.set("categories",t.join(",")),i&&e.set("minPrice",i),o&&e.set("maxPrice",o),c&&e.set("minRating",c),u&&e.set("inStock","true"),p&&e.set("isDigital","true"),f.length&&e.set("tags",f.join(",")),g&&e.set("sort",g),e.set("page","1"),e.set("pageSize",String(v)),e},[y,r,n,i,o,c,u,p,f,g,v]),{data:_}=za({queryKey:["/api/products/search",N.toString()],queryFn:()=>fetch(`/api/products/search?${N}`).then(e=>e.json())});return Ot.jsxs("section",{className:"py-12 lg:py-20 miami-marketplace-section relative overflow-hidden dynamic-gradient-bg",children:[Ot.jsx(Xd,{}),Ot.jsxs("div",{className:"container mx-auto px-4 lg:px-8 relative z-10",children:[Ot.jsx("div",{className:"max-w-4xl mx-auto mb-16 entrance-fade-up",children:Ot.jsx(Yd,{title:"Local Marketplace",subtitle:"Discover unique products and services from Florida's most innovative businesses. Support local entrepreneurs while finding exactly what you need."})}),Ot.jsxs("div",{className:"flex flex-col lg:flex-row items-center justify-between mb-16",children:[Ot.jsx("div",{className:"lg:w-1/2 mb-8 lg:mb-0",children:Ot.jsx(Yn,{href:"/marketplace",children:Ot.jsx("button",{className:"metallic-chrome px-12 py-6 rounded-3xl shine-sweep-hover apple-hover-depth metallic-button-press transition-all duration-300 hover:shadow-2xl",children:Ot.jsxs("div",{className:"flex items-center text-gray-900 text-lg font-semibold",children:[Ot.jsx(tr,{className:"h-5 w-5 mr-3"}),Ot.jsx("span",{children:"Explore Marketplace"})]})})})}),Ot.jsx("div",{className:"lg:w-1/2",children:Ot.jsx("div",{className:"search-panel-container premium-search-panel rounded-2xl p-8 transition-all duration-300 entrance-fade-up stagger-3 mouse-spotlight elevation-2",children:Ot.jsxs("div",{className:"relative z-10",children:[Ot.jsxs("div",{className:"flex flex-col md:flex-row gap-6 mb-6",children:[Ot.jsxs("div",{className:"flex-1 relative luxury-search-input-wrapper",children:[Ot.jsx(Fn,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-5 w-5 luxury-search-icon z-10"}),Ot.jsx(zn,{type:"search",placeholder:"Search premium products...",value:e,onChange:e=>t(e.target.value),className:"luxury-search-input pl-12 pr-4 py-6 text-base rounded-xl","data-testid":"input-marketplace-search"})]}),Ot.jsxs("div",{className:"relative",children:[Ot.jsx(nr,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-5 w-5 luxury-search-icon z-10"}),Ot.jsx("div",{className:"luxury-category-pills pl-12 pr-4 py-4 min-w-[240px] rounded-xl",children:Ot.jsx("div",{className:"flex flex-wrap gap-2 relative z-10",children:["Food & Beverage","Fashion","Home & Garden","Health & Beauty"].map(e=>Ot.jsxs("button",{type:"button",onClick:()=>{return n=e,i=s,void((t=r).includes(n)?i(t.filter(e=>e!==n)):i([...t,n]));var t,n,i},className:"px-3 py-1.5 rounded-lg text-sm relative z-10 "+(r.includes(e)?"luxury-filter-pill luxury-filter-pill-active":"luxury-filter-pill"),children:[r.includes(e)&&Ot.jsx(rr,{className:"inline h-3 w-3 mr-1"}),Ot.jsx("span",{className:"relative z-10",children:e})]},e))})})]}),Ot.jsxs(Ln,{onClick:()=>{const e=new URLSearchParams(N);window.location.href=`/marketplace?${e.toString()}`},className:"px-8 py-6 gradient-metallic-gold border-animated-gradient group font-semibold shadow-lg rounded-xl","data-testid":"button-marketplace-search",children:[Ot.jsx(Fn,{className:"h-5 w-5 mr-3"}),Ot.jsx("span",{className:"relative z-10",children:"Search"})]})]}),Ot.jsxs("div",{className:"flex flex-wrap gap-3 justify-center mb-8",children:[Ot.jsxs("span",{className:"luxury-badge-pill bg-slate-800/80 px-4 py-2 rounded-full text-sm font-semibold cursor-pointer","data-testid":"filter-local-made",children:[Ot.jsx(sr,{className:"inline h-3.5 w-3.5 mr-1.5 text-white"}),Ot.jsx("span",{className:"relative z-10 text-white",children:"Local Made"})]}),Ot.jsxs("span",{className:"luxury-badge-pill bg-slate-800/80 px-4 py-2 rounded-full text-sm font-semibold cursor-pointer","data-testid":"filter-eco-friendly",children:[Ot.jsx(Zn,{className:"inline h-3.5 w-3.5 mr-1.5 text-white"}),Ot.jsx("span",{className:"relative z-10 text-white",children:"Eco-Friendly"})]}),Ot.jsxs("span",{className:"luxury-badge-pill bg-slate-800/80 px-4 py-2 rounded-full text-sm font-semibold cursor-pointer","data-testid":"filter-small-batch",children:[Ot.jsx(In,{className:"inline h-3.5 w-3.5 mr-1.5 text-white"}),Ot.jsx("span",{className:"relative z-10 text-white",children:"Small Batch"})]}),Ot.jsxs("span",{className:"luxury-badge-pill bg-slate-800/80 px-4 py-2 rounded-full text-sm font-semibold cursor-pointer","data-testid":"filter-free-shipping",children:[Ot.jsx(ir,{className:"inline h-3.5 w-3.5 mr-1.5 text-white"}),Ot.jsx("span",{className:"relative z-10 text-white",children:"Free Shipping"})]})]}),Ot.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[Ot.jsx("div",{className:"filter-section-1 luxury-filter-section rounded-xl p-5",children:Ot.jsxs("div",{className:"relative z-10",children:[Ot.jsxs("label",{className:"luxury-filter-label mb-3 flex items-center text-xs",children:[Ot.jsx(ar,{className:"h-4 w-4 mr-2 text-yellow-700"})," Price Range"]}),Ot.jsxs("div",{className:"flex gap-2",children:[Ot.jsx(zn,{type:"number",min:0,placeholder:"Min",value:i,onChange:e=>a(e.target.value),className:"luxury-price-input text-sm py-2.5 rounded-lg relative z-10"}),Ot.jsx(zn,{type:"number",min:0,placeholder:"Max",value:o,onChange:e=>l(e.target.value),className:"luxury-price-input text-sm py-2.5 rounded-lg relative z-10"})]})]})}),Ot.jsx("div",{className:"filter-section-2 luxury-filter-section rounded-xl p-5",children:Ot.jsxs("div",{className:"relative z-10",children:[Ot.jsxs("label",{className:"luxury-filter-label mb-3 flex items-center text-xs",children:[Ot.jsx(In,{className:"h-4 w-4 mr-2 text-yellow-700"})," Min Rating"]}),Ot.jsxs(Un,{value:c,onValueChange:d,children:[Ot.jsx(Vn,{className:"luxury-dropdown-trigger rounded-lg py-2.5",children:Ot.jsx(Hn,{placeholder:"Any"})}),Ot.jsx(Wn,{className:"luxury-dropdown-content rounded-xl",children:["3","3.5","4","4.5"].map(e=>Ot.jsxs($n,{value:e,className:"luxury-dropdown-item",children:[e,"+"]},e))})]})]})}),Ot.jsx("div",{className:"filter-section-3 luxury-filter-section rounded-xl p-5",children:Ot.jsxs("div",{className:"relative z-10",children:[Ot.jsxs("label",{className:"luxury-filter-label mb-3 flex items-center text-xs",children:[Ot.jsx(or,{className:"h-4 w-4 mr-2 text-yellow-700"})," Sort By"]}),Ot.jsxs(Un,{value:g,onValueChange:e=>x(e),children:[Ot.jsx(Vn,{className:"luxury-dropdown-trigger rounded-lg py-2.5",children:Ot.jsx(Hn,{placeholder:"Sort"})}),Ot.jsxs(Wn,{className:"luxury-dropdown-content rounded-xl",children:[Ot.jsx($n,{value:"rating_desc",className:"luxury-dropdown-item",children:"Top Rated"}),Ot.jsx($n,{value:"price_asc",className:"luxury-dropdown-item",children:"Price: Low to High"}),Ot.jsx($n,{value:"price_desc",className:"luxury-dropdown-item",children:"Price: High to Low"}),Ot.jsx($n,{value:"newest",className:"luxury-dropdown-item",children:"Newest"}),Ot.jsx($n,{value:"popular",className:"luxury-dropdown-item",children:"Most Reviewed"})]})]})]})})]}),Ot.jsxs("div",{className:"flex items-center gap-8 mt-6 relative z-10",children:[Ot.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[Ot.jsx("input",{type:"checkbox",checked:u,onChange:e=>h(e.target.checked),className:"luxury-checkbox"}),Ot.jsx("span",{className:"luxury-checkbox-label text-sm",children:"In Stock"})]}),Ot.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[Ot.jsx("input",{type:"checkbox",checked:p,onChange:e=>m(e.target.checked),className:"luxury-checkbox"}),Ot.jsx("span",{className:"luxury-checkbox-label text-sm",children:"Digital Only"})]})]})]})})})]}),_?.items&&(y||r.length||n||i||o||c||u||p||f.length)?Ot.jsxs("div",{className:"mb-12",children:[Ot.jsxs("div",{className:"miami-section-header mb-6 flex items-center justify-between",children:[Ot.jsx("h3",{className:"text-2xl font-serif font-bold text-white",children:"Top Matches"}),Ot.jsx(Yn,{href:`/marketplace?${N.toString()}`,children:Ot.jsxs(Ln,{variant:"outline",className:"btn-magic",children:["See all (",_?.total||0,")"]})})]}),Ot.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-8",children:_.items.slice(0,v).map((e,t)=>Ot.jsx(lr,{product:e,index:t},e.id))})]}):null,Ot.jsx("div",{className:"max-w-3xl mx-auto mb-12 entrance-fade-up",children:Ot.jsx(Yd,{title:"Featured Products",subtitle:"",className:"py-4"})}),Ot.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-8",children:j?[...Array(4)].map((e,t)=>Ot.jsxs("div",{className:"space-y-3",children:[Ot.jsx(er,{className:"h-48 w-full"}),Ot.jsx(er,{className:"h-4 w-3/4"}),Ot.jsx(er,{className:"h-4 w-1/2"}),Ot.jsx(er,{className:"h-10 w-full"})]},t)):w.length>0?w.slice(0,4).map((e,t)=>Ot.jsx(lr,{product:e,index:t},e.id)):Ot.jsxs("div",{className:"col-span-full text-center py-16",children:[Ot.jsxs("div",{className:"relative inline-block mb-6",children:[Ot.jsx(tr,{className:"text-6xl text-muted-foreground mx-auto",size:64}),Ot.jsx("div",{className:"absolute inset-0 text-muted-foreground opacity-20 blur-lg"})]}),Ot.jsx("h3",{className:"text-2xl font-bold mb-4 text-white font-serif",style:{textShadow:"0 2px 6px rgba(0,0,0,0.35)"},children:"No products available"}),Ot.jsx("p",{className:"text-white max-w-md mx-auto",style:{textShadow:"0 1px 2px rgba(0,0,0,0.25)"},children:"Check back soon for featured products from local businesses."})]})})]})]})}const Qd=Eo({name:Ao().min(1,"Business name is required"),tagline:Ao().optional(),description:Ao().optional(),category:Ao().optional(),location:Ao().optional(),address:Ao().optional(),phone:Ao().optional(),website:Ao().url().optional().or(Oo("")),logoUrl:Ao().optional(),coverImageUrl:Ao().optional(),operatingHours:To().optional(),socialLinks:To().optional(),googlePlaceId:Ao().optional(),isVerified:ko().optional(),isActive:ko().optional(),gmbVerified:ko().optional(),gmbConnected:ko().optional(),gmbAccountId:Ao().optional(),gmbLocationId:Ao().optional(),gmbSyncStatus:Ao().optional(),gmbLastSyncAt:Po().optional(),gmbLastErrorAt:Po().optional(),gmbLastError:Ao().optional(),gmbDataSources:To().optional(),stripeAccountId:Ao().optional(),stripeOnboardingStatus:Ao().optional(),stripeChargesEnabled:ko().optional(),stripePayoutsEnabled:ko().optional()});Eo({businessId:Ao(),name:Ao().min(1,"Product name is required"),description:Ao().optional(),price:Io().min(0,"Price must be positive"),compareAtPrice:Io().min(0).optional(),category:Ao().optional(),imageUrl:Ao().optional(),isActive:ko().optional(),stockQuantity:Io().min(0).optional(),tags:Ro(Ao()).optional()});const eu=Eo({businessId:Ao(),content:Ao().min(1,"Content is required"),images:To().optional(),type:Ao().optional(),isVisible:ko().optional()});function tu({variant:e="subtle",size:t="sm",className:n="",showTooltip:r=!0,customText:s}){if("minimal"===e){const e="sm"===t?"w-3.5 h-3.5":"md"===t?"w-4 h-4":"w-5 h-5";return r?Ot.jsx(cr,{children:Ot.jsxs(dr,{delayDuration:200,children:[Ot.jsx(ur,{asChild:!0,children:Ot.jsx("div",{className:`inline-flex items-center cursor-help ${n}`,children:Ot.jsx(An,{className:`${e} text-purple-600`})})}),Ot.jsx(hr,{side:"top",children:Ot.jsx("p",{className:"text-xs",children:"AI-assisted content"})})]})}):Ot.jsx("div",{className:`inline-flex items-center ${n}`,children:Ot.jsx(An,{className:`${e} text-purple-600`})})}if("subtle"===e){const e=Ot.jsxs(Tn,{variant:"outline",className:`\n          flex items-center gap-1\n          bg-purple-500/5 text-purple-700 border-purple-300/40\n          hover:bg-purple-500/10 hover:border-purple-400/50\n          transition-all duration-200\n          ${"sm"===t?"text-xs px-2 py-0.5":"md"===t?"text-sm px-2.5 py-1":"text-base px-3 py-1.5"}\n          ${n}\n        `,children:[Ot.jsx(An,{className:"sm"===t?"w-3 h-3":"md"===t?"w-3.5 h-3.5":"w-4 h-4"}),Ot.jsx("span",{children:s||"AI"}),r&&Ot.jsx(pr,{className:"w-3 h-3 opacity-60"})]});return r?Ot.jsx(cr,{children:Ot.jsxs(dr,{delayDuration:200,children:[Ot.jsx(ur,{asChild:!0,children:e}),Ot.jsx(hr,{side:"top",className:"max-w-xs",children:Ot.jsx("p",{className:"text-xs",children:"This content was created with AI assistance using advanced language models."})})]})}):e}const i=Ot.jsxs(Tn,{variant:"outline",className:`\n        flex items-center gap-1.5\n        bg-gradient-to-r from-purple-500/10 to-pink-500/10\n        text-purple-700 border-purple-400/40\n        hover:from-purple-500/15 hover:to-pink-500/15\n        hover:border-purple-400/60 hover:shadow-md\n        transition-all duration-300\n        ${"sm"===t?"text-xs px-2.5 py-1":"md"===t?"text-sm px-3 py-1.5":"text-base px-4 py-2"}\n        ${n}\n      `,children:[Ot.jsx(An,{className:"sm"===t?"w-3.5 h-3.5":"md"===t?"w-4 h-4":"w-5 h-5"}),Ot.jsx("span",{className:"font-medium",children:s||"AI Generated"}),r&&Ot.jsx(pr,{className:"w-3 h-3 opacity-60"})]});return r?Ot.jsx(cr,{children:Ot.jsxs(dr,{delayDuration:200,children:[Ot.jsx(ur,{asChild:!0,children:i}),Ot.jsx(hr,{side:"top",className:"max-w-sm",children:Ot.jsxs("div",{className:"space-y-1",children:[Ot.jsx("p",{className:"font-semibold text-xs",children:"AI-Assisted Content"}),Ot.jsx("p",{className:"text-xs text-gray-600",children:"This content was created using AI technology powered by advanced language models. Human oversight and editing ensure quality and accuracy."})]})})]})}):i}const nu=hn.forwardRef(({title:e,images:t,stats:n,description:r,href:s,className:i},a)=>{const o=hn.useRef(null);return Ot.jsxs("a",{ref:e=>{o.current=e,"function"==typeof a?a(e):a&&(a.current=e)},href:s,className:bn("holographic-card group relative block w-full max-w-sm cursor-pointer rounded-2xl p-6 transition-all duration-300 ease-in-out hover:shadow-lg lg:max-w-md",i),onMouseMove:e=>{if(!o.current)return;const t=o.current,n=t.getBoundingClientRect(),r=e.clientX-n.left,s=e.clientY-n.top,i=n.width/2,a=(s-n.height/2)/10,l=(i-r)/10;t.style.setProperty("--x",`${r}px`),t.style.setProperty("--y",`${s}px`),t.style.setProperty("--bg-x",r/n.width*100+"%"),t.style.setProperty("--bg-y",s/n.height*100+"%"),t.style.transform=`perspective(1000px) rotateX(${a}deg) rotateY(${l}deg) translateY(-0.25rem)`},onMouseLeave:()=>{if(!o.current)return;const e=o.current;e.style.transform="perspective(1000px) rotateX(0deg) rotateY(0deg)",e.style.setProperty("--x","50%"),e.style.setProperty("--y","50%"),e.style.setProperty("--bg-x","50%"),e.style.setProperty("--bg-y","50%")},"aria-label":`Learn more about ${e}`,style:{"--x":"50%","--y":"50%","--bg-x":"50%","--bg-y":"50%"},children:[Ot.jsxs("div",{className:"holo-content flex flex-col",children:[Ot.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[Ot.jsx("h2",{className:"text-3xl font-bold tracking-tighter text-white",style:{textShadow:"0 2px 4px rgba(0,0,0,0.3)"},children:e}),Ot.jsx(mr,{className:"h-6 w-6 text-white transition-transform duration-300 ease-in-out group-hover:translate-x-1",style:{filter:"drop-shadow(0 2px 4px rgba(0,0,0,0.3))"}})]}),Ot.jsx("div",{className:"relative mb-6 h-32",children:t.map((n,r)=>Ot.jsx("div",{className:bn("absolute h-full w-[40%] overflow-hidden rounded-lg border-2 border-white/40 shadow-md transition-all duration-300 ease-in-out","group-hover:translate-x-[var(--tx)] group-hover:rotate-[var(--r)]"),style:{transform:`translateX(${32*r}px)`,"--tx":80*r+"px","--r":5*r-5+"deg",zIndex:t.length-r},children:Ot.jsx("img",{src:n,alt:`${e} view ${r+1}`,className:"h-full w-full object-cover"})},r))}),Ot.jsx("div",{className:"mb-4 flex items-center space-x-4 text-sm text-white/90",children:n.map((e,t)=>Ot.jsxs("div",{className:"flex items-center space-x-1.5",children:[e.icon,Ot.jsx("span",{children:e.label})]},t))}),Ot.jsx("p",{className:"text-sm leading-relaxed text-white/90",style:{textShadow:"0 1px 2px rgba(0,0,0,0.2)"},children:r})]}),Ot.jsx("div",{className:"holo-glow"})]})});function ru({post:e}){const{isAuthenticated:t}=Ua(),{toast:n}=Nn(),r=La(),[s,i]=hn.useState(!1),[a,o]=hn.useState(!1),[l,c]=hn.useState(e.likeCount||0),{data:d}=za({queryKey:[`/api/businesses/${e.businessId}`],enabled:!!e.businessId}),{data:u}=za({queryKey:["/api/posts",e.id,"liked"],enabled:t});hn.useEffect(()=>{void 0!==u?.isLiked&&i(u.isLiked)},[u]);const h=Fa({mutationFn:async()=>{s?await qn("DELETE",`/api/posts/${e.id}/like`):await qn("POST",`/api/posts/${e.id}/like`)},onSuccess:()=>{i(!s),c(e=>s?e-1:e+1),r.invalidateQueries({queryKey:["/api/posts"]}),r.invalidateQueries({queryKey:["/api/posts",e.id,"liked"]})},onError:e=>{if(Ha(e))return n({title:"Unauthorized",description:"You are logged out. Logging in again...",variant:"destructive"}),void setTimeout(()=>{window.location.href="/api/login"},500);n({title:"Error",description:"Failed to update like status",variant:"destructive"})}}),p=Fa({mutationFn:async()=>{await new Promise(e=>setTimeout(e,500))},onSuccess:()=>{o(!a),n({title:a?"Removed from Saved":"Saved",description:a?"Post removed from your saved items":"Post saved to your collection"})},onError:e=>{if(Ha(e))return n({title:"Unauthorized",description:"You are logged out. Logging in again...",variant:"destructive"}),void setTimeout(()=>{window.location.href="/api/login"},500);n({title:"Error",description:"Failed to save post",variant:"destructive"})}}),m=()=>e.images&&Array.isArray(e.images)&&e.images.length>0?e.images:[],f=()=>{switch(e.type){case"achievement":return Ot.jsx(sr,{className:"h-4 w-4"});case"partnership":return Ot.jsx(gr,{className:"h-4 w-4"});case"product":return Ot.jsx(tr,{className:"h-4 w-4"});default:return Ot.jsx(fr,{className:"h-4 w-4"})}},g=()=>{switch(e.type){case"achievement":return"Achievement";case"partnership":return"Partnership";case"product":return"New Product";default:return"Update"}};if(3===m().length&&d){const t=m(),n=e.createdAt?new Date(e.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:new Date(e.createdAt).getFullYear()!==(new Date).getFullYear()?"numeric":void 0}):"Recent",r=[{icon:Ot.jsx(xr,{className:"h-4 w-4"}),label:n},{icon:f(),label:g()},{icon:Ot.jsx(Zn,{className:"h-4 w-4"}),label:`${l} ${1===l?"like":"likes"}`}],s=e.content.length>150?e.content.substring(0,150).split(" ").slice(0,-1).join(" ")+"...":e.content;return Ot.jsx("div",{className:"mb-4",children:Ot.jsx(nu,{title:d.name,images:t,stats:r,description:s,href:`/business/${e.businessId}`,className:"max-w-full"})})}return Ot.jsx("article",{className:"frosted-panel border border-white/30 rounded-2xl p-6 group apple-hover-depth transition-all duration-300","data-testid":`post-${e.id}`,children:Ot.jsxs("div",{className:"relative z-10",children:[Ot.jsxs("div",{className:"flex items-start space-x-4 mb-4",children:[Ot.jsx("div",{className:"flex-shrink-0",children:Ot.jsx("div",{className:"metallic-chrome w-12 h-12 rounded-full flex items-center justify-center shine-sweep-hover",children:Ot.jsx("i",{className:`${(()=>{switch(e.type){case"achievement":return"fas fa-trophy";case"partnership":return"fas fa-handshake";case"product":return"fas fa-shopping-bag";default:return"fas fa-store"}})()} text-gray-900 text-lg relative z-10`})})}),Ot.jsxs("div",{className:"flex-1 min-w-0",children:[Ot.jsxs("div",{className:"flex items-start justify-between mb-3",children:[Ot.jsxs("div",{className:"flex-1",children:[Ot.jsx("h4",{className:"elite-post-author font-serif font-bold text-lg mb-1 text-gray-900",style:{color:"#0a0a0a",textShadow:"0 1px 2px rgba(255, 255, 255, 0.6)"},children:"Local Business"}),Ot.jsx("time",{className:"elite-post-timestamp text-sm text-gray-700",style:{color:"#404040",textShadow:"0 1px 2px rgba(255, 255, 255, 0.4)"},children:e.createdAt?new Date(e.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Unknown date"})]}),Ot.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[(()=>{switch(e.type){case"achievement":return Ot.jsxs(Tn,{className:"metallic-gold text-white px-3 py-1 shine-sweep-hover",children:[Ot.jsx("i",{className:"fas fa-award mr-1.5"}),"Achievement"]});case"partnership":return Ot.jsxs(Tn,{className:"metallic-teal text-white px-3 py-1 shine-sweep-hover",children:[Ot.jsx("i",{className:"fas fa-handshake mr-1.5"}),"Partnership"]});case"product":return Ot.jsxs(Tn,{className:"led-badge-live px-3 py-1",children:[Ot.jsx("i",{className:"fas fa-shopping-bag mr-1.5"}),"New Product"]});default:return null}})(),e.isAiGenerated&&Ot.jsx(tu,{variant:"subtle",size:"sm"}),t&&Ot.jsx(Ln,{variant:"ghost",size:"sm",className:"elite-post-action-btn h-8 w-8 p-0","data-testid":`button-follow-post-${e.id}`,children:Ot.jsx("i",{className:"fas fa-user-plus text-sm"})})]})]}),Ot.jsx("div",{className:"elite-post-content mb-4",children:Ot.jsx("div",{className:"bg-white/90 backdrop-blur-sm rounded-xl border border-gray-200 p-4 shadow-sm",children:Ot.jsx("p",{className:"whitespace-pre-wrap leading-relaxed text-gray-900 font-medium",style:{color:"#1a1a1a"},children:e.content})})}),m().length>0&&Ot.jsx("div",{className:"elite-post-gallery mb-4 "+(1===m().length?"elite-post-gallery-single":2===m().length?"elite-post-gallery-double":"elite-post-gallery-multiple"),children:m().slice(0,3).map((e,t)=>Ot.jsx("div",{className:"elite-post-image-frame",children:Ot.jsx("div",{className:"elite-post-image",style:{backgroundImage:`url(${e})`,backgroundSize:"cover",backgroundPosition:"center"},children:2===t&&m().length>3&&Ot.jsx("div",{className:"elite-post-image-overlay",children:Ot.jsxs("span",{className:"text-white font-semibold text-lg font-serif",children:["+",m().length-3," more"]})})})},t))})]})]}),Ot.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-white/20",children:[Ot.jsxs("div",{className:"flex space-x-3",children:[Ot.jsxs("button",{onClick:()=>h.mutate(),disabled:h.isPending||!t,className:`frosted-panel px-4 py-2 rounded-lg transition-all duration-300 flex items-center gap-2 ${s?"metallic-gold text-white":"hover:shadow-md"} metallic-button-press`,"data-testid":`button-like-post-${e.id}`,children:[Ot.jsx("i",{className:`${s?"fas fa-heart":"far fa-heart"} text-sm ${s?"text-white":"text-gray-900"}`}),Ot.jsx("span",{className:"text-sm font-semibold "+(s?"text-white":"text-gray-900"),children:l})]}),Ot.jsxs("button",{className:"frosted-panel px-4 py-2 rounded-lg transition-all duration-300 hover:shadow-md flex items-center gap-2 metallic-button-press","data-testid":`button-comment-post-${e.id}`,children:[Ot.jsx("i",{className:"far fa-comment text-sm text-gray-900"}),Ot.jsx("span",{className:"text-sm font-semibold text-gray-900",children:e.commentCount||0})]}),Ot.jsxs("button",{onClick:()=>{navigator.share?navigator.share({title:"Check out this post from Local Business",text:e.content,url:window.location.href}):(navigator.clipboard.writeText(window.location.href),n({title:"Link Copied",description:"Post link copied to clipboard"}))},className:"frosted-panel px-4 py-2 rounded-lg transition-all duration-300 hover:shadow-md flex items-center gap-2 metallic-button-press","data-testid":`button-share-post-${e.id}`,children:[Ot.jsx("i",{className:"fas fa-share text-sm text-gray-900"}),Ot.jsx("span",{className:"text-sm font-semibold text-gray-900",children:e.shareCount||0})]})]}),Ot.jsx("button",{onClick:()=>p.mutate(),disabled:p.isPending||!t,className:"p-3 rounded-lg transition-all duration-300 metallic-button-press "+(a?"metallic-teal text-white":"frosted-panel hover:shadow-md"),"data-testid":`button-save-post-${e.id}`,children:Ot.jsx("i",{className:`${a?"fas fa-bookmark":"far fa-bookmark"} text-base ${a?"text-white":"text-gray-900"}`})})]})]})})}nu.displayName="AnimatedHikeCard";const su=eu.extend({content:Ao().min(1,"Post content is required").max(2e3,"Post content must be less than 2000 characters"),type:Do(["update","achievement","partnership","product"]).default("update")});function iu(){const{user:e,isAuthenticated:t}=Ua(),{toast:n}=Nn(),[r,s]=hn.useState(!1),{data:i=[],isLoading:a}=za({queryKey:["/api/posts"]}),{data:o=[]}=za({queryKey:["/api/businesses/my"],enabled:t}),l=pn({resolver:Rr(su),defaultValues:{content:"",type:"update",businessId:""}}),c=Fa({mutationFn:async e=>await qn("POST","/api/posts",e),onSuccess:()=>{n({title:"Post created",description:"Your post has been shared with the community."}),l.reset(),s(!1),vr.invalidateQueries({queryKey:["/api/posts"]})},onError:e=>{n({title:"Error",description:"Failed to create post. Please try again.",variant:"destructive"})}});return Ot.jsxs("section",{className:"elite-feed-section py-20",children:[Ot.jsx(Xd,{}),Ot.jsx("div",{className:"container mx-auto px-4 lg:px-8",children:Ot.jsxs("div",{className:"max-w-4xl mx-auto",children:[Ot.jsx("div",{className:"text-center mb-16 entrance-fade-up",children:Ot.jsx(Yd,{title:"Community Activity",subtitle:"Stay connected with what's happening in your local business community. See updates, celebrate successes, and discover opportunities."})}),t&&o.length>0&&Ot.jsxs("div",{className:"elite-create-post-card mb-8",children:[Ot.jsx("div",{className:"elite-post-marble-overlay"}),Ot.jsx("div",{className:"relative z-10 p-6",children:Ot.jsxs("div",{className:"flex items-center space-x-4",children:[Ot.jsx("div",{className:"elite-post-avatar-frame",children:Ot.jsxs("div",{className:"w-10 h-10 bg-gradient-to-br from-primary via-accent to-secondary rounded-full flex items-center justify-center relative overflow-hidden",children:[Ot.jsx("span",{className:"text-primary-foreground font-semibold relative z-10",children:e?.firstName?.[0]||"U"}),Ot.jsx("div",{className:"absolute inset-0 bg-white/10 backdrop-blur-sm"})]})}),Ot.jsxs(yr,{open:r,onOpenChange:s,children:[Ot.jsx(br,{asChild:!0,children:Ot.jsxs(Ln,{variant:"outline",className:"elite-create-post-input flex-1 justify-start","data-testid":"button-create-post",children:[Ot.jsx(wr,{className:"h-4 w-4 mr-2"}),"Share an update with the community..."]})}),Ot.jsxs(jr,{className:"sm:max-w-2xl",children:[Ot.jsx(Nr,{children:Ot.jsx(_r,{children:"Create Post"})}),Ot.jsx(Sr,{...l,children:Ot.jsxs("form",{onSubmit:l.handleSubmit(e=>{e.businessId?c.mutate(e):n({title:"Business required",description:"Please select a business to post from.",variant:"destructive"})}),className:"space-y-6",children:[Ot.jsx(Mr,{control:l.control,name:"businessId",render:({field:e})=>Ot.jsxs(Cr,{children:[Ot.jsx(Er,{children:"Post as"}),Ot.jsxs(Un,{onValueChange:e.onChange,defaultValue:e.value,children:[Ot.jsx(kr,{children:Ot.jsx(Vn,{"data-testid":"select-business",children:Ot.jsx(Hn,{placeholder:"Select your business"})})}),Ot.jsx(Wn,{children:o.map(e=>Ot.jsx($n,{value:e.id,children:e.name},e.id))})]}),Ot.jsx(Ar,{})]})}),Ot.jsx(Mr,{control:l.control,name:"type",render:({field:e})=>Ot.jsxs(Cr,{children:[Ot.jsx(Er,{children:"Post Type"}),Ot.jsxs(Un,{onValueChange:e.onChange,defaultValue:e.value,children:[Ot.jsx(kr,{children:Ot.jsx(Vn,{"data-testid":"select-post-type",children:Ot.jsx(Hn,{})})}),Ot.jsxs(Wn,{children:[Ot.jsx($n,{value:"update",children:"General Update"}),Ot.jsx($n,{value:"achievement",children:"Achievement"}),Ot.jsx($n,{value:"partnership",children:"Partnership"}),Ot.jsx($n,{value:"product",children:"New Product"})]})]}),Ot.jsx(Ar,{})]})}),Ot.jsx(Mr,{control:l.control,name:"content",render:({field:e})=>Ot.jsxs(Cr,{children:[Ot.jsx(Er,{children:"Content"}),Ot.jsx(kr,{children:Ot.jsx(Tr,{placeholder:"What's happening with your business?",className:"min-h-32","data-testid":"textarea-post-content",...e})}),Ot.jsx(Ar,{})]})}),Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs(Ln,{type:"button",variant:"outline",size:"sm",children:[Ot.jsx(Pr,{className:"h-4 w-4 mr-2"}),"Add Images"]}),Ot.jsxs("div",{className:"flex space-x-2",children:[Ot.jsx(Ln,{type:"button",variant:"outline",onClick:()=>s(!1),children:"Cancel"}),Ot.jsx(Ln,{type:"submit",disabled:c.isPending,"data-testid":"button-submit-post",children:c.isPending?"Posting...":"Share Post"})]})]})]})})]})]})]})})]}),Ot.jsx("div",{className:"elite-feed-container space-y-6",children:a?[...Array(3)].map((e,t)=>Ot.jsxs("div",{className:"elite-post-card elite-post-skeleton",children:[Ot.jsx("div",{className:"elite-post-marble-overlay"}),Ot.jsxs("div",{className:"relative z-10",children:[Ot.jsxs("div",{className:"flex items-start space-x-4 mb-4",children:[Ot.jsx(er,{className:"h-12 w-12 rounded-full"}),Ot.jsxs("div",{className:"flex-1 space-y-2",children:[Ot.jsx(er,{className:"h-4 w-1/4"}),Ot.jsx(er,{className:"h-3 w-1/6"}),Ot.jsx(er,{className:"h-4 w-full"}),Ot.jsx(er,{className:"h-4 w-3/4"})]})]}),Ot.jsx(er,{className:"h-48 w-full mb-4 rounded-lg"}),Ot.jsxs("div",{className:"flex items-center justify-between pt-4 border-t elite-post-divider",children:[Ot.jsxs("div",{className:"flex space-x-6",children:[Ot.jsx(er,{className:"h-4 w-12"}),Ot.jsx(er,{className:"h-4 w-12"}),Ot.jsx(er,{className:"h-4 w-12"})]}),Ot.jsx(er,{className:"h-4 w-8"})]})]})]},t)):i.length>0?i.slice(0,5).map(e=>Ot.jsx(ru,{post:e},e.id)):Ot.jsxs("div",{className:"text-center py-16",children:[Ot.jsxs("div",{className:"relative inline-block mb-6",children:[Ot.jsx(Or,{className:"text-6xl text-muted-foreground mx-auto",size:64}),Ot.jsx("div",{className:"absolute inset-0 text-muted-foreground opacity-20 blur-lg"})]}),Ot.jsx("h3",{className:"text-2xl font-bold mb-4 gradient-text text-luxury font-serif",children:"No activity yet"}),Ot.jsx("p",{className:"text-muted-foreground mb-6 max-w-md mx-auto",children:"Be the first to share an update with the community!"}),t&&o.length>0&&Ot.jsxs(Ln,{onClick:()=>s(!0),"data-testid":"button-create-first-post",children:[Ot.jsx(wr,{className:"h-4 w-4 mr-2"}),"Create Your First Post"]})]})}),i.length>5&&Ot.jsx("div",{className:"text-center mt-12",children:Ot.jsxs(Ln,{className:"metallic hover-lift btn-press px-8 py-4 font-semibold group transition-all duration-300 shadow-sm","data-testid":"button-load-more-posts",children:[Ot.jsx(Dn,{className:"h-5 w-5 mr-3 group-hover:scale-110 transition-transform duration-300"}),Ot.jsx("span",{className:"relative z-10",children:"Load More Updates"}),Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary/20 to-accent/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300 rounded-lg"})]})})]})})]})}function au(){return Ot.jsx("div",{className:"min-h-screen relative overflow-hidden",children:Ot.jsxs("div",{className:"relative z-10",children:[Ot.jsx(Ud,{}),Ot.jsx(Zd,{}),Ot.jsx("section",{className:"relative py-20 overflow-hidden",children:Ot.jsxs(oo,{children:[Ot.jsx(lo,{count:60,color:"cyan"}),Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/20 via-secondary/15 to-accent/20"}),Ot.jsx("div",{className:"container mx-auto px-4 lg:px-8 text-center relative z-10",children:Ot.jsxs("div",{className:"max-w-4xl mx-auto",children:[Ot.jsx(co,{glowText:"Ready to Shine in the Spotlight?",glowTextSize:"lg",className:"mb-6 entrance-fade-up"}),Ot.jsx("div",{className:"bg-black/60 backdrop-blur-sm p-6 rounded-2xl mb-12 entrance-fade-up stagger-1",children:Ot.jsx("p",{className:"text-xl text-white leading-relaxed",style:{textShadow:"0 2px 8px rgba(0,0,0,0.8)"},children:"Join thousands of Florida businesses building their digital presence, connecting with customers, and growing their community impact."})}),Ot.jsxs("div",{className:"grid md:grid-cols-3 gap-8 mb-12 entrance-fade-up stagger-2",children:[Ot.jsxs("div",{className:"relative group",children:[Ot.jsx("div",{className:"absolute -inset-1 bg-gradient-to-br from-primary/40 via-primary/20 to-transparent rounded-2xl blur-xl opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),Ot.jsxs("div",{className:"relative bg-white border border-border/50 p-8 rounded-2xl hover-lift shadow-luxury-multi transition-all duration-500 group-hover:border-primary/30 group-hover:shadow-primary/20",children:[Ot.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-orange-500 to-orange-600 rounded-2xl flex items-center justify-center mx-auto mb-6 group-hover:scale-110 transition-transform duration-300 shadow-lg border-2 border-orange-400/30",style:{boxShadow:"0 8px 20px rgba(249, 115, 22, 0.4), inset 0 1px 0 rgba(255,255,255,0.3)"},children:Ot.jsx(fr,{className:"text-white",size:32})}),Ot.jsx("h3",{className:"text-2xl font-bold mb-4 text-gray-900",children:"Rich Business Profiles"}),Ot.jsx("p",{className:"text-gray-900 leading-relaxed",children:"Showcase your brand with high-quality images, videos, and detailed descriptions that captivate your audience."})]})]}),Ot.jsxs("div",{className:"relative group",children:[Ot.jsx("div",{className:"absolute -inset-1 bg-gradient-to-br from-secondary/40 via-secondary/20 to-transparent rounded-2xl blur-xl opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),Ot.jsxs("div",{className:"relative bg-white border border-border/50 p-8 rounded-2xl hover-lift shadow-luxury-multi transition-all duration-500 group-hover:border-secondary/30 group-hover:shadow-secondary/20",children:[Ot.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-teal-500 to-teal-600 rounded-2xl flex items-center justify-center mx-auto mb-6 group-hover:scale-110 transition-transform duration-300 shadow-lg border-2 border-teal-400/30",style:{boxShadow:"0 8px 20px rgba(20, 184, 166, 0.4), inset 0 1px 0 rgba(255,255,255,0.3)"},children:Ot.jsx(Ir,{className:"text-white",size:32})}),Ot.jsx("h3",{className:"text-2xl font-bold mb-4 text-gray-900",children:"E-Commerce Integration"}),Ot.jsx("p",{className:"text-gray-900 leading-relaxed",children:"Sell products directly through your profile with secure built-in payment processing and inventory management."})]})]}),Ot.jsxs("div",{className:"relative group",children:[Ot.jsx("div",{className:"absolute -inset-1 bg-gradient-to-br from-accent/40 via-accent/20 to-transparent rounded-2xl blur-xl opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),Ot.jsxs("div",{className:"relative bg-white border border-border/50 p-8 rounded-2xl hover-lift shadow-luxury-multi transition-all duration-500 group-hover:border-accent/30 group-hover:shadow-accent/20",children:[Ot.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-purple-500 to-purple-600 rounded-2xl flex items-center justify-center mx-auto mb-6 group-hover:scale-110 transition-transform duration-300 shadow-lg border-2 border-purple-400/30",style:{boxShadow:"0 8px 20px rgba(168, 85, 247, 0.4), inset 0 1px 0 rgba(255,255,255,0.3)"},children:Ot.jsx(On,{className:"text-white",size:32})}),Ot.jsx("h3",{className:"text-2xl font-bold mb-4 text-gray-900",children:"Community Network"}),Ot.jsx("p",{className:"text-gray-900 leading-relaxed",children:"Connect with other businesses, collaborate on projects, and build lasting partnerships that grow your network."})]})]})]}),Ot.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center entrance-scale-fade stagger-3",children:[Ot.jsxs(Dr,{variant:"gold",size:"lg",onClick:()=>{try{window.location.href="/api/login"}catch(e){alert("Failed to initiate login. Please refresh the page and try again.")}},"data-testid":"button-create-profile",className:"shimmer-gold-hover",children:[Ot.jsx(An,{className:"w-5 h-5 mr-2"}),"Create Your Business Profile"]}),Ot.jsxs(Dr,{variant:"teal",size:"lg",onClick:()=>{window.location.href="/api/login"},"data-testid":"button-create-profile-alt",className:"shimmer-on-hover",children:[Ot.jsx(An,{className:"w-5 h-5 mr-2"}),"Sign In"]}),Ot.jsx(Dr,{variant:"teal",size:"lg",className:"shimmer-on-hover",children:"See Pricing Plans"})]})]})})]})}),Ot.jsx(Jd,{}),Ot.jsx(iu,{}),Ot.jsxs("footer",{className:"relative bg-card/95 backdrop-blur-xl border-t border-border/50 premium-surface overflow-hidden","data-surface-intensity":"delicate",children:[Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 via-transparent to-secondary/5 pointer-events-none"}),Ot.jsxs("div",{className:"container mx-auto px-4 lg:px-8 py-16 relative z-10",children:[Ot.jsxs("div",{className:"grid lg:grid-cols-4 gap-12 mb-12",children:[Ot.jsxs("div",{className:"lg:col-span-1 entrance-fade-up",children:[Ot.jsxs("div",{className:"flex items-center space-x-2 mb-6 group",children:[Ot.jsx("i",{className:"fas fa-palm-tree text-2xl text-primary group-hover:scale-110 transition-transform duration-300"}),Ot.jsxs("div",{children:[Ot.jsx("h1",{className:"text-xl font-bold text-primary",children:"Florida Local"}),Ot.jsx("p",{className:"text-xs text-gray-700",children:"Elite"})]})]}),Ot.jsx("p",{className:"text-gray-700 mb-6 leading-relaxed",children:"Connecting Florida's business community through innovation, collaboration, and local pride. Where entrepreneurs thrive together."}),Ot.jsxs("div",{className:"flex space-x-4",children:[Ot.jsxs("a",{href:"#",className:"relative w-10 h-10 bg-gradient-to-br from-primary to-primary/80 text-primary-foreground rounded-full flex items-center justify-center hover:scale-110 transition-all duration-300 shadow-md hover:shadow-primary/40 group",children:[Ot.jsx("i",{className:"fab fa-facebook relative z-10"}),Ot.jsx("div",{className:"absolute inset-0 bg-primary/20 rounded-full blur-md opacity-0 group-hover:opacity-100 transition-opacity"})]}),Ot.jsxs("a",{href:"#",className:"relative w-10 h-10 bg-gradient-to-br from-secondary to-secondary/80 text-primary-foreground rounded-full flex items-center justify-center hover:scale-110 transition-all duration-300 shadow-md hover:shadow-secondary/40 group",children:[Ot.jsx("i",{className:"fab fa-instagram relative z-10"}),Ot.jsx("div",{className:"absolute inset-0 bg-secondary/20 rounded-full blur-md opacity-0 group-hover:opacity-100 transition-opacity"})]}),Ot.jsxs("a",{href:"#",className:"relative w-10 h-10 bg-gradient-to-br from-accent to-accent/80 text-primary-foreground rounded-full flex items-center justify-center hover:scale-110 transition-all duration-300 shadow-md hover:shadow-accent/40 group",children:[Ot.jsx("i",{className:"fab fa-linkedin relative z-10"}),Ot.jsx("div",{className:"absolute inset-0 bg-accent/20 rounded-full blur-md opacity-0 group-hover:opacity-100 transition-opacity"})]}),Ot.jsxs("a",{href:"#",className:"relative w-10 h-10 bg-gradient-to-br from-primary to-secondary text-primary-foreground rounded-full flex items-center justify-center hover:scale-110 transition-all duration-300 shadow-md hover:shadow-primary/40 group",children:[Ot.jsx("i",{className:"fab fa-twitter relative z-10"}),Ot.jsx("div",{className:"absolute inset-0 bg-primary/20 rounded-full blur-md opacity-0 group-hover:opacity-100 transition-opacity"})]})]})]}),Ot.jsxs("div",{className:"entrance-fade-up stagger-1",children:[Ot.jsx("h3",{className:"font-bold text-lg mb-6 text-primary",children:"Platform"}),Ot.jsxs("ul",{className:"space-y-3",children:[Ot.jsx("li",{children:Ot.jsx("a",{href:"#",className:"text-gray-700 hover:text-primary transition-all duration-300 hover:translate-x-1 inline-block",children:"Business Profiles"})}),Ot.jsx("li",{children:Ot.jsx("a",{href:"#",className:"text-gray-700 hover:text-primary transition-all duration-300 hover:translate-x-1 inline-block",children:"Marketplace"})}),Ot.jsx("li",{children:Ot.jsx("a",{href:"#",className:"text-gray-700 hover:text-primary transition-all duration-300 hover:translate-x-1 inline-block",children:"Community"})}),Ot.jsx("li",{children:Ot.jsx("a",{href:"#",className:"text-gray-700 hover:text-primary transition-all duration-300 hover:translate-x-1 inline-block",children:"Spotlight"})}),Ot.jsx("li",{children:Ot.jsx("a",{href:"#",className:"text-gray-700 hover:text-primary transition-all duration-300 hover:translate-x-1 inline-block",children:"Analytics"})})]})]}),Ot.jsxs("div",{className:"entrance-fade-up stagger-2",children:[Ot.jsx("h3",{className:"font-bold text-lg mb-6 text-secondary",children:"Resources"}),Ot.jsxs("ul",{className:"space-y-3",children:[Ot.jsx("li",{children:Ot.jsx("a",{href:"#",className:"text-gray-700 hover:text-secondary transition-all duration-300 hover:translate-x-1 inline-block",children:"Help Center"})}),Ot.jsx("li",{children:Ot.jsx("a",{href:"#",className:"text-gray-700 hover:text-secondary transition-all duration-300 hover:translate-x-1 inline-block",children:"Getting Started"})}),Ot.jsx("li",{children:Ot.jsx("a",{href:"#",className:"text-gray-700 hover:text-secondary transition-all duration-300 hover:translate-x-1 inline-block",children:"API Documentation"})}),Ot.jsx("li",{children:Ot.jsx("a",{href:"#",className:"text-gray-700 hover:text-secondary transition-all duration-300 hover:translate-x-1 inline-block",children:"Success Stories"})}),Ot.jsx("li",{children:Ot.jsx("a",{href:"#",className:"text-gray-700 hover:text-secondary transition-all duration-300 hover:translate-x-1 inline-block",children:"Blog"})})]})]}),Ot.jsxs("div",{className:"entrance-fade-up stagger-3",children:[Ot.jsx("h3",{className:"font-bold text-lg mb-6 text-accent",children:"Stay Connected"}),Ot.jsx("p",{className:"text-gray-700 mb-4",children:"Get the latest updates on new features, spotlight businesses, and community events."}),Ot.jsxs("div",{className:"space-y-3",children:[Ot.jsx("input",{type:"email",placeholder:"Enter your email",className:"w-full px-4 py-3 bg-muted/50 border border-border/50 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary/50 transition-all duration-300 hover:border-border backdrop-blur-sm","data-testid":"input-newsletter-email"}),Ot.jsx("button",{className:"w-full bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90 text-primary-foreground py-3 rounded-lg font-semibold transition-all duration-300 shadow-md hover:shadow-lg hover:shadow-primary/30 hover:-translate-y-0.5","data-testid":"button-subscribe-newsletter",children:"Subscribe"})]})]})]}),Ot.jsx("div",{className:"pt-8 border-t border-border/30",children:Ot.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between entrance-fade-up stagger-4",children:[Ot.jsx("p",{className:"text-gray-700 text-sm mb-4 md:mb-0",children:" 2024 Florida Local Elite. All rights reserved."}),Ot.jsxs("div",{className:"flex space-x-6 text-sm",children:[Ot.jsx("a",{href:"#",className:"text-gray-700 hover:text-primary transition-all duration-300 hover:-translate-y-0.5 inline-block",children:"Privacy Policy"}),Ot.jsx("a",{href:"#",className:"text-gray-700 hover:text-primary transition-all duration-300 hover:-translate-y-0.5 inline-block",children:"Terms of Service"}),Ot.jsx("a",{href:"#",className:"text-gray-700 hover:text-primary transition-all duration-300 hover:-translate-y-0.5 inline-block",children:"Cookie Policy"}),Ot.jsx("a",{href:"#",className:"text-gray-700 hover:text-primary transition-all duration-300 hover:-translate-y-0.5 inline-block",children:"Contact"})]})]})})]})]})]})})}const ou=hn.forwardRef(({className:e,...t},n)=>Ot.jsx(Wt,{ref:n,className:bn("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));ou.displayName=Wt.displayName;const lu=hn.forwardRef(({className:e,...t},n)=>Ot.jsx($t,{ref:n,className:bn("aspect-square h-full w-full",e),...t}));lu.displayName=$t.displayName;const cu=hn.forwardRef(({className:e,...t},n)=>Ot.jsx(Gt,{ref:n,className:bn("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));function du({variant:e="homepage",limit:t=6}){const{isAuthenticated:n}=Ua(),{toast:r}=Nn(),[s,i]=hn.useState(null),[a,o]=hn.useState(new Set),{data:l=[],isLoading:c}=za({queryKey:["/api/spotlight/voting/eligible",t],refetchInterval:1e4}),{data:d,isLoading:u}=za({queryKey:["/api/spotlight/voting/stats"],refetchInterval:5e3}),{data:h=[]}=za({queryKey:["/api/spotlight/voting/my-votes"],enabled:n});hn.useEffect(()=>{h&&o(e=>{const t=new Set(h);return e.size!==t.size||[...t].some(t=>!e.has(t))?t:e})},[h]);const p=Fa({mutationFn:async e=>await qn("POST","/api/spotlight/vote",{businessId:e}),onSuccess:(e,t)=>{o(e=>new Set([...e,t])),r({title:"Vote Cast! ",description:"Your vote has been recorded successfully."}),vr.invalidateQueries({queryKey:["/api/spotlight/voting/eligible"]}),vr.invalidateQueries({queryKey:["/api/spotlight/voting/stats"]}),vr.invalidateQueries({queryKey:["/api/spotlight/voting/my-votes"]})},onError:e=>{r({title:"Vote Failed",description:e.message||"Failed to cast your vote. Please try again.",variant:"destructive"})}}),m=e=>{n?d&&d.userVotesRemaining<=0?r({title:"No Votes Remaining",description:"You've used all your votes for this month.",variant:"destructive"}):(i(e),p.mutate(e)):r({title:"Sign In Required",description:"Please sign in to vote for your favorite businesses.",variant:"destructive"})},f=e=>{const t={1:{icon:Wr,className:"metallic-gold",text:"text-white"},2:{icon:Jn,className:"metallic-chrome",text:"text-gray-900"},3:{icon:Jn,className:"metallic-bronze",text:"text-white"}}[e];if(!t)return null;const n=t.icon;return Ot.jsx("div",{className:`inline-flex items-center justify-center w-10 h-10 rounded-full ${t.className} shine-sweep-hover shadow-lg`,children:Ot.jsx(n,{className:`h-5 w-5 ${t.text}`})})},g=e=>{if(!e.previousRank)return null;const t=e.previousRank-e.rank;return 0===t?null:Ot.jsxs(Tn,{variant:t>0?"default":"destructive",className:"ml-2",children:[Ot.jsx(Hr,{className:"h-3 w-3 mr-1 "+(t<0?"rotate-180":"")}),Math.abs(t)]})},x=()=>{if(!d)return"";const e=Lo(new Date(d.votingEndsAt),new Date);return e>1?`${e} days remaining`:1===e?"1 day remaining":"Ends today"};return c||u?Ot.jsxs(Sn,{className:"border-2",children:[Ot.jsx(Lr,{children:Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx(Fr,{className:"h-6 w-6 animate-spin text-purple-600"}),Ot.jsx(zr,{children:"Loading Spotlight Voting..."})]})}),Ot.jsx(Mn,{children:Ot.jsx("div",{className:"space-y-4",children:[...Array(3)].map((e,t)=>Ot.jsx("div",{className:"h-24 bg-muted animate-pulse rounded-lg"},t))})})]}):"homepage"===e?Ot.jsxs(Sn,{className:"glass-card-futuristic border-2 metallic-border-animated overflow-hidden",children:[Ot.jsx(Lr,{className:"relative z-10",children:Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsx("div",{className:"metallic-chrome p-3 rounded-full shine-sweep-hover",children:Ot.jsx(Jn,{className:"h-6 w-6 text-gray-900"})}),Ot.jsxs("div",{children:[Ot.jsxs(zr,{className:"text-2xl flex items-center gap-2",children:[Ot.jsx("span",{className:"metallic-gradient-text",children:"Monthly Spotlight Voting"}),Ot.jsxs(Tn,{className:"led-badge-live px-3 py-1 rounded-full",children:[Ot.jsx(Br,{className:"h-3 w-3 mr-1"}),"Live"]})]}),Ot.jsx(Ur,{className:"text-base font-medium text-gray-700",children:"Vote for your favorite Florida businesses"})]})]}),d&&Ot.jsxs("div",{className:"text-right",children:[Ot.jsxs("div",{className:"text-sm text-gray-600 flex items-center gap-1 justify-end mb-1",children:[Ot.jsx(xr,{className:"h-4 w-4"}),Ot.jsx("span",{className:"font-medium",children:x()})]}),Ot.jsx("div",{className:"led-counter inline-block px-4 py-1 rounded-lg",children:d.totalVotes.toLocaleString()}),Ot.jsx("div",{className:"text-xs text-gray-600 mt-1 font-medium",children:"total votes"})]})]})}),Ot.jsxs(Mn,{className:"space-y-4",children:[n&&d&&Ot.jsxs(wo.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"p-4 rounded-lg bg-gradient-to-r from-blue-50 to-cyan-50 border border-blue-200",children:[Ot.jsxs("div",{className:"flex items-center justify-between mb-2",children:[Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx(Zn,{className:"h-5 w-5 text-blue-600"}),Ot.jsxs("span",{className:"font-semibold text-blue-900",children:["Your Votes: ",d.userVotesRemaining," remaining"]})]}),Ot.jsxs(Tn,{variant:"outline",className:"text-blue-700",children:[h.length," cast"]})]}),Ot.jsx(Vr,{value:d.userVotesRemaining/5*100,className:"h-2"})]}),Ot.jsx("div",{className:"grid gap-3",children:l.slice(0,3).map((e,t)=>Ot.jsx(wo.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*t},className:"apple-hover-depth",children:Ot.jsx(Sn,{className:"frosted-panel overflow-hidden transition-all duration-300 "+(1===e.rank?"metallic-border-animated border-2":"border border-white/30"),children:Ot.jsx(Mn,{className:"p-3",children:Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsx("div",{className:"flex-shrink-0",children:f(e.rank)}),Ot.jsxs(ou,{className:"h-10 w-10 border-2 border-white/50 shadow-md",children:[Ot.jsx(lu,{src:e.logoUrl}),Ot.jsx(cu,{className:"metallic-chrome text-gray-900 font-bold",children:e.name.charAt(0)})]}),Ot.jsxs("div",{className:"flex-1 min-w-0",children:[Ot.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[Ot.jsx("h4",{className:"font-bold text-base truncate text-gray-900",children:e.name}),g(e),e.isRising&&Ot.jsxs(Tn,{className:"metallic-teal text-white px-2 py-0.5 text-xs",children:[Ot.jsx(Dn,{className:"h-3 w-3 mr-1"}),"Rising"]})]}),Ot.jsx("p",{className:"text-xs text-gray-700 truncate font-medium",children:e.tagline||e.category}),Ot.jsxs("div",{className:"flex items-center gap-3 mt-1.5 text-xs",children:[Ot.jsxs("span",{className:"flex items-center gap-1 font-semibold text-gray-700",children:[Ot.jsx(Zn,{className:"h-3 w-3 fill-current text-red-500"}),e.voteCount]}),0!==e.voteTrend&&Ot.jsxs(Tn,{className:"px-2 py-0.5 text-xs "+(e.voteTrend>0?"bg-green-500 text-white":"bg-red-500 text-white"),children:[Ot.jsx(Dn,{className:"h-3 w-3 mr-0.5 "+(e.voteTrend<0?"rotate-180":"")}),e.voteTrend>0?"+":"",e.voteTrend,"%"]})]})]}),Ot.jsx("div",{className:"flex-shrink-0",children:a.has(e.id)?Ot.jsxs(Ln,{disabled:!0,className:"metallic-teal text-white px-4 py-2 h-9",children:[Ot.jsx(rr,{className:"h-4 w-4 mr-1"}),"Voted"]}):Ot.jsx(Ln,{onClick:()=>m(e.id),disabled:p.isPending&&s===e.id,className:"metallic-chrome text-gray-900 hover:shadow-lg px-4 py-2 h-9 shine-sweep-hover metallic-button-press",children:p.isPending&&s===e.id?Ot.jsx(Fr,{className:"h-4 w-4 animate-spin"}):Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(Zn,{className:"h-4 w-4 mr-1"}),"Vote"]})})})]})})})},e.id))}),Ot.jsxs(Ln,{variant:"outline",className:"w-full",onClick:()=>window.location.href="/spotlight/voting",children:["View All Candidates (",l.length,")",Ot.jsx(Hr,{className:"h-4 w-4 ml-2 rotate-90"})]})]})]}):Ot.jsxs("div",{className:"space-y-6",children:[d&&Ot.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[Ot.jsx(Sn,{children:Ot.jsx(Mn,{className:"p-6",children:Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsx("div",{className:"p-3 rounded-lg bg-purple-100",children:Ot.jsx(Jn,{className:"h-6 w-6 text-purple-600"})}),Ot.jsxs("div",{children:[Ot.jsx("div",{className:"text-2xl font-bold",children:d.totalVotes.toLocaleString()}),Ot.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Votes"})]})]})})}),Ot.jsx(Sn,{children:Ot.jsx(Mn,{className:"p-6",children:Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsx("div",{className:"p-3 rounded-lg bg-blue-100",children:Ot.jsx(On,{className:"h-6 w-6 text-blue-600"})}),Ot.jsxs("div",{children:[Ot.jsx("div",{className:"text-2xl font-bold",children:d.totalVoters.toLocaleString()}),Ot.jsx("div",{className:"text-sm text-muted-foreground",children:"Voters"})]})]})})}),Ot.jsx(Sn,{children:Ot.jsx(Mn,{className:"p-6",children:Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsx("div",{className:"p-3 rounded-lg bg-green-100",children:Ot.jsx(Wr,{className:"h-6 w-6 text-green-600"})}),Ot.jsxs("div",{children:[Ot.jsx("div",{className:"text-lg font-bold truncate",children:d.currentLeader}),Ot.jsx("div",{className:"text-sm text-muted-foreground",children:"Current Leader"})]})]})})}),Ot.jsx(Sn,{children:Ot.jsx(Mn,{className:"p-6",children:Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsx("div",{className:"p-3 rounded-lg bg-orange-100",children:Ot.jsx(xr,{className:"h-6 w-6 text-orange-600"})}),Ot.jsxs("div",{children:[Ot.jsx("div",{className:"text-lg font-bold",children:x()}),Ot.jsx("div",{className:"text-sm text-muted-foreground",children:"Time Left"})]})]})})})]}),Ot.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:l.map((e,t)=>Ot.jsx(wo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*t},children:Ot.jsx(Sn,{className:"overflow-hidden transition-all duration-300 hover:shadow-lg "+(e.rank<=3?"border-2 border-purple-200":""),children:Ot.jsx(Mn,{className:"p-6",children:Ot.jsxs("div",{className:"flex items-start gap-4",children:[Ot.jsxs("div",{className:"flex flex-col items-center gap-2",children:[Ot.jsxs("div",{className:"text-3xl font-bold text-muted-foreground",children:["#",e.rank]}),e.rank<=3&&f(e.rank)]}),Ot.jsxs("div",{className:"flex-1",children:[Ot.jsx("div",{className:"flex items-start justify-between mb-3",children:Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsxs(ou,{className:"h-16 w-16 border-2 border-white shadow-md",children:[Ot.jsx(lu,{src:e.logoUrl}),Ot.jsx(cu,{className:"bg-gradient-to-br from-purple-500 to-pink-500 text-white text-xl font-bold",children:e.name.charAt(0)})]}),Ot.jsxs("div",{children:[Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx("h3",{className:"font-bold text-xl",children:e.name}),g(e)]}),Ot.jsx("p",{className:"text-sm text-muted-foreground",children:e.category}),e.rating&&Ot.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[Ot.jsx(In,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),Ot.jsx("span",{className:"text-sm font-semibold",children:e.rating}),Ot.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",e.reviewCount," reviews)"]})]})]})]})}),e.tagline&&Ot.jsx("p",{className:"text-sm text-muted-foreground mb-4 line-clamp-2",children:e.tagline}),Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[Ot.jsxs("span",{className:"flex items-center gap-1 font-semibold",children:[Ot.jsx(Zn,{className:"h-4 w-4 fill-current text-red-500"}),e.voteCount," votes"]}),0!==e.voteTrend&&Ot.jsxs(Tn,{variant:e.voteTrend>0?"default":"destructive",children:[e.voteTrend>0?"+":"",e.voteTrend,"%"]}),e.isRising&&Ot.jsxs(Tn,{className:"bg-gradient-to-r from-green-500 to-emerald-500",children:[Ot.jsx(Pn,{className:"h-3 w-3 mr-1"}),"Trending"]})]}),a.has(e.id)?Ot.jsxs(Ln,{disabled:!0,className:"bg-green-500 text-white",children:[Ot.jsx(rr,{className:"h-4 w-4 mr-2"}),"Voted"]}):Ot.jsx(Ln,{onClick:()=>m(e.id),disabled:p.isPending&&s===e.id,className:"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700",children:p.isPending&&s===e.id?Ot.jsx(Fr,{className:"h-4 w-4 animate-spin"}):Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(Zn,{className:"h-4 w-4 mr-2"}),"Vote"]})})]})]})]})})})},e.id))})]})}function uu({limit:e=5,variant:t="compact"}){const{data:n=[],isLoading:r}=za({queryKey:["/api/businesses/trending",e],refetchInterval:3e4}),s=e=>e>80?Ot.jsx(Br,{className:"h-4 w-4 text-white"}):e>60?Ot.jsx(Pn,{className:"h-4 w-4 text-white"}):Ot.jsx(Dn,{className:"h-4 w-4 text-white"}),i=e=>e>80?"metallic-gold":e>60?"metallic-bronze":"metallic-teal";return r?Ot.jsx("div",{className:"space-y-3",children:[...Array(e)].map((e,t)=>Ot.jsx("div",{className:"h-20 bg-muted animate-pulse rounded-lg"},t))}):0===n.length?Ot.jsx(Sn,{children:Ot.jsxs(Mn,{className:"p-8 text-center",children:[Ot.jsx(Dn,{className:"h-12 w-12 mx-auto mb-3 text-muted-foreground"}),Ot.jsx("p",{className:"text-muted-foreground",children:"No trending businesses yet"})]})}):"compact"===t?Ot.jsx("div",{className:"space-y-2",children:n.map((e,t)=>Ot.jsx(wo.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.05*t},className:"apple-hover-depth",children:Ot.jsx(Yn,{href:`/business/${e.id}`,children:Ot.jsx(Sn,{className:"frosted-panel hover:shadow-xl transition-all duration-300 cursor-pointer group border border-white/30",children:Ot.jsx(Mn,{className:"p-3",children:Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsxs("div",{className:"flex flex-col items-center gap-1 flex-shrink-0",children:[Ot.jsxs("div",{className:"text-base font-bold text-gray-700",children:["#",t+1]}),Ot.jsx("div",{className:`p-1.5 rounded-full ${i(e.trendScore)} shine-sweep-hover`,children:s(e.trendScore)})]}),Ot.jsxs(ou,{className:"h-10 w-10 border-2 border-white/50 shadow-md flex-shrink-0",children:[Ot.jsx(lu,{src:e.logoUrl}),Ot.jsx(cu,{className:"metallic-chrome text-gray-900 font-bold",children:e.name.charAt(0)})]}),Ot.jsxs("div",{className:"flex-1 min-w-0",children:[Ot.jsx("h4",{className:"font-bold text-sm truncate text-gray-900 group-hover:text-blue-600 transition-colors",children:e.name}),Ot.jsx("p",{className:"text-xs text-gray-700 truncate font-medium",children:e.category}),e.rating&&Ot.jsxs("div",{className:"flex items-center gap-1 mt-0.5",children:[Ot.jsx(In,{className:"h-3 w-3 fill-yellow-400 text-yellow-400"}),Ot.jsx("span",{className:"text-xs font-semibold text-gray-700",children:e.rating})]})]}),Ot.jsxs(Tn,{className:`${i(e.trendScore)} text-white px-2 py-1 shine-sweep-hover flex-shrink-0`,children:[Ot.jsx(Hr,{className:"h-3 w-3 mr-0.5"}),e.trendPercentage,"%"]})]})})})})},e.id))}):Ot.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map((e,t)=>Ot.jsx(wo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*t},children:Ot.jsx(Yn,{href:`/business/${e.id}`,children:Ot.jsxs(Sn,{className:"hover:shadow-xl transition-all duration-300 cursor-pointer group overflow-hidden",children:[Ot.jsxs("div",{className:"relative",children:[Ot.jsx("div",{className:`absolute top-4 -left-12 rotate-[-45deg] w-40 py-1 text-center bg-gradient-to-r ${getTrendColor(e.trendScore)} text-white text-xs font-bold shadow-lg z-10`,children:e.trendScore>80?"ON FIRE":e.trendScore>60?"HOT":"TRENDING"}),Ot.jsxs("div",{className:"h-32 bg-gradient-to-br from-purple-500 to-pink-500 relative",children:[e.coverImageUrl&&Ot.jsx("img",{src:e.coverImageUrl,alt:e.name,className:"w-full h-full object-cover opacity-80"}),Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent"}),Ot.jsx("div",{className:"absolute top-4 right-4 bg-white/90 backdrop-blur-sm rounded-full p-3",children:Ot.jsxs("div",{className:"flex flex-col items-center",children:[Ot.jsx("div",{className:`p-2 rounded-full bg-gradient-to-r ${getTrendColor(e.trendScore)}`,children:s(e.trendScore)}),Ot.jsx("span",{className:"text-xs font-bold mt-1",children:e.trendScore})]})})]})]}),Ot.jsxs(Mn,{className:"p-6 relative -mt-8",children:[Ot.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[Ot.jsxs(ou,{className:"h-16 w-16 border-4 border-white shadow-xl",children:[Ot.jsx(lu,{src:e.logoUrl}),Ot.jsx(cu,{className:"bg-gradient-to-br from-purple-500 to-pink-500 text-white text-xl font-bold",children:e.name.charAt(0)})]}),Ot.jsxs("div",{className:"flex-1",children:[Ot.jsx("h3",{className:"font-bold text-lg group-hover:text-purple-600 transition-colors mb-1",children:e.name}),Ot.jsx("p",{className:"text-sm text-muted-foreground",children:e.category})]})]}),e.tagline&&Ot.jsx("p",{className:"text-sm text-muted-foreground mb-4 line-clamp-2",children:e.tagline}),Ot.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[Ot.jsxs("div",{className:"p-3 rounded-lg bg-gradient-to-br from-blue-50 to-cyan-50 border border-blue-100",children:[Ot.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[Ot.jsx($r,{className:"h-4 w-4 text-blue-600"}),Ot.jsx("span",{className:"text-xs font-semibold text-blue-900",children:"Views"})]}),Ot.jsxs("div",{className:"flex items-center gap-1",children:[Ot.jsxs("span",{className:"text-lg font-bold",children:[e.viewsGrowth,"%"]}),Ot.jsx(Hr,{className:"h-3 w-3 text-green-600"})]})]}),Ot.jsxs("div",{className:"p-3 rounded-lg bg-gradient-to-br from-purple-50 to-pink-50 border border-purple-100",children:[Ot.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[Ot.jsx(Dn,{className:"h-4 w-4 text-purple-600"}),Ot.jsx("span",{className:"text-xs font-semibold text-purple-900",children:"Growth"})]}),Ot.jsxs("div",{className:"flex items-center gap-1",children:[Ot.jsxs("span",{className:"text-lg font-bold",children:[e.trendPercentage,"%"]}),Ot.jsx(Hr,{className:"h-3 w-3 text-green-600"})]})]})]}),e.rating&&Ot.jsxs("div",{className:"flex items-center justify-between pt-3 border-t",children:[Ot.jsxs("div",{className:"flex items-center gap-1",children:[Ot.jsx(In,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),Ot.jsx("span",{className:"font-semibold",children:e.rating}),Ot.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",e.reviewCount," reviews)"]})]}),Ot.jsxs(Tn,{variant:"outline",children:[e.followerCount||0," followers"]})]}),Ot.jsx("div",{className:"mt-3 p-2 rounded-lg bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200",children:Ot.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm",children:[Ot.jsx(Pn,{className:"h-4 w-4 text-green-600"}),Ot.jsxs("span",{className:"font-semibold text-green-900",children:[e.engagement24h," engagements in 24h"]})]})})]})]})})},e.id))})}
/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */cu.displayName=Gt.displayName;const hu="180",pu=0,mu=1,fu=2,gu=100,xu=101,vu=102,yu=200,bu=201,wu=202,ju=203,Nu=204,_u=205,Su=206,Mu=207,Cu=208,Eu=209,ku=210,Au=211,Tu=212,Pu=213,Ou=214,Ru=0,Iu=1,Du=2,Lu=3,Fu=4,zu=5,Bu=6,Uu=7,Vu="attached",Hu="detached",Wu=300,$u=301,Gu=302,qu=303,Xu=304,Ku=306,Yu=1e3,Zu=1001,Ju=1002,Qu=1003,eh=1004,th=1005,nh=1006,rh=1007,sh=1008,ih=1009,ah=1010,oh=1011,lh=1012,ch=1013,dh=1014,uh=1015,hh=1016,ph=1017,mh=1018,fh=1020,gh=35902,xh=35899,vh=1021,yh=1022,bh=1023,wh=1026,jh=1027,Nh=1028,_h=1029,Sh=1030,Mh=1031,Ch=1033,Eh=33776,kh=33777,Ah=33778,Th=33779,Ph=35840,Oh=35841,Rh=35842,Ih=35843,Dh=36196,Lh=37492,Fh=37496,zh=37808,Bh=37809,Uh=37810,Vh=37811,Hh=37812,Wh=37813,$h=37814,Gh=37815,qh=37816,Xh=37817,Kh=37818,Yh=37819,Zh=37820,Jh=37821,Qh=36492,ep=36494,tp=36495,np=36283,rp=36284,sp=36285,ip=36286,ap=2300,op=2301,lp=2302,cp=2400,dp=2401,up=2402,hp=2500,pp=2501,mp="",fp="srgb",gp="srgb-linear",xp="linear",vp="srgb",yp=7680,bp=512,wp=513,jp=514,Np=515,_p=516,Sp=517,Mp=518,Cp=519,Ep=35044,kp="300 es",Ap=2e3,Tp=2001;class Pp{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){const n=this._listeners;return void 0!==n&&(void 0!==n[e]&&-1!==n[e].indexOf(t))}removeEventListener(e,t){const n=this._listeners;if(void 0===n)return;const r=n[e];if(void 0!==r){const e=r.indexOf(t);-1!==e&&r.splice(e,1)}}dispatchEvent(e){const t=this._listeners;if(void 0===t)return;const n=t[e.type];if(void 0!==n){e.target=this;const t=n.slice(0);for(let n=0,r=t.length;n<r;n++)t[n].call(this,e);e.target=null}}}const Op=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let Rp=1234567;const Ip=Math.PI/180,Dp=180/Math.PI;function Lp(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(Op[255&e]+Op[e>>8&255]+Op[e>>16&255]+Op[e>>24&255]+"-"+Op[255&t]+Op[t>>8&255]+"-"+Op[t>>16&15|64]+Op[t>>24&255]+"-"+Op[63&n|128]+Op[n>>8&255]+"-"+Op[n>>16&255]+Op[n>>24&255]+Op[255&r]+Op[r>>8&255]+Op[r>>16&255]+Op[r>>24&255]).toLowerCase()}function Fp(e,t,n){return Math.max(t,Math.min(n,e))}function zp(e,t){return(e%t+t)%t}function Bp(e,t,n){return(1-n)*e+n*t}function Up(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return e/4294967295;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int32Array:return Math.max(e/2147483647,-1);case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function Vp(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return Math.round(4294967295*e);case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int32Array:return Math.round(2147483647*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}}const Hp={DEG2RAD:Ip,RAD2DEG:Dp,generateUUID:Lp,clamp:Fp,euclideanModulo:zp,mapLinear:function(e,t,n,r,s){return r+(e-t)*(s-r)/(n-t)},inverseLerp:function(e,t,n){return e!==t?(n-e)/(t-e):0},lerp:Bp,damp:function(e,t,n,r){return Bp(e,t,1-Math.exp(-n*r))},pingpong:function(e,t=1){return t-Math.abs(zp(e,2*t)-t)},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){void 0!==e&&(Rp=e);let t=Rp+=1831565813;return t=Math.imul(t^t>>>15,1|t),t^=t+Math.imul(t^t>>>7,61|t),((t^t>>>14)>>>0)/4294967296},degToRad:function(e){return e*Ip},radToDeg:function(e){return e*Dp},isPowerOfTwo:function(e){return!(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},setQuaternionFromProperEuler:function(e,t,n,r,s){const i=Math.cos,a=Math.sin,o=i(n/2),l=a(n/2),c=i((t+r)/2),d=a((t+r)/2),u=i((t-r)/2),h=a((t-r)/2),p=i((r-t)/2),m=a((r-t)/2);switch(s){case"XYX":e.set(o*d,l*u,l*h,o*c);break;case"YZY":e.set(l*h,o*d,l*u,o*c);break;case"ZXZ":e.set(l*u,l*h,o*d,o*c);break;case"XZX":e.set(o*d,l*m,l*p,o*c);break;case"YXY":e.set(l*p,o*d,l*m,o*c);break;case"ZYZ":e.set(l*m,l*p,o*d,o*c)}},normalize:Vp,denormalize:Up};class Wp{constructor(e=0,t=0){Wp.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Fp(this.x,e.x,t.x),this.y=Fp(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=Fp(this.x,e,t),this.y=Fp(this.y,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Fp(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Fp(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),s=this.x-e.x,i=this.y-e.y;return this.x=s*n-i*r+e.x,this.y=s*r+i*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class $p{constructor(e=0,t=0,n=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=r}static slerpFlat(e,t,n,r,s,i,a){let o=n[r+0],l=n[r+1],c=n[r+2],d=n[r+3];const u=s[i+0],h=s[i+1],p=s[i+2],m=s[i+3];if(0===a)return e[t+0]=o,e[t+1]=l,e[t+2]=c,void(e[t+3]=d);if(1===a)return e[t+0]=u,e[t+1]=h,e[t+2]=p,void(e[t+3]=m);if(d!==m||o!==u||l!==h||c!==p){let e=1-a;const t=o*u+l*h+c*p+d*m,n=t>=0?1:-1,r=1-t*t;if(r>Number.EPSILON){const s=Math.sqrt(r),i=Math.atan2(s,t*n);e=Math.sin(e*i)/s,a=Math.sin(a*i)/s}const s=a*n;if(o=o*e+u*s,l=l*e+h*s,c=c*e+p*s,d=d*e+m*s,e===1-a){const e=1/Math.sqrt(o*o+l*l+c*c+d*d);o*=e,l*=e,c*=e,d*=e}}e[t]=o,e[t+1]=l,e[t+2]=c,e[t+3]=d}static multiplyQuaternionsFlat(e,t,n,r,s,i){const a=n[r],o=n[r+1],l=n[r+2],c=n[r+3],d=s[i],u=s[i+1],h=s[i+2],p=s[i+3];return e[t]=a*p+c*d+o*h-l*u,e[t+1]=o*p+c*u+l*d-a*h,e[t+2]=l*p+c*h+a*u-o*d,e[t+3]=c*p-a*d-o*u-l*h,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const n=e._x,r=e._y,s=e._z,i=e._order,a=Math.cos,o=Math.sin,l=a(n/2),c=a(r/2),d=a(s/2),u=o(n/2),h=o(r/2),p=o(s/2);switch(i){case"XYZ":this._x=u*c*d+l*h*p,this._y=l*h*d-u*c*p,this._z=l*c*p+u*h*d,this._w=l*c*d-u*h*p;break;case"YXZ":this._x=u*c*d+l*h*p,this._y=l*h*d-u*c*p,this._z=l*c*p-u*h*d,this._w=l*c*d+u*h*p;break;case"ZXY":this._x=u*c*d-l*h*p,this._y=l*h*d+u*c*p,this._z=l*c*p+u*h*d,this._w=l*c*d-u*h*p;break;case"ZYX":this._x=u*c*d-l*h*p,this._y=l*h*d+u*c*p,this._z=l*c*p-u*h*d,this._w=l*c*d+u*h*p;break;case"YZX":this._x=u*c*d+l*h*p,this._y=l*h*d+u*c*p,this._z=l*c*p-u*h*d,this._w=l*c*d-u*h*p;break;case"XZY":this._x=u*c*d-l*h*p,this._y=l*h*d-u*c*p,this._z=l*c*p+u*h*d,this._w=l*c*d+u*h*p}return!0===t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],s=t[8],i=t[1],a=t[5],o=t[9],l=t[2],c=t[6],d=t[10],u=n+a+d;if(u>0){const e=.5/Math.sqrt(u+1);this._w=.25/e,this._x=(c-o)*e,this._y=(s-l)*e,this._z=(i-r)*e}else if(n>a&&n>d){const e=2*Math.sqrt(1+n-a-d);this._w=(c-o)/e,this._x=.25*e,this._y=(r+i)/e,this._z=(s+l)/e}else if(a>d){const e=2*Math.sqrt(1+a-n-d);this._w=(s-l)/e,this._x=(r+i)/e,this._y=.25*e,this._z=(o+c)/e}else{const e=2*Math.sqrt(1+d-n-a);this._w=(i-r)/e,this._x=(s+l)/e,this._y=(o+c)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<1e-8?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Fp(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(0===n)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,s=e._z,i=e._w,a=t._x,o=t._y,l=t._z,c=t._w;return this._x=n*c+i*a+r*l-s*o,this._y=r*c+i*o+s*a-n*l,this._z=s*c+i*l+n*o-r*a,this._w=i*c-n*a-r*o-s*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const n=this._x,r=this._y,s=this._z,i=this._w;let a=i*e._w+n*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=i,this._x=n,this._y=r,this._z=s,this;const o=1-a*a;if(o<=Number.EPSILON){const e=1-t;return this._w=e*i+t*this._w,this._x=e*n+t*this._x,this._y=e*r+t*this._y,this._z=e*s+t*this._z,this.normalize(),this}const l=Math.sqrt(o),c=Math.atan2(l,a),d=Math.sin((1-t)*c)/l,u=Math.sin(t*c)/l;return this._w=i*d+this._w*u,this._x=n*d+this._x*u,this._y=r*d+this._y*u,this._z=s*d+this._z*u,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),n=Math.random(),r=Math.sqrt(1-n),s=Math.sqrt(n);return this.set(r*Math.sin(e),r*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Gp{constructor(e=0,t=0,n=0){Gp.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(Xp.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(Xp.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*n+s[6]*r,this.y=s[1]*t+s[4]*n+s[7]*r,this.z=s[2]*t+s[5]*n+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,s=e.elements,i=1/(s[3]*t+s[7]*n+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*n+s[8]*r+s[12])*i,this.y=(s[1]*t+s[5]*n+s[9]*r+s[13])*i,this.z=(s[2]*t+s[6]*n+s[10]*r+s[14])*i,this}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,s=e.x,i=e.y,a=e.z,o=e.w,l=2*(i*r-a*n),c=2*(a*t-s*r),d=2*(s*n-i*t);return this.x=t+o*l+i*d-a*c,this.y=n+o*c+a*l-s*d,this.z=r+o*d+s*c-i*l,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*r,this.y=s[1]*t+s[5]*n+s[9]*r,this.z=s[2]*t+s[6]*n+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Fp(this.x,e.x,t.x),this.y=Fp(this.y,e.y,t.y),this.z=Fp(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=Fp(this.x,e,t),this.y=Fp(this.y,e,t),this.z=Fp(this.z,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Fp(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,r=e.y,s=e.z,i=t.x,a=t.y,o=t.z;return this.x=r*o-s*a,this.y=s*i-n*o,this.z=n*a-r*i,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return qp.copy(this).projectOnVector(e),this.sub(qp)}reflect(e){return this.sub(qp.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Fp(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=2*Math.random()-1,n=Math.sqrt(1-t*t);return this.x=n*Math.cos(e),this.y=t,this.z=n*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const qp=new Gp,Xp=new $p;class Kp{constructor(e,t,n,r,s,i,a,o,l){Kp.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==e&&this.set(e,t,n,r,s,i,a,o,l)}set(e,t,n,r,s,i,a,o,l){const c=this.elements;return c[0]=e,c[1]=r,c[2]=a,c[3]=t,c[4]=s,c[5]=o,c[6]=n,c[7]=i,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,s=this.elements,i=n[0],a=n[3],o=n[6],l=n[1],c=n[4],d=n[7],u=n[2],h=n[5],p=n[8],m=r[0],f=r[3],g=r[6],x=r[1],v=r[4],y=r[7],b=r[2],w=r[5],j=r[8];return s[0]=i*m+a*x+o*b,s[3]=i*f+a*v+o*w,s[6]=i*g+a*y+o*j,s[1]=l*m+c*x+d*b,s[4]=l*f+c*v+d*w,s[7]=l*g+c*y+d*j,s[2]=u*m+h*x+p*b,s[5]=u*f+h*v+p*w,s[8]=u*g+h*y+p*j,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],i=e[4],a=e[5],o=e[6],l=e[7],c=e[8];return t*i*c-t*a*l-n*s*c+n*a*o+r*s*l-r*i*o}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],i=e[4],a=e[5],o=e[6],l=e[7],c=e[8],d=c*i-a*l,u=a*o-c*s,h=l*s-i*o,p=t*d+n*u+r*h;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const m=1/p;return e[0]=d*m,e[1]=(r*l-c*n)*m,e[2]=(a*n-r*i)*m,e[3]=u*m,e[4]=(c*t-r*o)*m,e[5]=(r*s-a*t)*m,e[6]=h*m,e[7]=(n*o-l*t)*m,e[8]=(i*t-n*s)*m,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,s,i,a){const o=Math.cos(s),l=Math.sin(s);return this.set(n*o,n*l,-n*(o*i+l*a)+i+e,-r*l,r*o,-r*(-l*i+o*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(Yp.makeScale(e,t)),this}rotate(e){return this.premultiply(Yp.makeRotation(-e)),this}translate(e,t){return this.premultiply(Yp.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}const Yp=new Kp;function Zp(e){for(let t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}const Jp={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function Qp(e,t){return new Jp[e](t)}function em(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function tm(){const e=em("canvas");return e.style.display="block",e}const nm={};function rm(e){e in nm||(nm[e]=!0)}const sm=(new Kp).set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),im=(new Kp).set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function am(){const e={enabled:!0,workingColorSpace:gp,spaces:{},convert:function(e,t,n){return!1!==this.enabled&&t!==n&&t&&n?(this.spaces[t].transfer===vp&&(e.r=lm(e.r),e.g=lm(e.g),e.b=lm(e.b)),this.spaces[t].primaries!==this.spaces[n].primaries&&(e.applyMatrix3(this.spaces[t].toXYZ),e.applyMatrix3(this.spaces[n].fromXYZ)),this.spaces[n].transfer===vp&&(e.r=cm(e.r),e.g=cm(e.g),e.b=cm(e.b)),e):e},workingToColorSpace:function(e,t){return this.convert(e,this.workingColorSpace,t)},colorSpaceToWorking:function(e,t){return this.convert(e,t,this.workingColorSpace)},getPrimaries:function(e){return this.spaces[e].primaries},getTransfer:function(e){return e===mp?xp:this.spaces[e].transfer},getToneMappingMode:function(e){return this.spaces[e].outputColorSpaceConfig.toneMappingMode||"standard"},getLuminanceCoefficients:function(e,t=this.workingColorSpace){return e.fromArray(this.spaces[t].luminanceCoefficients)},define:function(e){Object.assign(this.spaces,e)},_getMatrix:function(e,t,n){return e.copy(this.spaces[t].toXYZ).multiply(this.spaces[n].fromXYZ)},_getDrawingBufferColorSpace:function(e){return this.spaces[e].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(e=this.workingColorSpace){return this.spaces[e].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(t,n){return rm("THREE.ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),e.workingToColorSpace(t,n)},toWorkingColorSpace:function(t,n){return rm("THREE.ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),e.colorSpaceToWorking(t,n)}},t=[.64,.33,.3,.6,.15,.06],n=[.2126,.7152,.0722],r=[.3127,.329];return e.define({[gp]:{primaries:t,whitePoint:r,transfer:xp,toXYZ:sm,fromXYZ:im,luminanceCoefficients:n,workingColorSpaceConfig:{unpackColorSpace:fp},outputColorSpaceConfig:{drawingBufferColorSpace:fp}},[fp]:{primaries:t,whitePoint:r,transfer:vp,toXYZ:sm,fromXYZ:im,luminanceCoefficients:n,outputColorSpaceConfig:{drawingBufferColorSpace:fp}}}),e}const om=am();function lm(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function cm(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}let dm;class um{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{void 0===dm&&(dm=em("canvas")),dm.width=e.width,dm.height=e.height;const t=dm.getContext("2d");e instanceof ImageData?t.putImageData(e,0,0):t.drawImage(e,0,0,e.width,e.height),n=dm}return n.toDataURL(t)}static sRGBToLinear(e){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const t=em("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const r=n.getImageData(0,0,e.width,e.height),s=r.data;for(let e=0;e<s.length;e++)s[e]=255*lm(s[e]/255);return n.putImageData(r,0,0),t}if(e.data){const t=e.data.slice(0);for(let e=0;e<t.length;e++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[e]=Math.floor(255*lm(t[e]/255)):t[e]=lm(t[e]);return{data:t,width:e.width,height:e.height}}return e}}let hm=0;class pm{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:hm++}),this.uuid=Lp(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){const t=this.data;return"undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement?e.set(t.videoWidth,t.videoHeight,0):t instanceof VideoFrame?e.set(t.displayHeight,t.displayWidth,0):null!==t?e.set(t.width,t.height,t.depth||0):e.set(0,0,0),e}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(null!==r){let e;if(Array.isArray(r)){e=[];for(let t=0,n=r.length;t<n;t++)r[t].isDataTexture?e.push(mm(r[t].image)):e.push(mm(r[t]))}else e=mm(r);n.url=e}return t||(e.images[this.uuid]=n),n}}function mm(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?um.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:{}}let fm=0;const gm=new Gp;class xm extends Pp{constructor(e=xm.DEFAULT_IMAGE,t=xm.DEFAULT_MAPPING,n=1001,r=1001,s=1006,i=1008,a=1023,o=1009,l=xm.DEFAULT_ANISOTROPY,c=""){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:fm++}),this.uuid=Lp(),this.name="",this.source=new pm(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=r,this.magFilter=s,this.minFilter=i,this.anisotropy=l,this.format=a,this.internalFormat=null,this.type=o,this.offset=new Wp(0,0),this.repeat=new Wp(1,1),this.center=new Wp(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Kp,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=c,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(e&&e.depth&&e.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(gm).x}get height(){return this.source.getSize(gm).y}get depth(){return this.source.getSize(gm).z}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}setValues(e){for(const t in e){const n=e[t];if(void 0===n)continue;const r=this[t];void 0!==r&&(r&&n&&r.isVector2&&n.isVector2||r&&n&&r.isVector3&&n.isVector3||r&&n&&r.isMatrix3&&n.isMatrix3?r.copy(n):this[t]=n)}}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const n={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Wu)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Yu:e.x=e.x-Math.floor(e.x);break;case Zu:e.x=e.x<0?0:1;break;case Ju:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case Yu:e.y=e.y-Math.floor(e.y);break;case Zu:e.y=e.y<0?0:1;break;case Ju:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){!0===e&&this.pmremVersion++}}xm.DEFAULT_IMAGE=null,xm.DEFAULT_MAPPING=Wu,xm.DEFAULT_ANISOTROPY=1;class vm{constructor(e=0,t=0,n=0,r=1){vm.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,s=this.w,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r+i[12]*s,this.y=i[1]*t+i[5]*n+i[9]*r+i[13]*s,this.z=i[2]*t+i[6]*n+i[10]*r+i[14]*s,this.w=i[3]*t+i[7]*n+i[11]*r+i[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,s;const i=.01,a=.1,o=e.elements,l=o[0],c=o[4],d=o[8],u=o[1],h=o[5],p=o[9],m=o[2],f=o[6],g=o[10];if(Math.abs(c-u)<i&&Math.abs(d-m)<i&&Math.abs(p-f)<i){if(Math.abs(c+u)<a&&Math.abs(d+m)<a&&Math.abs(p+f)<a&&Math.abs(l+h+g-3)<a)return this.set(1,0,0,0),this;t=Math.PI;const e=(l+1)/2,o=(h+1)/2,x=(g+1)/2,v=(c+u)/4,y=(d+m)/4,b=(p+f)/4;return e>o&&e>x?e<i?(n=0,r=.707106781,s=.707106781):(n=Math.sqrt(e),r=v/n,s=y/n):o>x?o<i?(n=.707106781,r=0,s=.707106781):(r=Math.sqrt(o),n=v/r,s=b/r):x<i?(n=.707106781,r=.707106781,s=0):(s=Math.sqrt(x),n=y/s,r=b/s),this.set(n,r,s,t),this}let x=Math.sqrt((f-p)*(f-p)+(d-m)*(d-m)+(u-c)*(u-c));return Math.abs(x)<.001&&(x=1),this.x=(f-p)/x,this.y=(d-m)/x,this.z=(u-c)/x,this.w=Math.acos((l+h+g-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Fp(this.x,e.x,t.x),this.y=Fp(this.y,e.y,t.y),this.z=Fp(this.z,e.z,t.z),this.w=Fp(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=Fp(this.x,e,t),this.y=Fp(this.y,e,t),this.z=Fp(this.z,e,t),this.w=Fp(this.w,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Fp(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class ym extends Pp{constructor(e=1,t=1,n={}){super(),n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:nh,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},n),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=n.depth,this.scissor=new vm(0,0,e,t),this.scissorTest=!1,this.viewport=new vm(0,0,e,t);const r={width:e,height:t,depth:n.depth},s=new xm(r);this.textures=[];const i=n.count;for(let a=0;a<i;a++)this.textures[a]=s.clone(),this.textures[a].isRenderTargetTexture=!0,this.textures[a].renderTarget=this;this._setTextureOptions(n),this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=n.depthTexture,this.samples=n.samples,this.multiview=n.multiview}_setTextureOptions(e={}){const t={minFilter:nh,generateMipmaps:!1,flipY:!1,internalFormat:null};void 0!==e.mapping&&(t.mapping=e.mapping),void 0!==e.wrapS&&(t.wrapS=e.wrapS),void 0!==e.wrapT&&(t.wrapT=e.wrapT),void 0!==e.wrapR&&(t.wrapR=e.wrapR),void 0!==e.magFilter&&(t.magFilter=e.magFilter),void 0!==e.minFilter&&(t.minFilter=e.minFilter),void 0!==e.format&&(t.format=e.format),void 0!==e.type&&(t.type=e.type),void 0!==e.anisotropy&&(t.anisotropy=e.anisotropy),void 0!==e.colorSpace&&(t.colorSpace=e.colorSpace),void 0!==e.flipY&&(t.flipY=e.flipY),void 0!==e.generateMipmaps&&(t.generateMipmaps=e.generateMipmaps),void 0!==e.internalFormat&&(t.internalFormat=e.internalFormat);for(let n=0;n<this.textures.length;n++){this.textures[n].setValues(t)}}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){null!==this._depthTexture&&(this._depthTexture.renderTarget=null),null!==e&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let r=0,s=this.textures.length;r<s;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=n,this.textures[r].isArrayTexture=this.textures[r].image.depth>1;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,n=e.textures.length;t<n;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const n=Object.assign({},e.textures[t].image);this.textures[t].source=new pm(n)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class bm extends ym{constructor(e=1,t=1,n={}){super(e,t,n),this.isWebGLRenderTarget=!0}}class wm extends xm{constructor(e=null,t=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=Qu,this.minFilter=Qu,this.wrapR=Zu,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class jm extends xm{constructor(e=null,t=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=Qu,this.minFilter=Qu,this.wrapR=Zu,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Nm{constructor(e=new Gp(1/0,1/0,1/0),t=new Gp(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(Sm.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(Sm.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=Sm.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(void 0!==n){const r=n.getAttribute("position");if(!0===t&&void 0!==r&&!0!==e.isInstancedMesh)for(let t=0,n=r.count;t<n;t++)!0===e.isMesh?e.getVertexPosition(t,Sm):Sm.fromBufferAttribute(r,t),Sm.applyMatrix4(e.matrixWorld),this.expandByPoint(Sm);else void 0!==e.boundingBox?(null===e.boundingBox&&e.computeBoundingBox(),Mm.copy(e.boundingBox)):(null===n.boundingBox&&n.computeBoundingBox(),Mm.copy(n.boundingBox)),Mm.applyMatrix4(e.matrixWorld),this.union(Mm)}const r=e.children;for(let s=0,i=r.length;s<i;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Sm),Sm.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Om),Rm.subVectors(this.max,Om),Cm.subVectors(e.a,Om),Em.subVectors(e.b,Om),km.subVectors(e.c,Om),Am.subVectors(Em,Cm),Tm.subVectors(km,Em),Pm.subVectors(Cm,km);let t=[0,-Am.z,Am.y,0,-Tm.z,Tm.y,0,-Pm.z,Pm.y,Am.z,0,-Am.x,Tm.z,0,-Tm.x,Pm.z,0,-Pm.x,-Am.y,Am.x,0,-Tm.y,Tm.x,0,-Pm.y,Pm.x,0];return!!Lm(t,Cm,Em,km,Rm)&&(t=[1,0,0,0,1,0,0,0,1],!!Lm(t,Cm,Em,km,Rm)&&(Im.crossVectors(Am,Tm),t=[Im.x,Im.y,Im.z],Lm(t,Cm,Em,km,Rm)))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Sm).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(Sm).length()),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(_m[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),_m[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),_m[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),_m[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),_m[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),_m[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),_m[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),_m[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(_m)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}}const _m=[new Gp,new Gp,new Gp,new Gp,new Gp,new Gp,new Gp,new Gp],Sm=new Gp,Mm=new Nm,Cm=new Gp,Em=new Gp,km=new Gp,Am=new Gp,Tm=new Gp,Pm=new Gp,Om=new Gp,Rm=new Gp,Im=new Gp,Dm=new Gp;function Lm(e,t,n,r,s){for(let i=0,a=e.length-3;i<=a;i+=3){Dm.fromArray(e,i);const a=s.x*Math.abs(Dm.x)+s.y*Math.abs(Dm.y)+s.z*Math.abs(Dm.z),o=t.dot(Dm),l=n.dot(Dm),c=r.dot(Dm);if(Math.max(-Math.max(o,l,c),Math.min(o,l,c))>a)return!1}return!0}const Fm=new Nm,zm=new Gp,Bm=new Gp;class Um{constructor(e=new Gp,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;void 0!==t?n.copy(t):Fm.setFromPoints(e).getCenter(n);let r=0;for(let s=0,i=e.length;s<i;s++)r=Math.max(r,n.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;zm.subVectors(e,this.center);const t=zm.lengthSq();if(t>this.radius*this.radius){const e=Math.sqrt(t),n=.5*(e-this.radius);this.center.addScaledVector(zm,n/e),this.radius+=n}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(Bm.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(zm.copy(e.center).add(Bm)),this.expandByPoint(zm.copy(e.center).sub(Bm))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}}const Vm=new Gp,Hm=new Gp,Wm=new Gp,$m=new Gp,Gm=new Gp,qm=new Gp,Xm=new Gp;class Km{constructor(e=new Gp,t=new Gp(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Vm)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Vm.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Vm.copy(this.origin).addScaledVector(this.direction,t),Vm.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){Hm.copy(e).add(t).multiplyScalar(.5),Wm.copy(t).sub(e).normalize(),$m.copy(this.origin).sub(Hm);const s=.5*e.distanceTo(t),i=-this.direction.dot(Wm),a=$m.dot(this.direction),o=-$m.dot(Wm),l=$m.lengthSq(),c=Math.abs(1-i*i);let d,u,h,p;if(c>0)if(d=i*o-a,u=i*a-o,p=s*c,d>=0)if(u>=-p)if(u<=p){const e=1/c;d*=e,u*=e,h=d*(d+i*u+2*a)+u*(i*d+u+2*o)+l}else u=s,d=Math.max(0,-(i*u+a)),h=-d*d+u*(u+2*o)+l;else u=-s,d=Math.max(0,-(i*u+a)),h=-d*d+u*(u+2*o)+l;else u<=-p?(d=Math.max(0,-(-i*s+a)),u=d>0?-s:Math.min(Math.max(-s,-o),s),h=-d*d+u*(u+2*o)+l):u<=p?(d=0,u=Math.min(Math.max(-s,-o),s),h=u*(u+2*o)+l):(d=Math.max(0,-(i*s+a)),u=d>0?s:Math.min(Math.max(-s,-o),s),h=-d*d+u*(u+2*o)+l);else u=i>0?-s:s,d=Math.max(0,-(i*u+a)),h=-d*d+u*(u+2*o)+l;return n&&n.copy(this.origin).addScaledVector(this.direction,d),r&&r.copy(Hm).addScaledVector(Wm,u),h}intersectSphere(e,t){Vm.subVectors(e.center,this.origin);const n=Vm.dot(this.direction),r=Vm.dot(Vm)-n*n,s=e.radius*e.radius;if(r>s)return null;const i=Math.sqrt(s-r),a=n-i,o=n+i;return o<0?null:a<0?this.at(o,t):this.at(a,t)}intersectsSphere(e){return!(e.radius<0)&&this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);if(0===t)return!0;return e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,r,s,i,a,o;const l=1/this.direction.x,c=1/this.direction.y,d=1/this.direction.z,u=this.origin;return l>=0?(n=(e.min.x-u.x)*l,r=(e.max.x-u.x)*l):(n=(e.max.x-u.x)*l,r=(e.min.x-u.x)*l),c>=0?(s=(e.min.y-u.y)*c,i=(e.max.y-u.y)*c):(s=(e.max.y-u.y)*c,i=(e.min.y-u.y)*c),n>i||s>r?null:((s>n||isNaN(n))&&(n=s),(i<r||isNaN(r))&&(r=i),d>=0?(a=(e.min.z-u.z)*d,o=(e.max.z-u.z)*d):(a=(e.max.z-u.z)*d,o=(e.min.z-u.z)*d),n>o||a>r?null:((a>n||n!=n)&&(n=a),(o<r||r!=r)&&(r=o),r<0?null:this.at(n>=0?n:r,t)))}intersectsBox(e){return null!==this.intersectBox(e,Vm)}intersectTriangle(e,t,n,r,s){Gm.subVectors(t,e),qm.subVectors(n,e),Xm.crossVectors(Gm,qm);let i,a=this.direction.dot(Xm);if(a>0){if(r)return null;i=1}else{if(!(a<0))return null;i=-1,a=-a}$m.subVectors(this.origin,e);const o=i*this.direction.dot(qm.crossVectors($m,qm));if(o<0)return null;const l=i*this.direction.dot(Gm.cross($m));if(l<0)return null;if(o+l>a)return null;const c=-i*$m.dot(Xm);return c<0?null:this.at(c/a,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Ym{constructor(e,t,n,r,s,i,a,o,l,c,d,u,h,p,m,f){Ym.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==e&&this.set(e,t,n,r,s,i,a,o,l,c,d,u,h,p,m,f)}set(e,t,n,r,s,i,a,o,l,c,d,u,h,p,m,f){const g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=r,g[1]=s,g[5]=i,g[9]=a,g[13]=o,g[2]=l,g[6]=c,g[10]=d,g[14]=u,g[3]=h,g[7]=p,g[11]=m,g[15]=f,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Ym).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,r=1/Zm.setFromMatrixColumn(e,0).length(),s=1/Zm.setFromMatrixColumn(e,1).length(),i=1/Zm.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*s,t[5]=n[5]*s,t[6]=n[6]*s,t[7]=0,t[8]=n[8]*i,t[9]=n[9]*i,t[10]=n[10]*i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,r=e.y,s=e.z,i=Math.cos(n),a=Math.sin(n),o=Math.cos(r),l=Math.sin(r),c=Math.cos(s),d=Math.sin(s);if("XYZ"===e.order){const e=i*c,n=i*d,r=a*c,s=a*d;t[0]=o*c,t[4]=-o*d,t[8]=l,t[1]=n+r*l,t[5]=e-s*l,t[9]=-a*o,t[2]=s-e*l,t[6]=r+n*l,t[10]=i*o}else if("YXZ"===e.order){const e=o*c,n=o*d,r=l*c,s=l*d;t[0]=e+s*a,t[4]=r*a-n,t[8]=i*l,t[1]=i*d,t[5]=i*c,t[9]=-a,t[2]=n*a-r,t[6]=s+e*a,t[10]=i*o}else if("ZXY"===e.order){const e=o*c,n=o*d,r=l*c,s=l*d;t[0]=e-s*a,t[4]=-i*d,t[8]=r+n*a,t[1]=n+r*a,t[5]=i*c,t[9]=s-e*a,t[2]=-i*l,t[6]=a,t[10]=i*o}else if("ZYX"===e.order){const e=i*c,n=i*d,r=a*c,s=a*d;t[0]=o*c,t[4]=r*l-n,t[8]=e*l+s,t[1]=o*d,t[5]=s*l+e,t[9]=n*l-r,t[2]=-l,t[6]=a*o,t[10]=i*o}else if("YZX"===e.order){const e=i*o,n=i*l,r=a*o,s=a*l;t[0]=o*c,t[4]=s-e*d,t[8]=r*d+n,t[1]=d,t[5]=i*c,t[9]=-a*c,t[2]=-l*c,t[6]=n*d+r,t[10]=e-s*d}else if("XZY"===e.order){const e=i*o,n=i*l,r=a*o,s=a*l;t[0]=o*c,t[4]=-d,t[8]=l*c,t[1]=e*d+s,t[5]=i*c,t[9]=n*d-r,t[2]=r*d-n,t[6]=a*c,t[10]=s*d+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Qm,e,ef)}lookAt(e,t,n){const r=this.elements;return rf.subVectors(e,t),0===rf.lengthSq()&&(rf.z=1),rf.normalize(),tf.crossVectors(n,rf),0===tf.lengthSq()&&(1===Math.abs(n.z)?rf.x+=1e-4:rf.z+=1e-4,rf.normalize(),tf.crossVectors(n,rf)),tf.normalize(),nf.crossVectors(rf,tf),r[0]=tf.x,r[4]=nf.x,r[8]=rf.x,r[1]=tf.y,r[5]=nf.y,r[9]=rf.y,r[2]=tf.z,r[6]=nf.z,r[10]=rf.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,s=this.elements,i=n[0],a=n[4],o=n[8],l=n[12],c=n[1],d=n[5],u=n[9],h=n[13],p=n[2],m=n[6],f=n[10],g=n[14],x=n[3],v=n[7],y=n[11],b=n[15],w=r[0],j=r[4],N=r[8],_=r[12],S=r[1],M=r[5],C=r[9],E=r[13],k=r[2],A=r[6],T=r[10],P=r[14],O=r[3],R=r[7],I=r[11],D=r[15];return s[0]=i*w+a*S+o*k+l*O,s[4]=i*j+a*M+o*A+l*R,s[8]=i*N+a*C+o*T+l*I,s[12]=i*_+a*E+o*P+l*D,s[1]=c*w+d*S+u*k+h*O,s[5]=c*j+d*M+u*A+h*R,s[9]=c*N+d*C+u*T+h*I,s[13]=c*_+d*E+u*P+h*D,s[2]=p*w+m*S+f*k+g*O,s[6]=p*j+m*M+f*A+g*R,s[10]=p*N+m*C+f*T+g*I,s[14]=p*_+m*E+f*P+g*D,s[3]=x*w+v*S+y*k+b*O,s[7]=x*j+v*M+y*A+b*R,s[11]=x*N+v*C+y*T+b*I,s[15]=x*_+v*E+y*P+b*D,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],s=e[12],i=e[1],a=e[5],o=e[9],l=e[13],c=e[2],d=e[6],u=e[10],h=e[14];return e[3]*(+s*o*d-r*l*d-s*a*u+n*l*u+r*a*h-n*o*h)+e[7]*(+t*o*h-t*l*u+s*i*u-r*i*h+r*l*c-s*o*c)+e[11]*(+t*l*d-t*a*h-s*i*d+n*i*h+s*a*c-n*l*c)+e[15]*(-r*a*c-t*o*d+t*a*u+r*i*d-n*i*u+n*o*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],i=e[4],a=e[5],o=e[6],l=e[7],c=e[8],d=e[9],u=e[10],h=e[11],p=e[12],m=e[13],f=e[14],g=e[15],x=d*f*l-m*u*l+m*o*h-a*f*h-d*o*g+a*u*g,v=p*u*l-c*f*l-p*o*h+i*f*h+c*o*g-i*u*g,y=c*m*l-p*d*l+p*a*h-i*m*h-c*a*g+i*d*g,b=p*d*o-c*m*o-p*a*u+i*m*u+c*a*f-i*d*f,w=t*x+n*v+r*y+s*b;if(0===w)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const j=1/w;return e[0]=x*j,e[1]=(m*u*s-d*f*s-m*r*h+n*f*h+d*r*g-n*u*g)*j,e[2]=(a*f*s-m*o*s+m*r*l-n*f*l-a*r*g+n*o*g)*j,e[3]=(d*o*s-a*u*s-d*r*l+n*u*l+a*r*h-n*o*h)*j,e[4]=v*j,e[5]=(c*f*s-p*u*s+p*r*h-t*f*h-c*r*g+t*u*g)*j,e[6]=(p*o*s-i*f*s-p*r*l+t*f*l+i*r*g-t*o*g)*j,e[7]=(i*u*s-c*o*s+c*r*l-t*u*l-i*r*h+t*o*h)*j,e[8]=y*j,e[9]=(p*d*s-c*m*s-p*n*h+t*m*h+c*n*g-t*d*g)*j,e[10]=(i*m*s-p*a*s+p*n*l-t*m*l-i*n*g+t*a*g)*j,e[11]=(c*a*s-i*d*s-c*n*l+t*d*l+i*n*h-t*a*h)*j,e[12]=b*j,e[13]=(c*m*r-p*d*r+p*n*u-t*m*u-c*n*f+t*d*f)*j,e[14]=(p*a*r-i*m*r-p*n*o+t*m*o+i*n*f-t*a*f)*j,e[15]=(i*d*r-c*a*r+c*n*o-t*d*o-i*n*u+t*a*u)*j,this}scale(e){const t=this.elements,n=e.x,r=e.y,s=e.z;return t[0]*=n,t[4]*=r,t[8]*=s,t[1]*=n,t[5]*=r,t[9]*=s,t[2]*=n,t[6]*=r,t[10]*=s,t[3]*=n,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),s=1-n,i=e.x,a=e.y,o=e.z,l=s*i,c=s*a;return this.set(l*i+n,l*a-r*o,l*o+r*a,0,l*a+r*o,c*a+n,c*o-r*i,0,l*o-r*a,c*o+r*i,s*o*o+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,s,i){return this.set(1,n,s,0,e,1,i,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){const r=this.elements,s=t._x,i=t._y,a=t._z,o=t._w,l=s+s,c=i+i,d=a+a,u=s*l,h=s*c,p=s*d,m=i*c,f=i*d,g=a*d,x=o*l,v=o*c,y=o*d,b=n.x,w=n.y,j=n.z;return r[0]=(1-(m+g))*b,r[1]=(h+y)*b,r[2]=(p-v)*b,r[3]=0,r[4]=(h-y)*w,r[5]=(1-(u+g))*w,r[6]=(f+x)*w,r[7]=0,r[8]=(p+v)*j,r[9]=(f-x)*j,r[10]=(1-(u+m))*j,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){const r=this.elements;let s=Zm.set(r[0],r[1],r[2]).length();const i=Zm.set(r[4],r[5],r[6]).length(),a=Zm.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],Jm.copy(this);const o=1/s,l=1/i,c=1/a;return Jm.elements[0]*=o,Jm.elements[1]*=o,Jm.elements[2]*=o,Jm.elements[4]*=l,Jm.elements[5]*=l,Jm.elements[6]*=l,Jm.elements[8]*=c,Jm.elements[9]*=c,Jm.elements[10]*=c,t.setFromRotationMatrix(Jm),n.x=s,n.y=i,n.z=a,this}makePerspective(e,t,n,r,s,i,a=2e3,o=!1){const l=this.elements,c=2*s/(t-e),d=2*s/(n-r),u=(t+e)/(t-e),h=(n+r)/(n-r);let p,m;if(o)p=s/(i-s),m=i*s/(i-s);else if(a===Ap)p=-(i+s)/(i-s),m=-2*i*s/(i-s);else{if(a!==Tp)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);p=-i/(i-s),m=-i*s/(i-s)}return l[0]=c,l[4]=0,l[8]=u,l[12]=0,l[1]=0,l[5]=d,l[9]=h,l[13]=0,l[2]=0,l[6]=0,l[10]=p,l[14]=m,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,n,r,s,i,a=2e3,o=!1){const l=this.elements,c=2/(t-e),d=2/(n-r),u=-(t+e)/(t-e),h=-(n+r)/(n-r);let p,m;if(o)p=1/(i-s),m=i/(i-s);else if(a===Ap)p=-2/(i-s),m=-(i+s)/(i-s);else{if(a!==Tp)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);p=-1/(i-s),m=-s/(i-s)}return l[0]=c,l[4]=0,l[8]=0,l[12]=u,l[1]=0,l[5]=d,l[9]=0,l[13]=h,l[2]=0,l[6]=0,l[10]=p,l[14]=m,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const Zm=new Gp,Jm=new Ym,Qm=new Gp(0,0,0),ef=new Gp(1,1,1),tf=new Gp,nf=new Gp,rf=new Gp,sf=new Ym,af=new $p;let of=class e{constructor(t=0,n=0,r=0,s=e.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=n,this._z=r,this._order=s}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,r=this._order){return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const r=e.elements,s=r[0],i=r[4],a=r[8],o=r[1],l=r[5],c=r[9],d=r[2],u=r[6],h=r[10];switch(t){case"XYZ":this._y=Math.asin(Fp(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,h),this._z=Math.atan2(-i,s)):(this._x=Math.atan2(u,l),this._z=0);break;case"YXZ":this._x=Math.asin(-Fp(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(a,h),this._z=Math.atan2(o,l)):(this._y=Math.atan2(-d,s),this._z=0);break;case"ZXY":this._x=Math.asin(Fp(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(-d,h),this._z=Math.atan2(-i,l)):(this._y=0,this._z=Math.atan2(o,s));break;case"ZYX":this._y=Math.asin(-Fp(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(u,h),this._z=Math.atan2(o,s)):(this._x=0,this._z=Math.atan2(-i,l));break;case"YZX":this._z=Math.asin(Fp(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-d,s)):(this._x=0,this._y=Math.atan2(a,h));break;case"XZY":this._z=Math.asin(-Fp(i,-1,1)),Math.abs(i)<.9999999?(this._x=Math.atan2(u,l),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-c,h),this._y=0)}return this._order=t,!0===n&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return sf.makeRotationFromQuaternion(e),this.setFromRotationMatrix(sf,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return af.setFromEuler(this),this.setFromQuaternion(af,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}};of.DEFAULT_ORDER="XYZ";class lf{constructor(){this.mask=1}set(e){this.mask=1<<e>>>0}enable(e){this.mask|=1<<e}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e}disable(e){this.mask&=~(1<<e)}disableAll(){this.mask=0}test(e){return 0!==(this.mask&e.mask)}isEnabled(e){return!!(this.mask&1<<e)}}let cf=0;const df=new Gp,uf=new $p,hf=new Ym,pf=new Gp,mf=new Gp,ff=new Gp,gf=new $p,xf=new Gp(1,0,0),vf=new Gp(0,1,0),yf=new Gp(0,0,1),bf={type:"added"},wf={type:"removed"},jf={type:"childadded",child:null},Nf={type:"childremoved",child:null};class _f extends Pp{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:cf++}),this.uuid=Lp(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=_f.DEFAULT_UP.clone();const e=new Gp,t=new of,n=new $p,r=new Gp(1,1,1);t._onChange(function(){n.setFromEuler(t,!1)}),n._onChange(function(){t.setFromQuaternion(n,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Ym},normalMatrix:{value:new Kp}}),this.matrix=new Ym,this.matrixWorld=new Ym,this.matrixAutoUpdate=_f.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=_f.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new lf,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return uf.setFromAxisAngle(e,t),this.quaternion.multiply(uf),this}rotateOnWorldAxis(e,t){return uf.setFromAxisAngle(e,t),this.quaternion.premultiply(uf),this}rotateX(e){return this.rotateOnAxis(xf,e)}rotateY(e){return this.rotateOnAxis(vf,e)}rotateZ(e){return this.rotateOnAxis(yf,e)}translateOnAxis(e,t){return df.copy(e).applyQuaternion(this.quaternion),this.position.add(df.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(xf,e)}translateY(e){return this.translateOnAxis(vf,e)}translateZ(e){return this.translateOnAxis(yf,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(hf.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?pf.copy(e):pf.set(e,t,n);const r=this.parent;this.updateWorldMatrix(!0,!1),mf.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?hf.lookAt(mf,pf,this.up):hf.lookAt(pf,mf,this.up),this.quaternion.setFromRotationMatrix(hf),r&&(hf.extractRotation(r.matrixWorld),uf.setFromRotationMatrix(hf),this.quaternion.premultiply(uf.invert()))}add(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this||e&&e.isObject3D&&(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(bf),jf.child=e,this.dispatchEvent(jf),jf.child=null),this}remove(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(wf),Nf.child=e,this.dispatchEvent(Nf),Nf.child=null),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),hf.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),hf.multiply(e.parent.matrixWorld)),e.applyMatrix4(hf),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(bf),jf.child=e,this.dispatchEvent(jf),jf.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){const r=this.children[n].getObjectByProperty(e,t);if(void 0!==r)return r}}getObjectsByProperty(e,t,n=[]){this[e]===t&&n.push(this);const r=this.children;for(let s=0,i=r.length;s<i;s++)r[s].getObjectsByProperty(e,t,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(mf,e,ff),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(mf,gf,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,r=t.length;n<r;n++){t[n].updateMatrixWorld(e)}}updateWorldMatrix(e,t){const n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),!0===t){const e=this.children;for(let t=0,n=e.length;t<n;t++){e[t].updateWorldMatrix(!1,!0)}}}toJSON(e){const t=void 0===e||"string"==typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const r={};function s(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.geometryInfo=this._geometryInfo.map(e=>({...e,boundingBox:e.boundingBox?e.boundingBox.toJSON():void 0,boundingSphere:e.boundingSphere?e.boundingSphere.toJSON():void 0})),r.instanceInfo=this._instanceInfo.map(e=>({...e})),r.availableInstanceIds=this._availableInstanceIds.slice(),r.availableGeometryIds=this._availableGeometryIds.slice(),r.nextIndexStart=this._nextIndexStart,r.nextVertexStart=this._nextVertexStart,r.geometryCount=this._geometryCount,r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.matricesTexture=this._matricesTexture.toJSON(e),r.indirectTexture=this._indirectTexture.toJSON(e),null!==this._colorsTexture&&(r.colorsTexture=this._colorsTexture.toJSON(e)),null!==this.boundingSphere&&(r.boundingSphere=this.boundingSphere.toJSON()),null!==this.boundingBox&&(r.boundingBox=this.boundingBox.toJSON())),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){const n=t.shapes;if(Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const r=n[t];s(e.shapes,r)}else s(e.shapes,n)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const t=[];for(let n=0,r=this.material.length;n<r;n++)t.push(s(e.materials,this.material[n]));r.material=t}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let t=0;t<this.children.length;t++)r.children.push(this.children[t].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let t=0;t<this.animations.length;t++){const n=this.animations[t];r.animations.push(s(e.animations,n))}}if(t){const t=i(e.geometries),r=i(e.materials),s=i(e.textures),a=i(e.images),o=i(e.shapes),l=i(e.skeletons),c=i(e.animations),d=i(e.nodes);t.length>0&&(n.geometries=t),r.length>0&&(n.materials=r),s.length>0&&(n.textures=s),a.length>0&&(n.images=a),o.length>0&&(n.shapes=o),l.length>0&&(n.skeletons=l),c.length>0&&(n.animations=c),d.length>0&&(n.nodes=d)}return n.object=r,n;function i(e){const t=[];for(const n in e){const r=e[n];delete r.metadata,t.push(r)}return t}}clone(e){return(new this.constructor).copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let n=0;n<e.children.length;n++){const t=e.children[n];this.add(t.clone())}return this}}_f.DEFAULT_UP=new Gp(0,1,0),_f.DEFAULT_MATRIX_AUTO_UPDATE=!0,_f.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Sf=new Gp,Mf=new Gp,Cf=new Gp,Ef=new Gp,kf=new Gp,Af=new Gp,Tf=new Gp,Pf=new Gp,Of=new Gp,Rf=new Gp,If=new vm,Df=new vm,Lf=new vm;let Ff=class e{constructor(e=new Gp,t=new Gp,n=new Gp){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),Sf.subVectors(e,t),r.cross(Sf);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,n,r,s){Sf.subVectors(r,t),Mf.subVectors(n,t),Cf.subVectors(e,t);const i=Sf.dot(Sf),a=Sf.dot(Mf),o=Sf.dot(Cf),l=Mf.dot(Mf),c=Mf.dot(Cf),d=i*l-a*a;if(0===d)return s.set(0,0,0),null;const u=1/d,h=(l*o-a*c)*u,p=(i*c-a*o)*u;return s.set(1-h-p,p,h)}static containsPoint(e,t,n,r){return null!==this.getBarycoord(e,t,n,r,Ef)&&(Ef.x>=0&&Ef.y>=0&&Ef.x+Ef.y<=1)}static getInterpolation(e,t,n,r,s,i,a,o){return null===this.getBarycoord(e,t,n,r,Ef)?(o.x=0,o.y=0,"z"in o&&(o.z=0),"w"in o&&(o.w=0),null):(o.setScalar(0),o.addScaledVector(s,Ef.x),o.addScaledVector(i,Ef.y),o.addScaledVector(a,Ef.z),o)}static getInterpolatedAttribute(e,t,n,r,s,i){return If.setScalar(0),Df.setScalar(0),Lf.setScalar(0),If.fromBufferAttribute(e,t),Df.fromBufferAttribute(e,n),Lf.fromBufferAttribute(e,r),i.setScalar(0),i.addScaledVector(If,s.x),i.addScaledVector(Df,s.y),i.addScaledVector(Lf,s.z),i}static isFrontFacing(e,t,n,r){return Sf.subVectors(n,t),Mf.subVectors(e,t),Sf.cross(Mf).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Sf.subVectors(this.c,this.b),Mf.subVectors(this.a,this.b),.5*Sf.cross(Mf).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return e.getNormal(this.a,this.b,this.c,t)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,n){return e.getBarycoord(t,this.a,this.b,this.c,n)}getInterpolation(t,n,r,s,i){return e.getInterpolation(t,this.a,this.b,this.c,n,r,s,i)}containsPoint(t){return e.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return e.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,r=this.b,s=this.c;let i,a;kf.subVectors(r,n),Af.subVectors(s,n),Pf.subVectors(e,n);const o=kf.dot(Pf),l=Af.dot(Pf);if(o<=0&&l<=0)return t.copy(n);Of.subVectors(e,r);const c=kf.dot(Of),d=Af.dot(Of);if(c>=0&&d<=c)return t.copy(r);const u=o*d-c*l;if(u<=0&&o>=0&&c<=0)return i=o/(o-c),t.copy(n).addScaledVector(kf,i);Rf.subVectors(e,s);const h=kf.dot(Rf),p=Af.dot(Rf);if(p>=0&&h<=p)return t.copy(s);const m=h*l-o*p;if(m<=0&&l>=0&&p<=0)return a=l/(l-p),t.copy(n).addScaledVector(Af,a);const f=c*p-h*d;if(f<=0&&d-c>=0&&h-p>=0)return Tf.subVectors(s,r),a=(d-c)/(d-c+(h-p)),t.copy(r).addScaledVector(Tf,a);const g=1/(f+m+u);return i=m*g,a=u*g,t.copy(n).addScaledVector(kf,i).addScaledVector(Af,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}};const zf={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Bf={h:0,s:0,l:0},Uf={h:0,s:0,l:0};function Vf(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}let Hf=class{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(void 0===t&&void 0===n){const t=e;t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=fp){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,om.colorSpaceToWorking(this,t),this}setRGB(e,t,n,r=om.workingColorSpace){return this.r=e,this.g=t,this.b=n,om.colorSpaceToWorking(this,r),this}setHSL(e,t,n,r=om.workingColorSpace){if(e=zp(e,1),t=Fp(t,0,1),n=Fp(n,0,1),0===t)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+t):n+t-n*t,s=2*n-r;this.r=Vf(s,r,e+1/3),this.g=Vf(s,r,e),this.b=Vf(s,r,e-1/3)}return om.colorSpaceToWorking(this,r),this}setStyle(e,t=fp){function n(e){void 0!==e&&parseFloat(e)}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let e;const s=r[1],i=r[2];switch(s){case"rgb":case"rgba":if(e=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i))return n(e[4]),this.setRGB(Math.min(255,parseInt(e[1],10))/255,Math.min(255,parseInt(e[2],10))/255,Math.min(255,parseInt(e[3],10))/255,t);if(e=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i))return n(e[4]),this.setRGB(Math.min(100,parseInt(e[1],10))/100,Math.min(100,parseInt(e[2],10))/100,Math.min(100,parseInt(e[3],10))/100,t);break;case"hsl":case"hsla":if(e=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i))return n(e[4]),this.setHSL(parseFloat(e[1])/360,parseFloat(e[2])/100,parseFloat(e[3])/100,t)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const e=r[1],n=e.length;if(3===n)return this.setRGB(parseInt(e.charAt(0),16)/15,parseInt(e.charAt(1),16)/15,parseInt(e.charAt(2),16)/15,t);if(6===n)return this.setHex(parseInt(e,16),t)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=fp){const n=zf[e.toLowerCase()];return void 0!==n&&this.setHex(n,t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=lm(e.r),this.g=lm(e.g),this.b=lm(e.b),this}copyLinearToSRGB(e){return this.r=cm(e.r),this.g=cm(e.g),this.b=cm(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=fp){return om.workingToColorSpace(Wf.copy(this),e),65536*Math.round(Fp(255*Wf.r,0,255))+256*Math.round(Fp(255*Wf.g,0,255))+Math.round(Fp(255*Wf.b,0,255))}getHexString(e=fp){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=om.workingColorSpace){om.workingToColorSpace(Wf.copy(this),t);const n=Wf.r,r=Wf.g,s=Wf.b,i=Math.max(n,r,s),a=Math.min(n,r,s);let o,l;const c=(a+i)/2;if(a===i)o=0,l=0;else{const e=i-a;switch(l=c<=.5?e/(i+a):e/(2-i-a),i){case n:o=(r-s)/e+(r<s?6:0);break;case r:o=(s-n)/e+2;break;case s:o=(n-r)/e+4}o/=6}return e.h=o,e.s=l,e.l=c,e}getRGB(e,t=om.workingColorSpace){return om.workingToColorSpace(Wf.copy(this),t),e.r=Wf.r,e.g=Wf.g,e.b=Wf.b,e}getStyle(e=fp){om.workingToColorSpace(Wf.copy(this),e);const t=Wf.r,n=Wf.g,r=Wf.b;return e!==fp?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(255*t)},${Math.round(255*n)},${Math.round(255*r)})`}offsetHSL(e,t,n){return this.getHSL(Bf),this.setHSL(Bf.h+e,Bf.s+t,Bf.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(Bf),e.getHSL(Uf);const n=Bp(Bf.h,Uf.h,t),r=Bp(Bf.s,Uf.s,t),s=Bp(Bf.l,Uf.l,t);return this.setHSL(n,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*n+s[6]*r,this.g=s[1]*t+s[4]*n+s[7]*r,this.b=s[2]*t+s[5]*n+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const Wf=new Hf;Hf.NAMES=zf;let $f=0;class Gf extends Pp{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:$f++}),this.uuid=Lp(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Nu,this.blendDst=_u,this.blendEquation=gu,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Hf(0,0,0),this.blendAlpha=0,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=yp,this.stencilZFail=yp,this.stencilZPass=yp,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const n=e[t];if(void 0===n)continue;const r=this[t];void 0!==r&&(r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n)}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const n={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};function r(e){const t=[];for(const n in e){const r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),void 0!==this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.sheenColorMap&&this.sheenColorMap.isTexture&&(n.sheenColorMap=this.sheenColorMap.toJSON(e).uuid),this.sheenRoughnessMap&&this.sheenRoughnessMap.isTexture&&(n.sheenRoughnessMap=this.sheenRoughnessMap.toJSON(e).uuid),void 0!==this.dispersion&&(n.dispersion=this.dispersion),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),void 0!==this.anisotropy&&(n.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapRotation&&(n.envMapRotation=this.envMapRotation.toArray()),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),0!==this.side&&(n.side=this.side),!0===this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=!0),this.blendSrc!==Nu&&(n.blendSrc=this.blendSrc),this.blendDst!==_u&&(n.blendDst=this.blendDst),this.blendEquation!==gu&&(n.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(n.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(n.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(n.blendAlpha=this.blendAlpha),3!==this.depthFunc&&(n.depthFunc=this.depthFunc),!1===this.depthTest&&(n.depthTest=this.depthTest),!1===this.depthWrite&&(n.depthWrite=this.depthWrite),!1===this.colorWrite&&(n.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(n.stencilWriteMask=this.stencilWriteMask),519!==this.stencilFunc&&(n.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(n.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==yp&&(n.stencilFail=this.stencilFail),this.stencilZFail!==yp&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==yp&&(n.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(n.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaHash&&(n.alphaHash=!0),!0===this.alphaToCoverage&&(n.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=!0),!0===this.forceSinglePass&&(n.forceSinglePass=!0),!0===this.wireframe&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),t){const t=r(e.textures),s=r(e.images);t.length>0&&(n.textures=t),s.length>0&&(n.images=s)}return n}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(null!==t){const e=t.length;n=new Array(e);for(let r=0;r!==e;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}class qf extends Gf{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Hf(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new of,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Xf=Kf();function Kf(){const e=new ArrayBuffer(4),t=new Float32Array(e),n=new Uint32Array(e),r=new Uint32Array(512),s=new Uint32Array(512);for(let l=0;l<256;++l){const e=l-127;e<-27?(r[l]=0,r[256|l]=32768,s[l]=24,s[256|l]=24):e<-14?(r[l]=1024>>-e-14,r[256|l]=1024>>-e-14|32768,s[l]=-e-1,s[256|l]=-e-1):e<=15?(r[l]=e+15<<10,r[256|l]=e+15<<10|32768,s[l]=13,s[256|l]=13):e<128?(r[l]=31744,r[256|l]=64512,s[l]=24,s[256|l]=24):(r[l]=31744,r[256|l]=64512,s[l]=13,s[256|l]=13)}const i=new Uint32Array(2048),a=new Uint32Array(64),o=new Uint32Array(64);for(let l=1;l<1024;++l){let e=l<<13,t=0;for(;!(8388608&e);)e<<=1,t-=8388608;e&=-8388609,t+=947912704,i[l]=e|t}for(let l=1024;l<2048;++l)i[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)a[l]=l<<23;a[31]=1199570944,a[32]=2147483648;for(let l=33;l<63;++l)a[l]=2147483648+(l-32<<23);a[63]=3347054592;for(let l=1;l<64;++l)32!==l&&(o[l]=1024);return{floatView:t,uint32View:n,baseTable:r,shiftTable:s,mantissaTable:i,exponentTable:a,offsetTable:o}}function Yf(e){Math.abs(e),e=Fp(e,-65504,65504),Xf.floatView[0]=e;const t=Xf.uint32View[0],n=t>>23&511;return Xf.baseTable[n]+((8388607&t)>>Xf.shiftTable[n])}function Zf(e){const t=e>>10;return Xf.uint32View[0]=Xf.mantissaTable[Xf.offsetTable[t]+(1023&e)]+Xf.exponentTable[t],Xf.floatView[0]}const Jf=new Gp,Qf=new Wp;let eg=0;class tg{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:eg++}),this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=n,this.usage=Ep,this.updateRanges=[],this.gpuType=uh,this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)Qf.fromBufferAttribute(this,t),Qf.applyMatrix3(e),this.setXY(t,Qf.x,Qf.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)Jf.fromBufferAttribute(this,t),Jf.applyMatrix3(e),this.setXYZ(t,Jf.x,Jf.y,Jf.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)Jf.fromBufferAttribute(this,t),Jf.applyMatrix4(e),this.setXYZ(t,Jf.x,Jf.y,Jf.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Jf.fromBufferAttribute(this,t),Jf.applyNormalMatrix(e),this.setXYZ(t,Jf.x,Jf.y,Jf.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Jf.fromBufferAttribute(this,t),Jf.transformDirection(e),this.setXYZ(t,Jf.x,Jf.y,Jf.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=Up(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=Vp(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Up(t,this.array)),t}setX(e,t){return this.normalized&&(t=Vp(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Up(t,this.array)),t}setY(e,t){return this.normalized&&(t=Vp(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Up(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Vp(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Up(t,this.array)),t}setW(e,t){return this.normalized&&(t=Vp(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=Vp(t,this.array),n=Vp(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=Vp(t,this.array),n=Vp(n,this.array),r=Vp(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,s){return e*=this.itemSize,this.normalized&&(t=Vp(t,this.array),n=Vp(n,this.array),r=Vp(r,this.array),s=Vp(s,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==Ep&&(e.usage=this.usage),e}}class ng extends tg{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class rg extends tg{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class sg extends tg{constructor(e,t,n){super(new Float32Array(e),t,n)}}let ig=0;const ag=new Ym,og=new _f,lg=new Gp,cg=new Nm,dg=new Nm,ug=new Gp;class hg extends Pp{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:ig++}),this.uuid=Lp(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(Zp(e)?rg:ng)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const t=(new Kp).getNormalMatrix(e);n.applyNormalMatrix(t),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return ag.makeRotationFromQuaternion(e),this.applyMatrix4(ag),this}rotateX(e){return ag.makeRotationX(e),this.applyMatrix4(ag),this}rotateY(e){return ag.makeRotationY(e),this.applyMatrix4(ag),this}rotateZ(e){return ag.makeRotationZ(e),this.applyMatrix4(ag),this}translate(e,t,n){return ag.makeTranslation(e,t,n),this.applyMatrix4(ag),this}scale(e,t,n){return ag.makeScale(e,t,n),this.applyMatrix4(ag),this}lookAt(e){return og.lookAt(e),og.updateMatrix(),this.applyMatrix4(og.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(lg).negate(),this.translate(lg.x,lg.y,lg.z),this}setFromPoints(e){const t=this.getAttribute("position");if(void 0===t){const t=[];for(let n=0,r=e.length;n<r;n++){const r=e[n];t.push(r.x,r.y,r.z||0)}this.setAttribute("position",new sg(t,3))}else{const n=Math.min(e.length,t.count);for(let r=0;r<n;r++){const n=e[r];t.setXYZ(r,n.x,n.y,n.z||0)}e.length,t.count,t.needsUpdate=!0}return this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Nm);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)this.boundingBox.set(new Gp(-1/0,-1/0,-1/0),new Gp(1/0,1/0,1/0));else{if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let e=0,n=t.length;e<n;e++){const n=t[e];cg.setFromBufferAttribute(n),this.morphTargetsRelative?(ug.addVectors(this.boundingBox.min,cg.min),this.boundingBox.expandByPoint(ug),ug.addVectors(this.boundingBox.max,cg.max),this.boundingBox.expandByPoint(ug)):(this.boundingBox.expandByPoint(cg.min),this.boundingBox.expandByPoint(cg.max))}}else this.boundingBox.makeEmpty();isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z)}}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Um);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)this.boundingSphere.set(new Gp,1/0);else if(e){const n=this.boundingSphere.center;if(cg.setFromBufferAttribute(e),t)for(let e=0,s=t.length;e<s;e++){const n=t[e];dg.setFromBufferAttribute(n),this.morphTargetsRelative?(ug.addVectors(cg.min,dg.min),cg.expandByPoint(ug),ug.addVectors(cg.max,dg.max),cg.expandByPoint(ug)):(cg.expandByPoint(dg.min),cg.expandByPoint(dg.max))}cg.getCenter(n);let r=0;for(let t=0,s=e.count;t<s;t++)ug.fromBufferAttribute(e,t),r=Math.max(r,n.distanceToSquared(ug));if(t)for(let s=0,i=t.length;s<i;s++){const i=t[s],a=this.morphTargetsRelative;for(let t=0,s=i.count;t<s;t++)ug.fromBufferAttribute(i,t),a&&(lg.fromBufferAttribute(e,t),ug.add(lg)),r=Math.max(r,n.distanceToSquared(ug))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return;const n=t.position,r=t.normal,s=t.uv;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new tg(new Float32Array(4*n.count),4));const i=this.getAttribute("tangent"),a=[],o=[];for(let N=0;N<n.count;N++)a[N]=new Gp,o[N]=new Gp;const l=new Gp,c=new Gp,d=new Gp,u=new Wp,h=new Wp,p=new Wp,m=new Gp,f=new Gp;function g(e,t,r){l.fromBufferAttribute(n,e),c.fromBufferAttribute(n,t),d.fromBufferAttribute(n,r),u.fromBufferAttribute(s,e),h.fromBufferAttribute(s,t),p.fromBufferAttribute(s,r),c.sub(l),d.sub(l),h.sub(u),p.sub(u);const i=1/(h.x*p.y-p.x*h.y);isFinite(i)&&(m.copy(c).multiplyScalar(p.y).addScaledVector(d,-h.y).multiplyScalar(i),f.copy(d).multiplyScalar(h.x).addScaledVector(c,-p.x).multiplyScalar(i),a[e].add(m),a[t].add(m),a[r].add(m),o[e].add(f),o[t].add(f),o[r].add(f))}let x=this.groups;0===x.length&&(x=[{start:0,count:e.count}]);for(let N=0,_=x.length;N<_;++N){const t=x[N],n=t.start;for(let r=n,s=n+t.count;r<s;r+=3)g(e.getX(r+0),e.getX(r+1),e.getX(r+2))}const v=new Gp,y=new Gp,b=new Gp,w=new Gp;function j(e){b.fromBufferAttribute(r,e),w.copy(b);const t=a[e];v.copy(t),v.sub(b.multiplyScalar(b.dot(t))).normalize(),y.crossVectors(w,t);const n=y.dot(o[e])<0?-1:1;i.setXYZW(e,v.x,v.y,v.z,n)}for(let N=0,_=x.length;N<_;++N){const t=x[N],n=t.start;for(let r=n,s=n+t.count;r<s;r+=3)j(e.getX(r+0)),j(e.getX(r+1)),j(e.getX(r+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new tg(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let e=0,t=n.count;e<t;e++)n.setXYZ(e,0,0,0);const r=new Gp,s=new Gp,i=new Gp,a=new Gp,o=new Gp,l=new Gp,c=new Gp,d=new Gp;if(e)for(let u=0,h=e.count;u<h;u+=3){const h=e.getX(u+0),p=e.getX(u+1),m=e.getX(u+2);r.fromBufferAttribute(t,h),s.fromBufferAttribute(t,p),i.fromBufferAttribute(t,m),c.subVectors(i,s),d.subVectors(r,s),c.cross(d),a.fromBufferAttribute(n,h),o.fromBufferAttribute(n,p),l.fromBufferAttribute(n,m),a.add(c),o.add(c),l.add(c),n.setXYZ(h,a.x,a.y,a.z),n.setXYZ(p,o.x,o.y,o.z),n.setXYZ(m,l.x,l.y,l.z)}else for(let e=0,u=t.count;e<u;e+=3)r.fromBufferAttribute(t,e+0),s.fromBufferAttribute(t,e+1),i.fromBufferAttribute(t,e+2),c.subVectors(i,s),d.subVectors(r,s),c.cross(d),n.setXYZ(e+0,c.x,c.y,c.z),n.setXYZ(e+1,c.x,c.y,c.z),n.setXYZ(e+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)ug.fromBufferAttribute(e,t),ug.normalize(),e.setXYZ(t,ug.x,ug.y,ug.z)}toNonIndexed(){function e(e,t){const n=e.array,r=e.itemSize,s=e.normalized,i=new n.constructor(t.length*r);let a=0,o=0;for(let l=0,c=t.length;l<c;l++){a=e.isInterleavedBufferAttribute?t[l]*e.data.stride+e.offset:t[l]*r;for(let e=0;e<r;e++)i[o++]=n[a++]}return new tg(i,r,s)}if(null===this.index)return this;const t=new hg,n=this.index.array,r=this.attributes;for(const a in r){const s=e(r[a],n);t.setAttribute(a,s)}const s=this.morphAttributes;for(const a in s){const r=[],i=s[a];for(let t=0,s=i.length;t<s;t++){const s=e(i[t],n);r.push(s)}t.morphAttributes[a]=r}t.morphTargetsRelative=this.morphTargetsRelative;const i=this.groups;for(let a=0,o=i.length;a<o;a++){const e=i[a];t.addGroup(e.start,e.count,e.materialIndex)}return t}toJSON(){const e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const t=this.parameters;for(const n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const o in n){const t=n[o];e.data.attributes[o]=t.toJSON(e.data)}const r={};let s=!1;for(const o in this.morphAttributes){const t=this.morphAttributes[o],n=[];for(let r=0,s=t.length;r<s;r++){const s=t[r];n.push(s.toJSON(e.data))}n.length>0&&(r[o]=n,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const i=this.groups;i.length>0&&(e.data.groups=JSON.parse(JSON.stringify(i)));const a=this.boundingSphere;return null!==a&&(e.data.boundingSphere=a.toJSON()),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;null!==n&&this.setIndex(n.clone());const r=e.attributes;for(const l in r){const e=r[l];this.setAttribute(l,e.clone(t))}const s=e.morphAttributes;for(const l in s){const e=[],n=s[l];for(let r=0,s=n.length;r<s;r++)e.push(n[r].clone(t));this.morphAttributes[l]=e}this.morphTargetsRelative=e.morphTargetsRelative;const i=e.groups;for(let l=0,c=i.length;l<c;l++){const e=i[l];this.addGroup(e.start,e.count,e.materialIndex)}const a=e.boundingBox;null!==a&&(this.boundingBox=a.clone());const o=e.boundingSphere;return null!==o&&(this.boundingSphere=o.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const pg=new Ym,mg=new Km,fg=new Um,gg=new Gp,xg=new Gp,vg=new Gp,yg=new Gp,bg=new Gp,wg=new Gp,jg=new Gp,Ng=new Gp;let _g=class extends _f{constructor(e=new hg,t=new qf){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}getVertexPosition(e,t){const n=this.geometry,r=n.attributes.position,s=n.morphAttributes.position,i=n.morphTargetsRelative;t.fromBufferAttribute(r,e);const a=this.morphTargetInfluences;if(s&&a){wg.set(0,0,0);for(let n=0,r=s.length;n<r;n++){const r=a[n],o=s[n];0!==r&&(bg.fromBufferAttribute(o,e),i?wg.addScaledVector(bg,r):wg.addScaledVector(bg.sub(t),r))}t.add(wg)}return t}raycast(e,t){const n=this.geometry,r=this.material,s=this.matrixWorld;if(void 0!==r){if(null===n.boundingSphere&&n.computeBoundingSphere(),fg.copy(n.boundingSphere),fg.applyMatrix4(s),mg.copy(e.ray).recast(e.near),!1===fg.containsPoint(mg.origin)){if(null===mg.intersectSphere(fg,gg))return;if(mg.origin.distanceToSquared(gg)>(e.far-e.near)**2)return}pg.copy(s).invert(),mg.copy(e.ray).applyMatrix4(pg),null!==n.boundingBox&&!1===mg.intersectsBox(n.boundingBox)||this._computeIntersections(e,t,mg)}}_computeIntersections(e,t,n){let r;const s=this.geometry,i=this.material,a=s.index,o=s.attributes.position,l=s.attributes.uv,c=s.attributes.uv1,d=s.attributes.normal,u=s.groups,h=s.drawRange;if(null!==a)if(Array.isArray(i))for(let p=0,m=u.length;p<m;p++){const s=u[p],o=i[s.materialIndex];for(let i=Math.max(s.start,h.start),u=Math.min(a.count,Math.min(s.start+s.count,h.start+h.count));i<u;i+=3){r=Sg(this,o,e,n,l,c,d,a.getX(i),a.getX(i+1),a.getX(i+2)),r&&(r.faceIndex=Math.floor(i/3),r.face.materialIndex=s.materialIndex,t.push(r))}}else{for(let s=Math.max(0,h.start),o=Math.min(a.count,h.start+h.count);s<o;s+=3){r=Sg(this,i,e,n,l,c,d,a.getX(s),a.getX(s+1),a.getX(s+2)),r&&(r.faceIndex=Math.floor(s/3),t.push(r))}}else if(void 0!==o)if(Array.isArray(i))for(let p=0,m=u.length;p<m;p++){const s=u[p],a=i[s.materialIndex];for(let i=Math.max(s.start,h.start),u=Math.min(o.count,Math.min(s.start+s.count,h.start+h.count));i<u;i+=3){r=Sg(this,a,e,n,l,c,d,i,i+1,i+2),r&&(r.faceIndex=Math.floor(i/3),r.face.materialIndex=s.materialIndex,t.push(r))}}else{for(let s=Math.max(0,h.start),a=Math.min(o.count,h.start+h.count);s<a;s+=3){r=Sg(this,i,e,n,l,c,d,s,s+1,s+2),r&&(r.faceIndex=Math.floor(s/3),t.push(r))}}}};function Sg(e,t,n,r,s,i,a,o,l,c){e.getVertexPosition(o,xg),e.getVertexPosition(l,vg),e.getVertexPosition(c,yg);const d=function(e,t,n,r,s,i,a,o){let l;if(l=1===t.side?r.intersectTriangle(a,i,s,!0,o):r.intersectTriangle(s,i,a,0===t.side,o),null===l)return null;Ng.copy(o),Ng.applyMatrix4(e.matrixWorld);const c=n.ray.origin.distanceTo(Ng);return c<n.near||c>n.far?null:{distance:c,point:Ng.clone(),object:e}}(e,t,n,r,xg,vg,yg,jg);if(d){const e=new Gp;Ff.getBarycoord(jg,xg,vg,yg,e),s&&(d.uv=Ff.getInterpolatedAttribute(s,o,l,c,e,new Wp)),i&&(d.uv1=Ff.getInterpolatedAttribute(i,o,l,c,e,new Wp)),a&&(d.normal=Ff.getInterpolatedAttribute(a,o,l,c,e,new Gp),d.normal.dot(r.direction)>0&&d.normal.multiplyScalar(-1));const t={a:o,b:l,c:c,normal:new Gp,materialIndex:0};Ff.getNormal(xg,vg,yg,t.normal),d.face=t,d.barycoord=e}return d}class Mg extends hg{constructor(e=1,t=1,n=1,r=1,s=1,i=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:s,depthSegments:i};const a=this;r=Math.floor(r),s=Math.floor(s),i=Math.floor(i);const o=[],l=[],c=[],d=[];let u=0,h=0;function p(e,t,n,r,s,i,p,m,f,g,x){const v=i/f,y=p/g,b=i/2,w=p/2,j=m/2,N=f+1,_=g+1;let S=0,M=0;const C=new Gp;for(let a=0;a<_;a++){const i=a*y-w;for(let o=0;o<N;o++){const u=o*v-b;C[e]=u*r,C[t]=i*s,C[n]=j,l.push(C.x,C.y,C.z),C[e]=0,C[t]=0,C[n]=m>0?1:-1,c.push(C.x,C.y,C.z),d.push(o/f),d.push(1-a/g),S+=1}}for(let a=0;a<g;a++)for(let e=0;e<f;e++){const t=u+e+N*a,n=u+e+N*(a+1),r=u+(e+1)+N*(a+1),s=u+(e+1)+N*a;o.push(t,n,s),o.push(n,r,s),M+=6}a.addGroup(h,M,x),h+=M,u+=S}p("z","y","x",-1,-1,n,t,e,i,s,0),p("z","y","x",1,-1,n,t,-e,i,s,1),p("x","z","y",1,1,e,n,t,r,i,2),p("x","z","y",1,-1,e,n,-t,r,i,3),p("x","y","z",1,-1,e,t,n,r,s,4),p("x","y","z",-1,-1,e,t,-n,r,s,5),this.setIndex(o),this.setAttribute("position",new sg(l,3)),this.setAttribute("normal",new sg(c,3)),this.setAttribute("uv",new sg(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Mg(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Cg(e){const t={};for(const n in e){t[n]={};for(const r in e[n]){const s=e[n][r];s&&(s.isColor||s.isMatrix3||s.isMatrix4||s.isVector2||s.isVector3||s.isVector4||s.isTexture||s.isQuaternion)?s.isRenderTargetTexture?t[n][r]=null:t[n][r]=s.clone():Array.isArray(s)?t[n][r]=s.slice():t[n][r]=s}}return t}function Eg(e){const t={};for(let n=0;n<e.length;n++){const r=Cg(e[n]);for(const e in r)t[e]=r[e]}return t}function kg(e){const t=e.getRenderTarget();return null===t?e.outputColorSpace:!0===t.isXRRenderTarget?t.texture.colorSpace:om.workingColorSpace}const Ag={clone:Cg,merge:Eg};class Tg extends Gf{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Cg(e.uniforms),this.uniformsGroups=function(e){const t=[];for(let n=0;n<e.length;n++)t.push(e[n].clone());return t}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const n=this.uniforms[r].value;n&&n.isTexture?t.uniforms[r]={type:"t",value:n.toJSON(e).uuid}:n&&n.isColor?t.uniforms[r]={type:"c",value:n.getHex()}:n&&n.isVector2?t.uniforms[r]={type:"v2",value:n.toArray()}:n&&n.isVector3?t.uniforms[r]={type:"v3",value:n.toArray()}:n&&n.isVector4?t.uniforms[r]={type:"v4",value:n.toArray()}:n&&n.isMatrix3?t.uniforms[r]={type:"m3",value:n.toArray()}:n&&n.isMatrix4?t.uniforms[r]={type:"m4",value:n.toArray()}:t.uniforms[r]={value:n}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const r in this.extensions)!0===this.extensions[r]&&(n[r]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class Pg extends _f{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Ym,this.projectionMatrix=new Ym,this.projectionMatrixInverse=new Ym,this.coordinateSystem=Ap,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}const Og=new Gp,Rg=new Wp,Ig=new Wp;class Dg extends Pg{constructor(e=50,t=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*Dp*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*Ip*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*Dp*Math.atan(Math.tan(.5*Ip*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,n){Og.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Og.x,Og.y).multiplyScalar(-e/Og.z),Og.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(Og.x,Og.y).multiplyScalar(-e/Og.z)}getViewSize(e,t){return this.getViewBounds(e,Rg,Ig),t.subVectors(Ig,Rg)}setViewOffset(e,t,n,r,s,i){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=i,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*Ip*this.fov)/this.zoom,n=2*t,r=this.aspect*n,s=-.5*r;const i=this.view;if(null!==this.view&&this.view.enabled){const e=i.fullWidth,a=i.fullHeight;s+=i.offsetX*r/e,t-=i.offsetY*n/a,r*=i.width/e,n*=i.height/a}const a=this.filmOffset;0!==a&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-n,e,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Lg=-90;class Fg extends _f{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new Dg(Lg,1,e,t);r.layers=this.layers,this.add(r);const s=new Dg(Lg,1,e,t);s.layers=this.layers,this.add(s);const i=new Dg(Lg,1,e,t);i.layers=this.layers,this.add(i);const a=new Dg(Lg,1,e,t);a.layers=this.layers,this.add(a);const o=new Dg(Lg,1,e,t);o.layers=this.layers,this.add(o);const l=new Dg(Lg,1,e,t);l.layers=this.layers,this.add(l)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,r,s,i,a,o]=t;for(const l of t)this.remove(l);if(e===Ap)n.up.set(0,1,0),n.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),i.up.set(0,0,1),i.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),o.up.set(0,1,0),o.lookAt(0,0,-1);else{if(e!==Tp)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);n.up.set(0,-1,0),n.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),i.up.set(0,0,-1),i.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),o.up.set(0,-1,0),o.lookAt(0,0,-1)}for(const l of t)this.add(l),l.updateMatrixWorld()}update(e,t){null===this.parent&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,i,a,o,l,c]=this.children,d=e.getRenderTarget(),u=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),p=e.xr.enabled;e.xr.enabled=!1;const m=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,r),e.render(t,s),e.setRenderTarget(n,1,r),e.render(t,i),e.setRenderTarget(n,2,r),e.render(t,a),e.setRenderTarget(n,3,r),e.render(t,o),e.setRenderTarget(n,4,r),e.render(t,l),n.texture.generateMipmaps=m,e.setRenderTarget(n,5,r),e.render(t,c),e.setRenderTarget(d,u,h),e.xr.enabled=p,n.texture.needsPMREMUpdate=!0}}class zg extends xm{constructor(e=[],t=301,n,r,s,i,a,o,l,c){super(e,t,n,r,s,i,a,o,l,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class Bg extends bm{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},r=[n,n,n,n,n,n];this.texture=new zg(r),this._setTextureOptions(t),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t"},r=new Mg(5,5,5),s=new Tg({name:"CubemapFromEquirect",uniforms:Cg(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:1,blending:0});s.uniforms.tEquirect.value=t;const i=new _g(r,s),a=t.minFilter;t.minFilter===sh&&(t.minFilter=nh);return new Fg(1,10,this).update(e,i),t.minFilter=a,i.geometry.dispose(),i.material.dispose(),this}clear(e,t=!0,n=!0,r=!0){const s=e.getRenderTarget();for(let i=0;i<6;i++)e.setRenderTarget(this,i),e.clear(t,n,r);e.setRenderTarget(s)}}let Ug=class extends _f{constructor(){super(),this.isGroup=!0,this.type="Group"}};const Vg={type:"move"};class Hg{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new Ug,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new Ug,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Gp,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Gp),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new Ug,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Gp,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Gp),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,n){let r=null,s=null,i=null;const a=this._targetRay,o=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(l&&e.hand){i=!0;for(const i of e.hand.values()){const e=t.getJointPose(i,n),r=this._getHandJoint(l,i);null!==e&&(r.matrix.fromArray(e.transform.matrix),r.matrix.decompose(r.position,r.rotation,r.scale),r.matrixWorldNeedsUpdate=!0,r.jointRadius=e.radius),r.visible=null!==e}const r=l.joints["index-finger-tip"],s=l.joints["thumb-tip"],a=r.position.distanceTo(s.position),o=.02,c=.005;l.inputState.pinching&&a>o+c?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&a<=o-c&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==o&&e.gripSpace&&(s=t.getPose(e.gripSpace,n),null!==s&&(o.matrix.fromArray(s.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,s.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(s.linearVelocity)):o.hasLinearVelocity=!1,s.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(s.angularVelocity)):o.hasAngularVelocity=!1));null!==a&&(r=t.getPose(e.targetRaySpace,n),null===r&&null!==s&&(r=s),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(Vg)))}return null!==a&&(a.visible=null!==r),null!==o&&(o.visible=null!==s),null!==l&&(l.visible=null!==i),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){const n=new Ug;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class Wg{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Hf(e),this.density=t}clone(){return new Wg(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class $g{constructor(e,t=1,n=1e3){this.isFog=!0,this.name="",this.color=new Hf(e),this.near=t,this.far=n}clone(){return new $g(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}let Gg=class extends _f{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new of,this.environmentIntensity=1,this.environmentRotation=new of,this.overrideMaterial=null,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),1!==this.environmentIntensity&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}};class qg{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=Ep,this.updateRanges=[],this.version=0,this.uuid=Lp()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[n+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Lp()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Lp()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Xg=new Gp;class Kg{constructor(e,t,n,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)Xg.fromBufferAttribute(this,t),Xg.applyMatrix4(e),this.setXYZ(t,Xg.x,Xg.y,Xg.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Xg.fromBufferAttribute(this,t),Xg.applyNormalMatrix(e),this.setXYZ(t,Xg.x,Xg.y,Xg.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Xg.fromBufferAttribute(this,t),Xg.transformDirection(e),this.setXYZ(t,Xg.x,Xg.y,Xg.z);return this}getComponent(e,t){let n=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(n=Up(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=Vp(n,this.array)),this.data.array[e*this.data.stride+this.offset+t]=n,this}setX(e,t){return this.normalized&&(t=Vp(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Vp(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Vp(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Vp(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Up(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Up(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Up(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Up(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=Vp(t,this.array),n=Vp(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Vp(t,this.array),n=Vp(n,this.array),r=Vp(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}setXYZW(e,t,n,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=Vp(t,this.array),n=Vp(n,this.array),r=Vp(r,this.array),s=Vp(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(void 0===e){const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return new tg(new this.array.constructor(e),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Kg(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class Yg extends Gf{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Hf(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Zg;const Jg=new Gp,Qg=new Gp,ex=new Gp,tx=new Wp,nx=new Wp,rx=new Ym,sx=new Gp,ix=new Gp,ax=new Gp,ox=new Wp,lx=new Wp,cx=new Wp;class dx extends _f{constructor(e=new Yg){if(super(),this.isSprite=!0,this.type="Sprite",void 0===Zg){Zg=new hg;const e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),t=new qg(e,5);Zg.setIndex([0,1,2,0,2,3]),Zg.setAttribute("position",new Kg(t,3,0,!1)),Zg.setAttribute("uv",new Kg(t,2,3,!1))}this.geometry=Zg,this.material=e,this.center=new Wp(.5,.5),this.count=1}raycast(e,t){e.camera,Qg.setFromMatrixScale(this.matrixWorld),rx.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),ex.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Qg.multiplyScalar(-ex.z);const n=this.material.rotation;let r,s;0!==n&&(s=Math.cos(n),r=Math.sin(n));const i=this.center;ux(sx.set(-.5,-.5,0),ex,i,Qg,r,s),ux(ix.set(.5,-.5,0),ex,i,Qg,r,s),ux(ax.set(.5,.5,0),ex,i,Qg,r,s),ox.set(0,0),lx.set(1,0),cx.set(1,1);let a=e.ray.intersectTriangle(sx,ix,ax,!1,Jg);if(null===a&&(ux(ix.set(-.5,.5,0),ex,i,Qg,r,s),lx.set(0,1),a=e.ray.intersectTriangle(sx,ax,ix,!1,Jg),null===a))return;const o=e.ray.origin.distanceTo(Jg);o<e.near||o>e.far||t.push({distance:o,point:Jg.clone(),uv:Ff.getInterpolation(Jg,sx,ix,ax,ox,lx,cx,new Wp),face:null,object:this})}copy(e,t){return super.copy(e,t),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}function ux(e,t,n,r,s,i){tx.subVectors(e,n).addScalar(.5).multiply(r),void 0!==s?(nx.x=i*tx.x-s*tx.y,nx.y=s*tx.x+i*tx.y):nx.copy(tx),e.copy(t),e.x+=nx.x,e.y+=nx.y,e.applyMatrix4(rx)}const hx=new Gp,px=new Gp;class mx extends _f{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let n=0,r=t.length;n<r;n++){const e=t[n];this.addLevel(e.object.clone(),e.distance,e.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,n=0){t=Math.abs(t);const r=this.levels;let s;for(s=0;s<r.length&&!(t<r[s].distance);s++);return r.splice(s,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let n=0;n<t.length;n++)if(t[n].distance===e){const e=t.splice(n,1);return this.remove(e[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,r;for(n=1,r=t.length;n<r;n++){let r=t[n].distance;if(t[n].object.visible&&(r-=r*t[n].hysteresis),e<r)break}return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){hx.setFromMatrixPosition(this.matrixWorld);const n=e.ray.origin.distanceTo(hx);this.getObjectForDistance(n).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){hx.setFromMatrixPosition(e.matrixWorld),px.setFromMatrixPosition(this.matrixWorld);const n=hx.distanceTo(px)/e.zoom;let r,s;for(t[0].object.visible=!0,r=1,s=t.length;r<s;r++){let e=t[r].distance;if(t[r].object.visible&&(e-=e*t[r].hysteresis),!(n>=e))break;t[r-1].object.visible=!1,t[r].object.visible=!0}for(this._currentLevel=r-1;r<s;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let r=0,s=n.length;r<s;r++){const e=n[r];t.object.levels.push({object:e.object.uuid,distance:e.distance,hysteresis:e.hysteresis})}return t}}const fx=new Gp,gx=new vm,xx=new vm,vx=new Gp,yx=new Ym,bx=new Gp,wx=new Um,jx=new Ym,Nx=new Km;class _x extends _g{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=Vu,this.bindMatrix=new Ym,this.bindMatrixInverse=new Ym,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;null===this.boundingBox&&(this.boundingBox=new Nm),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,bx),this.boundingBox.expandByPoint(bx)}computeBoundingSphere(){const e=this.geometry;null===this.boundingSphere&&(this.boundingSphere=new Um),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,bx),this.boundingSphere.expandByPoint(bx)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const n=this.material,r=this.matrixWorld;void 0!==n&&(null===this.boundingSphere&&this.computeBoundingSphere(),wx.copy(this.boundingSphere),wx.applyMatrix4(r),!1!==e.ray.intersectsSphere(wx)&&(jx.copy(r).invert(),Nx.copy(e.ray).applyMatrix4(jx),null!==this.boundingBox&&!1===Nx.intersectsBox(this.boundingBox)||this._computeIntersections(e,t,Nx)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new vm,t=this.geometry.attributes.skinWeight;for(let n=0,r=t.count;n<r;n++){e.fromBufferAttribute(t,n);const r=1/e.manhattanLength();r!==1/0?e.multiplyScalar(r):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===Vu?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===Hu&&this.bindMatrixInverse.copy(this.bindMatrix).invert()}applyBoneTransform(e,t){const n=this.skeleton,r=this.geometry;gx.fromBufferAttribute(r.attributes.skinIndex,e),xx.fromBufferAttribute(r.attributes.skinWeight,e),fx.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const e=xx.getComponent(s);if(0!==e){const r=gx.getComponent(s);yx.multiplyMatrices(n.bones[r].matrixWorld,n.boneInverses[r]),t.addScaledVector(vx.copy(fx).applyMatrix4(yx),e)}}return t.applyMatrix4(this.bindMatrixInverse)}}class Sx extends _f{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Mx extends xm{constructor(e=null,t=1,n=1,r,s,i,a,o,l=1003,c=1003,d,u){super(null,i,a,o,l,c,r,s,d,u),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const Cx=new Ym,Ex=new Ym;class kx{constructor(e=[],t=[]){this.uuid=Lp(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){this.boneInverses=[];for(let e=0,t=this.bones.length;e<t;e++)this.boneInverses.push(new Ym)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const t=new Ym;this.bones[e]&&t.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(t)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&t.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&(t.parent&&t.parent.isBone?(t.matrix.copy(t.parent.matrixWorld).invert(),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let s=0,i=e.length;s<i;s++){const r=e[s]?e[s].matrixWorld:Ex;Cx.multiplyMatrices(r,t[s]),Cx.toArray(n,16*s)}null!==r&&(r.needsUpdate=!0)}clone(){return new kx(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);e=4*Math.ceil(e/4),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new Mx(t,e,e,bh,uh);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const n=this.bones[t];if(n.name===e)return n}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,r=e.bones.length;n<r;n++){let r=t[e.bones[n]];void 0===r&&(r=new Sx),this.bones.push(r),this.boneInverses.push((new Ym).fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.7,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let r=0,s=t.length;r<s;r++){const s=t[r];e.bones.push(s.uuid);const i=n[r];e.boneInverses.push(i.toArray())}return e}}class Ax extends tg{constructor(e,t,n,r=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Tx=new Ym,Px=new Ym,Ox=[],Rx=new Nm,Ix=new Ym,Dx=new _g,Lx=new Um;class Fx extends _g{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Ax(new Float32Array(16*n),16),this.instanceColor=null,this.morphTexture=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<n;r++)this.setMatrixAt(r,Ix)}computeBoundingBox(){const e=this.geometry,t=this.count;null===this.boundingBox&&(this.boundingBox=new Nm),null===e.boundingBox&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,Tx),Rx.copy(e.boundingBox).applyMatrix4(Tx),this.boundingBox.union(Rx)}computeBoundingSphere(){const e=this.geometry,t=this.count;null===this.boundingSphere&&(this.boundingSphere=new Um),null===e.boundingSphere&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,Tx),Lx.copy(e.boundingSphere).applyMatrix4(Tx),this.boundingSphere.union(Lx)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),null!==e.morphTexture&&(this.morphTexture=e.morphTexture.clone()),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}getMorphAt(e,t){const n=t.morphTargetInfluences,r=this.morphTexture.source.data.data,s=e*(n.length+1)+1;for(let i=0;i<n.length;i++)n[i]=r[s+i]}raycast(e,t){const n=this.matrixWorld,r=this.count;if(Dx.geometry=this.geometry,Dx.material=this.material,void 0!==Dx.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),Lx.copy(this.boundingSphere),Lx.applyMatrix4(n),!1!==e.ray.intersectsSphere(Lx)))for(let s=0;s<r;s++){this.getMatrixAt(s,Tx),Px.multiplyMatrices(n,Tx),Dx.matrixWorld=Px,Dx.raycast(e,Ox);for(let e=0,n=Ox.length;e<n;e++){const n=Ox[e];n.instanceId=s,n.object=this,t.push(n)}Ox.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new Ax(new Float32Array(3*this.instanceMatrix.count).fill(1),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}setMorphAt(e,t){const n=t.morphTargetInfluences,r=n.length+1;null===this.morphTexture&&(this.morphTexture=new Mx(new Float32Array(r*this.count),r,this.count,Nh,uh));const s=this.morphTexture.source.data.data;let i=0;for(let l=0;l<n.length;l++)i+=n[l];const a=this.geometry.morphTargetsRelative?1:1-i,o=r*e;s[o]=a,s.set(n,o+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),null!==this.morphTexture&&(this.morphTexture.dispose(),this.morphTexture=null)}}const zx=new Gp,Bx=new Gp,Ux=new Kp;class Vx{constructor(e=new Gp(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const r=zx.subVectors(n,t).cross(Bx.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(zx),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(n,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||Ux.getNormalMatrix(e),r=this.coplanarPoint(zx).applyMatrix4(e),s=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const Hx=new Um,Wx=new Wp(.5,.5),$x=new Gp;class Gx{constructor(e=new Vx,t=new Vx,n=new Vx,r=new Vx,s=new Vx,i=new Vx){this.planes=[e,t,n,r,s,i]}set(e,t,n,r,s,i){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(r),a[4].copy(s),a[5].copy(i),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=2e3,n=!1){const r=this.planes,s=e.elements,i=s[0],a=s[1],o=s[2],l=s[3],c=s[4],d=s[5],u=s[6],h=s[7],p=s[8],m=s[9],f=s[10],g=s[11],x=s[12],v=s[13],y=s[14],b=s[15];if(r[0].setComponents(l-i,h-c,g-p,b-x).normalize(),r[1].setComponents(l+i,h+c,g+p,b+x).normalize(),r[2].setComponents(l+a,h+d,g+m,b+v).normalize(),r[3].setComponents(l-a,h-d,g-m,b-v).normalize(),n)r[4].setComponents(o,u,f,y).normalize(),r[5].setComponents(l-o,h-u,g-f,b-y).normalize();else if(r[4].setComponents(l-o,h-u,g-f,b-y).normalize(),t===Ap)r[5].setComponents(l+o,h+u,g+f,b+y).normalize();else{if(t!==Tp)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);r[5].setComponents(o,u,f,y).normalize()}return this}intersectsObject(e){if(void 0!==e.boundingSphere)null===e.boundingSphere&&e.computeBoundingSphere(),Hx.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;null===t.boundingSphere&&t.computeBoundingSphere(),Hx.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Hx)}intersectsSprite(e){Hx.center.set(0,0,0);const t=Wx.distanceTo(e.center);return Hx.radius=.7071067811865476+t,Hx.applyMatrix4(e.matrixWorld),this.intersectsSphere(Hx)}intersectsSphere(e){const t=this.planes,n=e.center,r=-e.radius;for(let s=0;s<6;s++){if(t[s].distanceToPoint(n)<r)return!1}return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const r=t[n];if($x.x=r.normal.x>0?e.max.x:e.min.x,$x.y=r.normal.y>0?e.max.y:e.min.y,$x.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint($x)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}const qx=new Ym,Xx=new Gx;class Kx{constructor(){this.coordinateSystem=Ap}intersectsObject(e,t){if(!t.isArrayCamera||0===t.cameras.length)return!1;for(let n=0;n<t.cameras.length;n++){const r=t.cameras[n];if(qx.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Xx.setFromProjectionMatrix(qx,r.coordinateSystem,r.reversedDepth),Xx.intersectsObject(e))return!0}return!1}intersectsSprite(e,t){if(!t||!t.cameras||0===t.cameras.length)return!1;for(let n=0;n<t.cameras.length;n++){const r=t.cameras[n];if(qx.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Xx.setFromProjectionMatrix(qx,r.coordinateSystem,r.reversedDepth),Xx.intersectsSprite(e))return!0}return!1}intersectsSphere(e,t){if(!t||!t.cameras||0===t.cameras.length)return!1;for(let n=0;n<t.cameras.length;n++){const r=t.cameras[n];if(qx.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Xx.setFromProjectionMatrix(qx,r.coordinateSystem,r.reversedDepth),Xx.intersectsSphere(e))return!0}return!1}intersectsBox(e,t){if(!t||!t.cameras||0===t.cameras.length)return!1;for(let n=0;n<t.cameras.length;n++){const r=t.cameras[n];if(qx.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Xx.setFromProjectionMatrix(qx,r.coordinateSystem,r.reversedDepth),Xx.intersectsBox(e))return!0}return!1}containsPoint(e,t){if(!t||!t.cameras||0===t.cameras.length)return!1;for(let n=0;n<t.cameras.length;n++){const r=t.cameras[n];if(qx.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Xx.setFromProjectionMatrix(qx,r.coordinateSystem,r.reversedDepth),Xx.containsPoint(e))return!0}return!1}clone(){return new Kx}}function Yx(e,t){return e-t}function Zx(e,t){return e.z-t.z}function Jx(e,t){return t.z-e.z}class Qx{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,n,r){const s=this.pool,i=this.list;this.index>=s.length&&s.push({start:-1,count:-1,z:-1,index:-1});const a=s[this.index];i.push(a),this.index++,a.start=e,a.count=t,a.z=n,a.index=r}reset(){this.list.length=0,this.index=0}}const ev=new Ym,tv=new Hf(1,1,1),nv=new Gx,rv=new Kx,sv=new Nm,iv=new Um,av=new Gp,ov=new Gp,lv=new Gp,cv=new Qx,dv=new _g,uv=[];function hv(e,t,n=0){const r=t.itemSize;if(e.isInterleavedBufferAttribute||e.array.constructor!==t.array.constructor){const s=e.count;for(let i=0;i<s;i++)for(let s=0;s<r;s++)t.setComponent(i+n,s,e.getComponent(i,s))}else t.array.set(e.array,n*r);t.needsUpdate=!0}function pv(e,t){if(e.constructor!==t.constructor){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++)t[r]=e[r]}else{const n=Math.min(e.length,t.length);t.set(new e.constructor(e.buffer,0,n))}}class mv extends _g{constructor(e,t,n=2*t,r){super(new hg,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=n,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(4*this._maxInstanceCount);e=4*Math.ceil(e/4),e=Math.max(e,4);const t=new Float32Array(e*e*4),n=new Mx(t,e,e,bh,uh);this._matricesTexture=n}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),n=new Mx(t,e,e,_h,dh);this._indirectTexture=n}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),n=new Mx(t,e,e,bh,uh);n.colorSpace=om.workingColorSpace,this._colorsTexture=n}_initializeGeometry(e){const t=this.geometry,n=this._maxVertexCount,r=this._maxIndexCount;if(!1===this._geometryInitialized){for(const r in e.attributes){const s=e.getAttribute(r),{array:i,itemSize:a,normalized:o}=s,l=new i.constructor(n*a),c=new tg(l,a,o);t.setAttribute(r,c)}if(null!==e.getIndex()){const e=n>65535?new Uint32Array(r):new Uint16Array(r);t.setIndex(new tg(e,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(Boolean(e.getIndex())!==Boolean(t.getIndex()))throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const n in t.attributes){if(!e.hasAttribute(n))throw new Error(`THREE.BatchedMesh: Added geometry missing "${n}". All geometries must have consistent attributes.`);const r=e.getAttribute(n),s=t.getAttribute(n);if(r.itemSize!==s.itemSize||r.normalized!==s.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||!1===t[e].active)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||!1===t[e].active)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Nm);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let n=0,r=t.length;n<r;n++){if(!1===t[n].active)continue;const r=t[n].geometryIndex;this.getMatrixAt(n,ev),this.getBoundingBoxAt(r,sv).applyMatrix4(ev),e.union(sv)}}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Um);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let n=0,r=t.length;n<r;n++){if(!1===t[n].active)continue;const r=t[n].geometryIndex;this.getMatrixAt(n,ev),this.getBoundingSphereAt(r,iv).applyMatrix4(ev),e.union(iv)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&0===this._availableInstanceIds.length)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const t={visible:!0,active:!0,geometryIndex:e};let n=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(Yx),n=this._availableInstanceIds.shift(),this._instanceInfo[n]=t):(n=this._instanceInfo.length,this._instanceInfo.push(t));const r=this._matricesTexture;ev.identity().toArray(r.image.data,16*n),r.needsUpdate=!0;const s=this._colorsTexture;return s&&(tv.toArray(s.image.data,4*n),s.needsUpdate=!0),this._visibilityChanged=!0,n}addGeometry(e,t=-1,n=-1){this._initializeGeometry(e),this._validateGeometry(e);const r={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},s=this._geometryInfo;r.vertexStart=this._nextVertexStart,r.reservedVertexCount=-1===t?e.getAttribute("position").count:t;const i=e.getIndex();if(null!==i&&(r.indexStart=this._nextIndexStart,r.reservedIndexCount=-1===n?i.count:n),-1!==r.indexStart&&r.indexStart+r.reservedIndexCount>this._maxIndexCount||r.vertexStart+r.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let a;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(Yx),a=this._availableGeometryIds.shift(),s[a]=r):(a=this._geometryCount,this._geometryCount++,s.push(r)),this.setGeometryAt(a,e),this._nextIndexStart=r.indexStart+r.reservedIndexCount,this._nextVertexStart=r.vertexStart+r.reservedVertexCount,a}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const n=this.geometry,r=null!==n.getIndex(),s=n.getIndex(),i=t.getIndex(),a=this._geometryInfo[e];if(r&&i.count>a.reservedIndexCount||t.attributes.position.count>a.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const o=a.vertexStart,l=a.reservedVertexCount;a.vertexCount=t.getAttribute("position").count;for(const c in n.attributes){const e=t.getAttribute(c),r=n.getAttribute(c);hv(e,r,o);const s=e.itemSize;for(let t=e.count,n=l;t<n;t++){const e=o+t;for(let t=0;t<s;t++)r.setComponent(e,t,0)}r.needsUpdate=!0,r.addUpdateRange(o*s,l*s)}if(r){const e=a.indexStart,n=a.reservedIndexCount;a.indexCount=t.getIndex().count;for(let t=0;t<i.count;t++)s.setX(e+t,o+i.getX(t));for(let t=i.count,r=n;t<r;t++)s.setX(e+t,o);s.needsUpdate=!0,s.addUpdateRange(e,a.reservedIndexCount)}return a.start=r?a.indexStart:a.vertexStart,a.count=r?a.indexCount:a.vertexCount,a.boundingBox=null,null!==t.boundingBox&&(a.boundingBox=t.boundingBox.clone()),a.boundingSphere=null,null!==t.boundingSphere&&(a.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||!1===t[e].active)return this;const n=this._instanceInfo;for(let r=0,s=n.length;r<s;r++)n[r].active&&n[r].geometryIndex===e&&this.deleteInstance(r);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const n=this._geometryInfo,r=n.map((e,t)=>t).sort((e,t)=>n[e].vertexStart-n[t].vertexStart),s=this.geometry;for(let i=0,a=n.length;i<a;i++){const a=r[i],o=n[a];if(!1!==o.active){if(null!==s.index){if(o.indexStart!==t){const{indexStart:n,vertexStart:r,reservedIndexCount:i}=o,a=s.index,l=a.array,c=e-r;for(let e=n;e<n+i;e++)l[e]=l[e]+c;a.array.copyWithin(t,n,n+i),a.addUpdateRange(t,i),o.indexStart=t}t+=o.reservedIndexCount}if(o.vertexStart!==e){const{vertexStart:t,reservedVertexCount:n}=o,r=s.attributes;for(const s in r){const i=r[s],{array:a,itemSize:o}=i;a.copyWithin(e*o,t*o,(t+n)*o),i.addUpdateRange(e*o,n*o)}o.vertexStart=e}e+=o.reservedVertexCount,o.start=s.index?o.indexStart:o.vertexStart,this._nextIndexStart=s.index?o.indexStart+o.reservedIndexCount:0,this._nextVertexStart=o.vertexStart+o.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,r=this._geometryInfo[e];if(null===r.boundingBox){const e=new Nm,t=n.index,s=n.attributes.position;for(let n=r.start,i=r.start+r.count;n<i;n++){let r=n;t&&(r=t.getX(r)),e.expandByPoint(av.fromBufferAttribute(s,r))}r.boundingBox=e}return t.copy(r.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,r=this._geometryInfo[e];if(null===r.boundingSphere){const t=new Um;this.getBoundingBoxAt(e,sv),sv.getCenter(t.center);const s=n.index,i=n.attributes.position;let a=0;for(let e=r.start,n=r.start+r.count;e<n;e++){let n=e;s&&(n=s.getX(n)),av.fromBufferAttribute(i,n),a=Math.max(a,t.center.distanceToSquared(av))}t.radius=Math.sqrt(a),r.boundingSphere=t}return t.copy(r.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const n=this._matricesTexture,r=this._matricesTexture.image.data;return t.toArray(r,16*e),n.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,16*e)}setColorAt(e,t){return this.validateInstanceId(e),null===this._colorsTexture&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,4*e),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,4*e)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t||(this._instanceInfo[e].visible=t,this._visibilityChanged=!0),this}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const n=this._geometryInfo[e];return t.vertexStart=n.vertexStart,t.vertexCount=n.vertexCount,t.reservedVertexCount=n.reservedVertexCount,t.indexStart=n.indexStart,t.indexCount=n.indexCount,t.reservedIndexCount=n.reservedIndexCount,t.start=n.start,t.count=n.count,t}setInstanceCount(e){const t=this._availableInstanceIds,n=this._instanceInfo;for(t.sort(Yx);t[t.length-1]===n.length-1;)n.pop(),t.pop();if(e<n.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const r=new Int32Array(e),s=new Int32Array(e);pv(this._multiDrawCounts,r),pv(this._multiDrawStarts,s),this._multiDrawCounts=r,this._multiDrawStarts=s,this._maxInstanceCount=e;const i=this._indirectTexture,a=this._matricesTexture,o=this._colorsTexture;i.dispose(),this._initIndirectTexture(),pv(i.image.data,this._indirectTexture.image.data),a.dispose(),this._initMatricesTexture(),pv(a.image.data,this._matricesTexture.image.data),o&&(o.dispose(),this._initColorsTexture(),pv(o.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const n=[...this._geometryInfo].filter(e=>e.active);if(Math.max(...n.map(e=>e.vertexStart+e.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index){if(Math.max(...n.map(e=>e.indexStart+e.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`)}const r=this.geometry;r.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new hg,this._initializeGeometry(r));const s=this.geometry;r.index&&pv(r.index.array,s.index.array);for(const i in r.attributes)pv(r.attributes[i].array,s.attributes[i].array)}raycast(e,t){const n=this._instanceInfo,r=this._geometryInfo,s=this.matrixWorld,i=this.geometry;dv.material=this.material,dv.geometry.index=i.index,dv.geometry.attributes=i.attributes,null===dv.geometry.boundingBox&&(dv.geometry.boundingBox=new Nm),null===dv.geometry.boundingSphere&&(dv.geometry.boundingSphere=new Um);for(let a=0,o=n.length;a<o;a++){if(!n[a].visible||!n[a].active)continue;const i=n[a].geometryIndex,o=r[i];dv.geometry.setDrawRange(o.start,o.count),this.getMatrixAt(a,dv.matrixWorld).premultiply(s),this.getBoundingBoxAt(i,dv.geometry.boundingBox),this.getBoundingSphereAt(i,dv.geometry.boundingSphere),dv.raycast(e,uv);for(let e=0,n=uv.length;e<n;e++){const n=uv[e];n.object=this,n.batchId=a,t.push(n)}uv.length=0}dv.material=null,dv.geometry.index=null,dv.geometry.attributes={},dv.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=null!==e.boundingBox?e.boundingBox.clone():null,this.boundingSphere=null!==e.boundingSphere?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(e=>({...e,boundingBox:null!==e.boundingBox?e.boundingBox.clone():null,boundingSphere:null!==e.boundingSphere?e.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(e=>({...e})),this._availableInstanceIds=e._availableInstanceIds.slice(),this._availableGeometryIds=e._availableGeometryIds.slice(),this._nextIndexStart=e._nextIndexStart,this._nextVertexStart=e._nextVertexStart,this._geometryCount=e._geometryCount,this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._indirectTexture=e._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),null!==this._colorsTexture&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,null!==this._colorsTexture&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,t,n,r,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const i=r.getIndex(),a=null===i?1:i.array.BYTES_PER_ELEMENT,o=this._instanceInfo,l=this._multiDrawStarts,c=this._multiDrawCounts,d=this._geometryInfo,u=this.perObjectFrustumCulled,h=this._indirectTexture,p=h.image.data,m=n.isArrayCamera?rv:nv;u&&!n.isArrayCamera&&(ev.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse).multiply(this.matrixWorld),nv.setFromProjectionMatrix(ev,n.coordinateSystem,n.reversedDepth));let f=0;if(this.sortObjects){ev.copy(this.matrixWorld).invert(),av.setFromMatrixPosition(n.matrixWorld).applyMatrix4(ev),ov.set(0,0,-1).transformDirection(n.matrixWorld).transformDirection(ev);for(let r=0,s=o.length;r<s;r++)if(o[r].visible&&o[r].active){const e=o[r].geometryIndex;this.getMatrixAt(r,ev),this.getBoundingSphereAt(e,iv).applyMatrix4(ev);let t=!1;if(u&&(t=!m.intersectsSphere(iv,n)),!t){const t=d[e],n=lv.subVectors(iv.center,av).dot(ov);cv.push(t.start,t.count,n,r)}}const e=cv.list,t=this.customSort;null===t?e.sort(s.transparent?Jx:Zx):t.call(this,e,n);for(let n=0,r=e.length;n<r;n++){const t=e[n];l[f]=t.start*a,c[f]=t.count,p[f]=t.index,f++}cv.reset()}else for(let g=0,x=o.length;g<x;g++)if(o[g].visible&&o[g].active){const e=o[g].geometryIndex;let t=!1;if(u&&(this.getMatrixAt(g,ev),this.getBoundingSphereAt(e,iv).applyMatrix4(ev),t=!m.intersectsSphere(iv,n)),!t){const t=d[e];l[f]=t.start*a,c[f]=t.count,p[f]=g,f++}}h.needsUpdate=!0,this._multiDrawCount=f,this._visibilityChanged=!1}onBeforeShadow(e,t,n,r,s,i){this.onBeforeRender(e,null,r,s,i)}}class fv extends Gf{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Hf(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const gv=new Gp,xv=new Gp,vv=new Ym,yv=new Km,bv=new Um,wv=new Gp,jv=new Gp;let Nv=class extends _f{constructor(e=new hg,t=new fv){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[0];for(let e=1,r=t.count;e<r;e++)gv.fromBufferAttribute(t,e-1),xv.fromBufferAttribute(t,e),n[e]=n[e-1],n[e]+=gv.distanceTo(xv);e.setAttribute("lineDistance",new sg(n,1))}return this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,i=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),bv.copy(n.boundingSphere),bv.applyMatrix4(r),bv.radius+=s,!1===e.ray.intersectsSphere(bv))return;vv.copy(r).invert(),yv.copy(e.ray).applyMatrix4(vv);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),o=a*a,l=this.isLineSegments?2:1,c=n.index,d=n.attributes.position;if(null!==c){const n=Math.max(0,i.start),r=Math.min(c.count,i.start+i.count);for(let s=n,i=r-1;s<i;s+=l){const n=c.getX(s),r=c.getX(s+1),i=_v(this,e,yv,o,n,r,s);i&&t.push(i)}if(this.isLineLoop){const s=c.getX(r-1),i=c.getX(n),a=_v(this,e,yv,o,s,i,r-1);a&&t.push(a)}}else{const n=Math.max(0,i.start),r=Math.min(d.count,i.start+i.count);for(let s=n,i=r-1;s<i;s+=l){const n=_v(this,e,yv,o,s,s+1,s);n&&t.push(n)}if(this.isLineLoop){const s=_v(this,e,yv,o,r-1,n,r-1);s&&t.push(s)}}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}};function _v(e,t,n,r,s,i,a){const o=e.geometry.attributes.position;gv.fromBufferAttribute(o,s),xv.fromBufferAttribute(o,i);if(n.distanceSqToSegment(gv,xv,wv,jv)>r)return;wv.applyMatrix4(e.matrixWorld);const l=t.ray.origin.distanceTo(wv);return l<t.near||l>t.far?void 0:{distance:l,point:jv.clone().applyMatrix4(e.matrixWorld),index:a,face:null,faceIndex:null,barycoord:null,object:e}}const Sv=new Gp,Mv=new Gp;class Cv extends Nv{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[];for(let e=0,r=t.count;e<r;e+=2)Sv.fromBufferAttribute(t,e),Mv.fromBufferAttribute(t,e+1),n[e]=0===e?0:n[e-1],n[e+1]=n[e]+Sv.distanceTo(Mv);e.setAttribute("lineDistance",new sg(n,1))}return this}}class Ev extends Nv{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class kv extends Gf{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Hf(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const Av=new Ym,Tv=new Km,Pv=new Um,Ov=new Gp;class Rv extends _f{constructor(e=new hg,t=new kv){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,i=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Pv.copy(n.boundingSphere),Pv.applyMatrix4(r),Pv.radius+=s,!1===e.ray.intersectsSphere(Pv))return;Av.copy(r).invert(),Tv.copy(e.ray).applyMatrix4(Av);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),o=a*a,l=n.index,c=n.attributes.position;if(null!==l){for(let n=Math.max(0,i.start),s=Math.min(l.count,i.start+i.count);n<s;n++){const s=l.getX(n);Ov.fromBufferAttribute(c,s),Iv(Ov,s,o,r,e,t,this)}}else{for(let n=Math.max(0,i.start),s=Math.min(c.count,i.start+i.count);n<s;n++)Ov.fromBufferAttribute(c,n),Iv(Ov,n,o,r,e,t,this)}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}function Iv(e,t,n,r,s,i,a){const o=Tv.distanceSqToPoint(e);if(o<n){const n=new Gp;Tv.closestPointToPoint(e,n),n.applyMatrix4(r);const l=s.ray.origin.distanceTo(n);if(l<s.near||l>s.far)return;i.push({distance:l,distanceToRay:Math.sqrt(o),point:n,index:t,face:null,faceIndex:null,barycoord:null,object:a})}}class Dv extends xm{constructor(e,t,n,r,s=1006,i=1006,a,o,l){super(e,t,n,r,s,i,a,o,l),this.isVideoTexture=!0,this.generateMipmaps=!1,this._requestVideoFrameCallbackId=0;const c=this;"requestVideoFrameCallback"in e&&(this._requestVideoFrameCallbackId=e.requestVideoFrameCallback(function t(){c.needsUpdate=!0,c._requestVideoFrameCallbackId=e.requestVideoFrameCallback(t)}))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;!1==="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}dispose(){0!==this._requestVideoFrameCallbackId&&this.source.data.cancelVideoFrameCallback(this._requestVideoFrameCallbackId),super.dispose()}}class Lv extends xm{constructor(e,t,n,r,s,i,a,o,l,c,d,u){super(null,i,a,o,l,c,r,s,d,u),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class Fv extends xm{constructor(e,t,n=1014,r,s,i,a=1003,o=1003,l,c=1026,d=1){if(c!==wh&&c!==jh)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");super({width:e,height:t,depth:d},r,s,i,a,o,c,n,l),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new pm(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return null!==this.compareFunction&&(t.compareFunction=this.compareFunction),t}}class zv extends xm{constructor(e=null){super(),this.sourceTexture=e,this.isExternalTexture=!0}copy(e){return super.copy(e),this.sourceTexture=e.sourceTexture,this}}class Bv extends hg{constructor(e=1,t=1,n=4,r=8,s=1){super(),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:n,radialSegments:r,heightSegments:s},t=Math.max(0,t),n=Math.max(1,Math.floor(n)),r=Math.max(3,Math.floor(r)),s=Math.max(1,Math.floor(s));const i=[],a=[],o=[],l=[],c=t/2,d=Math.PI/2*e,u=t,h=2*d+u,p=2*n+s,m=r+1,f=new Gp,g=new Gp;for(let x=0;x<=p;x++){let v=0,y=0,b=0,w=0;if(x<=n){const t=x/n,r=t*Math.PI/2;y=-c-e*Math.cos(r),b=e*Math.sin(r),w=-e*Math.cos(r),v=t*d}else if(x<=n+s){const r=(x-n)/s;y=r*t-c,b=e,w=0,v=d+r*u}else{const t=(x-n-s)/n,r=t*Math.PI/2;y=c+e*Math.sin(r),b=e*Math.cos(r),w=e*Math.sin(r),v=d+u+t*d}const j=Math.max(0,Math.min(1,v/h));let N=0;0===x?N=.5/r:x===p&&(N=-.5/r);for(let e=0;e<=r;e++){const t=e/r,n=t*Math.PI*2,s=Math.sin(n),i=Math.cos(n);g.x=-b*i,g.y=y,g.z=b*s,a.push(g.x,g.y,g.z),f.set(-b*i,w,b*s),f.normalize(),o.push(f.x,f.y,f.z),l.push(t+N,j)}if(x>0){const e=(x-1)*m;for(let t=0;t<r;t++){const n=e+t,r=e+t+1,s=x*m+t,a=x*m+t+1;i.push(n,r,s),i.push(r,a,s)}}}this.setIndex(i),this.setAttribute("position",new sg(a,3)),this.setAttribute("normal",new sg(o,3)),this.setAttribute("uv",new sg(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Bv(e.radius,e.height,e.capSegments,e.radialSegments,e.heightSegments)}}class Uv extends hg{constructor(e=1,t=32,n=0,r=2*Math.PI){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},t=Math.max(3,t);const s=[],i=[],a=[],o=[],l=new Gp,c=new Wp;i.push(0,0,0),a.push(0,0,1),o.push(.5,.5);for(let d=0,u=3;d<=t;d++,u+=3){const s=n+d/t*r;l.x=e*Math.cos(s),l.y=e*Math.sin(s),i.push(l.x,l.y,l.z),a.push(0,0,1),c.x=(i[u]/e+1)/2,c.y=(i[u+1]/e+1)/2,o.push(c.x,c.y)}for(let d=1;d<=t;d++)s.push(d,d+1,0);this.setIndex(s),this.setAttribute("position",new sg(i,3)),this.setAttribute("normal",new sg(a,3)),this.setAttribute("uv",new sg(o,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Uv(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Vv extends hg{constructor(e=1,t=1,n=1,r=32,s=1,i=!1,a=0,o=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:s,openEnded:i,thetaStart:a,thetaLength:o};const l=this;r=Math.floor(r),s=Math.floor(s);const c=[],d=[],u=[],h=[];let p=0;const m=[],f=n/2;let g=0;function x(n){const s=p,i=new Wp,m=new Gp;let x=0;const v=!0===n?e:t,y=!0===n?1:-1;for(let e=1;e<=r;e++)d.push(0,f*y,0),u.push(0,y,0),h.push(.5,.5),p++;const b=p;for(let e=0;e<=r;e++){const t=e/r*o+a,n=Math.cos(t),s=Math.sin(t);m.x=v*s,m.y=f*y,m.z=v*n,d.push(m.x,m.y,m.z),u.push(0,y,0),i.x=.5*n+.5,i.y=.5*s*y+.5,h.push(i.x,i.y),p++}for(let e=0;e<r;e++){const t=s+e,r=b+e;!0===n?c.push(r,r+1,t):c.push(r+1,r,t),x+=3}l.addGroup(g,x,!0===n?1:2),g+=x}!function(){const i=new Gp,x=new Gp;let v=0;const y=(t-e)/n;for(let l=0;l<=s;l++){const c=[],g=l/s,v=g*(t-e)+e;for(let e=0;e<=r;e++){const t=e/r,s=t*o+a,l=Math.sin(s),m=Math.cos(s);x.x=v*l,x.y=-g*n+f,x.z=v*m,d.push(x.x,x.y,x.z),i.set(l,y,m).normalize(),u.push(i.x,i.y,i.z),h.push(t,1-g),c.push(p++)}m.push(c)}for(let n=0;n<r;n++)for(let r=0;r<s;r++){const i=m[r][n],a=m[r+1][n],o=m[r+1][n+1],l=m[r][n+1];(e>0||0!==r)&&(c.push(i,a,l),v+=3),(t>0||r!==s-1)&&(c.push(a,o,l),v+=3)}l.addGroup(g,v,0),g+=v}(),!1===i&&(e>0&&x(!0),t>0&&x(!1)),this.setIndex(c),this.setAttribute("position",new sg(d,3)),this.setAttribute("normal",new sg(u,3)),this.setAttribute("uv",new sg(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Vv(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Hv extends Vv{constructor(e=1,t=1,n=32,r=1,s=!1,i=0,a=2*Math.PI){super(0,e,t,n,r,s,i,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:s,thetaStart:i,thetaLength:a}}static fromJSON(e){return new Hv(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Wv extends hg{constructor(e=[],t=[],n=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r};const s=[],i=[];function a(e,t,n,r){const s=r+1,i=[];for(let a=0;a<=s;a++){i[a]=[];const r=e.clone().lerp(n,a/s),o=t.clone().lerp(n,a/s),l=s-a;for(let e=0;e<=l;e++)i[a][e]=0===e&&a===s?r:r.clone().lerp(o,e/l)}for(let a=0;a<s;a++)for(let e=0;e<2*(s-a)-1;e++){const t=Math.floor(e/2);e%2==0?(o(i[a][t+1]),o(i[a+1][t]),o(i[a][t])):(o(i[a][t+1]),o(i[a+1][t+1]),o(i[a+1][t]))}}function o(e){s.push(e.x,e.y,e.z)}function l(t,n){const r=3*t;n.x=e[r+0],n.y=e[r+1],n.z=e[r+2]}function c(e,t,n,r){r<0&&1===e.x&&(i[t]=e.x-1),0===n.x&&0===n.z&&(i[t]=r/2/Math.PI+.5)}function d(e){return Math.atan2(e.z,-e.x)}function u(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}!function(e){const n=new Gp,r=new Gp,s=new Gp;for(let i=0;i<t.length;i+=3)l(t[i+0],n),l(t[i+1],r),l(t[i+2],s),a(n,r,s,e)}(r),function(e){const t=new Gp;for(let n=0;n<s.length;n+=3)t.x=s[n+0],t.y=s[n+1],t.z=s[n+2],t.normalize().multiplyScalar(e),s[n+0]=t.x,s[n+1]=t.y,s[n+2]=t.z}(n),function(){const e=new Gp;for(let t=0;t<s.length;t+=3){e.x=s[t+0],e.y=s[t+1],e.z=s[t+2];const n=d(e)/2/Math.PI+.5,r=u(e)/Math.PI+.5;i.push(n,1-r)}(function(){const e=new Gp,t=new Gp,n=new Gp,r=new Gp,a=new Wp,o=new Wp,l=new Wp;for(let u=0,h=0;u<s.length;u+=9,h+=6){e.set(s[u+0],s[u+1],s[u+2]),t.set(s[u+3],s[u+4],s[u+5]),n.set(s[u+6],s[u+7],s[u+8]),a.set(i[h+0],i[h+1]),o.set(i[h+2],i[h+3]),l.set(i[h+4],i[h+5]),r.copy(e).add(t).add(n).divideScalar(3);const p=d(r);c(a,h+0,e,p),c(o,h+2,t,p),c(l,h+4,n,p)}})(),function(){for(let e=0;e<i.length;e+=6){const t=i[e+0],n=i[e+2],r=i[e+4],s=Math.max(t,n,r),a=Math.min(t,n,r);s>.9&&a<.1&&(t<.2&&(i[e+0]+=1),n<.2&&(i[e+2]+=1),r<.2&&(i[e+4]+=1))}}()}(),this.setAttribute("position",new sg(s,3)),this.setAttribute("normal",new sg(s.slice(),3)),this.setAttribute("uv",new sg(i,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Wv(e.vertices,e.indices,e.radius,e.details)}}class $v extends Wv{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,r=1/n;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new $v(e.radius,e.detail)}}const Gv=new Gp,qv=new Gp,Xv=new Gp,Kv=new Ff;class Yv extends hg{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},null!==e){const n=4,r=Math.pow(10,n),s=Math.cos(Ip*t),i=e.getIndex(),a=e.getAttribute("position"),o=i?i.count:a.count,l=[0,0,0],c=["a","b","c"],d=new Array(3),u={},h=[];for(let e=0;e<o;e+=3){i?(l[0]=i.getX(e),l[1]=i.getX(e+1),l[2]=i.getX(e+2)):(l[0]=e,l[1]=e+1,l[2]=e+2);const{a:t,b:n,c:o}=Kv;if(t.fromBufferAttribute(a,l[0]),n.fromBufferAttribute(a,l[1]),o.fromBufferAttribute(a,l[2]),Kv.getNormal(Xv),d[0]=`${Math.round(t.x*r)},${Math.round(t.y*r)},${Math.round(t.z*r)}`,d[1]=`${Math.round(n.x*r)},${Math.round(n.y*r)},${Math.round(n.z*r)}`,d[2]=`${Math.round(o.x*r)},${Math.round(o.y*r)},${Math.round(o.z*r)}`,d[0]!==d[1]&&d[1]!==d[2]&&d[2]!==d[0])for(let e=0;e<3;e++){const t=(e+1)%3,n=d[e],r=d[t],i=Kv[c[e]],a=Kv[c[t]],o=`${n}_${r}`,p=`${r}_${n}`;p in u&&u[p]?(Xv.dot(u[p].normal)<=s&&(h.push(i.x,i.y,i.z),h.push(a.x,a.y,a.z)),u[p]=null):o in u||(u[o]={index0:l[e],index1:l[t],normal:Xv.clone()})}}for(const e in u)if(u[e]){const{index0:t,index1:n}=u[e];Gv.fromBufferAttribute(a,t),qv.fromBufferAttribute(a,n),h.push(Gv.x,Gv.y,Gv.z),h.push(qv.x,qv.y,qv.z)}this.setAttribute("position",new sg(h,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}let Zv=class{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,r=this.getPoint(0),s=0;t.push(0);for(let i=1;i<=e;i++)n=this.getPoint(i/e),s+=n.distanceTo(r),t.push(s),r=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t=null){const n=this.getLengths();let r=0;const s=n.length;let i;i=t||e*n[s-1];let a,o=0,l=s-1;for(;o<=l;)if(r=Math.floor(o+(l-o)/2),a=n[r]-i,a<0)o=r+1;else{if(!(a>0)){l=r;break}l=r-1}if(r=l,n[r]===i)return r/(s-1);const c=n[r];return(r+(i-c)/(n[r+1]-c))/(s-1)}getTangent(e,t){const n=1e-4;let r=e-n,s=e+n;r<0&&(r=0),s>1&&(s=1);const i=this.getPoint(r),a=this.getPoint(s),o=t||(i.isVector2?new Wp:new Gp);return o.copy(a).sub(i).normalize(),o}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t=!1){const n=new Gp,r=[],s=[],i=[],a=new Gp,o=new Ym;for(let h=0;h<=e;h++){const t=h/e;r[h]=this.getTangentAt(t,new Gp)}s[0]=new Gp,i[0]=new Gp;let l=Number.MAX_VALUE;const c=Math.abs(r[0].x),d=Math.abs(r[0].y),u=Math.abs(r[0].z);c<=l&&(l=c,n.set(1,0,0)),d<=l&&(l=d,n.set(0,1,0)),u<=l&&n.set(0,0,1),a.crossVectors(r[0],n).normalize(),s[0].crossVectors(r[0],a),i[0].crossVectors(r[0],s[0]);for(let h=1;h<=e;h++){if(s[h]=s[h-1].clone(),i[h]=i[h-1].clone(),a.crossVectors(r[h-1],r[h]),a.length()>Number.EPSILON){a.normalize();const e=Math.acos(Fp(r[h-1].dot(r[h]),-1,1));s[h].applyMatrix4(o.makeRotationAxis(a,e))}i[h].crossVectors(r[h],s[h])}if(!0===t){let t=Math.acos(Fp(s[0].dot(s[e]),-1,1));t/=e,r[0].dot(a.crossVectors(s[0],s[e]))>0&&(t=-t);for(let n=1;n<=e;n++)s[n].applyMatrix4(o.makeRotationAxis(r[n],t*n)),i[n].crossVectors(r[n],s[n])}return{tangents:r,normals:s,binormals:i}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}};class Jv extends Zv{constructor(e=0,t=0,n=1,r=1,s=0,i=2*Math.PI,a=!1,o=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=i,this.aClockwise=a,this.aRotation=o}getPoint(e,t=new Wp){const n=t,r=2*Math.PI;let s=this.aEndAngle-this.aStartAngle;const i=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(s=i?0:r),!0!==this.aClockwise||i||(s===r?s=-r:s-=r);const a=this.aStartAngle+e*s;let o=this.aX+this.xRadius*Math.cos(a),l=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){const e=Math.cos(this.aRotation),t=Math.sin(this.aRotation),n=o-this.aX,r=l-this.aY;o=n*e-r*t+this.aX,l=n*t+r*e+this.aY}return n.set(o,l)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class Qv extends Jv{constructor(e,t,n,r,s,i){super(e,t,n,n,r,s,i),this.isArcCurve=!0,this.type="ArcCurve"}}function ey(){let e=0,t=0,n=0,r=0;function s(s,i,a,o){e=s,t=a,n=-3*s+3*i-2*a-o,r=2*s-2*i+a+o}return{initCatmullRom:function(e,t,n,r,i){s(t,n,i*(n-e),i*(r-t))},initNonuniformCatmullRom:function(e,t,n,r,i,a,o){let l=(t-e)/i-(n-e)/(i+a)+(n-t)/a,c=(n-t)/a-(r-t)/(a+o)+(r-n)/o;l*=a,c*=a,s(t,n,l,c)},calc:function(s){const i=s*s;return e+t*s+n*i+r*(i*s)}}}const ty=new Gp,ny=new ey,ry=new ey,sy=new ey;class iy extends Zv{constructor(e=[],t=!1,n="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=r}getPoint(e,t=new Gp){const n=t,r=this.points,s=r.length,i=(s-(this.closed?0:1))*e;let a,o,l=Math.floor(i),c=i-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/s)+1)*s:0===c&&l===s-1&&(l=s-2,c=1),this.closed||l>0?a=r[(l-1)%s]:(ty.subVectors(r[0],r[1]).add(r[0]),a=ty);const d=r[l%s],u=r[(l+1)%s];if(this.closed||l+2<s?o=r[(l+2)%s]:(ty.subVectors(r[s-1],r[s-2]).add(r[s-1]),o=ty),"centripetal"===this.curveType||"chordal"===this.curveType){const e="chordal"===this.curveType?.5:.25;let t=Math.pow(a.distanceToSquared(d),e),n=Math.pow(d.distanceToSquared(u),e),r=Math.pow(u.distanceToSquared(o),e);n<1e-4&&(n=1),t<1e-4&&(t=n),r<1e-4&&(r=n),ny.initNonuniformCatmullRom(a.x,d.x,u.x,o.x,t,n,r),ry.initNonuniformCatmullRom(a.y,d.y,u.y,o.y,t,n,r),sy.initNonuniformCatmullRom(a.z,d.z,u.z,o.z,t,n,r)}else"catmullrom"===this.curveType&&(ny.initCatmullRom(a.x,d.x,u.x,o.x,this.tension),ry.initCatmullRom(a.y,d.y,u.y,o.y,this.tension),sy.initCatmullRom(a.z,d.z,u.z,o.z,this.tension));return n.set(ny.calc(c),ry.calc(c),sy.calc(c)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new Gp).fromArray(n))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function ay(e,t,n,r,s){const i=.5*(r-t),a=.5*(s-n),o=e*e;return(2*n-2*r+i+a)*(e*o)+(-3*n+3*r-2*i-a)*o+i*e+n}function oy(e,t,n,r){return function(e,t){const n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,r)}function ly(e,t,n,r,s){return function(e,t){const n=1-e;return n*n*n*t}(e,t)+function(e,t){const n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,r)+function(e,t){return e*e*e*t}(e,s)}class cy extends Zv{constructor(e=new Wp,t=new Wp,n=new Wp,r=new Wp){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new Wp){const n=t,r=this.v0,s=this.v1,i=this.v2,a=this.v3;return n.set(ly(e,r.x,s.x,i.x,a.x),ly(e,r.y,s.y,i.y,a.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class dy extends Zv{constructor(e=new Gp,t=new Gp,n=new Gp,r=new Gp){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new Gp){const n=t,r=this.v0,s=this.v1,i=this.v2,a=this.v3;return n.set(ly(e,r.x,s.x,i.x,a.x),ly(e,r.y,s.y,i.y,a.y),ly(e,r.z,s.z,i.z,a.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class uy extends Zv{constructor(e=new Wp,t=new Wp){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Wp){const n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Wp){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class hy extends Zv{constructor(e=new Gp,t=new Gp){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new Gp){const n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Gp){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class py extends Zv{constructor(e=new Wp,t=new Wp,n=new Wp){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new Wp){const n=t,r=this.v0,s=this.v1,i=this.v2;return n.set(oy(e,r.x,s.x,i.x),oy(e,r.y,s.y,i.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class my extends Zv{constructor(e=new Gp,t=new Gp,n=new Gp){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new Gp){const n=t,r=this.v0,s=this.v1,i=this.v2;return n.set(oy(e,r.x,s.x,i.x),oy(e,r.y,s.y,i.y),oy(e,r.z,s.z,i.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class fy extends Zv{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Wp){const n=t,r=this.points,s=(r.length-1)*e,i=Math.floor(s),a=s-i,o=r[0===i?i:i-1],l=r[i],c=r[i>r.length-2?r.length-1:i+1],d=r[i>r.length-3?r.length-1:i+2];return n.set(ay(a,o.x,l.x,c.x,d.x),ay(a,o.y,l.y,c.y,d.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new Wp).fromArray(n))}return this}}var gy=Object.freeze({__proto__:null,ArcCurve:Qv,CatmullRomCurve3:iy,CubicBezierCurve:cy,CubicBezierCurve3:dy,EllipseCurve:Jv,LineCurve:uy,LineCurve3:hy,QuadraticBezierCurve:py,QuadraticBezierCurve3:my,SplineCurve:fy});class xy extends Zv{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const n=!0===e.isVector2?"LineCurve":"LineCurve3";this.curves.push(new gy[n](t,e))}return this}getPoint(e,t){const n=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=n){const e=r[s]-n,i=this.curves[s],a=i.getLength(),o=0===a?0:1-e/a;return i.getPointAt(o,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let r=0,s=this.curves;r<s.length;r++){const i=s[r],a=i.isEllipseCurve?2*e:i.isLineCurve||i.isLineCurve3?1:i.isSplineCurve?e*i.points.length:e,o=i.getPoints(a);for(let e=0;e<o.length;e++){const r=o[e];n&&n.equals(r)||(t.push(r),n=r)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push(n.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const n=this.curves[t];e.curves.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push((new gy[n.type]).fromJSON(n))}return this}}let vy=class extends xy{constructor(e){super(),this.type="Path",this.currentPoint=new Wp,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new uy(this.currentPoint.clone(),new Wp(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,r){const s=new py(this.currentPoint.clone(),new Wp(e,t),new Wp(n,r));return this.curves.push(s),this.currentPoint.set(n,r),this}bezierCurveTo(e,t,n,r,s,i){const a=new cy(this.currentPoint.clone(),new Wp(e,t),new Wp(n,r),new Wp(s,i));return this.curves.push(a),this.currentPoint.set(s,i),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new fy(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,r,s,i){const a=this.currentPoint.x,o=this.currentPoint.y;return this.absarc(e+a,t+o,n,r,s,i),this}absarc(e,t,n,r,s,i){return this.absellipse(e,t,n,n,r,s,i),this}ellipse(e,t,n,r,s,i,a,o){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+l,t+c,n,r,s,i,a,o),this}absellipse(e,t,n,r,s,i,a,o){const l=new Jv(e,t,n,r,s,i,a,o);if(this.curves.length>0){const e=l.getPoint(0);e.equals(this.currentPoint)||this.lineTo(e.x,e.y)}this.curves.push(l);const c=l.getPoint(1);return this.currentPoint.copy(c),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}},yy=class extends vy{constructor(e){super(e),this.uuid=Lp(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const n=this.holes[t];e.holes.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push((new vy).fromJSON(n))}return this}};function by(e,t,n=2){const r=t&&t.length,s=r?t[0]*n:e.length;let i=wy(e,0,s,n,!0);const a=[];if(!i||i.next===i.prev)return a;let o,l,c;if(r&&(i=function(e,t,n,r){const s=[];for(let i=0,a=t.length;i<a;i++){const n=wy(e,t[i]*r,i<a-1?t[i+1]*r:e.length,r,!1);n===n.next&&(n.steiner=!0),s.push(Py(n))}s.sort(Ey);for(let i=0;i<s.length;i++)n=ky(s[i],n);return n}(e,t,i,n)),e.length>80*n){o=1/0,l=1/0;let t=-1/0,r=-1/0;for(let i=n;i<s;i+=n){const n=e[i],s=e[i+1];n<o&&(o=n),s<l&&(l=s),n>t&&(t=n),s>r&&(r=s)}c=Math.max(t-o,r-l),c=0!==c?32767/c:0}return Ny(i,a,n,o,l,c,0),a}function wy(e,t,n,r,s){let i;if(s===function(e,t,n,r){let s=0;for(let i=t,a=n-r;i<n;i+=r)s+=(e[a]-e[i])*(e[i+1]+e[a+1]),a=i;return s}(e,t,n,r)>0)for(let a=t;a<n;a+=r)i=Hy(a/r|0,e[a],e[a+1],i);else for(let a=n-r;a>=t;a-=r)i=Hy(a/r|0,e[a],e[a+1],i);return i&&Ly(i,i.next)&&(Wy(i),i=i.next),i}function jy(e,t){if(!e)return e;t||(t=e);let n,r=e;do{if(n=!1,r.steiner||!Ly(r,r.next)&&0!==Dy(r.prev,r,r.next))r=r.next;else{if(Wy(r),r=t=r.prev,r===r.next)break;n=!0}}while(n||r!==t);return t}function Ny(e,t,n,r,s,i,a){if(!e)return;!a&&i&&function(e,t,n,r){let s=e;do{0===s.z&&(s.z=Ty(s.x,s.y,t,n,r)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next}while(s!==e);s.prevZ.nextZ=null,s.prevZ=null,function(e){let t,n=1;do{let r,s=e;e=null;let i=null;for(t=0;s;){t++;let a=s,o=0;for(let e=0;e<n&&(o++,a=a.nextZ,a);e++);let l=n;for(;o>0||l>0&&a;)0!==o&&(0===l||!a||s.z<=a.z)?(r=s,s=s.nextZ,o--):(r=a,a=a.nextZ,l--),i?i.nextZ=r:e=r,r.prevZ=i,i=r;s=a}i.nextZ=null,n*=2}while(t>1)}(s)}(e,r,s,i);let o=e;for(;e.prev!==e.next;){const l=e.prev,c=e.next;if(i?Sy(e,r,s,i):_y(e))t.push(l.i,e.i,c.i),Wy(e),e=c.next,o=c.next;else if((e=c)===o){a?1===a?Ny(e=My(jy(e),t),t,n,r,s,i,2):2===a&&Cy(e,t,n,r,s,i):Ny(jy(e),t,n,r,s,i,1);break}}}function _y(e){const t=e.prev,n=e,r=e.next;if(Dy(t,n,r)>=0)return!1;const s=t.x,i=n.x,a=r.x,o=t.y,l=n.y,c=r.y,d=Math.min(s,i,a),u=Math.min(o,l,c),h=Math.max(s,i,a),p=Math.max(o,l,c);let m=r.next;for(;m!==t;){if(m.x>=d&&m.x<=h&&m.y>=u&&m.y<=p&&Ry(s,o,i,l,a,c,m.x,m.y)&&Dy(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}function Sy(e,t,n,r){const s=e.prev,i=e,a=e.next;if(Dy(s,i,a)>=0)return!1;const o=s.x,l=i.x,c=a.x,d=s.y,u=i.y,h=a.y,p=Math.min(o,l,c),m=Math.min(d,u,h),f=Math.max(o,l,c),g=Math.max(d,u,h),x=Ty(p,m,t,n,r),v=Ty(f,g,t,n,r);let y=e.prevZ,b=e.nextZ;for(;y&&y.z>=x&&b&&b.z<=v;){if(y.x>=p&&y.x<=f&&y.y>=m&&y.y<=g&&y!==s&&y!==a&&Ry(o,d,l,u,c,h,y.x,y.y)&&Dy(y.prev,y,y.next)>=0)return!1;if(y=y.prevZ,b.x>=p&&b.x<=f&&b.y>=m&&b.y<=g&&b!==s&&b!==a&&Ry(o,d,l,u,c,h,b.x,b.y)&&Dy(b.prev,b,b.next)>=0)return!1;b=b.nextZ}for(;y&&y.z>=x;){if(y.x>=p&&y.x<=f&&y.y>=m&&y.y<=g&&y!==s&&y!==a&&Ry(o,d,l,u,c,h,y.x,y.y)&&Dy(y.prev,y,y.next)>=0)return!1;y=y.prevZ}for(;b&&b.z<=v;){if(b.x>=p&&b.x<=f&&b.y>=m&&b.y<=g&&b!==s&&b!==a&&Ry(o,d,l,u,c,h,b.x,b.y)&&Dy(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function My(e,t){let n=e;do{const r=n.prev,s=n.next.next;!Ly(r,s)&&Fy(r,n,n.next,s)&&Uy(r,s)&&Uy(s,r)&&(t.push(r.i,n.i,s.i),Wy(n),Wy(n.next),n=e=s),n=n.next}while(n!==e);return jy(n)}function Cy(e,t,n,r,s,i){let a=e;do{let e=a.next.next;for(;e!==a.prev;){if(a.i!==e.i&&Iy(a,e)){let o=Vy(a,e);return a=jy(a,a.next),o=jy(o,o.next),Ny(a,t,n,r,s,i,0),void Ny(o,t,n,r,s,i,0)}e=e.next}a=a.next}while(a!==e)}function Ey(e,t){let n=e.x-t.x;if(0===n&&(n=e.y-t.y,0===n)){n=(e.next.y-e.y)/(e.next.x-e.x)-(t.next.y-t.y)/(t.next.x-t.x)}return n}function ky(e,t){const n=function(e,t){let n=t;const r=e.x,s=e.y;let i,a=-1/0;if(Ly(e,n))return n;do{if(Ly(e,n.next))return n.next;if(s<=n.y&&s>=n.next.y&&n.next.y!==n.y){const e=n.x+(s-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(e<=r&&e>a&&(a=e,i=n.x<n.next.x?n:n.next,e===r))return i}n=n.next}while(n!==t);if(!i)return null;const o=i,l=i.x,c=i.y;let d=1/0;n=i;do{if(r>=n.x&&n.x>=l&&r!==n.x&&Oy(s<c?r:a,s,l,c,s<c?a:r,s,n.x,n.y)){const t=Math.abs(s-n.y)/(r-n.x);Uy(n,e)&&(t<d||t===d&&(n.x>i.x||n.x===i.x&&Ay(i,n)))&&(i=n,d=t)}n=n.next}while(n!==o);return i}(e,t);if(!n)return t;const r=Vy(n,e);return jy(r,r.next),jy(n,n.next)}function Ay(e,t){return Dy(e.prev,e,t.prev)<0&&Dy(t.next,e,e.next)<0}function Ty(e,t,n,r,s){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*s|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*s|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Py(e){let t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function Oy(e,t,n,r,s,i,a,o){return(s-a)*(t-o)>=(e-a)*(i-o)&&(e-a)*(r-o)>=(n-a)*(t-o)&&(n-a)*(i-o)>=(s-a)*(r-o)}function Ry(e,t,n,r,s,i,a,o){return!(e===a&&t===o)&&Oy(e,t,n,r,s,i,a,o)}function Iy(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){let n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&Fy(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(Uy(e,t)&&Uy(t,e)&&function(e,t){let n=e,r=!1;const s=(e.x+t.x)/2,i=(e.y+t.y)/2;do{n.y>i!=n.next.y>i&&n.next.y!==n.y&&s<(n.next.x-n.x)*(i-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(Dy(e.prev,e,t.prev)||Dy(e,t.prev,t))||Ly(e,t)&&Dy(e.prev,e,e.next)>0&&Dy(t.prev,t,t.next)>0)}function Dy(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function Ly(e,t){return e.x===t.x&&e.y===t.y}function Fy(e,t,n,r){const s=By(Dy(e,t,n)),i=By(Dy(e,t,r)),a=By(Dy(n,r,e)),o=By(Dy(n,r,t));return s!==i&&a!==o||(!(0!==s||!zy(e,n,t))||(!(0!==i||!zy(e,r,t))||(!(0!==a||!zy(n,e,r))||!(0!==o||!zy(n,t,r)))))}function zy(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function By(e){return e>0?1:e<0?-1:0}function Uy(e,t){return Dy(e.prev,e,e.next)<0?Dy(e,t,e.next)>=0&&Dy(e,e.prev,t)>=0:Dy(e,t,e.prev)<0||Dy(e,e.next,t)<0}function Vy(e,t){const n=$y(e.i,e.x,e.y),r=$y(t.i,t.x,t.y),s=e.next,i=t.prev;return e.next=t,t.prev=e,n.next=s,s.prev=n,r.next=n,n.prev=r,i.next=r,r.prev=i,r}function Hy(e,t,n,r){const s=$y(e,t,n);return r?(s.next=r.next,s.prev=r,r.next.prev=s,r.next=s):(s.prev=s,s.next=s),s}function Wy(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function $y(e,t,n){return{i:e,x:t,y:n,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class Gy{static triangulate(e,t,n=2){return by(e,t,n)}}class qy{static area(e){const t=e.length;let n=0;for(let r=t-1,s=0;s<t;r=s++)n+=e[r].x*e[s].y-e[s].x*e[r].y;return.5*n}static isClockWise(e){return qy.area(e)<0}static triangulateShape(e,t){const n=[],r=[],s=[];Xy(e),Ky(n,e);let i=e.length;t.forEach(Xy);for(let o=0;o<t.length;o++)r.push(i),i+=t[o].length,Ky(n,t[o]);const a=Gy.triangulate(n,r);for(let o=0;o<a.length;o+=3)s.push(a.slice(o,o+3));return s}}function Xy(e){const t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function Ky(e,t){for(let n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}class Yy extends hg{constructor(e=new yy([new Wp(.5,.5),new Wp(-.5,.5),new Wp(-.5,-.5),new Wp(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,r=[],s=[];for(let a=0,o=e.length;a<o;a++){i(e[a])}function i(e){const i=[],a=void 0!==t.curveSegments?t.curveSegments:12,o=void 0!==t.steps?t.steps:1,l=void 0!==t.depth?t.depth:1;let c=void 0===t.bevelEnabled||t.bevelEnabled,d=void 0!==t.bevelThickness?t.bevelThickness:.2,u=void 0!==t.bevelSize?t.bevelSize:d-.1,h=void 0!==t.bevelOffset?t.bevelOffset:0,p=void 0!==t.bevelSegments?t.bevelSegments:3;const m=t.extrudePath,f=void 0!==t.UVGenerator?t.UVGenerator:Zy;let g,x,v,y,b,w=!1;m&&(g=m.getSpacedPoints(o),w=!0,c=!1,x=m.computeFrenetFrames(o,!1),v=new Gp,y=new Gp,b=new Gp),c||(p=0,d=0,u=0,h=0);const j=e.extractPoints(a);let N=j.shape;const _=j.holes;if(!qy.isClockWise(N)){N=N.reverse();for(let e=0,t=_.length;e<t;e++){const t=_[e];qy.isClockWise(t)&&(_[e]=t.reverse())}}function S(e){const t=1e-10*1e-10;let n=e[0];for(let r=1;r<=e.length;r++){const s=r%e.length,i=e[s],a=i.x-n.x,o=i.y-n.y,l=a*a+o*o,c=Math.max(Math.abs(i.x),Math.abs(i.y),Math.abs(n.x),Math.abs(n.y));l<=t*c*c?(e.splice(s,1),r--):n=i}}S(N),_.forEach(S);const M=_.length,C=N;for(let t=0;t<M;t++){const e=_[t];N=N.concat(e)}function E(e,t,n){return e.clone().addScaledVector(t,n)}const k=N.length;function A(e,t,n){let r,s,i;const a=e.x-t.x,o=e.y-t.y,l=n.x-e.x,c=n.y-e.y,d=a*a+o*o,u=a*c-o*l;if(Math.abs(u)>Number.EPSILON){const u=Math.sqrt(d),h=Math.sqrt(l*l+c*c),p=t.x-o/u,m=t.y+a/u,f=((n.x-c/h-p)*c-(n.y+l/h-m)*l)/(a*c-o*l);r=p+a*f-e.x,s=m+o*f-e.y;const g=r*r+s*s;if(g<=2)return new Wp(r,s);i=Math.sqrt(g/2)}else{let e=!1;a>Number.EPSILON?l>Number.EPSILON&&(e=!0):a<-Number.EPSILON?l<-Number.EPSILON&&(e=!0):Math.sign(o)===Math.sign(c)&&(e=!0),e?(r=-o,s=a,i=Math.sqrt(d)):(r=a,s=o,i=Math.sqrt(d/2))}return new Wp(r/i,s/i)}const T=[];for(let t=0,n=C.length,r=n-1,s=t+1;t<n;t++,r++,s++)r===n&&(r=0),s===n&&(s=0),T[t]=A(C[t],C[r],C[s]);const P=[];let O,R,I=T.concat();for(let t=0,n=M;t<n;t++){const e=_[t];O=[];for(let t=0,n=e.length,r=n-1,s=t+1;t<n;t++,r++,s++)r===n&&(r=0),s===n&&(s=0),O[t]=A(e[t],e[r],e[s]);P.push(O),I=I.concat(O)}if(0===p)R=qy.triangulateShape(C,_);else{const e=[],t=[];for(let n=0;n<p;n++){const r=n/p,s=d*Math.cos(r*Math.PI/2),i=u*Math.sin(r*Math.PI/2)+h;for(let t=0,n=C.length;t<n;t++){const n=E(C[t],T[t],i);z(n.x,n.y,-s),0===r&&e.push(n)}for(let e=0,n=M;e<n;e++){const n=_[e];O=P[e];const a=[];for(let e=0,t=n.length;e<t;e++){const t=E(n[e],O[e],i);z(t.x,t.y,-s),0===r&&a.push(t)}0===r&&t.push(a)}}R=qy.triangulateShape(e,t)}const D=R.length,L=u+h;for(let t=0;t<k;t++){const e=c?E(N[t],I[t],L):N[t];w?(y.copy(x.normals[0]).multiplyScalar(e.x),v.copy(x.binormals[0]).multiplyScalar(e.y),b.copy(g[0]).add(y).add(v),z(b.x,b.y,b.z)):z(e.x,e.y,0)}for(let t=1;t<=o;t++)for(let e=0;e<k;e++){const n=c?E(N[e],I[e],L):N[e];w?(y.copy(x.normals[t]).multiplyScalar(n.x),v.copy(x.binormals[t]).multiplyScalar(n.y),b.copy(g[t]).add(y).add(v),z(b.x,b.y,b.z)):z(n.x,n.y,l/o*t)}for(let t=p-1;t>=0;t--){const e=t/p,n=d*Math.cos(e*Math.PI/2),r=u*Math.sin(e*Math.PI/2)+h;for(let t=0,s=C.length;t<s;t++){const e=E(C[t],T[t],r);z(e.x,e.y,l+n)}for(let t=0,s=_.length;t<s;t++){const e=_[t];O=P[t];for(let t=0,s=e.length;t<s;t++){const s=E(e[t],O[t],r);w?z(s.x,s.y+g[o-1].y,g[o-1].x+n):z(s.x,s.y,l+n)}}}function F(e,t){let n=e.length;for(;--n>=0;){const r=n;let s=n-1;s<0&&(s=e.length-1);for(let e=0,n=o+2*p;e<n;e++){const n=k*e,i=k*(e+1);U(t+r+n,t+s+n,t+s+i,t+r+i)}}}function z(e,t,n){i.push(e),i.push(t),i.push(n)}function B(e,t,s){V(e),V(t),V(s);const i=r.length/3,a=f.generateTopUV(n,r,i-3,i-2,i-1);H(a[0]),H(a[1]),H(a[2])}function U(e,t,s,i){V(e),V(t),V(i),V(t),V(s),V(i);const a=r.length/3,o=f.generateSideWallUV(n,r,a-6,a-3,a-2,a-1);H(o[0]),H(o[1]),H(o[3]),H(o[1]),H(o[2]),H(o[3])}function V(e){r.push(i[3*e+0]),r.push(i[3*e+1]),r.push(i[3*e+2])}function H(e){s.push(e.x),s.push(e.y)}!function(){const e=r.length/3;if(c){let e=0,t=k*e;for(let n=0;n<D;n++){const e=R[n];B(e[2]+t,e[1]+t,e[0]+t)}e=o+2*p,t=k*e;for(let n=0;n<D;n++){const e=R[n];B(e[0]+t,e[1]+t,e[2]+t)}}else{for(let e=0;e<D;e++){const t=R[e];B(t[2],t[1],t[0])}for(let e=0;e<D;e++){const t=R[e];B(t[0]+k*o,t[1]+k*o,t[2]+k*o)}}n.addGroup(e,r.length/3-e,0)}(),function(){const e=r.length/3;let t=0;F(C,t),t+=C.length;for(let n=0,r=_.length;n<r;n++){const e=_[n];F(e,t),t+=e.length}n.addGroup(e,r.length/3-e,1)}()}this.setAttribute("position",new sg(r,3)),this.setAttribute("uv",new sg(s,2)),this.computeVertexNormals()}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return function(e,t,n){if(n.shapes=[],Array.isArray(e))for(let r=0,s=e.length;r<s;r++){const t=e[r];n.shapes.push(t.uuid)}else n.shapes.push(e.uuid);n.options=Object.assign({},t),void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON());return n}(this.parameters.shapes,this.parameters.options,e)}static fromJSON(e,t){const n=[];for(let s=0,i=e.shapes.length;s<i;s++){const r=t[e.shapes[s]];n.push(r)}const r=e.options.extrudePath;return void 0!==r&&(e.options.extrudePath=(new gy[r.type]).fromJSON(r)),new Yy(n,e.options)}}const Zy={generateTopUV:function(e,t,n,r,s){const i=t[3*n],a=t[3*n+1],o=t[3*r],l=t[3*r+1],c=t[3*s],d=t[3*s+1];return[new Wp(i,a),new Wp(o,l),new Wp(c,d)]},generateSideWallUV:function(e,t,n,r,s,i){const a=t[3*n],o=t[3*n+1],l=t[3*n+2],c=t[3*r],d=t[3*r+1],u=t[3*r+2],h=t[3*s],p=t[3*s+1],m=t[3*s+2],f=t[3*i],g=t[3*i+1],x=t[3*i+2];return Math.abs(o-d)<Math.abs(a-c)?[new Wp(a,1-l),new Wp(c,1-u),new Wp(h,1-m),new Wp(f,1-x)]:[new Wp(o,1-l),new Wp(d,1-u),new Wp(p,1-m),new Wp(g,1-x)]}};class Jy extends Wv{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2;super([-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Jy(e.radius,e.detail)}}class Qy extends hg{constructor(e=[new Wp(0,-.5),new Wp(.5,0),new Wp(0,.5)],t=12,n=0,r=2*Math.PI){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t),r=Fp(r,0,2*Math.PI);const s=[],i=[],a=[],o=[],l=[],c=1/t,d=new Gp,u=new Wp,h=new Gp,p=new Gp,m=new Gp;let f=0,g=0;for(let x=0;x<=e.length-1;x++)switch(x){case 0:f=e[x+1].x-e[x].x,g=e[x+1].y-e[x].y,h.x=1*g,h.y=-f,h.z=0*g,m.copy(h),h.normalize(),o.push(h.x,h.y,h.z);break;case e.length-1:o.push(m.x,m.y,m.z);break;default:f=e[x+1].x-e[x].x,g=e[x+1].y-e[x].y,h.x=1*g,h.y=-f,h.z=0*g,p.copy(h),h.x+=m.x,h.y+=m.y,h.z+=m.z,h.normalize(),o.push(h.x,h.y,h.z),m.copy(p)}for(let x=0;x<=t;x++){const s=n+x*c*r,h=Math.sin(s),p=Math.cos(s);for(let n=0;n<=e.length-1;n++){d.x=e[n].x*h,d.y=e[n].y,d.z=e[n].x*p,i.push(d.x,d.y,d.z),u.x=x/t,u.y=n/(e.length-1),a.push(u.x,u.y);const r=o[3*n+0]*h,s=o[3*n+1],c=o[3*n+0]*p;l.push(r,s,c)}}for(let x=0;x<t;x++)for(let t=0;t<e.length-1;t++){const n=t+x*e.length,r=n,i=n+e.length,a=n+e.length+1,o=n+1;s.push(r,i,o),s.push(a,o,i)}this.setIndex(s),this.setAttribute("position",new sg(i,3)),this.setAttribute("uv",new sg(a,2)),this.setAttribute("normal",new sg(l,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Qy(e.points,e.segments,e.phiStart,e.phiLength)}}class eb extends Wv{constructor(e=1,t=0){super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new eb(e.radius,e.detail)}}class tb extends hg{constructor(e=1,t=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};const s=e/2,i=t/2,a=Math.floor(n),o=Math.floor(r),l=a+1,c=o+1,d=e/a,u=t/o,h=[],p=[],m=[],f=[];for(let g=0;g<c;g++){const e=g*u-i;for(let t=0;t<l;t++){const n=t*d-s;p.push(n,-e,0),m.push(0,0,1),f.push(t/a),f.push(1-g/o)}}for(let g=0;g<o;g++)for(let e=0;e<a;e++){const t=e+l*g,n=e+l*(g+1),r=e+1+l*(g+1),s=e+1+l*g;h.push(t,n,s),h.push(n,r,s)}this.setIndex(h),this.setAttribute("position",new sg(p,3)),this.setAttribute("normal",new sg(m,3)),this.setAttribute("uv",new sg(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new tb(e.width,e.height,e.widthSegments,e.heightSegments)}}class nb extends hg{constructor(e=.5,t=1,n=32,r=1,s=0,i=2*Math.PI){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:s,thetaLength:i},n=Math.max(3,n);const a=[],o=[],l=[],c=[];let d=e;const u=(t-e)/(r=Math.max(1,r)),h=new Gp,p=new Wp;for(let m=0;m<=r;m++){for(let e=0;e<=n;e++){const r=s+e/n*i;h.x=d*Math.cos(r),h.y=d*Math.sin(r),o.push(h.x,h.y,h.z),l.push(0,0,1),p.x=(h.x/t+1)/2,p.y=(h.y/t+1)/2,c.push(p.x,p.y)}d+=u}for(let m=0;m<r;m++){const e=m*(n+1);for(let t=0;t<n;t++){const r=t+e,s=r,i=r+n+1,o=r+n+2,l=r+1;a.push(s,i,l),a.push(i,o,l)}}this.setIndex(a),this.setAttribute("position",new sg(o,3)),this.setAttribute("normal",new sg(l,3)),this.setAttribute("uv",new sg(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new nb(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class rb extends hg{constructor(e=new yy([new Wp(0,.5),new Wp(-.5,-.5),new Wp(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],r=[],s=[],i=[];let a=0,o=0;if(!1===Array.isArray(e))l(e);else for(let c=0;c<e.length;c++)l(e[c]),this.addGroup(a,o,c),a+=o,o=0;function l(e){const a=r.length/3,l=e.extractPoints(t);let c=l.shape;const d=l.holes;!1===qy.isClockWise(c)&&(c=c.reverse());for(let t=0,n=d.length;t<n;t++){const e=d[t];!0===qy.isClockWise(e)&&(d[t]=e.reverse())}const u=qy.triangulateShape(c,d);for(let t=0,n=d.length;t<n;t++){const e=d[t];c=c.concat(e)}for(let t=0,n=c.length;t<n;t++){const e=c[t];r.push(e.x,e.y,0),s.push(0,0,1),i.push(e.x,e.y)}for(let t=0,r=u.length;t<r;t++){const e=u[t],r=e[0]+a,s=e[1]+a,i=e[2]+a;n.push(r,s,i),o+=3}}this.setIndex(n),this.setAttribute("position",new sg(r,3)),this.setAttribute("normal",new sg(s,3)),this.setAttribute("uv",new sg(i,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return function(e,t){if(t.shapes=[],Array.isArray(e))for(let n=0,r=e.length;n<r;n++){const r=e[n];t.shapes.push(r.uuid)}else t.shapes.push(e.uuid);return t}(this.parameters.shapes,e)}static fromJSON(e,t){const n=[];for(let r=0,s=e.shapes.length;r<s;r++){const s=t[e.shapes[r]];n.push(s)}return new rb(n,e.curveSegments)}}class sb extends hg{constructor(e=1,t=32,n=16,r=0,s=2*Math.PI,i=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:s,thetaStart:i,thetaLength:a},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const o=Math.min(i+a,Math.PI);let l=0;const c=[],d=new Gp,u=new Gp,h=[],p=[],m=[],f=[];for(let g=0;g<=n;g++){const h=[],x=g/n;let v=0;0===g&&0===i?v=.5/t:g===n&&o===Math.PI&&(v=-.5/t);for(let n=0;n<=t;n++){const o=n/t;d.x=-e*Math.cos(r+o*s)*Math.sin(i+x*a),d.y=e*Math.cos(i+x*a),d.z=e*Math.sin(r+o*s)*Math.sin(i+x*a),p.push(d.x,d.y,d.z),u.copy(d).normalize(),m.push(u.x,u.y,u.z),f.push(o+v,1-x),h.push(l++)}c.push(h)}for(let g=0;g<n;g++)for(let e=0;e<t;e++){const t=c[g][e+1],r=c[g][e],s=c[g+1][e],a=c[g+1][e+1];(0!==g||i>0)&&h.push(t,r,a),(g!==n-1||o<Math.PI)&&h.push(r,s,a)}this.setIndex(h),this.setAttribute("position",new sg(p,3)),this.setAttribute("normal",new sg(m,3)),this.setAttribute("uv",new sg(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new sb(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class ib extends Wv{constructor(e=1,t=0){super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new ib(e.radius,e.detail)}}class ab extends hg{constructor(e=1,t=.4,n=12,r=48,s=2*Math.PI){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:s},n=Math.floor(n),r=Math.floor(r);const i=[],a=[],o=[],l=[],c=new Gp,d=new Gp,u=new Gp;for(let h=0;h<=n;h++)for(let i=0;i<=r;i++){const p=i/r*s,m=h/n*Math.PI*2;d.x=(e+t*Math.cos(m))*Math.cos(p),d.y=(e+t*Math.cos(m))*Math.sin(p),d.z=t*Math.sin(m),a.push(d.x,d.y,d.z),c.x=e*Math.cos(p),c.y=e*Math.sin(p),u.subVectors(d,c).normalize(),o.push(u.x,u.y,u.z),l.push(i/r),l.push(h/n)}for(let h=1;h<=n;h++)for(let e=1;e<=r;e++){const t=(r+1)*h+e-1,n=(r+1)*(h-1)+e-1,s=(r+1)*(h-1)+e,a=(r+1)*h+e;i.push(t,n,a),i.push(n,s,a)}this.setIndex(i),this.setAttribute("position",new sg(a,3)),this.setAttribute("normal",new sg(o,3)),this.setAttribute("uv",new sg(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ab(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class ob extends hg{constructor(e=1,t=.4,n=64,r=8,s=2,i=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:s,q:i},n=Math.floor(n),r=Math.floor(r);const a=[],o=[],l=[],c=[],d=new Gp,u=new Gp,h=new Gp,p=new Gp,m=new Gp,f=new Gp,g=new Gp;for(let v=0;v<=n;++v){const a=v/n*s*Math.PI*2;x(a,s,i,e,h),x(a+.01,s,i,e,p),f.subVectors(p,h),g.addVectors(p,h),m.crossVectors(f,g),g.crossVectors(m,f),m.normalize(),g.normalize();for(let e=0;e<=r;++e){const s=e/r*Math.PI*2,i=-t*Math.cos(s),a=t*Math.sin(s);d.x=h.x+(i*g.x+a*m.x),d.y=h.y+(i*g.y+a*m.y),d.z=h.z+(i*g.z+a*m.z),o.push(d.x,d.y,d.z),u.subVectors(d,h).normalize(),l.push(u.x,u.y,u.z),c.push(v/n),c.push(e/r)}}for(let v=1;v<=n;v++)for(let e=1;e<=r;e++){const t=(r+1)*(v-1)+(e-1),n=(r+1)*v+(e-1),s=(r+1)*v+e,i=(r+1)*(v-1)+e;a.push(t,n,i),a.push(n,s,i)}function x(e,t,n,r,s){const i=Math.cos(e),a=Math.sin(e),o=n/t*e,l=Math.cos(o);s.x=r*(2+l)*.5*i,s.y=r*(2+l)*a*.5,s.z=r*Math.sin(o)*.5}this.setIndex(a),this.setAttribute("position",new sg(o,3)),this.setAttribute("normal",new sg(l,3)),this.setAttribute("uv",new sg(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ob(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class lb extends hg{constructor(e=new my(new Gp(-1,-1,0),new Gp(-1,1,0),new Gp(1,1,0)),t=64,n=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:s};const i=e.computeFrenetFrames(t,s);this.tangents=i.tangents,this.normals=i.normals,this.binormals=i.binormals;const a=new Gp,o=new Gp,l=new Wp;let c=new Gp;const d=[],u=[],h=[],p=[];function m(s){c=e.getPointAt(s/t,c);const l=i.normals[s],h=i.binormals[s];for(let e=0;e<=r;e++){const t=e/r*Math.PI*2,s=Math.sin(t),i=-Math.cos(t);o.x=i*l.x+s*h.x,o.y=i*l.y+s*h.y,o.z=i*l.z+s*h.z,o.normalize(),u.push(o.x,o.y,o.z),a.x=c.x+n*o.x,a.y=c.y+n*o.y,a.z=c.z+n*o.z,d.push(a.x,a.y,a.z)}}!function(){for(let e=0;e<t;e++)m(e);m(!1===s?t:0),function(){for(let e=0;e<=t;e++)for(let n=0;n<=r;n++)l.x=e/t,l.y=n/r,h.push(l.x,l.y)}(),function(){for(let e=1;e<=t;e++)for(let t=1;t<=r;t++){const n=(r+1)*(e-1)+(t-1),s=(r+1)*e+(t-1),i=(r+1)*e+t,a=(r+1)*(e-1)+t;p.push(n,s,a),p.push(s,i,a)}}()}(),this.setIndex(p),this.setAttribute("position",new sg(d,3)),this.setAttribute("normal",new sg(u,3)),this.setAttribute("uv",new sg(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new lb((new gy[e.path.type]).fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class cb extends hg{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},null!==e){const t=[],n=new Set,r=new Gp,s=new Gp;if(null!==e.index){const i=e.attributes.position,a=e.index;let o=e.groups;0===o.length&&(o=[{start:0,count:a.count,materialIndex:0}]);for(let e=0,l=o.length;e<l;++e){const l=o[e],c=l.start;for(let e=c,o=c+l.count;e<o;e+=3)for(let l=0;l<3;l++){const o=a.getX(e+l),c=a.getX(e+(l+1)%3);r.fromBufferAttribute(i,o),s.fromBufferAttribute(i,c),!0===db(r,s,n)&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}}else{const i=e.attributes.position;for(let e=0,a=i.count/3;e<a;e++)for(let o=0;o<3;o++){const a=3*e+o,l=3*e+(o+1)%3;r.fromBufferAttribute(i,a),s.fromBufferAttribute(i,l),!0===db(r,s,n)&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new sg(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function db(e,t,n){const r=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`,s=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`;return!0!==n.has(r)&&!0!==n.has(s)&&(n.add(r),n.add(s),!0)}var ub=Object.freeze({__proto__:null,BoxGeometry:Mg,CapsuleGeometry:Bv,CircleGeometry:Uv,ConeGeometry:Hv,CylinderGeometry:Vv,DodecahedronGeometry:$v,EdgesGeometry:Yv,ExtrudeGeometry:Yy,IcosahedronGeometry:Jy,LatheGeometry:Qy,OctahedronGeometry:eb,PlaneGeometry:tb,PolyhedronGeometry:Wv,RingGeometry:nb,ShapeGeometry:rb,SphereGeometry:sb,TetrahedronGeometry:ib,TorusGeometry:ab,TorusKnotGeometry:ob,TubeGeometry:lb,WireframeGeometry:cb});class hb extends Gf{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Hf(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class pb extends Tg{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class mb extends Gf{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Hf(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Hf(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Wp(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new of,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class fb extends mb{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Wp(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Fp(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Hf(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Hf(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Hf(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class gb extends Gf{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Hf(16777215),this.specular=new Hf(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Hf(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Wp(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new of,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class xb extends Gf{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Hf(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Hf(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Wp(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class vb extends Gf{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Wp(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class yb extends Gf{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Hf(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Hf(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Wp(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new of,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class bb extends Gf{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class wb extends Gf{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class jb extends Gf{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Hf(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Wp(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Nb extends fv{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function _b(e,t){return e&&e.constructor!==t?"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e):e}function Sb(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Mb(e){const t=e.length,n=new Array(t);for(let r=0;r!==t;++r)n[r]=r;return n.sort(function(t,n){return e[t]-e[n]}),n}function Cb(e,t,n){const r=e.length,s=new e.constructor(r);for(let i=0,a=0;a!==r;++i){const r=n[i]*t;for(let n=0;n!==t;++n)s[a++]=e[r+n]}return s}function Eb(e,t,n,r){let s=1,i=e[0];for(;void 0!==i&&void 0===i[r];)i=e[s++];if(void 0===i)return;let a=i[r];if(void 0!==a)if(Array.isArray(a))do{a=i[r],void 0!==a&&(t.push(i.time),n.push(...a)),i=e[s++]}while(void 0!==i);else if(void 0!==a.toArray)do{a=i[r],void 0!==a&&(t.push(i.time),a.toArray(n,n.length)),i=e[s++]}while(void 0!==i);else do{a=i[r],void 0!==a&&(t.push(i.time),n.push(a)),i=e[s++]}while(void 0!==i)}class kb{constructor(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,r=t[n],s=t[n-1];e:{t:{let i;n:{r:if(!(e<r)){for(let i=n+2;;){if(void 0===r){if(e<s)break r;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===i)break;if(s=r,r=t[++n],e<r)break t}i=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(n=2,s=a);for(let i=n-2;;){if(void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(n===i)break;if(r=s,s=t[--n-1],e>=s)break t}i=n,n=0;break n}break e}for(;n<i;){const r=n+i>>>1;e<t[r]?i=r:n=r+1}if(r=t[n],s=t[n-1],void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,s,r)}return this.interpolate_(n,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,s=e*r;for(let i=0;i!==r;++i)t[i]=n[s+i];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Ab extends kb{constructor(e,t,n,r){super(e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:cp,endingEnd:cp}}intervalChanged_(e,t,n){const r=this.parameterPositions;let s=e-2,i=e+1,a=r[s],o=r[i];if(void 0===a)switch(this.getSettings_().endingStart){case dp:s=e,a=2*t-n;break;case up:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=n}if(void 0===o)switch(this.getSettings_().endingEnd){case dp:i=e,o=2*n-t;break;case up:i=1,o=n+r[1]-r[0];break;default:i=e-1,o=t}const l=.5*(n-t),c=this.valueSize;this._weightPrev=l/(t-a),this._weightNext=l/(o-n),this._offsetPrev=s*c,this._offsetNext=i*c}interpolate_(e,t,n,r){const s=this.resultBuffer,i=this.sampleValues,a=this.valueSize,o=e*a,l=o-a,c=this._offsetPrev,d=this._offsetNext,u=this._weightPrev,h=this._weightNext,p=(n-t)/(r-t),m=p*p,f=m*p,g=-u*f+2*u*m-u*p,x=(1+u)*f+(-1.5-2*u)*m+(-.5+u)*p+1,v=(-1-h)*f+(1.5+h)*m+.5*p,y=h*f-h*m;for(let b=0;b!==a;++b)s[b]=g*i[c+b]+x*i[l+b]+v*i[o+b]+y*i[d+b];return s}}class Tb extends kb{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const s=this.resultBuffer,i=this.sampleValues,a=this.valueSize,o=e*a,l=o-a,c=(n-t)/(r-t),d=1-c;for(let u=0;u!==a;++u)s[u]=i[l+u]*d+i[o+u]*c;return s}}class Pb extends kb{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Ob{constructor(e,t,n,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=_b(t,this.TimeBufferType),this.values=_b(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:_b(e.times,Array),values:_b(e.values,Array)};const t=e.getInterpolation();t!==e.DefaultInterpolation&&(n.interpolation=t)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new Pb(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Tb(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Ab(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case ap:t=this.InterpolantFactoryMethodDiscrete;break;case op:t=this.InterpolantFactoryMethodLinear;break;case lp:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(t);this.setInterpolation(this.DefaultInterpolation)}return this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return ap;case this.InterpolantFactoryMethodLinear:return op;case this.InterpolantFactoryMethodSmooth:return lp}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){const n=this.times,r=n.length;let s=0,i=r-1;for(;s!==r&&n[s]<e;)++s;for(;-1!==i&&n[i]>t;)--i;if(++i,0!==s||i!==r){s>=i&&(i=Math.max(i,1),s=i-1);const e=this.getValueSize();this.times=n.slice(s,i),this.values=this.values.slice(s*e,i*e)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(e=!1);const n=this.times,r=this.values,s=n.length;0===s&&(e=!1);let i=null;for(let a=0;a!==s;a++){const t=n[a];if("number"==typeof t&&isNaN(t)){e=!1;break}if(null!==i&&i>t){e=!1;break}i=t}if(void 0!==r&&Sb(r))for(let a=0,o=r.length;a!==o;++a){const t=r[a];if(isNaN(t)){e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),r=this.getInterpolation()===lp,s=e.length-1;let i=1;for(let a=1;a<s;++a){let s=!1;const o=e[a];if(o!==e[a+1]&&(1!==a||o!==e[0]))if(r)s=!0;else{const e=a*n,r=e-n,i=e+n;for(let a=0;a!==n;++a){const n=t[e+a];if(n!==t[r+a]||n!==t[i+a]){s=!0;break}}}if(s){if(a!==i){e[i]=e[a];const r=a*n,s=i*n;for(let e=0;e!==n;++e)t[s+e]=t[r+e]}++i}}if(s>0){e[i]=e[s];for(let e=s*n,r=i*n,a=0;a!==n;++a)t[r+a]=t[e+a];++i}return i!==e.length?(this.times=e.slice(0,i),this.values=t.slice(0,i*n)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}Ob.prototype.ValueTypeName="",Ob.prototype.TimeBufferType=Float32Array,Ob.prototype.ValueBufferType=Float32Array,Ob.prototype.DefaultInterpolation=op;class Rb extends Ob{constructor(e,t,n){super(e,t,n)}}Rb.prototype.ValueTypeName="bool",Rb.prototype.ValueBufferType=Array,Rb.prototype.DefaultInterpolation=ap,Rb.prototype.InterpolantFactoryMethodLinear=void 0,Rb.prototype.InterpolantFactoryMethodSmooth=void 0;class Ib extends Ob{constructor(e,t,n,r){super(e,t,n,r)}}Ib.prototype.ValueTypeName="color";class Db extends Ob{constructor(e,t,n,r){super(e,t,n,r)}}Db.prototype.ValueTypeName="number";class Lb extends kb{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const s=this.resultBuffer,i=this.sampleValues,a=this.valueSize,o=(n-t)/(r-t);let l=e*a;for(let c=l+a;l!==c;l+=4)$p.slerpFlat(s,0,i,l-a,i,l,o);return s}}class Fb extends Ob{constructor(e,t,n,r){super(e,t,n,r)}InterpolantFactoryMethodLinear(e){return new Lb(this.times,this.values,this.getValueSize(),e)}}Fb.prototype.ValueTypeName="quaternion",Fb.prototype.InterpolantFactoryMethodSmooth=void 0;class zb extends Ob{constructor(e,t,n){super(e,t,n)}}zb.prototype.ValueTypeName="string",zb.prototype.ValueBufferType=Array,zb.prototype.DefaultInterpolation=ap,zb.prototype.InterpolantFactoryMethodLinear=void 0,zb.prototype.InterpolantFactoryMethodSmooth=void 0;class Bb extends Ob{constructor(e,t,n,r){super(e,t,n,r)}}Bb.prototype.ValueTypeName="vector";class Ub{constructor(e="",t=-1,n=[],r=2500){this.name=e,this.tracks=n,this.duration=t,this.blendMode=r,this.uuid=Lp(),this.userData={},this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,r=1/(e.fps||1);for(let i=0,a=n.length;i!==a;++i)t.push(Vb(n[i]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s.userData=JSON.parse(e.userData||"{}"),s}static toJSON(e){const t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode,userData:JSON.stringify(e.userData)};for(let s=0,i=n.length;s!==i;++s)t.push(Ob.toJSON(n[s]));return r}static CreateFromMorphTargetSequence(e,t,n,r){const s=t.length,i=[];for(let a=0;a<s;a++){let e=[],o=[];e.push((a+s-1)%s,a,(a+1)%s),o.push(0,1,0);const l=Mb(e);e=Cb(e,1,l),o=Cb(o,1,l),r||0!==e[0]||(e.push(s),o.push(o[0])),i.push(new Db(".morphTargetInfluences["+t[a].name+"]",e,o).scale(1/n))}return new this(e,-1,i)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const t=e;n=t.geometry&&t.geometry.animations||t.animations}for(let r=0;r<n.length;r++)if(n[r].name===t)return n[r];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,o=e.length;a<o;a++){const t=e[a],n=t.name.match(s);if(n&&n.length>1){const e=n[1];let s=r[e];s||(r[e]=s=[]),s.push(t)}}const i=[];for(const a in r)i.push(this.CreateFromMorphTargetSequence(a,r[a],t,n));return i}static parseAnimation(e,t){if(!e)return null;const n=function(e,t,n,r,s){if(0!==n.length){const i=[],a=[];Eb(n,i,a,r),0!==i.length&&s.push(new e(t,i,a))}},r=[],s=e.name||"default",i=e.fps||30,a=e.blendMode;let o=e.length||-1;const l=e.hierarchy||[];for(let c=0;c<l.length;c++){const e=l[c].keys;if(e&&0!==e.length)if(e[0].morphTargets){const t={};let n;for(n=0;n<e.length;n++)if(e[n].morphTargets)for(let r=0;r<e[n].morphTargets.length;r++)t[e[n].morphTargets[r]]=-1;for(const s in t){const t=[],i=[];for(let r=0;r!==e[n].morphTargets.length;++r){const r=e[n];t.push(r.time),i.push(r.morphTarget===s?1:0)}r.push(new Db(".morphTargetInfluence["+s+"]",t,i))}o=t.length*i}else{const s=".bones["+t[c].name+"]";n(Bb,s+".position",e,"pos",r),n(Fb,s+".quaternion",e,"rot",r),n(Bb,s+".scale",e,"scl",r)}}if(0===r.length)return null;return new this(s,o,r,a)}resetDuration(){let e=0;for(let t=0,n=this.tracks.length;t!==n;++t){const n=this.tracks[t];e=Math.max(e,n.times[n.times.length-1])}return this.duration=e,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let n=0;n<this.tracks.length;n++)e.push(this.tracks[n].clone());const t=new this.constructor(this.name,this.duration,e,this.blendMode);return t.userData=JSON.parse(JSON.stringify(this.userData)),t}toJSON(){return this.constructor.toJSON(this)}}function Vb(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Db;case"vector":case"vector2":case"vector3":case"vector4":return Bb;case"color":return Ib;case"quaternion":return Fb;case"bool":case"boolean":return Rb;case"string":return zb}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){const t=[],n=[];Eb(e.keys,t,n,"value"),e.times=t,e.values=n}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}const Hb={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};class Wb{constructor(e,t,n){const r=this;let s,i=!1,a=0,o=0;const l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.abortController=new AbortController,this.itemStart=function(e){o++,!1===i&&void 0!==r.onStart&&r.onStart(e,a,o),i=!0},this.itemEnd=function(e){a++,void 0!==r.onProgress&&r.onProgress(e,a,o),a===o&&(i=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(e){void 0!==r.onError&&r.onError(e)},this.resolveURL=function(e){return s?s(e):e},this.setURLModifier=function(e){return s=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){const t=l.indexOf(e);return-1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(let t=0,n=l.length;t<n;t+=2){const n=l[t],r=l[t+1];if(n.global&&(n.lastIndex=0),n.test(e))return r}return null},this.abort=function(){return this.abortController.abort(),this.abortController=new AbortController,this}}}const $b=new Wb;class Gb{constructor(e){this.manager=void 0!==e?e:$b,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(r,s){n.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}abort(){return this}}Gb.DEFAULT_MATERIAL_NAME="__DEFAULT";const qb={};let Xb=class extends Error{constructor(e,t){super(e),this.response=t}};class Kb extends Gb{constructor(e){super(e),this.mimeType="",this.responseType="",this._abortController=new AbortController}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Hb.get(`file:${e}`);if(void 0!==s)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(void 0!==qb[e])return void qb[e].push({onLoad:t,onProgress:n,onError:r});qb[e]=[],qb[e].push({onLoad:t,onProgress:n,onError:r});const i=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin",signal:"function"==typeof AbortSignal.any?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal}),a=this.mimeType,o=this.responseType;fetch(i).then(t=>{if(200===t.status||0===t.status){if(t.status,"undefined"==typeof ReadableStream||void 0===t.body||void 0===t.body.getReader)return t;const n=qb[e],r=t.body.getReader(),s=t.headers.get("X-File-Size")||t.headers.get("Content-Length"),i=s?parseInt(s):0,a=0!==i;let o=0;const l=new ReadableStream({start(e){!function t(){r.read().then(({done:r,value:s})=>{if(r)e.close();else{o+=s.byteLength;const r=new ProgressEvent("progress",{lengthComputable:a,loaded:o,total:i});for(let e=0,t=n.length;e<t;e++){const t=n[e];t.onProgress&&t.onProgress(r)}e.enqueue(s),t()}},t=>{e.error(t)})}()}});return new Response(l)}throw new Xb(`fetch for "${t.url}" responded with ${t.status}: ${t.statusText}`,t)}).then(e=>{switch(o){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"document":return e.text().then(e=>(new DOMParser).parseFromString(e,a));case"json":return e.json();default:if(""===a)return e.text();{const t=/charset="?([^;"\s]*)"?/i.exec(a),n=t&&t[1]?t[1].toLowerCase():void 0,r=new TextDecoder(n);return e.arrayBuffer().then(e=>r.decode(e))}}}).then(t=>{Hb.add(`file:${e}`,t);const n=qb[e];delete qb[e];for(let e=0,r=n.length;e<r;e++){const r=n[e];r.onLoad&&r.onLoad(t)}}).catch(t=>{const n=qb[e];if(void 0===n)throw this.manager.itemError(e),t;delete qb[e];for(let e=0,r=n.length;e<r;e++){const r=n[e];r.onError&&r.onError(t)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}const Yb=new WeakMap;class Zb extends Gb{constructor(e){super(e)}load(e,t,n,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,i=Hb.get(`image:${e}`);if(void 0!==i){if(!0===i.complete)s.manager.itemStart(e),setTimeout(function(){t&&t(i),s.manager.itemEnd(e)},0);else{let e=Yb.get(i);void 0===e&&(e=[],Yb.set(i,e)),e.push({onLoad:t,onError:r})}return i}const a=em("img");function o(){c(),t&&t(this);const n=Yb.get(this)||[];for(let e=0;e<n.length;e++){const t=n[e];t.onLoad&&t.onLoad(this)}Yb.delete(this),s.manager.itemEnd(e)}function l(t){c(),r&&r(t),Hb.remove(`image:${e}`);const n=Yb.get(this)||[];for(let e=0;e<n.length;e++){const r=n[e];r.onError&&r.onError(t)}Yb.delete(this),s.manager.itemError(e),s.manager.itemEnd(e)}function c(){a.removeEventListener("load",o,!1),a.removeEventListener("error",l,!1)}return a.addEventListener("load",o,!1),a.addEventListener("error",l,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),Hb.add(`image:${e}`,a),s.manager.itemStart(e),a.src=e,a}}class Jb extends _f{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Hf(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),void 0!==this.target&&(t.object.target=this.target.uuid),t}}class Qb extends Jb{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(_f.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Hf(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const ew=new Ym,tw=new Gp,nw=new Gp;class rw{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Wp(512,512),this.mapType=ih,this.map=null,this.mapPass=null,this.matrix=new Ym,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Gx,this._frameExtents=new Wp(1,1),this._viewportCount=1,this._viewports=[new vm(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;tw.setFromMatrixPosition(e.matrixWorld),t.position.copy(tw),nw.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(nw),t.updateMatrixWorld(),ew.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(ew,t.coordinateSystem,t.reversedDepth),t.reversedDepth?n.set(.5,0,0,.5,0,.5,0,.5,0,0,1,0,0,0,0,1):n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(ew)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 1!==this.intensity&&(e.intensity=this.intensity),0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class sw extends rw{constructor(){super(new Dg(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(e){const t=this.camera,n=2*Dp*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height*this.aspect,s=e.distance||t.far;n===t.fov&&r===t.aspect&&s===t.far||(t.fov=n,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class iw extends Jb{constructor(e,t,n=0,r=Math.PI/3,s=0,i=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(_f.DEFAULT_UP),this.updateMatrix(),this.target=new _f,this.distance=n,this.angle=r,this.penumbra=s,this.decay=i,this.map=null,this.shadow=new sw}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const aw=new Ym,ow=new Gp,lw=new Gp;class cw extends rw{constructor(){super(new Dg(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Wp(4,2),this._viewportCount=6,this._viewports=[new vm(2,1,1,1),new vm(0,1,1,1),new vm(3,1,1,1),new vm(1,1,1,1),new vm(3,0,1,1),new vm(1,0,1,1)],this._cubeDirections=[new Gp(1,0,0),new Gp(-1,0,0),new Gp(0,0,1),new Gp(0,0,-1),new Gp(0,1,0),new Gp(0,-1,0)],this._cubeUps=[new Gp(0,1,0),new Gp(0,1,0),new Gp(0,1,0),new Gp(0,1,0),new Gp(0,0,1),new Gp(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,r=this.matrix,s=e.distance||n.far;s!==n.far&&(n.far=s,n.updateProjectionMatrix()),ow.setFromMatrixPosition(e.matrixWorld),n.position.copy(ow),lw.copy(n.position),lw.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(lw),n.updateMatrixWorld(),r.makeTranslation(-ow.x,-ow.y,-ow.z),aw.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(aw,n.coordinateSystem,n.reversedDepth)}}class dw extends Jb{constructor(e,t,n=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new cw}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class uw extends Pg{constructor(e=-1,t=1,n=1,r=-1,s=.1,i=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=s,this.far=i,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,s,i){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=i,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=n-e,i=n+e,a=r+t,o=r-t;if(null!==this.view&&this.view.enabled){const e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=e*this.view.offsetX,i=s+e*this.view.width,a-=t*this.view.offsetY,o=a-t*this.view.height}this.projectionMatrix.makeOrthographic(s,i,a,o,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}class hw extends rw{constructor(){super(new uw(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class pw extends Jb{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(_f.DEFAULT_UP),this.updateMatrix(),this.target=new _f,this.shadow=new hw}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class mw extends Jb{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class fw extends Jb{constructor(e,t,n=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class gw{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new Gp)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,r=e.y,s=e.z,i=this.coefficients;return t.copy(i[0]).multiplyScalar(.282095),t.addScaledVector(i[1],.488603*r),t.addScaledVector(i[2],.488603*s),t.addScaledVector(i[3],.488603*n),t.addScaledVector(i[4],n*r*1.092548),t.addScaledVector(i[5],r*s*1.092548),t.addScaledVector(i[6],.315392*(3*s*s-1)),t.addScaledVector(i[7],n*s*1.092548),t.addScaledVector(i[8],.546274*(n*n-r*r)),t}getIrradianceAt(e,t){const n=e.x,r=e.y,s=e.z,i=this.coefficients;return t.copy(i[0]).multiplyScalar(.886227),t.addScaledVector(i[1],1.023328*r),t.addScaledVector(i[2],1.023328*s),t.addScaledVector(i[3],1.023328*n),t.addScaledVector(i[4],.858086*n*r),t.addScaledVector(i[5],.858086*r*s),t.addScaledVector(i[6],.743125*s*s-.247708),t.addScaledVector(i[7],.858086*n*s),t.addScaledVector(i[8],.429043*(n*n-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].fromArray(e,t+3*r);return this}toArray(e=[],t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].toArray(e,t+3*r);return e}static getBasisAt(e,t){const n=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*n*s,t[8]=.546274*(n*n-r*r)}}class xw extends Jb{constructor(e=new gw,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class vw extends Gb{constructor(e){super(e),this.textures={}}load(e,t,n,r){const s=this,i=new Kb(s.manager);i.setPath(s.path),i.setRequestHeader(s.requestHeader),i.setWithCredentials(s.withCredentials),i.load(e,function(n){try{t(s.parse(JSON.parse(n)))}catch(i){r&&r(i),s.manager.itemError(e)}},n,r)}parse(e){const t=this.textures;function n(e){return t[e],t[e]}const r=this.createMaterialFromType(e.type);if(void 0!==e.uuid&&(r.uuid=e.uuid),void 0!==e.name&&(r.name=e.name),void 0!==e.color&&void 0!==r.color&&r.color.setHex(e.color),void 0!==e.roughness&&(r.roughness=e.roughness),void 0!==e.metalness&&(r.metalness=e.metalness),void 0!==e.sheen&&(r.sheen=e.sheen),void 0!==e.sheenColor&&(r.sheenColor=(new Hf).setHex(e.sheenColor)),void 0!==e.sheenRoughness&&(r.sheenRoughness=e.sheenRoughness),void 0!==e.emissive&&void 0!==r.emissive&&r.emissive.setHex(e.emissive),void 0!==e.specular&&void 0!==r.specular&&r.specular.setHex(e.specular),void 0!==e.specularIntensity&&(r.specularIntensity=e.specularIntensity),void 0!==e.specularColor&&void 0!==r.specularColor&&r.specularColor.setHex(e.specularColor),void 0!==e.shininess&&(r.shininess=e.shininess),void 0!==e.clearcoat&&(r.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(r.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.dispersion&&(r.dispersion=e.dispersion),void 0!==e.iridescence&&(r.iridescence=e.iridescence),void 0!==e.iridescenceIOR&&(r.iridescenceIOR=e.iridescenceIOR),void 0!==e.iridescenceThicknessRange&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),void 0!==e.transmission&&(r.transmission=e.transmission),void 0!==e.thickness&&(r.thickness=e.thickness),void 0!==e.attenuationDistance&&(r.attenuationDistance=e.attenuationDistance),void 0!==e.attenuationColor&&void 0!==r.attenuationColor&&r.attenuationColor.setHex(e.attenuationColor),void 0!==e.anisotropy&&(r.anisotropy=e.anisotropy),void 0!==e.anisotropyRotation&&(r.anisotropyRotation=e.anisotropyRotation),void 0!==e.fog&&(r.fog=e.fog),void 0!==e.flatShading&&(r.flatShading=e.flatShading),void 0!==e.blending&&(r.blending=e.blending),void 0!==e.combine&&(r.combine=e.combine),void 0!==e.side&&(r.side=e.side),void 0!==e.shadowSide&&(r.shadowSide=e.shadowSide),void 0!==e.opacity&&(r.opacity=e.opacity),void 0!==e.transparent&&(r.transparent=e.transparent),void 0!==e.alphaTest&&(r.alphaTest=e.alphaTest),void 0!==e.alphaHash&&(r.alphaHash=e.alphaHash),void 0!==e.depthFunc&&(r.depthFunc=e.depthFunc),void 0!==e.depthTest&&(r.depthTest=e.depthTest),void 0!==e.depthWrite&&(r.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(r.colorWrite=e.colorWrite),void 0!==e.blendSrc&&(r.blendSrc=e.blendSrc),void 0!==e.blendDst&&(r.blendDst=e.blendDst),void 0!==e.blendEquation&&(r.blendEquation=e.blendEquation),void 0!==e.blendSrcAlpha&&(r.blendSrcAlpha=e.blendSrcAlpha),void 0!==e.blendDstAlpha&&(r.blendDstAlpha=e.blendDstAlpha),void 0!==e.blendEquationAlpha&&(r.blendEquationAlpha=e.blendEquationAlpha),void 0!==e.blendColor&&void 0!==r.blendColor&&r.blendColor.setHex(e.blendColor),void 0!==e.blendAlpha&&(r.blendAlpha=e.blendAlpha),void 0!==e.stencilWriteMask&&(r.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(r.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(r.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(r.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(r.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(r.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(r.stencilZPass=e.stencilZPass),void 0!==e.stencilWrite&&(r.stencilWrite=e.stencilWrite),void 0!==e.wireframe&&(r.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(r.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(r.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(r.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(r.rotation=e.rotation),void 0!==e.linewidth&&(r.linewidth=e.linewidth),void 0!==e.dashSize&&(r.dashSize=e.dashSize),void 0!==e.gapSize&&(r.gapSize=e.gapSize),void 0!==e.scale&&(r.scale=e.scale),void 0!==e.polygonOffset&&(r.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(r.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(r.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.dithering&&(r.dithering=e.dithering),void 0!==e.alphaToCoverage&&(r.alphaToCoverage=e.alphaToCoverage),void 0!==e.premultipliedAlpha&&(r.premultipliedAlpha=e.premultipliedAlpha),void 0!==e.forceSinglePass&&(r.forceSinglePass=e.forceSinglePass),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.toneMapped&&(r.toneMapped=e.toneMapped),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.vertexColors&&("number"==typeof e.vertexColors?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),void 0!==e.uniforms)for(const s in e.uniforms){const t=e.uniforms[s];switch(r.uniforms[s]={},t.type){case"t":r.uniforms[s].value=n(t.value);break;case"c":r.uniforms[s].value=(new Hf).setHex(t.value);break;case"v2":r.uniforms[s].value=(new Wp).fromArray(t.value);break;case"v3":r.uniforms[s].value=(new Gp).fromArray(t.value);break;case"v4":r.uniforms[s].value=(new vm).fromArray(t.value);break;case"m3":r.uniforms[s].value=(new Kp).fromArray(t.value);break;case"m4":r.uniforms[s].value=(new Ym).fromArray(t.value);break;default:r.uniforms[s].value=t.value}}if(void 0!==e.defines&&(r.defines=e.defines),void 0!==e.vertexShader&&(r.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(r.fragmentShader=e.fragmentShader),void 0!==e.glslVersion&&(r.glslVersion=e.glslVersion),void 0!==e.extensions)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(void 0!==e.lights&&(r.lights=e.lights),void 0!==e.clipping&&(r.clipping=e.clipping),void 0!==e.size&&(r.size=e.size),void 0!==e.sizeAttenuation&&(r.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(r.map=n(e.map)),void 0!==e.matcap&&(r.matcap=n(e.matcap)),void 0!==e.alphaMap&&(r.alphaMap=n(e.alphaMap)),void 0!==e.bumpMap&&(r.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(r.bumpScale=e.bumpScale),void 0!==e.normalMap&&(r.normalMap=n(e.normalMap)),void 0!==e.normalMapType&&(r.normalMapType=e.normalMapType),void 0!==e.normalScale){let t=e.normalScale;!1===Array.isArray(t)&&(t=[t,t]),r.normalScale=(new Wp).fromArray(t)}return void 0!==e.displacementMap&&(r.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(r.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(r.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(r.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(r.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(r.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(r.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(r.specularMap=n(e.specularMap)),void 0!==e.specularIntensityMap&&(r.specularIntensityMap=n(e.specularIntensityMap)),void 0!==e.specularColorMap&&(r.specularColorMap=n(e.specularColorMap)),void 0!==e.envMap&&(r.envMap=n(e.envMap)),void 0!==e.envMapRotation&&r.envMapRotation.fromArray(e.envMapRotation),void 0!==e.envMapIntensity&&(r.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(r.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(r.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(r.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(r.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(r.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(r.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(r.gradientMap=n(e.gradientMap)),void 0!==e.clearcoatMap&&(r.clearcoatMap=n(e.clearcoatMap)),void 0!==e.clearcoatRoughnessMap&&(r.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),void 0!==e.clearcoatNormalMap&&(r.clearcoatNormalMap=n(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(r.clearcoatNormalScale=(new Wp).fromArray(e.clearcoatNormalScale)),void 0!==e.iridescenceMap&&(r.iridescenceMap=n(e.iridescenceMap)),void 0!==e.iridescenceThicknessMap&&(r.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),void 0!==e.transmissionMap&&(r.transmissionMap=n(e.transmissionMap)),void 0!==e.thicknessMap&&(r.thicknessMap=n(e.thicknessMap)),void 0!==e.anisotropyMap&&(r.anisotropyMap=n(e.anisotropyMap)),void 0!==e.sheenColorMap&&(r.sheenColorMap=n(e.sheenColorMap)),void 0!==e.sheenRoughnessMap&&(r.sheenRoughnessMap=n(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return vw.createMaterialFromType(e)}static createMaterialFromType(e){return new{ShadowMaterial:hb,SpriteMaterial:Yg,RawShaderMaterial:pb,ShaderMaterial:Tg,PointsMaterial:kv,MeshPhysicalMaterial:fb,MeshStandardMaterial:mb,MeshPhongMaterial:gb,MeshToonMaterial:xb,MeshNormalMaterial:vb,MeshLambertMaterial:yb,MeshDepthMaterial:bb,MeshDistanceMaterial:wb,MeshBasicMaterial:qf,MeshMatcapMaterial:jb,LineDashedMaterial:Nb,LineBasicMaterial:fv,Material:Gf}[e]}}class yw{static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}static resolveURL(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class bw extends hg{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class ww extends Gb{constructor(e){super(e)}load(e,t,n,r){const s=this,i=new Kb(s.manager);i.setPath(s.path),i.setRequestHeader(s.requestHeader),i.setWithCredentials(s.withCredentials),i.load(e,function(n){try{t(s.parse(JSON.parse(n)))}catch(i){r&&r(i),s.manager.itemError(e)}},n,r)}parse(e){const t={},n={};function r(e,r){if(void 0!==t[r])return t[r];const s=e.interleavedBuffers[r],i=function(e,t){if(void 0!==n[t])return n[t];const r=e.arrayBuffers,s=r[t],i=new Uint32Array(s).buffer;return n[t]=i,i}(e,s.buffer),a=Qp(s.type,i),o=new qg(a,s.stride);return o.uuid=s.uuid,t[r]=o,o}const s=e.isInstancedBufferGeometry?new bw:new hg,i=e.data.index;if(void 0!==i){const e=Qp(i.type,i.array);s.setIndex(new tg(e,1))}const a=e.data.attributes;for(const d in a){const t=a[d];let n;if(t.isInterleavedBufferAttribute){const s=r(e.data,t.data);n=new Kg(s,t.itemSize,t.offset,t.normalized)}else{const e=Qp(t.type,t.array);n=new(t.isInstancedBufferAttribute?Ax:tg)(e,t.itemSize,t.normalized)}void 0!==t.name&&(n.name=t.name),void 0!==t.usage&&n.setUsage(t.usage),s.setAttribute(d,n)}const o=e.data.morphAttributes;if(o)for(const d in o){const t=o[d],n=[];for(let s=0,i=t.length;s<i;s++){const i=t[s];let a;if(i.isInterleavedBufferAttribute){const t=r(e.data,i.data);a=new Kg(t,i.itemSize,i.offset,i.normalized)}else{const e=Qp(i.type,i.array);a=new tg(e,i.itemSize,i.normalized)}void 0!==i.name&&(a.name=i.name),n.push(a)}s.morphAttributes[d]=n}e.data.morphTargetsRelative&&(s.morphTargetsRelative=!0);const l=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==l)for(let d=0,u=l.length;d!==u;++d){const e=l[d];s.addGroup(e.start,e.count,e.materialIndex)}const c=e.data.boundingSphere;return void 0!==c&&(s.boundingSphere=(new Um).fromJSON(c)),e.name&&(s.name=e.name),e.userData&&(s.userData=e.userData),s}}const jw={UVMapping:Wu,CubeReflectionMapping:$u,CubeRefractionMapping:Gu,EquirectangularReflectionMapping:qu,EquirectangularRefractionMapping:Xu,CubeUVReflectionMapping:Ku},Nw={RepeatWrapping:Yu,ClampToEdgeWrapping:Zu,MirroredRepeatWrapping:Ju},_w={NearestFilter:Qu,NearestMipmapNearestFilter:eh,NearestMipmapLinearFilter:th,LinearFilter:nh,LinearMipmapNearestFilter:rh,LinearMipmapLinearFilter:sh},Sw=new WeakMap;let Mw,Cw=class{static getContext(){return void 0===Mw&&(Mw=new(window.AudioContext||window.webkitAudioContext)),Mw}static setContext(e){Mw=e}};const Ew=new Ym,kw=new Ym,Aw=new Ym;class Tw extends Dg{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}class Pw{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=performance.now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}const Ow=new Gp,Rw=new $p,Iw=new Gp,Dw=new Gp,Lw=new Gp;class Fw extends _f{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(!0===this.isPlaying)return;if(!1===this.hasPlaybackControl)return;this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(!1!==this.hasPlaybackControl)return this._progress=0,null!==this.source&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(!1!==this._connected){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,!0===this.isPlaying&&void 0!==this.source.detune&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return!1!==this.hasPlaybackControl&&this.loop}setLoop(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),"buffer"!==e.sourceType||(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice()),this}clone(e){return new this.constructor(this.listener).copy(this,e)}}const zw=new Gp,Bw=new $p,Uw=new Gp,Vw=new Gp;class Hw{constructor(e,t,n){let r,s,i;switch(this.binding=e,this.valueSize=n,t){case"quaternion":r=this._slerp,s=this._slerpAdditive,i=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,i=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:r=this._lerp,s=this._lerpAdditive,i=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=i,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,r=this.valueSize,s=e*r+r;let i=this.cumulativeWeight;if(0===i){for(let e=0;e!==r;++e)n[s+e]=n[e];i=t}else{i+=t;const e=t/i;this._mixBufferRegion(n,s,0,e,r)}this.cumulativeWeight=i}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,r=e*t+t,s=this.cumulativeWeight,i=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const e=t*this._origIndex;this._mixBufferRegion(n,r,e,1-s,t)}i>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(let o=t,l=t+t;o!==l;++o)if(n[o]!==n[o+t]){a.setValue(n,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,r=n*this._origIndex;e.getValue(t,r);for(let s=n,i=r;s!==i;++s)t[s]=t[r+s%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=3*this.valueSize;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,r,s){if(r>=.5)for(let i=0;i!==s;++i)e[t+i]=e[n+i]}_slerp(e,t,n,r){$p.slerpFlat(e,t,e,t,e,n,r)}_slerpAdditive(e,t,n,r,s){const i=this._workIndex*s;$p.multiplyQuaternionsFlat(e,i,e,t,e,n),$p.slerpFlat(e,t,e,t,e,i,r)}_lerp(e,t,n,r,s){const i=1-r;for(let a=0;a!==s;++a){const s=t+a;e[s]=e[s]*i+e[n+a]*r}}_lerpAdditive(e,t,n,r,s){for(let i=0;i!==s;++i){const s=t+i;e[s]=e[s]+e[n+i]*r}}}const Ww="\\[\\]\\.:\\/",$w=new RegExp("["+Ww+"]","g"),Gw="[^"+Ww+"]",qw="[^"+Ww.replace("\\.","")+"]",Xw=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",Gw)+/(WCOD+)?/.source.replace("WCOD",qw)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Gw)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Gw)+"$"),Kw=["material","materials","bones","map"];class Yw{constructor(e,t,n){this.path=t,this.parsedPath=n||Yw.parseTrackName(t),this.node=Yw.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new Yw.Composite(e,t,n):new Yw(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace($w,"")}static parseTrackName(e){const t=Xw.exec(e);if(null===t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){const e=n.nodeName.substring(r+1);-1!==Kw.indexOf(e)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=e)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){const n=function(e){for(let r=0;r<e.length;r++){const s=e[r];if(s.name===t||s.uuid===t)return s;const i=n(s.children);if(i)return i}return null},r=n(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)e[t++]=n[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)n[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=Yw.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return;if(n){let r=t.objectIndex;switch(n){case"materials":if(!e.material)return;if(!e.material.materials)return;e=e.material.materials;break;case"bones":if(!e.skeleton)return;e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===r){r=t;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material)return;if(!e.material.map)return;e=e.material.map;break;default:if(void 0===e[n])return;e=e[n]}if(void 0!==r){if(void 0===e[r])return;e=e[r]}}const i=e[r];if(void 0===i){t.nodeName;return}let a=this.Versioning.None;this.targetObject=e,!0===e.isMaterial?a=this.Versioning.NeedsUpdate:!0===e.isObject3D&&(a=this.Versioning.MatrixWorldNeedsUpdate);let o=this.BindingType.Direct;if(void 0!==s){if("morphTargetInfluences"===r){if(!e.geometry)return;if(!e.geometry.morphAttributes)return;void 0!==e.morphTargetDictionary[s]&&(s=e.morphTargetDictionary[s])}o=this.BindingType.ArrayElement,this.resolvedProperty=i,this.propertyIndex=s}else void 0!==i.fromArray&&void 0!==i.toArray?(o=this.BindingType.HasFromToArray,this.resolvedProperty=i):Array.isArray(i)?(o=this.BindingType.EntireArray,this.resolvedProperty=i):this.propertyName=r;this.getValue=this.GetterByBindingType[o],this.setValue=this.SetterByBindingTypeAndVersioning[o][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Yw.Composite=class{constructor(e,t,n){const r=n||Yw.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=n.length;r!==s;++r)n[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}},Yw.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Yw.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Yw.prototype.GetterByBindingType=[Yw.prototype._getValue_direct,Yw.prototype._getValue_array,Yw.prototype._getValue_arrayElement,Yw.prototype._getValue_toArray],Yw.prototype.SetterByBindingTypeAndVersioning=[[Yw.prototype._setValue_direct,Yw.prototype._setValue_direct_setNeedsUpdate,Yw.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Yw.prototype._setValue_array,Yw.prototype._setValue_array_setNeedsUpdate,Yw.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Yw.prototype._setValue_arrayElement,Yw.prototype._setValue_arrayElement_setNeedsUpdate,Yw.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Yw.prototype._setValue_fromArray,Yw.prototype._setValue_fromArray_setNeedsUpdate,Yw.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Zw{constructor(e,t,n=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=r;const s=t.tracks,i=s.length,a=new Array(i),o={endingStart:cp,endingEnd:cp};for(let l=0;l!==i;++l){const e=s[l].createInterpolant(null);a[l]=e,e.settings=o}this._interpolantSettings=o,this._interpolants=a,this._propertyBindings=new Array(i),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n=!1){if(e.fadeOut(t),this.fadeIn(t),!0===n){const n=this._clip.duration,r=e._clip.duration,s=r/n,i=n/r;e.warp(1,s,t),this.warp(i,1,t)}return this}crossFadeTo(e,t,n=!1){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const r=this._mixer,s=r.time,i=this.timeScale;let a=this._timeScaleInterpolant;null===a&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const o=a.parameterPositions,l=a.sampleValues;return o[0]=s,o[1]=s+n,l[0]=e/i,l[1]=t/i,this}stopWarping(){const e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,r){if(!this.enabled)return void this._updateWeight(e);const s=this._startTime;if(null!==s){const r=(e-s)*n;r<0||0===n?t=0:(this._startTime=null,t=n*r)}t*=this._updateTimeScale(e);const i=this._updateTime(t),a=this._updateWeight(e);if(a>0){const e=this._interpolants,t=this._propertyBindings;if(this.blendMode===pp)for(let n=0,r=e.length;n!==r;++n)e[n].evaluate(i),t[n].accumulateAdditive(a);else for(let n=0,s=e.length;n!==s;++n)e[n].evaluate(i),t[n].accumulate(r,a)}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(null!==n){const r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(null!==n){t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let r=this.time+e,s=this._loopCount;const i=2202===n;if(0===e)return-1===s||!i||1&~s?r:t-r;if(2200===n){-1===s&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else{if(!(r<0)){this.time=r;break e}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===s&&(e>=0?(s=0,this._setEndings(!0,0===this.repetitions,i)):this._setEndings(0===this.repetitions,!0,i)),r>=t||r<0){const n=Math.floor(r/t);r-=t*n,s+=Math.abs(n);const a=this.repetitions-s;if(a<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===a){const t=e<0;this._setEndings(t,!t,i)}else this._setEndings(!1,!1,i);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n})}}else this.time=r;if(i&&!(1&~s))return t-r}return r}_setEndings(e,t,n){const r=this._interpolantSettings;n?(r.endingStart=dp,r.endingEnd=dp):(r.endingStart=e?this.zeroSlopeAtStart?dp:cp:up,r.endingEnd=t?this.zeroSlopeAtEnd?dp:cp:up)}_scheduleFading(e,t,n){const r=this._mixer,s=r.time;let i=this._weightInterpolant;null===i&&(i=r._lendControlInterpolant(),this._weightInterpolant=i);const a=i.parameterPositions,o=i.sampleValues;return a[0]=s,o[0]=t,a[1]=s+e,o[1]=n,this}}const Jw=new Float32Array(1);class Qw{constructor(e){this.value=e}clone(){return new Qw(void 0===this.value.clone?this.value:this.value.clone())}}let ej=0;const tj=new Ym;class nj{constructor(e,t,n=0,r=1/0){this.ray=new Km(e,t),this.near=n,this.far=r,this.camera=null,this.layers=new lf,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera&&(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t)}setFromXRController(e){return tj.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(tj),this}intersectObject(e,t=!0,n=[]){return sj(e,this,n,t),n.sort(rj),n}intersectObjects(e,t=!0,n=[]){for(let r=0,s=e.length;r<s;r++)sj(e[r],this,n,t);return n.sort(rj),n}}function rj(e,t){return e.distance-t.distance}function sj(e,t,n,r){let s=!0;if(e.layers.test(t.layers)){!1===e.raycast(t,n)&&(s=!1)}if(!0===s&&!0===r){const r=e.children;for(let e=0,s=r.length;e<s;e++)sj(r[e],t,n,!0)}}function ij(){!1===this._document.hidden&&this.reset()}class aj{constructor(e,t,n,r){aj.prototype.isMatrix2=!0,this.elements=[1,0,0,1],void 0!==e&&this.set(e,t,n,r)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let n=0;n<4;n++)this.elements[n]=e[n+t];return this}set(e,t,n,r){const s=this.elements;return s[0]=e,s[2]=t,s[1]=n,s[3]=r,this}}const oj=new Wp;const lj=new Gp,cj=new Gp,dj=new Gp,uj=new Gp,hj=new Gp,pj=new Gp,mj=new Gp;const fj=new Gp;const gj=new Gp,xj=new Ym,vj=new Ym;function yj(e){const t=[];!0===e.isBone&&t.push(e);for(let n=0;n<e.children.length;n++)t.push(...yj(e.children[n]));return t}const bj=new Gp,wj=new Hf,jj=new Hf;const Nj=new Gp,_j=new Gp,Sj=new Gp;const Mj=new Gp,Cj=new Pg;function Ej(e,t,n,r,s,i,a){Mj.set(s,i,a).unproject(r);const o=t[e];if(void 0!==o){const e=n.getAttribute("position");for(let t=0,n=o.length;t<n;t++)e.setXYZ(o[t],Mj.x,Mj.y,Mj.z)}}const kj=new Nm;const Aj=new Gp;let Tj,Pj;function Oj(e,t,n,r){const s=function(e){switch(e){case ih:case ah:return{byteLength:1,components:1};case lh:case oh:case hh:return{byteLength:2,components:1};case ph:case mh:return{byteLength:2,components:4};case dh:case ch:case uh:return{byteLength:4,components:1};case gh:case xh:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${e}.`)}(r);switch(n){case vh:return e*t;case Nh:case _h:return e*t/s.components*s.byteLength;case Sh:case Mh:return e*t*2/s.components*s.byteLength;case yh:return e*t*3/s.components*s.byteLength;case bh:case Ch:return e*t*4/s.components*s.byteLength;case Eh:case kh:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*8;case Ah:case Th:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*16;case Oh:case Ih:return Math.max(e,16)*Math.max(t,8)/4;case Ph:case Rh:return Math.max(e,8)*Math.max(t,8)/2;case Dh:case Lh:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*8;case Fh:case zh:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*16;case Bh:return Math.floor((e+4)/5)*Math.floor((t+3)/4)*16;case Uh:return Math.floor((e+4)/5)*Math.floor((t+4)/5)*16;case Vh:return Math.floor((e+5)/6)*Math.floor((t+4)/5)*16;case Hh:return Math.floor((e+5)/6)*Math.floor((t+5)/6)*16;case Wh:return Math.floor((e+7)/8)*Math.floor((t+4)/5)*16;case $h:return Math.floor((e+7)/8)*Math.floor((t+5)/6)*16;case Gh:return Math.floor((e+7)/8)*Math.floor((t+7)/8)*16;case qh:return Math.floor((e+9)/10)*Math.floor((t+4)/5)*16;case Xh:return Math.floor((e+9)/10)*Math.floor((t+5)/6)*16;case Kh:return Math.floor((e+9)/10)*Math.floor((t+7)/8)*16;case Yh:return Math.floor((e+9)/10)*Math.floor((t+9)/10)*16;case Zh:return Math.floor((e+11)/12)*Math.floor((t+9)/10)*16;case Jh:return Math.floor((e+11)/12)*Math.floor((t+11)/12)*16;case Qh:case ep:case tp:return Math.ceil(e/4)*Math.ceil(t/4)*16;case np:case rp:return Math.ceil(e/4)*Math.ceil(t/4)*8;case sp:case ip:return Math.ceil(e/4)*Math.ceil(t/4)*16}throw new Error(`Unable to determine texture byte length for ${n} format.`)}
/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */
function Rj(){let e=null,t=!1,n=null,r=null;function s(t,i){n(t,i),r=e.requestAnimationFrame(s)}return{start:function(){!0!==t&&null!==n&&(r=e.requestAnimationFrame(s),t=!0)},stop:function(){e.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function Ij(e){const t=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),t.get(e)},remove:function(n){n.isInterleavedBufferAttribute&&(n=n.data);const r=t.get(n);r&&(e.deleteBuffer(r.buffer),t.delete(n))},update:function(n,r){if(n.isInterleavedBufferAttribute&&(n=n.data),n.isGLBufferAttribute){const e=t.get(n);return void((!e||e.version<n.version)&&t.set(n,{buffer:n.buffer,type:n.type,bytesPerElement:n.elementSize,version:n.version}))}const s=t.get(n);if(void 0===s)t.set(n,function(t,n){const r=t.array,s=t.usage,i=r.byteLength,a=e.createBuffer();let o;if(e.bindBuffer(n,a),e.bufferData(n,r,s),t.onUploadCallback(),r instanceof Float32Array)o=e.FLOAT;else if("undefined"!=typeof Float16Array&&r instanceof Float16Array)o=e.HALF_FLOAT;else if(r instanceof Uint16Array)o=t.isFloat16BufferAttribute?e.HALF_FLOAT:e.UNSIGNED_SHORT;else if(r instanceof Int16Array)o=e.SHORT;else if(r instanceof Uint32Array)o=e.UNSIGNED_INT;else if(r instanceof Int32Array)o=e.INT;else if(r instanceof Int8Array)o=e.BYTE;else if(r instanceof Uint8Array)o=e.UNSIGNED_BYTE;else{if(!(r instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+r);o=e.UNSIGNED_BYTE}return{buffer:a,type:o,bytesPerElement:r.BYTES_PER_ELEMENT,version:t.version,size:i}}(n,r));else if(s.version<n.version){if(s.size!==n.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");!function(t,n,r){const s=n.array,i=n.updateRanges;if(e.bindBuffer(r,t),0===i.length)e.bufferSubData(r,0,s);else{i.sort((e,t)=>e.start-t.start);let t=0;for(let e=1;e<i.length;e++){const n=i[t],r=i[e];r.start<=n.start+n.count+1?n.count=Math.max(n.count,r.start+r.count-n.start):(++t,i[t]=r)}i.length=t+1;for(let n=0,a=i.length;n<a;n++){const t=i[n];e.bufferSubData(r,t.start*s.BYTES_PER_ELEMENT,s,t.start,t.count)}n.clearUpdateRanges()}n.onUploadCallback()}(s.buffer,n,r),s.version=n.version}}}}"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:hu}})),"undefined"!=typeof window&&(window.__THREE__||(window.__THREE__=hu));const Dj={alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\t#ifdef ALPHA_TO_COVERAGE\n\tdiffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );\n\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\tif ( diffuseColor.a < alphaTest ) discard;\n\t#endif\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_CLEARCOAT ) \n\t\tclearcoatSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_SHEEN ) \n\t\tsheenSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",batching_pars_vertex:"#ifdef USE_BATCHING\n\t#if ! defined( GL_ANGLE_multi_draw )\n\t#define gl_DrawID _gl_DrawID\n\tuniform int _gl_DrawID;\n\t#endif\n\tuniform highp sampler2D batchingTexture;\n\tuniform highp usampler2D batchingIdTexture;\n\tmat4 getBatchingMatrix( const in float i ) {\n\t\tint size = textureSize( batchingTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n\tfloat getIndirectIndex( const in int i ) {\n\t\tint size = textureSize( batchingIdTexture, 0 ).x;\n\t\tint x = i % size;\n\t\tint y = i / size;\n\t\treturn float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );\n\t}\n#endif\n#ifdef USE_BATCHING_COLOR\n\tuniform sampler2D batchingColorTexture;\n\tvec3 getBatchingColor( const in float i ) {\n\t\tint size = textureSize( batchingColorTexture, 0 ).x;\n\t\tint j = int( i );\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\treturn texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;\n\t}\n#endif",batching_vertex:"#ifdef USE_BATCHING\n\tmat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n\t\tvec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#ifdef ALPHA_TO_COVERAGE\n\t\tfloat distanceToPlane, distanceGradient;\n\t\tfloat clipOpacity = 1.0;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\tclipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\tif ( clipOpacity == 0.0 ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tfloat unionClipOpacity = 1.0;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\t\tunionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tclipOpacity *= 1.0 - unionClipOpacity;\n\t\t#endif\n\t\tdiffuseColor.a *= clipOpacity;\n\t\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tbool clipped = true;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tif ( clipped ) discard;\n\t\t#endif\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif\n#ifdef USE_BATCHING_COLOR\n\tvec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );\n\tvColor.xyz *= batchingColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n\tmat3 bm = mat3( batchingMatrix );\n\ttransformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n\ttransformedNormal = bm * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = bm * transformedTangent;\n\t#endif\n#endif\n#ifdef USE_INSTANCING\n\tmat3 im = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n\ttransformedNormal = im * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = im * transformedTangent;\n\t#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\ttransformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE\n\t\temissiveColor = sRGBTransferEOTF( emissiveColor );\n\t#endif\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"vec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferEOTF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform mat3 envMapRotation;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif ( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_DISPERSION\n\tmaterial.dispersion = dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tif( material.anisotropy == 0.0 ) {\n\t\tanisotropyV = vec2( 1.0, 0.0 );\n\t} else {\n\t\tanisotropyV /= material.anisotropy;\n\t\tmaterial.anisotropy = saturate( material.anisotropy );\n\t}\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\tfloat dispersion;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )\n\tgl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGARITHMIC_DEPTH_BUFFER\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGARITHMIC_DEPTH_BUFFER\n\tvFragDepth = 1.0 + gl_Position.w;\n\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphinstance_vertex:"#ifdef USE_INSTANCING_MORPH\n\tfloat morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\tfloat morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tmorphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;\n\t}\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_INSTANCING_MORPH\n\t\tuniform float morphTargetBaseInfluence;\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t#endif\n\tuniform sampler2DArray morphTargetsTexture;\n\tuniform ivec2 morphTargetsTextureSize;\n\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t}\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;\nconst float Inv255 = 1. / 255.;\nconst vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );\nconst vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );\nconst vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );\nconst vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );\nvec4 packDepthToRGBA( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec4( 0., 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec4( 1., 1., 1., 1. );\n\tfloat vuf;\n\tfloat af = modf( v * PackFactors.a, vuf );\n\tfloat bf = modf( vuf * ShiftRight8, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );\n}\nvec3 packDepthToRGB( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec3( 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec3( 1., 1., 1. );\n\tfloat vuf;\n\tfloat bf = modf( v * PackFactors.b, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec3( vuf * Inv255, gf * PackUpscale, bf );\n}\nvec2 packDepthToRG( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec2( 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec2( 1., 1. );\n\tfloat vuf;\n\tfloat gf = modf( v * 256., vuf );\n\treturn vec2( vuf * Inv255, gf );\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors4 );\n}\nfloat unpackRGBToDepth( const in vec3 v ) {\n\treturn dot( v, UnpackFactors3 );\n}\nfloat unpackRGToDepth( const in vec2 v ) {\n\treturn v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;\n}\nvec4 pack2HalfToRGBA( const in vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( const in vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n\tmvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\tfloat depth = unpackRGBAToDepth( texture2D( depths, uv ) );\n\t\t#ifdef USE_REVERSED_DEPTH_BUFFER\n\t\t\treturn step( depth, compare );\n\t\t#else\n\t\t\treturn step( compare, depth );\n\t\t#endif\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow( sampler2D shadow, vec2 uv, float compare ) {\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\t#ifdef USE_REVERSED_DEPTH_BUFFER\n\t\t\tfloat hard_shadow = step( distribution.x, compare );\n\t\t#else\n\t\t\tfloat hard_shadow = step( compare, distribution.x );\n\t\t#endif\n\t\tif ( hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tfloat shadow = 1.0;\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\t\n\t\tfloat lightToPositionLength = length( lightToPosition );\n\t\tif ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {\n\t\t\tfloat dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\t\tdp += shadowBias;\n\t\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\t\tshadow = (\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t\t) * ( 1.0 / 9.0 );\n\t\t\t#else\n\t\t\t\tshadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tint size = textureSize( boneTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 CineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.6605, - 0.1246, - 0.0182 ),\n\tvec3( - 0.5876, 1.1329, - 0.1006 ),\n\tvec3( - 0.0728, - 0.0083, 1.1187 )\n);\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\n\tvec3( 0.6274, 0.0691, 0.0164 ),\n\tvec3( 0.3293, 0.9195, 0.0880 ),\n\tvec3( 0.0433, 0.0113, 0.8956 )\n);\nvec3 agxDefaultContrastApprox( vec3 x ) {\n\tvec3 x2 = x * x;\n\tvec3 x4 = x2 * x2;\n\treturn + 15.5 * x4 * x2\n\t\t- 40.14 * x4 * x\n\t\t+ 31.96 * x4\n\t\t- 6.868 * x2 * x\n\t\t+ 0.4298 * x2\n\t\t+ 0.1191 * x\n\t\t- 0.00232;\n}\nvec3 AgXToneMapping( vec3 color ) {\n\tconst mat3 AgXInsetMatrix = mat3(\n\t\tvec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\n\t\tvec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\n\t\tvec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\n\t);\n\tconst mat3 AgXOutsetMatrix = mat3(\n\t\tvec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\n\t\tvec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\n\t\tvec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\n\t);\n\tconst float AgxMinEv = - 12.47393;\tconst float AgxMaxEv = 4.026069;\n\tcolor *= toneMappingExposure;\n\tcolor = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\n\tcolor = AgXInsetMatrix * color;\n\tcolor = max( color, 1e-10 );\tcolor = log2( color );\n\tcolor = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\n\tcolor = clamp( color, 0.0, 1.0 );\n\tcolor = agxDefaultContrastApprox( color );\n\tcolor = AgXOutsetMatrix * color;\n\tcolor = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\n\tcolor = LINEAR_REC2020_TO_LINEAR_SRGB * color;\n\tcolor = clamp( color, 0.0, 1.0 );\n\treturn color;\n}\nvec3 NeutralToneMapping( vec3 color ) {\n\tconst float StartCompression = 0.8 - 0.04;\n\tconst float Desaturation = 0.15;\n\tcolor *= toneMappingExposure;\n\tfloat x = min( color.r, min( color.g, color.b ) );\n\tfloat offset = x < 0.08 ? x - 6.25 * x * x : 0.04;\n\tcolor -= offset;\n\tfloat peak = max( color.r, max( color.g, color.b ) );\n\tif ( peak < StartCompression ) return color;\n\tfloat d = 1. - StartCompression;\n\tfloat newPeak = 1. - d * d / ( peak + d - StartCompression );\n\tcolor *= newPeak / peak;\n\tfloat g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );\n\treturn mix( color, vec3( newPeak ), g );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec4 transmittedLight;\n\t\tvec3 transmittance;\n\t\t#ifdef USE_DISPERSION\n\t\t\tfloat halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;\n\t\t\tvec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );\n\t\t\tfor ( int i = 0; i < 3; i ++ ) {\n\t\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );\n\t\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\t\trefractionCoords += 1.0;\n\t\t\t\trefractionCoords /= 2.0;\n\t\t\t\tvec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );\n\t\t\t\ttransmittedLight[ i ] = transmissionSample[ i ];\n\t\t\t\ttransmittedLight.a += transmissionSample.a;\n\t\t\t\ttransmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];\n\t\t\t}\n\t\t\ttransmittedLight.a /= 3.0;\n\t\t#else\n\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\trefractionCoords += 1.0;\n\t\t\trefractionCoords /= 2.0;\n\t\t\ttransmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\t\ttransmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\t#endif\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_BATCHING\n\t\tworldPosition = batchingMatrix * worldPosition;\n\t#endif\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nuniform mat3 backgroundRotation;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\t#ifdef USE_REVERSED_DEPTH_BUFFER\n\t\tfloat fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];\n\t#else\n\t\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;\n\t#endif\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#elif DEPTH_PACKING == 3202\n\t\tgl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );\n\t#elif DEPTH_PACKING == 3203\n\t\tgl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_DISPERSION\n\tuniform float dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix[ 3 ];\n\tvec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"},Lj={common:{diffuse:{value:new Hf(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Kp},alphaMap:{value:null},alphaMapTransform:{value:new Kp},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Kp}},envmap:{envMap:{value:null},envMapRotation:{value:new Kp},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Kp}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Kp}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Kp},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Kp},normalScale:{value:new Wp(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Kp},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Kp}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Kp}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Kp}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Hf(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Hf(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Kp},alphaTest:{value:0},uvTransform:{value:new Kp}},sprite:{diffuse:{value:new Hf(16777215)},opacity:{value:1},center:{value:new Wp(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Kp},alphaMap:{value:null},alphaMapTransform:{value:new Kp},alphaTest:{value:0}}},Fj={basic:{uniforms:Eg([Lj.common,Lj.specularmap,Lj.envmap,Lj.aomap,Lj.lightmap,Lj.fog]),vertexShader:Dj.meshbasic_vert,fragmentShader:Dj.meshbasic_frag},lambert:{uniforms:Eg([Lj.common,Lj.specularmap,Lj.envmap,Lj.aomap,Lj.lightmap,Lj.emissivemap,Lj.bumpmap,Lj.normalmap,Lj.displacementmap,Lj.fog,Lj.lights,{emissive:{value:new Hf(0)}}]),vertexShader:Dj.meshlambert_vert,fragmentShader:Dj.meshlambert_frag},phong:{uniforms:Eg([Lj.common,Lj.specularmap,Lj.envmap,Lj.aomap,Lj.lightmap,Lj.emissivemap,Lj.bumpmap,Lj.normalmap,Lj.displacementmap,Lj.fog,Lj.lights,{emissive:{value:new Hf(0)},specular:{value:new Hf(1118481)},shininess:{value:30}}]),vertexShader:Dj.meshphong_vert,fragmentShader:Dj.meshphong_frag},standard:{uniforms:Eg([Lj.common,Lj.envmap,Lj.aomap,Lj.lightmap,Lj.emissivemap,Lj.bumpmap,Lj.normalmap,Lj.displacementmap,Lj.roughnessmap,Lj.metalnessmap,Lj.fog,Lj.lights,{emissive:{value:new Hf(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Dj.meshphysical_vert,fragmentShader:Dj.meshphysical_frag},toon:{uniforms:Eg([Lj.common,Lj.aomap,Lj.lightmap,Lj.emissivemap,Lj.bumpmap,Lj.normalmap,Lj.displacementmap,Lj.gradientmap,Lj.fog,Lj.lights,{emissive:{value:new Hf(0)}}]),vertexShader:Dj.meshtoon_vert,fragmentShader:Dj.meshtoon_frag},matcap:{uniforms:Eg([Lj.common,Lj.bumpmap,Lj.normalmap,Lj.displacementmap,Lj.fog,{matcap:{value:null}}]),vertexShader:Dj.meshmatcap_vert,fragmentShader:Dj.meshmatcap_frag},points:{uniforms:Eg([Lj.points,Lj.fog]),vertexShader:Dj.points_vert,fragmentShader:Dj.points_frag},dashed:{uniforms:Eg([Lj.common,Lj.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Dj.linedashed_vert,fragmentShader:Dj.linedashed_frag},depth:{uniforms:Eg([Lj.common,Lj.displacementmap]),vertexShader:Dj.depth_vert,fragmentShader:Dj.depth_frag},normal:{uniforms:Eg([Lj.common,Lj.bumpmap,Lj.normalmap,Lj.displacementmap,{opacity:{value:1}}]),vertexShader:Dj.meshnormal_vert,fragmentShader:Dj.meshnormal_frag},sprite:{uniforms:Eg([Lj.sprite,Lj.fog]),vertexShader:Dj.sprite_vert,fragmentShader:Dj.sprite_frag},background:{uniforms:{uvTransform:{value:new Kp},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Dj.background_vert,fragmentShader:Dj.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Kp}},vertexShader:Dj.backgroundCube_vert,fragmentShader:Dj.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Dj.cube_vert,fragmentShader:Dj.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Dj.equirect_vert,fragmentShader:Dj.equirect_frag},distanceRGBA:{uniforms:Eg([Lj.common,Lj.displacementmap,{referencePosition:{value:new Gp},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Dj.distanceRGBA_vert,fragmentShader:Dj.distanceRGBA_frag},shadow:{uniforms:Eg([Lj.lights,Lj.fog,{color:{value:new Hf(0)},opacity:{value:1}}]),vertexShader:Dj.shadow_vert,fragmentShader:Dj.shadow_frag}};Fj.physical={uniforms:Eg([Fj.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Kp},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Kp},clearcoatNormalScale:{value:new Wp(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Kp},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Kp},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Kp},sheen:{value:0},sheenColor:{value:new Hf(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Kp},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Kp},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Kp},transmissionSamplerSize:{value:new Wp},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Kp},attenuationDistance:{value:0},attenuationColor:{value:new Hf(0)},specularColor:{value:new Hf(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Kp},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Kp},anisotropyVector:{value:new Wp},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Kp}}]),vertexShader:Dj.meshphysical_vert,fragmentShader:Dj.meshphysical_frag};const zj={r:0,b:0,g:0},Bj=new of,Uj=new Ym;function Vj(e,t,n,r,s,i,a){const o=new Hf(0);let l,c,d=!0===i?0:1,u=null,h=0,p=null;function m(e){let r=!0===e.isScene?e.background:null;if(r&&r.isTexture){r=(e.backgroundBlurriness>0?n:t).get(r)}return r}function f(t,n){t.getRGB(zj,kg(e)),r.buffers.color.setClear(zj.r,zj.g,zj.b,n,a)}return{getClearColor:function(){return o},setClearColor:function(e,t=1){o.set(e),d=t,f(o,d)},getClearAlpha:function(){return d},setClearAlpha:function(e){d=e,f(o,d)},render:function(t){let n=!1;const s=m(t);null===s?f(o,d):s&&s.isColor&&(f(s,1),n=!0);const i=e.xr.getEnvironmentBlendMode();"additive"===i?r.buffers.color.setClear(0,0,0,1,a):"alpha-blend"===i&&r.buffers.color.setClear(0,0,0,0,a),(e.autoClear||n)&&(r.buffers.depth.setTest(!0),r.buffers.depth.setMask(!0),r.buffers.color.setMask(!0),e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil))},addToRenderList:function(t,n){const r=m(n);r&&(r.isCubeTexture||r.mapping===Ku)?(void 0===c&&(c=new _g(new Mg(1,1,1),new Tg({name:"BackgroundCubeMaterial",uniforms:Cg(Fj.backgroundCube.uniforms),vertexShader:Fj.backgroundCube.vertexShader,fragmentShader:Fj.backgroundCube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),s.update(c)),Bj.copy(n.backgroundRotation),Bj.x*=-1,Bj.y*=-1,Bj.z*=-1,r.isCubeTexture&&!1===r.isRenderTargetTexture&&(Bj.y*=-1,Bj.z*=-1),c.material.uniforms.envMap.value=r,c.material.uniforms.flipEnvMap.value=r.isCubeTexture&&!1===r.isRenderTargetTexture?-1:1,c.material.uniforms.backgroundBlurriness.value=n.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=n.backgroundIntensity,c.material.uniforms.backgroundRotation.value.setFromMatrix4(Uj.makeRotationFromEuler(Bj)),c.material.toneMapped=om.getTransfer(r.colorSpace)!==vp,u===r&&h===r.version&&p===e.toneMapping||(c.material.needsUpdate=!0,u=r,h=r.version,p=e.toneMapping),c.layers.enableAll(),t.unshift(c,c.geometry,c.material,0,0,null)):r&&r.isTexture&&(void 0===l&&(l=new _g(new tb(2,2),new Tg({name:"BackgroundMaterial",uniforms:Cg(Fj.background.uniforms),vertexShader:Fj.background.vertexShader,fragmentShader:Fj.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),s.update(l)),l.material.uniforms.t2D.value=r,l.material.uniforms.backgroundIntensity.value=n.backgroundIntensity,l.material.toneMapped=om.getTransfer(r.colorSpace)!==vp,!0===r.matrixAutoUpdate&&r.updateMatrix(),l.material.uniforms.uvTransform.value.copy(r.matrix),u===r&&h===r.version&&p===e.toneMapping||(l.material.needsUpdate=!0,u=r,h=r.version,p=e.toneMapping),l.layers.enableAll(),t.unshift(l,l.geometry,l.material,0,0,null))},dispose:function(){void 0!==c&&(c.geometry.dispose(),c.material.dispose(),c=void 0),void 0!==l&&(l.geometry.dispose(),l.material.dispose(),l=void 0)}}}function Hj(e,t){const n=e.getParameter(e.MAX_VERTEX_ATTRIBS),r={},s=c(null);let i=s,a=!1;function o(t){return e.bindVertexArray(t)}function l(t){return e.deleteVertexArray(t)}function c(e){const t=[],r=[],s=[];for(let i=0;i<n;i++)t[i]=0,r[i]=0,s[i]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:r,attributeDivisors:s,object:e,attributes:{},index:null}}function d(){const e=i.newAttributes;for(let t=0,n=e.length;t<n;t++)e[t]=0}function u(e){h(e,0)}function h(t,n){const r=i.newAttributes,s=i.enabledAttributes,a=i.attributeDivisors;r[t]=1,0===s[t]&&(e.enableVertexAttribArray(t),s[t]=1),a[t]!==n&&(e.vertexAttribDivisor(t,n),a[t]=n)}function p(){const t=i.newAttributes,n=i.enabledAttributes;for(let r=0,s=n.length;r<s;r++)n[r]!==t[r]&&(e.disableVertexAttribArray(r),n[r]=0)}function m(t,n,r,s,i,a,o){!0===o?e.vertexAttribIPointer(t,n,r,i,a):e.vertexAttribPointer(t,n,r,s,i,a)}function f(){g(),a=!0,i!==s&&(i=s,o(i.object))}function g(){s.geometry=null,s.program=null,s.wireframe=!1}return{setup:function(n,s,l,f,g){let x=!1;const v=function(t,n,s){const i=!0===s.wireframe;let a=r[t.id];void 0===a&&(a={},r[t.id]=a);let o=a[n.id];void 0===o&&(o={},a[n.id]=o);let l=o[i];void 0===l&&(l=c(e.createVertexArray()),o[i]=l);return l}(f,l,s);i!==v&&(i=v,o(i.object)),x=function(e,t,n,r){const s=i.attributes,a=t.attributes;let o=0;const l=n.getAttributes();for(const i in l){if(l[i].location>=0){const t=s[i];let n=a[i];if(void 0===n&&("instanceMatrix"===i&&e.instanceMatrix&&(n=e.instanceMatrix),"instanceColor"===i&&e.instanceColor&&(n=e.instanceColor)),void 0===t)return!0;if(t.attribute!==n)return!0;if(n&&t.data!==n.data)return!0;o++}}return i.attributesNum!==o||i.index!==r}(n,f,l,g),x&&function(e,t,n,r){const s={},a=t.attributes;let o=0;const l=n.getAttributes();for(const i in l){if(l[i].location>=0){let t=a[i];void 0===t&&("instanceMatrix"===i&&e.instanceMatrix&&(t=e.instanceMatrix),"instanceColor"===i&&e.instanceColor&&(t=e.instanceColor));const n={};n.attribute=t,t&&t.data&&(n.data=t.data),s[i]=n,o++}}i.attributes=s,i.attributesNum=o,i.index=r}(n,f,l,g),null!==g&&t.update(g,e.ELEMENT_ARRAY_BUFFER),(x||a)&&(a=!1,function(n,r,s,i){d();const a=i.attributes,o=s.getAttributes(),l=r.defaultAttributeValues;for(const c in o){const r=o[c];if(r.location>=0){let s=a[c];if(void 0===s&&("instanceMatrix"===c&&n.instanceMatrix&&(s=n.instanceMatrix),"instanceColor"===c&&n.instanceColor&&(s=n.instanceColor)),void 0!==s){const a=s.normalized,o=s.itemSize,l=t.get(s);if(void 0===l)continue;const c=l.buffer,d=l.type,p=l.bytesPerElement,f=d===e.INT||d===e.UNSIGNED_INT||s.gpuType===ch;if(s.isInterleavedBufferAttribute){const t=s.data,l=t.stride,g=s.offset;if(t.isInstancedInterleavedBuffer){for(let e=0;e<r.locationSize;e++)h(r.location+e,t.meshPerAttribute);!0!==n.isInstancedMesh&&void 0===i._maxInstanceCount&&(i._maxInstanceCount=t.meshPerAttribute*t.count)}else for(let e=0;e<r.locationSize;e++)u(r.location+e);e.bindBuffer(e.ARRAY_BUFFER,c);for(let e=0;e<r.locationSize;e++)m(r.location+e,o/r.locationSize,d,a,l*p,(g+o/r.locationSize*e)*p,f)}else{if(s.isInstancedBufferAttribute){for(let e=0;e<r.locationSize;e++)h(r.location+e,s.meshPerAttribute);!0!==n.isInstancedMesh&&void 0===i._maxInstanceCount&&(i._maxInstanceCount=s.meshPerAttribute*s.count)}else for(let e=0;e<r.locationSize;e++)u(r.location+e);e.bindBuffer(e.ARRAY_BUFFER,c);for(let e=0;e<r.locationSize;e++)m(r.location+e,o/r.locationSize,d,a,o*p,o/r.locationSize*e*p,f)}}else if(void 0!==l){const t=l[c];if(void 0!==t)switch(t.length){case 2:e.vertexAttrib2fv(r.location,t);break;case 3:e.vertexAttrib3fv(r.location,t);break;case 4:e.vertexAttrib4fv(r.location,t);break;default:e.vertexAttrib1fv(r.location,t)}}}}p()}(n,s,l,f),null!==g&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t.get(g).buffer))},reset:f,resetDefaultState:g,dispose:function(){f();for(const e in r){const t=r[e];for(const e in t){const n=t[e];for(const e in n)l(n[e].object),delete n[e];delete t[e]}delete r[e]}},releaseStatesOfGeometry:function(e){if(void 0===r[e.id])return;const t=r[e.id];for(const n in t){const e=t[n];for(const t in e)l(e[t].object),delete e[t];delete t[n]}delete r[e.id]},releaseStatesOfProgram:function(e){for(const t in r){const n=r[t];if(void 0===n[e.id])continue;const s=n[e.id];for(const e in s)l(s[e].object),delete s[e];delete n[e.id]}},initAttributes:d,enableAttribute:u,disableUnusedAttributes:p}}function Wj(e,t,n){let r;function s(t,s,i){0!==i&&(e.drawArraysInstanced(r,t,s,i),n.update(s,r,i))}this.setMode=function(e){r=e},this.render=function(t,s){e.drawArrays(r,t,s),n.update(s,r,1)},this.renderInstances=s,this.renderMultiDraw=function(e,s,i){if(0===i)return;t.get("WEBGL_multi_draw").multiDrawArraysWEBGL(r,e,0,s,0,i);let a=0;for(let t=0;t<i;t++)a+=s[t];n.update(a,r,1)},this.renderMultiDrawInstances=function(e,i,a,o){if(0===a)return;const l=t.get("WEBGL_multi_draw");if(null===l)for(let t=0;t<e.length;t++)s(e[t],i[t],o[t]);else{l.multiDrawArraysInstancedWEBGL(r,e,0,i,0,o,0,a);let t=0;for(let e=0;e<a;e++)t+=i[e]*o[e];n.update(t,r,1)}}}function $j(e,t,n,r){let s;function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let a=void 0!==n.precision?n.precision:"highp";const o=i(a);o!==a&&(a=o);const l=!0===n.logarithmicDepthBuffer,c=!0===n.reversedDepthBuffer&&t.has("EXT_clip_control"),d=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),u=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS);return{isWebGL2:!0,getMaxAnisotropy:function(){if(void 0!==s)return s;if(!0===t.has("EXT_texture_filter_anisotropic")){const n=t.get("EXT_texture_filter_anisotropic");s=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else s=0;return s},getMaxPrecision:i,textureFormatReadable:function(t){return t===bh||r.convert(t)===e.getParameter(e.IMPLEMENTATION_COLOR_READ_FORMAT)},textureTypeReadable:function(n){const s=n===hh&&(t.has("EXT_color_buffer_half_float")||t.has("EXT_color_buffer_float"));return!(n!==ih&&r.convert(n)!==e.getParameter(e.IMPLEMENTATION_COLOR_READ_TYPE)&&n!==uh&&!s)},precision:a,logarithmicDepthBuffer:l,reversedDepthBuffer:c,maxTextures:d,maxVertexTextures:u,maxTextureSize:e.getParameter(e.MAX_TEXTURE_SIZE),maxCubemapSize:e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),maxAttributes:e.getParameter(e.MAX_VERTEX_ATTRIBS),maxVertexUniforms:e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),maxVaryings:e.getParameter(e.MAX_VARYING_VECTORS),maxFragmentUniforms:e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),vertexTextures:u>0,maxSamples:e.getParameter(e.MAX_SAMPLES)}}function Gj(e){const t=this;let n=null,r=0,s=!1,i=!1;const a=new Vx,o=new Kp,l={value:null,needsUpdate:!1};function c(e,n,r,s){const i=null!==e?e.length:0;let c=null;if(0!==i){if(c=l.value,!0!==s||null===c){const t=r+4*i,s=n.matrixWorldInverse;o.getNormalMatrix(s),(null===c||c.length<t)&&(c=new Float32Array(t));for(let n=0,l=r;n!==i;++n,l+=4)a.copy(e[n]).applyMatrix4(s,o),a.normal.toArray(c,l),c[l+3]=a.constant}l.value=c,l.needsUpdate=!0}return t.numPlanes=i,t.numIntersection=0,c}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t){const n=0!==e.length||t||0!==r||s;return s=t,r=e.length,n},this.beginShadows=function(){i=!0,c(null)},this.endShadows=function(){i=!1},this.setGlobalState=function(e,t){n=c(e,t,0)},this.setState=function(a,o,d){const u=a.clippingPlanes,h=a.clipIntersection,p=a.clipShadows,m=e.get(a);if(!s||null===u||0===u.length||i&&!p)i?c(null):function(){l.value!==n&&(l.value=n,l.needsUpdate=r>0);t.numPlanes=r,t.numIntersection=0}();else{const e=i?0:r,t=4*e;let s=m.clippingState||null;l.value=s,s=c(u,o,t,d);for(let r=0;r!==t;++r)s[r]=n[r];m.clippingState=s,this.numIntersection=h?this.numPlanes:0,this.numPlanes+=e}}}function qj(e){let t=new WeakMap;function n(e,t){return t===qu?e.mapping=$u:t===Xu&&(e.mapping=Gu),e}function r(e){const n=e.target;n.removeEventListener("dispose",r);const s=t.get(n);void 0!==s&&(t.delete(n),s.dispose())}return{get:function(s){if(s&&s.isTexture){const i=s.mapping;if(i===qu||i===Xu){if(t.has(s)){return n(t.get(s).texture,s.mapping)}{const i=s.image;if(i&&i.height>0){const a=new Bg(i.height);return a.fromEquirectangularTexture(e,s),t.set(s,a),s.addEventListener("dispose",r),n(a.texture,s.mapping)}return null}}}return s},dispose:function(){t=new WeakMap}}}const Xj=[.125,.215,.35,.446,.526,.582],Kj=20,Yj=new uw,Zj=new Hf;let Jj=null,Qj=0,eN=0,tN=!1;const nN=(1+Math.sqrt(5))/2,rN=1/nN,sN=[new Gp(-nN,rN,0),new Gp(nN,rN,0),new Gp(-rN,0,nN),new Gp(rN,0,nN),new Gp(0,nN,-rN),new Gp(0,nN,rN),new Gp(-1,1,-1),new Gp(1,1,-1),new Gp(-1,1,1),new Gp(1,1,1)],iN=new Gp;class aN{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,r=100,s={}){const{size:i=256,position:a=iN}=s;Jj=this._renderer.getRenderTarget(),Qj=this._renderer.getActiveCubeFace(),eN=this._renderer.getActiveMipmapLevel(),tN=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(i);const o=this._allocateTargets();return o.depthBuffer=!0,this._sceneToCubeUV(e,n,r,o,a),t>0&&this._blur(o,0,0,t),this._applyPMREM(o),this._cleanup(o),o}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=dN(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=cN(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Jj,Qj,eN),this._renderer.xr.enabled=tN,e.scissorTest=!1,lN(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===$u||e.mapping===Gu?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Jj=this._renderer.getRenderTarget(),Qj=this._renderer.getActiveCubeFace(),eN=this._renderer.getActiveMipmapLevel(),tN=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:nh,minFilter:nh,generateMipmaps:!1,type:hh,format:bh,colorSpace:gp,depthBuffer:!1},r=oN(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=oN(e,t,n);const{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(e){const t=[],n=[],r=[];let s=e;const i=e-4+1+Xj.length;for(let a=0;a<i;a++){const i=Math.pow(2,s);n.push(i);let o=1/i;a>e-4?o=Xj[a-e+4-1]:0===a&&(o=0),r.push(o);const l=1/(i-2),c=-l,d=1+l,u=[c,c,d,c,d,d,c,c,d,d,c,d],h=6,p=6,m=3,f=2,g=1,x=new Float32Array(m*p*h),v=new Float32Array(f*p*h),y=new Float32Array(g*p*h);for(let e=0;e<h;e++){const t=e%3*2/3-1,n=e>2?0:-1,r=[t,n,0,t+2/3,n,0,t+2/3,n+1,0,t,n,0,t+2/3,n+1,0,t,n+1,0];x.set(r,m*p*e),v.set(u,f*p*e);const s=[e,e,e,e,e,e];y.set(s,g*p*e)}const b=new hg;b.setAttribute("position",new tg(x,m)),b.setAttribute("uv",new tg(v,f)),b.setAttribute("faceIndex",new tg(y,g)),t.push(b),s>4&&s--}return{lodPlanes:t,sizeLods:n,sigmas:r}}(r)),this._blurMaterial=function(e,t,n){const r=new Float32Array(Kj),s=new Gp(0,1,0),i=new Tg({name:"SphericalGaussianBlur",defines:{n:Kj,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${e}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:s}},vertexShader:uN(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1});return i}(r,e,t)}return r}_compileMaterial(e){const t=new _g(this._lodPlanes[0],e);this._renderer.compile(t,Yj)}_sceneToCubeUV(e,t,n,r,s){const i=new Dg(90,1,t,n),a=[1,-1,1,1,1,1],o=[1,1,1,-1,-1,-1],l=this._renderer,c=l.autoClear,d=l.toneMapping;l.getClearColor(Zj),l.toneMapping=0,l.autoClear=!1;l.state.buffers.depth.getReversed()&&(l.setRenderTarget(r),l.clearDepth(),l.setRenderTarget(null));const u=new qf({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),h=new _g(new Mg,u);let p=!1;const m=e.background;m?m.isColor&&(u.color.copy(m),e.background=null,p=!0):(u.color.copy(Zj),p=!0);for(let f=0;f<6;f++){const t=f%3;0===t?(i.up.set(0,a[f],0),i.position.set(s.x,s.y,s.z),i.lookAt(s.x+o[f],s.y,s.z)):1===t?(i.up.set(0,0,a[f]),i.position.set(s.x,s.y,s.z),i.lookAt(s.x,s.y+o[f],s.z)):(i.up.set(0,a[f],0),i.position.set(s.x,s.y,s.z),i.lookAt(s.x,s.y,s.z+o[f]));const n=this._cubeSize;lN(r,t*n,f>2?n:0,n,n),l.setRenderTarget(r),p&&l.render(h,i),l.render(e,i)}h.geometry.dispose(),h.material.dispose(),l.toneMapping=d,l.autoClear=c,e.background=m}_textureToCubeUV(e,t){const n=this._renderer,r=e.mapping===$u||e.mapping===Gu;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=dN()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=cN());const s=r?this._cubemapMaterial:this._equirectMaterial,i=new _g(this._lodPlanes[0],s);s.uniforms.envMap.value=e;const a=this._cubeSize;lN(t,0,0,3*a,2*a),n.setRenderTarget(t),n.render(i,Yj)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;const r=this._lodPlanes.length;for(let s=1;s<r;s++){const t=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),n=sN[(r-s-1)%sN.length];this._blur(e,s-1,s,t,n)}t.autoClear=n}_blur(e,t,n,r,s){const i=this._pingPongRenderTarget;this._halfBlur(e,i,t,n,r,"latitudinal",s),this._halfBlur(i,e,n,n,r,"longitudinal",s)}_halfBlur(e,t,n,r,s,i,a){const o=this._renderer,l=this._blurMaterial,c=new _g(this._lodPlanes[r],l),d=l.uniforms,u=this._sizeLods[n]-1,h=isFinite(s)?Math.PI/(2*u):2*Math.PI/39,p=s/h,m=isFinite(s)?1+Math.floor(3*p):Kj,f=[];let g=0;for(let y=0;y<Kj;++y){const e=y/p,t=Math.exp(-e*e/2);f.push(t),0===y?g+=t:y<m&&(g+=2*t)}for(let y=0;y<f.length;y++)f[y]=f[y]/g;d.envMap.value=e.texture,d.samples.value=m,d.weights.value=f,d.latitudinal.value="latitudinal"===i,a&&(d.poleAxis.value=a);const{_lodMax:x}=this;d.dTheta.value=h,d.mipInt.value=x-n;const v=this._sizeLods[r];lN(t,3*v*(r>x-4?r-x+4:0),4*(this._cubeSize-v),3*v,2*v),o.setRenderTarget(t),o.render(c,Yj)}}function oN(e,t,n){const r=new bm(e,t,n);return r.texture.mapping=Ku,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function lN(e,t,n,r,s){e.viewport.set(t,n,r,s),e.scissor.set(t,n,r,s)}function cN(){return new Tg({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:uN(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function dN(){return new Tg({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:uN(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function uN(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}function hN(e){let t=new WeakMap,n=null;function r(e){const n=e.target;n.removeEventListener("dispose",r);const s=t.get(n);void 0!==s&&(t.delete(n),s.dispose())}return{get:function(s){if(s&&s.isTexture){const i=s.mapping,a=i===qu||i===Xu,o=i===$u||i===Gu;if(a||o){let i=t.get(s);const l=void 0!==i?i.texture.pmremVersion:0;if(s.isRenderTargetTexture&&s.pmremVersion!==l)return null===n&&(n=new aN(e)),i=a?n.fromEquirectangular(s,i):n.fromCubemap(s,i),i.texture.pmremVersion=s.pmremVersion,t.set(s,i),i.texture;if(void 0!==i)return i.texture;{const l=s.image;return a&&l&&l.height>0||o&&l&&function(e){let t=0;const n=6;for(let r=0;r<n;r++)void 0!==e[r]&&t++;return t===n}(l)?(null===n&&(n=new aN(e)),i=a?n.fromEquirectangular(s):n.fromCubemap(s),i.texture.pmremVersion=s.pmremVersion,t.set(s,i),s.addEventListener("dispose",r),i.texture):null}}}return s},dispose:function(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function pN(e){const t={};function n(n){if(void 0!==t[n])return t[n];let r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return t[n]=r,r}return{has:function(e){return null!==n(e)},init:function(){n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance"),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture"),n("WEBGL_render_shared_exponent")},get:function(e){const t=n(e);return null===t&&rm("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function mN(e,t,n,r){const s={},i=new WeakMap;function a(e){const o=e.target;null!==o.index&&t.remove(o.index);for(const n in o.attributes)t.remove(o.attributes[n]);o.removeEventListener("dispose",a),delete s[o.id];const l=i.get(o);l&&(t.remove(l),i.delete(o)),r.releaseStatesOfGeometry(o),!0===o.isInstancedBufferGeometry&&delete o._maxInstanceCount,n.memory.geometries--}function o(e){const n=[],r=e.index,s=e.attributes.position;let a=0;if(null!==r){const e=r.array;a=r.version;for(let t=0,r=e.length;t<r;t+=3){const r=e[t+0],s=e[t+1],i=e[t+2];n.push(r,s,s,i,i,r)}}else{if(void 0===s)return;{const e=s.array;a=s.version;for(let t=0,r=e.length/3-1;t<r;t+=3){const e=t+0,r=t+1,s=t+2;n.push(e,r,r,s,s,e)}}}const o=new(Zp(n)?rg:ng)(n,1);o.version=a;const l=i.get(e);l&&t.remove(l),i.set(e,o)}return{get:function(e,t){return!0===s[t.id]||(t.addEventListener("dispose",a),s[t.id]=!0,n.memory.geometries++),t},update:function(n){const r=n.attributes;for(const s in r)t.update(r[s],e.ARRAY_BUFFER)},getWireframeAttribute:function(e){const t=i.get(e);if(t){const n=e.index;null!==n&&t.version<n.version&&o(e)}else o(e);return i.get(e)}}}function fN(e,t,n){let r,s,i;function a(t,a,o){0!==o&&(e.drawElementsInstanced(r,a,s,t*i,o),n.update(a,r,o))}this.setMode=function(e){r=e},this.setIndex=function(e){s=e.type,i=e.bytesPerElement},this.render=function(t,a){e.drawElements(r,a,s,t*i),n.update(a,r,1)},this.renderInstances=a,this.renderMultiDraw=function(e,i,a){if(0===a)return;t.get("WEBGL_multi_draw").multiDrawElementsWEBGL(r,i,0,s,e,0,a);let o=0;for(let t=0;t<a;t++)o+=i[t];n.update(o,r,1)},this.renderMultiDrawInstances=function(e,o,l,c){if(0===l)return;const d=t.get("WEBGL_multi_draw");if(null===d)for(let t=0;t<e.length;t++)a(e[t]/i,o[t],c[t]);else{d.multiDrawElementsInstancedWEBGL(r,o,0,s,e,0,c,0,l);let t=0;for(let e=0;e<l;e++)t+=o[e]*c[e];n.update(t,r,1)}}}function gN(e){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(n,r,s){switch(t.calls++,r){case e.TRIANGLES:t.triangles+=s*(n/3);break;case e.LINES:t.lines+=s*(n/2);break;case e.LINE_STRIP:t.lines+=s*(n-1);break;case e.LINE_LOOP:t.lines+=s*n;break;case e.POINTS:t.points+=s*n}}}}function xN(e,t,n){const r=new WeakMap,s=new vm;return{update:function(i,a,o){const l=i.morphTargetInfluences,c=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,d=void 0!==c?c.length:0;let u=r.get(a);if(void 0===u||u.count!==d){let e=function(){x.dispose(),r.delete(a),a.removeEventListener("dispose",e)};void 0!==u&&u.texture.dispose();const n=void 0!==a.morphAttributes.position,i=void 0!==a.morphAttributes.normal,o=void 0!==a.morphAttributes.color,l=a.morphAttributes.position||[],c=a.morphAttributes.normal||[],h=a.morphAttributes.color||[];let p=0;!0===n&&(p=1),!0===i&&(p=2),!0===o&&(p=3);let m=a.attributes.position.count*p,f=1;m>t.maxTextureSize&&(f=Math.ceil(m/t.maxTextureSize),m=t.maxTextureSize);const g=new Float32Array(m*f*4*d),x=new wm(g,m,f,d);x.type=uh,x.needsUpdate=!0;const v=4*p;for(let t=0;t<d;t++){const e=l[t],r=c[t],a=h[t],d=m*f*4*t;for(let t=0;t<e.count;t++){const l=t*v;!0===n&&(s.fromBufferAttribute(e,t),g[d+l+0]=s.x,g[d+l+1]=s.y,g[d+l+2]=s.z,g[d+l+3]=0),!0===i&&(s.fromBufferAttribute(r,t),g[d+l+4]=s.x,g[d+l+5]=s.y,g[d+l+6]=s.z,g[d+l+7]=0),!0===o&&(s.fromBufferAttribute(a,t),g[d+l+8]=s.x,g[d+l+9]=s.y,g[d+l+10]=s.z,g[d+l+11]=4===a.itemSize?s.w:1)}}u={count:d,texture:x,size:new Wp(m,f)},r.set(a,u),a.addEventListener("dispose",e)}if(!0===i.isInstancedMesh&&null!==i.morphTexture)o.getUniforms().setValue(e,"morphTexture",i.morphTexture,n);else{let t=0;for(let e=0;e<l.length;e++)t+=l[e];const n=a.morphTargetsRelative?1:1-t;o.getUniforms().setValue(e,"morphTargetBaseInfluence",n),o.getUniforms().setValue(e,"morphTargetInfluences",l)}o.getUniforms().setValue(e,"morphTargetsTexture",u.texture,n),o.getUniforms().setValue(e,"morphTargetsTextureSize",u.size)}}}function vN(e,t,n,r){let s=new WeakMap;function i(e){const t=e.target;t.removeEventListener("dispose",i),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(a){const o=r.render.frame,l=a.geometry,c=t.get(a,l);if(s.get(c)!==o&&(t.update(c),s.set(c,o)),a.isInstancedMesh&&(!1===a.hasEventListener("dispose",i)&&a.addEventListener("dispose",i),s.get(a)!==o&&(n.update(a.instanceMatrix,e.ARRAY_BUFFER),null!==a.instanceColor&&n.update(a.instanceColor,e.ARRAY_BUFFER),s.set(a,o))),a.isSkinnedMesh){const e=a.skeleton;s.get(e)!==o&&(e.update(),s.set(e,o))}return c},dispose:function(){s=new WeakMap}}}const yN=new xm,bN=new Fv(1,1),wN=new wm,jN=new jm,NN=new zg,_N=[],SN=[],MN=new Float32Array(16),CN=new Float32Array(9),EN=new Float32Array(4);function kN(e,t,n){const r=e[0];if(r<=0||r>0)return e;const s=t*n;let i=_N[s];if(void 0===i&&(i=new Float32Array(s),_N[s]=i),0!==t){r.toArray(i,0);for(let r=1,s=0;r!==t;++r)s+=n,e[r].toArray(i,s)}return i}function AN(e,t){if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function TN(e,t){for(let n=0,r=t.length;n<r;n++)e[n]=t[n]}function PN(e,t){let n=SN[t];void 0===n&&(n=new Int32Array(t),SN[t]=n);for(let r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function ON(e,t){const n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function RN(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(AN(n,t))return;e.uniform2fv(this.addr,t),TN(n,t)}}function IN(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(AN(n,t))return;e.uniform3fv(this.addr,t),TN(n,t)}}function DN(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(AN(n,t))return;e.uniform4fv(this.addr,t),TN(n,t)}}function LN(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(AN(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),TN(n,t)}else{if(AN(n,r))return;EN.set(r),e.uniformMatrix2fv(this.addr,!1,EN),TN(n,r)}}function FN(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(AN(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),TN(n,t)}else{if(AN(n,r))return;CN.set(r),e.uniformMatrix3fv(this.addr,!1,CN),TN(n,r)}}function zN(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(AN(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),TN(n,t)}else{if(AN(n,r))return;MN.set(r),e.uniformMatrix4fv(this.addr,!1,MN),TN(n,r)}}function BN(e,t){const n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function UN(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2i(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(AN(n,t))return;e.uniform2iv(this.addr,t),TN(n,t)}}function VN(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3i(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(AN(n,t))return;e.uniform3iv(this.addr,t),TN(n,t)}}function HN(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(AN(n,t))return;e.uniform4iv(this.addr,t),TN(n,t)}}function WN(e,t){const n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function $N(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2ui(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(AN(n,t))return;e.uniform2uiv(this.addr,t),TN(n,t)}}function GN(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3ui(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(AN(n,t))return;e.uniform3uiv(this.addr,t),TN(n,t)}}function qN(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(AN(n,t))return;e.uniform4uiv(this.addr,t),TN(n,t)}}function XN(e,t,n){const r=this.cache,s=n.allocateTextureUnit();let i;r[0]!==s&&(e.uniform1i(this.addr,s),r[0]=s),this.type===e.SAMPLER_2D_SHADOW?(bN.compareFunction=515,i=bN):i=yN,n.setTexture2D(t||i,s)}function KN(e,t,n){const r=this.cache,s=n.allocateTextureUnit();r[0]!==s&&(e.uniform1i(this.addr,s),r[0]=s),n.setTexture3D(t||jN,s)}function YN(e,t,n){const r=this.cache,s=n.allocateTextureUnit();r[0]!==s&&(e.uniform1i(this.addr,s),r[0]=s),n.setTextureCube(t||NN,s)}function ZN(e,t,n){const r=this.cache,s=n.allocateTextureUnit();r[0]!==s&&(e.uniform1i(this.addr,s),r[0]=s),n.setTexture2DArray(t||wN,s)}function JN(e,t){e.uniform1fv(this.addr,t)}function QN(e,t){const n=kN(t,this.size,2);e.uniform2fv(this.addr,n)}function e_(e,t){const n=kN(t,this.size,3);e.uniform3fv(this.addr,n)}function t_(e,t){const n=kN(t,this.size,4);e.uniform4fv(this.addr,n)}function n_(e,t){const n=kN(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function r_(e,t){const n=kN(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function s_(e,t){const n=kN(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function i_(e,t){e.uniform1iv(this.addr,t)}function a_(e,t){e.uniform2iv(this.addr,t)}function o_(e,t){e.uniform3iv(this.addr,t)}function l_(e,t){e.uniform4iv(this.addr,t)}function c_(e,t){e.uniform1uiv(this.addr,t)}function d_(e,t){e.uniform2uiv(this.addr,t)}function u_(e,t){e.uniform3uiv(this.addr,t)}function h_(e,t){e.uniform4uiv(this.addr,t)}function p_(e,t,n){const r=this.cache,s=t.length,i=PN(n,s);AN(r,i)||(e.uniform1iv(this.addr,i),TN(r,i));for(let a=0;a!==s;++a)n.setTexture2D(t[a]||yN,i[a])}function m_(e,t,n){const r=this.cache,s=t.length,i=PN(n,s);AN(r,i)||(e.uniform1iv(this.addr,i),TN(r,i));for(let a=0;a!==s;++a)n.setTexture3D(t[a]||jN,i[a])}function f_(e,t,n){const r=this.cache,s=t.length,i=PN(n,s);AN(r,i)||(e.uniform1iv(this.addr,i),TN(r,i));for(let a=0;a!==s;++a)n.setTextureCube(t[a]||NN,i[a])}function g_(e,t,n){const r=this.cache,s=t.length,i=PN(n,s);AN(r,i)||(e.uniform1iv(this.addr,i),TN(r,i));for(let a=0;a!==s;++a)n.setTexture2DArray(t[a]||wN,i[a])}class x_{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.setValue=function(e){switch(e){case 5126:return ON;case 35664:return RN;case 35665:return IN;case 35666:return DN;case 35674:return LN;case 35675:return FN;case 35676:return zN;case 5124:case 35670:return BN;case 35667:case 35671:return UN;case 35668:case 35672:return VN;case 35669:case 35673:return HN;case 5125:return WN;case 36294:return $N;case 36295:return GN;case 36296:return qN;case 35678:case 36198:case 36298:case 36306:case 35682:return XN;case 35679:case 36299:case 36307:return KN;case 35680:case 36300:case 36308:case 36293:return YN;case 36289:case 36303:case 36311:case 36292:return ZN}}(t.type)}}class v_{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=function(e){switch(e){case 5126:return JN;case 35664:return QN;case 35665:return e_;case 35666:return t_;case 35674:return n_;case 35675:return r_;case 35676:return s_;case 5124:case 35670:return i_;case 35667:case 35671:return a_;case 35668:case 35672:return o_;case 35669:case 35673:return l_;case 5125:return c_;case 36294:return d_;case 36295:return u_;case 36296:return h_;case 35678:case 36198:case 36298:case 36306:case 35682:return p_;case 35679:case 36299:case 36307:return m_;case 35680:case 36300:case 36308:case 36293:return f_;case 36289:case 36303:case 36311:case 36292:return g_}}(t.type)}}class y_{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const r=this.seq;for(let s=0,i=r.length;s!==i;++s){const i=r[s];i.setValue(e,t[i.id],n)}}}const b_=/(\w+)(\])?(\[|\.)?/g;function w_(e,t){e.seq.push(t),e.map[t.id]=t}function j_(e,t,n){const r=e.name,s=r.length;for(b_.lastIndex=0;;){const i=b_.exec(r),a=b_.lastIndex;let o=i[1];const l="]"===i[2],c=i[3];if(l&&(o|=0),void 0===c||"["===c&&a+2===s){w_(n,void 0===c?new x_(o,e,t):new v_(o,e,t));break}{let e=n.map[o];void 0===e&&(e=new y_(o),w_(n,e)),n=e}}}class N_{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<n;++r){const n=e.getActiveUniform(t,r);j_(n,e.getUniformLocation(t,n.name),this)}}setValue(e,t,n,r){const s=this.map[t];void 0!==s&&s.setValue(e,n,r)}setOptional(e,t,n){const r=t[n];void 0!==r&&this.setValue(e,n,r)}static upload(e,t,n,r){for(let s=0,i=t.length;s!==i;++s){const i=t[s],a=n[i.id];!1!==a.needsUpdate&&i.setValue(e,a.value,r)}}static seqWithValue(e,t){const n=[];for(let r=0,s=e.length;r!==s;++r){const s=e[r];s.id in t&&n.push(s)}return n}}function __(e,t,n){const r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}let S_=0;const M_=new Kp;function C_(e,t,n){const r=e.getShaderParameter(t,e.COMPILE_STATUS),s=(e.getShaderInfoLog(t)||"").trim();if(r&&""===s)return"";const i=/ERROR: 0:(\d+)/.exec(s);if(i){const r=parseInt(i[1]);return n.toUpperCase()+"\n\n"+s+"\n\n"+function(e,t){const n=e.split("\n"),r=[],s=Math.max(t-6,0),i=Math.min(t+6,n.length);for(let a=s;a<i;a++){const e=a+1;r.push(`${e===t?">":" "} ${e}: ${n[a]}`)}return r.join("\n")}(e.getShaderSource(t),r)}return s}function E_(e,t){const n=function(e){om._getMatrix(M_,om.workingColorSpace,e);const t=`mat3( ${M_.elements.map(e=>e.toFixed(4))} )`;switch(om.getTransfer(e)){case xp:return[t,"LinearTransferOETF"];case vp:return[t,"sRGBTransferOETF"];default:return[t,"LinearTransferOETF"]}}(t);return[`vec4 ${e}( vec4 value ) {`,`\treturn ${n[1]}( vec4( value.rgb * ${n[0]}, value.a ) );`,"}"].join("\n")}function k_(e,t){let n;switch(t){case 1:default:n="Linear";break;case 2:n="Reinhard";break;case 3:n="Cineon";break;case 4:n="ACESFilmic";break;case 6:n="AgX";break;case 7:n="Neutral";break;case 5:n="Custom"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}const A_=new Gp;function T_(){om.getLuminanceCoefficients(A_);return["float luminance( const in vec3 rgb ) {",`\tconst vec3 weights = vec3( ${A_.x.toFixed(4)}, ${A_.y.toFixed(4)}, ${A_.z.toFixed(4)} );`,"\treturn dot( weights, rgb );","}"].join("\n")}function P_(e){return""!==e}function O_(e,t){const n=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function R_(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const I_=/^[ \t]*#include +<([\w\d./]+)>/gm;function D_(e){return e.replace(I_,F_)}const L_=new Map;function F_(e,t){let n=Dj[t];if(void 0===n){const e=L_.get(t);if(void 0===e)throw new Error("Can not resolve #include <"+t+">");n=Dj[e]}return D_(n)}const z_=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function B_(e){return e.replace(z_,U_)}function U_(e,t,n,r){let s="";for(let i=parseInt(t);i<parseInt(n);i++)s+=r.replace(/\[\s*i\s*\]/g,"[ "+i+" ]").replace(/UNROLLED_LOOP_INDEX/g,i);return s}function V_(e){let t=`precision ${e.precision} float;\n\tprecision ${e.precision} int;\n\tprecision ${e.precision} sampler2D;\n\tprecision ${e.precision} samplerCube;\n\tprecision ${e.precision} sampler3D;\n\tprecision ${e.precision} sampler2DArray;\n\tprecision ${e.precision} sampler2DShadow;\n\tprecision ${e.precision} samplerCubeShadow;\n\tprecision ${e.precision} sampler2DArrayShadow;\n\tprecision ${e.precision} isampler2D;\n\tprecision ${e.precision} isampler3D;\n\tprecision ${e.precision} isamplerCube;\n\tprecision ${e.precision} isampler2DArray;\n\tprecision ${e.precision} usampler2D;\n\tprecision ${e.precision} usampler3D;\n\tprecision ${e.precision} usamplerCube;\n\tprecision ${e.precision} usampler2DArray;\n\t`;return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function H_(e,t,n,r){const s=e.getContext(),i=n.defines;let a=n.vertexShader,o=n.fragmentShader;const l=function(e){let t="SHADOWMAP_TYPE_BASIC";return 1===e.shadowMapType?t="SHADOWMAP_TYPE_PCF":2===e.shadowMapType?t="SHADOWMAP_TYPE_PCF_SOFT":3===e.shadowMapType&&(t="SHADOWMAP_TYPE_VSM"),t}(n),c=function(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case $u:case Gu:t="ENVMAP_TYPE_CUBE";break;case Ku:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),d=function(e){let t="ENVMAP_MODE_REFLECTION";e.envMap&&e.envMapMode===Gu&&(t="ENVMAP_MODE_REFRACTION");return t}(n),u=function(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case 0:t="ENVMAP_BLENDING_MULTIPLY";break;case 1:t="ENVMAP_BLENDING_MIX";break;case 2:t="ENVMAP_BLENDING_ADD"}return t}(n),h=function(e){const t=e.envMapCubeUVHeight;if(null===t)return null;const n=Math.log2(t)-2,r=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:r,maxMip:n}}(n),p=function(e){return[e.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",e.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(P_).join("\n")}(n),m=function(e){const t=[];for(const n in e){const r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(i),f=s.createProgram();let g,x,v=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(g=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,m].filter(P_).join("\n"),g.length>0&&(g+="\n"),x=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,m].filter(P_).join("\n"),x.length>0&&(x+="\n")):(g=[V_(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,m,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.batchingColor?"#define USE_BATCHING_COLOR":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.instancingMorph?"#define USE_INSTANCING_MORPH":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+d:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",n.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","\tuniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(P_).join("\n"),x=[V_(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,m,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+d:"",n.envMap?"#define "+u:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.dispersion?"#define USE_DISPERSION":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor||n.batchingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",n.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",n.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==n.toneMapping?"#define TONE_MAPPING":"",0!==n.toneMapping?Dj.tonemapping_pars_fragment:"",0!==n.toneMapping?k_("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",Dj.colorspace_pars_fragment,E_("linearToOutputTexel",n.outputColorSpace),T_(),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(P_).join("\n")),a=D_(a),a=O_(a,n),a=R_(a,n),o=D_(o),o=O_(o,n),o=R_(o,n),a=B_(a),o=B_(o),!0!==n.isRawShaderMaterial&&(v="#version 300 es\n",g=[p,"#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+g,x=["#define varying in",n.glslVersion===kp?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===kp?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+x);const y=v+g+a,b=v+x+o,w=__(s,s.VERTEX_SHADER,y),j=__(s,s.FRAGMENT_SHADER,b);function N(t){if(e.debug.checkShaderErrors){const n=s.getProgramInfoLog(f)||"",r=s.getShaderInfoLog(w)||"",i=s.getShaderInfoLog(j)||"",a=n.trim(),o=r.trim(),l=i.trim();let c=!0,d=!0;if(!1===s.getProgramParameter(f,s.LINK_STATUS))if(c=!1,"function"==typeof e.debug.onShaderError)e.debug.onShaderError(s,f,w,j);else{C_(s,w,"vertex"),C_(s,j,"fragment")}else""!==a||""!==o&&""!==l||(d=!1);d&&(t.diagnostics={runnable:c,programLog:a,vertexShader:{log:o,prefix:g},fragmentShader:{log:l,prefix:x}})}s.deleteShader(w),s.deleteShader(j),_=new N_(s,f),S=function(e,t){const n={},r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let s=0;s<r;s++){const r=e.getActiveAttrib(t,s),i=r.name;let a=1;r.type===e.FLOAT_MAT2&&(a=2),r.type===e.FLOAT_MAT3&&(a=3),r.type===e.FLOAT_MAT4&&(a=4),n[i]={type:r.type,location:e.getAttribLocation(t,i),locationSize:a}}return n}(s,f)}let _,S;s.attachShader(f,w),s.attachShader(f,j),void 0!==n.index0AttributeName?s.bindAttribLocation(f,0,n.index0AttributeName):!0===n.morphTargets&&s.bindAttribLocation(f,0,"position"),s.linkProgram(f),this.getUniforms=function(){return void 0===_&&N(this),_},this.getAttributes=function(){return void 0===S&&N(this),S};let M=!1===n.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===M&&(M=s.getProgramParameter(f,37297)),M},this.destroy=function(){r.releaseStatesOfProgram(this),s.deleteProgram(f),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=S_++,this.cacheKey=t,this.usedTimes=1,this.program=f,this.vertexShader=w,this.fragmentShader=j,this}let W_=0;class $_{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(n),i=this._getShaderCacheForMaterial(e);return!1===i.has(r)&&(i.add(r),r.usedTimes++),!1===i.has(s)&&(i.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,0===n.usedTimes&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return void 0===n&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return void 0===n&&(n=new G_(e),t.set(e,n)),n}}class G_{constructor(e){this.id=W_++,this.code=e,this.usedTimes=0}}function q_(e,t,n,r,s,i,a){const o=new lf,l=new $_,c=new Set,d=[],u=s.logarithmicDepthBuffer,h=s.vertexTextures;let p=s.precision;const m={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function f(e){return c.add(e),0===e?"uv":`uv${e}`}return{getParameters:function(i,o,d,g,x){const v=g.fog,y=x.geometry,b=i.isMeshStandardMaterial?g.environment:null,w=(i.isMeshStandardMaterial?n:t).get(i.envMap||b),j=w&&w.mapping===Ku?w.image.height:null,N=m[i.type];null!==i.precision&&(p=s.getMaxPrecision(i.precision),i.precision);const _=y.morphAttributes.position||y.morphAttributes.normal||y.morphAttributes.color,S=void 0!==_?_.length:0;let M,C,E,k,A=0;if(void 0!==y.morphAttributes.position&&(A=1),void 0!==y.morphAttributes.normal&&(A=2),void 0!==y.morphAttributes.color&&(A=3),N){const e=Fj[N];M=e.vertexShader,C=e.fragmentShader}else M=i.vertexShader,C=i.fragmentShader,l.update(i),E=l.getVertexShaderID(i),k=l.getFragmentShaderID(i);const T=e.getRenderTarget(),P=e.state.buffers.depth.getReversed(),O=!0===x.isInstancedMesh,R=!0===x.isBatchedMesh,I=!!i.map,D=!!i.matcap,L=!!w,F=!!i.aoMap,z=!!i.lightMap,B=!!i.bumpMap,U=!!i.normalMap,V=!!i.displacementMap,H=!!i.emissiveMap,W=!!i.metalnessMap,$=!!i.roughnessMap,G=i.anisotropy>0,q=i.clearcoat>0,X=i.dispersion>0,K=i.iridescence>0,Y=i.sheen>0,Z=i.transmission>0,J=G&&!!i.anisotropyMap,Q=q&&!!i.clearcoatMap,ee=q&&!!i.clearcoatNormalMap,te=q&&!!i.clearcoatRoughnessMap,ne=K&&!!i.iridescenceMap,re=K&&!!i.iridescenceThicknessMap,se=Y&&!!i.sheenColorMap,ie=Y&&!!i.sheenRoughnessMap,ae=!!i.specularMap,oe=!!i.specularColorMap,le=!!i.specularIntensityMap,ce=Z&&!!i.transmissionMap,de=Z&&!!i.thicknessMap,ue=!!i.gradientMap,he=!!i.alphaMap,pe=i.alphaTest>0,me=!!i.alphaHash,fe=!!i.extensions;let ge=0;i.toneMapped&&(null!==T&&!0!==T.isXRRenderTarget||(ge=e.toneMapping));const xe={shaderID:N,shaderType:i.type,shaderName:i.name,vertexShader:M,fragmentShader:C,defines:i.defines,customVertexShaderID:E,customFragmentShaderID:k,isRawShaderMaterial:!0===i.isRawShaderMaterial,glslVersion:i.glslVersion,precision:p,batching:R,batchingColor:R&&null!==x._colorsTexture,instancing:O,instancingColor:O&&null!==x.instanceColor,instancingMorph:O&&null!==x.morphTexture,supportsVertexTextures:h,outputColorSpace:null===T?e.outputColorSpace:!0===T.isXRRenderTarget?T.texture.colorSpace:gp,alphaToCoverage:!!i.alphaToCoverage,map:I,matcap:D,envMap:L,envMapMode:L&&w.mapping,envMapCubeUVHeight:j,aoMap:F,lightMap:z,bumpMap:B,normalMap:U,displacementMap:h&&V,emissiveMap:H,normalMapObjectSpace:U&&1===i.normalMapType,normalMapTangentSpace:U&&0===i.normalMapType,metalnessMap:W,roughnessMap:$,anisotropy:G,anisotropyMap:J,clearcoat:q,clearcoatMap:Q,clearcoatNormalMap:ee,clearcoatRoughnessMap:te,dispersion:X,iridescence:K,iridescenceMap:ne,iridescenceThicknessMap:re,sheen:Y,sheenColorMap:se,sheenRoughnessMap:ie,specularMap:ae,specularColorMap:oe,specularIntensityMap:le,transmission:Z,transmissionMap:ce,thicknessMap:de,gradientMap:ue,opaque:!1===i.transparent&&1===i.blending&&!1===i.alphaToCoverage,alphaMap:he,alphaTest:pe,alphaHash:me,combine:i.combine,mapUv:I&&f(i.map.channel),aoMapUv:F&&f(i.aoMap.channel),lightMapUv:z&&f(i.lightMap.channel),bumpMapUv:B&&f(i.bumpMap.channel),normalMapUv:U&&f(i.normalMap.channel),displacementMapUv:V&&f(i.displacementMap.channel),emissiveMapUv:H&&f(i.emissiveMap.channel),metalnessMapUv:W&&f(i.metalnessMap.channel),roughnessMapUv:$&&f(i.roughnessMap.channel),anisotropyMapUv:J&&f(i.anisotropyMap.channel),clearcoatMapUv:Q&&f(i.clearcoatMap.channel),clearcoatNormalMapUv:ee&&f(i.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:te&&f(i.clearcoatRoughnessMap.channel),iridescenceMapUv:ne&&f(i.iridescenceMap.channel),iridescenceThicknessMapUv:re&&f(i.iridescenceThicknessMap.channel),sheenColorMapUv:se&&f(i.sheenColorMap.channel),sheenRoughnessMapUv:ie&&f(i.sheenRoughnessMap.channel),specularMapUv:ae&&f(i.specularMap.channel),specularColorMapUv:oe&&f(i.specularColorMap.channel),specularIntensityMapUv:le&&f(i.specularIntensityMap.channel),transmissionMapUv:ce&&f(i.transmissionMap.channel),thicknessMapUv:de&&f(i.thicknessMap.channel),alphaMapUv:he&&f(i.alphaMap.channel),vertexTangents:!!y.attributes.tangent&&(U||G),vertexColors:i.vertexColors,vertexAlphas:!0===i.vertexColors&&!!y.attributes.color&&4===y.attributes.color.itemSize,pointsUvs:!0===x.isPoints&&!!y.attributes.uv&&(I||he),fog:!!v,useFog:!0===i.fog,fogExp2:!!v&&v.isFogExp2,flatShading:!0===i.flatShading&&!1===i.wireframe,sizeAttenuation:!0===i.sizeAttenuation,logarithmicDepthBuffer:u,reversedDepthBuffer:P,skinning:!0===x.isSkinnedMesh,morphTargets:void 0!==y.morphAttributes.position,morphNormals:void 0!==y.morphAttributes.normal,morphColors:void 0!==y.morphAttributes.color,morphTargetsCount:S,morphTextureStride:A,numDirLights:o.directional.length,numPointLights:o.point.length,numSpotLights:o.spot.length,numSpotLightMaps:o.spotLightMap.length,numRectAreaLights:o.rectArea.length,numHemiLights:o.hemi.length,numDirLightShadows:o.directionalShadowMap.length,numPointLightShadows:o.pointShadowMap.length,numSpotLightShadows:o.spotShadowMap.length,numSpotLightShadowsWithMaps:o.numSpotLightShadowsWithMaps,numLightProbes:o.numLightProbes,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:i.dithering,shadowMapEnabled:e.shadowMap.enabled&&d.length>0,shadowMapType:e.shadowMap.type,toneMapping:ge,decodeVideoTexture:I&&!0===i.map.isVideoTexture&&om.getTransfer(i.map.colorSpace)===vp,decodeVideoTextureEmissive:H&&!0===i.emissiveMap.isVideoTexture&&om.getTransfer(i.emissiveMap.colorSpace)===vp,premultipliedAlpha:i.premultipliedAlpha,doubleSided:2===i.side,flipSided:1===i.side,useDepthPacking:i.depthPacking>=0,depthPacking:i.depthPacking||0,index0AttributeName:i.index0AttributeName,extensionClipCullDistance:fe&&!0===i.extensions.clipCullDistance&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(fe&&!0===i.extensions.multiDraw||R)&&r.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:i.customProgramCacheKey()};return xe.vertexUv1s=c.has(1),xe.vertexUv2s=c.has(2),xe.vertexUv3s=c.has(3),c.clear(),xe},getProgramCacheKey:function(t){const n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.customVertexShaderID),n.push(t.customFragmentShaderID)),void 0!==t.defines)for(const e in t.defines)n.push(e),n.push(t.defines[e]);return!1===t.isRawShaderMaterial&&(!function(e,t){e.push(t.precision),e.push(t.outputColorSpace),e.push(t.envMapMode),e.push(t.envMapCubeUVHeight),e.push(t.mapUv),e.push(t.alphaMapUv),e.push(t.lightMapUv),e.push(t.aoMapUv),e.push(t.bumpMapUv),e.push(t.normalMapUv),e.push(t.displacementMapUv),e.push(t.emissiveMapUv),e.push(t.metalnessMapUv),e.push(t.roughnessMapUv),e.push(t.anisotropyMapUv),e.push(t.clearcoatMapUv),e.push(t.clearcoatNormalMapUv),e.push(t.clearcoatRoughnessMapUv),e.push(t.iridescenceMapUv),e.push(t.iridescenceThicknessMapUv),e.push(t.sheenColorMapUv),e.push(t.sheenRoughnessMapUv),e.push(t.specularMapUv),e.push(t.specularColorMapUv),e.push(t.specularIntensityMapUv),e.push(t.transmissionMapUv),e.push(t.thicknessMapUv),e.push(t.combine),e.push(t.fogExp2),e.push(t.sizeAttenuation),e.push(t.morphTargetsCount),e.push(t.morphAttributeCount),e.push(t.numDirLights),e.push(t.numPointLights),e.push(t.numSpotLights),e.push(t.numSpotLightMaps),e.push(t.numHemiLights),e.push(t.numRectAreaLights),e.push(t.numDirLightShadows),e.push(t.numPointLightShadows),e.push(t.numSpotLightShadows),e.push(t.numSpotLightShadowsWithMaps),e.push(t.numLightProbes),e.push(t.shadowMapType),e.push(t.toneMapping),e.push(t.numClippingPlanes),e.push(t.numClipIntersection),e.push(t.depthPacking)}(n,t),function(e,t){o.disableAll(),t.supportsVertexTextures&&o.enable(0);t.instancing&&o.enable(1);t.instancingColor&&o.enable(2);t.instancingMorph&&o.enable(3);t.matcap&&o.enable(4);t.envMap&&o.enable(5);t.normalMapObjectSpace&&o.enable(6);t.normalMapTangentSpace&&o.enable(7);t.clearcoat&&o.enable(8);t.iridescence&&o.enable(9);t.alphaTest&&o.enable(10);t.vertexColors&&o.enable(11);t.vertexAlphas&&o.enable(12);t.vertexUv1s&&o.enable(13);t.vertexUv2s&&o.enable(14);t.vertexUv3s&&o.enable(15);t.vertexTangents&&o.enable(16);t.anisotropy&&o.enable(17);t.alphaHash&&o.enable(18);t.batching&&o.enable(19);t.dispersion&&o.enable(20);t.batchingColor&&o.enable(21);t.gradientMap&&o.enable(22);e.push(o.mask),o.disableAll(),t.fog&&o.enable(0);t.useFog&&o.enable(1);t.flatShading&&o.enable(2);t.logarithmicDepthBuffer&&o.enable(3);t.reversedDepthBuffer&&o.enable(4);t.skinning&&o.enable(5);t.morphTargets&&o.enable(6);t.morphNormals&&o.enable(7);t.morphColors&&o.enable(8);t.premultipliedAlpha&&o.enable(9);t.shadowMapEnabled&&o.enable(10);t.doubleSided&&o.enable(11);t.flipSided&&o.enable(12);t.useDepthPacking&&o.enable(13);t.dithering&&o.enable(14);t.transmission&&o.enable(15);t.sheen&&o.enable(16);t.opaque&&o.enable(17);t.pointsUvs&&o.enable(18);t.decodeVideoTexture&&o.enable(19);t.decodeVideoTextureEmissive&&o.enable(20);t.alphaToCoverage&&o.enable(21);e.push(o.mask)}(n,t),n.push(e.outputColorSpace)),n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){const t=m[e.type];let n;if(t){const e=Fj[t];n=Ag.clone(e.uniforms)}else n=e.uniforms;return n},acquireProgram:function(t,n){let r;for(let e=0,s=d.length;e<s;e++){const t=d[e];if(t.cacheKey===n){r=t,++r.usedTimes;break}}return void 0===r&&(r=new H_(e,n,t,i),d.push(r)),r},releaseProgram:function(e){if(0===--e.usedTimes){const t=d.indexOf(e);d[t]=d[d.length-1],d.pop(),e.destroy()}},releaseShaderCache:function(e){l.remove(e)},programs:d,dispose:function(){l.dispose()}}}function X_(){let e=new WeakMap;return{has:function(t){return e.has(t)},get:function(t){let n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}}function K_(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function Y_(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function Z_(){const e=[];let t=0;const n=[],r=[],s=[];function i(n,r,s,i,a,o){let l=e[t];return void 0===l?(l={id:n.id,object:n,geometry:r,material:s,groupOrder:i,renderOrder:n.renderOrder,z:a,group:o},e[t]=l):(l.id=n.id,l.object=n,l.geometry=r,l.material=s,l.groupOrder=i,l.renderOrder=n.renderOrder,l.z=a,l.group=o),t++,l}return{opaque:n,transmissive:r,transparent:s,init:function(){t=0,n.length=0,r.length=0,s.length=0},push:function(e,t,a,o,l,c){const d=i(e,t,a,o,l,c);a.transmission>0?r.push(d):!0===a.transparent?s.push(d):n.push(d)},unshift:function(e,t,a,o,l,c){const d=i(e,t,a,o,l,c);a.transmission>0?r.unshift(d):!0===a.transparent?s.unshift(d):n.unshift(d)},finish:function(){for(let n=t,r=e.length;n<r;n++){const t=e[n];if(null===t.id)break;t.id=null,t.object=null,t.geometry=null,t.material=null,t.group=null}},sort:function(e,t){n.length>1&&n.sort(e||K_),r.length>1&&r.sort(t||Y_),s.length>1&&s.sort(t||Y_)}}}function J_(){let e=new WeakMap;return{get:function(t,n){const r=e.get(t);let s;return void 0===r?(s=new Z_,e.set(t,[s])):n>=r.length?(s=new Z_,r.push(s)):s=r[n],s},dispose:function(){e=new WeakMap}}}function Q_(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":n={direction:new Gp,color:new Hf};break;case"SpotLight":n={position:new Gp,direction:new Gp,color:new Hf,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Gp,color:new Hf,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Gp,skyColor:new Hf,groundColor:new Hf};break;case"RectAreaLight":n={color:new Hf,position:new Gp,halfWidth:new Gp,halfHeight:new Gp}}return e[t.id]=n,n}}}let eS=0;function tS(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function nS(e){const t=new Q_,n=function(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Wp};break;case"PointLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Wp,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let o=0;o<9;o++)r.probe.push(new Gp);const s=new Gp,i=new Ym,a=new Ym;return{setup:function(s){let i=0,a=0,o=0;for(let e=0;e<9;e++)r.probe[e].set(0,0,0);let l=0,c=0,d=0,u=0,h=0,p=0,m=0,f=0,g=0,x=0,v=0;s.sort(tS);for(let e=0,b=s.length;e<b;e++){const y=s[e],b=y.color,w=y.intensity,j=y.distance,N=y.shadow&&y.shadow.map?y.shadow.map.texture:null;if(y.isAmbientLight)i+=b.r*w,a+=b.g*w,o+=b.b*w;else if(y.isLightProbe){for(let e=0;e<9;e++)r.probe[e].addScaledVector(y.sh.coefficients[e],w);v++}else if(y.isDirectionalLight){const e=t.get(y);if(e.color.copy(y.color).multiplyScalar(y.intensity),y.castShadow){const e=y.shadow,t=n.get(y);t.shadowIntensity=e.intensity,t.shadowBias=e.bias,t.shadowNormalBias=e.normalBias,t.shadowRadius=e.radius,t.shadowMapSize=e.mapSize,r.directionalShadow[l]=t,r.directionalShadowMap[l]=N,r.directionalShadowMatrix[l]=y.shadow.matrix,p++}r.directional[l]=e,l++}else if(y.isSpotLight){const e=t.get(y);e.position.setFromMatrixPosition(y.matrixWorld),e.color.copy(b).multiplyScalar(w),e.distance=j,e.coneCos=Math.cos(y.angle),e.penumbraCos=Math.cos(y.angle*(1-y.penumbra)),e.decay=y.decay,r.spot[d]=e;const s=y.shadow;if(y.map&&(r.spotLightMap[g]=y.map,g++,s.updateMatrices(y),y.castShadow&&x++),r.spotLightMatrix[d]=s.matrix,y.castShadow){const e=n.get(y);e.shadowIntensity=s.intensity,e.shadowBias=s.bias,e.shadowNormalBias=s.normalBias,e.shadowRadius=s.radius,e.shadowMapSize=s.mapSize,r.spotShadow[d]=e,r.spotShadowMap[d]=N,f++}d++}else if(y.isRectAreaLight){const e=t.get(y);e.color.copy(b).multiplyScalar(w),e.halfWidth.set(.5*y.width,0,0),e.halfHeight.set(0,.5*y.height,0),r.rectArea[u]=e,u++}else if(y.isPointLight){const e=t.get(y);if(e.color.copy(y.color).multiplyScalar(y.intensity),e.distance=y.distance,e.decay=y.decay,y.castShadow){const e=y.shadow,t=n.get(y);t.shadowIntensity=e.intensity,t.shadowBias=e.bias,t.shadowNormalBias=e.normalBias,t.shadowRadius=e.radius,t.shadowMapSize=e.mapSize,t.shadowCameraNear=e.camera.near,t.shadowCameraFar=e.camera.far,r.pointShadow[c]=t,r.pointShadowMap[c]=N,r.pointShadowMatrix[c]=y.shadow.matrix,m++}r.point[c]=e,c++}else if(y.isHemisphereLight){const e=t.get(y);e.skyColor.copy(y.color).multiplyScalar(w),e.groundColor.copy(y.groundColor).multiplyScalar(w),r.hemi[h]=e,h++}}u>0&&(!0===e.has("OES_texture_float_linear")?(r.rectAreaLTC1=Lj.LTC_FLOAT_1,r.rectAreaLTC2=Lj.LTC_FLOAT_2):(r.rectAreaLTC1=Lj.LTC_HALF_1,r.rectAreaLTC2=Lj.LTC_HALF_2)),r.ambient[0]=i,r.ambient[1]=a,r.ambient[2]=o;const y=r.hash;y.directionalLength===l&&y.pointLength===c&&y.spotLength===d&&y.rectAreaLength===u&&y.hemiLength===h&&y.numDirectionalShadows===p&&y.numPointShadows===m&&y.numSpotShadows===f&&y.numSpotMaps===g&&y.numLightProbes===v||(r.directional.length=l,r.spot.length=d,r.rectArea.length=u,r.point.length=c,r.hemi.length=h,r.directionalShadow.length=p,r.directionalShadowMap.length=p,r.pointShadow.length=m,r.pointShadowMap.length=m,r.spotShadow.length=f,r.spotShadowMap.length=f,r.directionalShadowMatrix.length=p,r.pointShadowMatrix.length=m,r.spotLightMatrix.length=f+g-x,r.spotLightMap.length=g,r.numSpotLightShadowsWithMaps=x,r.numLightProbes=v,y.directionalLength=l,y.pointLength=c,y.spotLength=d,y.rectAreaLength=u,y.hemiLength=h,y.numDirectionalShadows=p,y.numPointShadows=m,y.numSpotShadows=f,y.numSpotMaps=g,y.numLightProbes=v,r.version=eS++)},setupView:function(e,t){let n=0,o=0,l=0,c=0,d=0;const u=t.matrixWorldInverse;for(let h=0,p=e.length;h<p;h++){const t=e[h];if(t.isDirectionalLight){const e=r.directional[n];e.direction.setFromMatrixPosition(t.matrixWorld),s.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(s),e.direction.transformDirection(u),n++}else if(t.isSpotLight){const e=r.spot[l];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(u),e.direction.setFromMatrixPosition(t.matrixWorld),s.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(s),e.direction.transformDirection(u),l++}else if(t.isRectAreaLight){const e=r.rectArea[c];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(u),a.identity(),i.copy(t.matrixWorld),i.premultiply(u),a.extractRotation(i),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),e.halfWidth.applyMatrix4(a),e.halfHeight.applyMatrix4(a),c++}else if(t.isPointLight){const e=r.point[o];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(u),o++}else if(t.isHemisphereLight){const e=r.hemi[d];e.direction.setFromMatrixPosition(t.matrixWorld),e.direction.transformDirection(u),d++}}},state:r}}function rS(e){const t=new nS(e),n=[],r=[];const s={lightsArray:n,shadowsArray:r,camera:null,lights:t,transmissionRenderTarget:{}};return{init:function(e){s.camera=e,n.length=0,r.length=0},state:s,setupLights:function(){t.setup(n)},setupLightsView:function(e){t.setupView(n,e)},pushLight:function(e){n.push(e)},pushShadow:function(e){r.push(e)}}}function sS(e){let t=new WeakMap;return{get:function(n,r=0){const s=t.get(n);let i;return void 0===s?(i=new rS(e),t.set(n,[i])):r>=s.length?(i=new rS(e),s.push(i)):i=s[r],i},dispose:function(){t=new WeakMap}}}function iS(e,t,n){let r=new Gx;const s=new Wp,i=new Wp,a=new vm,o=new bb({depthPacking:3201}),l=new wb,c={},d=n.maxTextureSize,u={[pu]:1,[mu]:0,[fu]:2},h=new Tg({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Wp},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),p=h.clone();p.defines.HORIZONTAL_PASS=1;const m=new hg;m.setAttribute("position",new tg(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const f=new _g(m,h),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1;let x=this.type;function v(n,r){const i=t.update(f);h.defines.VSM_SAMPLES!==n.blurSamples&&(h.defines.VSM_SAMPLES=n.blurSamples,p.defines.VSM_SAMPLES=n.blurSamples,h.needsUpdate=!0,p.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new bm(s.x,s.y)),h.uniforms.shadow_pass.value=n.map.texture,h.uniforms.resolution.value=n.mapSize,h.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(r,null,i,h,f,null),p.uniforms.shadow_pass.value=n.mapPass.texture,p.uniforms.resolution.value=n.mapSize,p.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(r,null,i,p,f,null)}function y(t,n,r,s){let i=null;const a=!0===r.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(void 0!==a)i=a;else if(i=!0===r.isPointLight?l:o,e.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0||n.map&&n.alphaTest>0||!0===n.alphaToCoverage){const e=i.uuid,t=n.uuid;let r=c[e];void 0===r&&(r={},c[e]=r);let s=r[t];void 0===s&&(s=i.clone(),r[t]=s,n.addEventListener("dispose",w)),i=s}if(i.visible=n.visible,i.wireframe=n.wireframe,i.side=3===s?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:u[n.side],i.alphaMap=n.alphaMap,i.alphaTest=!0===n.alphaToCoverage?.5:n.alphaTest,i.map=n.map,i.clipShadows=n.clipShadows,i.clippingPlanes=n.clippingPlanes,i.clipIntersection=n.clipIntersection,i.displacementMap=n.displacementMap,i.displacementScale=n.displacementScale,i.displacementBias=n.displacementBias,i.wireframeLinewidth=n.wireframeLinewidth,i.linewidth=n.linewidth,!0===r.isPointLight&&!0===i.isMeshDistanceMaterial){e.properties.get(i).light=r}return i}function b(n,s,i,a,o){if(!1===n.visible)return;if(n.layers.test(s.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&3===o)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,n.matrixWorld);const r=t.update(n),l=n.material;if(Array.isArray(l)){const t=r.groups;for(let c=0,d=t.length;c<d;c++){const d=t[c],u=l[d.materialIndex];if(u&&u.visible){const t=y(n,u,a,o);n.onBeforeShadow(e,n,s,i,r,t,d),e.renderBufferDirect(i,null,r,t,n,d),n.onAfterShadow(e,n,s,i,r,t,d)}}}else if(l.visible){const t=y(n,l,a,o);n.onBeforeShadow(e,n,s,i,r,t,null),e.renderBufferDirect(i,null,r,t,n,null),n.onAfterShadow(e,n,s,i,r,t,null)}}const l=n.children;for(let e=0,t=l.length;e<t;e++)b(l[e],s,i,a,o)}function w(e){e.target.removeEventListener("dispose",w);for(const t in c){const n=c[t],r=e.target.uuid;if(r in n){n[r].dispose(),delete n[r]}}}this.render=function(t,n,o){if(!1===g.enabled)return;if(!1===g.autoUpdate&&!1===g.needsUpdate)return;if(0===t.length)return;const l=e.getRenderTarget(),c=e.getActiveCubeFace(),u=e.getActiveMipmapLevel(),h=e.state;h.setBlending(0),!0===h.buffers.depth.getReversed()?h.buffers.color.setClear(0,0,0,0):h.buffers.color.setClear(1,1,1,1),h.buffers.depth.setTest(!0),h.setScissorTest(!1);const p=3!==x&&3===this.type,m=3===x&&3!==this.type;for(let f=0,g=t.length;f<g;f++){const l=t[f],c=l.shadow;if(void 0===c)continue;if(!1===c.autoUpdate&&!1===c.needsUpdate)continue;s.copy(c.mapSize);const u=c.getFrameExtents();if(s.multiply(u),i.copy(c.mapSize),(s.x>d||s.y>d)&&(s.x>d&&(i.x=Math.floor(d/u.x),s.x=i.x*u.x,c.mapSize.x=i.x),s.y>d&&(i.y=Math.floor(d/u.y),s.y=i.y*u.y,c.mapSize.y=i.y)),null===c.map||!0===p||!0===m){const e=3!==this.type?{minFilter:Qu,magFilter:Qu}:{};null!==c.map&&c.map.dispose(),c.map=new bm(s.x,s.y,e),c.map.texture.name=l.name+".shadowMap",c.camera.updateProjectionMatrix()}e.setRenderTarget(c.map),e.clear();const g=c.getViewportCount();for(let e=0;e<g;e++){const t=c.getViewport(e);a.set(i.x*t.x,i.y*t.y,i.x*t.z,i.y*t.w),h.viewport(a),c.updateMatrices(l,e),r=c.getFrustum(),b(n,o,c.camera,l,this.type)}!0!==c.isPointLightShadow&&3===this.type&&v(c,o),c.needsUpdate=!1}x=this.type,g.needsUpdate=!1,e.setRenderTarget(l,c,u)}}const aS={[Ru]:1,[Du]:6,[Fu]:7,[Lu]:5,[Iu]:0,[Bu]:2,[Uu]:4,[zu]:3};function oS(e,t){const n=new function(){let t=!1;const n=new vm;let r=null;const s=new vm(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,i,a,o){!0===o&&(t*=a,r*=a,i*=a),n.set(t,r,i,a),!1===s.equals(n)&&(e.clearColor(t,r,i,a),s.copy(n))},reset:function(){t=!1,r=null,s.set(-1,0,0,0)}}},r=new function(){let n=!1,r=!1,s=null,i=null,a=null;return{setReversed:function(e){if(r!==e){const n=t.get("EXT_clip_control");e?n.clipControlEXT(n.LOWER_LEFT_EXT,n.ZERO_TO_ONE_EXT):n.clipControlEXT(n.LOWER_LEFT_EXT,n.NEGATIVE_ONE_TO_ONE_EXT),r=e;const s=a;a=null,this.setClear(s)}},getReversed:function(){return r},setTest:function(t){t?B(e.DEPTH_TEST):U(e.DEPTH_TEST)},setMask:function(t){s===t||n||(e.depthMask(t),s=t)},setFunc:function(t){if(r&&(t=aS[t]),i!==t){switch(t){case 0:e.depthFunc(e.NEVER);break;case 1:e.depthFunc(e.ALWAYS);break;case 2:e.depthFunc(e.LESS);break;case 3:default:e.depthFunc(e.LEQUAL);break;case 4:e.depthFunc(e.EQUAL);break;case 5:e.depthFunc(e.GEQUAL);break;case 6:e.depthFunc(e.GREATER);break;case 7:e.depthFunc(e.NOTEQUAL)}i=t}},setLocked:function(e){n=e},setClear:function(t){a!==t&&(r&&(t=1-t),e.clearDepth(t),a=t)},reset:function(){n=!1,s=null,i=null,a=null,r=!1}}},s=new function(){let t=!1,n=null,r=null,s=null,i=null,a=null,o=null,l=null,c=null;return{setTest:function(n){t||(n?B(e.STENCIL_TEST):U(e.STENCIL_TEST))},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,a){r===t&&s===n&&i===a||(e.stencilFunc(t,n,a),r=t,s=n,i=a)},setOp:function(t,n,r){a===t&&o===n&&l===r||(e.stencilOp(t,n,r),a=t,o=n,l=r)},setLocked:function(e){t=e},setClear:function(t){c!==t&&(e.clearStencil(t),c=t)},reset:function(){t=!1,n=null,r=null,s=null,i=null,a=null,o=null,l=null,c=null}}},i=new WeakMap,a=new WeakMap;let o={},l={},c=new WeakMap,d=[],u=null,h=!1,p=null,m=null,f=null,g=null,x=null,v=null,y=null,b=new Hf(0,0,0),w=0,j=!1,N=null,_=null,S=null,M=null,C=null;const E=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let k=!1,A=0;const T=e.getParameter(e.VERSION);-1!==T.indexOf("WebGL")?(A=parseFloat(/^WebGL (\d)/.exec(T)[1]),k=A>=1):-1!==T.indexOf("OpenGL ES")&&(A=parseFloat(/^OpenGL ES (\d)/.exec(T)[1]),k=A>=2);let P=null,O={};const R=e.getParameter(e.SCISSOR_BOX),I=e.getParameter(e.VIEWPORT),D=(new vm).fromArray(R),L=(new vm).fromArray(I);function F(t,n,r,s){const i=new Uint8Array(4),a=e.createTexture();e.bindTexture(t,a),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(let o=0;o<r;o++)t===e.TEXTURE_3D||t===e.TEXTURE_2D_ARRAY?e.texImage3D(n,0,e.RGBA,1,1,s,0,e.RGBA,e.UNSIGNED_BYTE,i):e.texImage2D(n+o,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,i);return a}const z={};function B(t){!0!==o[t]&&(e.enable(t),o[t]=!0)}function U(t){!1!==o[t]&&(e.disable(t),o[t]=!1)}z[e.TEXTURE_2D]=F(e.TEXTURE_2D,e.TEXTURE_2D,1),z[e.TEXTURE_CUBE_MAP]=F(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),z[e.TEXTURE_2D_ARRAY]=F(e.TEXTURE_2D_ARRAY,e.TEXTURE_2D_ARRAY,1,1),z[e.TEXTURE_3D]=F(e.TEXTURE_3D,e.TEXTURE_3D,1,1),n.setClear(0,0,0,1),r.setClear(1),s.setClear(0),B(e.DEPTH_TEST),r.setFunc(3),$(!1),G(1),B(e.CULL_FACE),W(0);const V={[gu]:e.FUNC_ADD,[xu]:e.FUNC_SUBTRACT,[vu]:e.FUNC_REVERSE_SUBTRACT};V[103]=e.MIN,V[104]=e.MAX;const H={[yu]:e.ZERO,[bu]:e.ONE,[wu]:e.SRC_COLOR,[Nu]:e.SRC_ALPHA,[ku]:e.SRC_ALPHA_SATURATE,[Cu]:e.DST_COLOR,[Su]:e.DST_ALPHA,[ju]:e.ONE_MINUS_SRC_COLOR,[_u]:e.ONE_MINUS_SRC_ALPHA,[Eu]:e.ONE_MINUS_DST_COLOR,[Mu]:e.ONE_MINUS_DST_ALPHA,[Au]:e.CONSTANT_COLOR,[Tu]:e.ONE_MINUS_CONSTANT_COLOR,[Pu]:e.CONSTANT_ALPHA,[Ou]:e.ONE_MINUS_CONSTANT_ALPHA};function W(t,n,r,s,i,a,o,l,c,d){if(0!==t){if(!1===h&&(B(e.BLEND),h=!0),5===t)i=i||n,a=a||r,o=o||s,n===m&&i===x||(e.blendEquationSeparate(V[n],V[i]),m=n,x=i),r===f&&s===g&&a===v&&o===y||(e.blendFuncSeparate(H[r],H[s],H[a],H[o]),f=r,g=s,v=a,y=o),!1!==l.equals(b)&&c===w||(e.blendColor(l.r,l.g,l.b,c),b.copy(l),w=c),p=t,j=!1;else if(t!==p||d!==j){if(m===gu&&x===gu||(e.blendEquation(e.FUNC_ADD),m=gu,x=gu),d)switch(t){case 1:e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case 2:e.blendFunc(e.ONE,e.ONE);break;case 3:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case 4:e.blendFuncSeparate(e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA,e.ZERO,e.ONE)}else switch(t){case 1:e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case 2:e.blendFuncSeparate(e.SRC_ALPHA,e.ONE,e.ONE,e.ONE)}f=null,g=null,v=null,y=null,b.set(0,0,0),w=0,p=t,j=d}}else!0===h&&(U(e.BLEND),h=!1)}function $(t){N!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),N=t)}function G(t){0!==t?(B(e.CULL_FACE),t!==_&&(1===t?e.cullFace(e.BACK):2===t?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):U(e.CULL_FACE),_=t}function q(t,n,r){t?(B(e.POLYGON_OFFSET_FILL),M===n&&C===r||(e.polygonOffset(n,r),M=n,C=r)):U(e.POLYGON_OFFSET_FILL)}return{buffers:{color:n,depth:r,stencil:s},enable:B,disable:U,bindFramebuffer:function(t,n){return l[t]!==n&&(e.bindFramebuffer(t,n),l[t]=n,t===e.DRAW_FRAMEBUFFER&&(l[e.FRAMEBUFFER]=n),t===e.FRAMEBUFFER&&(l[e.DRAW_FRAMEBUFFER]=n),!0)},drawBuffers:function(t,n){let r=d,s=!1;if(t){r=c.get(n),void 0===r&&(r=[],c.set(n,r));const i=t.textures;if(r.length!==i.length||r[0]!==e.COLOR_ATTACHMENT0){for(let t=0,n=i.length;t<n;t++)r[t]=e.COLOR_ATTACHMENT0+t;r.length=i.length,s=!0}}else r[0]!==e.BACK&&(r[0]=e.BACK,s=!0);s&&e.drawBuffers(r)},useProgram:function(t){return u!==t&&(e.useProgram(t),u=t,!0)},setBlending:W,setMaterial:function(t,i){2===t.side?U(e.CULL_FACE):B(e.CULL_FACE);let a=1===t.side;i&&(a=!a),$(a),1===t.blending&&!1===t.transparent?W(0):W(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.blendColor,t.blendAlpha,t.premultipliedAlpha),r.setFunc(t.depthFunc),r.setTest(t.depthTest),r.setMask(t.depthWrite),n.setMask(t.colorWrite);const o=t.stencilWrite;s.setTest(o),o&&(s.setMask(t.stencilWriteMask),s.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),s.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),q(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits),!0===t.alphaToCoverage?B(e.SAMPLE_ALPHA_TO_COVERAGE):U(e.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:$,setCullFace:G,setLineWidth:function(t){t!==S&&(k&&e.lineWidth(t),S=t)},setPolygonOffset:q,setScissorTest:function(t){t?B(e.SCISSOR_TEST):U(e.SCISSOR_TEST)},activeTexture:function(t){void 0===t&&(t=e.TEXTURE0+E-1),P!==t&&(e.activeTexture(t),P=t)},bindTexture:function(t,n,r){void 0===r&&(r=null===P?e.TEXTURE0+E-1:P);let s=O[r];void 0===s&&(s={type:void 0,texture:void 0},O[r]=s),s.type===t&&s.texture===n||(P!==r&&(e.activeTexture(r),P=r),e.bindTexture(t,n||z[t]),s.type=t,s.texture=n)},unbindTexture:function(){const t=O[P];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D(...arguments)}catch(t){}},compressedTexImage3D:function(){try{e.compressedTexImage3D(...arguments)}catch(t){}},texImage2D:function(){try{e.texImage2D(...arguments)}catch(t){}},texImage3D:function(){try{e.texImage3D(...arguments)}catch(t){}},updateUBOMapping:function(t,n){let r=a.get(n);void 0===r&&(r=new WeakMap,a.set(n,r));let s=r.get(t);void 0===s&&(s=e.getUniformBlockIndex(n,t.name),r.set(t,s))},uniformBlockBinding:function(t,n){const r=a.get(n).get(t);i.get(n)!==r&&(e.uniformBlockBinding(n,r,t.__bindingPointIndex),i.set(n,r))},texStorage2D:function(){try{e.texStorage2D(...arguments)}catch(t){}},texStorage3D:function(){try{e.texStorage3D(...arguments)}catch(t){}},texSubImage2D:function(){try{e.texSubImage2D(...arguments)}catch(t){}},texSubImage3D:function(){try{e.texSubImage3D(...arguments)}catch(t){}},compressedTexSubImage2D:function(){try{e.compressedTexSubImage2D(...arguments)}catch(t){}},compressedTexSubImage3D:function(){try{e.compressedTexSubImage3D(...arguments)}catch(t){}},scissor:function(t){!1===D.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),D.copy(t))},viewport:function(t){!1===L.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),L.copy(t))},reset:function(){e.disable(e.BLEND),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SCISSOR_TEST),e.disable(e.STENCIL_TEST),e.disable(e.SAMPLE_ALPHA_TO_COVERAGE),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO),e.blendFuncSeparate(e.ONE,e.ZERO,e.ONE,e.ZERO),e.blendColor(0,0,0,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(e.LESS),r.setReversed(!1),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(e.ALWAYS,0,4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.clearStencil(0),e.cullFace(e.BACK),e.frontFace(e.CCW),e.polygonOffset(0,0),e.activeTexture(e.TEXTURE0),e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),e.bindFramebuffer(e.READ_FRAMEBUFFER,null),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),o={},P=null,O={},l={},c=new WeakMap,d=[],u=null,h=!1,p=null,m=null,f=null,g=null,x=null,v=null,y=null,b=new Hf(0,0,0),w=0,j=!1,N=null,_=null,S=null,M=null,C=null,D.set(0,0,e.canvas.width,e.canvas.height),L.set(0,0,e.canvas.width,e.canvas.height),n.reset(),r.reset(),s.reset()}}}function lS(e,t,n,r,s,i,a){const o=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,l="undefined"!=typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),c=new Wp,d=new WeakMap;let u;const h=new WeakMap;let p=!1;try{p="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(PUe){}function m(e,t){return p?new OffscreenCanvas(e,t):em("canvas")}function f(e,t,n){let r=1;const s=H(e);if((s.width>n||s.height>n)&&(r=n/Math.max(s.width,s.height)),r<1){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap||"undefined"!=typeof VideoFrame&&e instanceof VideoFrame){const n=Math.floor(r*s.width),i=Math.floor(r*s.height);void 0===u&&(u=m(n,i));const a=t?m(n,i):u;a.width=n,a.height=i;return a.getContext("2d").drawImage(e,0,0,n,i),a}return e}return e}function g(e){return e.generateMipmaps}function x(t){e.generateMipmap(t)}function v(t){return t.isWebGLCubeRenderTarget?e.TEXTURE_CUBE_MAP:t.isWebGL3DRenderTarget?e.TEXTURE_3D:t.isWebGLArrayRenderTarget||t.isCompressedArrayTexture?e.TEXTURE_2D_ARRAY:e.TEXTURE_2D}function y(n,r,s,i,a=!1){if(null!==n&&void 0!==e[n])return e[n];let o=r;if(r===e.RED&&(s===e.FLOAT&&(o=e.R32F),s===e.HALF_FLOAT&&(o=e.R16F),s===e.UNSIGNED_BYTE&&(o=e.R8)),r===e.RED_INTEGER&&(s===e.UNSIGNED_BYTE&&(o=e.R8UI),s===e.UNSIGNED_SHORT&&(o=e.R16UI),s===e.UNSIGNED_INT&&(o=e.R32UI),s===e.BYTE&&(o=e.R8I),s===e.SHORT&&(o=e.R16I),s===e.INT&&(o=e.R32I)),r===e.RG&&(s===e.FLOAT&&(o=e.RG32F),s===e.HALF_FLOAT&&(o=e.RG16F),s===e.UNSIGNED_BYTE&&(o=e.RG8)),r===e.RG_INTEGER&&(s===e.UNSIGNED_BYTE&&(o=e.RG8UI),s===e.UNSIGNED_SHORT&&(o=e.RG16UI),s===e.UNSIGNED_INT&&(o=e.RG32UI),s===e.BYTE&&(o=e.RG8I),s===e.SHORT&&(o=e.RG16I),s===e.INT&&(o=e.RG32I)),r===e.RGB_INTEGER&&(s===e.UNSIGNED_BYTE&&(o=e.RGB8UI),s===e.UNSIGNED_SHORT&&(o=e.RGB16UI),s===e.UNSIGNED_INT&&(o=e.RGB32UI),s===e.BYTE&&(o=e.RGB8I),s===e.SHORT&&(o=e.RGB16I),s===e.INT&&(o=e.RGB32I)),r===e.RGBA_INTEGER&&(s===e.UNSIGNED_BYTE&&(o=e.RGBA8UI),s===e.UNSIGNED_SHORT&&(o=e.RGBA16UI),s===e.UNSIGNED_INT&&(o=e.RGBA32UI),s===e.BYTE&&(o=e.RGBA8I),s===e.SHORT&&(o=e.RGBA16I),s===e.INT&&(o=e.RGBA32I)),r===e.RGB&&(s===e.UNSIGNED_INT_5_9_9_9_REV&&(o=e.RGB9_E5),s===e.UNSIGNED_INT_10F_11F_11F_REV&&(o=e.R11F_G11F_B10F)),r===e.RGBA){const t=a?xp:om.getTransfer(i);s===e.FLOAT&&(o=e.RGBA32F),s===e.HALF_FLOAT&&(o=e.RGBA16F),s===e.UNSIGNED_BYTE&&(o=t===vp?e.SRGB8_ALPHA8:e.RGBA8),s===e.UNSIGNED_SHORT_4_4_4_4&&(o=e.RGBA4),s===e.UNSIGNED_SHORT_5_5_5_1&&(o=e.RGB5_A1)}return o!==e.R16F&&o!==e.R32F&&o!==e.RG16F&&o!==e.RG32F&&o!==e.RGBA16F&&o!==e.RGBA32F||t.get("EXT_color_buffer_float"),o}function b(t,n){let r;return t?null===n||n===dh||n===fh?r=e.DEPTH24_STENCIL8:n===uh?r=e.DEPTH32F_STENCIL8:n===lh&&(r=e.DEPTH24_STENCIL8):null===n||n===dh||n===fh?r=e.DEPTH_COMPONENT24:n===uh?r=e.DEPTH_COMPONENT32F:n===lh&&(r=e.DEPTH_COMPONENT16),r}function w(e,t){return!0===g(e)||e.isFramebufferTexture&&e.minFilter!==Qu&&e.minFilter!==nh?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function j(e){const t=e.target;t.removeEventListener("dispose",j),function(e){const t=r.get(e);if(void 0===t.__webglInit)return;const n=e.source,s=h.get(n);if(s){const r=s[t.__cacheKey];r.usedTimes--,0===r.usedTimes&&_(e),0===Object.keys(s).length&&h.delete(n)}r.remove(e)}(t),t.isVideoTexture&&d.delete(t)}function N(t){const n=t.target;n.removeEventListener("dispose",N),function(t){const n=r.get(t);t.depthTexture&&(t.depthTexture.dispose(),r.remove(t.depthTexture));if(t.isWebGLCubeRenderTarget)for(let r=0;r<6;r++){if(Array.isArray(n.__webglFramebuffer[r]))for(let t=0;t<n.__webglFramebuffer[r].length;t++)e.deleteFramebuffer(n.__webglFramebuffer[r][t]);else e.deleteFramebuffer(n.__webglFramebuffer[r]);n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer[r])}else{if(Array.isArray(n.__webglFramebuffer))for(let t=0;t<n.__webglFramebuffer.length;t++)e.deleteFramebuffer(n.__webglFramebuffer[t]);else e.deleteFramebuffer(n.__webglFramebuffer);if(n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer),n.__webglMultisampledFramebuffer&&e.deleteFramebuffer(n.__webglMultisampledFramebuffer),n.__webglColorRenderbuffer)for(let t=0;t<n.__webglColorRenderbuffer.length;t++)n.__webglColorRenderbuffer[t]&&e.deleteRenderbuffer(n.__webglColorRenderbuffer[t]);n.__webglDepthRenderbuffer&&e.deleteRenderbuffer(n.__webglDepthRenderbuffer)}const s=t.textures;for(let i=0,o=s.length;i<o;i++){const t=r.get(s[i]);t.__webglTexture&&(e.deleteTexture(t.__webglTexture),a.memory.textures--),r.remove(s[i])}r.remove(t)}(n)}function _(t){const n=r.get(t);e.deleteTexture(n.__webglTexture);const s=t.source;delete h.get(s)[n.__cacheKey],a.memory.textures--}let S=0;function M(t,s){const i=r.get(t);if(t.isVideoTexture&&function(e){const t=a.render.frame;d.get(e)!==t&&(d.set(e,t),e.update())}(t),!1===t.isRenderTargetTexture&&!0!==t.isExternalTexture&&t.version>0&&i.__version!==t.version){const e=t.image;if(null===e);else if(!1!==e.complete)return void O(i,t,s)}else t.isExternalTexture&&(i.__webglTexture=t.sourceTexture?t.sourceTexture:null);n.bindTexture(e.TEXTURE_2D,i.__webglTexture,e.TEXTURE0+s)}const C={[Yu]:e.REPEAT,[Zu]:e.CLAMP_TO_EDGE,[Ju]:e.MIRRORED_REPEAT},E={[Qu]:e.NEAREST,[eh]:e.NEAREST_MIPMAP_NEAREST,[th]:e.NEAREST_MIPMAP_LINEAR,[nh]:e.LINEAR,[rh]:e.LINEAR_MIPMAP_NEAREST,[sh]:e.LINEAR_MIPMAP_LINEAR},k={[bp]:e.NEVER,[Cp]:e.ALWAYS,[wp]:e.LESS,[Np]:e.LEQUAL,[jp]:e.EQUAL,[Mp]:e.GEQUAL,[_p]:e.GREATER,[Sp]:e.NOTEQUAL};function A(n,i){if(i.type===uh&&!1===t.has("OES_texture_float_linear")&&(i.magFilter===nh||i.magFilter===rh||i.magFilter===th||i.magFilter===sh||i.minFilter===nh||i.minFilter===rh||i.minFilter===th||i.minFilter),e.texParameteri(n,e.TEXTURE_WRAP_S,C[i.wrapS]),e.texParameteri(n,e.TEXTURE_WRAP_T,C[i.wrapT]),n!==e.TEXTURE_3D&&n!==e.TEXTURE_2D_ARRAY||e.texParameteri(n,e.TEXTURE_WRAP_R,C[i.wrapR]),e.texParameteri(n,e.TEXTURE_MAG_FILTER,E[i.magFilter]),e.texParameteri(n,e.TEXTURE_MIN_FILTER,E[i.minFilter]),i.compareFunction&&(e.texParameteri(n,e.TEXTURE_COMPARE_MODE,e.COMPARE_REF_TO_TEXTURE),e.texParameteri(n,e.TEXTURE_COMPARE_FUNC,k[i.compareFunction])),!0===t.has("EXT_texture_filter_anisotropic")){if(i.magFilter===Qu)return;if(i.minFilter!==th&&i.minFilter!==sh)return;if(i.type===uh&&!1===t.has("OES_texture_float_linear"))return;if(i.anisotropy>1||r.get(i).__currentAnisotropy){const a=t.get("EXT_texture_filter_anisotropic");e.texParameterf(n,a.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(i.anisotropy,s.getMaxAnisotropy())),r.get(i).__currentAnisotropy=i.anisotropy}}}function T(t,n){let r=!1;void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",j));const s=n.source;let i=h.get(s);void 0===i&&(i={},h.set(s,i));const o=function(e){const t=[];return t.push(e.wrapS),t.push(e.wrapT),t.push(e.wrapR||0),t.push(e.magFilter),t.push(e.minFilter),t.push(e.anisotropy),t.push(e.internalFormat),t.push(e.format),t.push(e.type),t.push(e.generateMipmaps),t.push(e.premultiplyAlpha),t.push(e.flipY),t.push(e.unpackAlignment),t.push(e.colorSpace),t.join()}(n);if(o!==t.__cacheKey){void 0===i[o]&&(i[o]={texture:e.createTexture(),usedTimes:0},a.memory.textures++,r=!0),i[o].usedTimes++;const s=i[t.__cacheKey];void 0!==s&&(i[t.__cacheKey].usedTimes--,0===s.usedTimes&&_(n)),t.__cacheKey=o,t.__webglTexture=i[o].texture}return r}function P(e,t,n){return Math.floor(Math.floor(e/n)/t)}function O(t,a,o){let l=e.TEXTURE_2D;(a.isDataArrayTexture||a.isCompressedArrayTexture)&&(l=e.TEXTURE_2D_ARRAY),a.isData3DTexture&&(l=e.TEXTURE_3D);const c=T(t,a),d=a.source;n.bindTexture(l,t.__webglTexture,e.TEXTURE0+o);const u=r.get(d);if(d.version!==u.__version||!0===c){n.activeTexture(e.TEXTURE0+o);const t=om.getPrimaries(om.workingColorSpace),r=a.colorSpace===mp?null:om.getPrimaries(a.colorSpace),h=a.colorSpace===mp||t===r?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,a.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,a.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,h);let p=f(a.image,!1,s.maxTextureSize);p=V(a,p);const m=i.convert(a.format,a.colorSpace),v=i.convert(a.type);let j,N=y(a.internalFormat,m,v,a.colorSpace,a.isVideoTexture);A(l,a);const _=a.mipmaps,S=!0!==a.isVideoTexture,M=void 0===u.__version||!0===c,C=d.dataReady,E=w(a,p);if(a.isDepthTexture)N=b(a.format===jh,a.type),M&&(S?n.texStorage2D(e.TEXTURE_2D,1,N,p.width,p.height):n.texImage2D(e.TEXTURE_2D,0,N,p.width,p.height,0,m,v,null));else if(a.isDataTexture)if(_.length>0){S&&M&&n.texStorage2D(e.TEXTURE_2D,E,N,_[0].width,_[0].height);for(let t=0,r=_.length;t<r;t++)j=_[t],S?C&&n.texSubImage2D(e.TEXTURE_2D,t,0,0,j.width,j.height,m,v,j.data):n.texImage2D(e.TEXTURE_2D,t,N,j.width,j.height,0,m,v,j.data);a.generateMipmaps=!1}else S?(M&&n.texStorage2D(e.TEXTURE_2D,E,N,p.width,p.height),C&&function(t,r,s,i){const a=t.updateRanges;if(0===a.length)n.texSubImage2D(e.TEXTURE_2D,0,0,0,r.width,r.height,s,i,r.data);else{a.sort((e,t)=>e.start-t.start);let o=0;for(let e=1;e<a.length;e++){const t=a[o],n=a[e],s=t.start+t.count,i=P(n.start,r.width,4),l=P(t.start,r.width,4);n.start<=s+1&&i===l&&P(n.start+n.count-1,r.width,4)===i?t.count=Math.max(t.count,n.start+n.count-t.start):(++o,a[o]=n)}a.length=o+1;const l=e.getParameter(e.UNPACK_ROW_LENGTH),c=e.getParameter(e.UNPACK_SKIP_PIXELS),d=e.getParameter(e.UNPACK_SKIP_ROWS);e.pixelStorei(e.UNPACK_ROW_LENGTH,r.width);for(let t=0,u=a.length;t<u;t++){const o=a[t],l=Math.floor(o.start/4),c=Math.ceil(o.count/4),d=l%r.width,u=Math.floor(l/r.width),h=c,p=1;e.pixelStorei(e.UNPACK_SKIP_PIXELS,d),e.pixelStorei(e.UNPACK_SKIP_ROWS,u),n.texSubImage2D(e.TEXTURE_2D,0,d,u,h,p,s,i,r.data)}t.clearUpdateRanges(),e.pixelStorei(e.UNPACK_ROW_LENGTH,l),e.pixelStorei(e.UNPACK_SKIP_PIXELS,c),e.pixelStorei(e.UNPACK_SKIP_ROWS,d)}}(a,p,m,v)):n.texImage2D(e.TEXTURE_2D,0,N,p.width,p.height,0,m,v,p.data);else if(a.isCompressedTexture)if(a.isCompressedArrayTexture){S&&M&&n.texStorage3D(e.TEXTURE_2D_ARRAY,E,N,_[0].width,_[0].height,p.depth);for(let t=0,r=_.length;t<r;t++)if(j=_[t],a.format!==bh){if(null!==m)if(S){if(C)if(a.layerUpdates.size>0){const r=Oj(j.width,j.height,a.format,a.type);for(const s of a.layerUpdates){const i=j.data.subarray(s*r/j.data.BYTES_PER_ELEMENT,(s+1)*r/j.data.BYTES_PER_ELEMENT);n.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,s,j.width,j.height,1,m,i)}a.clearLayerUpdates()}else n.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,0,j.width,j.height,p.depth,m,j.data)}else n.compressedTexImage3D(e.TEXTURE_2D_ARRAY,t,N,j.width,j.height,p.depth,0,j.data,0,0)}else S?C&&n.texSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,0,j.width,j.height,p.depth,m,v,j.data):n.texImage3D(e.TEXTURE_2D_ARRAY,t,N,j.width,j.height,p.depth,0,m,v,j.data)}else{S&&M&&n.texStorage2D(e.TEXTURE_2D,E,N,_[0].width,_[0].height);for(let t=0,r=_.length;t<r;t++)j=_[t],a.format!==bh?null!==m&&(S?C&&n.compressedTexSubImage2D(e.TEXTURE_2D,t,0,0,j.width,j.height,m,j.data):n.compressedTexImage2D(e.TEXTURE_2D,t,N,j.width,j.height,0,j.data)):S?C&&n.texSubImage2D(e.TEXTURE_2D,t,0,0,j.width,j.height,m,v,j.data):n.texImage2D(e.TEXTURE_2D,t,N,j.width,j.height,0,m,v,j.data)}else if(a.isDataArrayTexture)if(S){if(M&&n.texStorage3D(e.TEXTURE_2D_ARRAY,E,N,p.width,p.height,p.depth),C)if(a.layerUpdates.size>0){const t=Oj(p.width,p.height,a.format,a.type);for(const r of a.layerUpdates){const s=p.data.subarray(r*t/p.data.BYTES_PER_ELEMENT,(r+1)*t/p.data.BYTES_PER_ELEMENT);n.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,r,p.width,p.height,1,m,v,s)}a.clearLayerUpdates()}else n.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,0,p.width,p.height,p.depth,m,v,p.data)}else n.texImage3D(e.TEXTURE_2D_ARRAY,0,N,p.width,p.height,p.depth,0,m,v,p.data);else if(a.isData3DTexture)S?(M&&n.texStorage3D(e.TEXTURE_3D,E,N,p.width,p.height,p.depth),C&&n.texSubImage3D(e.TEXTURE_3D,0,0,0,0,p.width,p.height,p.depth,m,v,p.data)):n.texImage3D(e.TEXTURE_3D,0,N,p.width,p.height,p.depth,0,m,v,p.data);else if(a.isFramebufferTexture){if(M)if(S)n.texStorage2D(e.TEXTURE_2D,E,N,p.width,p.height);else{let t=p.width,r=p.height;for(let s=0;s<E;s++)n.texImage2D(e.TEXTURE_2D,s,N,t,r,0,m,v,null),t>>=1,r>>=1}}else if(_.length>0){if(S&&M){const t=H(_[0]);n.texStorage2D(e.TEXTURE_2D,E,N,t.width,t.height)}for(let t=0,r=_.length;t<r;t++)j=_[t],S?C&&n.texSubImage2D(e.TEXTURE_2D,t,0,0,m,v,j):n.texImage2D(e.TEXTURE_2D,t,N,m,v,j);a.generateMipmaps=!1}else if(S){if(M){const t=H(p);n.texStorage2D(e.TEXTURE_2D,E,N,t.width,t.height)}C&&n.texSubImage2D(e.TEXTURE_2D,0,0,0,m,v,p)}else n.texImage2D(e.TEXTURE_2D,0,N,m,v,p);g(a)&&x(l),u.__version=d.version,a.onUpdate&&a.onUpdate(a)}t.__version=a.version}function R(t,s,a,l,c,d){const u=i.convert(a.format,a.colorSpace),h=i.convert(a.type),p=y(a.internalFormat,u,h,a.colorSpace),m=r.get(s),f=r.get(a);if(f.__renderTarget=s,!m.__hasExternalTextures){const t=Math.max(1,s.width>>d),r=Math.max(1,s.height>>d);c===e.TEXTURE_3D||c===e.TEXTURE_2D_ARRAY?n.texImage3D(c,d,p,t,r,s.depth,0,u,h,null):n.texImage2D(c,d,p,t,r,0,u,h,null)}n.bindFramebuffer(e.FRAMEBUFFER,t),U(s)?o.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,l,c,f.__webglTexture,0,B(s)):(c===e.TEXTURE_2D||c>=e.TEXTURE_CUBE_MAP_POSITIVE_X&&c<=e.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&e.framebufferTexture2D(e.FRAMEBUFFER,l,c,f.__webglTexture,d),n.bindFramebuffer(e.FRAMEBUFFER,null)}function I(t,n,r){if(e.bindRenderbuffer(e.RENDERBUFFER,t),n.depthBuffer){const s=n.depthTexture,i=s&&s.isDepthTexture?s.type:null,a=b(n.stencilBuffer,i),l=n.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,c=B(n);U(n)?o.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,c,a,n.width,n.height):r?e.renderbufferStorageMultisample(e.RENDERBUFFER,c,a,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,a,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,l,e.RENDERBUFFER,t)}else{const t=n.textures;for(let s=0;s<t.length;s++){const a=t[s],l=i.convert(a.format,a.colorSpace),c=i.convert(a.type),d=y(a.internalFormat,l,c,a.colorSpace),u=B(n);r&&!1===U(n)?e.renderbufferStorageMultisample(e.RENDERBUFFER,u,d,n.width,n.height):U(n)?o.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,u,d,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,d,n.width,n.height)}}e.bindRenderbuffer(e.RENDERBUFFER,null)}function D(t,s){if(s&&s.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(e.FRAMEBUFFER,t),!s.depthTexture||!s.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const i=r.get(s.depthTexture);i.__renderTarget=s,i.__webglTexture&&s.depthTexture.image.width===s.width&&s.depthTexture.image.height===s.height||(s.depthTexture.image.width=s.width,s.depthTexture.image.height=s.height,s.depthTexture.needsUpdate=!0),M(s.depthTexture,0);const a=i.__webglTexture,l=B(s);if(s.depthTexture.format===wh)U(s)?o.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,a,0,l):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,a,0);else{if(s.depthTexture.format!==jh)throw new Error("Unknown depthTexture format");U(s)?o.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,a,0,l):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,a,0)}}function L(t){const s=r.get(t),i=!0===t.isWebGLCubeRenderTarget;if(s.__boundDepthTexture!==t.depthTexture){const e=t.depthTexture;if(s.__depthDisposeCallback&&s.__depthDisposeCallback(),e){const t=()=>{delete s.__boundDepthTexture,delete s.__depthDisposeCallback,e.removeEventListener("dispose",t)};e.addEventListener("dispose",t),s.__depthDisposeCallback=t}s.__boundDepthTexture=e}if(t.depthTexture&&!s.__autoAllocateDepthBuffer){if(i)throw new Error("target.depthTexture not supported in Cube render targets");const e=t.texture.mipmaps;e&&e.length>0?D(s.__webglFramebuffer[0],t):D(s.__webglFramebuffer,t)}else if(i){s.__webglDepthbuffer=[];for(let r=0;r<6;r++)if(n.bindFramebuffer(e.FRAMEBUFFER,s.__webglFramebuffer[r]),void 0===s.__webglDepthbuffer[r])s.__webglDepthbuffer[r]=e.createRenderbuffer(),I(s.__webglDepthbuffer[r],t,!1);else{const n=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,i=s.__webglDepthbuffer[r];e.bindRenderbuffer(e.RENDERBUFFER,i),e.framebufferRenderbuffer(e.FRAMEBUFFER,n,e.RENDERBUFFER,i)}}else{const r=t.texture.mipmaps;if(r&&r.length>0?n.bindFramebuffer(e.FRAMEBUFFER,s.__webglFramebuffer[0]):n.bindFramebuffer(e.FRAMEBUFFER,s.__webglFramebuffer),void 0===s.__webglDepthbuffer)s.__webglDepthbuffer=e.createRenderbuffer(),I(s.__webglDepthbuffer,t,!1);else{const n=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,r=s.__webglDepthbuffer;e.bindRenderbuffer(e.RENDERBUFFER,r),e.framebufferRenderbuffer(e.FRAMEBUFFER,n,e.RENDERBUFFER,r)}}n.bindFramebuffer(e.FRAMEBUFFER,null)}const F=[],z=[];function B(e){return Math.min(s.maxSamples,e.samples)}function U(e){const n=r.get(e);return e.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function V(e,t){const n=e.colorSpace;e.format,e.type;return!0===e.isCompressedTexture||!0===e.isVideoTexture||n!==gp&&n!==mp&&om.getTransfer(n),t}function H(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement?(c.width=e.naturalWidth||e.width,c.height=e.naturalHeight||e.height):"undefined"!=typeof VideoFrame&&e instanceof VideoFrame?(c.width=e.displayWidth,c.height=e.displayHeight):(c.width=e.width,c.height=e.height),c}this.allocateTextureUnit=function(){const e=S;return s.maxTextures,S+=1,e},this.resetTextureUnits=function(){S=0},this.setTexture2D=M,this.setTexture2DArray=function(t,s){const i=r.get(t);!1===t.isRenderTargetTexture&&t.version>0&&i.__version!==t.version?O(i,t,s):n.bindTexture(e.TEXTURE_2D_ARRAY,i.__webglTexture,e.TEXTURE0+s)},this.setTexture3D=function(t,s){const i=r.get(t);!1===t.isRenderTargetTexture&&t.version>0&&i.__version!==t.version?O(i,t,s):n.bindTexture(e.TEXTURE_3D,i.__webglTexture,e.TEXTURE0+s)},this.setTextureCube=function(t,a){const o=r.get(t);t.version>0&&o.__version!==t.version?function(t,a,o){if(6!==a.image.length)return;const l=T(t,a),c=a.source;n.bindTexture(e.TEXTURE_CUBE_MAP,t.__webglTexture,e.TEXTURE0+o);const d=r.get(c);if(c.version!==d.__version||!0===l){n.activeTexture(e.TEXTURE0+o);const t=om.getPrimaries(om.workingColorSpace),r=a.colorSpace===mp?null:om.getPrimaries(a.colorSpace),u=a.colorSpace===mp||t===r?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,a.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,a.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,u);const h=a.isCompressedTexture||a.image[0].isCompressedTexture,p=a.image[0]&&a.image[0].isDataTexture,m=[];for(let e=0;e<6;e++)m[e]=h||p?p?a.image[e].image:a.image[e]:f(a.image[e],!0,s.maxCubemapSize),m[e]=V(a,m[e]);const v=m[0],b=i.convert(a.format,a.colorSpace),j=i.convert(a.type),N=y(a.internalFormat,b,j,a.colorSpace),_=!0!==a.isVideoTexture,S=void 0===d.__version||!0===l,M=c.dataReady;let C,E=w(a,v);if(A(e.TEXTURE_CUBE_MAP,a),h){_&&S&&n.texStorage2D(e.TEXTURE_CUBE_MAP,E,N,v.width,v.height);for(let t=0;t<6;t++){C=m[t].mipmaps;for(let r=0;r<C.length;r++){const s=C[r];a.format!==bh?null!==b&&(_?M&&n.compressedTexSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,0,0,s.width,s.height,b,s.data):n.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,N,s.width,s.height,0,s.data)):_?M&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,0,0,s.width,s.height,b,j,s.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,N,s.width,s.height,0,b,j,s.data)}}}else{if(C=a.mipmaps,_&&S){C.length>0&&E++;const t=H(m[0]);n.texStorage2D(e.TEXTURE_CUBE_MAP,E,N,t.width,t.height)}for(let t=0;t<6;t++)if(p){_?M&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,0,0,m[t].width,m[t].height,b,j,m[t].data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,N,m[t].width,m[t].height,0,b,j,m[t].data);for(let r=0;r<C.length;r++){const s=C[r].image[t].image;_?M&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r+1,0,0,s.width,s.height,b,j,s.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r+1,N,s.width,s.height,0,b,j,s.data)}}else{_?M&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,0,0,b,j,m[t]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,N,b,j,m[t]);for(let r=0;r<C.length;r++){const s=C[r];_?M&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r+1,0,0,b,j,s.image[t]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r+1,N,b,j,s.image[t])}}}g(a)&&x(e.TEXTURE_CUBE_MAP),d.__version=c.version,a.onUpdate&&a.onUpdate(a)}t.__version=a.version}(o,t,a):n.bindTexture(e.TEXTURE_CUBE_MAP,o.__webglTexture,e.TEXTURE0+a)},this.rebindTextures=function(t,n,s){const i=r.get(t);void 0!==n&&R(i.__webglFramebuffer,t,t.texture,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,0),void 0!==s&&L(t)},this.setupRenderTarget=function(t){const s=t.texture,o=r.get(t),l=r.get(s);t.addEventListener("dispose",N);const c=t.textures,d=!0===t.isWebGLCubeRenderTarget,u=c.length>1;if(u||(void 0===l.__webglTexture&&(l.__webglTexture=e.createTexture()),l.__version=s.version,a.memory.textures++),d){o.__webglFramebuffer=[];for(let t=0;t<6;t++)if(s.mipmaps&&s.mipmaps.length>0){o.__webglFramebuffer[t]=[];for(let n=0;n<s.mipmaps.length;n++)o.__webglFramebuffer[t][n]=e.createFramebuffer()}else o.__webglFramebuffer[t]=e.createFramebuffer()}else{if(s.mipmaps&&s.mipmaps.length>0){o.__webglFramebuffer=[];for(let t=0;t<s.mipmaps.length;t++)o.__webglFramebuffer[t]=e.createFramebuffer()}else o.__webglFramebuffer=e.createFramebuffer();if(u)for(let t=0,n=c.length;t<n;t++){const n=r.get(c[t]);void 0===n.__webglTexture&&(n.__webglTexture=e.createTexture(),a.memory.textures++)}if(t.samples>0&&!1===U(t)){o.__webglMultisampledFramebuffer=e.createFramebuffer(),o.__webglColorRenderbuffer=[],n.bindFramebuffer(e.FRAMEBUFFER,o.__webglMultisampledFramebuffer);for(let n=0;n<c.length;n++){const r=c[n];o.__webglColorRenderbuffer[n]=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,o.__webglColorRenderbuffer[n]);const s=i.convert(r.format,r.colorSpace),a=i.convert(r.type),l=y(r.internalFormat,s,a,r.colorSpace,!0===t.isXRRenderTarget),d=B(t);e.renderbufferStorageMultisample(e.RENDERBUFFER,d,l,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+n,e.RENDERBUFFER,o.__webglColorRenderbuffer[n])}e.bindRenderbuffer(e.RENDERBUFFER,null),t.depthBuffer&&(o.__webglDepthRenderbuffer=e.createRenderbuffer(),I(o.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(e.FRAMEBUFFER,null)}}if(d){n.bindTexture(e.TEXTURE_CUBE_MAP,l.__webglTexture),A(e.TEXTURE_CUBE_MAP,s);for(let n=0;n<6;n++)if(s.mipmaps&&s.mipmaps.length>0)for(let r=0;r<s.mipmaps.length;r++)R(o.__webglFramebuffer[n][r],t,s,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+n,r);else R(o.__webglFramebuffer[n],t,s,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+n,0);g(s)&&x(e.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(u){for(let s=0,i=c.length;s<i;s++){const i=c[s],a=r.get(i);let l=e.TEXTURE_2D;(t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(l=t.isWebGL3DRenderTarget?e.TEXTURE_3D:e.TEXTURE_2D_ARRAY),n.bindTexture(l,a.__webglTexture),A(l,i),R(o.__webglFramebuffer,t,i,e.COLOR_ATTACHMENT0+s,l,0),g(i)&&x(l)}n.unbindTexture()}else{let r=e.TEXTURE_2D;if((t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(r=t.isWebGL3DRenderTarget?e.TEXTURE_3D:e.TEXTURE_2D_ARRAY),n.bindTexture(r,l.__webglTexture),A(r,s),s.mipmaps&&s.mipmaps.length>0)for(let n=0;n<s.mipmaps.length;n++)R(o.__webglFramebuffer[n],t,s,e.COLOR_ATTACHMENT0,r,n);else R(o.__webglFramebuffer,t,s,e.COLOR_ATTACHMENT0,r,0);g(s)&&x(r),n.unbindTexture()}t.depthBuffer&&L(t)},this.updateRenderTargetMipmap=function(e){const t=e.textures;for(let s=0,i=t.length;s<i;s++){const i=t[s];if(g(i)){const t=v(e),s=r.get(i).__webglTexture;n.bindTexture(t,s),x(t),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(t.samples>0)if(!1===U(t)){const s=t.textures,i=t.width,a=t.height;let o=e.COLOR_BUFFER_BIT;const c=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,d=r.get(t),u=s.length>1;if(u)for(let t=0;t<s.length;t++)n.bindFramebuffer(e.FRAMEBUFFER,d.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,null),n.bindFramebuffer(e.FRAMEBUFFER,d.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,null,0);n.bindFramebuffer(e.READ_FRAMEBUFFER,d.__webglMultisampledFramebuffer);const h=t.texture.mipmaps;h&&h.length>0?n.bindFramebuffer(e.DRAW_FRAMEBUFFER,d.__webglFramebuffer[0]):n.bindFramebuffer(e.DRAW_FRAMEBUFFER,d.__webglFramebuffer);for(let n=0;n<s.length;n++){if(t.resolveDepthBuffer&&(t.depthBuffer&&(o|=e.DEPTH_BUFFER_BIT),t.stencilBuffer&&t.resolveStencilBuffer&&(o|=e.STENCIL_BUFFER_BIT)),u){e.framebufferRenderbuffer(e.READ_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,d.__webglColorRenderbuffer[n]);const t=r.get(s[n]).__webglTexture;e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)}e.blitFramebuffer(0,0,i,a,0,0,i,a,o,e.NEAREST),!0===l&&(F.length=0,z.length=0,F.push(e.COLOR_ATTACHMENT0+n),t.depthBuffer&&!1===t.resolveDepthBuffer&&(F.push(c),z.push(c),e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,z)),e.invalidateFramebuffer(e.READ_FRAMEBUFFER,F))}if(n.bindFramebuffer(e.READ_FRAMEBUFFER,null),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),u)for(let t=0;t<s.length;t++){n.bindFramebuffer(e.FRAMEBUFFER,d.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,d.__webglColorRenderbuffer[t]);const i=r.get(s[t]).__webglTexture;n.bindFramebuffer(e.FRAMEBUFFER,d.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,i,0)}n.bindFramebuffer(e.DRAW_FRAMEBUFFER,d.__webglMultisampledFramebuffer)}else if(t.depthBuffer&&!1===t.resolveDepthBuffer&&l){const n=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT;e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,[n])}},this.setupDepthRenderbuffer=L,this.setupFrameBufferTexture=R,this.useMultisampledRTT=U}function cS(e,t){return{convert:function(n,r=""){let s;const i=om.getTransfer(r);if(n===ih)return e.UNSIGNED_BYTE;if(n===ph)return e.UNSIGNED_SHORT_4_4_4_4;if(n===mh)return e.UNSIGNED_SHORT_5_5_5_1;if(n===gh)return e.UNSIGNED_INT_5_9_9_9_REV;if(n===xh)return e.UNSIGNED_INT_10F_11F_11F_REV;if(n===ah)return e.BYTE;if(n===oh)return e.SHORT;if(n===lh)return e.UNSIGNED_SHORT;if(n===ch)return e.INT;if(n===dh)return e.UNSIGNED_INT;if(n===uh)return e.FLOAT;if(n===hh)return e.HALF_FLOAT;if(n===vh)return e.ALPHA;if(n===yh)return e.RGB;if(n===bh)return e.RGBA;if(n===wh)return e.DEPTH_COMPONENT;if(n===jh)return e.DEPTH_STENCIL;if(n===Nh)return e.RED;if(n===_h)return e.RED_INTEGER;if(n===Sh)return e.RG;if(n===Mh)return e.RG_INTEGER;if(n===Ch)return e.RGBA_INTEGER;if(n===Eh||n===kh||n===Ah||n===Th)if(i===vp){if(s=t.get("WEBGL_compressed_texture_s3tc_srgb"),null===s)return null;if(n===Eh)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===kh)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===Ah)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===Th)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(s=t.get("WEBGL_compressed_texture_s3tc"),null===s)return null;if(n===Eh)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===kh)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===Ah)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===Th)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(n===Ph||n===Oh||n===Rh||n===Ih){if(s=t.get("WEBGL_compressed_texture_pvrtc"),null===s)return null;if(n===Ph)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===Oh)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===Rh)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===Ih)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===Dh||n===Lh||n===Fh){if(s=t.get("WEBGL_compressed_texture_etc"),null===s)return null;if(n===Dh||n===Lh)return i===vp?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(n===Fh)return i===vp?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}if(n===zh||n===Bh||n===Uh||n===Vh||n===Hh||n===Wh||n===$h||n===Gh||n===qh||n===Xh||n===Kh||n===Yh||n===Zh||n===Jh){if(s=t.get("WEBGL_compressed_texture_astc"),null===s)return null;if(n===zh)return i===vp?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===Bh)return i===vp?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===Uh)return i===vp?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===Vh)return i===vp?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===Hh)return i===vp?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===Wh)return i===vp?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===$h)return i===vp?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===Gh)return i===vp?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===qh)return i===vp?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===Xh)return i===vp?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===Kh)return i===vp?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===Yh)return i===vp?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===Zh)return i===vp?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===Jh)return i===vp?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===Qh||n===ep||n===tp){if(s=t.get("EXT_texture_compression_bptc"),null===s)return null;if(n===Qh)return i===vp?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===ep)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===tp)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(n===np||n===rp||n===sp||n===ip){if(s=t.get("EXT_texture_compression_rgtc"),null===s)return null;if(n===np)return s.COMPRESSED_RED_RGTC1_EXT;if(n===rp)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===sp)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===ip)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return n===fh?e.UNSIGNED_INT_24_8:void 0!==e[n]?e[n]:null}}}class dS{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t){if(null===this.texture){const n=new zv(e.texture);e.depthNear===t.depthNear&&e.depthFar===t.depthFar||(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=n}}getMesh(e){if(null!==this.texture&&null===this.mesh){const t=e.cameras[0].viewport,n=new Tg({vertexShader:"\nvoid main() {\n\n\tgl_Position = vec4( position, 1.0 );\n\n}",fragmentShader:"\nuniform sampler2DArray depthColor;\nuniform float depthWidth;\nuniform float depthHeight;\n\nvoid main() {\n\n\tvec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );\n\n\tif ( coord.x >= 1.0 ) {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;\n\n\t} else {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;\n\n\t}\n\n}",uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new _g(new tb(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class uS extends Pp{constructor(e,t){super();const n=this;let r=null,s=1,i=null,a="local-floor",o=1,l=null,c=null,d=null,u=null,h=null,p=null;const m="undefined"!=typeof XRWebGLBinding,f=new dS,g={},x=t.getContextAttributes();let v=null,y=null;const b=[],w=[],j=new Wp;let N=null;const _=new Dg;_.viewport=new vm;const S=new Dg;S.viewport=new vm;const M=[_,S],C=new Tw;let E=null,k=null;function A(e){const t=w.indexOf(e.inputSource);if(-1===t)return;const n=b[t];void 0!==n&&(n.update(e.inputSource,e.frame,l||i),n.dispatchEvent({type:e.type,data:e.inputSource}))}function T(){r.removeEventListener("select",A),r.removeEventListener("selectstart",A),r.removeEventListener("selectend",A),r.removeEventListener("squeeze",A),r.removeEventListener("squeezestart",A),r.removeEventListener("squeezeend",A),r.removeEventListener("end",T),r.removeEventListener("inputsourceschange",P);for(let e=0;e<b.length;e++){const t=w[e];null!==t&&(w[e]=null,b[e].disconnect(t))}E=null,k=null,f.reset();for(const e in g)delete g[e];e.setRenderTarget(v),h=null,u=null,d=null,r=null,y=null,L.stop(),n.isPresenting=!1,e.setPixelRatio(N),e.setSize(j.width,j.height,!1),n.dispatchEvent({type:"sessionend"})}function P(e){for(let t=0;t<e.removed.length;t++){const n=e.removed[t],r=w.indexOf(n);r>=0&&(w[r]=null,b[r].disconnect(n))}for(let t=0;t<e.added.length;t++){const n=e.added[t];let r=w.indexOf(n);if(-1===r){for(let e=0;e<b.length;e++){if(e>=w.length){w.push(n),r=e;break}if(null===w[e]){w[e]=n,r=e;break}}if(-1===r)break}const s=b[r];s&&s.connect(n)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=b[e];return void 0===t&&(t=new Hg,b[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=b[e];return void 0===t&&(t=new Hg,b[e]=t),t.getGripSpace()},this.getHand=function(e){let t=b[e];return void 0===t&&(t=new Hg,b[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){s=e,n.isPresenting},this.setReferenceSpaceType=function(e){a=e,n.isPresenting},this.getReferenceSpace=function(){return l||i},this.setReferenceSpace=function(e){l=e},this.getBaseLayer=function(){return null!==u?u:h},this.getBinding=function(){return null===d&&m&&(d=new XRWebGLBinding(r,t)),d},this.getFrame=function(){return p},this.getSession=function(){return r},this.setSession=async function(c){if(r=c,null!==r){v=e.getRenderTarget(),r.addEventListener("select",A),r.addEventListener("selectstart",A),r.addEventListener("selectend",A),r.addEventListener("squeeze",A),r.addEventListener("squeezestart",A),r.addEventListener("squeezeend",A),r.addEventListener("end",T),r.addEventListener("inputsourceschange",P),!0!==x.xrCompatible&&await t.makeXRCompatible(),N=e.getPixelRatio(),e.getSize(j);if(m&&"createProjectionLayer"in XRWebGLBinding.prototype){let n=null,i=null,a=null;x.depth&&(a=x.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,n=x.stencil?jh:wh,i=x.stencil?fh:dh);const o={colorFormat:t.RGBA8,depthFormat:a,scaleFactor:s};d=this.getBinding(),u=d.createProjectionLayer(o),r.updateRenderState({layers:[u]}),e.setPixelRatio(1),e.setSize(u.textureWidth,u.textureHeight,!1),y=new bm(u.textureWidth,u.textureHeight,{format:bh,type:ih,depthTexture:new Fv(u.textureWidth,u.textureHeight,i,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:x.stencil,colorSpace:e.outputColorSpace,samples:x.antialias?4:0,resolveDepthBuffer:!1===u.ignoreDepthValues,resolveStencilBuffer:!1===u.ignoreDepthValues})}else{const n={antialias:x.antialias,alpha:!0,depth:x.depth,stencil:x.stencil,framebufferScaleFactor:s};h=new XRWebGLLayer(r,t,n),r.updateRenderState({baseLayer:h}),e.setPixelRatio(1),e.setSize(h.framebufferWidth,h.framebufferHeight,!1),y=new bm(h.framebufferWidth,h.framebufferHeight,{format:bh,type:ih,colorSpace:e.outputColorSpace,stencilBuffer:x.stencil,resolveDepthBuffer:!1===h.ignoreDepthValues,resolveStencilBuffer:!1===h.ignoreDepthValues})}y.isXRRenderTarget=!0,this.setFoveation(o),l=null,i=await r.requestReferenceSpace(a),L.setContext(r),L.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(null!==r)return r.environmentBlendMode},this.getDepthTexture=function(){return f.getDepthTexture()};const O=new Gp,R=new Gp;function I(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}this.updateCamera=function(e){if(null===r)return;let t=e.near,n=e.far;null!==f.texture&&(f.depthNear>0&&(t=f.depthNear),f.depthFar>0&&(n=f.depthFar)),C.near=S.near=_.near=t,C.far=S.far=_.far=n,E===C.near&&k===C.far||(r.updateRenderState({depthNear:C.near,depthFar:C.far}),E=C.near,k=C.far),C.layers.mask=6|e.layers.mask,_.layers.mask=3&C.layers.mask,S.layers.mask=5&C.layers.mask;const s=e.parent,i=C.cameras;I(C,s);for(let r=0;r<i.length;r++)I(i[r],s);2===i.length?function(e,t,n){O.setFromMatrixPosition(t.matrixWorld),R.setFromMatrixPosition(n.matrixWorld);const r=O.distanceTo(R),s=t.projectionMatrix.elements,i=n.projectionMatrix.elements,a=s[14]/(s[10]-1),o=s[14]/(s[10]+1),l=(s[9]+1)/s[5],c=(s[9]-1)/s[5],d=(s[8]-1)/s[0],u=(i[8]+1)/i[0],h=a*d,p=a*u,m=r/(-d+u),f=m*-d;if(t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(f),e.translateZ(m),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert(),-1===s[10])e.projectionMatrix.copy(t.projectionMatrix),e.projectionMatrixInverse.copy(t.projectionMatrixInverse);else{const t=a+m,n=o+m,s=h-f,i=p+(r-f),d=l*o/n*t,u=c*o/n*t;e.projectionMatrix.makePerspective(s,i,d,u,t,n),e.projectionMatrixInverse.copy(e.projectionMatrix).invert()}}(C,_,S):C.projectionMatrix.copy(_.projectionMatrix),function(e,t,n){null===n?e.matrix.copy(t.matrixWorld):(e.matrix.copy(n.matrixWorld),e.matrix.invert(),e.matrix.multiply(t.matrixWorld));e.matrix.decompose(e.position,e.quaternion,e.scale),e.updateMatrixWorld(!0),e.projectionMatrix.copy(t.projectionMatrix),e.projectionMatrixInverse.copy(t.projectionMatrixInverse),e.isPerspectiveCamera&&(e.fov=2*Dp*Math.atan(1/e.projectionMatrix.elements[5]),e.zoom=1)}(e,C,s)},this.getCamera=function(){return C},this.getFoveation=function(){if(null!==u||null!==h)return o},this.setFoveation=function(e){o=e,null!==u&&(u.fixedFoveation=e),null!==h&&void 0!==h.fixedFoveation&&(h.fixedFoveation=e)},this.hasDepthSensing=function(){return null!==f.texture},this.getDepthSensingMesh=function(){return f.getMesh(C)},this.getCameraTexture=function(e){return g[e]};let D=null;const L=new Rj;L.setAnimationLoop(function(t,s){if(c=s.getViewerPose(l||i),p=s,null!==c){const t=c.views;null!==h&&(e.setRenderTargetFramebuffer(y,h.framebuffer),e.setRenderTarget(y));let s=!1;t.length!==C.cameras.length&&(C.cameras.length=0,s=!0);for(let n=0;n<t.length;n++){const r=t[n];let i=null;if(null!==h)i=h.getViewport(r);else{const t=d.getViewSubImage(u,r);i=t.viewport,0===n&&(e.setRenderTargetTextures(y,t.colorTexture,t.depthStencilTexture),e.setRenderTarget(y))}let a=M[n];void 0===a&&(a=new Dg,a.layers.enable(n),a.viewport=new vm,M[n]=a),a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.quaternion,a.scale),a.projectionMatrix.fromArray(r.projectionMatrix),a.projectionMatrixInverse.copy(a.projectionMatrix).invert(),a.viewport.set(i.x,i.y,i.width,i.height),0===n&&(C.matrix.copy(a.matrix),C.matrix.decompose(C.position,C.quaternion,C.scale)),!0===s&&C.cameras.push(a)}const i=r.enabledFeatures;if(i&&i.includes("depth-sensing")&&"gpu-optimized"==r.depthUsage&&m){d=n.getBinding();const e=d.getDepthInformation(t[0]);e&&e.isValid&&e.texture&&f.init(e,r.renderState)}if(i&&i.includes("camera-access")&&m){e.state.unbindTexture(),d=n.getBinding();for(let e=0;e<t.length;e++){const n=t[e].camera;if(n){let e=g[n];e||(e=new zv,g[n]=e);const t=d.getCameraImage(n);e.sourceTexture=t}}}}for(let e=0;e<b.length;e++){const t=w[e],n=b[e];null!==t&&void 0!==n&&n.update(t,s,l||i)}D&&D(t,s),s.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:s}),p=null}),this.setAnimationLoop=function(e){D=e},this.dispose=function(){}}}const hS=new of,pS=new Ym;function mS(e,t){function n(e,t){!0===e.matrixAutoUpdate&&e.updateMatrix(),t.value.copy(e.matrix)}function r(e,r){e.opacity.value=r.opacity,r.color&&e.diffuse.value.copy(r.color),r.emissive&&e.emissive.value.copy(r.emissive).multiplyScalar(r.emissiveIntensity),r.map&&(e.map.value=r.map,n(r.map,e.mapTransform)),r.alphaMap&&(e.alphaMap.value=r.alphaMap,n(r.alphaMap,e.alphaMapTransform)),r.bumpMap&&(e.bumpMap.value=r.bumpMap,n(r.bumpMap,e.bumpMapTransform),e.bumpScale.value=r.bumpScale,1===r.side&&(e.bumpScale.value*=-1)),r.normalMap&&(e.normalMap.value=r.normalMap,n(r.normalMap,e.normalMapTransform),e.normalScale.value.copy(r.normalScale),1===r.side&&e.normalScale.value.negate()),r.displacementMap&&(e.displacementMap.value=r.displacementMap,n(r.displacementMap,e.displacementMapTransform),e.displacementScale.value=r.displacementScale,e.displacementBias.value=r.displacementBias),r.emissiveMap&&(e.emissiveMap.value=r.emissiveMap,n(r.emissiveMap,e.emissiveMapTransform)),r.specularMap&&(e.specularMap.value=r.specularMap,n(r.specularMap,e.specularMapTransform)),r.alphaTest>0&&(e.alphaTest.value=r.alphaTest);const s=t.get(r),i=s.envMap,a=s.envMapRotation;i&&(e.envMap.value=i,hS.copy(a),hS.x*=-1,hS.y*=-1,hS.z*=-1,i.isCubeTexture&&!1===i.isRenderTargetTexture&&(hS.y*=-1,hS.z*=-1),e.envMapRotation.value.setFromMatrix4(pS.makeRotationFromEuler(hS)),e.flipEnvMap.value=i.isCubeTexture&&!1===i.isRenderTargetTexture?-1:1,e.reflectivity.value=r.reflectivity,e.ior.value=r.ior,e.refractionRatio.value=r.refractionRatio),r.lightMap&&(e.lightMap.value=r.lightMap,e.lightMapIntensity.value=r.lightMapIntensity,n(r.lightMap,e.lightMapTransform)),r.aoMap&&(e.aoMap.value=r.aoMap,e.aoMapIntensity.value=r.aoMapIntensity,n(r.aoMap,e.aoMapTransform))}return{refreshFogUniforms:function(t,n){n.color.getRGB(t.fogColor.value,kg(e)),n.isFog?(t.fogNear.value=n.near,t.fogFar.value=n.far):n.isFogExp2&&(t.fogDensity.value=n.density)},refreshMaterialUniforms:function(e,s,i,a,o){s.isMeshBasicMaterial||s.isMeshLambertMaterial?r(e,s):s.isMeshToonMaterial?(r(e,s),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(e,s)):s.isMeshPhongMaterial?(r(e,s),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4)}(e,s)):s.isMeshStandardMaterial?(r(e,s),function(e,t){e.metalness.value=t.metalness,t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap,n(t.metalnessMap,e.metalnessMapTransform));e.roughness.value=t.roughness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap,n(t.roughnessMap,e.roughnessMapTransform));t.envMap&&(e.envMapIntensity.value=t.envMapIntensity)}(e,s),s.isMeshPhysicalMaterial&&function(e,t,r){e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap,n(t.sheenColorMap,e.sheenColorMapTransform)),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap,n(t.sheenRoughnessMap,e.sheenRoughnessMapTransform)));t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap,n(t.clearcoatMap,e.clearcoatMapTransform)),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap,n(t.clearcoatRoughnessMap,e.clearcoatRoughnessMapTransform)),t.clearcoatNormalMap&&(e.clearcoatNormalMap.value=t.clearcoatNormalMap,n(t.clearcoatNormalMap,e.clearcoatNormalMapTransform),e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),1===t.side&&e.clearcoatNormalScale.value.negate()));t.dispersion>0&&(e.dispersion.value=t.dispersion);t.iridescence>0&&(e.iridescence.value=t.iridescence,e.iridescenceIOR.value=t.iridescenceIOR,e.iridescenceThicknessMinimum.value=t.iridescenceThicknessRange[0],e.iridescenceThicknessMaximum.value=t.iridescenceThicknessRange[1],t.iridescenceMap&&(e.iridescenceMap.value=t.iridescenceMap,n(t.iridescenceMap,e.iridescenceMapTransform)),t.iridescenceThicknessMap&&(e.iridescenceThicknessMap.value=t.iridescenceThicknessMap,n(t.iridescenceThicknessMap,e.iridescenceThicknessMapTransform)));t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=r.texture,e.transmissionSamplerSize.value.set(r.width,r.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap,n(t.transmissionMap,e.transmissionMapTransform)),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap,n(t.thicknessMap,e.thicknessMapTransform)),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor));t.anisotropy>0&&(e.anisotropyVector.value.set(t.anisotropy*Math.cos(t.anisotropyRotation),t.anisotropy*Math.sin(t.anisotropyRotation)),t.anisotropyMap&&(e.anisotropyMap.value=t.anisotropyMap,n(t.anisotropyMap,e.anisotropyMapTransform)));e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap,n(t.specularColorMap,e.specularColorMapTransform));t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap,n(t.specularIntensityMap,e.specularIntensityMapTransform))}(e,s,o)):s.isMeshMatcapMaterial?(r(e,s),function(e,t){t.matcap&&(e.matcap.value=t.matcap)}(e,s)):s.isMeshDepthMaterial?r(e,s):s.isMeshDistanceMaterial?(r(e,s),function(e,n){const r=t.get(n).light;e.referencePosition.value.setFromMatrixPosition(r.matrixWorld),e.nearDistance.value=r.shadow.camera.near,e.farDistance.value=r.shadow.camera.far}(e,s)):s.isMeshNormalMaterial?r(e,s):s.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,t.map&&(e.map.value=t.map,n(t.map,e.mapTransform))}(e,s),s.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,s)):s.isPointsMaterial?function(e,t,r,s){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*r,e.scale.value=.5*s,t.map&&(e.map.value=t.map,n(t.map,e.uvTransform));t.alphaMap&&(e.alphaMap.value=t.alphaMap,n(t.alphaMap,e.alphaMapTransform));t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}(e,s,i,a):s.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map,n(t.map,e.mapTransform));t.alphaMap&&(e.alphaMap.value=t.alphaMap,n(t.alphaMap,e.alphaMapTransform));t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}(e,s):s.isShadowMaterial?(e.color.value.copy(s.color),e.opacity.value=s.opacity):s.isShaderMaterial&&(s.uniformsNeedUpdate=!1)}}}function fS(e,t,n,r){let s={},i={},a=[];const o=e.getParameter(e.MAX_UNIFORM_BUFFER_BINDINGS);function l(e,t,n,r){const s=e.value,i=t+"_"+n;if(void 0===r[i])return r[i]="number"==typeof s||"boolean"==typeof s?s:s.clone(),!0;{const e=r[i];if("number"==typeof s||"boolean"==typeof s){if(e!==s)return r[i]=s,!0}else if(!1===e.equals(s))return e.copy(s),!0}return!1}function c(e){const t={boundary:0,storage:0};return"number"==typeof e||"boolean"==typeof e?(t.boundary=4,t.storage=4):e.isVector2?(t.boundary=8,t.storage=8):e.isVector3||e.isColor?(t.boundary=16,t.storage=12):e.isVector4?(t.boundary=16,t.storage=16):e.isMatrix3?(t.boundary=48,t.storage=48):e.isMatrix4?(t.boundary=64,t.storage=64):e.isTexture,t}function d(t){const n=t.target;n.removeEventListener("dispose",d);const r=a.indexOf(n.__bindingPointIndex);a.splice(r,1),e.deleteBuffer(s[n.id]),delete s[n.id],delete i[n.id]}return{bind:function(e,t){const n=t.program;r.uniformBlockBinding(e,n)},update:function(n,u){let h=s[n.id];void 0===h&&(!function(e){const t=e.uniforms;let n=0;const r=16;for(let i=0,a=t.length;i<a;i++){const e=Array.isArray(t[i])?t[i]:[t[i]];for(let t=0,s=e.length;t<s;t++){const s=e[t],i=Array.isArray(s.value)?s.value:[s.value];for(let e=0,t=i.length;e<t;e++){const t=c(i[e]),a=n%r,o=a%t.boundary,l=a+o;n+=o,0!==l&&r-l<t.storage&&(n+=r-l),s.__data=new Float32Array(t.storage/Float32Array.BYTES_PER_ELEMENT),s.__offset=n,n+=t.storage}}}const s=n%r;s>0&&(n+=r-s);e.__size=n,e.__cache={}}(n),h=function(t){const n=function(){for(let e=0;e<o;e++)if(-1===a.indexOf(e))return a.push(e),e;return 0}();t.__bindingPointIndex=n;const r=e.createBuffer(),s=t.__size,i=t.usage;return e.bindBuffer(e.UNIFORM_BUFFER,r),e.bufferData(e.UNIFORM_BUFFER,s,i),e.bindBuffer(e.UNIFORM_BUFFER,null),e.bindBufferBase(e.UNIFORM_BUFFER,n,r),r}(n),s[n.id]=h,n.addEventListener("dispose",d));const p=u.program;r.updateUBOMapping(n,p);const m=t.render.frame;i[n.id]!==m&&(!function(t){const n=s[t.id],r=t.uniforms,i=t.__cache;e.bindBuffer(e.UNIFORM_BUFFER,n);for(let s=0,a=r.length;s<a;s++){const t=Array.isArray(r[s])?r[s]:[r[s]];for(let n=0,r=t.length;n<r;n++){const r=t[n];if(!0===l(r,s,n,i)){const t=r.__offset,n=Array.isArray(r.value)?r.value:[r.value];let s=0;for(let i=0;i<n.length;i++){const a=n[i],o=c(a);"number"==typeof a||"boolean"==typeof a?(r.__data[0]=a,e.bufferSubData(e.UNIFORM_BUFFER,t+s,r.__data)):a.isMatrix3?(r.__data[0]=a.elements[0],r.__data[1]=a.elements[1],r.__data[2]=a.elements[2],r.__data[3]=0,r.__data[4]=a.elements[3],r.__data[5]=a.elements[4],r.__data[6]=a.elements[5],r.__data[7]=0,r.__data[8]=a.elements[6],r.__data[9]=a.elements[7],r.__data[10]=a.elements[8],r.__data[11]=0):(a.toArray(r.__data,s),s+=o.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(e.UNIFORM_BUFFER,t,r.__data)}}}e.bindBuffer(e.UNIFORM_BUFFER,null)}(n),i[n.id]=m)},dispose:function(){for(const t in s)e.deleteBuffer(s[t]);a=[],s={},i={}}}}class gS{constructor(e={}){const{canvas:t=tm(),context:n=null,depth:r=!0,stencil:s=!1,alpha:i=!1,antialias:a=!1,premultipliedAlpha:o=!0,preserveDrawingBuffer:l=!1,powerPreference:c="default",failIfMajorPerformanceCaveat:d=!1,reversedDepthBuffer:u=!1}=e;let h;if(this.isWebGLRenderer=!0,null!==n){if("undefined"!=typeof WebGLRenderingContext&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");h=n.getContextAttributes().alpha}else h=i;const p=new Uint32Array(4),m=new Int32Array(4);let f=null,g=null;const x=[],v=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=0,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const y=this;let b=!1;this._outputColorSpace=fp;let w=0,j=0,N=null,_=-1,S=null;const M=new vm,C=new vm;let E=null;const k=new Hf(0);let A=0,T=t.width,P=t.height,O=1,R=null,I=null;const D=new vm(0,0,T,P),L=new vm(0,0,T,P);let F=!1;const z=new Gx;let B=!1,U=!1;const V=new Ym,H=new Gp,W=new vm,$={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let G=!1;function q(){return null===N?O:1}let X,K,Y,Z,J,Q,ee,te,ne,re,se,ie,ae,oe,le,ce,de,ue,he,pe,me,fe,ge,xe,ve=n;function ye(e,n){return t.getContext(e,n)}try{const e={alpha:!0,depth:r,stencil:s,antialias:a,premultipliedAlpha:o,preserveDrawingBuffer:l,powerPreference:c,failIfMajorPerformanceCaveat:d};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${hu}`),t.addEventListener("webglcontextlost",je,!1),t.addEventListener("webglcontextrestored",Ne,!1),t.addEventListener("webglcontextcreationerror",_e,!1),null===ve){const t="webgl2";if(ve=ye(t,e),null===ve)throw ye(t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(Ve){throw Ve}function be(){X=new pN(ve),X.init(),fe=new cS(ve,X),K=new $j(ve,X,e,fe),Y=new oS(ve,X),K.reversedDepthBuffer&&u&&Y.buffers.depth.setReversed(!0),Z=new gN(ve),J=new X_,Q=new lS(ve,X,Y,J,K,fe,Z),ee=new qj(y),te=new hN(y),ne=new Ij(ve),ge=new Hj(ve,ne),re=new mN(ve,ne,Z,ge),se=new vN(ve,re,ne,Z),he=new xN(ve,K,Q),ce=new Gj(J),ie=new q_(y,ee,te,X,K,ge,ce),ae=new mS(y,J),oe=new J_,le=new sS(X),ue=new Vj(y,ee,te,Y,se,h,o),de=new iS(y,se,K),xe=new fS(ve,Z,K,Y),pe=new Wj(ve,X,Z),me=new fN(ve,X,Z),Z.programs=ie.programs,y.capabilities=K,y.extensions=X,y.properties=J,y.renderLists=oe,y.shadowMap=de,y.state=Y,y.info=Z}be();const we=new uS(y,ve);function je(e){e.preventDefault(),b=!0}function Ne(){b=!1;const e=Z.autoReset,t=de.enabled,n=de.autoUpdate,r=de.needsUpdate,s=de.type;be(),Z.autoReset=e,de.enabled=t,de.autoUpdate=n,de.needsUpdate=r,de.type=s}function _e(e){}function Se(e){const t=e.target;t.removeEventListener("dispose",Se),function(e){(function(e){const t=J.get(e).programs;void 0!==t&&(t.forEach(function(e){ie.releaseProgram(e)}),e.isShaderMaterial&&ie.releaseShaderCache(e))})(e),J.remove(e)}(t)}function Me(e,t,n){!0===e.transparent&&2===e.side&&!1===e.forceSinglePass?(e.side=1,e.needsUpdate=!0,De(e,t,n),e.side=0,e.needsUpdate=!0,De(e,t,n),e.side=2):De(e,t,n)}this.xr=we,this.getContext=function(){return ve},this.getContextAttributes=function(){return ve.getContextAttributes()},this.forceContextLoss=function(){const e=X.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){const e=X.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return O},this.setPixelRatio=function(e){void 0!==e&&(O=e,this.setSize(T,P,!1))},this.getSize=function(e){return e.set(T,P)},this.setSize=function(e,n,r=!0){we.isPresenting||(T=e,P=n,t.width=Math.floor(e*O),t.height=Math.floor(n*O),!0===r&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return e.set(T*O,P*O).floor()},this.setDrawingBufferSize=function(e,n,r){T=e,P=n,O=r,t.width=Math.floor(e*r),t.height=Math.floor(n*r),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return e.copy(M)},this.getViewport=function(e){return e.copy(D)},this.setViewport=function(e,t,n,r){e.isVector4?D.set(e.x,e.y,e.z,e.w):D.set(e,t,n,r),Y.viewport(M.copy(D).multiplyScalar(O).round())},this.getScissor=function(e){return e.copy(L)},this.setScissor=function(e,t,n,r){e.isVector4?L.set(e.x,e.y,e.z,e.w):L.set(e,t,n,r),Y.scissor(C.copy(L).multiplyScalar(O).round())},this.getScissorTest=function(){return F},this.setScissorTest=function(e){Y.setScissorTest(F=e)},this.setOpaqueSort=function(e){R=e},this.setTransparentSort=function(e){I=e},this.getClearColor=function(e){return e.copy(ue.getClearColor())},this.setClearColor=function(){ue.setClearColor(...arguments)},this.getClearAlpha=function(){return ue.getClearAlpha()},this.setClearAlpha=function(){ue.setClearAlpha(...arguments)},this.clear=function(e=!0,t=!0,n=!0){let r=0;if(e){let e=!1;if(null!==N){const t=N.texture.format;e=t===Ch||t===Mh||t===_h}if(e){const e=N.texture.type,t=e===ih||e===dh||e===lh||e===fh||e===ph||e===mh,n=ue.getClearColor(),r=ue.getClearAlpha(),s=n.r,i=n.g,a=n.b;t?(p[0]=s,p[1]=i,p[2]=a,p[3]=r,ve.clearBufferuiv(ve.COLOR,0,p)):(m[0]=s,m[1]=i,m[2]=a,m[3]=r,ve.clearBufferiv(ve.COLOR,0,m))}else r|=ve.COLOR_BUFFER_BIT}t&&(r|=ve.DEPTH_BUFFER_BIT),n&&(r|=ve.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),ve.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",je,!1),t.removeEventListener("webglcontextrestored",Ne,!1),t.removeEventListener("webglcontextcreationerror",_e,!1),ue.dispose(),oe.dispose(),le.dispose(),J.dispose(),ee.dispose(),te.dispose(),se.dispose(),ge.dispose(),xe.dispose(),ie.dispose(),we.dispose(),we.removeEventListener("sessionstart",Ee),we.removeEventListener("sessionend",ke),Ae.stop()},this.renderBufferDirect=function(e,t,n,r,s,i){null===t&&(t=$);const a=s.isMesh&&s.matrixWorld.determinant()<0,o=function(e,t,n,r,s){!0!==t.isScene&&(t=$);Q.resetTextureUnits();const i=t.fog,a=r.isMeshStandardMaterial?t.environment:null,o=null===N?y.outputColorSpace:!0===N.isXRRenderTarget?N.texture.colorSpace:gp,l=(r.isMeshStandardMaterial?te:ee).get(r.envMap||a),c=!0===r.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,d=!!n.attributes.tangent&&(!!r.normalMap||r.anisotropy>0),u=!!n.morphAttributes.position,h=!!n.morphAttributes.normal,p=!!n.morphAttributes.color;let m=0;r.toneMapped&&(null!==N&&!0!==N.isXRRenderTarget||(m=y.toneMapping));const f=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,x=void 0!==f?f.length:0,v=J.get(r),b=g.state.lights;if(!0===B&&(!0===U||e!==S)){const t=e===S&&r.id===_;ce.setState(r,e,t)}let w=!1;r.version===v.__version?v.needsLights&&v.lightsStateVersion!==b.state.version||v.outputColorSpace!==o||s.isBatchedMesh&&!1===v.batching?w=!0:s.isBatchedMesh||!0!==v.batching?s.isBatchedMesh&&!0===v.batchingColor&&null===s.colorTexture||s.isBatchedMesh&&!1===v.batchingColor&&null!==s.colorTexture||s.isInstancedMesh&&!1===v.instancing?w=!0:s.isInstancedMesh||!0!==v.instancing?s.isSkinnedMesh&&!1===v.skinning?w=!0:s.isSkinnedMesh||!0!==v.skinning?s.isInstancedMesh&&!0===v.instancingColor&&null===s.instanceColor||s.isInstancedMesh&&!1===v.instancingColor&&null!==s.instanceColor||s.isInstancedMesh&&!0===v.instancingMorph&&null===s.morphTexture||s.isInstancedMesh&&!1===v.instancingMorph&&null!==s.morphTexture||v.envMap!==l||!0===r.fog&&v.fog!==i?w=!0:void 0===v.numClippingPlanes||v.numClippingPlanes===ce.numPlanes&&v.numIntersection===ce.numIntersection?(v.vertexAlphas!==c||v.vertexTangents!==d||v.morphTargets!==u||v.morphNormals!==h||v.morphColors!==p||v.toneMapping!==m||v.morphTargetsCount!==x)&&(w=!0):w=!0:w=!0:w=!0:w=!0:(w=!0,v.__version=r.version);let j=v.currentProgram;!0===w&&(j=De(r,t,s));let M=!1,C=!1,E=!1;const k=j.getUniforms(),A=v.uniforms;Y.useProgram(j.program)&&(M=!0,C=!0,E=!0);r.id!==_&&(_=r.id,C=!0);if(M||S!==e){Y.buffers.depth.getReversed()&&!0!==e.reversedDepth&&(e._reversedDepth=!0,e.updateProjectionMatrix()),k.setValue(ve,"projectionMatrix",e.projectionMatrix),k.setValue(ve,"viewMatrix",e.matrixWorldInverse);const t=k.map.cameraPosition;void 0!==t&&t.setValue(ve,H.setFromMatrixPosition(e.matrixWorld)),K.logarithmicDepthBuffer&&k.setValue(ve,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial)&&k.setValue(ve,"isOrthographic",!0===e.isOrthographicCamera),S!==e&&(S=e,C=!0,E=!0)}if(s.isSkinnedMesh){k.setOptional(ve,s,"bindMatrix"),k.setOptional(ve,s,"bindMatrixInverse");const e=s.skeleton;e&&(null===e.boneTexture&&e.computeBoneTexture(),k.setValue(ve,"boneTexture",e.boneTexture,Q))}s.isBatchedMesh&&(k.setOptional(ve,s,"batchingTexture"),k.setValue(ve,"batchingTexture",s._matricesTexture,Q),k.setOptional(ve,s,"batchingIdTexture"),k.setValue(ve,"batchingIdTexture",s._indirectTexture,Q),k.setOptional(ve,s,"batchingColorTexture"),null!==s._colorsTexture&&k.setValue(ve,"batchingColorTexture",s._colorsTexture,Q));const T=n.morphAttributes;void 0===T.position&&void 0===T.normal&&void 0===T.color||he.update(s,n,j);(C||v.receiveShadow!==s.receiveShadow)&&(v.receiveShadow=s.receiveShadow,k.setValue(ve,"receiveShadow",s.receiveShadow));r.isMeshGouraudMaterial&&null!==r.envMap&&(A.envMap.value=l,A.flipEnvMap.value=l.isCubeTexture&&!1===l.isRenderTargetTexture?-1:1);r.isMeshStandardMaterial&&null===r.envMap&&null!==t.environment&&(A.envMapIntensity.value=t.environmentIntensity);C&&(k.setValue(ve,"toneMappingExposure",y.toneMappingExposure),v.needsLights&&(I=E,(R=A).ambientLightColor.needsUpdate=I,R.lightProbe.needsUpdate=I,R.directionalLights.needsUpdate=I,R.directionalLightShadows.needsUpdate=I,R.pointLights.needsUpdate=I,R.pointLightShadows.needsUpdate=I,R.spotLights.needsUpdate=I,R.spotLightShadows.needsUpdate=I,R.rectAreaLights.needsUpdate=I,R.hemisphereLights.needsUpdate=I),i&&!0===r.fog&&ae.refreshFogUniforms(A,i),ae.refreshMaterialUniforms(A,r,O,P,g.state.transmissionRenderTarget[e.id]),N_.upload(ve,Le(v),A,Q));var R,I;r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(N_.upload(ve,Le(v),A,Q),r.uniformsNeedUpdate=!1);r.isSpriteMaterial&&k.setValue(ve,"center",s.center);if(k.setValue(ve,"modelViewMatrix",s.modelViewMatrix),k.setValue(ve,"normalMatrix",s.normalMatrix),k.setValue(ve,"modelMatrix",s.matrixWorld),r.isShaderMaterial||r.isRawShaderMaterial){const e=r.uniformsGroups;for(let t=0,n=e.length;t<n;t++){const n=e[t];xe.update(n,j),xe.bind(n,j)}}return j}(e,t,n,r,s);Y.setMaterial(r,a);let l=n.index,c=1;if(!0===r.wireframe){if(l=re.getWireframeAttribute(n),void 0===l)return;c=2}const d=n.drawRange,u=n.attributes.position;let h=d.start*c,p=(d.start+d.count)*c;null!==i&&(h=Math.max(h,i.start*c),p=Math.min(p,(i.start+i.count)*c)),null!==l?(h=Math.max(h,0),p=Math.min(p,l.count)):null!=u&&(h=Math.max(h,0),p=Math.min(p,u.count));const m=p-h;if(m<0||m===1/0)return;let f;ge.setup(s,r,o,n,l);let x=pe;if(null!==l&&(f=ne.get(l),x=me,x.setIndex(f)),s.isMesh)!0===r.wireframe?(Y.setLineWidth(r.wireframeLinewidth*q()),x.setMode(ve.LINES)):x.setMode(ve.TRIANGLES);else if(s.isLine){let e=r.linewidth;void 0===e&&(e=1),Y.setLineWidth(e*q()),s.isLineSegments?x.setMode(ve.LINES):s.isLineLoop?x.setMode(ve.LINE_LOOP):x.setMode(ve.LINE_STRIP)}else s.isPoints?x.setMode(ve.POINTS):s.isSprite&&x.setMode(ve.TRIANGLES);if(s.isBatchedMesh)if(null!==s._multiDrawInstances)rm("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),x.renderMultiDrawInstances(s._multiDrawStarts,s._multiDrawCounts,s._multiDrawCount,s._multiDrawInstances);else if(X.get("WEBGL_multi_draw"))x.renderMultiDraw(s._multiDrawStarts,s._multiDrawCounts,s._multiDrawCount);else{const e=s._multiDrawStarts,t=s._multiDrawCounts,n=s._multiDrawCount,i=l?ne.get(l).bytesPerElement:1,a=J.get(r).currentProgram.getUniforms();for(let r=0;r<n;r++)a.setValue(ve,"_gl_DrawID",r),x.render(e[r]/i,t[r])}else if(s.isInstancedMesh)x.renderInstances(h,m,s.count);else if(n.isInstancedBufferGeometry){const e=void 0!==n._maxInstanceCount?n._maxInstanceCount:1/0,t=Math.min(n.instanceCount,e);x.renderInstances(h,m,t)}else x.render(h,m)},this.compile=function(e,t,n=null){null===n&&(n=e),g=le.get(n),g.init(t),v.push(g),n.traverseVisible(function(e){e.isLight&&e.layers.test(t.layers)&&(g.pushLight(e),e.castShadow&&g.pushShadow(e))}),e!==n&&e.traverseVisible(function(e){e.isLight&&e.layers.test(t.layers)&&(g.pushLight(e),e.castShadow&&g.pushShadow(e))}),g.setupLights();const r=new Set;return e.traverse(function(e){if(!(e.isMesh||e.isPoints||e.isLine||e.isSprite))return;const t=e.material;if(t)if(Array.isArray(t))for(let s=0;s<t.length;s++){const i=t[s];Me(i,n,e),r.add(i)}else Me(t,n,e),r.add(t)}),g=v.pop(),r},this.compileAsync=function(e,t,n=null){const r=this.compile(e,t,n);return new Promise(t=>{function n(){r.forEach(function(e){J.get(e).currentProgram.isReady()&&r.delete(e)}),0!==r.size?setTimeout(n,10):t(e)}null!==X.get("KHR_parallel_shader_compile")?n():setTimeout(n,10)})};let Ce=null;function Ee(){Ae.stop()}function ke(){Ae.start()}const Ae=new Rj;function Te(e,t,n,r){if(!1===e.visible)return;if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)g.pushLight(e),e.castShadow&&g.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||z.intersectsSprite(e)){r&&W.setFromMatrixPosition(e.matrixWorld).applyMatrix4(V);const t=se.update(e),s=e.material;s.visible&&f.push(e,t,s,n,W.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(!e.frustumCulled||z.intersectsObject(e))){const t=se.update(e),s=e.material;if(r&&(void 0!==e.boundingSphere?(null===e.boundingSphere&&e.computeBoundingSphere(),W.copy(e.boundingSphere.center)):(null===t.boundingSphere&&t.computeBoundingSphere(),W.copy(t.boundingSphere.center)),W.applyMatrix4(e.matrixWorld).applyMatrix4(V)),Array.isArray(s)){const r=t.groups;for(let i=0,a=r.length;i<a;i++){const a=r[i],o=s[a.materialIndex];o&&o.visible&&f.push(e,t,o,n,W.z,a)}}else s.visible&&f.push(e,t,s,n,W.z,null)}const s=e.children;for(let i=0,a=s.length;i<a;i++)Te(s[i],t,n,r)}function Pe(e,t,n,r){const s=e.opaque,i=e.transmissive,a=e.transparent;g.setupLightsView(n),!0===B&&ce.setGlobalState(y.clippingPlanes,n),r&&Y.viewport(M.copy(r)),s.length>0&&Re(s,t,n),i.length>0&&Re(i,t,n),a.length>0&&Re(a,t,n),Y.buffers.depth.setTest(!0),Y.buffers.depth.setMask(!0),Y.buffers.color.setMask(!0),Y.setPolygonOffset(!1)}function Oe(e,t,n,r){if(null!==(!0===n.isScene?n.overrideMaterial:null))return;void 0===g.state.transmissionRenderTarget[r.id]&&(g.state.transmissionRenderTarget[r.id]=new bm(1,1,{generateMipmaps:!0,type:X.has("EXT_color_buffer_half_float")||X.has("EXT_color_buffer_float")?hh:ih,minFilter:sh,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:om.workingColorSpace}));const i=g.state.transmissionRenderTarget[r.id],a=r.viewport||M;i.setSize(a.z*y.transmissionResolutionScale,a.w*y.transmissionResolutionScale);const o=y.getRenderTarget(),l=y.getActiveCubeFace(),c=y.getActiveMipmapLevel();y.setRenderTarget(i),y.getClearColor(k),A=y.getClearAlpha(),A<1&&y.setClearColor(16777215,.5),y.clear(),G&&ue.render(n);const d=y.toneMapping;y.toneMapping=0;const u=r.viewport;if(void 0!==r.viewport&&(r.viewport=void 0),g.setupLightsView(r),!0===B&&ce.setGlobalState(y.clippingPlanes,r),Re(e,n,r),Q.updateMultisampleRenderTarget(i),Q.updateRenderTargetMipmap(i),!1===X.has("WEBGL_multisampled_render_to_texture")){let e=!1;for(let s=0,i=t.length;s<i;s++){const i=t[s],a=i.object,o=i.geometry,l=i.material,c=i.group;if(2===l.side&&a.layers.test(r.layers)){const t=l.side;l.side=1,l.needsUpdate=!0,Ie(a,n,r,o,l,c),l.side=t,l.needsUpdate=!0,e=!0}}!0===e&&(Q.updateMultisampleRenderTarget(i),Q.updateRenderTargetMipmap(i))}y.setRenderTarget(o,l,c),y.setClearColor(k,A),void 0!==u&&(r.viewport=u),y.toneMapping=d}function Re(e,t,n){const r=!0===t.isScene?t.overrideMaterial:null;for(let s=0,i=e.length;s<i;s++){const i=e[s],a=i.object,o=i.geometry,l=i.group;let c=i.material;!0===c.allowOverride&&null!==r&&(c=r),a.layers.test(n.layers)&&Ie(a,t,n,o,c,l)}}function Ie(e,t,n,r,s,i){e.onBeforeRender(y,t,n,r,s,i),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),s.onBeforeRender(y,t,n,r,e,i),!0===s.transparent&&2===s.side&&!1===s.forceSinglePass?(s.side=1,s.needsUpdate=!0,y.renderBufferDirect(n,t,r,s,e,i),s.side=0,s.needsUpdate=!0,y.renderBufferDirect(n,t,r,s,e,i),s.side=2):y.renderBufferDirect(n,t,r,s,e,i),e.onAfterRender(y,t,n,r,s,i)}function De(e,t,n){!0!==t.isScene&&(t=$);const r=J.get(e),s=g.state.lights,i=g.state.shadowsArray,a=s.state.version,o=ie.getParameters(e,s.state,i,t,n),l=ie.getProgramCacheKey(o);let c=r.programs;r.environment=e.isMeshStandardMaterial?t.environment:null,r.fog=t.fog,r.envMap=(e.isMeshStandardMaterial?te:ee).get(e.envMap||r.environment),r.envMapRotation=null!==r.environment&&null===e.envMap?t.environmentRotation:e.envMapRotation,void 0===c&&(e.addEventListener("dispose",Se),c=new Map,r.programs=c);let d=c.get(l);if(void 0!==d){if(r.currentProgram===d&&r.lightsStateVersion===a)return Fe(e,o),d}else o.uniforms=ie.getUniforms(e),e.onBeforeCompile(o,y),d=ie.acquireProgram(o,l),c.set(l,d),r.uniforms=o.uniforms;const u=r.uniforms;return(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(u.clippingPlanes=ce.uniform),Fe(e,o),r.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),r.lightsStateVersion=a,r.needsLights&&(u.ambientLightColor.value=s.state.ambient,u.lightProbe.value=s.state.probe,u.directionalLights.value=s.state.directional,u.directionalLightShadows.value=s.state.directionalShadow,u.spotLights.value=s.state.spot,u.spotLightShadows.value=s.state.spotShadow,u.rectAreaLights.value=s.state.rectArea,u.ltc_1.value=s.state.rectAreaLTC1,u.ltc_2.value=s.state.rectAreaLTC2,u.pointLights.value=s.state.point,u.pointLightShadows.value=s.state.pointShadow,u.hemisphereLights.value=s.state.hemi,u.directionalShadowMap.value=s.state.directionalShadowMap,u.directionalShadowMatrix.value=s.state.directionalShadowMatrix,u.spotShadowMap.value=s.state.spotShadowMap,u.spotLightMatrix.value=s.state.spotLightMatrix,u.spotLightMap.value=s.state.spotLightMap,u.pointShadowMap.value=s.state.pointShadowMap,u.pointShadowMatrix.value=s.state.pointShadowMatrix),r.currentProgram=d,r.uniformsList=null,d}function Le(e){if(null===e.uniformsList){const t=e.currentProgram.getUniforms();e.uniformsList=N_.seqWithValue(t.seq,e.uniforms)}return e.uniformsList}function Fe(e,t){const n=J.get(e);n.outputColorSpace=t.outputColorSpace,n.batching=t.batching,n.batchingColor=t.batchingColor,n.instancing=t.instancing,n.instancingColor=t.instancingColor,n.instancingMorph=t.instancingMorph,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphColors=t.morphColors,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents,n.toneMapping=t.toneMapping}Ae.setAnimationLoop(function(e){Ce&&Ce(e)}),"undefined"!=typeof self&&Ae.setContext(self),this.setAnimationLoop=function(e){Ce=e,we.setAnimationLoop(e),null===e?Ae.stop():Ae.start()},we.addEventListener("sessionstart",Ee),we.addEventListener("sessionend",ke),this.render=function(e,t){if(void 0!==t&&!0!==t.isCamera)return;if(!0===b)return;if(!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),!0===we.enabled&&!0===we.isPresenting&&(!0===we.cameraAutoUpdate&&we.updateCamera(t),t=we.getCamera()),!0===e.isScene&&e.onBeforeRender(y,e,t,N),g=le.get(e,v.length),g.init(t),v.push(g),V.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),z.setFromProjectionMatrix(V,Ap,t.reversedDepth),U=this.localClippingEnabled,B=ce.init(this.clippingPlanes,U),f=oe.get(e,x.length),f.init(),x.push(f),!0===we.enabled&&!0===we.isPresenting){const e=y.xr.getDepthSensingMesh();null!==e&&Te(e,t,-1/0,y.sortObjects)}Te(e,t,0,y.sortObjects),f.finish(),!0===y.sortObjects&&f.sort(R,I),G=!1===we.enabled||!1===we.isPresenting||!1===we.hasDepthSensing(),G&&ue.addToRenderList(f,e),this.info.render.frame++,!0===B&&ce.beginShadows();const n=g.state.shadowsArray;de.render(n,e,t),!0===B&&ce.endShadows(),!0===this.info.autoReset&&this.info.reset();const r=f.opaque,s=f.transmissive;if(g.setupLights(),t.isArrayCamera){const n=t.cameras;if(s.length>0)for(let t=0,i=n.length;t<i;t++){Oe(r,s,e,n[t])}G&&ue.render(e);for(let t=0,r=n.length;t<r;t++){const r=n[t];Pe(f,e,r,r.viewport)}}else s.length>0&&Oe(r,s,e,t),G&&ue.render(e),Pe(f,e,t);null!==N&&0===j&&(Q.updateMultisampleRenderTarget(N),Q.updateRenderTargetMipmap(N)),!0===e.isScene&&e.onAfterRender(y,e,t),ge.resetDefaultState(),_=-1,S=null,v.pop(),v.length>0?(g=v[v.length-1],!0===B&&ce.setGlobalState(y.clippingPlanes,g.state.camera)):g=null,x.pop(),f=x.length>0?x[x.length-1]:null},this.getActiveCubeFace=function(){return w},this.getActiveMipmapLevel=function(){return j},this.getRenderTarget=function(){return N},this.setRenderTargetTextures=function(e,t,n){const r=J.get(e);r.__autoAllocateDepthBuffer=!1===e.resolveDepthBuffer,!1===r.__autoAllocateDepthBuffer&&(r.__useRenderToTexture=!1),J.get(e.texture).__webglTexture=t,J.get(e.depthTexture).__webglTexture=r.__autoAllocateDepthBuffer?void 0:n,r.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(e,t){const n=J.get(e);n.__webglFramebuffer=t,n.__useDefaultFramebuffer=void 0===t};const ze=ve.createFramebuffer();this.setRenderTarget=function(e,t=0,n=0){N=e,w=t,j=n;let r=!0,s=null,i=!1,a=!1;if(e){const o=J.get(e);if(void 0!==o.__useDefaultFramebuffer)Y.bindFramebuffer(ve.FRAMEBUFFER,null),r=!1;else if(void 0===o.__webglFramebuffer)Q.setupRenderTarget(e);else if(o.__hasExternalTextures)Q.rebindTextures(e,J.get(e.texture).__webglTexture,J.get(e.depthTexture).__webglTexture);else if(e.depthBuffer){const t=e.depthTexture;if(o.__boundDepthTexture!==t){if(null!==t&&J.has(t)&&(e.width!==t.image.width||e.height!==t.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");Q.setupDepthRenderbuffer(e)}}const l=e.texture;(l.isData3DTexture||l.isDataArrayTexture||l.isCompressedArrayTexture)&&(a=!0);const c=J.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(s=Array.isArray(c[t])?c[t][n]:c[t],i=!0):s=e.samples>0&&!1===Q.useMultisampledRTT(e)?J.get(e).__webglMultisampledFramebuffer:Array.isArray(c)?c[n]:c,M.copy(e.viewport),C.copy(e.scissor),E=e.scissorTest}else M.copy(D).multiplyScalar(O).floor(),C.copy(L).multiplyScalar(O).floor(),E=F;0!==n&&(s=ze);if(Y.bindFramebuffer(ve.FRAMEBUFFER,s)&&r&&Y.drawBuffers(e,s),Y.viewport(M),Y.scissor(C),Y.setScissorTest(E),i){const r=J.get(e.texture);ve.framebufferTexture2D(ve.FRAMEBUFFER,ve.COLOR_ATTACHMENT0,ve.TEXTURE_CUBE_MAP_POSITIVE_X+t,r.__webglTexture,n)}else if(a){const r=t;for(let t=0;t<e.textures.length;t++){const s=J.get(e.textures[t]);ve.framebufferTextureLayer(ve.FRAMEBUFFER,ve.COLOR_ATTACHMENT0+t,s.__webglTexture,n,r)}}else if(null!==e&&0!==n){const t=J.get(e.texture);ve.framebufferTexture2D(ve.FRAMEBUFFER,ve.COLOR_ATTACHMENT0,ve.TEXTURE_2D,t.__webglTexture,n)}_=-1},this.readRenderTargetPixels=function(e,t,n,r,s,i,a,o=0){if(!e||!e.isWebGLRenderTarget)return;let l=J.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==a&&(l=l[a]),l){Y.bindFramebuffer(ve.FRAMEBUFFER,l);try{const a=e.textures[o],l=a.format,c=a.type;if(!K.textureFormatReadable(l))return;if(!K.textureTypeReadable(c))return;t>=0&&t<=e.width-r&&n>=0&&n<=e.height-s&&(e.textures.length>1&&ve.readBuffer(ve.COLOR_ATTACHMENT0+o),ve.readPixels(t,n,r,s,fe.convert(l),fe.convert(c),i))}finally{const e=null!==N?J.get(N).__webglFramebuffer:null;Y.bindFramebuffer(ve.FRAMEBUFFER,e)}}},this.readRenderTargetPixelsAsync=async function(e,t,n,r,s,i,a,o=0){if(!e||!e.isWebGLRenderTarget)throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let l=J.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==a&&(l=l[a]),l){if(t>=0&&t<=e.width-r&&n>=0&&n<=e.height-s){Y.bindFramebuffer(ve.FRAMEBUFFER,l);const a=e.textures[o],c=a.format,d=a.type;if(!K.textureFormatReadable(c))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!K.textureTypeReadable(d))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const u=ve.createBuffer();ve.bindBuffer(ve.PIXEL_PACK_BUFFER,u),ve.bufferData(ve.PIXEL_PACK_BUFFER,i.byteLength,ve.STREAM_READ),e.textures.length>1&&ve.readBuffer(ve.COLOR_ATTACHMENT0+o),ve.readPixels(t,n,r,s,fe.convert(c),fe.convert(d),0);const h=null!==N?J.get(N).__webglFramebuffer:null;Y.bindFramebuffer(ve.FRAMEBUFFER,h);const p=ve.fenceSync(ve.SYNC_GPU_COMMANDS_COMPLETE,0);return ve.flush(),await function(e,t,n){return new Promise(function(r,s){setTimeout(function i(){switch(e.clientWaitSync(t,e.SYNC_FLUSH_COMMANDS_BIT,0)){case e.WAIT_FAILED:s();break;case e.TIMEOUT_EXPIRED:setTimeout(i,n);break;default:r()}},n)})}(ve,p,4),ve.bindBuffer(ve.PIXEL_PACK_BUFFER,u),ve.getBufferSubData(ve.PIXEL_PACK_BUFFER,0,i),ve.deleteBuffer(u),ve.deleteSync(p),i}throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(e,t=null,n=0){const r=Math.pow(2,-n),s=Math.floor(e.image.width*r),i=Math.floor(e.image.height*r),a=null!==t?t.x:0,o=null!==t?t.y:0;Q.setTexture2D(e,0),ve.copyTexSubImage2D(ve.TEXTURE_2D,n,0,0,a,o,s,i),Y.unbindTexture()};const Be=ve.createFramebuffer(),Ue=ve.createFramebuffer();this.copyTextureToTexture=function(e,t,n=null,r=null,s=0,i=null){let a,o,l,c,d,u,h,p,m;null===i&&(0!==s?(rm("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),i=s,s=0):i=0);const f=e.isCompressedTexture?e.mipmaps[i]:e.image;if(null!==n)a=n.max.x-n.min.x,o=n.max.y-n.min.y,l=n.isBox3?n.max.z-n.min.z:1,c=n.min.x,d=n.min.y,u=n.isBox3?n.min.z:0;else{const t=Math.pow(2,-s);a=Math.floor(f.width*t),o=Math.floor(f.height*t),l=e.isDataArrayTexture?f.depth:e.isData3DTexture?Math.floor(f.depth*t):1,c=0,d=0,u=0}null!==r?(h=r.x,p=r.y,m=r.z):(h=0,p=0,m=0);const g=fe.convert(t.format),x=fe.convert(t.type);let v;t.isData3DTexture?(Q.setTexture3D(t,0),v=ve.TEXTURE_3D):t.isDataArrayTexture||t.isCompressedArrayTexture?(Q.setTexture2DArray(t,0),v=ve.TEXTURE_2D_ARRAY):(Q.setTexture2D(t,0),v=ve.TEXTURE_2D),ve.pixelStorei(ve.UNPACK_FLIP_Y_WEBGL,t.flipY),ve.pixelStorei(ve.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),ve.pixelStorei(ve.UNPACK_ALIGNMENT,t.unpackAlignment);const y=ve.getParameter(ve.UNPACK_ROW_LENGTH),b=ve.getParameter(ve.UNPACK_IMAGE_HEIGHT),w=ve.getParameter(ve.UNPACK_SKIP_PIXELS),j=ve.getParameter(ve.UNPACK_SKIP_ROWS),N=ve.getParameter(ve.UNPACK_SKIP_IMAGES);ve.pixelStorei(ve.UNPACK_ROW_LENGTH,f.width),ve.pixelStorei(ve.UNPACK_IMAGE_HEIGHT,f.height),ve.pixelStorei(ve.UNPACK_SKIP_PIXELS,c),ve.pixelStorei(ve.UNPACK_SKIP_ROWS,d),ve.pixelStorei(ve.UNPACK_SKIP_IMAGES,u);const _=e.isDataArrayTexture||e.isData3DTexture,S=t.isDataArrayTexture||t.isData3DTexture;if(e.isDepthTexture){const n=J.get(e),r=J.get(t),f=J.get(n.__renderTarget),g=J.get(r.__renderTarget);Y.bindFramebuffer(ve.READ_FRAMEBUFFER,f.__webglFramebuffer),Y.bindFramebuffer(ve.DRAW_FRAMEBUFFER,g.__webglFramebuffer);for(let x=0;x<l;x++)_&&(ve.framebufferTextureLayer(ve.READ_FRAMEBUFFER,ve.COLOR_ATTACHMENT0,J.get(e).__webglTexture,s,u+x),ve.framebufferTextureLayer(ve.DRAW_FRAMEBUFFER,ve.COLOR_ATTACHMENT0,J.get(t).__webglTexture,i,m+x)),ve.blitFramebuffer(c,d,a,o,h,p,a,o,ve.DEPTH_BUFFER_BIT,ve.NEAREST);Y.bindFramebuffer(ve.READ_FRAMEBUFFER,null),Y.bindFramebuffer(ve.DRAW_FRAMEBUFFER,null)}else if(0!==s||e.isRenderTargetTexture||J.has(e)){const n=J.get(e),r=J.get(t);Y.bindFramebuffer(ve.READ_FRAMEBUFFER,Be),Y.bindFramebuffer(ve.DRAW_FRAMEBUFFER,Ue);for(let e=0;e<l;e++)_?ve.framebufferTextureLayer(ve.READ_FRAMEBUFFER,ve.COLOR_ATTACHMENT0,n.__webglTexture,s,u+e):ve.framebufferTexture2D(ve.READ_FRAMEBUFFER,ve.COLOR_ATTACHMENT0,ve.TEXTURE_2D,n.__webglTexture,s),S?ve.framebufferTextureLayer(ve.DRAW_FRAMEBUFFER,ve.COLOR_ATTACHMENT0,r.__webglTexture,i,m+e):ve.framebufferTexture2D(ve.DRAW_FRAMEBUFFER,ve.COLOR_ATTACHMENT0,ve.TEXTURE_2D,r.__webglTexture,i),0!==s?ve.blitFramebuffer(c,d,a,o,h,p,a,o,ve.COLOR_BUFFER_BIT,ve.NEAREST):S?ve.copyTexSubImage3D(v,i,h,p,m+e,c,d,a,o):ve.copyTexSubImage2D(v,i,h,p,c,d,a,o);Y.bindFramebuffer(ve.READ_FRAMEBUFFER,null),Y.bindFramebuffer(ve.DRAW_FRAMEBUFFER,null)}else S?e.isDataTexture||e.isData3DTexture?ve.texSubImage3D(v,i,h,p,m,a,o,l,g,x,f.data):t.isCompressedArrayTexture?ve.compressedTexSubImage3D(v,i,h,p,m,a,o,l,g,f.data):ve.texSubImage3D(v,i,h,p,m,a,o,l,g,x,f):e.isDataTexture?ve.texSubImage2D(ve.TEXTURE_2D,i,h,p,a,o,g,x,f.data):e.isCompressedTexture?ve.compressedTexSubImage2D(ve.TEXTURE_2D,i,h,p,f.width,f.height,g,f.data):ve.texSubImage2D(ve.TEXTURE_2D,i,h,p,a,o,g,x,f);ve.pixelStorei(ve.UNPACK_ROW_LENGTH,y),ve.pixelStorei(ve.UNPACK_IMAGE_HEIGHT,b),ve.pixelStorei(ve.UNPACK_SKIP_PIXELS,w),ve.pixelStorei(ve.UNPACK_SKIP_ROWS,j),ve.pixelStorei(ve.UNPACK_SKIP_IMAGES,N),0===i&&t.generateMipmaps&&ve.generateMipmap(v),Y.unbindTexture()},this.initRenderTarget=function(e){void 0===J.get(e).__webglFramebuffer&&Q.setupRenderTarget(e)},this.initTexture=function(e){e.isCubeTexture?Q.setTextureCube(e,0):e.isData3DTexture?Q.setTexture3D(e,0):e.isDataArrayTexture||e.isCompressedArrayTexture?Q.setTexture2DArray(e,0):Q.setTexture2D(e,0),Y.unbindTexture()},this.resetState=function(){w=0,j=0,N=null,Y.reset(),ge.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Ap}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=om._getDrawingBufferColorSpace(e),t.unpackColorSpace=om._getUnpackColorSpace()}}const xS=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:4,AddEquation:gu,AddOperation:2,AdditiveAnimationBlendMode:pp,AdditiveBlending:2,AgXToneMapping:6,AlphaFormat:vh,AlwaysCompare:519,AlwaysDepth:1,AlwaysStencilFunc:519,AmbientLight:mw,AnimationAction:Zw,AnimationClip:Ub,AnimationLoader:class extends Gb{constructor(e){super(e)}load(e,t,n,r){const s=this,i=new Kb(this.manager);i.setPath(this.path),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials),i.load(e,function(n){try{t(s.parse(JSON.parse(n)))}catch(i){r&&r(i),s.manager.itemError(e)}},n,r)}parse(e){const t=[];for(let n=0;n<e.length;n++){const r=Ub.parse(e[n]);t.push(r)}return t}},AnimationMixer:class extends Pp{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,r=e._clip.tracks,s=r.length,i=e._propertyBindings,a=e._interpolants,o=n.uuid,l=this._bindingsByRootAndName;let c=l[o];void 0===c&&(c={},l[o]=c);for(let d=0;d!==s;++d){const e=r[d],s=e.name;let l=c[s];if(void 0!==l)++l.referenceCount,i[d]=l;else{if(l=i[d],void 0!==l){null===l._cacheIndex&&(++l.referenceCount,this._addInactiveBinding(l,o,s));continue}const r=t&&t._propertyBindings[d].binding.parsedPath;l=new Hw(Yw.create(n,s,r),e.ValueTypeName,e.getValueSize()),++l.referenceCount,this._addInactiveBinding(l,o,s),i[d]=l}a[d].resultBuffer=l.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){const t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0===n.useCount++&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0===--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,n){const r=this._actions,s=this._actionsByClip;let i=s[t];if(void 0===i)i={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=i;else{const t=i.knownActions;e._byClipCacheIndex=t.length,t.push(e)}e._cacheIndex=r.length,r.push(e),i.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,i=this._actionsByClip,a=i[s],o=a.knownActions,l=o[o.length-1],c=e._byClipCacheIndex;l._byClipCacheIndex=c,o[c]=l,o.pop(),e._byClipCacheIndex=null;delete a.actionByRoot[(e._localRoot||this._root).uuid],0===o.length&&delete i[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const e=t[n];0===--e.referenceCount&&this._removeInactiveBinding(e)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_addInactiveBinding(e,t,n){const r=this._bindingsByRootAndName,s=this._bindings;let i=r[t];void 0===i&&(i={},r[t]=i),i[n]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,r=n.rootNode.uuid,s=n.path,i=this._bindingsByRootAndName,a=i[r],o=t[t.length-1],l=e._cacheIndex;o._cacheIndex=l,t[l]=o,t.pop(),delete a[s],0===Object.keys(a).length&&delete i[r]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return void 0===n&&(n=new Tb(new Float32Array(2),new Float32Array(2),1,Jw),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=n,t[n]=s}clipAction(e,t,n){const r=t||this._root,s=r.uuid;let i="string"==typeof e?Ub.findByName(r,e):e;const a=null!==i?i.uuid:e,o=this._actionsByClip[a];let l=null;if(void 0===n&&(n=null!==i?i.blendMode:hp),void 0!==o){const e=o.actionByRoot[s];if(void 0!==e&&e.blendMode===n)return e;l=o.knownActions[0],null===i&&(i=l._clip)}if(null===i)return null;const c=new Zw(this,i,t,n);return this._bindAction(c,l),this._addInactiveAction(c,a,s),c}existingAction(e,t){const n=t||this._root,r=n.uuid,s="string"==typeof e?Ub.findByName(n,e):e,i=s?s.uuid:e,a=this._actionsByClip[i];return void 0!==a&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions;for(let t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,r=this.time+=e,s=Math.sign(e),i=this._accuIndex^=1;for(let l=0;l!==n;++l){t[l]._update(r,e,s,i)}const a=this._bindings,o=this._nActiveBindings;for(let l=0;l!==o;++l)a[l].apply(i);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,r=this._actionsByClip,s=r[n];if(void 0!==s){const e=s.knownActions;for(let n=0,r=e.length;n!==r;++n){const r=e[n];this._deactivateAction(r);const s=r._cacheIndex,i=t[t.length-1];r._cacheIndex=null,r._byClipCacheIndex=null,i._cacheIndex=s,t[s]=i,t.pop(),this._removeInactiveBindingsForAction(r)}delete r[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const s in n){const e=n[s].actionByRoot[t];void 0!==e&&(this._deactivateAction(e),this._removeInactiveAction(e))}const r=this._bindingsByRootAndName[t];if(void 0!==r)for(const s in r){const e=r[s];e.restoreOriginalState(),this._removeInactiveBinding(e)}}uncacheAction(e,t){const n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}},AnimationObjectGroup:class{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Lp(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let n=0,r=arguments.length;n!==r;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,r=this._parsedPaths,s=this._bindings,i=s.length;let a,o=e.length,l=this.nCachedObjects_;for(let c=0,d=arguments.length;c!==d;++c){const d=arguments[c],u=d.uuid;let h=t[u];if(void 0===h){h=o++,t[u]=h,e.push(d);for(let e=0,t=i;e!==t;++e)s[e].push(new Yw(d,n[e],r[e]))}else if(h<l){a=e[h];const o=--l,c=e[o];t[c.uuid]=h,e[h]=c,t[u]=o,e[o]=d;for(let e=0,t=i;e!==t;++e){const t=s[e],i=t[o];let a=t[h];t[h]=i,void 0===a&&(a=new Yw(d,n[e],r[e])),t[o]=a}}else e[h]}this.nCachedObjects_=l}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let s=this.nCachedObjects_;for(let i=0,a=arguments.length;i!==a;++i){const a=arguments[i],o=a.uuid,l=t[o];if(void 0!==l&&l>=s){const i=s++,c=e[i];t[c.uuid]=l,e[l]=c,t[o]=i,e[i]=a;for(let e=0,t=r;e!==t;++e){const t=n[e],r=t[i],s=t[l];t[l]=r,t[i]=s}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let s=this.nCachedObjects_,i=e.length;for(let a=0,o=arguments.length;a!==o;++a){const o=arguments[a].uuid,l=t[o];if(void 0!==l)if(delete t[o],l<s){const a=--s,o=e[a],c=--i,d=e[c];t[o.uuid]=l,e[l]=o,t[d.uuid]=a,e[a]=d,e.pop();for(let e=0,t=r;e!==t;++e){const t=n[e],r=t[a],s=t[c];t[l]=r,t[a]=s,t.pop()}}else{const s=--i,a=e[s];s>0&&(t[a.uuid]=l),e[l]=a,e.pop();for(let e=0,t=r;e!==t;++e){const t=n[e];t[l]=t[s],t.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const n=this._bindingsIndicesByPath;let r=n[e];const s=this._bindings;if(void 0!==r)return s[r];const i=this._paths,a=this._parsedPaths,o=this._objects,l=o.length,c=this.nCachedObjects_,d=new Array(l);r=s.length,n[e]=r,i.push(e),a.push(t),s.push(d);for(let u=c,h=o.length;u!==h;++u){const n=o[u];d[u]=new Yw(n,e,t)}return d}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){const r=this._paths,s=this._parsedPaths,i=this._bindings,a=i.length-1,o=i[a];t[e[a]]=n,i[n]=o,i.pop(),s[n]=s[a],s.pop(),r[n]=r[a],r.pop()}}},AnimationUtils:class{static convertArray(e,t){return _b(e,t)}static isTypedArray(e){return Sb(e)}static getKeyframeOrder(e){return Mb(e)}static sortedArray(e,t,n){return Cb(e,t,n)}static flattenJSON(e,t,n,r){Eb(e,t,n,r)}static subclip(e,t,n,r,s=30){return function(e,t,n,r,s=30){const i=e.clone();i.name=t;const a=[];for(let l=0;l<i.tracks.length;++l){const e=i.tracks[l],t=e.getValueSize(),o=[],c=[];for(let i=0;i<e.times.length;++i){const a=e.times[i]*s;if(!(a<n||a>=r)){o.push(e.times[i]);for(let n=0;n<t;++n)c.push(e.values[i*t+n])}}0!==o.length&&(e.times=_b(o,e.times.constructor),e.values=_b(c,e.values.constructor),a.push(e))}i.tracks=a;let o=1/0;for(let l=0;l<i.tracks.length;++l)o>i.tracks[l].times[0]&&(o=i.tracks[l].times[0]);for(let l=0;l<i.tracks.length;++l)i.tracks[l].shift(-1*o);return i.resetDuration(),i}(e,t,n,r,s)}static makeClipAdditive(e,t=0,n=e,r=30){return function(e,t=0,n=e,r=30){r<=0&&(r=30);const s=n.tracks.length,i=t/r;for(let a=0;a<s;++a){const t=n.tracks[a],r=t.ValueTypeName;if("bool"===r||"string"===r)continue;const s=e.tracks.find(function(e){return e.name===t.name&&e.ValueTypeName===r});if(void 0===s)continue;let o=0;const l=t.getValueSize();t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(o=l/3);let c=0;const d=s.getValueSize();s.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=d/3);const u=t.times.length-1;let h;if(i<=t.times[0]){const e=o,n=l-o;h=t.values.slice(e,n)}else if(i>=t.times[u]){const e=u*l+o,n=e+l-o;h=t.values.slice(e,n)}else{const e=t.createInterpolant(),n=o,r=l-o;e.evaluate(i),h=e.resultBuffer.slice(n,r)}"quaternion"===r&&(new $p).fromArray(h).normalize().conjugate().toArray(h);const p=s.times.length;for(let e=0;e<p;++e){const t=e*d+c;if("quaternion"===r)$p.multiplyQuaternionsFlat(s.values,t,h,0,s.values,t);else{const e=d-2*c;for(let n=0;n<e;++n)s.values[t+n]-=h[n]}}}return e.blendMode=pp,e}(e,t,n,r)}},ArcCurve:Qv,ArrayCamera:Tw,ArrowHelper:class extends _f{constructor(e=new Gp(0,0,1),t=new Gp(0,0,0),n=1,r=16776960,s=.2*n,i=.2*s){super(),this.type="ArrowHelper",void 0===Tj&&(Tj=new hg,Tj.setAttribute("position",new sg([0,0,0,0,1,0],3)),Pj=new Hv(.5,1,5,1),Pj.translate(0,-.5,0)),this.position.copy(t),this.line=new Nv(Tj,new fv({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new _g(Pj,new qf({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,s,i)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{Aj.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(Aj,t)}}setLength(e,t=.2*e,n=.2*t){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}},AttachedBindMode:Vu,Audio:Fw,AudioAnalyser:class{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}},AudioContext:Cw,AudioListener:class extends _f{constructor(){super(),this.type="AudioListener",this.context=Cw.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Pw}getInput(){return this.gain}removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Ow,Rw,Iw),Dw.set(0,0,-1).applyQuaternion(Rw),Lw.set(0,1,0).applyQuaternion(Rw),t.positionX){const e=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Ow.x,e),t.positionY.linearRampToValueAtTime(Ow.y,e),t.positionZ.linearRampToValueAtTime(Ow.z,e),t.forwardX.linearRampToValueAtTime(Dw.x,e),t.forwardY.linearRampToValueAtTime(Dw.y,e),t.forwardZ.linearRampToValueAtTime(Dw.z,e),t.upX.linearRampToValueAtTime(Lw.x,e),t.upY.linearRampToValueAtTime(Lw.y,e),t.upZ.linearRampToValueAtTime(Lw.z,e)}else t.setPosition(Ow.x,Ow.y,Ow.z),t.setOrientation(Dw.x,Dw.y,Dw.z,Lw.x,Lw.y,Lw.z)}},AudioLoader:class extends Gb{constructor(e){super(e)}load(e,t,n,r){const s=this,i=new Kb(this.manager);function a(t){r&&r(t),s.manager.itemError(e)}i.setResponseType("arraybuffer"),i.setPath(this.path),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials),i.load(e,function(e){try{const n=e.slice(0);Cw.getContext().decodeAudioData(n,function(e){t(e)}).catch(a)}catch(n){a(n)}},n,r)}},AxesHelper:class extends Cv{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=new hg;n.setAttribute("position",new sg(t,3)),n.setAttribute("color",new sg([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));super(n,new fv({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(e,t,n){const r=new Hf,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(n),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}},BackSide:1,BasicDepthPacking:3200,BasicShadowMap:0,BatchedMesh:mv,Bone:Sx,BooleanKeyframeTrack:Rb,Box2:class{constructor(e=new Wp(1/0,1/0),t=new Wp(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=oj.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,oj).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},Box3:Nm,Box3Helper:class extends Cv{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new hg;r.setIndex(new tg(n,1)),r.setAttribute("position",new sg([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(r,new fv({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}},BoxGeometry:Mg,BoxHelper:class extends Cv{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),s=new hg;s.setIndex(new tg(n,1)),s.setAttribute("position",new tg(r,3)),super(s,new fv({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(void 0!==this.object&&kj.setFromObject(this.object),kj.isEmpty())return;const e=kj.min,t=kj.max,n=this.geometry.attributes.position,r=n.array;r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=e.x,r[4]=t.y,r[5]=t.z,r[6]=e.x,r[7]=e.y,r[8]=t.z,r[9]=t.x,r[10]=e.y,r[11]=t.z,r[12]=t.x,r[13]=t.y,r[14]=e.z,r[15]=e.x,r[16]=t.y,r[17]=e.z,r[18]=e.x,r[19]=e.y,r[20]=e.z,r[21]=t.x,r[22]=e.y,r[23]=e.z,n.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}},BufferAttribute:tg,BufferGeometry:hg,BufferGeometryLoader:ww,ByteType:ah,Cache:Hb,Camera:Pg,CameraHelper:class extends Cv{constructor(e){const t=new hg,n=new fv({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],i={};function a(e,t){o(e),o(t)}function o(e){r.push(0,0,0),s.push(0,0,0),void 0===i[e]&&(i[e]=[]),i[e].push(r.length/3-1)}a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4"),t.setAttribute("position",new sg(r,3)),t.setAttribute("color",new sg(s,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=i,this.update();const l=new Hf(16755200),c=new Hf(16711680),d=new Hf(43775),u=new Hf(16777215),h=new Hf(3355443);this.setColors(l,c,d,u,h)}setColors(e,t,n,r,s){const i=this.geometry.getAttribute("color");return i.setXYZ(0,e.r,e.g,e.b),i.setXYZ(1,e.r,e.g,e.b),i.setXYZ(2,e.r,e.g,e.b),i.setXYZ(3,e.r,e.g,e.b),i.setXYZ(4,e.r,e.g,e.b),i.setXYZ(5,e.r,e.g,e.b),i.setXYZ(6,e.r,e.g,e.b),i.setXYZ(7,e.r,e.g,e.b),i.setXYZ(8,e.r,e.g,e.b),i.setXYZ(9,e.r,e.g,e.b),i.setXYZ(10,e.r,e.g,e.b),i.setXYZ(11,e.r,e.g,e.b),i.setXYZ(12,e.r,e.g,e.b),i.setXYZ(13,e.r,e.g,e.b),i.setXYZ(14,e.r,e.g,e.b),i.setXYZ(15,e.r,e.g,e.b),i.setXYZ(16,e.r,e.g,e.b),i.setXYZ(17,e.r,e.g,e.b),i.setXYZ(18,e.r,e.g,e.b),i.setXYZ(19,e.r,e.g,e.b),i.setXYZ(20,e.r,e.g,e.b),i.setXYZ(21,e.r,e.g,e.b),i.setXYZ(22,e.r,e.g,e.b),i.setXYZ(23,e.r,e.g,e.b),i.setXYZ(24,t.r,t.g,t.b),i.setXYZ(25,t.r,t.g,t.b),i.setXYZ(26,t.r,t.g,t.b),i.setXYZ(27,t.r,t.g,t.b),i.setXYZ(28,t.r,t.g,t.b),i.setXYZ(29,t.r,t.g,t.b),i.setXYZ(30,t.r,t.g,t.b),i.setXYZ(31,t.r,t.g,t.b),i.setXYZ(32,n.r,n.g,n.b),i.setXYZ(33,n.r,n.g,n.b),i.setXYZ(34,n.r,n.g,n.b),i.setXYZ(35,n.r,n.g,n.b),i.setXYZ(36,n.r,n.g,n.b),i.setXYZ(37,n.r,n.g,n.b),i.setXYZ(38,r.r,r.g,r.b),i.setXYZ(39,r.r,r.g,r.b),i.setXYZ(40,s.r,s.g,s.b),i.setXYZ(41,s.r,s.g,s.b),i.setXYZ(42,s.r,s.g,s.b),i.setXYZ(43,s.r,s.g,s.b),i.setXYZ(44,s.r,s.g,s.b),i.setXYZ(45,s.r,s.g,s.b),i.setXYZ(46,s.r,s.g,s.b),i.setXYZ(47,s.r,s.g,s.b),i.setXYZ(48,s.r,s.g,s.b),i.setXYZ(49,s.r,s.g,s.b),i.needsUpdate=!0,this}update(){const e=this.geometry,t=this.pointMap;let n,r;if(Cj.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),!0===this.camera.reversedDepth)n=1,r=0;else if(this.camera.coordinateSystem===Ap)n=-1,r=1;else{if(this.camera.coordinateSystem!==Tp)throw new Error("THREE.CameraHelper.update(): Invalid coordinate system: "+this.camera.coordinateSystem);n=0,r=1}Ej("c",t,e,Cj,0,0,n),Ej("t",t,e,Cj,0,0,r),Ej("n1",t,e,Cj,-1,-1,n),Ej("n2",t,e,Cj,1,-1,n),Ej("n3",t,e,Cj,-1,1,n),Ej("n4",t,e,Cj,1,1,n),Ej("f1",t,e,Cj,-1,-1,r),Ej("f2",t,e,Cj,1,-1,r),Ej("f3",t,e,Cj,-1,1,r),Ej("f4",t,e,Cj,1,1,r),Ej("u1",t,e,Cj,.7,1.1,n),Ej("u2",t,e,Cj,-.7,1.1,n),Ej("u3",t,e,Cj,0,2,n),Ej("cf1",t,e,Cj,-1,0,r),Ej("cf2",t,e,Cj,1,0,r),Ej("cf3",t,e,Cj,0,-1,r),Ej("cf4",t,e,Cj,0,1,r),Ej("cn1",t,e,Cj,-1,0,n),Ej("cn2",t,e,Cj,1,0,n),Ej("cn3",t,e,Cj,0,-1,n),Ej("cn4",t,e,Cj,0,1,n),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}},CanvasTexture:class extends xm{constructor(e,t,n,r,s,i,a,o,l){super(e,t,n,r,s,i,a,o,l),this.isCanvasTexture=!0,this.needsUpdate=!0}},CapsuleGeometry:Bv,CatmullRomCurve3:iy,CineonToneMapping:3,CircleGeometry:Uv,ClampToEdgeWrapping:Zu,Clock:Pw,Color:Hf,ColorKeyframeTrack:Ib,ColorManagement:om,CompressedArrayTexture:class extends Lv{constructor(e,t,n,r,s,i){super(e,t,n,s,i),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=Zu,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}},CompressedCubeTexture:class extends Lv{constructor(e,t,n){super(void 0,e[0].width,e[0].height,t,n,$u),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}},CompressedTexture:Lv,CompressedTextureLoader:class extends Gb{constructor(e){super(e)}load(e,t,n,r){const s=this,i=[],a=new Lv,o=new Kb(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(s.withCredentials);let l=0;function c(c){o.load(e[c],function(e){const n=s.parse(e,!0);i[c]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},l+=1,6===l&&(1===n.mipmapCount&&(a.minFilter=nh),a.image=i,a.format=n.format,a.needsUpdate=!0,t&&t(a))},n,r)}if(Array.isArray(e))for(let d=0,u=e.length;d<u;++d)c(d);else o.load(e,function(e){const n=s.parse(e,!0);if(n.isCubemap){const e=n.mipmaps.length/n.mipmapCount;for(let t=0;t<e;t++){i[t]={mipmaps:[]};for(let e=0;e<n.mipmapCount;e++)i[t].mipmaps.push(n.mipmaps[t*n.mipmapCount+e]),i[t].format=n.format,i[t].width=n.width,i[t].height=n.height}a.image=i}else a.image.width=n.width,a.image.height=n.height,a.mipmaps=n.mipmaps;1===n.mipmapCount&&(a.minFilter=nh),a.format=n.format,a.needsUpdate=!0,t&&t(a)},n,r);return a}},ConeGeometry:Hv,ConstantAlphaFactor:213,ConstantColorFactor:211,Controls:class extends Pp{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){void 0!==e&&(null!==this.domElement&&this.disconnect(),this.domElement=e)}disconnect(){}dispose(){}update(){}},CubeCamera:Fg,CubeReflectionMapping:$u,CubeRefractionMapping:Gu,CubeTexture:zg,CubeTextureLoader:class extends Gb{constructor(e){super(e)}load(e,t,n,r){const s=new zg;s.colorSpace=fp;const i=new Zb(this.manager);i.setCrossOrigin(this.crossOrigin),i.setPath(this.path);let a=0;function o(n){i.load(e[n],function(e){s.images[n]=e,a++,6===a&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let l=0;l<e.length;++l)o(l);return s}},CubeUVReflectionMapping:Ku,CubicBezierCurve:cy,CubicBezierCurve3:dy,CubicInterpolant:Ab,CullFaceBack:1,CullFaceFront:2,CullFaceFrontBack:3,CullFaceNone:0,Curve:Zv,CurvePath:xy,CustomBlending:5,CustomToneMapping:5,CylinderGeometry:Vv,Cylindrical:class{constructor(e=1,t=0,n=0){this.radius=e,this.theta=t,this.y=n}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return(new this.constructor).copy(this)}},Data3DTexture:jm,DataArrayTexture:wm,DataTexture:Mx,DataTextureLoader:class extends Gb{constructor(e){super(e)}load(e,t,n,r){const s=this,i=new Mx,a=new Kb(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(e){let n;try{n=s.parse(e)}catch(a){if(void 0===r)return;r(a)}void 0!==n.image?i.image=n.image:void 0!==n.data&&(i.image.width=n.width,i.image.height=n.height,i.image.data=n.data),i.wrapS=void 0!==n.wrapS?n.wrapS:Zu,i.wrapT=void 0!==n.wrapT?n.wrapT:Zu,i.magFilter=void 0!==n.magFilter?n.magFilter:nh,i.minFilter=void 0!==n.minFilter?n.minFilter:nh,i.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.colorSpace&&(i.colorSpace=n.colorSpace),void 0!==n.flipY&&(i.flipY=n.flipY),void 0!==n.format&&(i.format=n.format),void 0!==n.type&&(i.type=n.type),void 0!==n.mipmaps&&(i.mipmaps=n.mipmaps,i.minFilter=sh),1===n.mipmapCount&&(i.minFilter=nh),void 0!==n.generateMipmaps&&(i.generateMipmaps=n.generateMipmaps),i.needsUpdate=!0,t&&t(i,n)},n,r),i}},DataUtils:class{static toHalfFloat(e){return Yf(e)}static fromHalfFloat(e){return Zf(e)}},DecrementStencilOp:7683,DecrementWrapStencilOp:34056,DefaultLoadingManager:$b,DepthFormat:wh,DepthStencilFormat:jh,DepthTexture:Fv,DetachedBindMode:Hu,DirectionalLight:pw,DirectionalLightHelper:class extends _f{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",void 0===t&&(t=1);let r=new hg;r.setAttribute("position",new sg([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new fv({fog:!1,toneMapped:!1});this.lightPlane=new Nv(r,s),this.add(this.lightPlane),r=new hg,r.setAttribute("position",new sg([0,0,0,0,0,1],3)),this.targetLine=new Nv(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),Nj.setFromMatrixPosition(this.light.matrixWorld),_j.setFromMatrixPosition(this.light.target.matrixWorld),Sj.subVectors(_j,Nj),this.lightPlane.lookAt(_j),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(_j),this.targetLine.scale.z=Sj.length()}},DiscreteInterpolant:Pb,DodecahedronGeometry:$v,DoubleSide:2,DstAlphaFactor:206,DstColorFactor:208,DynamicCopyUsage:35050,DynamicDrawUsage:35048,DynamicReadUsage:35049,EdgesGeometry:Yv,EllipseCurve:Jv,EqualCompare:514,EqualDepth:4,EqualStencilFunc:514,EquirectangularReflectionMapping:qu,EquirectangularRefractionMapping:Xu,Euler:of,EventDispatcher:Pp,ExternalTexture:zv,ExtrudeGeometry:Yy,FileLoader:Kb,Float16BufferAttribute:class extends tg{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}getX(e){let t=Zf(this.array[e*this.itemSize]);return this.normalized&&(t=Up(t,this.array)),t}setX(e,t){return this.normalized&&(t=Vp(t,this.array)),this.array[e*this.itemSize]=Yf(t),this}getY(e){let t=Zf(this.array[e*this.itemSize+1]);return this.normalized&&(t=Up(t,this.array)),t}setY(e,t){return this.normalized&&(t=Vp(t,this.array)),this.array[e*this.itemSize+1]=Yf(t),this}getZ(e){let t=Zf(this.array[e*this.itemSize+2]);return this.normalized&&(t=Up(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Vp(t,this.array)),this.array[e*this.itemSize+2]=Yf(t),this}getW(e){let t=Zf(this.array[e*this.itemSize+3]);return this.normalized&&(t=Up(t,this.array)),t}setW(e,t){return this.normalized&&(t=Vp(t,this.array)),this.array[e*this.itemSize+3]=Yf(t),this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=Vp(t,this.array),n=Vp(n,this.array)),this.array[e+0]=Yf(t),this.array[e+1]=Yf(n),this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=Vp(t,this.array),n=Vp(n,this.array),r=Vp(r,this.array)),this.array[e+0]=Yf(t),this.array[e+1]=Yf(n),this.array[e+2]=Yf(r),this}setXYZW(e,t,n,r,s){return e*=this.itemSize,this.normalized&&(t=Vp(t,this.array),n=Vp(n,this.array),r=Vp(r,this.array),s=Vp(s,this.array)),this.array[e+0]=Yf(t),this.array[e+1]=Yf(n),this.array[e+2]=Yf(r),this.array[e+3]=Yf(s),this}},Float32BufferAttribute:sg,FloatType:uh,Fog:$g,FogExp2:Wg,FramebufferTexture:class extends xm{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Qu,this.minFilter=Qu,this.generateMipmaps=!1,this.needsUpdate=!0}},FrontSide:0,Frustum:Gx,FrustumArray:Kx,GLBufferAttribute:class{constructor(e,t,n,r,s,i=!1){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=r,this.count=s,this.normalized=i,this.version=0}set needsUpdate(e){!0===e&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}},GLSL1:"100",GLSL3:kp,GreaterCompare:516,GreaterDepth:6,GreaterEqualCompare:518,GreaterEqualDepth:5,GreaterEqualStencilFunc:518,GreaterStencilFunc:516,GridHelper:class extends Cv{constructor(e=10,t=10,n=4473924,r=8947848){n=new Hf(n),r=new Hf(r);const s=t/2,i=e/t,a=e/2,o=[],l=[];for(let d=0,u=0,h=-a;d<=t;d++,h+=i){o.push(-a,0,h,a,0,h),o.push(h,0,-a,h,0,a);const e=d===s?n:r;e.toArray(l,u),u+=3,e.toArray(l,u),u+=3,e.toArray(l,u),u+=3,e.toArray(l,u),u+=3}const c=new hg;c.setAttribute("position",new sg(o,3)),c.setAttribute("color",new sg(l,3));super(c,new fv({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}},Group:Ug,HalfFloatType:hh,HemisphereLight:Qb,HemisphereLightHelper:class extends _f{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const r=new eb(t);r.rotateY(.5*Math.PI),this.material=new qf({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),i=new Float32Array(3*s.count);r.setAttribute("color",new tg(i,3)),this.add(new _g(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");wj.copy(this.light.color),jj.copy(this.light.groundColor);for(let e=0,n=t.count;e<n;e++){const r=e<n/2?wj:jj;t.setXYZ(e,r.r,r.g,r.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(bj.setFromMatrixPosition(this.light.matrixWorld).negate())}},IcosahedronGeometry:Jy,ImageBitmapLoader:class extends Gb{constructor(e){super(e),this.isImageBitmapLoader=!0,this.options={premultiplyAlpha:"none"},this._abortController=new AbortController}setOptions(e){return this.options=e,this}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,i=Hb.get(`image-bitmap:${e}`);if(void 0!==i)return s.manager.itemStart(e),i.then?void i.then(n=>{if(!0!==Sw.has(i))return t&&t(n),s.manager.itemEnd(e),n;r&&r(Sw.get(i)),s.manager.itemError(e),s.manager.itemEnd(e)}):(setTimeout(function(){t&&t(i),s.manager.itemEnd(e)},0),i);const a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",a.headers=this.requestHeader,a.signal="function"==typeof AbortSignal.any?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal;const o=fetch(e,a).then(function(e){return e.blob()}).then(function(e){return createImageBitmap(e,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(n){return Hb.add(`image-bitmap:${e}`,n),t&&t(n),s.manager.itemEnd(e),n}).catch(function(t){r&&r(t),Sw.set(o,t),Hb.remove(`image-bitmap:${e}`),s.manager.itemError(e),s.manager.itemEnd(e)});Hb.add(`image-bitmap:${e}`,o),s.manager.itemStart(e)}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}},ImageLoader:Zb,ImageUtils:um,IncrementStencilOp:7682,IncrementWrapStencilOp:34055,InstancedBufferAttribute:Ax,InstancedBufferGeometry:bw,InstancedInterleavedBuffer:class extends qg{constructor(e,t,n=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}},InstancedMesh:Fx,Int16BufferAttribute:class extends tg{constructor(e,t,n){super(new Int16Array(e),t,n)}},Int32BufferAttribute:class extends tg{constructor(e,t,n){super(new Int32Array(e),t,n)}},Int8BufferAttribute:class extends tg{constructor(e,t,n){super(new Int8Array(e),t,n)}},IntType:ch,InterleavedBuffer:qg,InterleavedBufferAttribute:Kg,Interpolant:kb,InterpolateDiscrete:ap,InterpolateLinear:op,InterpolateSmooth:lp,InterpolationSamplingMode:{NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FIRST:"first",EITHER:"either"},InterpolationSamplingType:{PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},InvertStencilOp:5386,KeepStencilOp:yp,KeyframeTrack:Ob,LOD:mx,LatheGeometry:Qy,Layers:lf,LessCompare:513,LessDepth:2,LessEqualCompare:515,LessEqualDepth:3,LessEqualStencilFunc:515,LessStencilFunc:513,Light:Jb,LightProbe:xw,Line:Nv,Line3:class{constructor(e=new Gp,t=new Gp){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){lj.subVectors(e,this.start),cj.subVectors(this.end,this.start);const n=cj.dot(cj);let r=cj.dot(lj)/n;return t&&(r=Fp(r,0,1)),r}closestPointToPoint(e,t,n){const r=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(r).add(this.start)}distanceSqToLine3(e,t=pj,n=mj){const r=1e-8*1e-8;let s,i;const a=this.start,o=e.start,l=this.end,c=e.end;dj.subVectors(l,a),uj.subVectors(c,o),hj.subVectors(a,o);const d=dj.dot(dj),u=uj.dot(uj),h=uj.dot(hj);if(d<=r&&u<=r)return t.copy(a),n.copy(o),t.sub(n),t.dot(t);if(d<=r)s=0,i=h/u,i=Fp(i,0,1);else{const e=dj.dot(hj);if(u<=r)i=0,s=Fp(-e/d,0,1);else{const t=dj.dot(uj),n=d*u-t*t;s=0!==n?Fp((t*h-e*u)/n,0,1):0,i=(t*s+h)/u,i<0?(i=0,s=Fp(-e/d,0,1)):i>1&&(i=1,s=Fp((t-e)/d,0,1))}}return t.copy(a).add(dj.multiplyScalar(s)),n.copy(o).add(uj.multiplyScalar(i)),t.sub(n),t.dot(t)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}},LineBasicMaterial:fv,LineCurve:uy,LineCurve3:hy,LineDashedMaterial:Nb,LineLoop:Ev,LineSegments:Cv,LinearFilter:nh,LinearInterpolant:Tb,LinearMipMapLinearFilter:1008,LinearMipMapNearestFilter:1007,LinearMipmapLinearFilter:sh,LinearMipmapNearestFilter:rh,LinearSRGBColorSpace:gp,LinearToneMapping:1,LinearTransfer:xp,Loader:Gb,LoaderUtils:yw,LoadingManager:Wb,LoopOnce:2200,LoopPingPong:2202,LoopRepeat:2201,MOUSE:{LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Material:Gf,MaterialLoader:vw,MathUtils:Hp,Matrix2:aj,Matrix3:Kp,Matrix4:Ym,MaxEquation:104,Mesh:_g,MeshBasicMaterial:qf,MeshDepthMaterial:bb,MeshDistanceMaterial:wb,MeshLambertMaterial:yb,MeshMatcapMaterial:jb,MeshNormalMaterial:vb,MeshPhongMaterial:gb,MeshPhysicalMaterial:fb,MeshStandardMaterial:mb,MeshToonMaterial:xb,MinEquation:103,MirroredRepeatWrapping:Ju,MixOperation:1,MultiplyBlending:4,MultiplyOperation:0,NearestFilter:Qu,NearestMipMapLinearFilter:1005,NearestMipMapNearestFilter:1004,NearestMipmapLinearFilter:th,NearestMipmapNearestFilter:eh,NeutralToneMapping:7,NeverCompare:512,NeverDepth:0,NeverStencilFunc:512,NoBlending:0,NoColorSpace:mp,NoToneMapping:0,NormalAnimationBlendMode:hp,NormalBlending:1,NotEqualCompare:517,NotEqualDepth:7,NotEqualStencilFunc:517,NumberKeyframeTrack:Db,Object3D:_f,ObjectLoader:class extends Gb{constructor(e){super(e)}load(e,t,n,r){const s=this,i=""===this.path?yw.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const a=new Kb(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(n){let i=null;try{i=JSON.parse(n)}catch(o){return void(void 0!==r&&r(o))}const a=i.metadata;void 0!==a&&void 0!==a.type&&"geometry"!==a.type.toLowerCase()?s.parse(i,t):void 0!==r&&r(new Error("THREE.ObjectLoader: Can't load "+e))},n,r)}async loadAsync(e,t){const n=""===this.path?yw.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||n;const r=new Kb(this.manager);r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials);const s=await r.loadAsync(e,t),i=JSON.parse(s),a=i.metadata;if(void 0===a||void 0===a.type||"geometry"===a.type.toLowerCase())throw new Error("THREE.ObjectLoader: Can't load "+e);return await this.parseAsync(i)}parse(e,t){const n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),i=this.parseImages(e.images,function(){void 0!==t&&t(l)}),a=this.parseTextures(e.textures,i),o=this.parseMaterials(e.materials,a),l=this.parseObject(e.object,s,o,a,n),c=this.parseSkeletons(e.skeletons,l);if(this.bindSkeletons(l,c),this.bindLightTargets(l),void 0!==t){let e=!1;for(const t in i)if(i[t].data instanceof HTMLImageElement){e=!0;break}!1===e&&t(l)}return l}async parseAsync(e){const t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,n),s=await this.parseImagesAsync(e.images),i=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,i),o=this.parseObject(e.object,r,a,i,t),l=this.parseSkeletons(e.skeletons,o);return this.bindSkeletons(o,l),this.bindLightTargets(o),o}parseShapes(e){const t={};if(void 0!==e)for(let n=0,r=e.length;n<r;n++){const r=(new yy).fromJSON(e[n]);t[r.uuid]=r}return t}parseSkeletons(e,t){const n={},r={};if(t.traverse(function(e){e.isBone&&(r[e.uuid]=e)}),void 0!==e)for(let s=0,i=e.length;s<i;s++){const t=(new kx).fromJSON(e[s],r);n[t.uuid]=t}return n}parseGeometries(e,t){const n={};if(void 0!==e){const r=new ww;for(let s=0,i=e.length;s<i;s++){let i;const a=e[s];switch(a.type){case"BufferGeometry":case"InstancedBufferGeometry":i=r.parse(a);break;default:a.type in ub&&(i=ub[a.type].fromJSON(a,t))}i.uuid=a.uuid,void 0!==a.name&&(i.name=a.name),void 0!==a.userData&&(i.userData=a.userData),n[a.uuid]=i}}return n}parseMaterials(e,t){const n={},r={};if(void 0!==e){const s=new vw;s.setTextures(t);for(let t=0,i=e.length;t<i;t++){const i=e[t];void 0===n[i.uuid]&&(n[i.uuid]=s.parse(i)),r[i.uuid]=n[i.uuid]}}return r}parseAnimations(e){const t={};if(void 0!==e)for(let n=0;n<e.length;n++){const r=e[n],s=Ub.parse(r);t[s.uuid]=s}return t}parseImages(e,t){const n=this,r={};let s;function i(e){if("string"==typeof e){const t=e;return function(e){return n.manager.itemStart(e),s.load(e,function(){n.manager.itemEnd(e)},void 0,function(){n.manager.itemError(e),n.manager.itemEnd(e)})}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(t)?t:n.resourcePath+t)}return e.data?{data:Qp(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){const n=new Wb(t);s=new Zb(n),s.setCrossOrigin(this.crossOrigin);for(let t=0,s=e.length;t<s;t++){const n=e[t],s=n.url;if(Array.isArray(s)){const e=[];for(let t=0,n=s.length;t<n;t++){const n=i(s[t]);null!==n&&(n instanceof HTMLImageElement?e.push(n):e.push(new Mx(n.data,n.width,n.height)))}r[n.uuid]=new pm(e)}else{const e=i(n.url);r[n.uuid]=new pm(e)}}}return r}async parseImagesAsync(e){const t=this,n={};let r;async function s(e){if("string"==typeof e){const n=e,s=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(n)?n:t.resourcePath+n;return await r.loadAsync(s)}return e.data?{data:Qp(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){r=new Zb(this.manager),r.setCrossOrigin(this.crossOrigin);for(let t=0,r=e.length;t<r;t++){const r=e[t],i=r.url;if(Array.isArray(i)){const e=[];for(let t=0,n=i.length;t<n;t++){const n=i[t],r=await s(n);null!==r&&(r instanceof HTMLImageElement?e.push(r):e.push(new Mx(r.data,r.width,r.height)))}n[r.uuid]=new pm(e)}else{const e=await s(r.url);n[r.uuid]=new pm(e)}}}return n}parseTextures(e,t){function n(e,t){return"number"==typeof e?e:t[e]}const r={};if(void 0!==e)for(let s=0,i=e.length;s<i;s++){const i=e[s];i.image,t[i.image];const a=t[i.image],o=a.data;let l;Array.isArray(o)?(l=new zg,6===o.length&&(l.needsUpdate=!0)):(l=o&&o.data?new Mx:new xm,o&&(l.needsUpdate=!0)),l.source=a,l.uuid=i.uuid,void 0!==i.name&&(l.name=i.name),void 0!==i.mapping&&(l.mapping=n(i.mapping,jw)),void 0!==i.channel&&(l.channel=i.channel),void 0!==i.offset&&l.offset.fromArray(i.offset),void 0!==i.repeat&&l.repeat.fromArray(i.repeat),void 0!==i.center&&l.center.fromArray(i.center),void 0!==i.rotation&&(l.rotation=i.rotation),void 0!==i.wrap&&(l.wrapS=n(i.wrap[0],Nw),l.wrapT=n(i.wrap[1],Nw)),void 0!==i.format&&(l.format=i.format),void 0!==i.internalFormat&&(l.internalFormat=i.internalFormat),void 0!==i.type&&(l.type=i.type),void 0!==i.colorSpace&&(l.colorSpace=i.colorSpace),void 0!==i.minFilter&&(l.minFilter=n(i.minFilter,_w)),void 0!==i.magFilter&&(l.magFilter=n(i.magFilter,_w)),void 0!==i.anisotropy&&(l.anisotropy=i.anisotropy),void 0!==i.flipY&&(l.flipY=i.flipY),void 0!==i.generateMipmaps&&(l.generateMipmaps=i.generateMipmaps),void 0!==i.premultiplyAlpha&&(l.premultiplyAlpha=i.premultiplyAlpha),void 0!==i.unpackAlignment&&(l.unpackAlignment=i.unpackAlignment),void 0!==i.compareFunction&&(l.compareFunction=i.compareFunction),void 0!==i.userData&&(l.userData=i.userData),r[i.uuid]=l}return r}parseObject(e,t,n,r,s){let i,a,o;function l(e){return t[e],t[e]}function c(e){if(void 0!==e){if(Array.isArray(e)){const t=[];for(let r=0,s=e.length;r<s;r++){const s=e[r];n[s],t.push(n[s])}return t}return n[e],n[e]}}function d(e){return r[e],r[e]}switch(e.type){case"Scene":i=new Gg,void 0!==e.background&&(Number.isInteger(e.background)?i.background=new Hf(e.background):i.background=d(e.background)),void 0!==e.environment&&(i.environment=d(e.environment)),void 0!==e.fog&&("Fog"===e.fog.type?i.fog=new $g(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(i.fog=new Wg(e.fog.color,e.fog.density)),""!==e.fog.name&&(i.fog.name=e.fog.name)),void 0!==e.backgroundBlurriness&&(i.backgroundBlurriness=e.backgroundBlurriness),void 0!==e.backgroundIntensity&&(i.backgroundIntensity=e.backgroundIntensity),void 0!==e.backgroundRotation&&i.backgroundRotation.fromArray(e.backgroundRotation),void 0!==e.environmentIntensity&&(i.environmentIntensity=e.environmentIntensity),void 0!==e.environmentRotation&&i.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":i=new Dg(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(i.focus=e.focus),void 0!==e.zoom&&(i.zoom=e.zoom),void 0!==e.filmGauge&&(i.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(i.filmOffset=e.filmOffset),void 0!==e.view&&(i.view=Object.assign({},e.view));break;case"OrthographicCamera":i=new uw(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(i.zoom=e.zoom),void 0!==e.view&&(i.view=Object.assign({},e.view));break;case"AmbientLight":i=new mw(e.color,e.intensity);break;case"DirectionalLight":i=new pw(e.color,e.intensity),i.target=e.target||"";break;case"PointLight":i=new dw(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":i=new fw(e.color,e.intensity,e.width,e.height);break;case"SpotLight":i=new iw(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),i.target=e.target||"";break;case"HemisphereLight":i=new Qb(e.color,e.groundColor,e.intensity);break;case"LightProbe":i=(new xw).fromJSON(e);break;case"SkinnedMesh":a=l(e.geometry),o=c(e.material),i=new _x(a,o),void 0!==e.bindMode&&(i.bindMode=e.bindMode),void 0!==e.bindMatrix&&i.bindMatrix.fromArray(e.bindMatrix),void 0!==e.skeleton&&(i.skeleton=e.skeleton);break;case"Mesh":a=l(e.geometry),o=c(e.material),i=new _g(a,o);break;case"InstancedMesh":a=l(e.geometry),o=c(e.material);const t=e.count,n=e.instanceMatrix,r=e.instanceColor;i=new Fx(a,o,t),i.instanceMatrix=new Ax(new Float32Array(n.array),16),void 0!==r&&(i.instanceColor=new Ax(new Float32Array(r.array),r.itemSize));break;case"BatchedMesh":a=l(e.geometry),o=c(e.material),i=new mv(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,o),i.geometry=a,i.perObjectFrustumCulled=e.perObjectFrustumCulled,i.sortObjects=e.sortObjects,i._drawRanges=e.drawRanges,i._reservedRanges=e.reservedRanges,i._geometryInfo=e.geometryInfo.map(e=>{let t=null,n=null;return void 0!==e.boundingBox&&(t=(new Nm).fromJSON(e.boundingBox)),void 0!==e.boundingSphere&&(n=(new Um).fromJSON(e.boundingSphere)),{...e,boundingBox:t,boundingSphere:n}}),i._instanceInfo=e.instanceInfo,i._availableInstanceIds=e._availableInstanceIds,i._availableGeometryIds=e._availableGeometryIds,i._nextIndexStart=e.nextIndexStart,i._nextVertexStart=e.nextVertexStart,i._geometryCount=e.geometryCount,i._maxInstanceCount=e.maxInstanceCount,i._maxVertexCount=e.maxVertexCount,i._maxIndexCount=e.maxIndexCount,i._geometryInitialized=e.geometryInitialized,i._matricesTexture=d(e.matricesTexture.uuid),i._indirectTexture=d(e.indirectTexture.uuid),void 0!==e.colorsTexture&&(i._colorsTexture=d(e.colorsTexture.uuid)),void 0!==e.boundingSphere&&(i.boundingSphere=(new Um).fromJSON(e.boundingSphere)),void 0!==e.boundingBox&&(i.boundingBox=(new Nm).fromJSON(e.boundingBox));break;case"LOD":i=new mx;break;case"Line":i=new Nv(l(e.geometry),c(e.material));break;case"LineLoop":i=new Ev(l(e.geometry),c(e.material));break;case"LineSegments":i=new Cv(l(e.geometry),c(e.material));break;case"PointCloud":case"Points":i=new Rv(l(e.geometry),c(e.material));break;case"Sprite":i=new dx(c(e.material));break;case"Group":i=new Ug;break;case"Bone":i=new Sx;break;default:i=new _f}if(i.uuid=e.uuid,void 0!==e.name&&(i.name=e.name),void 0!==e.matrix?(i.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(i.matrixAutoUpdate=e.matrixAutoUpdate),i.matrixAutoUpdate&&i.matrix.decompose(i.position,i.quaternion,i.scale)):(void 0!==e.position&&i.position.fromArray(e.position),void 0!==e.rotation&&i.rotation.fromArray(e.rotation),void 0!==e.quaternion&&i.quaternion.fromArray(e.quaternion),void 0!==e.scale&&i.scale.fromArray(e.scale)),void 0!==e.up&&i.up.fromArray(e.up),void 0!==e.castShadow&&(i.castShadow=e.castShadow),void 0!==e.receiveShadow&&(i.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.intensity&&(i.shadow.intensity=e.shadow.intensity),void 0!==e.shadow.bias&&(i.shadow.bias=e.shadow.bias),void 0!==e.shadow.normalBias&&(i.shadow.normalBias=e.shadow.normalBias),void 0!==e.shadow.radius&&(i.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&i.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(i.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(i.visible=e.visible),void 0!==e.frustumCulled&&(i.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(i.renderOrder=e.renderOrder),void 0!==e.userData&&(i.userData=e.userData),void 0!==e.layers&&(i.layers.mask=e.layers),void 0!==e.children){const a=e.children;for(let e=0;e<a.length;e++)i.add(this.parseObject(a[e],t,n,r,s))}if(void 0!==e.animations){const t=e.animations;for(let e=0;e<t.length;e++){const n=t[e];i.animations.push(s[n])}}if("LOD"===e.type){void 0!==e.autoUpdate&&(i.autoUpdate=e.autoUpdate);const t=e.levels;for(let e=0;e<t.length;e++){const n=t[e],r=i.getObjectByProperty("uuid",n.object);void 0!==r&&i.addLevel(r,n.distance,n.hysteresis)}}return i}bindSkeletons(e,t){0!==Object.keys(t).length&&e.traverse(function(e){if(!0===e.isSkinnedMesh&&void 0!==e.skeleton){const n=t[e.skeleton];void 0===n||e.bind(n,e.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const n=t.target,r=e.getObjectByProperty("uuid",n);t.target=void 0!==r?r:new _f}})}},ObjectSpaceNormalMap:1,OctahedronGeometry:eb,OneFactor:201,OneMinusConstantAlphaFactor:214,OneMinusConstantColorFactor:212,OneMinusDstAlphaFactor:207,OneMinusDstColorFactor:209,OneMinusSrcAlphaFactor:_u,OneMinusSrcColorFactor:203,OrthographicCamera:uw,PCFShadowMap:1,PCFSoftShadowMap:2,PMREMGenerator:aN,Path:vy,PerspectiveCamera:Dg,Plane:Vx,PlaneGeometry:tb,PlaneHelper:class extends Nv{constructor(e,t=1,n=16776960){const r=n,s=new hg;s.setAttribute("position",new sg([1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3)),s.computeBoundingSphere(),super(s,new fv({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const i=new hg;i.setAttribute("position",new sg([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3)),i.computeBoundingSphere(),this.add(new _g(i,new qf({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}},PointLight:dw,PointLightHelper:class extends _g{constructor(e,t,n){super(new sb(t,4,2),new qf({wireframe:!0,fog:!1,toneMapped:!1})),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}},Points:Rv,PointsMaterial:kv,PolarGridHelper:class extends Cv{constructor(e=10,t=16,n=8,r=64,s=4473924,i=8947848){s=new Hf(s),i=new Hf(i);const a=[],o=[];if(t>1)for(let c=0;c<t;c++){const n=c/t*(2*Math.PI),r=Math.sin(n)*e,l=Math.cos(n)*e;a.push(0,0,0),a.push(r,0,l);const d=1&c?s:i;o.push(d.r,d.g,d.b),o.push(d.r,d.g,d.b)}for(let c=0;c<n;c++){const t=1&c?s:i,l=e-e/n*c;for(let e=0;e<r;e++){let n=e/r*(2*Math.PI),s=Math.sin(n)*l,i=Math.cos(n)*l;a.push(s,0,i),o.push(t.r,t.g,t.b),n=(e+1)/r*(2*Math.PI),s=Math.sin(n)*l,i=Math.cos(n)*l,a.push(s,0,i),o.push(t.r,t.g,t.b)}}const l=new hg;l.setAttribute("position",new sg(a,3)),l.setAttribute("color",new sg(o,3));super(l,new fv({vertexColors:!0,toneMapped:!1})),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}},PolyhedronGeometry:Wv,PositionalAudio:class extends Fw{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),!0===this.hasPlaybackControl&&!1===this.isPlaying)return;this.matrixWorld.decompose(zw,Bw,Uw),Vw.set(0,0,1).applyQuaternion(Bw);const t=this.panner;if(t.positionX){const e=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(zw.x,e),t.positionY.linearRampToValueAtTime(zw.y,e),t.positionZ.linearRampToValueAtTime(zw.z,e),t.orientationX.linearRampToValueAtTime(Vw.x,e),t.orientationY.linearRampToValueAtTime(Vw.y,e),t.orientationZ.linearRampToValueAtTime(Vw.z,e)}else t.setPosition(zw.x,zw.y,zw.z),t.setOrientation(Vw.x,Vw.y,Vw.z)}},PropertyBinding:Yw,PropertyMixer:Hw,QuadraticBezierCurve:py,QuadraticBezierCurve3:my,Quaternion:$p,QuaternionKeyframeTrack:Fb,QuaternionLinearInterpolant:Lb,RED_GREEN_RGTC2_Format:sp,RED_RGTC1_Format:np,REVISION:hu,RGBADepthPacking:3201,RGBAFormat:bh,RGBAIntegerFormat:Ch,RGBA_ASTC_10x10_Format:Yh,RGBA_ASTC_10x5_Format:qh,RGBA_ASTC_10x6_Format:Xh,RGBA_ASTC_10x8_Format:Kh,RGBA_ASTC_12x10_Format:Zh,RGBA_ASTC_12x12_Format:Jh,RGBA_ASTC_4x4_Format:zh,RGBA_ASTC_5x4_Format:Bh,RGBA_ASTC_5x5_Format:Uh,RGBA_ASTC_6x5_Format:Vh,RGBA_ASTC_6x6_Format:Hh,RGBA_ASTC_8x5_Format:Wh,RGBA_ASTC_8x6_Format:$h,RGBA_ASTC_8x8_Format:Gh,RGBA_BPTC_Format:Qh,RGBA_ETC2_EAC_Format:Fh,RGBA_PVRTC_2BPPV1_Format:Ih,RGBA_PVRTC_4BPPV1_Format:Rh,RGBA_S3TC_DXT1_Format:kh,RGBA_S3TC_DXT3_Format:Ah,RGBA_S3TC_DXT5_Format:Th,RGBDepthPacking:3202,RGBFormat:yh,RGBIntegerFormat:1032,RGB_BPTC_SIGNED_Format:ep,RGB_BPTC_UNSIGNED_Format:tp,RGB_ETC1_Format:Dh,RGB_ETC2_Format:Lh,RGB_PVRTC_2BPPV1_Format:Oh,RGB_PVRTC_4BPPV1_Format:Ph,RGB_S3TC_DXT1_Format:Eh,RGDepthPacking:3203,RGFormat:Sh,RGIntegerFormat:Mh,RawShaderMaterial:pb,Ray:Km,Raycaster:nj,RectAreaLight:fw,RedFormat:Nh,RedIntegerFormat:_h,ReinhardToneMapping:2,RenderTarget:ym,RenderTarget3D:class extends ym{constructor(e=1,t=1,n=1,r={}){super(e,t,r),this.isRenderTarget3D=!0,this.depth=n,this.texture=new jm(null,e,t,n),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}},RepeatWrapping:Yu,ReplaceStencilOp:7681,ReverseSubtractEquation:102,RingGeometry:nb,SIGNED_RED_GREEN_RGTC2_Format:ip,SIGNED_RED_RGTC1_Format:rp,SRGBColorSpace:fp,SRGBTransfer:vp,Scene:Gg,ShaderChunk:Dj,ShaderLib:Fj,ShaderMaterial:Tg,ShadowMaterial:hb,Shape:yy,ShapeGeometry:rb,ShapePath:class{constructor(){this.type="ShapePath",this.color=new Hf,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new vy,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,r){return this.currentPath.quadraticCurveTo(e,t,n,r),this}bezierCurveTo(e,t,n,r,s,i){return this.currentPath.bezierCurveTo(e,t,n,r,s,i),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(e,t){const n=t.length;let r=!1;for(let s=n-1,i=0;i<n;s=i++){let n=t[s],a=t[i],o=a.x-n.x,l=a.y-n.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(n=t[i],o=-o,a=t[s],l=-l),e.y<n.y||e.y>a.y)continue;if(e.y===n.y){if(e.x===n.x)return!0}else{const t=l*(e.x-n.x)-o*(e.y-n.y);if(0===t)return!0;if(t<0)continue;r=!r}}else{if(e.y!==n.y)continue;if(a.x<=e.x&&e.x<=n.x||n.x<=e.x&&e.x<=a.x)return!0}}return r}const n=qy.isClockWise,r=this.subPaths;if(0===r.length)return[];let s,i,a;const o=[];if(1===r.length)return i=r[0],a=new yy,a.curves=i.curves,o.push(a),o;let l=!n(r[0].getPoints());l=e?!l:l;const c=[],d=[];let u,h,p=[],m=0;d[m]=void 0,p[m]=[];for(let f=0,g=r.length;f<g;f++)i=r[f],u=i.getPoints(),s=n(u),s=e?!s:s,s?(!l&&d[m]&&m++,d[m]={s:new yy,p:u},d[m].s.curves=i.curves,l&&m++,p[m]=[]):p[m].push({h:i,p:u[0]});if(!d[0])return function(e){const t=[];for(let n=0,r=e.length;n<r;n++){const r=e[n],s=new yy;s.curves=r.curves,t.push(s)}return t}(r);if(d.length>1){let e=!1,n=0;for(let t=0,r=d.length;t<r;t++)c[t]=[];for(let r=0,s=d.length;r<s;r++){const s=p[r];for(let i=0;i<s.length;i++){const a=s[i];let o=!0;for(let s=0;s<d.length;s++)t(a.p,d[s].p)&&(r!==s&&n++,o?(o=!1,c[s].push(a)):e=!0);o&&c[r].push(a)}}n>0&&!1===e&&(p=c)}for(let f=0,g=d.length;f<g;f++){a=d[f].s,o.push(a),h=p[f];for(let e=0,t=h.length;e<t;e++)a.holes.push(h[e].h)}return o}},ShapeUtils:qy,ShortType:oh,Skeleton:kx,SkeletonHelper:class extends Cv{constructor(e){const t=yj(e),n=new hg,r=[],s=[];for(let o=0;o<t.length;o++){const e=t[o];e.parent&&e.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(0,0,0),s.push(0,0,0))}n.setAttribute("position",new sg(r,3)),n.setAttribute("color",new sg(s,3));super(n,new fv({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;const i=new Hf(255),a=new Hf(65280);this.setColors(i,a)}updateMatrixWorld(e){const t=this.bones,n=this.geometry,r=n.getAttribute("position");vj.copy(this.root.matrixWorld).invert();for(let s=0,i=0;s<t.length;s++){const e=t[s];e.parent&&e.parent.isBone&&(xj.multiplyMatrices(vj,e.matrixWorld),gj.setFromMatrixPosition(xj),r.setXYZ(i,gj.x,gj.y,gj.z),xj.multiplyMatrices(vj,e.parent.matrixWorld),gj.setFromMatrixPosition(xj),r.setXYZ(i+1,gj.x,gj.y,gj.z),i+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}setColors(e,t){const n=this.geometry.getAttribute("color");for(let r=0;r<n.count;r+=2)n.setXYZ(r,e.r,e.g,e.b),n.setXYZ(r+1,t.r,t.g,t.b);return n.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}},SkinnedMesh:_x,Source:pm,Sphere:Um,SphereGeometry:sb,Spherical:class{constructor(e=1,t=0,n=0){this.radius=e,this.phi=t,this.theta=n}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){const e=1e-6;return this.phi=Fp(this.phi,e,Math.PI-e),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Fp(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}},SphericalHarmonics3:gw,SplineCurve:fy,SpotLight:iw,SpotLightHelper:class extends _f{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const n=new hg,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let i=0,a=1,o=32;i<o;i++,a++){const e=i/o*Math.PI*2,t=a/o*Math.PI*2;r.push(Math.cos(e),Math.sin(e),1,Math.cos(t),Math.sin(t),1)}n.setAttribute("position",new sg(r,3));const s=new fv({fog:!1,toneMapped:!1});this.cone=new Cv(n,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),fj.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(fj),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}},Sprite:dx,SpriteMaterial:Yg,SrcAlphaFactor:Nu,SrcAlphaSaturateFactor:210,SrcColorFactor:202,StaticCopyUsage:35046,StaticDrawUsage:Ep,StaticReadUsage:35045,StereoCamera:class{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Dg,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Dg,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Aw.copy(e.projectionMatrix);const n=t.eyeSep/2,r=n*t.near/t.focus,s=t.near*Math.tan(Ip*t.fov*.5)/t.zoom;let i,a;kw.elements[12]=-n,Ew.elements[12]=n,i=-s*t.aspect+r,a=s*t.aspect+r,Aw.elements[0]=2*t.near/(a-i),Aw.elements[8]=(a+i)/(a-i),this.cameraL.projectionMatrix.copy(Aw),i=-s*t.aspect-r,a=s*t.aspect-r,Aw.elements[0]=2*t.near/(a-i),Aw.elements[8]=(a+i)/(a-i),this.cameraR.projectionMatrix.copy(Aw)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(kw),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(Ew)}},StreamCopyUsage:35042,StreamDrawUsage:35040,StreamReadUsage:35041,StringKeyframeTrack:zb,SubtractEquation:101,SubtractiveBlending:3,TOUCH:{ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},TangentSpaceNormalMap:0,TetrahedronGeometry:ib,Texture:xm,TextureLoader:class extends Gb{constructor(e){super(e)}load(e,t,n,r){const s=new xm,i=new Zb(this.manager);return i.setCrossOrigin(this.crossOrigin),i.setPath(this.path),i.load(e,function(e){s.image=e,s.needsUpdate=!0,void 0!==t&&t(s)},n,r),s}},TextureUtils:class{static contain(e,t){return function(e,t){const n=e.image&&e.image.width?e.image.width/e.image.height:1;return n>t?(e.repeat.x=1,e.repeat.y=n/t,e.offset.x=0,e.offset.y=(1-e.repeat.y)/2):(e.repeat.x=t/n,e.repeat.y=1,e.offset.x=(1-e.repeat.x)/2,e.offset.y=0),e}(e,t)}static cover(e,t){return function(e,t){const n=e.image&&e.image.width?e.image.width/e.image.height:1;return n>t?(e.repeat.x=t/n,e.repeat.y=1,e.offset.x=(1-e.repeat.x)/2,e.offset.y=0):(e.repeat.x=1,e.repeat.y=n/t,e.offset.x=0,e.offset.y=(1-e.repeat.y)/2),e}(e,t)}static fill(e){return function(e){return e.repeat.x=1,e.repeat.y=1,e.offset.x=0,e.offset.y=0,e}(e)}static getByteLength(e,t,n,r){return Oj(e,t,n,r)}},Timer:class{constructor(){this._previousTime=0,this._currentTime=0,this._startTime=performance.now(),this._delta=0,this._elapsed=0,this._timescale=1,this._document=null,this._pageVisibilityHandler=null}connect(e){this._document=e,void 0!==e.hidden&&(this._pageVisibilityHandler=ij.bind(this),e.addEventListener("visibilitychange",this._pageVisibilityHandler,!1))}disconnect(){null!==this._pageVisibilityHandler&&(this._document.removeEventListener("visibilitychange",this._pageVisibilityHandler),this._pageVisibilityHandler=null),this._document=null}getDelta(){return this._delta/1e3}getElapsed(){return this._elapsed/1e3}getTimescale(){return this._timescale}setTimescale(e){return this._timescale=e,this}reset(){return this._currentTime=performance.now()-this._startTime,this}dispose(){this.disconnect()}update(e){return null!==this._pageVisibilityHandler&&!0===this._document.hidden?this._delta=0:(this._previousTime=this._currentTime,this._currentTime=(void 0!==e?e:performance.now())-this._startTime,this._delta=(this._currentTime-this._previousTime)*this._timescale,this._elapsed+=this._delta),this}},TimestampQuery:{COMPUTE:"compute",RENDER:"render"},TorusGeometry:ab,TorusKnotGeometry:ob,Triangle:Ff,TriangleFanDrawMode:2,TriangleStripDrawMode:1,TrianglesDrawMode:0,TubeGeometry:lb,UVMapping:Wu,Uint16BufferAttribute:ng,Uint32BufferAttribute:rg,Uint8BufferAttribute:class extends tg{constructor(e,t,n){super(new Uint8Array(e),t,n)}},Uint8ClampedBufferAttribute:class extends tg{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}},Uniform:Qw,UniformsGroup:class extends Pp{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:ej++}),this.name="",this.usage=Ep,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return-1!==t&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let n=0,r=t.length;n<r;n++){const e=Array.isArray(t[n])?t[n]:[t[n]];for(let t=0;t<e.length;t++)this.uniforms.push(e[t].clone())}return this}clone(){return(new this.constructor).copy(this)}},UniformsLib:Lj,UniformsUtils:Ag,UnsignedByteType:ih,UnsignedInt101111Type:xh,UnsignedInt248Type:fh,UnsignedInt5999Type:gh,UnsignedIntType:dh,UnsignedShort4444Type:ph,UnsignedShort5551Type:mh,UnsignedShortType:lh,VSMShadowMap:3,Vector2:Wp,Vector3:Gp,Vector4:vm,VectorKeyframeTrack:Bb,VideoFrameTexture:class extends Dv{constructor(e,t,n,r,s,i,a,o){super({},e,t,n,r,s,i,a,o),this.isVideoFrameTexture=!0}update(){}clone(){return(new this.constructor).copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}},VideoTexture:Dv,WebGL3DRenderTarget:class extends bm{constructor(e=1,t=1,n=1,r={}){super(e,t,r),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new jm(null,e,t,n),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}},WebGLArrayRenderTarget:class extends bm{constructor(e=1,t=1,n=1,r={}){super(e,t,r),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new wm(null,e,t,n),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}},WebGLCoordinateSystem:Ap,WebGLCubeRenderTarget:Bg,WebGLRenderTarget:bm,WebGLRenderer:gS,WebGLUtils:cS,WebGPUCoordinateSystem:Tp,WebXRController:Hg,WireframeGeometry:cb,WrapAroundEnding:up,ZeroCurvatureEnding:cp,ZeroFactor:200,ZeroSlopeEnding:dp,ZeroStencilOp:0,createCanvasElement:tm},Symbol.toStringTag,{value:"Module"}));function vS(){const e=hn.useRef(null),t=hn.useRef(null);return hn.useEffect(()=>{if(!e.current)return;const n=e.current,r=new Pg;r.position.z=1;const s=new Gg,i=new tb(2,2),a={time:{type:"f",value:1},resolution:{type:"v2",value:new Wp}},o=new Tg({uniforms:a,vertexShader:"\n      void main() {\n        gl_Position = vec4( position, 1.0 );\n      }\n    ",fragmentShader:"\n      #define TWO_PI 6.2831853072\n      #define PI 3.14159265359\n\n      precision highp float;\n      uniform vec2 resolution;\n      uniform float time;\n\n      void main(void) {\n        vec2 uv = (gl_FragCoord.xy * 2.0 - resolution.xy) / min(resolution.x, resolution.y);\n        float t = time*0.05;\n        float lineWidth = 0.002;\n\n        vec3 color = vec3(0.0);\n        for(int j = 0; j < 3; j++){\n          for(int i=0; i < 5; i++){\n            color[j] += lineWidth*float(i*i) / abs(fract(t - 0.01*float(j)+float(i)*0.01)*5.0 - length(uv) + mod(uv.x+uv.y, 0.2));\n          }\n        }\n        \n        gl_FragColor = vec4(color[0],color[1],color[2],1.0);\n      }\n    "}),l=new _g(i,o);s.add(l);const c=new gS({antialias:!0});c.setPixelRatio(window.devicePixelRatio),n.appendChild(c.domElement);const d=()=>{const e=n.clientWidth,t=n.clientHeight;c.setSize(e,t),a.resolution.value.x=c.domElement.width,a.resolution.value.y=c.domElement.height};d(),window.addEventListener("resize",d,!1);const u=()=>{const e=requestAnimationFrame(u);a.time.value+=.05,c.render(s,r),t.current&&(t.current.animationId=e)};return t.current={camera:r,scene:s,renderer:c,uniforms:a,animationId:0},u(),()=>{window.removeEventListener("resize",d),t.current&&(cancelAnimationFrame(t.current.animationId),n&&t.current.renderer.domElement&&n.removeChild(t.current.renderer.domElement),t.current.renderer.dispose(),i.dispose(),o.dispose())}},[]),Ot.jsx("div",{ref:e,className:"w-full h-screen",style:{background:"#000",overflow:"hidden"}})}var yS=.1,bS="function"==typeof Float32Array;function wS(e,t){return 1-3*t+3*e}function jS(e,t){return 3*t-6*e}function NS(e){return 3*e}function _S(e,t,n){return((wS(t,n)*e+jS(t,n))*e+NS(t))*e}function SS(e,t,n){return 3*wS(t,n)*e*e+2*jS(t,n)*e+NS(t)}function MS(e){return e}var CS=function(e,t,n,r){if(!(0<=e&&e<=1&&0<=n&&n<=1))throw new Error("bezier x values must be in [0, 1] range");if(e===t&&n===r)return MS;for(var s=bS?new Float32Array(11):new Array(11),i=0;i<11;++i)s[i]=_S(i*yS,e,n);function a(t){for(var r=0,i=1;10!==i&&s[i]<=t;++i)r+=yS;--i;var a=r+(t-s[i])/(s[i+1]-s[i])*yS,o=SS(a,e,n);return o>=.001?function(e,t,n,r){for(var s=0;s<4;++s){var i=SS(t,n,r);if(0===i)return t;t-=(_S(t,n,r)-e)/i}return t}(t,a,e,n):0===o?a:function(e,t,n,r,s){var i,a,o=0;do{(i=_S(a=t+(n-t)/2,r,s)-e)>0?n=a:t=a}while(Math.abs(i)>1e-7&&++o<10);return a}(t,r,r+yS,e,n)}return function(e){return 0===e?0:1===e?1:_S(a(e),t,r)}};const ES=mn(CS);var kS,AS,TS,PS,OS,RS,IS,DS,LS,FS,zS,BS=function(e){this.startX=e.startX,this.startY=e.startY,this.endX=e.endX,this.endY=e.endY,this.totalX=this.endX-this.startX,this.totalY=this.endY-this.startY,this.startMultiplierX=e.startMultiplierX||1,this.endMultiplierX=e.endMultiplierX||1,this.startMultiplierY=e.startMultiplierY||1,this.endMultiplierY=e.endMultiplierY||1};function US(){return US=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},US.apply(this,arguments)}(AS=kS||(kS={})).speed="speed",AS.translateX="translateX",AS.translateY="translateY",AS.rotate="rotate",AS.rotateX="rotateX",AS.rotateY="rotateY",AS.rotateZ="rotateZ",AS.scale="scale",AS.scaleX="scaleX",AS.scaleY="scaleY",AS.scaleZ="scaleZ",AS.opacity="opacity",(PS=TS||(TS={})).px="px",PS["%"]="%",PS.vh="vh",PS.vw="vw",(RS=OS||(OS={})).deg="deg",RS.turn="turn",RS.rad="rad",(IS||(IS={}))[""]="",(LS=DS||(DS={})).vertical="vertical",LS.horizontal="horizontal",(zS=FS||(FS={})).ease="ease",zS.easeIn="easeIn",zS.easeOut="easeOut",zS.easeInOut="easeInOut",zS.easeInQuad="easeInQuad",zS.easeInCubic="easeInCubic",zS.easeInQuart="easeInQuart",zS.easeInQuint="easeInQuint",zS.easeInSine="easeInSine",zS.easeInExpo="easeInExpo",zS.easeInCirc="easeInCirc",zS.easeOutQuad="easeOutQuad",zS.easeOutCubic="easeOutCubic",zS.easeOutQuart="easeOutQuart",zS.easeOutQuint="easeOutQuint",zS.easeOutSine="easeOutSine",zS.easeOutExpo="easeOutExpo",zS.easeOutCirc="easeOutCirc",zS.easeInOutQuad="easeInOutQuad",zS.easeInOutCubic="easeInOutCubic",zS.easeInOutQuart="easeInOutQuart",zS.easeInOutQuint="easeInOutQuint",zS.easeInOutSine="easeInOutSine",zS.easeInOutExpo="easeInOutExpo",zS.easeInOutCirc="easeInOutCirc",zS.easeInBack="easeInBack",zS.easeOutBack="easeOutBack",zS.easeInOutBack="easeInOutBack";var VS=0;var HS=function(){function e(e){var t=e.el.getBoundingClientRect();if(e.view.scrollContainer){var n=e.view.scrollContainer.getBoundingClientRect();t=US({},t,{top:t.top-n.top,right:t.right-n.left,bottom:t.bottom-n.top,left:t.left-n.left})}this.height=e.el.offsetHeight,this.width=e.el.offsetWidth,this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,e.rootMargin&&this._setRectWithRootMargin(e.rootMargin)}return e.prototype._setRectWithRootMargin=function(e){var t=e.top+e.bottom,n=e.left+e.right;this.top-=e.top,this.right+=e.right,this.bottom+=e.bottom,this.left-=e.left,this.height+=t,this.width+=n},e}(),WS=[IS[""],TS.px,TS["%"],TS.vh,TS.vw,OS.deg,OS.turn,OS.rad];function $S(e,t){void 0===t&&(t=TS["%"]);var n={value:0,unit:t};if(void 0===e)return n;if(!("number"==typeof e||"string"==typeof e))throw new Error("Invalid value provided. Must provide a value as a string or number");if(e=String(e),n.value=parseFloat(e),n.unit=e.match(/[\d.\-+]*\s*(.*)/)[1]||t,!WS.includes(n.unit))throw new Error("Invalid unit provided.");return n}var GS={ease:[.25,.1,.25,1],easeIn:[.42,0,1,1],easeOut:[0,0,.58,1],easeInOut:[.42,0,.58,1],easeInQuad:[.55,.085,.68,.53],easeInCubic:[.55,.055,.675,.19],easeInQuart:[.895,.03,.685,.22],easeInQuint:[.755,.05,.855,.06],easeInSine:[.47,0,.745,.715],easeInExpo:[.95,.05,.795,.035],easeInCirc:[.6,.04,.98,.335],easeOutQuad:[.25,.46,.45,.94],easeOutCubic:[.215,.61,.355,1],easeOutQuart:[.165,.84,.44,1],easeOutQuint:[.23,1,.32,1],easeOutSine:[.39,.575,.565,1],easeOutExpo:[.19,1,.22,1],easeOutCirc:[.075,.82,.165,1],easeInOutQuad:[.455,.03,.515,.955],easeInOutCubic:[.645,.045,.355,1],easeInOutQuart:[.77,0,.175,1],easeInOutQuint:[.86,0,.07,1],easeInOutSine:[.445,.05,.55,.95],easeInOutExpo:[1,0,0,1],easeInOutCirc:[.785,.135,.15,.86],easeInBack:[.6,-.28,.735,.045],easeOutBack:[.175,.885,.32,1.275],easeInOutBack:[.68,-.55,.265,1.55]};function qS(e){if(Array.isArray(e))return ES(e[0],e[1],e[2],e[3]);if("string"==typeof e&&void 0!==GS[e]){var t=GS[e];return ES(t[0],t[1],t[2],t[3])}}var XS=Object.values(kS),KS={speed:"px",translateX:"%",translateY:"%",rotate:"deg",rotateX:"deg",rotateY:"deg",rotateZ:"deg",scale:"",scaleX:"",scaleY:"",scaleZ:"",opacity:""};function YS(e,t){var n={};return XS.forEach(function(r){var s=KS[r];if("number"==typeof(null==e?void 0:e[r])){var i=null==e?void 0:e[r],a=-10*(i||0)+"px",o=$S(10*(i||0)+"px"),l=$S(a),c={start:o.value,end:l.value,unit:o.unit};t===DS.vertical&&(n.translateY=c),t===DS.horizontal&&(n.translateX=c)}if(Array.isArray(null==e?void 0:e[r])){var d=null==e?void 0:e[r];if(void 0!==d[0]&&void 0!==d[1]){var u=$S(null==d?void 0:d[0],s),h=$S(null==d?void 0:d[1],s),p=qS(null==d?void 0:d[2]);if(n[r]={start:u.value,end:h.value,unit:u.unit,easing:p},u.unit!==h.unit)throw new Error("Must provide matching units for the min and max offset values of each axis.")}}}),n}function ZS(e,t,n,r){var s=(n-e)/t;return r&&(s=r(s)),s}function JS(e,t){return{value:function(e,t,n,r,s){return(n-t)*(e-r)/(s-r)+t}("function"==typeof e.easing?e.easing(t):t,(null==e?void 0:e.start)||0,(null==e?void 0:e.end)||0,0,1),unit:null==e?void 0:e.unit}}var QS=Object.values(kS).filter(function(e){return"opacity"!==e});function eM(e,t,n){if(n){var r=function(e,t){var n=QS.reduce(function(n,r){var s=e[r]&&JS(e[r],t);return void 0===s||void 0===s.value||void 0===s.unit?n:n+(r+"("+s.value+s.unit+")")},"");return n}(e,t),s=function(e,t){var n=e.opacity&&JS(e.opacity,t);if(void 0===n||void 0===n.value||void 0===n.unit)return"";return""+n.value}(e,t);n.style.transform=r,n.style.opacity=s}}function tM(e){var t=e.el;t&&(t.style.transform="",t.style.opacity="")}function nM(e,t,n){var r=t>e,s=n+(Math.abs(e)+Math.abs(t))*(r?-1:1);return Math.max(n/s,1)}function rM(e,t){var n=e.start,r=e.end,s=e.unit;if("%"===s){var i=t/100;n*=i,r*=i}if("vw"===s){var a=n/100,o=r/100;n=window.innerWidth*a,r=window.innerWidth*o}if("vh"===s){var l=n/100,c=r/100;n=window.innerHeight*l,r=window.innerHeight*c}return{start:n,end:r}}var sM={start:0,end:0,unit:""};var iM=function(e,t,n){return Math.min(Math.max(e,t),n)},aM=function(){function e(e){var t,n,r;this.el=e.el,this.props=e.props,this.scrollAxis=e.scrollAxis,this.disabledParallaxController=e.disabledParallaxController||!1,this.id=++VS,this.effects=YS(this.props,this.scrollAxis),this.isInView=null,this.progress=0,this._setElementEasing(e.props.easing),t=e.el,n=this.effects,r="transform"+(Object.keys(n).includes("opacity")?",opacity":""),t.style.willChange=r}var t=e.prototype;return t.updateProps=function(e){return this.props=US({},this.props,e),this.effects=YS(e,this.scrollAxis),this._setElementEasing(e.easing),this},t.setCachedAttributes=function(e,t){tM(this),this.rect=new HS({el:this.props.targetElement||this.el,rootMargin:this.props.rootMargin,view:e});var n,r,s,i=(n=this.props,r=this.effects,s=this.scrollAxis,!(n.rootMargin||n.targetElement||n.shouldDisableScalingTranslations||!(r.translateX&&s===DS.horizontal||r.translateY&&s===DS.vertical)));return"number"==typeof this.props.startScroll&&"number"==typeof this.props.endScroll?(this.limits=new BS({startX:this.props.startScroll,startY:this.props.startScroll,endX:this.props.endScroll,endY:this.props.endScroll}),this._setElementStyles(),this):(i?(this.limits=function(e,t,n,r,s,i){var a=n.translateX||sM,o=n.translateY||sM,l=rM(a,e.width),c=l.start,d=l.end,u=rM(o,e.height),h=u.start,p=u.end,m=e.top-t.height,f=e.left-t.width,g=e.bottom,x=e.right,v=1,y=1;s===DS.vertical&&(y=v=nM(h,p,t.height+e.height));var b=1,w=1;if(s===DS.horizontal&&(w=b=nM(c,d,t.width+e.width)),h<0&&(m+=h*v),p>0&&(g+=p*y),c<0&&(f+=c*b),d>0&&(x+=d*w),f+=r.x,x+=r.x,m+=r.y,g+=r.y,i){var j=r.y+e.top<t.height,N=r.x+e.left<t.width,_=r.y+e.bottom>t.scrollHeight-t.height,S=r.x+e.right>t.scrollWidth-t.height;j&&_&&(v=1,y=1,m=0,g=t.scrollHeight-t.height),N&&S&&(b=1,w=1,f=0,x=t.scrollWidth-t.width),!j&&_&&(m=e.top-t.height+r.y,v=nM(h,p,(g=t.scrollHeight-t.height)-m),y=1,h<0&&(m+=h*v)),!N&&S&&(f=e.left-t.width+r.x,b=nM(c,d,(x=t.scrollWidth-t.width)-f),w=1,c<0&&(f+=c*b)),j&&!_&&(m=0,v=1,y=nM(h,p,(g=e.bottom+r.y)-m),p>0&&(g+=p*y)),N&&!S&&(f=0,b=1,w=nM(c,d,(x=e.right+r.x)-f),d>0&&(x+=d*w))}return new BS({startX:f,startY:m,endX:x,endY:g,startMultiplierX:b,endMultiplierX:w,startMultiplierY:v,endMultiplierY:y})}(this.rect,e,this.effects,t,this.scrollAxis,this.props.shouldAlwaysCompleteAnimation),this.scaledEffects=function(e,t){var n=US({},e);return n.translateX&&(n.translateX=US({},e.translateX,{start:n.translateX.start*t.startMultiplierX,end:n.translateX.end*t.endMultiplierX})),n.translateY&&(n.translateY=US({},e.translateY,{start:n.translateY.start*t.startMultiplierY,end:n.translateY.end*t.endMultiplierY})),n}(this.effects,this.limits)):this.limits=function(e,t,n,r){var s=e.top-t.height,i=e.left-t.width,a=e.bottom,o=e.right;return i+=n.x,o+=n.x,s+=n.y,a+=n.y,r&&(n.y+e.top<t.height&&(s=0),n.x+e.left<t.width&&(i=0),a>t.scrollHeight-t.height&&(a=t.scrollHeight-t.height),o>t.scrollWidth-t.width&&(o=t.scrollWidth-t.width)),new BS({startX:i,startY:s,endX:o,endY:a})}(this.rect,e,t,this.props.shouldAlwaysCompleteAnimation),this._setElementStyles(),this)},t._updateElementIsInView=function(e){var t=null===this.isInView;e!==this.isInView&&(e?this.props.onEnter&&this.props.onEnter(this):t||(this._setFinalProgress(),this._setElementStyles(),this.props.onExit&&this.props.onExit(this))),this.isInView=e},t._setFinalProgress=function(){var e=iM(Math.round(this.progress),0,1);this._updateElementProgress(e)},t._setElementStyles=function(){this.props.disabled||this.disabledParallaxController||eM(this.scaledEffects||this.effects,this.progress,this.el)},t._updateElementProgress=function(e){this.progress=e,this.props.onProgressChange&&this.props.onProgressChange(this.progress),this.props.onChange&&this.props.onChange(this)},t._setElementEasing=function(e){this.easing=qS(e)},t.updateElementOptions=function(e){this.scrollAxis=e.scrollAxis,this.disabledParallaxController=e.disabledParallaxController||!1},t.updatePosition=function(e){if(!this.limits)return this;var t=this.scrollAxis===DS.vertical,n=null===this.isInView,r=t?this.limits.startY:this.limits.startX,s=t?this.limits.endY:this.limits.endX,i=t?this.limits.totalY:this.limits.totalX,a=t?e.y:e.x,o=function(e,t,n){return n>=e&&n<=t}(r,s,a);if(this._updateElementIsInView(o),o){var l=ZS(r,i,a,this.easing);this._updateElementProgress(l),this._setElementStyles()}else n&&(this.progress=iM(Math.round(ZS(r,i,a,this.easing)),0,1),this._setElementStyles());return this},e}(),oM=function(){function e(e){this.scrollContainer=e.scrollContainer,this.width=e.width,this.height=e.height,this.scrollHeight=e.scrollHeight,this.scrollWidth=e.scrollWidth}var t=e.prototype;return t.hasChanged=function(e){return e.width!==this.width||e.height!==this.height||e.scrollWidth!==this.scrollWidth||e.scrollHeight!==this.scrollHeight},t.setSize=function(e){return this.width=e.width,this.height=e.height,this.scrollHeight=e.scrollHeight,this.scrollWidth=e.scrollWidth,this},e}(),lM=function(){function e(e,t){this.x=e,this.y=t,this.dx=0,this.dy=0}return e.prototype.setScroll=function(e,t){return this.dx=e-this.x,this.dy=t-this.y,this.x=e,this.y=t,this},e}();var cM=function(){function e(e){var t=e.scrollAxis,n=void 0===t?DS.vertical:t,r=e.scrollContainer,s=e.disabled,i=void 0!==s&&s;this.disabled=i,this.scrollAxis=n,this.elements=[],this._hasScrollContainer=!!r,this.viewEl=null!=r?r:window;var a=this._getScrollPosition(),o=a[0],l=a[1];this.scroll=new lM(o,l),this.view=new oM({width:0,height:0,scrollWidth:0,scrollHeight:0,scrollContainer:this._hasScrollContainer?r:void 0}),this._ticking=!1,this._supportsPassive=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){return e=!0,!0}});window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch(n){}return e}(),this._bindAllMethods(),this.disabled||(this._addListeners(this.viewEl),this._addResizeObserver(),this._setViewSize())}e.init=function(t){if(!("undefined"!=typeof window))throw new Error("Looks like ParallaxController.init() was called on the server. This method must be called on the client.");return new e(t)};var t=e.prototype;return t._bindAllMethods=function(){var e=this;["_addListeners","_removeListeners","_getScrollPosition","_handleScroll","_handleUpdateCache","_updateAllElements","_updateElementPosition","_setViewSize","_addResizeObserver","_checkIfViewHasChanged","_getViewParams","getElements","createElement","removeElementById","resetElementStyles","updateElementPropsById","update","updateScrollContainer","destroy"].forEach(function(t){e[t]=e[t].bind(e)})},t._addListeners=function(e){e.addEventListener("scroll",this._handleScroll,!!this._supportsPassive&&{passive:!0}),window.addEventListener("resize",this._handleUpdateCache,!1),window.addEventListener("blur",this._handleUpdateCache,!1),window.addEventListener("focus",this._handleUpdateCache,!1),window.addEventListener("load",this._handleUpdateCache,!1)},t._removeListeners=function(e){var t;e.removeEventListener("scroll",this._handleScroll,!1),window.removeEventListener("resize",this._handleUpdateCache,!1),window.removeEventListener("blur",this._handleUpdateCache,!1),window.removeEventListener("focus",this._handleUpdateCache,!1),window.removeEventListener("load",this._handleUpdateCache,!1),null==(t=this._resizeObserver)||t.disconnect()},t._addResizeObserver=function(){var e=this;try{var t=this._hasScrollContainer?this.viewEl:document.documentElement;this._resizeObserver=new ResizeObserver(function(){return e.update()}),this._resizeObserver.observe(t)}catch(n){}},t._getScrollPosition=function(){return[this._hasScrollContainer?this.viewEl.scrollLeft:window.pageXOffset,this._hasScrollContainer?this.viewEl.scrollTop:window.pageYOffset]},t._handleScroll=function(){var e,t=this._getScrollPosition(),n=t[0],r=t[1];this.scroll.setScroll(n,r),!this._ticking&&(null==(e=this.elements)?void 0:e.length)>0&&(this._ticking=!0,window.requestAnimationFrame(this._updateAllElements))},t._handleUpdateCache=function(){this._setViewSize(),this._updateAllElements({updateCache:!0})},t._updateAllElements=function(e){var t=this,n=(void 0===e?{}:e).updateCache;this.elements&&this.elements.forEach(function(e){n&&e.setCachedAttributes(t.view,t.scroll),t._updateElementPosition(e)}),this._ticking=!1},t._updateElementPosition=function(e){e.props.disabled||this.disabled||e.updatePosition(this.scroll)},t._getViewParams=function(){if(this._hasScrollContainer){var e=this.viewEl.offsetWidth,t=this.viewEl.offsetHeight,n=this.viewEl.scrollHeight,r=this.viewEl.scrollWidth;return this.view.setSize({width:e,height:t,scrollHeight:n,scrollWidth:r})}var s=document.documentElement;return{width:window.innerWidth||s.clientWidth,height:window.innerHeight||s.clientHeight,scrollHeight:s.scrollHeight,scrollWidth:s.scrollWidth}},t._setViewSize=function(){return this.view.setSize(this._getViewParams())},t._checkIfViewHasChanged=function(){return this.view.hasChanged(this._getViewParams())},t.getElements=function(){return this.elements},t.createElement=function(e){var t=new aM(US({},e,{scrollAxis:this.scrollAxis,disabledParallaxController:this.disabled}));return t.setCachedAttributes(this.view,this.scroll),this.elements=this.elements?[].concat(this.elements,[t]):[t],this._updateElementPosition(t),this._checkIfViewHasChanged()&&this.update(),t},t.removeElementById=function(e){this.elements&&(this.elements=this.elements.filter(function(t){return t.id!==e}))},t.updateElementPropsById=function(e,t){this.elements&&(this.elements=this.elements.map(function(n){return n.id===e?n.updateProps(t):n})),this.update()},t.resetElementStyles=function(e){tM(e)},t.update=function(){var e=this._getScrollPosition(),t=e[0],n=e[1];this.scroll.setScroll(t,n),this._setViewSize(),this._updateAllElements({updateCache:!0})},t.updateScrollContainer=function(e){this._removeListeners(this.viewEl),this.viewEl=e,this._hasScrollContainer=!!e,this.view=new oM({width:0,height:0,scrollWidth:0,scrollHeight:0,scrollContainer:e}),this._setViewSize(),this._addListeners(this.viewEl),this._updateAllElements({updateCache:!0})},t.disableParallaxController=function(){this.disabled=!0,this._removeListeners(this.viewEl),this.elements&&this.elements.forEach(function(e){return tM(e)})},t.enableParallaxController=function(){var e=this;this.disabled=!1,this.elements&&this.elements.forEach(function(t){return t.updateElementOptions({disabledParallaxController:!1,scrollAxis:e.scrollAxis})}),this._addListeners(this.viewEl),this._addResizeObserver(),this._setViewSize()},t.disableAllElements=function(){this.elements&&(this.elements=this.elements.map(function(e){return e.updateProps({disabled:!0})})),this.update()},t.enableAllElements=function(){this.elements&&(this.elements=this.elements.map(function(e){return e.updateProps({disabled:!1})})),this.update()},t.destroy=function(){this._removeListeners(this.viewEl),this.elements&&this.elements.forEach(function(e){return tM(e)}),this.elements=void 0},e}();function dM(e){const{disabled:t,easing:n,endScroll:r,onChange:s,onEnter:i,onExit:a,onProgressChange:o,opacity:l,rootMargin:c,rotate:d,rotateX:u,rotateY:h,rotateZ:p,scale:m,scaleX:f,scaleY:g,scaleZ:x,shouldAlwaysCompleteAnimation:v,shouldDisableScalingTranslations:y,speed:b,startScroll:w,targetElement:j,translateX:N,translateY:_,...S}=e;return{parallaxProps:(M={disabled:t,easing:n,endScroll:r,onChange:s,onEnter:i,onExit:a,onProgressChange:o,opacity:l,rootMargin:c,rotate:d,rotateX:u,rotateY:h,rotateZ:p,scale:m,scaleX:f,scaleY:g,scaleZ:x,shouldAlwaysCompleteAnimation:v,shouldDisableScalingTranslations:y,speed:b,startScroll:w,targetElement:j,translateX:N,translateY:_},Object.keys(M).forEach(e=>void 0===M[e]&&delete M[e]),M),rest:S};var M}const uM=fn.createContext(null);function hM(e){const t=function(){const e=hn.useContext(uM);if("undefined"==typeof window)return null;if(!e)throw new Error("Could not find `react-scroll-parallax` context value. Please ensure the component is wrapped in a <ParallaxProvider>");return e}(),n=hn.useRef(null),{parallaxProps:r}=dM(e);!function(e){hn.useEffect(()=>{if(!("undefined"==typeof window||e||e instanceof cM))throw new Error("Must wrap your application's <Parallax /> components in a <ParallaxProvider />.")},[e])}(t);const[s,i]=hn.useState();return hn.useEffect(()=>{let e;if(!(n.current instanceof HTMLElement))throw new Error("You must assign the ref returned by the useParallax() hook to an HTML Element.");{const s={el:n.current,props:r};e=null==t?void 0:t.createElement(s),i(e)}return()=>{e&&(null==t||t.removeElementById(e.id))}},[]),hn.useEffect(()=>{s&&(e.disabled?(null==t||t.resetElementStyles(s),null==t||t.updateElementPropsById(s.id,r)):null==t||t.updateElementPropsById(s.id,r))},[e.disabled,e.easing,e.endScroll,e.onChange,e.onEnter,e.onExit,e.onProgressChange,e.opacity,e.rootMargin,e.rotate,e.rotateX,e.rotateY,e.rotateZ,e.scale,e.scaleX,e.scaleY,e.scaleZ,e.shouldAlwaysCompleteAnimation,e.shouldDisableScalingTranslations,e.speed,e.startScroll,e.targetElement,e.translateX,e.translateY]),{ref:n,controller:t,element:s}}function pM(e){const{parallaxProps:t,rest:n}=dM(e),{ref:r}=hM(t);return fn.createElement("div",{ref:r,...n},e.children)}function mM(e){const t=hn.useRef(null);var n;return t.current||(t.current=(n={scrollAxis:e.scrollAxis||DS.vertical,scrollContainer:e.scrollContainer,disabled:e.isDisabled},"undefined"!=typeof window?cM.init(n):null)),hn.useEffect(()=>{e.scrollContainer&&t.current&&t.current.updateScrollContainer(e.scrollContainer)},[e.scrollContainer]),hn.useEffect(()=>{e.isDisabled&&t.current&&t.current.disableParallaxController(),!e.isDisabled&&t.current&&t.current.enableParallaxController()},[e.isDisabled]),hn.useEffect(()=>()=>{var e;null==t||null===(e=t.current)||void 0===e||e.destroy()},[]),fn.createElement(uM.Provider,{value:t.current},e.children)}const fM="/assets/images/beachwedding1-CmLwwfWq.jpg";function gM(){const{user:e,isAuthenticated:t,isLoading:n}=Ua(),[,r]=_n();hn.useEffect(()=>(document.body.classList.add("has-video-bg"),()=>document.body.classList.remove("has-video-bg")),[]);const{data:s=[]}=za({queryKey:["/api/businesses/my"],enabled:t});return n?Ot.jsx("div",{className:"premium-page-wrapper premium-surface min-h-screen flex items-center justify-center","data-surface-intensity":"delicate",children:Ot.jsx(uo,{text:"Loading your experience..."})}):Ot.jsx(mM,{children:Ot.jsxs("div",{className:"min-h-screen relative",style:{position:"relative",zIndex:2,background:"transparent",backgroundColor:"transparent"},children:[Ot.jsx(Xd,{}),Ot.jsx(Gr,{youtubeUrl:"https://youtu.be/Z8ioWqthS-o",overlayOpacity:0}),Ot.jsxs("div",{className:"relative flex h-[650px] w-full flex-col items-center justify-center overflow-hidden",style:{zIndex:10},children:[Ot.jsx(vS,{}),Ot.jsx("span",{className:"absolute pointer-events-none z-10 text-center text-7xl leading-none font-semibold tracking-tighter whitespace-pre-wrap text-white",children:s[0]?.name?`Discover ${s[0].name}`:e?`Welcome, ${e.firstName||e.email}`:"Discover The Florida Local"})]}),Ot.jsxs("div",{className:"relative",children:[Ot.jsx(pM,{speed:-5,children:Ot.jsxs("div",{className:"relative py-24 overflow-hidden",children:[Ot.jsx("div",{className:"absolute inset-0 glass-section-overlay"}),Ot.jsxs("div",{className:"container mx-auto px-4 lg:px-8 text-center relative z-10",children:[Ot.jsx("div",{className:"max-w-7xl mx-auto mb-16 entrance-fade-up",children:Ot.jsx(Yd,{title:"Welcome Back to Your Community",subtitle:"Stay connected with Florida's thriving business network. Discover new opportunities, showcase your latest updates, and grow your local presence.",size:"hero",withDarkTint:!1})}),Ot.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center mb-12",children:[Ot.jsxs(Dr,{variant:"gold",size:"lg",onClick:()=>r(s[0]?.id?`/business/${s[0].id}`:"/create-business"),"data-testid":"button-view-my-business",className:"entrance-scale-fade stagger-2 shimmer-gold-hover",children:[Ot.jsx(fr,{className:"h-5 w-5 mr-2"}),s[0]?.id?"View My Business":"Create Your Business"]}),Ot.jsxs(Dr,{variant:"teal",size:"lg",onClick:()=>r("/create-post"),"data-testid":"button-create-post",className:"entrance-scale-fade stagger-3 shimmer-on-hover",children:[Ot.jsx(wr,{className:"h-4 w-4 mr-2"}),"Create Post"]})]}),Ot.jsxs("div",{className:"grid md:grid-cols-3 gap-6 max-w-5xl mx-auto",children:[Ot.jsx("div",{className:"card-entrance stagger-1",children:Ot.jsx(qr,{className:"holo-teal",children:Ot.jsxs("div",{className:"holo-content text-center",children:[Ot.jsx("div",{className:"metallic-teal rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center shine-sweep-hover",children:Ot.jsx(On,{className:"h-8 w-8 text-white"})}),Ot.jsx("h3",{className:"font-bold text-lg mb-2 text-white",style:{textShadow:"0 4px 8px rgba(0,0,0,0.8), 0 2px 4px rgba(0,0,0,0.6)"},children:"Connect with Customers"}),Ot.jsx("p",{className:"text-sm text-white leading-relaxed font-medium",style:{textShadow:"0 3px 6px rgba(0,0,0,0.8), 0 1px 3px rgba(0,0,0,0.6)"},children:"Build relationships and grow your customer base in Florida's local community"})]})})}),Ot.jsx("div",{className:"card-entrance stagger-2",children:Ot.jsx(qr,{className:"holo-gold",children:Ot.jsxs("div",{className:"holo-content text-center",children:[Ot.jsx("div",{className:"metallic-gold rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center shine-sweep-hover",children:Ot.jsx(Dn,{className:"h-8 w-8 text-white"})}),Ot.jsx("h3",{className:"font-bold text-lg mb-2 text-white",style:{textShadow:"0 4px 8px rgba(0,0,0,0.8), 0 2px 4px rgba(0,0,0,0.6)"},children:"Boost Your Sales"}),Ot.jsx("p",{className:"text-sm text-white leading-relaxed font-medium",style:{textShadow:"0 3px 6px rgba(0,0,0,0.8), 0 1px 3px rgba(0,0,0,0.6)"},children:"Showcase products, run promotions, and drive more revenue through our marketplace"})]})})}),Ot.jsx("div",{className:"card-entrance stagger-3",children:Ot.jsx(qr,{className:"holo-bronze",children:Ot.jsxs("div",{className:"holo-content text-center",children:[Ot.jsx("div",{className:"metallic-bronze rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center shine-sweep-hover",children:Ot.jsx(In,{className:"h-8 w-8 text-white"})}),Ot.jsx("h3",{className:"font-bold text-lg mb-2 text-white",style:{textShadow:"0 4px 8px rgba(0,0,0,0.8), 0 2px 4px rgba(0,0,0,0.6)"},children:"Build Your Brand"}),Ot.jsx("p",{className:"text-sm text-white leading-relaxed font-medium",style:{textShadow:"0 3px 6px rgba(0,0,0,0.8), 0 1px 3px rgba(0,0,0,0.6)"},children:"Create a professional presence and get featured in our business spotlight"})]})})})]})]})]})}),Ot.jsx(pM,{speed:-8,children:Ot.jsxs("section",{className:"relative py-16",children:[Ot.jsx("div",{className:"absolute inset-0 glass-section-overlay"}),Ot.jsxs("div",{className:"container mx-auto px-4 relative z-10",children:[Ot.jsx("div",{className:"max-w-4xl mx-auto mb-12 entrance-fade-up",children:Ot.jsx(Yd,{title:"Featured Local Businesses",subtitle:"Discover exceptional businesses across Florida",withDarkTint:!1})}),Ot.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 max-w-7xl mx-auto",children:[Ot.jsx(nu,{title:"Fine Dining",images:[Wa,$a,qa],stats:[{icon:Ot.jsx(xr,{className:"h-4 w-4"}),label:"Open Daily"},{icon:Ot.jsx(Bn,{className:"h-4 w-4"}),label:"Miami, FL"},{icon:Ot.jsx(In,{className:"h-4 w-4"}),label:"Premium"}],description:"Experience Florida's finest dining with world-class cuisine and elegant atmosphere.",href:"/marketplace?category=dining"}),Ot.jsx(nu,{title:"Beach Weddings",images:[fM,Qa,Wd],stats:[{icon:Ot.jsx(Zn,{className:"h-4 w-4"}),label:"Full Service"},{icon:Ot.jsx(Bn,{className:"h-4 w-4"}),label:"Coastal FL"},{icon:Ot.jsx(On,{className:"h-4 w-4"}),label:"50-200 Guests"}],description:"Create unforgettable memories with stunning beach wedding ceremonies.",href:"/marketplace?category=weddings"}),Ot.jsx(nu,{title:"Luxury Spa & Wellness",images:[Hd,Ka,Ya],stats:[{icon:Ot.jsx(An,{className:"h-4 w-4"}),label:"Premium"},{icon:Ot.jsx(xr,{className:"h-4 w-4"}),label:"7 Days/Week"},{icon:Ot.jsx(In,{className:"h-4 w-4"}),label:"5-Star"}],description:"Rejuvenate your mind and body with luxury spa treatments and wellness programs.",href:"/marketplace?category=wellness"})]})]})]})}),Ot.jsx(pM,{speed:-12,children:Ot.jsxs("section",{className:"relative py-12",children:[Ot.jsx("div",{className:"absolute inset-0 glass-tint-light"}),Ot.jsx("div",{className:"container mx-auto px-4 relative z-10",children:Ot.jsx(du,{variant:"homepage",limit:6})})]})}),Ot.jsx(pM,{speed:-16,children:Ot.jsxs("section",{className:"relative py-12",children:[Ot.jsx("div",{className:"absolute inset-0 backdrop-visible"}),Ot.jsxs("div",{className:"container mx-auto px-4 relative z-10",children:[Ot.jsx("div",{className:"max-w-4xl mx-auto mb-8 entrance-fade-up",children:Ot.jsx(Yd,{title:"Trending Now",subtitle:"See what's hot in your community right now"})}),Ot.jsx(uu,{limit:5,variant:"compact"})]})]})}),Ot.jsx(pM,{speed:-20,children:Ot.jsx(Zd,{})}),Ot.jsx(pM,{speed:-24,children:Ot.jsx(Jd,{})}),Ot.jsx(pM,{speed:-28,children:Ot.jsxs("section",{className:"relative py-12",children:[Ot.jsx("div",{className:"absolute inset-0 bg-white/90"}),Ot.jsx("div",{className:"relative z-10",children:Ot.jsx(iu,{})})]})})]})]})})}function xM(){const e=function(){const e=hn.useContext(Dd);if(!e)throw new Error("useWebSocketContext must be used within WebSocketProvider");return e}();return{socket:e.socket,connected:e.connected,onlineUsers:e.onlineUsers,typingUsers:e.typingUsers}}var vM="ScrollArea",[yM]=At(vM),[bM,wM]=yM(vM),jM=hn.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:s,scrollHideDelay:i=600,...a}=e,[o,l]=hn.useState(null),[c,d]=hn.useState(null),[u,h]=hn.useState(null),[p,m]=hn.useState(null),[f,g]=hn.useState(null),[x,v]=hn.useState(0),[y,b]=hn.useState(0),[w,j]=hn.useState(!1),[N,_]=hn.useState(!1),S=Pt(t,e=>l(e)),M=qt(s);return Ot.jsx(bM,{scope:n,type:r,dir:M,scrollHideDelay:i,scrollArea:o,viewport:c,onViewportChange:d,content:u,onContentChange:h,scrollbarX:p,onScrollbarXChange:m,scrollbarXEnabled:w,onScrollbarXEnabledChange:j,scrollbarY:f,onScrollbarYChange:g,scrollbarYEnabled:N,onScrollbarYEnabledChange:_,onCornerWidthChange:v,onCornerHeightChange:b,children:Ot.jsx(It.div,{dir:M,...a,ref:S,style:{position:"relative","--radix-scroll-area-corner-width":x+"px","--radix-scroll-area-corner-height":y+"px",...e.style}})})});jM.displayName=vM;var NM="ScrollAreaViewport",_M=hn.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,nonce:s,...i}=e,a=wM(NM,n),o=hn.useRef(null),l=Pt(t,o,a.onViewportChange);return Ot.jsxs(Ot.Fragment,{children:[Ot.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),Ot.jsx(It.div,{"data-radix-scroll-area-viewport":"",...i,ref:l,style:{overflowX:a.scrollbarXEnabled?"scroll":"hidden",overflowY:a.scrollbarYEnabled?"scroll":"hidden",...e.style},children:Ot.jsx("div",{ref:a.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});_M.displayName=NM;var SM="ScrollAreaScrollbar",MM=hn.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=wM(SM,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:a}=s,o="horizontal"===e.orientation;return hn.useEffect(()=>(o?i(!0):a(!0),()=>{o?i(!1):a(!1)}),[o,i,a]),"hover"===s.type?Ot.jsx(CM,{...r,ref:t,forceMount:n}):"scroll"===s.type?Ot.jsx(EM,{...r,ref:t,forceMount:n}):"auto"===s.type?Ot.jsx(kM,{...r,ref:t,forceMount:n}):"always"===s.type?Ot.jsx(AM,{...r,ref:t}):null});MM.displayName=SM;var CM=hn.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=wM(SM,e.__scopeScrollArea),[i,a]=hn.useState(!1);return hn.useEffect(()=>{const e=s.scrollArea;let t=0;if(e){const n=()=>{window.clearTimeout(t),a(!0)},r=()=>{t=window.setTimeout(()=>a(!1),s.scrollHideDelay)};return e.addEventListener("pointerenter",n),e.addEventListener("pointerleave",r),()=>{window.clearTimeout(t),e.removeEventListener("pointerenter",n),e.removeEventListener("pointerleave",r)}}},[s.scrollArea,s.scrollHideDelay]),Ot.jsx(Lt,{present:n||i,children:Ot.jsx(kM,{"data-state":i?"visible":"hidden",...r,ref:t})})}),EM=hn.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=wM(SM,e.__scopeScrollArea),i="horizontal"===e.orientation,a=KM(()=>l("SCROLL_END"),100),[o,l]=(c="hidden",d={hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}},hn.useReducer((e,t)=>d[e][t]??e,c));var c,d;return hn.useEffect(()=>{if("idle"===o){const e=window.setTimeout(()=>l("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(e)}},[o,s.scrollHideDelay,l]),hn.useEffect(()=>{const e=s.viewport,t=i?"scrollLeft":"scrollTop";if(e){let n=e[t];const r=()=>{const r=e[t];n!==r&&(l("SCROLL"),a()),n=r};return e.addEventListener("scroll",r),()=>e.removeEventListener("scroll",r)}},[s.viewport,i,l,a]),Ot.jsx(Lt,{present:n||"hidden"!==o,children:Ot.jsx(AM,{"data-state":"hidden"===o?"hidden":"visible",...r,ref:t,onPointerEnter:Ft(e.onPointerEnter,()=>l("POINTER_ENTER")),onPointerLeave:Ft(e.onPointerLeave,()=>l("POINTER_LEAVE"))})})}),kM=hn.forwardRef((e,t)=>{const n=wM(SM,e.__scopeScrollArea),{forceMount:r,...s}=e,[i,a]=hn.useState(!1),o="horizontal"===e.orientation,l=KM(()=>{if(n.viewport){const e=n.viewport.offsetWidth<n.viewport.scrollWidth,t=n.viewport.offsetHeight<n.viewport.scrollHeight;a(o?e:t)}},10);return YM(n.viewport,l),YM(n.content,l),Ot.jsx(Lt,{present:r||i,children:Ot.jsx(AM,{"data-state":i?"visible":"hidden",...s,ref:t})})}),AM=hn.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,s=wM(SM,e.__scopeScrollArea),i=hn.useRef(null),a=hn.useRef(0),[o,l]=hn.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=HM(o.viewport,o.content),d={...r,sizes:o,onSizesChange:l,hasThumb:Boolean(c>0&&c<1),onThumbChange:e=>i.current=e,onThumbPointerUp:()=>a.current=0,onThumbPointerDown:e=>a.current=e};function u(e,t){return function(e,t,n,r="ltr"){const s=WM(n),i=s/2,a=t||i,o=s-a,l=n.scrollbar.paddingStart+a,c=n.scrollbar.size-n.scrollbar.paddingEnd-o,d=n.content-n.viewport,u="ltr"===r?[0,d]:[-1*d,0];return GM([l,c],u)(e)}(e,a.current,o,t)}return"horizontal"===n?Ot.jsx(TM,{...d,ref:t,onThumbPositionChange:()=>{if(s.viewport&&i.current){const e=$M(s.viewport.scrollLeft,o,s.dir);i.current.style.transform=`translate3d(${e}px, 0, 0)`}},onWheelScroll:e=>{s.viewport&&(s.viewport.scrollLeft=e)},onDragScroll:e=>{s.viewport&&(s.viewport.scrollLeft=u(e,s.dir))}}):"vertical"===n?Ot.jsx(PM,{...d,ref:t,onThumbPositionChange:()=>{if(s.viewport&&i.current){const e=$M(s.viewport.scrollTop,o);i.current.style.transform=`translate3d(0, ${e}px, 0)`}},onWheelScroll:e=>{s.viewport&&(s.viewport.scrollTop=e)},onDragScroll:e=>{s.viewport&&(s.viewport.scrollTop=u(e))}}):null}),TM=hn.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...s}=e,i=wM(SM,e.__scopeScrollArea),[a,o]=hn.useState(),l=hn.useRef(null),c=Pt(t,l,i.onScrollbarXChange);return hn.useEffect(()=>{l.current&&o(getComputedStyle(l.current))},[l]),Ot.jsx(IM,{"data-orientation":"horizontal",...s,ref:c,sizes:n,style:{bottom:0,left:"rtl"===i.dir?"var(--radix-scroll-area-corner-width)":0,right:"ltr"===i.dir?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":WM(n)+"px",...e.style},onThumbPointerDown:t=>e.onThumbPointerDown(t.x),onDragScroll:t=>e.onDragScroll(t.x),onWheelScroll:(t,n)=>{if(i.viewport){const r=i.viewport.scrollLeft+t.deltaX;e.onWheelScroll(r),qM(r,n)&&t.preventDefault()}},onResize:()=>{l.current&&i.viewport&&a&&r({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:VM(a.paddingLeft),paddingEnd:VM(a.paddingRight)}})}})}),PM=hn.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...s}=e,i=wM(SM,e.__scopeScrollArea),[a,o]=hn.useState(),l=hn.useRef(null),c=Pt(t,l,i.onScrollbarYChange);return hn.useEffect(()=>{l.current&&o(getComputedStyle(l.current))},[l]),Ot.jsx(IM,{"data-orientation":"vertical",...s,ref:c,sizes:n,style:{top:0,right:"ltr"===i.dir?0:void 0,left:"rtl"===i.dir?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":WM(n)+"px",...e.style},onThumbPointerDown:t=>e.onThumbPointerDown(t.y),onDragScroll:t=>e.onDragScroll(t.y),onWheelScroll:(t,n)=>{if(i.viewport){const r=i.viewport.scrollTop+t.deltaY;e.onWheelScroll(r),qM(r,n)&&t.preventDefault()}},onResize:()=>{l.current&&i.viewport&&a&&r({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:VM(a.paddingTop),paddingEnd:VM(a.paddingBottom)}})}})}),[OM,RM]=yM(SM),IM=hn.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:s,onThumbChange:i,onThumbPointerUp:a,onThumbPointerDown:o,onThumbPositionChange:l,onDragScroll:c,onWheelScroll:d,onResize:u,...h}=e,p=wM(SM,n),[m,f]=hn.useState(null),g=Pt(t,e=>f(e)),x=hn.useRef(null),v=hn.useRef(""),y=p.viewport,b=r.content-r.viewport,w=zt(d),j=zt(l),N=KM(u,10);function _(e){if(x.current){const t=e.clientX-x.current.left,n=e.clientY-x.current.top;c({x:t,y:n})}}return hn.useEffect(()=>{const e=e=>{const t=e.target,n=m?.contains(t);n&&w(e,b)};return document.addEventListener("wheel",e,{passive:!1}),()=>document.removeEventListener("wheel",e,{passive:!1})},[y,m,b,w]),hn.useEffect(j,[r,j]),YM(m,N),YM(p.content,N),Ot.jsx(OM,{scope:n,scrollbar:m,hasThumb:s,onThumbChange:zt(i),onThumbPointerUp:zt(a),onThumbPositionChange:j,onThumbPointerDown:zt(o),children:Ot.jsx(It.div,{...h,ref:g,style:{position:"absolute",...h.style},onPointerDown:Ft(e.onPointerDown,e=>{if(0===e.button){e.target.setPointerCapture(e.pointerId),x.current=m.getBoundingClientRect(),v.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",p.viewport&&(p.viewport.style.scrollBehavior="auto"),_(e)}}),onPointerMove:Ft(e.onPointerMove,_),onPointerUp:Ft(e.onPointerUp,e=>{const t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),document.body.style.webkitUserSelect=v.current,p.viewport&&(p.viewport.style.scrollBehavior=""),x.current=null})})})}),DM="ScrollAreaThumb",LM=hn.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=RM(DM,e.__scopeScrollArea);return Ot.jsx(Lt,{present:n||s.hasThumb,children:Ot.jsx(FM,{ref:t,...r})})}),FM=hn.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...s}=e,i=wM(DM,n),a=RM(DM,n),{onThumbPositionChange:o}=a,l=Pt(t,e=>a.onThumbChange(e)),c=hn.useRef(void 0),d=KM(()=>{c.current&&(c.current(),c.current=void 0)},100);return hn.useEffect(()=>{const e=i.viewport;if(e){const t=()=>{if(d(),!c.current){const t=XM(e,o);c.current=t,o()}};return o(),e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)}},[i.viewport,d,o]),Ot.jsx(It.div,{"data-state":a.hasThumb?"visible":"hidden",...s,ref:l,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Ft(e.onPointerDownCapture,e=>{const t=e.target.getBoundingClientRect(),n=e.clientX-t.left,r=e.clientY-t.top;a.onThumbPointerDown({x:n,y:r})}),onPointerUp:Ft(e.onPointerUp,a.onThumbPointerUp)})});LM.displayName=DM;var zM="ScrollAreaCorner",BM=hn.forwardRef((e,t)=>{const n=wM(zM,e.__scopeScrollArea),r=Boolean(n.scrollbarX&&n.scrollbarY);return"scroll"!==n.type&&r?Ot.jsx(UM,{...e,ref:t}):null});BM.displayName=zM;var UM=hn.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,s=wM(zM,n),[i,a]=hn.useState(0),[o,l]=hn.useState(0),c=Boolean(i&&o);return YM(s.scrollbarX,()=>{const e=s.scrollbarX?.offsetHeight||0;s.onCornerHeightChange(e),l(e)}),YM(s.scrollbarY,()=>{const e=s.scrollbarY?.offsetWidth||0;s.onCornerWidthChange(e),a(e)}),c?Ot.jsx(It.div,{...r,ref:t,style:{width:i,height:o,position:"absolute",right:"ltr"===s.dir?0:void 0,left:"rtl"===s.dir?0:void 0,bottom:0,...e.style}}):null});function VM(e){return e?parseInt(e,10):0}function HM(e,t){const n=e/t;return isNaN(n)?0:n}function WM(e){const t=HM(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function $M(e,t,n="ltr"){const r=WM(t),s=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=t.scrollbar.size-s,a=t.content-t.viewport,o=i-r,l=Xr(e,"ltr"===n?[0,a]:[-1*a,0]);return GM([0,a],[0,o])(l)}function GM(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function qM(e,t){return e>0&&e<t}var XM=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function s(){const i={left:e.scrollLeft,top:e.scrollTop},a=n.left!==i.left,o=n.top!==i.top;(a||o)&&t(),n=i,r=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(r)};function KM(e,t){const n=zt(e),r=hn.useRef(0);return hn.useEffect(()=>()=>window.clearTimeout(r.current),[]),hn.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function YM(e,t){const n=zt(t);Vt(()=>{let t=0;if(e){const r=new ResizeObserver(()=>{cancelAnimationFrame(t),t=window.requestAnimationFrame(n)});return r.observe(e),()=>{window.cancelAnimationFrame(t),r.unobserve(e)}}},[e,n])}var ZM=jM,JM=_M,QM=BM;const eC=hn.forwardRef(({className:e,children:t,...n},r)=>Ot.jsxs(ZM,{ref:r,className:bn("relative overflow-hidden",e),...n,children:[Ot.jsx(JM,{className:"h-full w-full rounded-[inherit]",children:t}),Ot.jsx(tC,{}),Ot.jsx(QM,{})]}));eC.displayName=ZM.displayName;const tC=hn.forwardRef(({className:e,orientation:t="vertical",...n},r)=>Ot.jsx(MM,{ref:r,orientation:t,className:bn("flex touch-none select-none transition-colors","vertical"===t&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===t&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:Ot.jsx(LM,{className:"relative flex-1 rounded-full bg-border"})}));function nC(e,t){return Object.hasOwn(e,t)}tC.displayName=MM.displayName;const{AbortController:rC}=globalThis,sC=(e="Aborted",t)=>{const n=new DOMException(e,"AbortError");return null!=t&&nC(t,"cause")&&Object.defineProperty(n,"cause",{__proto__:null,configurable:!0,writable:!0,value:t.cause}),n},iC=/^data:([^/]+\/[^,;]+(?:[^,]*?))(;base64)?,([\s\S]*)$/;class aC extends Error{constructor(e,t){super(e),_t(this,"isNetworkError"),_t(this,"cause"),this.cause=t?.cause,this.cause&&nC(this.cause,"isNetworkError")?this.isNetworkError=this.cause.isNetworkError:this.isNetworkError=!1}}function oC(e,t,n,r){return e===t?e:0===r?t:e+(t-e)*2**(-r/n)}const lC=['a[href]:not([tabindex^="-"]):not([inert]):not([aria-hidden])','area[href]:not([tabindex^="-"]):not([inert]):not([aria-hidden])',"input:not([disabled]):not([inert]):not([aria-hidden])","select:not([disabled]):not([inert]):not([aria-hidden])","textarea:not([disabled]):not([inert]):not([aria-hidden])","button:not([disabled]):not([inert]):not([aria-hidden])",'iframe:not([tabindex^="-"]):not([inert]):not([aria-hidden])','object:not([tabindex^="-"]):not([inert]):not([aria-hidden])','embed:not([tabindex^="-"]):not([inert]):not([aria-hidden])','[contenteditable]:not([tabindex^="-"]):not([inert]):not([aria-hidden])','[tabindex]:not([tabindex^="-"]):not([inert]):not([aria-hidden])'];class cC extends Error{constructor(e,t=null){super("This looks like a network error, the endpoint might be blocked by an internet provider or a firewall."),_t(this,"cause"),_t(this,"isNetworkError"),_t(this,"request"),this.cause=e,this.isNetworkError=!0,this.request=t}}function dC(e){return"object"==typeof e&&null!==e&&("nodeType"in e&&e.nodeType===Node.ELEMENT_NODE)}function uC(e){if("string"==typeof e){const t=document.querySelectorAll(e);return 0===t.length?null:Array.from(t)}return"object"==typeof e&&dC(e)?[e]:null}function hC(e){const t=e.lastIndexOf(".");return-1===t||t===e.length-1?{name:e,extension:void 0}:{name:e.slice(0,t),extension:e.slice(t+1)}}const pC={__proto__:null,md:"text/markdown",markdown:"text/markdown",mp4:"video/mp4",mp3:"audio/mp3",svg:"image/svg+xml",jpg:"image/jpeg",png:"image/png",webp:"image/webp",gif:"image/gif",heic:"image/heic",heif:"image/heif",yaml:"text/yaml",yml:"text/yaml",csv:"text/csv",tsv:"text/tab-separated-values",tab:"text/tab-separated-values",avi:"video/x-msvideo",mks:"video/x-matroska",mkv:"video/x-matroska",mov:"video/quicktime",dicom:"application/dicom",doc:"application/msword",msg:"application/vnd.ms-outlook",docm:"application/vnd.ms-word.document.macroenabled.12",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",dot:"application/msword",dotm:"application/vnd.ms-word.template.macroenabled.12",dotx:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",xla:"application/vnd.ms-excel",xlam:"application/vnd.ms-excel.addin.macroenabled.12",xlc:"application/vnd.ms-excel",xlf:"application/x-xliff+xml",xlm:"application/vnd.ms-excel",xls:"application/vnd.ms-excel",xlsb:"application/vnd.ms-excel.sheet.binary.macroenabled.12",xlsm:"application/vnd.ms-excel.sheet.macroenabled.12",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xlt:"application/vnd.ms-excel",xltm:"application/vnd.ms-excel.template.macroenabled.12",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template",xlw:"application/vnd.ms-excel",txt:"text/plain",text:"text/plain",conf:"text/plain",log:"text/plain",pdf:"application/pdf",zip:"application/zip","7z":"application/x-7z-compressed",rar:"application/x-rar-compressed",tar:"application/x-tar",gz:"application/gzip",dmg:"application/x-apple-diskimage"};function mC(e){if(e.type)return e.type;const t=e.name?hC(e.name).extension?.toLowerCase():null;return t&&t in pC?pC[t]:"application/octet-stream"}function fC(e){let t="";return e.replace(/[^A-Z0-9]/gi,e=>(t+=`-${function(e){return e.charCodeAt(0).toString(32)}(e)}`,"/"))+t}function gC(e,t){if(function(e){return!(!e.isRemote||!e.remote)&&new Set(["box","dropbox","drive","facebook","unsplash"]).has(e.remote.provider)}(e))return e.id;const n=mC(e);return function(e,t){let n=t||"uppy";return"string"==typeof e.name&&(n+=`-${fC(e.name.toLowerCase())}`),void 0!==e.type&&(n+=`-${e.type}`),e.meta&&"string"==typeof e.meta.relativePath&&(n+=`-${fC(e.meta.relativePath.toLowerCase())}`),void 0!==e.data.size&&(n+=`-${e.data.size}`),void 0!==e.data.lastModified&&(n+=`-${e.data.lastModified}`),n}({...e,type:n},t)}function xC(e,t){return!0===e?Object.keys(t):Array.isArray(e)?e:[]}const vC=Array.from;function yC(e,t,n,{onSuccess:r}){e.readEntries(s=>{const i=[...t,...s];s.length?queueMicrotask(()=>{yC(e,i,n,{onSuccess:r})}):r(i)},e=>{n(e),r(t)})}function bC(e,t){return null==e?e:{kind:e.isFile?"file":e.isDirectory?"directory":void 0,name:e.name,getFile:()=>new Promise((t,n)=>e.file(t,n)),async*values(){const n=e.createReader(),r=await new Promise(e=>{yC(n,[],t,{onSuccess:n=>e(n.map(e=>bC(e,t)))})});yield*r},isSameEntry:void 0}}async function*wC(e,t,n=void 0){const r=()=>`${t}/${e.name}`;if("file"===e.kind){const s=await e.getFile();null!=s?(s.relativePath=t?r():null,yield s):null!=n&&(yield n)}else if("directory"===e.kind)for await(const s of e.values())yield*wC(s,t?r():e.name);else null!=n&&(yield n)}async function jC(e,t){const n=t?.logDropError??Function.prototype;try{const t=[];for await(const r of async function*(e,t){const n=await Promise.all(Array.from(e.items,async e=>{let n;return n??(n=bC("function"==typeof e.getAsEntry?e.getAsEntry():e.webkitGetAsEntry(),t)),{fileSystemHandle:n,lastResortFile:e.getAsFile()}}));for(const{lastResortFile:r,fileSystemHandle:s}of n)if(null!=s)try{yield*wC(s,"",r)}catch(PUe){null!=r?yield r:t(PUe)}else null!=r&&(yield r)}(e,n))t.push(r);return t}catch{return function(e){const t=vC(e.files);return Promise.resolve(t)}(e)}}function NC(){if("undefined"==typeof window)return!1;const e=document.body;return null!=e&&null!=window&&("draggable"in e&&"ondragstart"in e&&"ondrop"in e&&("FormData"in window&&"FileReader"in window))}function _C(e){return e.startsWith("blob:")}function SC(e){return!!e&&/^[^/]+\/(jpe?g|gif|png|svg|svg\+xml|bmp|webp|avif)$/.test(e)}function MC(e){const t=(n=e,{hours:Math.floor(n/3600)%24,minutes:Math.floor(n/60)%60,seconds:Math.floor(n%60)});var n;return`${0===t.hours?"":`${t.hours}h`}${0===t.minutes?"":`${0===t.hours?t.minutes:` ${t.minutes.toString(10).padStart(2,"0")}`}m`}${0!==t.hours?"":`${0===t.minutes?t.seconds:` ${t.seconds.toString(10).padStart(2,"0")}`}s`}`}function CC(e){if(null!=e){const t=()=>this.abort(e.reason);e.addEventListener("abort",t,{once:!0});const n=()=>{e.removeEventListener("abort",t)};this.then?.(n,n)}return this}class EC{constructor(l){Ct(this,o),Ct(this,e,0),Ct(this,t,[]),Ct(this,n,!1),Ct(this,r),Ct(this,s,1),Ct(this,i),Ct(this,a),_t(this,"limit"),Ct(this,p,()=>this.resume()),Ct(this,m,()=>{if(Mt(this,n))Et(this,a,setTimeout(Mt(this,m),0));else{Et(this,s,this.limit),this.limit=Math.ceil((Mt(this,i)+Mt(this,s))/2);for(let e=Mt(this,s);e<=this.limit;e++)kt(this,o,c).call(this);Mt(this,i)-Mt(this,s)>3?Et(this,a,setTimeout(Mt(this,m),2e3)):Et(this,s,Math.floor(Mt(this,s)/2))}}),this.limit="number"!=typeof l||0===l?1/0:l}run(t,r){return!Mt(this,n)&&Mt(this,e)<this.limit?kt(this,o,l).call(this,t):kt(this,o,u).call(this,t,r)}wrapSyncFunction(e,t){return(...n)=>{const r=this.run(()=>(e(...n),queueMicrotask(()=>r.done()),()=>{}),t);return{abortOn:CC,abort(){r.abort()}}}}wrapPromiseFunction(e,t){return(...n)=>{let r;const s=new Promise((s,i)=>{r=this.run(()=>{let t,a;try{a=Promise.resolve(e(...n))}catch(PUe){a=Promise.reject(PUe)}return a.then(e=>{t?i(t):(r.done(),s(e))},e=>{t?i(t):(r.done(),i(e))}),e=>{t=function(e){return new Error("Cancelled",{cause:e})}(e)}},t)});return s.abort=e=>{r.abort(e)},s.abortOn=CC,s}}resume(){Et(this,n,!1),clearTimeout(Mt(this,r));for(let e=0;e<this.limit;e++)kt(this,o,c).call(this)}pause(e=null){Et(this,n,!0),clearTimeout(Mt(this,r)),null!=e&&Et(this,r,setTimeout(Mt(this,p),e))}rateLimit(e){clearTimeout(Mt(this,a)),this.pause(e),this.limit>1&&Number.isFinite(this.limit)&&(Et(this,i,this.limit-1),this.limit=Mt(this,s),Et(this,a,setTimeout(Mt(this,m),e)))}get isPaused(){return Mt(this,n)}}function kC(e,t,n){const r=[];return e.forEach(e=>"string"!=typeof e?r.push(e):t[Symbol.split](e).forEach((e,t,s)=>{""!==e&&r.push(e),t<s.length-1&&r.push(n)})),r}
/**
 * Takes a string with placeholder variables like `%{smart_count} file selected`
 * and replaces it with values from options `{smart_count: 5}`
 *
 * @license https://github.com/airbnb/polyglot.js/blob/master/LICENSE
 * taken from https://github.com/airbnb/polyglot.js/blob/master/lib/polyglot.js#L299
 *
 * @param phrase that needs interpolation, with placeholders
 * @param options with values that will be used to replace placeholders
 */function AC(e,t){const n=/\$/g;let r=[e];if(null==t)return r;for(const s of Object.keys(t))if("_"!==s){let e=t[s];"string"==typeof e&&(e=n[Symbol.replace](e,"$$$$")),r=kC(r,new RegExp(`%\\{${s}\\}`,"g"),e)}return r}e=new WeakMap,t=new WeakMap,n=new WeakMap,r=new WeakMap,s=new WeakMap,i=new WeakMap,a=new WeakMap,o=new WeakSet,l=function(t){Et(this,e,Mt(this,e)+1);let n,r=!1;try{n=t()}catch(PUe){throw Et(this,e,Mt(this,e)-1),PUe}return{abort:t=>{r||(r=!0,Et(this,e,Mt(this,e)-1),n?.(t),kt(this,o,c).call(this))},done:()=>{r||(r=!0,Et(this,e,Mt(this,e)-1),kt(this,o,c).call(this))}}},c=function(){queueMicrotask(()=>kt(this,o,d).call(this))},d=function(){if(Mt(this,n)||Mt(this,e)>=this.limit)return;if(0===Mt(this,t).length)return;const r=Mt(this,t).shift();if(null==r)throw new Error("Invariant violation: next is null");const s=kt(this,o,l).call(this,r.fn);r.abort=s.abort,r.done=s.done},u=function(e,n){const r={fn:e,priority:n?.priority||0,abort:()=>{kt(this,o,h).call(this,r)},done:()=>{throw new Error("Cannot mark a queued request as done: this indicates a bug")}},s=Mt(this,t).findIndex(e=>r.priority>e.priority);return-1===s?Mt(this,t).push(r):Mt(this,t).splice(s,0,r),r},h=function(e){const n=Mt(this,t).indexOf(e);-1!==n&&Mt(this,t).splice(n,1)},p=new WeakMap,m=new WeakMap;const TC=e=>{throw new Error(`missing string: ${e}`)};class PC{constructor(e,{onMissingKey:t=TC}={}){Ct(this,g),_t(this,"locale"),Ct(this,f),this.locale={strings:{},pluralize:e=>1===e?0:1},Array.isArray(e)?e.forEach(kt(this,g,x),this):kt(this,g,x).call(this,e),Et(this,f,t)}translate(e,t){return this.translateArray(e,t).join("")}translateArray(e,t){let n=this.locale.strings[e];null==n&&(Mt(this,f).call(this,e),n=e);if("object"==typeof n){if(t&&void 0!==t.smart_count){return AC(n[this.locale.pluralize(t.smart_count)],t)}throw new Error("Attempted to use a string with plural forms, but no value was given for %{smart_count}")}if("string"!=typeof n)throw new Error("string was not a string");return AC(n,t)}}f=new WeakMap,g=new WeakSet,x=function(e){if(!e?.strings)return;const t=this.locale;Object.assign(this.locale,{strings:{...t.strings,...e.strings},pluralize:e.pluralize||t.pluralize})};const OC="...";function RC(e,t){if(0===t)return"";if(e.length<=t)return e;if(t<=4)return`${e.slice(0,t-1)}`;const n=t-3,r=Math.ceil(n/2),s=Math.floor(n/2);return e.slice(0,r)+OC+e.slice(-s)}class IC extends Error{constructor(){super(...arguments),_t(this,"name","UserFacingApiError")}}var DC,LC,FC,zC,BC,UC,VC,HC,WC,$C,GC,qC={},XC=[],KC=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,YC=Array.isArray;function ZC(e,t){for(var n in t)e[n]=t[n];return e}function JC(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function QC(e,t,n){var r,s,i,a={};for(i in t)"key"==i?r=t[i]:"ref"==i?s=t[i]:a[i]=t[i];if(arguments.length>2&&(a.children=arguments.length>3?DC.call(arguments,2):n),"function"==typeof e&&null!=e.defaultProps)for(i in e.defaultProps)void 0===a[i]&&(a[i]=e.defaultProps[i]);return eE(e,a,r,s,null)}function eE(e,t,n,r,s){var i={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:null==s?++FC:s,__i:-1,__u:0};return null==s&&null!=LC.vnode&&LC.vnode(i),i}function tE(e){return e.children}function nE(e,t){this.props=e,this.context=t}function rE(e,t){if(null==t)return e.__?rE(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?rE(e):null}function sE(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return sE(e)}}function iE(e){(!e.__d&&(e.__d=!0)&&zC.push(e)&&!aE.__r++||BC!=LC.debounceRendering)&&((BC=LC.debounceRendering)||UC)(aE)}function aE(){for(var e,t,n,r,s,i,a,o=1;zC.length;)zC.length>o&&zC.sort(VC),e=zC.shift(),o=zC.length,e.__d&&(n=void 0,r=void 0,s=(r=(t=e).__v).__e,i=[],a=[],t.__P&&((n=ZC({},r)).__v=r.__v+1,LC.vnode&&LC.vnode(n),mE(t.__P,n,r,t.__n,t.__P.namespaceURI,32&r.__u?[s]:null,i,null==s?rE(r):s,!!(32&r.__u),a),n.__v=r.__v,n.__.__k[n.__i]=n,gE(i,n,a),r.__e=r.__=null,n.__e!=s&&sE(n)));aE.__r=0}function oE(e,t,n,r,s,i,a,o,l,c,d){var u,h,p,m,f,g,x,v=r&&r.__k||XC,y=t.length;for(l=function(e,t,n,r,s){var i,a,o,l,c,d=n.length,u=d,h=0;for(e.__k=new Array(s),i=0;i<s;i++)null!=(a=t[i])&&"boolean"!=typeof a&&"function"!=typeof a?(l=i+h,(a=e.__k[i]="string"==typeof a||"number"==typeof a||"bigint"==typeof a||a.constructor==String?eE(null,a,null,null,null):YC(a)?eE(tE,{children:a},null,null,null):null==a.constructor&&a.__b>0?eE(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):a).__=e,a.__b=e.__b+1,o=null,-1!=(c=a.__i=dE(a,n,l,u))&&(u--,(o=n[c])&&(o.__u|=2)),null==o||null==o.__v?(-1==c&&(s>d?h--:s<d&&h++),"function"!=typeof a.type&&(a.__u|=4)):c!=l&&(c==l-1?h--:c==l+1?h++:(c>l?h--:h++,a.__u|=4))):e.__k[i]=null;if(u)for(i=0;i<d;i++)null!=(o=n[i])&&!(2&o.__u)&&(o.__e==r&&(r=rE(o)),yE(o,o));return r}(n,t,v,l,y),u=0;u<y;u++)null!=(p=n.__k[u])&&(h=-1==p.__i?qC:v[p.__i]||qC,p.__i=u,g=mE(e,p,h,s,i,a,o,l,c,d),m=p.__e,p.ref&&h.ref!=p.ref&&(h.ref&&vE(h.ref,null,p),d.push(p.ref,p.__c||m,p)),null==f&&null!=m&&(f=m),(x=!!(4&p.__u))||h.__k===p.__k?l=lE(p,l,e,x):"function"==typeof p.type&&void 0!==g?l=g:m&&(l=m.nextSibling),p.__u&=-7);return n.__e=f,l}function lE(e,t,n,r){var s,i;if("function"==typeof e.type){for(s=e.__k,i=0;s&&i<s.length;i++)s[i]&&(s[i].__=e,t=lE(s[i],t,n,r));return t}e.__e!=t&&(r&&(t&&e.type&&!t.parentNode&&(t=rE(e)),n.insertBefore(e.__e,t||null)),t=e.__e);do{t=t&&t.nextSibling}while(null!=t&&8==t.nodeType);return t}function cE(e,t){return t=t||[],null==e||"boolean"==typeof e||(YC(e)?e.some(function(e){cE(e,t)}):t.push(e)),t}function dE(e,t,n,r){var s,i,a,o=e.key,l=e.type,c=t[n],d=null!=c&&!(2&c.__u);if(null===c&&null==e.key||d&&o==c.key&&l==c.type)return n;if(r>(d?1:0))for(s=n-1,i=n+1;s>=0||i<t.length;)if(null!=(c=t[a=s>=0?s--:i++])&&!(2&c.__u)&&o==c.key&&l==c.type)return a;return-1}function uE(e,t,n){"-"==t[0]?e.setProperty(t,null==n?"":n):e[t]=null==n?"":"number"!=typeof n||KC.test(t)?n:n+"px"}function hE(e,t,n,r,s){var i,a;e:if("style"==t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof r&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||uE(e.style,t,"");if(n)for(t in n)r&&n[t]==r[t]||uE(e.style,t,n[t])}else if("o"==t[0]&&"n"==t[1])i=t!=(t=t.replace(HC,"$1")),a=t.toLowerCase(),t=a in e||"onFocusOut"==t||"onFocusIn"==t?a.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=n,n?r?n.u=r.u:(n.u=WC,e.addEventListener(t,i?GC:$C,i)):e.removeEventListener(t,i?GC:$C,i);else{if("http://www.w3.org/2000/svg"==s)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=t&&"height"!=t&&"href"!=t&&"list"!=t&&"form"!=t&&"tabIndex"!=t&&"download"!=t&&"rowSpan"!=t&&"colSpan"!=t&&"role"!=t&&"popover"!=t&&t in e)try{e[t]=null==n?"":n;break e}catch(qDe){}"function"==typeof n||(null==n||!1===n&&"-"!=t[4]?e.removeAttribute(t):e.setAttribute(t,"popover"==t&&1==n?"":n))}}function pE(e){return function(t){if(this.l){var n=this.l[t.type+e];if(null==t.t)t.t=WC++;else if(t.t<n.u)return;return n(LC.event?LC.event(t):t)}}}function mE(e,t,n,r,s,i,a,o,l,c){var d,u,h,p,m,f,g,x,v,y,b,w,j,N,_,S,M,C=t.type;if(null!=t.constructor)return null;128&n.__u&&(l=!!(32&n.__u),i=[o=t.__e=n.__e]),(d=LC.__b)&&d(t);e:if("function"==typeof C)try{if(x=t.props,v="prototype"in C&&C.prototype.render,y=(d=C.contextType)&&r[d.__c],b=d?y?y.props.value:d.__:r,n.__c?g=(u=t.__c=n.__c).__=u.__E:(v?t.__c=u=new C(x,b):(t.__c=u=new nE(x,b),u.constructor=C,u.render=bE),y&&y.sub(u),u.props=x,u.state||(u.state={}),u.context=b,u.__n=r,h=u.__d=!0,u.__h=[],u._sb=[]),v&&null==u.__s&&(u.__s=u.state),v&&null!=C.getDerivedStateFromProps&&(u.__s==u.state&&(u.__s=ZC({},u.__s)),ZC(u.__s,C.getDerivedStateFromProps(x,u.__s))),p=u.props,m=u.state,u.__v=t,h)v&&null==C.getDerivedStateFromProps&&null!=u.componentWillMount&&u.componentWillMount(),v&&null!=u.componentDidMount&&u.__h.push(u.componentDidMount);else{if(v&&null==C.getDerivedStateFromProps&&x!==p&&null!=u.componentWillReceiveProps&&u.componentWillReceiveProps(x,b),!u.__e&&null!=u.shouldComponentUpdate&&!1===u.shouldComponentUpdate(x,u.__s,b)||t.__v==n.__v){for(t.__v!=n.__v&&(u.props=x,u.state=u.__s,u.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(e){e&&(e.__=t)}),w=0;w<u._sb.length;w++)u.__h.push(u._sb[w]);u._sb=[],u.__h.length&&a.push(u);break e}null!=u.componentWillUpdate&&u.componentWillUpdate(x,u.__s,b),v&&null!=u.componentDidUpdate&&u.__h.push(function(){u.componentDidUpdate(p,m,f)})}if(u.context=b,u.props=x,u.__P=e,u.__e=!1,j=LC.__r,N=0,v){for(u.state=u.__s,u.__d=!1,j&&j(t),d=u.render(u.props,u.state,u.context),_=0;_<u._sb.length;_++)u.__h.push(u._sb[_]);u._sb=[]}else do{u.__d=!1,j&&j(t),d=u.render(u.props,u.state,u.context),u.state=u.__s}while(u.__d&&++N<25);u.state=u.__s,null!=u.getChildContext&&(r=ZC(ZC({},r),u.getChildContext())),v&&!h&&null!=u.getSnapshotBeforeUpdate&&(f=u.getSnapshotBeforeUpdate(p,m)),S=d,null!=d&&d.type===tE&&null==d.key&&(S=xE(d.props.children)),o=oE(e,YC(S)?S:[S],t,n,r,s,i,a,o,l,c),u.base=t.__e,t.__u&=-161,u.__h.length&&a.push(u),g&&(u.__E=u.__=null)}catch(qDe){if(t.__v=null,l||null!=i)if(qDe.then){for(t.__u|=l?160:128;o&&8==o.nodeType&&o.nextSibling;)o=o.nextSibling;i[i.indexOf(o)]=null,t.__e=o}else{for(M=i.length;M--;)JC(i[M]);fE(t)}else t.__e=n.__e,t.__k=n.__k,qDe.then||fE(t);LC.__e(qDe,t,n)}else null==i&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):o=t.__e=function(e,t,n,r,s,i,a,o,l){var c,d,u,h,p,m,f,g=n.props,x=t.props,v=t.type;if("svg"==v?s="http://www.w3.org/2000/svg":"math"==v?s="http://www.w3.org/1998/Math/MathML":s||(s="http://www.w3.org/1999/xhtml"),null!=i)for(c=0;c<i.length;c++)if((p=i[c])&&"setAttribute"in p==!!v&&(v?p.localName==v:3==p.nodeType)){e=p,i[c]=null;break}if(null==e){if(null==v)return document.createTextNode(x);e=document.createElementNS(s,v,x.is&&x),o&&(LC.__m&&LC.__m(t,i),o=!1),i=null}if(null==v)g===x||o&&e.data==x||(e.data=x);else{if(i=i&&DC.call(e.childNodes),g=n.props||qC,!o&&null!=i)for(g={},c=0;c<e.attributes.length;c++)g[(p=e.attributes[c]).name]=p.value;for(c in g)if(p=g[c],"children"==c);else if("dangerouslySetInnerHTML"==c)u=p;else if(!(c in x)){if("value"==c&&"defaultValue"in x||"checked"==c&&"defaultChecked"in x)continue;hE(e,c,null,p,s)}for(c in x)p=x[c],"children"==c?h=p:"dangerouslySetInnerHTML"==c?d=p:"value"==c?m=p:"checked"==c?f=p:o&&"function"!=typeof p||g[c]===p||hE(e,c,p,g[c],s);if(d)o||u&&(d.__html==u.__html||d.__html==e.innerHTML)||(e.innerHTML=d.__html),t.__k=[];else if(u&&(e.innerHTML=""),oE("template"==t.type?e.content:e,YC(h)?h:[h],t,n,r,"foreignObject"==v?"http://www.w3.org/1999/xhtml":s,i,a,i?i[0]:n.__k&&rE(n,0),o,l),null!=i)for(c=i.length;c--;)JC(i[c]);o||(c="value","progress"==v&&null==m?e.removeAttribute("value"):null!=m&&(m!==e[c]||"progress"==v&&!m||"option"==v&&m!=g[c])&&hE(e,c,m,g[c],s),c="checked",null!=f&&f!=e[c]&&hE(e,c,f,g[c],s))}return e}(n.__e,t,n,r,s,i,a,l,c);return(d=LC.diffed)&&d(t),128&t.__u?void 0:o}function fE(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(fE)}function gE(e,t,n){for(var r=0;r<n.length;r++)vE(n[r],n[++r],n[++r]);LC.__c&&LC.__c(t,e),e.some(function(t){try{e=t.__h,t.__h=[],e.some(function(e){e.call(t)})}catch(qDe){LC.__e(qDe,t.__v)}})}function xE(e){return"object"!=typeof e||null==e||e.__b&&e.__b>0?e:YC(e)?e.map(xE):ZC({},e)}function vE(e,t,n){try{if("function"==typeof e){var r="function"==typeof e.__u;r&&e.__u(),r&&null==t||(e.__u=e(t))}else e.current=t}catch(qDe){LC.__e(qDe,n)}}function yE(e,t,n){var r,s;if(LC.unmount&&LC.unmount(e),(r=e.ref)&&(r.current&&r.current!=e.__e||vE(r,null,t)),null!=(r=e.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(qDe){LC.__e(qDe,t)}r.base=r.__P=null}if(r=e.__k)for(s=0;s<r.length;s++)r[s]&&yE(r[s],t,n||"function"!=typeof e.type);n||JC(e.__e),e.__c=e.__=e.__e=void 0}function bE(e,t,n){return this.constructor(e,n)}function wE(e,t,n){var r,s,i;t==document&&(t=document.documentElement),LC.__&&LC.__(e,t),r=!1?null:t.__k,s=[],i=[],mE(t,e=t.__k=QC(tE,null,[e]),r||qC,qC,t.namespaceURI,r?null:t.firstChild?DC.call(t.childNodes):null,s,r?r.__e:t.firstChild,false,i),gE(s,e,i)}function jE(e,t,n){var r,s,i,a,o=ZC({},e.props);for(i in e.type&&e.type.defaultProps&&(a=e.type.defaultProps),t)"key"==i?r=t[i]:"ref"==i?s=t[i]:o[i]=void 0===t[i]&&null!=a?a[i]:t[i];return arguments.length>2&&(o.children=arguments.length>3?DC.call(arguments,2):n),eE(e.type,o,r||e.key,s||e.ref,null)}DC=XC.slice,LC={__e:function(e,t,n,r){for(var s,i,a;t=t.__;)if((s=t.__c)&&!s.__)try{if((i=s.constructor)&&null!=i.getDerivedStateFromError&&(s.setState(i.getDerivedStateFromError(e)),a=s.__d),null!=s.componentDidCatch&&(s.componentDidCatch(e,r||{}),a=s.__d),a)return s.__E=s}catch(o){e=o}throw e}},FC=0,nE.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!=this.state?this.__s:this.__s=ZC({},this.state),"function"==typeof e&&(e=e(ZC({},n),this.props)),e&&ZC(n,e),null!=e&&this.__v&&(t&&this._sb.push(t),iE(this))},nE.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),iE(this))},nE.prototype.render=tE,zC=[],UC="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,VC=function(e,t){return e.__v.__b-t.__v.__b},aE.__r=0,HC=/(PointerCapture)$|Capture$/i,WC=0,$C=pE(!1),GC=pE(!0);var NE=0;function _E(e,t,n,r,s,i){t||(t={});var a,o,l=t;if("ref"in l)for(o in l={},t)"ref"==o?a=t[o]:l[o]=t[o];var c={type:e,props:l,key:n,ref:a,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--NE,__i:-1,__u:0,__source:s,__self:i};if("function"==typeof e&&(a=e.defaultProps))for(o in a)void 0===l[o]&&(l[o]=a[o]);return LC.vnode&&LC.vnode(c),c}var SE,ME,CE,EE,kE=0,AE=[],TE=LC,PE=TE.__b,OE=TE.__r,RE=TE.diffed,IE=TE.__c,DE=TE.unmount,LE=TE.__;function FE(e,t){TE.__h&&TE.__h(ME,e,kE||t),kE=0;var n=ME.__H||(ME.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function zE(e){return kE=1,function(e,t){var n=FE(SE++,2);if(n.t=e,!n.__c&&(n.__=[YE(void 0,t),function(e){var t=n.__N?n.__N[0]:n.__[0],r=n.t(t,e);t!==r&&(n.__N=[r,n.__[1]],n.__c.setState({}))}],n.__c=ME,!ME.__f)){var r=function(e,t,r){if(!n.__c.__H)return!0;var i=n.__c.__H.__.filter(function(e){return!!e.__c});if(i.every(function(e){return!e.__N}))return!s||s.call(this,e,t,r);var a=n.__c.props!==e;return i.forEach(function(e){if(e.__N){var t=e.__[0];e.__=e.__N,e.__N=void 0,t!==e.__[0]&&(a=!0)}}),s&&s.call(this,e,t,r)||a};ME.__f=!0;var s=ME.shouldComponentUpdate,i=ME.componentWillUpdate;ME.componentWillUpdate=function(e,t,n){if(this.__e){var a=s;s=void 0,r(e,t,n),s=a}i&&i.call(this,e,t,n)},ME.shouldComponentUpdate=r}return n.__N||n.__}(YE,e)}function BE(e,t){var n=FE(SE++,3);!TE.__s&&KE(n.__H,t)&&(n.__=e,n.u=t,ME.__H.__h.push(n))}function UE(e){return kE=5,VE(function(){return{current:e}},[])}function VE(e,t){var n=FE(SE++,7);return KE(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function HE(e,t){return kE=8,VE(function(){return e},t)}function WE(){for(var e;e=AE.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(qE),e.__H.__h.forEach(XE),e.__H.__h=[]}catch(t){e.__H.__h=[],TE.__e(t,e.__v)}}TE.__b=function(e){ME=null,PE&&PE(e)},TE.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),LE&&LE(e,t)},TE.__r=function(e){OE&&OE(e),SE=0;var t=(ME=e.__c).__H;t&&(CE===ME?(t.__h=[],ME.__h=[],t.__.forEach(function(e){e.__N&&(e.__=e.__N),e.u=e.__N=void 0})):(t.__h.forEach(qE),t.__h.forEach(XE),t.__h=[],SE=0)),CE=ME},TE.diffed=function(e){RE&&RE(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(1!==AE.push(t)&&EE===TE.requestAnimationFrame||((EE=TE.requestAnimationFrame)||GE)(WE)),t.__H.__.forEach(function(e){e.u&&(e.__H=e.u),e.u=void 0})),CE=ME=null},TE.__c=function(e,t){t.some(function(e){try{e.__h.forEach(qE),e.__h=e.__h.filter(function(e){return!e.__||XE(e)})}catch(n){t.some(function(e){e.__h&&(e.__h=[])}),t=[],TE.__e(n,e.__v)}}),IE&&IE(e,t)},TE.unmount=function(e){DE&&DE(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(e){try{qE(e)}catch(n){t=n}}),n.__H=void 0,t&&TE.__e(t,n.__v))};var $E="function"==typeof requestAnimationFrame;function GE(e){var t,n=function(){clearTimeout(r),$E&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,35);$E&&(t=requestAnimationFrame(n))}function qE(e){var t=ME,n=e.__c;"function"==typeof n&&(e.__c=void 0,n()),ME=t}function XE(e){var t=ME;e.__c=e.__(),ME=t}function KE(e,t){return!e||e.length!==t.length||t.some(function(t,n){return t!==e[n]})}function YE(e,t){return"function"==typeof t?t(e):t}const ZE={position:"relative",width:"100%",minHeight:"100%"},JE={position:"absolute",top:0,left:0,width:"100%",overflow:"visible"};function QE({data:e,rowHeight:t,renderRow:n,overscanCount:r=10,padding:s=4,...i}){const a=UE(null),[o,l]=zE(0),[c,d]=zE(0);BE(()=>{function e(){null!=a.current&&c!==a.current.offsetHeight&&d(a.current.offsetHeight)}return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[c]);const u=HE(()=>{a.current&&l(a.current.scrollTop)},[]);let h=Math.floor(o/t),p=Math.floor(c/t);r&&(h=Math.max(0,h-h%r),p+=r);const m=h+p+s,f=e.slice(h,m),g={...ZE,height:e.length*t},x={...JE,top:h*t};return _E("div",{onScroll:u,ref:a,...i,children:_E("div",{role:"presentation",style:g,children:_E("div",{role:"presentation",style:x,children:f.map(n)})})})}class ek{constructor(e,t){_t(this,"uppy"),_t(this,"opts"),_t(this,"id"),_t(this,"defaultLocale"),_t(this,"i18n"),_t(this,"i18nArray"),_t(this,"type"),_t(this,"VERSION"),this.uppy=e,this.opts=t??{}}getPluginState(){const{plugins:e}=this.uppy.getState();return e?.[this.id]||{}}setPluginState(e){const{plugins:t}=this.uppy.getState();this.uppy.setState({plugins:{...t,[this.id]:{...t[this.id],...e}}})}setOptions(e){this.opts={...this.opts,...e},this.setPluginState(void 0),this.i18nInit()}i18nInit(){const e=new PC([this.defaultLocale,this.uppy.locale,this.opts.locale]);this.i18n=e.translate.bind(e),this.i18nArray=e.translateArray.bind(e),this.setPluginState(void 0)}addTarget(e){throw new Error("Extend the addTarget method to add your plugin to another plugin's target")}install(){}uninstall(){}update(e){}afterUpdate(){}}class tk{constructor(e){Ct(this,v),Ct(this,y,[]),Et(this,v,e)}on(e,t){return Mt(this,y).push([e,t]),Mt(this,v).on(e,t)}remove(){for(const[e,t]of Mt(this,y).splice(0))Mt(this,v).off(e,t)}onFilePause(e,t){this.on("upload-pause",(n,r)=>{e===n?.id&&t(r)})}onFileRemove(e,t){this.on("file-removed",n=>{e===n.id&&t(n.id)})}onPause(e,t){this.on("upload-pause",(n,r)=>{e===n?.id&&t(r)})}onRetry(e,t){this.on("upload-retry",n=>{e===n?.id&&t()})}onRetryAll(e,t){this.on("retry-all",()=>{Mt(this,v).getFile(e)&&t()})}onPauseAll(e,t){this.on("pause-all",()=>{Mt(this,v).getFile(e)&&t()})}onCancelAll(e,t){this.on("cancel-all",(...n)=>{Mt(this,v).getFile(e)&&t(...n)})}onResumeAll(e,t){this.on("resume-all",()=>{Mt(this,v).getFile(e)&&t()})}}v=new WeakMap,y=new WeakMap;const nk={debug:()=>{},warn:()=>{},error:(...e)=>{}},rk={debug:(...e)=>{},warn:(...e)=>{},error:(...e)=>{}};const sk=mn(function(e){if("number"!=typeof e||Number.isNaN(e))throw new TypeError("Expected a number, got "+typeof e);const t=e<0;let n=Math.abs(e);if(t&&(n=-n),0===n)return"0 B";const r=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],s=Math.min(Math.floor(Math.log(n)/Math.log(1024)),r.length-1),i=Number(n/1024**s),a=r[s];return`${i>=10||i%1==0?Math.round(i):i.toFixed(1)} ${a}`});function ik(e,t){this.text=e=e||"",this.hasWild=~e.indexOf("*"),this.separator=t,this.parts=e.split(t)}ik.prototype.match=function(e){var t,n,r=!0,s=this.parts,i=s.length;if("string"==typeof e||e instanceof String)if(this.hasWild||this.text==e){for(n=(e||"").split(this.separator),t=0;r&&t<i;t++)"*"!==s[t]&&(r=t<n.length&&s[t]===n[t]);r=r&&n}else r=!1;else if("function"==typeof e.splice)for(r=[],t=e.length;t--;)this.match(e[t])&&(r[r.length]=e[t]);else if("object"==typeof e)for(var a in r={},e)this.match(a)&&(r[a]=e[a]);return r};var ak=function(e,t,n){var r=new ik(e,n||/[\/\.]/);return void 0!==t?r.match(t):r},ok=/[\/\+\.]/;const lk=mn(function(e,t){function n(t){var n=ak(t,e,ok);return n&&n.length>=2}return t?n(t.split(";")[0]):n}),ck={maxFileSize:null,minFileSize:null,maxTotalFileSize:null,maxNumberOfFiles:null,minNumberOfFiles:null,allowedFileTypes:null,requiredMetaFields:[]};class dk extends Error{constructor(e,t){super(e),_t(this,"isUserFacing"),_t(this,"file"),_t(this,"isRestriction",!0),this.isUserFacing=t?.isUserFacing??!0,t?.file&&(this.file=t.file)}}class uk{constructor(e,t){_t(this,"getI18n"),_t(this,"getOpts"),this.getI18n=t,this.getOpts=()=>{const t=e();if(null!=t.restrictions?.allowedFileTypes&&!Array.isArray(t.restrictions.allowedFileTypes))throw new TypeError("`restrictions.allowedFileTypes` must be an array");return t}}validateAggregateRestrictions(e,t){const{maxTotalFileSize:n,maxNumberOfFiles:r}=this.getOpts().restrictions;if(r){if(e.filter(e=>!e.isGhost).length+t.length>r)throw new dk(`${this.getI18n()("youCanOnlyUploadX",{smart_count:r})}`)}if(n){const r=[...e,...t].reduce((e,t)=>e+(t.size??0),0);if(r>n)throw new dk(this.getI18n()("aggregateExceedsSize",{sizeAllowed:sk(n),size:sk(r)}))}}validateSingleFile(e){const{maxFileSize:t,minFileSize:n,allowedFileTypes:r}=this.getOpts().restrictions;if(r){if(!r.some(t=>t.includes("/")?!!e.type&&lk(e.type.replace(/;.*?$/,""),t):!("."!==t[0]||!e.extension)&&e.extension.toLowerCase()===t.slice(1).toLowerCase())){const t=r.join(", ");throw new dk(this.getI18n()("youCanOnlyUploadFileTypes",{types:t}),{file:e})}}if(t&&null!=e.size&&e.size>t)throw new dk(this.getI18n()("exceedsSize",{size:sk(t),file:e.name??this.getI18n()("unnamed")}),{file:e});if(n&&null!=e.size&&e.size<n)throw new dk(this.getI18n()("inferiorSize",{size:sk(n)}),{file:e})}validate(e,t){t.forEach(e=>{this.validateSingleFile(e)}),this.validateAggregateRestrictions(e,t)}validateMinNumberOfFiles(e){const{minNumberOfFiles:t}=this.getOpts().restrictions;if(t&&Object.keys(e).length<t)throw new dk(this.getI18n()("youHaveToAtLeastSelectX",{smart_count:t}))}getMissingRequiredMetaFields(e){const t=new dk(this.getI18n()("missingRequiredMetaFieldOnFile",{fileName:e.name??this.getI18n()("unnamed")})),{requiredMetaFields:n}=this.getOpts().restrictions,r=[];for(const s of n)Object.hasOwn(e.meta,s)&&""!==e.meta[s]||r.push(s);return{missingFields:r,error:t}}}b=new WeakMap;let hk=class extends ek{constructor(){super(...arguments),Ct(this,b),_t(this,"isTargetDOMEl"),_t(this,"el"),_t(this,"parent"),_t(this,"title")}getTargetPlugin(e){let t;if("function"==typeof e?.addTarget)t=e;else if("function"==typeof e){const n=e;this.uppy.iteratePlugins(e=>{e instanceof n&&(t=e)})}return t}mount(e,t){const n=t.id,r=function(e,t=document){return"string"==typeof e?t.querySelector(e):dC(e)?e:null}(e);if(r){this.isTargetDOMEl=!0;const t=document.createElement("div");return t.classList.add("uppy-Root"),Et(this,b,function(e){let t,n=null;return(...r)=>(t=r,n||(n=Promise.resolve().then(()=>(n=null,e(...t)))),n)}(e=>{this.uppy.getPlugin(this.id)&&(wE(this.render(e,t),t),this.afterUpdate())})),this.uppy.log(`Installing ${n} to a DOM element '${e}'`),this.opts.replaceTargetContent&&(r.innerHTML=""),wE(this.render(this.uppy.getState(),t),t),this.el=t,r.appendChild(t),t.dir=this.opts.direction||function(e){for(;e&&!e.dir;)e=e.parentNode;return e?.dir}(t)||"ltr",this.onMount(),this.el}const s=this.getTargetPlugin(e);if(s)return this.uppy.log(`Installing ${n} to ${s.id}`),this.parent=s,this.el=s.addTarget(t),this.onMount(),this.el;this.uppy.log(`Not installing ${n}`);let i=`Invalid target option given to ${n}.`;throw i+="function"==typeof e?" The given target is not a Plugin class. Please check that you're not specifying a React Component instead of a plugin. If you are using @uppy/* packages directly, make sure you have only 1 version of @uppy/core installed: run `npm ls @uppy/core` on the command line and verify that all the versions match and are deduped correctly.":"If you meant to target an HTML element, please make sure that the element exists. Check that the <script> tag initializing Uppy is right before the closing </body> tag at the end of the page. (see https://github.com/transloadit/uppy/issues/1042)\n\nIf you meant to target a plugin, please confirm that your `import` statements or `require` calls are correct.",new Error(i)}render(e,t){throw new Error("Extend the render method to add your plugin to a DOM element")}update(e){var t;null!=this.el&&(null==(t=Mt(this,b))||t.call(this,e))}unmount(){this.isTargetDOMEl&&this.el?.remove(),this.onUnmount()}onMount(){}onUnmount(){}};const pk="5.0.0";class mk{constructor(){Ct(this,j),_t(this,"state",{}),Ct(this,w,new Set)}getState(){return this.state}setState(e){const t={...this.state},n={...this.state,...e};this.state=n,kt(this,j,N).call(this,t,n,e)}subscribe(e){return Mt(this,w).add(e),()=>{Mt(this,w).delete(e)}}}w=new WeakMap,j=new WeakSet,N=function(...e){Mt(this,w).forEach(t=>{t(...e)})},_t(mk,"VERSION",pk);var fk=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};const gk=mn(fk);var xk="object"==typeof gn&&gn&&gn.Object===Object&&gn,vk=xk,yk="object"==typeof self&&self&&self.Object===Object&&self,bk=vk||yk||Function("return this")(),wk=bk,jk=function(){return wk.Date.now()},Nk=/\s/;var _k=function(e){for(var t=e.length;t--&&Nk.test(e.charAt(t)););return t},Sk=/^\s+/;var Mk=function(e){return e?e.slice(0,_k(e)+1).replace(Sk,""):e},Ck=bk.Symbol,Ek=Ck,kk=Object.prototype,Ak=kk.hasOwnProperty,Tk=kk.toString,Pk=Ek?Ek.toStringTag:void 0;var Ok=function(e){var t=Ak.call(e,Pk),n=e[Pk];try{e[Pk]=void 0;var r=!0}catch(i){}var s=Tk.call(e);return r&&(t?e[Pk]=n:delete e[Pk]),s},Rk=Object.prototype.toString;var Ik=Ok,Dk=function(e){return Rk.call(e)},Lk=Ck?Ck.toStringTag:void 0;var Fk=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Lk&&Lk in Object(e)?Ik(e):Dk(e)};var zk=function(e){return null!=e&&"object"==typeof e},Bk=Fk,Uk=zk;var Vk=function(e){return"symbol"==typeof e||Uk(e)&&"[object Symbol]"==Bk(e)},Hk=Mk,Wk=fk,$k=Vk,Gk=/^[-+]0x[0-9a-f]+$/i,qk=/^0b[01]+$/i,Xk=/^0o[0-7]+$/i,Kk=parseInt;var Yk=function(e){if("number"==typeof e)return e;if($k(e))return NaN;if(Wk(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Wk(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Hk(e);var n=qk.test(e);return n||Xk.test(e)?Kk(e.slice(2),n?2:8):Gk.test(e)?NaN:+e},Zk=fk,Jk=jk,Qk=Yk,eA=Math.max,tA=Math.min;var nA=function(e,t,n){var r,s,i,a,o,l,c=0,d=!1,u=!1,h=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function p(t){var n=r,i=s;return r=s=void 0,c=t,a=e.apply(i,n)}function m(e){var n=e-l;return void 0===l||n>=t||n<0||u&&e-c>=i}function f(){var e=Jk();if(m(e))return g(e);o=setTimeout(f,function(e){var n=t-(e-l);return u?tA(n,i-(e-c)):n}(e))}function g(e){return o=void 0,h&&r?p(e):(r=s=void 0,a)}function x(){var e=Jk(),n=m(e);if(r=arguments,s=this,l=e,n){if(void 0===o)return function(e){return c=e,o=setTimeout(f,t),d?p(e):a}(l);if(u)return clearTimeout(o),o=setTimeout(f,t),p(l)}return void 0===o&&(o=setTimeout(f,t)),a}return t=Qk(t)||0,Zk(n)&&(d=!!n.leading,i=(u="maxWait"in n)?eA(Qk(n.maxWait)||0,t):i,h="trailing"in n?!!n.trailing:h),x.cancel=function(){void 0!==o&&clearTimeout(o),c=0,r=l=s=o=void 0},x.flush=function(){return void 0===o?a:g(Jk())},x};const rA=mn(nA);var sA=nA,iA=fk;const aA=mn(function(e,t,n){var r=!0,s=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return iA(n)&&(r="leading"in n?!!n.leading:r,s="trailing"in n?!!n.trailing:s),sA(e,t,{leading:r,maxWait:t,trailing:s})});var oA=function(){var e={},t=e._fns={};return e.emit=function(e,n,r,s,i,a,o){var l=function(e){var n=t[e]?t[e]:[],r=e.indexOf(":"),s=-1===r?[e]:[e.substring(0,r),e.substring(r+1)],i=Object.keys(t),a=0,o=i.length;for(;a<o;a++){var l=i[a];if("*"===l&&(n=n.concat(t[l])),2===s.length&&s[0]===l){n=n.concat(t[l]);break}}return n}(e);l.length&&function(e,t,n){var r=0,s=t.length;for(;r<s&&t[r];r++)t[r].event=e,t[r].apply(t[r],n)}(e,l,[n,r,s,i,a,o])},e.on=function(e,n){t[e]||(t[e]=[]),t[e].push(n)},e.once=function(t,n){this.on(t,function r(){n.apply(this,arguments),e.off(t,r)})},e.off=function(e,t){var n=[];if(e&&t)for(var r=this._fns[e],s=0,i=r?r.length:0;s<i;s++)r[s]!==t&&n.push(r[s]);n.length?this._fns[e]=n:delete this._fns[e]},e};const lA=mn(oA);let cA=(e=21)=>{let t="",n=0|e;for(;n--;)t+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[64*Math.random()|0];return t};const dA="5.0.2";const uA={strings:{addBulkFilesFailed:{0:"Failed to add %{smart_count} file due to an internal error",1:"Failed to add %{smart_count} files due to internal errors"},youCanOnlyUploadX:{0:"You can only upload %{smart_count} file",1:"You can only upload %{smart_count} files"},youHaveToAtLeastSelectX:{0:"You have to select at least %{smart_count} file",1:"You have to select at least %{smart_count} files"},aggregateExceedsSize:"You selected %{size} of files, but maximum allowed size is %{sizeAllowed}",exceedsSize:"%{file} exceeds maximum allowed size of %{size}",missingRequiredMetaField:"Missing required meta fields",missingRequiredMetaFieldOnFile:"Missing required meta fields in %{fileName}",inferiorSize:"This file is smaller than the allowed size of %{size}",youCanOnlyUploadFileTypes:"You can only upload: %{types}",noMoreFilesAllowed:"Cannot add more files",noDuplicates:"Cannot add the duplicate file '%{fileName}', it already exists",companionError:"Connection with Companion failed",authAborted:"Authentication aborted",companionUnauthorizeHint:"To unauthorize to your %{provider} account, please go to %{url}",failedToUpload:"Failed to upload %{file}",noInternetConnection:"No Internet connection",connectedToInternet:"Connected to the Internet",noFilesFound:"You have no files or folders here",noSearchResults:"Unfortunately, there are no results for this search",selectX:{0:"Select %{smart_count}",1:"Select %{smart_count}"},allFilesFromFolderNamed:"All files from folder %{name}",openFolderNamed:"Open folder %{name}",cancel:"Cancel",logOut:"Log out",logIn:"Log in",pickFiles:"Pick files",pickPhotos:"Pick photos",filter:"Filter",resetFilter:"Reset filter",loading:"Loading...",loadedXFiles:"Loaded %{numFiles} files",authenticateWithTitle:"Please authenticate with %{pluginName} to select files",authenticateWith:"Connect to %{pluginName}",signInWithGoogle:"Sign in with Google",searchImages:"Search for images",enterTextToSearch:"Enter text to search for images",search:"Search",resetSearch:"Reset search",emptyFolderAdded:"No files were added from empty folder",addedNumFiles:"Added %{numFiles} file(s)",folderAlreadyAdded:'The folder "%{folder}" was already added',folderAdded:{0:"Added %{smart_count} file from %{folder}",1:"Added %{smart_count} files from %{folder}"},additionalRestrictionsFailed:"%{count} additional restrictions were not fulfilled",unnamed:"Unnamed",pleaseWait:"Please wait"}};function hA(e){if(null==e&&"undefined"!=typeof navigator&&(e=navigator.userAgent),!e)return!0;const t=/Edge\/(\d+\.\d+)/.exec(e);if(!t)return!0;const n=t[1].split(".",2),r=parseInt(n[0],10),s=parseInt(n[1],10);return r<15||15===r&&s<15063||(r>18||18===r&&s>=18218)}const pA={totalProgress:0,allowNewUpload:!0,error:null,recoveredState:null},mA=class e{constructor(t){Ct(this,T),Ct(this,_,Object.create(null)),Ct(this,S),Ct(this,M),Ct(this,C,lA()),Ct(this,E,new Set),Ct(this,k,new Set),Ct(this,A,new Set),_t(this,"defaultLocale"),_t(this,"locale"),_t(this,"opts"),_t(this,"store"),_t(this,"i18n"),_t(this,"i18nArray"),_t(this,"scheduledAutoProceed",null),_t(this,"wasOffline",!1),Ct(this,U,(e,t)=>{const n=e?this.getFile(e.id):void 0;if(null==e||!n)return void this.log(`Not setting progress for a file that has been removed: ${e?.id}`);if(100===n.progress.percentage)return void this.log(`Not setting progress for a file that has been already uploaded: ${e.id}`);const r={bytesTotal:t.bytesTotal,percentage:null!=t.bytesTotal&&Number.isFinite(t.bytesTotal)&&t.bytesTotal>0?Math.round(t.bytesUploaded/t.bytesTotal*100):void 0};null!=n.progress.uploadStarted?this.setFileState(e.id,{progress:{...n.progress,...r,bytesUploaded:t.bytesUploaded}}):this.setFileState(e.id,{progress:{...n.progress,...r}}),Mt(this,H).call(this)}),Ct(this,H,aA(()=>kt(this,T,V).call(this),500,{leading:!0,trailing:!0})),Ct(this,G,this.updateOnlineStatus.bind(this)),Ct(this,q,new Map),this.defaultLocale=uA;const n={id:"uppy",autoProceed:!1,allowMultipleUploadBatches:!0,debug:!1,restrictions:ck,meta:{},onBeforeFileAdded:(e,t)=>!Object.hasOwn(t,e.id),onBeforeUpload:e=>e,store:new mk,logger:nk,infoTimeout:5e3},r={...n,...t};this.opts={...r,restrictions:{...n.restrictions,...t?.restrictions}},t?.logger&&t.debug?this.log("You are using a custom `logger`, but also set `debug: true`, which uses built-in logger to output logs to console. Ignoring `debug: true` and using your custom `logger`.","warning"):t?.debug&&(this.opts.logger=rk),this.log(`Using Core v${e.VERSION}`),this.i18nInit(),this.store=this.opts.store,this.setState({...pA,plugins:{},files:{},currentUploads:{},capabilities:{uploadProgress:hA(),individualCancellation:!0,resumableUploads:!1},meta:{...this.opts.meta},info:[]}),Et(this,S,new uk(()=>this.opts,()=>this.i18n)),Et(this,M,this.store.subscribe((e,t,n)=>{this.emit("state-update",e,t,n),this.updateAll(t)})),this.opts.debug&&"undefined"!=typeof window&&(window[this.opts.id]=this),kt(this,T,$).call(this)}emit(e,...t){Mt(this,C).emit(e,...t)}on(e,t){return Mt(this,C).on(e,t),this}once(e,t){return Mt(this,C).once(e,t),this}off(e,t){return Mt(this,C).off(e,t),this}updateAll(e){this.iteratePlugins(t=>{t.update(e)})}setState(e){this.store.setState(e)}getState(){return this.store.getState()}patchFilesState(e){const t=this.getState().files;this.setState({files:{...t,...Object.fromEntries(Object.entries(e).map(([e,n])=>[e,{...t[e],...n}]))}})}setFileState(e,t){if(!this.getState().files[e])throw new Error(`Cant set state for ${e} (the file could have been removed)`);this.patchFilesState({[e]:t})}i18nInit(){const e=new PC([this.defaultLocale,this.opts.locale],{onMissingKey:e=>this.log(`Missing i18n string: ${e}`,"error")});this.i18n=e.translate.bind(e),this.i18nArray=e.translateArray.bind(e),this.locale=e.locale}setOptions(e){this.opts={...this.opts,...e,restrictions:{...this.opts.restrictions,...e?.restrictions}},e.meta&&this.setMeta(e.meta),this.i18nInit(),e.locale&&this.iteratePlugins(t=>{t.setOptions(e)}),this.setState(void 0)}resetProgress(){const e={percentage:0,bytesUploaded:!1,uploadComplete:!1,uploadStarted:null},t={...this.getState().files},n=Object.create(null);Object.keys(t).forEach(r=>{n[r]={...t[r],progress:{...t[r].progress,...e},tus:void 0,transloadit:void 0}}),this.setState({files:n,...pA})}clear(){const{capabilities:e,currentUploads:t}=this.getState();if(Object.keys(t).length>0&&!e.individualCancellation)throw new Error("The installed uploader plugin does not allow removing files during an upload.");this.setState({...pA,files:{}})}addPreProcessor(e){Mt(this,E).add(e)}removePreProcessor(e){return Mt(this,E).delete(e)}addPostProcessor(e){Mt(this,A).add(e)}removePostProcessor(e){return Mt(this,A).delete(e)}addUploader(e){Mt(this,k).add(e)}removeUploader(e){return Mt(this,k).delete(e)}setMeta(e){const t={...this.getState().meta,...e},n={...this.getState().files};Object.keys(n).forEach(t=>{n[t]={...n[t],meta:{...n[t].meta,...e}}}),this.log("Adding metadata:"),this.log(e),this.setState({meta:t,files:n})}setFileMeta(e,t){const n={...this.getState().files};if(!n[e])return void this.log(`Was trying to set metadata for a file that has been removed: ${e}`);const r={...n[e].meta,...t};n[e]={...n[e],meta:r},this.setState({files:n})}getFile(e){return this.getState().files[e]}getFiles(){const{files:e}=this.getState();return Object.values(e)}getFilesByIds(e){return e.map(e=>this.getFile(e))}getObjectOfFilesPerState(){const{files:e,totalProgress:t,error:n}=this.getState(),r=Object.values(e),s=[],i=[],a=[],o=[],l=[],c=[],d=[],u=[],h=[];for(const p of r){const{progress:e}=p;!e.uploadComplete&&e.uploadStarted&&(s.push(p),p.isPaused||u.push(p)),e.uploadStarted||i.push(p),(e.uploadStarted||e.preprocess||e.postprocess)&&a.push(p),e.uploadStarted&&o.push(p),p.isPaused&&l.push(p),e.uploadComplete&&c.push(p),p.error&&d.push(p),(e.preprocess||e.postprocess)&&h.push(p)}return{newFiles:i,startedFiles:a,uploadStartedFiles:o,pausedFiles:l,completeFiles:c,erroredFiles:d,inProgressFiles:s,inProgressNotPausedFiles:u,processingFiles:h,isUploadStarted:o.length>0,isAllComplete:100===t&&c.length===r.length&&0===h.length,isAllErrored:!!n&&d.length===r.length,isAllPaused:0!==s.length&&l.length===s.length,isUploadInProgress:s.length>0,isSomeGhost:r.some(e=>e.isGhost)}}validateRestrictions(e,t=this.getFiles()){try{Mt(this,S).validate(t,[e])}catch(PUe){return PUe}return null}validateSingleFile(e){try{Mt(this,S).validateSingleFile(e)}catch(PUe){return PUe.message}return null}validateAggregateRestrictions(e){const t=this.getFiles();try{Mt(this,S).validateAggregateRestrictions(t,e)}catch(PUe){return PUe.message}return null}checkIfFileAlreadyExists(e){const{files:t}=this.getState();return!(!t[e]||t[e].isGhost)}addFile(e){kt(this,T,I).call(this,e);const{nextFilesState:t,validFilesToAdd:n,errors:r}=kt(this,T,F).call(this,[e]),s=r.filter(e=>e.isRestriction);if(kt(this,T,P).call(this,s),r.length>0)throw r[0];this.setState({files:t});const[i]=n;return this.emit("file-added",i),this.emit("files-added",n),this.log(`Added file: ${i.name}, ${i.id}, mime type: ${i.type}`),kt(this,T,L).call(this),i.id}addFiles(e){kt(this,T,I).call(this);const{nextFilesState:t,validFilesToAdd:n,errors:r}=kt(this,T,F).call(this,e),s=r.filter(e=>e.isRestriction);kt(this,T,P).call(this,s);const i=r.filter(e=>!e.isRestriction);if(i.length>0){let e="Multiple errors occurred while adding files:\n";if(i.forEach(t=>{e+=`\n * ${t.message}`}),this.info({message:this.i18n("addBulkFilesFailed",{smart_count:i.length}),details:e},"error",this.opts.infoTimeout),"function"==typeof AggregateError)throw new AggregateError(i,e);{const t=new Error(e);throw t.errors=i,t}}this.setState({files:t}),n.forEach(e=>{this.emit("file-added",e)}),this.emit("files-added",n),n.length>5?this.log(`Added batch of ${n.length} files`):Object.values(n).forEach(e=>{this.log(`Added file: ${e.name}\n id: ${e.id}\n type: ${e.type}`)}),n.length>0&&kt(this,T,L).call(this)}removeFiles(e){const{files:t,currentUploads:n}=this.getState(),r={...t},s={...n},i=Object.create(null);function a(e){return void 0===i[e]}e.forEach(e=>{t[e]&&(i[e]=t[e],delete r[e])}),Object.keys(s).forEach(e=>{const t=n[e].fileIDs.filter(a);if(0===t.length)return void delete s[e];const{capabilities:r}=this.getState();if(t.length!==n[e].fileIDs.length&&!r.individualCancellation)throw new Error("The installed uploader plugin does not allow removing files during an upload.");s[e]={...n[e],fileIDs:t}});const o={currentUploads:s,files:r};0===Object.keys(r).length&&(o.allowNewUpload=!0,o.error=null,o.recoveredState=null),this.setState(o),Mt(this,H).call(this);const l=Object.keys(i);l.forEach(e=>{this.emit("file-removed",i[e])}),l.length>5?this.log(`Removed ${l.length} files`):this.log(`Removed files: ${l.join(", ")}`)}removeFile(e){this.removeFiles([e])}pauseResume(e){if(!this.getState().capabilities.resumableUploads||this.getFile(e).progress.uploadComplete)return;const t=this.getFile(e),n=!(t.isPaused||!1);return this.setFileState(e,{isPaused:n}),this.emit("upload-pause",t,n),n}pauseAll(){const e={...this.getState().files};Object.keys(e).filter(t=>!e[t].progress.uploadComplete&&e[t].progress.uploadStarted).forEach(t=>{const n={...e[t],isPaused:!0};e[t]=n}),this.setState({files:e}),this.emit("pause-all")}resumeAll(){const e={...this.getState().files};Object.keys(e).filter(t=>!e[t].progress.uploadComplete&&e[t].progress.uploadStarted).forEach(t=>{const n={...e[t],isPaused:!1,error:null};e[t]=n}),this.setState({files:e}),this.emit("resume-all")}async retryAll(){const e=await kt(this,T,B).call(this);return this.emit("complete",e),e}cancelAll(){this.emit("cancel-all");const{files:e}=this.getState(),t=Object.keys(e);t.length&&this.removeFiles(t),this.setState(pA)}retryUpload(e){this.setFileState(e,{error:null,isPaused:!1}),this.emit("upload-retry",this.getFile(e));const t=kt(this,T,X).call(this,[e],{forceAllowNewUpload:!0});return kt(this,T,Z).call(this,t)}logout(){this.iteratePlugins(e=>{e.provider?.logout?.()})}[Symbol.for("uppy test: updateTotalProgress")](){return kt(this,T,V).call(this)}updateOnlineStatus(){window.navigator.onLine??!0?(this.emit("is-online"),this.wasOffline&&(this.emit("back-online"),this.info(this.i18n("connectedToInternet"),"success",3e3),this.wasOffline=!1)):(this.emit("is-offline"),this.info(this.i18n("noInternetConnection"),"error",0),this.wasOffline=!0)}getID(){return this.opts.id}use(e,...t){if("function"!=typeof e){throw new TypeError(`Expected a plugin class, but got ${null===e?"null":typeof e}. Please verify that the plugin was imported and spelled correctly.`)}const n=new e(this,...t),r=n.id;if(!r)throw new Error("Your plugin must have an id");if(!n.type)throw new Error("Your plugin must have a type");const s=this.getPlugin(r);if(s){const e=`Already found a plugin named '${s.id}'. Tried to use: '${r}'.\nUppy plugins must have unique \`id\` options.`;throw new Error(e)}return e.VERSION&&this.log(`Using ${r} v${e.VERSION}`),n.type in Mt(this,_)?Mt(this,_)[n.type].push(n):Mt(this,_)[n.type]=[n],n.install(),this.emit("plugin-added",n),this}getPlugin(e){for(const t of Object.values(Mt(this,_))){const n=t.find(t=>t.id===e);if(null!=n)return n}}[Symbol.for("uppy test: getPlugins")](e){return Mt(this,_)[e]}iteratePlugins(e){Object.values(Mt(this,_)).flat(1).forEach(e)}removePlugin(e){this.log(`Removing plugin ${e.id}`),this.emit("plugin-remove",e),e.uninstall&&e.uninstall();const t=Mt(this,_)[e.type],n=t.findIndex(t=>t.id===e.id);-1!==n&&t.splice(n,1);const r={plugins:{...this.getState().plugins,[e.id]:void 0}};this.setState(r)}destroy(){this.log(`Closing Uppy instance ${this.opts.id}: removing all files and uninstalling plugins`),this.cancelAll(),Mt(this,M).call(this),this.iteratePlugins(e=>{this.removePlugin(e)}),"undefined"!=typeof window&&window.removeEventListener&&(window.removeEventListener("online",Mt(this,G)),window.removeEventListener("offline",Mt(this,G)))}hideInfo(){const{info:e}=this.getState();this.setState({info:e.slice(1)}),this.emit("info-hidden")}info(e,t="info",n=3e3){const r="object"==typeof e;this.setState({info:[...this.getState().info,{type:t,message:r?e.message:e,details:r?e.details:null}]}),setTimeout(()=>this.hideInfo(),n),this.emit("info-visible")}log(e,t){const{logger:n}=this.opts;switch(t){case"error":n.error(e);break;case"warning":n.warn(e);break;default:n.debug(e)}}registerRequestClient(e,t){Mt(this,q).set(e,t)}getRequestClientForFile(e){if(!e.remote)throw new Error(`Tried to get RequestClient for a non-remote file ${e.id}`);const t=Mt(this,q).get(e.remote.requestClientId);if(null==t)throw new Error(`requestClientId "${e.remote.requestClientId}" not registered for file "${e.id}"`);return t}async restore(e){if(this.log(`Core: attempting to restore upload "${e}"`),!this.getState().currentUploads[e])throw kt(this,T,Y).call(this,e),new Error("Nonexistent upload");const t=await kt(this,T,Z).call(this,e);return this.emit("complete",t),t}[Symbol.for("uppy test: createUpload")](...e){return kt(this,T,X).call(this,...e)}addResultData(e,t){if(!kt(this,T,K).call(this,e))return void this.log(`Not setting result for an upload that has been removed: ${e}`);const{currentUploads:n}=this.getState(),r={...n[e],result:{...n[e].result,...t}};this.setState({currentUploads:{...n,[e]:r}})}async upload(){Mt(this,_).uploader?.length||this.log("No uploader type plugins are used","warning");let{files:e}=this.getState();if(kt(this,T,z).call(this).length>0){const t=await kt(this,T,B).call(this);if(!(this.getFiles().filter(e=>null==e.progress.uploadStarted).length>0))return this.emit("complete",t),t;({files:e}=this.getState())}const t=this.opts.onBeforeUpload(e);return!1===t?Promise.reject(new Error("Not starting the upload because onBeforeUpload returned false")):(t&&"object"==typeof t&&(e=t,this.setState({files:e})),Promise.resolve().then(()=>Mt(this,S).validateMinNumberOfFiles(e)).catch(e=>{throw kt(this,T,P).call(this,[e]),e}).then(()=>{if(!kt(this,T,R).call(this,e))throw new dk(this.i18n("missingRequiredMetaField"))}).catch(e=>{throw e}).then(async()=>{const{currentUploads:t}=this.getState(),n=Object.values(t).flatMap(e=>e.fileIDs),r=[];Object.keys(e).forEach(e=>{const t=this.getFile(e);t.progress.uploadStarted||-1!==n.indexOf(e)||r.push(t.id)});const s=kt(this,T,X).call(this,r),i=await kt(this,T,Z).call(this,s);return this.emit("complete",i),i}).catch(e=>{throw this.emit("error",e),this.log(e,"error"),e}))}};_=new WeakMap,S=new WeakMap,M=new WeakMap,C=new WeakMap,E=new WeakMap,k=new WeakMap,A=new WeakMap,T=new WeakSet,P=function(e){for(const s of e)s.isRestriction?this.emit("restriction-failed",s.file,s):this.emit("error",s,s.file),this.log(s,"warning");const t=e.filter(e=>e.isUserFacing),n=t.slice(0,4),r=t.slice(4);n.forEach(({message:e,details:t=""})=>{this.info({message:e,details:t},"error",this.opts.infoTimeout)}),r.length>0&&this.info({message:this.i18n("additionalRestrictionsFailed",{count:r.length})})},O=function(e){const{missingFields:t,error:n}=Mt(this,S).getMissingRequiredMetaFields(e);return t.length>0?(this.setFileState(e.id,{missingRequiredMetaFields:t,error:n.message}),this.log(n.message),this.emit("restriction-failed",e,n),!1):(0===t.length&&e.missingRequiredMetaFields&&this.setFileState(e.id,{missingRequiredMetaFields:[]}),!0)},R=function(e){let t=!0;for(const n of Object.values(e))kt(this,T,O).call(this,n)||(t=!1);return t},I=function(e){const{allowNewUpload:t}=this.getState();if(!1===t){const t=new dk(this.i18n("noMoreFilesAllowed"),{file:e});throw kt(this,T,P).call(this,[t]),t}},D=function(e){const t=e instanceof File?{name:e.name,type:e.type,size:e.size,data:e}:e,n=mC(t),r=function(e,t){return t.name?t.name:"image"===e.split("/")[0]?`${e.split("/")[0]}.${e.split("/")[1]}`:"noname"}(n,t),s=hC(r).extension,i=gC(t,this.getID()),a=t.meta||{};a.name=r,a.type=n;const o=Number.isFinite(t.data.size)?t.data.size:null;return{source:t.source||"",id:i,name:r,extension:s||"",meta:{...this.getState().meta,...a},type:n,data:t.data,progress:{percentage:0,bytesUploaded:!1,bytesTotal:o,uploadComplete:!1,uploadStarted:null},size:o,isGhost:!1,isRemote:t.isRemote||!1,remote:t.remote,preview:t.preview}},L=function(){this.opts.autoProceed&&!this.scheduledAutoProceed&&(this.scheduledAutoProceed=setTimeout(()=>{this.scheduledAutoProceed=null,this.upload().catch(e=>{e.isRestriction||this.log(e.stack||e.message||e)})},4))},F=function(e){let{files:t}=this.getState(),n={...t};const r=[],s=[];for(const i of e)try{let e=kt(this,T,D).call(this,i);const s=t[e.id]?.isGhost;if(s){e={...t[e.id],isGhost:!1,data:i.data},this.log(`Replaced the blob in the restored ghost file: ${e.name}, ${e.id}`)}const a=this.opts.onBeforeFileAdded(e,n);if(t=this.getState().files,n={...t,...n},!a&&this.checkIfFileAlreadyExists(e.id))throw new dk(this.i18n("noDuplicates",{fileName:e.name??this.i18n("unnamed")}),{file:i});if(!1===a&&!s)throw new dk("Cannot add the file because onBeforeFileAdded returned false.",{isUserFacing:!1,file:i});"object"==typeof a&&null!==a&&(e=a),Mt(this,S).validateSingleFile(e),n[e.id]=e,r.push(e)}catch(PUe){s.push(PUe)}try{Mt(this,S).validateAggregateRestrictions(Object.values(t),r)}catch(PUe){return s.push(PUe),{nextFilesState:t,validFilesToAdd:[],errors:s}}return{nextFilesState:n,validFilesToAdd:r,errors:s}},z=function(){const{files:e}=this.getState();return Object.keys(e).filter(t=>{const n=e[t];return n.error&&(!n.missingRequiredMetaFields||0===n.missingRequiredMetaFields.length)})},B=async function(){const e=kt(this,T,z).call(this),t={...this.getState().files};if(e.forEach(e=>{t[e]={...t[e],isPaused:!1,error:null}}),this.setState({files:t,error:null}),this.emit("retry-all",this.getFilesByIds(e)),0===e.length)return{successful:[],failed:[]};const n=kt(this,T,X).call(this,e,{forceAllowNewUpload:!0});return kt(this,T,Z).call(this,n)},U=new WeakMap,V=function(){const e=kt(this,T,W).call(this);let t=null;null!=e&&(t=Math.round(100*e),t>100?t=100:t<0&&(t=0)),this.emit("progress",t??0),this.setState({totalProgress:t??0})},H=new WeakMap,W=function(){const e=this.getFiles().filter(e=>e.progress.uploadStarted||e.progress.preprocess||e.progress.postprocess);if(0===e.length)return 0;if(e.every(e=>e.progress.uploadComplete))return 1;const t=e=>null!=e.progress.bytesTotal&&0!==e.progress.bytesTotal,n=e.filter(t),r=e.filter(e=>!t(e));if(n.every(e=>e.progress.uploadComplete)&&r.length>0&&!r.every(e=>e.progress.uploadComplete))return null;const s=n.reduce((e,t)=>e+(t.progress.bytesTotal??0),0),i=n.reduce((e,t)=>e+(t.progress.bytesUploaded||0),0);return 0===s?0:i/s},$=function(){const e=(e,t,n)=>{let r=e.message||"Unknown error";e.details&&(r+=` ${e.details}`),this.setState({error:r}),null!=t&&t.id in this.getState().files&&this.setFileState(t.id,{error:r,response:n})};this.on("error",e),this.on("upload-error",(t,n,r)=>{if(e(n,t,r),"object"==typeof n&&n.message){this.log(n.message,"error");const e=new Error(this.i18n("failedToUpload",{file:t?.name??""}));e.isUserFacing=!0,e.details=n.message,n.details&&(e.details+=` ${n.details}`),kt(this,T,P).call(this,[e])}else kt(this,T,P).call(this,[n])});let t=null;this.on("upload-stalled",(e,n)=>{const{message:r}=e,s=n.map(e=>e.meta.name).join(", ");t||(this.info({message:r,details:s},"warning",this.opts.infoTimeout),t=setTimeout(()=>{t=null},this.opts.infoTimeout)),this.log(`${r} ${s}`.trim(),"warning")}),this.on("upload",()=>{this.setState({error:null})});this.on("upload-start",e=>{const t=e.filter(e=>{const t=null!=e&&this.getFile(e.id);return t||this.log(`Not setting progress for a file that has been removed: ${e?.id}`),t}),n=Object.fromEntries(t.map(e=>[e.id,{progress:{uploadStarted:Date.now(),uploadComplete:!1,bytesUploaded:0,bytesTotal:e.size}}]));this.patchFilesState(n)}),this.on("upload-progress",Mt(this,U)),this.on("upload-success",(e,t)=>{if(null==e||!this.getFile(e.id))return void this.log(`Not setting progress for a file that has been removed: ${e?.id}`);const n=this.getFile(e.id).progress;this.setFileState(e.id,{progress:{...n,postprocess:Mt(this,A).size>0?{mode:"indeterminate"}:void 0,uploadComplete:!0,percentage:100,bytesUploaded:n.bytesTotal},response:t,uploadURL:t.uploadURL,isPaused:!1}),null==e.size&&this.setFileState(e.id,{size:t.bytesUploaded||n.bytesTotal}),Mt(this,H).call(this)}),this.on("preprocess-progress",(e,t)=>{null!=e&&this.getFile(e.id)?this.setFileState(e.id,{progress:{...this.getFile(e.id).progress,preprocess:t}}):this.log(`Not setting progress for a file that has been removed: ${e?.id}`)}),this.on("preprocess-complete",e=>{if(null==e||!this.getFile(e.id))return void this.log(`Not setting progress for a file that has been removed: ${e?.id}`);const t={...this.getState().files};t[e.id]={...t[e.id],progress:{...t[e.id].progress}},delete t[e.id].progress.preprocess,this.setState({files:t})}),this.on("postprocess-progress",(e,t)=>{null!=e&&this.getFile(e.id)?this.setFileState(e.id,{progress:{...this.getState().files[e.id].progress,postprocess:t}}):this.log(`Not setting progress for a file that has been removed: ${e?.id}`)}),this.on("postprocess-complete",e=>{if(null==e||!this.getFile(e.id))return void this.log(`Not setting progress for a file that has been removed: ${e?.id}`);const t={...this.getState().files};t[e.id]={...t[e.id],progress:{...t[e.id].progress}},delete t[e.id].progress.postprocess,this.setState({files:t})}),this.on("restored",()=>{Mt(this,H).call(this)}),this.on("dashboard:file-edit-complete",e=>{e&&kt(this,T,O).call(this,e)}),"undefined"!=typeof window&&window.addEventListener&&(window.addEventListener("online",Mt(this,G)),window.addEventListener("offline",Mt(this,G)),setTimeout(Mt(this,G),3e3))},G=new WeakMap,q=new WeakMap,X=function(e,t={}){const{forceAllowNewUpload:n=!1}=t,{allowNewUpload:r,currentUploads:s}=this.getState();if(!r&&!n)throw new Error("Cannot create a new upload: already uploading.");const i=cA();return this.emit("upload",i,this.getFilesByIds(e)),this.setState({allowNewUpload:!1!==this.opts.allowMultipleUploadBatches&&!1!==this.opts.allowMultipleUploads,currentUploads:{...s,[i]:{fileIDs:e,step:0,result:{}}}}),i},K=function(e){const{currentUploads:t}=this.getState();return t[e]},Y=function(e){const t={...this.getState().currentUploads};delete t[e],this.setState({currentUploads:t})},Z=async function(e){const t=()=>{const{currentUploads:t}=this.getState();return t[e]};let n=t();const r=[...Mt(this,E),...Mt(this,k),...Mt(this,A)];try{for(let s=n.step||0;s<r.length&&n;s++){const i=r[s];this.setState({currentUploads:{...this.getState().currentUploads,[e]:{...n,step:s}}});const{fileIDs:a}=n;await i(a,e),n=t()}}catch(PUe){throw kt(this,T,Y).call(this,e),PUe}if(n){n.fileIDs.forEach(e=>{const t=this.getFile(e);t?.progress.postprocess&&this.emit("postprocess-complete",t)});const r=n.fileIDs.map(e=>this.getFile(e)),s=r.filter(e=>!e.error),i=r.filter(e=>e.error);this.addResultData(e,{successful:s,failed:i,uploadID:e}),n=t()}let s;return n&&(s=n.result,kt(this,T,Y).call(this,e)),null==s&&(this.log(`Not setting result for an upload that has been removed: ${e}`),s={successful:[],failed:[],uploadID:e}),s},_t(mA,"VERSION",dA);let fA=mA;var gA,xA={exports:{}};
/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/gA=xA,function(){var e={}.hasOwnProperty;function t(){for(var e="",t=0;t<arguments.length;t++){var s=arguments[t];s&&(e=r(e,n(s)))}return e}function n(n){if("string"==typeof n||"number"==typeof n)return n;if("object"!=typeof n)return"";if(Array.isArray(n))return t.apply(null,n);if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]"))return n.toString();var s="";for(var i in n)e.call(n,i)&&n[i]&&(s=r(s,i));return s}function r(e,t){return t?e?e+" "+t:e+t:e}gA.exports?(t.default=t,gA.exports=t):window.classNames=t}();const vA=mn(xA.exports);function yA(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var bA="undefined"!=typeof self?self:global;const wA="undefined"!=typeof navigator,jA=wA&&"undefined"==typeof HTMLImageElement,NA=!("undefined"==typeof global||"undefined"==typeof process||!process.versions||!process.versions.node),_A=bA.Buffer,SA=!!_A,MA=e=>void 0!==e;function CA(e){return void 0===e||(e instanceof Map?0===e.size:0===Object.values(e).filter(MA).length)}function EA(e){let t=new Error(e);throw delete t.stack,t}function kA(e){let t=function(e){let t=0;return e.ifd0.enabled&&(t+=1024),e.exif.enabled&&(t+=2048),e.makerNote&&(t+=2048),e.userComment&&(t+=1024),e.gps.enabled&&(t+=512),e.interop.enabled&&(t+=100),e.ifd1.enabled&&(t+=1024),t+2048}(e);return e.jfif.enabled&&(t+=50),e.xmp.enabled&&(t+=2e4),e.iptc.enabled&&(t+=14e3),e.icc.enabled&&(t+=6e3),t}const AA=e=>String.fromCharCode.apply(null,e),TA="undefined"!=typeof TextDecoder?new TextDecoder("utf-8"):void 0;let PA=class e{static from(t,n){return t instanceof this&&t.le===n?t:new e(t,void 0,void 0,n)}constructor(t,n=0,r,s){if("boolean"==typeof s&&(this.le=s),Array.isArray(t)&&(t=new Uint8Array(t)),0===t)this.byteOffset=0,this.byteLength=0;else if(t instanceof ArrayBuffer){void 0===r&&(r=t.byteLength-n);let e=new DataView(t,n,r);this._swapDataView(e)}else if(t instanceof Uint8Array||t instanceof DataView||t instanceof e){void 0===r&&(r=t.byteLength-n),(n+=t.byteOffset)+r>t.byteOffset+t.byteLength&&EA("Creating view outside of available memory in ArrayBuffer");let e=new DataView(t.buffer,n,r);this._swapDataView(e)}else if("number"==typeof t){let e=new DataView(new ArrayBuffer(t));this._swapDataView(e)}else EA("Invalid input argument for BufferView: "+t)}_swapArrayBuffer(e){this._swapDataView(new DataView(e))}_swapBuffer(e){this._swapDataView(new DataView(e.buffer,e.byteOffset,e.byteLength))}_swapDataView(e){this.dataView=e,this.buffer=e.buffer,this.byteOffset=e.byteOffset,this.byteLength=e.byteLength}_lengthToEnd(e){return this.byteLength-e}set(t,n,r=e){return t instanceof DataView||t instanceof e?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t instanceof ArrayBuffer&&(t=new Uint8Array(t)),t instanceof Uint8Array||EA("BufferView.set(): Invalid data argument."),this.toUint8().set(t,n),new r(this,n,t.byteLength)}subarray(t,n){return n=n||this._lengthToEnd(t),new e(this,t,n)}toUint8(){return new Uint8Array(this.buffer,this.byteOffset,this.byteLength)}getUint8Array(e,t){return new Uint8Array(this.buffer,this.byteOffset+e,t)}getString(e=0,t=this.byteLength){return n=this.getUint8Array(e,t),TA?TA.decode(n):SA?Buffer.from(n).toString("utf8"):decodeURIComponent(escape(AA(n)));var n}getLatin1String(e=0,t=this.byteLength){let n=this.getUint8Array(e,t);return AA(n)}getUnicodeString(e=0,t=this.byteLength){const n=[];for(let r=0;r<t&&e+r<this.byteLength;r+=2)n.push(this.getUint16(e+r));return AA(n)}getInt8(e){return this.dataView.getInt8(e)}getUint8(e){return this.dataView.getUint8(e)}getInt16(e,t=this.le){return this.dataView.getInt16(e,t)}getInt32(e,t=this.le){return this.dataView.getInt32(e,t)}getUint16(e,t=this.le){return this.dataView.getUint16(e,t)}getUint32(e,t=this.le){return this.dataView.getUint32(e,t)}getFloat32(e,t=this.le){return this.dataView.getFloat32(e,t)}getFloat64(e,t=this.le){return this.dataView.getFloat64(e,t)}getFloat(e,t=this.le){return this.dataView.getFloat32(e,t)}getDouble(e,t=this.le){return this.dataView.getFloat64(e,t)}getUintBytes(e,t,n){switch(t){case 1:return this.getUint8(e,n);case 2:return this.getUint16(e,n);case 4:return this.getUint32(e,n);case 8:return this.getUint64&&this.getUint64(e,n)}}getUint(e,t,n){switch(t){case 8:return this.getUint8(e,n);case 16:return this.getUint16(e,n);case 32:return this.getUint32(e,n);case 64:return this.getUint64&&this.getUint64(e,n)}}toString(e){return this.dataView.toString(e,this.constructor.name)}ensureChunk(){}};function OA(e,t){EA(`${e} '${t}' was not loaded, try using full build of exifr.`)}let RA=class extends Map{constructor(e){super(),this.kind=e}get(e,t){return this.has(e)||OA(this.kind,e),t&&(e in t||EA(`Unknown ${this.kind} '${e}'.`),t[e].enabled||OA(this.kind,e)),super.get(e)}keyList(){return Array.from(this.keys())}};var IA=new RA("file parser"),DA=new RA("segment parser"),LA=new RA("file reader");let FA=bA.fetch;function zA(e,t){return(n=e).startsWith("data:")||n.length>1e4?UA(e,t,"base64"):NA&&e.includes("://")?BA(e,t,"url",VA):NA?UA(e,t,"fs"):wA?BA(e,t,"url",VA):void EA("Invalid input argument");var n}async function BA(e,t,n,r){return LA.has(n)?UA(e,t,n):r?async function(e,t){let n=await t(e);return new PA(n)}(e,r):void EA(`Parser ${n} is not loaded`)}async function UA(e,t,n){let r=new(LA.get(n))(e,t);return await r.read(),r}const VA=e=>FA(e).then(e=>e.arrayBuffer()),HA=e=>new Promise((t,n)=>{let r=new FileReader;r.onloadend=()=>t(r.result||new ArrayBuffer),r.onerror=n,r.readAsArrayBuffer(e)}),WA=new Map,$A=new Map,GA=new Map,qA=["chunked","firstChunkSize","firstChunkSizeNode","firstChunkSizeBrowser","chunkSize","chunkLimit"],XA=["jfif","xmp","icc","iptc","ihdr"],KA=["tiff",...XA],YA=["ifd0","ifd1","exif","gps","interop"],ZA=[...KA,...YA],JA=["makerNote","userComment"],QA=["translateKeys","translateValues","reviveValues","multiSegment"],eT=[...QA,"sanitize","mergeOutput","silentErrors"];class tT{get translate(){return this.translateKeys||this.translateValues||this.reviveValues}}let nT=class extends tT{get needed(){return this.enabled||this.deps.size>0}constructor(e,t,n,r){if(super(),yA(this,"enabled",!1),yA(this,"skip",new Set),yA(this,"pick",new Set),yA(this,"deps",new Set),yA(this,"translateKeys",!1),yA(this,"translateValues",!1),yA(this,"reviveValues",!1),this.key=e,this.enabled=t,this.parse=this.enabled,this.applyInheritables(r),this.canBeFiltered=YA.includes(e),this.canBeFiltered&&(this.dict=WA.get(e)),void 0!==n)if(Array.isArray(n))this.parse=this.enabled=!0,this.canBeFiltered&&n.length>0&&this.translateTagSet(n,this.pick);else if("object"==typeof n){if(this.enabled=!0,this.parse=!1!==n.parse,this.canBeFiltered){let{pick:e,skip:t}=n;e&&e.length>0&&this.translateTagSet(e,this.pick),t&&t.length>0&&this.translateTagSet(t,this.skip)}this.applyInheritables(n)}else!0===n||!1===n?this.parse=this.enabled=n:EA(`Invalid options argument: ${n}`)}applyInheritables(e){let t,n;for(t of QA)n=e[t],void 0!==n&&(this[t]=n)}translateTagSet(e,t){if(this.dict){let n,r,{tagKeys:s,tagValues:i}=this.dict;for(n of e)"string"==typeof n?(r=i.indexOf(n),-1===r&&(r=s.indexOf(Number(n))),-1!==r&&t.add(Number(s[r]))):t.add(n)}else for(let n of e)t.add(n)}finalizeFilters(){!this.enabled&&this.deps.size>0?(this.enabled=!0,lT(this.pick,this.deps)):this.enabled&&this.pick.size>0&&lT(this.pick,this.deps)}};var rT={jfif:!1,tiff:!0,xmp:!1,icc:!1,iptc:!1,ifd0:!0,ifd1:!1,exif:!0,gps:!0,interop:!1,ihdr:void 0,makerNote:!1,userComment:!1,multiSegment:!1,skip:[],pick:[],translateKeys:!0,translateValues:!0,reviveValues:!0,sanitize:!0,mergeOutput:!0,silentErrors:!0,chunked:!0,firstChunkSize:void 0,firstChunkSizeNode:512,firstChunkSizeBrowser:65536,chunkSize:65536,chunkLimit:5},sT=new Map;class iT extends tT{static useCached(e){let t=sT.get(e);return void 0!==t||(t=new this(e),sT.set(e,t)),t}constructor(e){super(),!0===e?this.setupFromTrue():void 0===e?this.setupFromUndefined():Array.isArray(e)?this.setupFromArray(e):"object"==typeof e?this.setupFromObject(e):EA(`Invalid options argument ${e}`),void 0===this.firstChunkSize&&(this.firstChunkSize=wA?this.firstChunkSizeBrowser:this.firstChunkSizeNode),this.mergeOutput&&(this.ifd1.enabled=!1),this.filterNestedSegmentTags(),this.traverseTiffDependencyTree(),this.checkLoadedPlugins()}setupFromUndefined(){let e;for(e of qA)this[e]=rT[e];for(e of eT)this[e]=rT[e];for(e of JA)this[e]=rT[e];for(e of ZA)this[e]=new nT(e,rT[e],void 0,this)}setupFromTrue(){let e;for(e of qA)this[e]=rT[e];for(e of eT)this[e]=rT[e];for(e of JA)this[e]=!0;for(e of ZA)this[e]=new nT(e,!0,void 0,this)}setupFromArray(e){let t;for(t of qA)this[t]=rT[t];for(t of eT)this[t]=rT[t];for(t of JA)this[t]=rT[t];for(t of ZA)this[t]=new nT(t,!1,void 0,this);this.setupGlobalFilters(e,void 0,YA)}setupFromObject(e){let t;for(t of(YA.ifd0=YA.ifd0||YA.image,YA.ifd1=YA.ifd1||YA.thumbnail,Object.assign(this,e),qA))this[t]=oT(e[t],rT[t]);for(t of eT)this[t]=oT(e[t],rT[t]);for(t of JA)this[t]=oT(e[t],rT[t]);for(t of KA)this[t]=new nT(t,rT[t],e[t],this);for(t of YA)this[t]=new nT(t,rT[t],e[t],this.tiff);this.setupGlobalFilters(e.pick,e.skip,YA,ZA),!0===e.tiff?this.batchEnableWithBool(YA,!0):!1===e.tiff?this.batchEnableWithUserValue(YA,e):Array.isArray(e.tiff)?this.setupGlobalFilters(e.tiff,void 0,YA):"object"==typeof e.tiff&&this.setupGlobalFilters(e.tiff.pick,e.tiff.skip,YA)}batchEnableWithBool(e,t){for(let n of e)this[n].enabled=t}batchEnableWithUserValue(e,t){for(let n of e){let e=t[n];this[n].enabled=!1!==e&&void 0!==e}}setupGlobalFilters(e,t,n,r=n){if(e&&e.length){for(let e of r)this[e].enabled=!1;let t=aT(e,n);for(let[e,n]of t)lT(this[e].pick,n),this[e].enabled=!0}else if(t&&t.length){let e=aT(t,n);for(let[t,n]of e)lT(this[t].skip,n)}}filterNestedSegmentTags(){let{ifd0:e,exif:t,xmp:n,iptc:r,icc:s}=this;this.makerNote?t.deps.add(37500):t.skip.add(37500),this.userComment?t.deps.add(37510):t.skip.add(37510),n.enabled||e.skip.add(700),r.enabled||e.skip.add(33723),s.enabled||e.skip.add(34675)}traverseTiffDependencyTree(){let{ifd0:e,exif:t,gps:n,interop:r}=this;r.needed&&(t.deps.add(40965),e.deps.add(40965)),t.needed&&e.deps.add(34665),n.needed&&e.deps.add(34853),this.tiff.enabled=YA.some(e=>!0===this[e].enabled)||this.makerNote||this.userComment;for(let s of YA)this[s].finalizeFilters()}get onlyTiff(){return!XA.map(e=>this[e].enabled).some(e=>!0===e)&&this.tiff.enabled}checkLoadedPlugins(){for(let e of KA)this[e].enabled&&!DA.has(e)&&OA("segment parser",e)}}function aT(e,t){let n,r,s,i,a=[];for(s of t){for(i of(n=WA.get(s),r=[],n))(e.includes(i[0])||e.includes(i[1]))&&r.push(i[0]);r.length&&a.push([s,r])}return a}function oT(e,t){return void 0!==e?e:void 0!==t?t:void 0}function lT(e,t){for(let n of t)e.add(n)}yA(iT,"default",rT);class cT{constructor(e){yA(this,"parsers",{}),yA(this,"output",{}),yA(this,"errors",[]),yA(this,"pushToErrors",e=>this.errors.push(e)),this.options=iT.useCached(e)}async read(e){var t,n;this.file=await(t=e,n=this.options,"string"==typeof t?zA(t,n):wA&&!jA&&t instanceof HTMLImageElement?zA(t.src,n):t instanceof Uint8Array||t instanceof ArrayBuffer||t instanceof DataView?new PA(t):wA&&t instanceof Blob?BA(t,n,"blob",HA):void EA("Invalid input argument"))}setup(){if(this.fileParser)return;let{file:e}=this,t=e.getUint16(0);for(let[n,r]of IA)if(r.canHandle(e,t))return this.fileParser=new r(this.options,this.file,this.parsers),e[n]=!0;this.file.close&&this.file.close(),EA("Unknown file format")}async parse(){let{output:e,errors:t}=this;return this.setup(),this.options.silentErrors?(await this.executeParsers().catch(this.pushToErrors),t.push(...this.fileParser.errors)):await this.executeParsers(),this.file.close&&this.file.close(),this.options.silentErrors&&t.length>0&&(e.errors=t),CA(n=e)?void 0:n;var n}async executeParsers(){let{output:e}=this;await this.fileParser.parse();let t=Object.values(this.parsers).map(async t=>{let n=await t.parse();t.assignToOutput(e,n)});this.options.silentErrors&&(t=t.map(e=>e.catch(this.pushToErrors))),await Promise.all(t)}async extractThumbnail(){this.setup();let{options:e,file:t}=this,n=DA.get("tiff",e);var r;if(t.tiff?r={start:0,type:"tiff"}:t.jpeg&&(r=await this.fileParser.getOrFindSegment("tiff")),void 0===r)return;let s=await this.fileParser.ensureSegmentChunk(r),i=this.parsers.tiff=new n(s,e,t),a=await i.extractThumbnail();return t.close&&t.close(),a}}class dT{static findPosition(e,t){let n=e.getUint16(t+2)+2,r="function"==typeof this.headerLength?this.headerLength(e,t,n):this.headerLength,s=t+r,i=n-r;return{offset:t,length:n,headerLength:r,start:s,size:i,end:s+i}}static parse(e,t={}){return new this(e,new iT({[this.type]:t}),e).parse()}normalizeInput(e){return e instanceof PA?e:new PA(e)}constructor(e,t={},n){yA(this,"errors",[]),yA(this,"raw",new Map),yA(this,"handleError",e=>{if(!this.options.silentErrors)throw e;this.errors.push(e.message)}),this.chunk=this.normalizeInput(e),this.file=n,this.type=this.constructor.type,this.globalOptions=this.options=t,this.localOptions=t[this.type],this.canTranslate=this.localOptions&&this.localOptions.translate}translate(){this.canTranslate&&(this.translated=this.translateBlock(this.raw,this.type))}get output(){return this.translated?this.translated:this.raw?Object.fromEntries(this.raw):void 0}translateBlock(e,t){let n=GA.get(t),r=$A.get(t),s=WA.get(t),i=this.options[t],a=i.reviveValues&&!!n,o=i.translateValues&&!!r,l=i.translateKeys&&!!s,c={};for(let[d,u]of e)a&&n.has(d)?u=n.get(d)(u):o&&r.has(d)&&(u=this.translateValue(u,r.get(d))),l&&s.has(d)&&(d=s.get(d)||d),c[d]=u;return c}translateValue(e,t){return t[e]||t.DEFAULT||e}assignToOutput(e,t){this.assignObjectToOutput(e,this.constructor.type,t)}assignObjectToOutput(e,t,n){if(this.globalOptions.mergeOutput)return Object.assign(e,n);e[t]?Object.assign(e[t],n):e[t]=n}}function uT(e){return 192===e||194===e||196===e||219===e||221===e||218===e||254===e}function hT(e){return e>=224&&e<=239}function pT(e,t,n){for(let[r,s]of DA)if(s.canHandle(e,t,n))return r}yA(dT,"headerLength",4),yA(dT,"type",void 0),yA(dT,"multiSegment",!1),yA(dT,"canHandle",()=>!1);class mT extends class{constructor(e,t,n){yA(this,"errors",[]),yA(this,"ensureSegmentChunk",async e=>{let t=e.start,n=e.size||65536;if(this.file.chunked)if(this.file.available(t,n))e.chunk=this.file.subarray(t,n);else try{e.chunk=await this.file.readChunk(t,n)}catch(r){EA(`Couldn't read segment: ${JSON.stringify(e)}. ${r.message}`)}else this.file.byteLength>t+n?e.chunk=this.file.subarray(t,n):void 0===e.size?e.chunk=this.file.subarray(t):EA("Segment unreachable: "+JSON.stringify(e));return e.chunk}),this.extendOptions&&this.extendOptions(e),this.options=e,this.file=t,this.parsers=n}injectSegment(e,t){this.options[e].enabled&&this.createParser(e,t)}createParser(e,t){let n=new(DA.get(e))(t,this.options,this.file);return this.parsers[e]=n}createParsers(e){for(let t of e){let{type:e,chunk:n}=t,r=this.options[e];if(r&&r.enabled){let t=this.parsers[e];t&&t.append||t||this.createParser(e,n)}}}async readSegments(e){let t=e.map(this.ensureSegmentChunk);await Promise.all(t)}}{constructor(...e){super(...e),yA(this,"appSegments",[]),yA(this,"jpegSegments",[]),yA(this,"unknownSegments",[])}static canHandle(e,t){return 65496===t}async parse(){await this.findAppSegments(),await this.readSegments(this.appSegments),this.mergeMultiSegments(),this.createParsers(this.mergedAppSegments||this.appSegments)}setupSegmentFinderArgs(e){!0===e?(this.findAll=!0,this.wanted=new Set(DA.keyList())):(e=void 0===e?DA.keyList().filter(e=>this.options[e].enabled):e.filter(e=>this.options[e].enabled&&DA.has(e)),this.findAll=!1,this.remaining=new Set(e),this.wanted=new Set(e)),this.unfinishedMultiSegment=!1}async findAppSegments(e=0,t){this.setupSegmentFinderArgs(t);let{file:n,findAll:r,wanted:s,remaining:i}=this;if(!r&&this.file.chunked&&(r=Array.from(s).some(e=>{let t=DA.get(e),n=this.options[e];return t.multiSegment&&n.multiSegment}),r&&await this.file.readWhole()),e=this.findAppSegmentsInRange(e,n.byteLength),!this.options.onlyTiff&&n.chunked){let t=!1;for(;i.size>0&&!t&&(n.canReadNextChunk||this.unfinishedMultiSegment);){let{nextChunkOffset:r}=n,s=this.appSegments.some(e=>!this.file.available(e.offset||e.start,e.length||e.size));if(t=e>r&&!s?!(await n.readNextChunk(e)):!(await n.readNextChunk(r)),void 0===(e=this.findAppSegmentsInRange(e,n.byteLength)))return}}}findAppSegmentsInRange(e,t){t-=2;let n,r,s,i,a,o,{file:l,findAll:c,wanted:d,remaining:u,options:h}=this;for(;e<t;e++)if(255===l.getUint8(e))if(n=l.getUint8(e+1),hT(n)){if(r=l.getUint16(e+2),s=pT(l,e,r),s&&d.has(s)&&(i=DA.get(s),a=i.findPosition(l,e),o=h[s],a.type=s,this.appSegments.push(a),!c&&(i.multiSegment&&o.multiSegment?(this.unfinishedMultiSegment=a.chunkNumber<a.chunkCount,this.unfinishedMultiSegment||u.delete(s)):u.delete(s),0===u.size)))break;h.recordUnknownSegments&&(a=dT.findPosition(l,e),a.marker=n,this.unknownSegments.push(a)),e+=r+1}else if(uT(n)){if(r=l.getUint16(e+2),218===n&&!1!==h.stopAfterSos)return;h.recordJpegSegments&&this.jpegSegments.push({offset:e,length:r,marker:n}),e+=r+1}return e}mergeMultiSegments(){if(!this.appSegments.some(e=>e.multiSegment))return;let e=function(e){let t,n,r,s=new Map;for(let i=0;i<e.length;i++)t=e[i],n=t.type,s.has(n)?r=s.get(n):s.set(n,r=[]),r.push(t);return Array.from(s)}(this.appSegments);this.mergedAppSegments=e.map(([e,t])=>{let n=DA.get(e,this.options);return n.handleMultiSegments?{type:e,chunk:n.handleMultiSegments(t)}:t[0]})}getSegment(e){return this.appSegments.find(t=>t.type===e)}async getOrFindSegment(e){let t=this.getSegment(e);return void 0===t&&(await this.findAppSegments(0,[e]),t=this.getSegment(e)),t}}yA(mT,"type","jpeg"),IA.set("jpeg",mT);const fT=[void 0,1,1,2,4,8,1,1,2,4,8,4,8,4];class gT extends dT{parseHeader(){var e=this.chunk.getUint16();18761===e?this.le=!0:19789===e&&(this.le=!1),this.chunk.le=this.le,this.headerParsed=!0}parseTags(e,t,n=new Map){let{pick:r,skip:s}=this.options[t];r=new Set(r);let i=r.size>0,a=0===s.size,o=this.chunk.getUint16(e);e+=2;for(let l=0;l<o;l++){let o=this.chunk.getUint16(e);if(i){if(r.has(o)&&(n.set(o,this.parseTag(e,o,t)),r.delete(o),0===r.size))break}else!a&&s.has(o)||n.set(o,this.parseTag(e,o,t));e+=12}return n}parseTag(e,t,n){let{chunk:r}=this,s=r.getUint16(e+2),i=r.getUint32(e+4),a=fT[s];if(a*i<=4?e+=8:e=r.getUint32(e+8),(s<1||s>13)&&EA(`Invalid TIFF value type. block: ${n.toUpperCase()}, tag: ${t.toString(16)}, type: ${s}, offset ${e}`),e>r.byteLength&&EA(`Invalid TIFF value offset. block: ${n.toUpperCase()}, tag: ${t.toString(16)}, type: ${s}, offset ${e} is outside of chunk size ${r.byteLength}`),1===s)return r.getUint8Array(e,i);if(2===s)return""===(o=function(e){for(;e.endsWith("\0");)e=e.slice(0,-1);return e}(o=r.getString(e,i)).trim())?void 0:o;var o;if(7===s)return r.getUint8Array(e,i);if(1===i)return this.parseTagValue(s,e);{let t=new(function(e){switch(e){case 1:return Uint8Array;case 3:return Uint16Array;case 4:return Uint32Array;case 5:case 10:default:return Array;case 6:return Int8Array;case 8:return Int16Array;case 9:return Int32Array;case 11:return Float32Array;case 12:return Float64Array}}(s))(i),n=a;for(let r=0;r<i;r++)t[r]=this.parseTagValue(s,e),e+=n;return t}}parseTagValue(e,t){let{chunk:n}=this;switch(e){case 1:return n.getUint8(t);case 3:return n.getUint16(t);case 4:case 13:return n.getUint32(t);case 5:return n.getUint32(t)/n.getUint32(t+4);case 6:return n.getInt8(t);case 8:return n.getInt16(t);case 9:return n.getInt32(t);case 10:return n.getInt32(t)/n.getInt32(t+4);case 11:return n.getFloat(t);case 12:return n.getDouble(t);default:EA(`Invalid tiff type ${e}`)}}}let xT=class extends gT{static canHandle(e,t){return 225===e.getUint8(t+1)&&1165519206===e.getUint32(t+4)&&0===e.getUint16(t+8)}async parse(){this.parseHeader();let{options:e}=this;return e.ifd0.enabled&&await this.parseIfd0Block(),e.exif.enabled&&await this.safeParse("parseExifBlock"),e.gps.enabled&&await this.safeParse("parseGpsBlock"),e.interop.enabled&&await this.safeParse("parseInteropBlock"),e.ifd1.enabled&&await this.safeParse("parseThumbnailBlock"),this.createOutput()}safeParse(e){let t=this[e]();return void 0!==t.catch&&(t=t.catch(this.handleError)),t}findIfd0Offset(){void 0===this.ifd0Offset&&(this.ifd0Offset=this.chunk.getUint32(4))}findIfd1Offset(){if(void 0===this.ifd1Offset){this.findIfd0Offset();let e=this.chunk.getUint16(this.ifd0Offset),t=this.ifd0Offset+2+12*e;this.ifd1Offset=this.chunk.getUint32(t)}}parseBlock(e,t){let n=new Map;return this[t]=n,this.parseTags(e,t,n),n}async parseIfd0Block(){if(this.ifd0)return;let{file:e}=this;this.findIfd0Offset(),this.ifd0Offset<8&&EA("Malformed EXIF data"),!e.chunked&&this.ifd0Offset>e.byteLength&&EA(`IFD0 offset points to outside of file.\nthis.ifd0Offset: ${this.ifd0Offset}, file.byteLength: ${e.byteLength}`),e.tiff&&await e.ensureChunk(this.ifd0Offset,kA(this.options));let t=this.parseBlock(this.ifd0Offset,"ifd0");return 0!==t.size?(this.exifOffset=t.get(34665),this.interopOffset=t.get(40965),this.gpsOffset=t.get(34853),this.xmp=t.get(700),this.iptc=t.get(33723),this.icc=t.get(34675),this.options.sanitize&&(t.delete(34665),t.delete(40965),t.delete(34853),t.delete(700),t.delete(33723),t.delete(34675)),t):void 0}async parseExifBlock(){if(this.exif)return;if(this.ifd0||await this.parseIfd0Block(),void 0===this.exifOffset)return;this.file.tiff&&await this.file.ensureChunk(this.exifOffset,kA(this.options));let e=this.parseBlock(this.exifOffset,"exif");return this.interopOffset||(this.interopOffset=e.get(40965)),this.makerNote=e.get(37500),this.userComment=e.get(37510),this.options.sanitize&&(e.delete(40965),e.delete(37500),e.delete(37510)),this.unpack(e,41728),this.unpack(e,41729),e}unpack(e,t){let n=e.get(t);n&&1===n.length&&e.set(t,n[0])}async parseGpsBlock(){if(this.gps)return;if(this.ifd0||await this.parseIfd0Block(),void 0===this.gpsOffset)return;let e=this.parseBlock(this.gpsOffset,"gps");return e&&e.has(2)&&e.has(4)&&(e.set("latitude",vT(...e.get(2),e.get(1))),e.set("longitude",vT(...e.get(4),e.get(3)))),e}async parseInteropBlock(){if(!this.interop&&(this.ifd0||await this.parseIfd0Block(),void 0!==this.interopOffset||this.exif||await this.parseExifBlock(),void 0!==this.interopOffset))return this.parseBlock(this.interopOffset,"interop")}async parseThumbnailBlock(e=!1){if(!this.ifd1&&!this.ifd1Parsed&&(!this.options.mergeOutput||e))return this.findIfd1Offset(),this.ifd1Offset>0&&(this.parseBlock(this.ifd1Offset,"ifd1"),this.ifd1Parsed=!0),this.ifd1}async extractThumbnail(){if(this.headerParsed||this.parseHeader(),this.ifd1Parsed||await this.parseThumbnailBlock(!0),void 0===this.ifd1)return;let e=this.ifd1.get(513),t=this.ifd1.get(514);return this.chunk.getUint8Array(e,t)}get image(){return this.ifd0}get thumbnail(){return this.ifd1}createOutput(){let e,t,n,r={};for(t of YA)if(e=this[t],!CA(e))if(n=this.canTranslate?this.translateBlock(e,t):Object.fromEntries(e),this.options.mergeOutput){if("ifd1"===t)continue;Object.assign(r,n)}else r[t]=n;return this.makerNote&&(r.makerNote=this.makerNote),this.userComment&&(r.userComment=this.userComment),r}assignToOutput(e,t){if(this.globalOptions.mergeOutput)Object.assign(e,t);else for(let[n,r]of Object.entries(t))this.assignObjectToOutput(e,n,r)}};function vT(e,t,n,r){var s=e+t/60+n/3600;return"S"!==r&&"W"!==r||(s*=-1),s}yA(xT,"type","tiff"),yA(xT,"headerLength",10),DA.set("tiff",xT);const yT={ifd0:!1,ifd1:!1,exif:!1,gps:!1,interop:!1,sanitize:!1,reviveValues:!0,translateKeys:!1,translateValues:!1,mergeOutput:!1};Object.assign({},yT,{firstChunkSize:4e4,gps:[1,2,3,4]}),Object.assign({},yT,{tiff:!1,ifd1:!0,mergeOutput:!1});const bT=Object.assign({},yT,{firstChunkSize:4e4,ifd0:[274]});const wT=Object.freeze({1:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:0,rad:0},2:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:0,rad:0},3:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:180,rad:180*Math.PI/180},4:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:180,rad:180*Math.PI/180},5:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:90,rad:90*Math.PI/180},6:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:90,rad:90*Math.PI/180},7:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:270,rad:270*Math.PI/180},8:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:270,rad:270*Math.PI/180}});let jT=!0,NT=!0;if("object"==typeof navigator){let e=navigator.userAgent;if(e.includes("iPad")||e.includes("iPhone")){let t=e.match(/OS (\d+)_(\d+)/);if(t){let[,e,n]=t,r=Number(e)+.1*Number(n);jT=r<13.4,NT=!1}}else if(e.includes("OS X 10")){let[,t]=e.match(/OS X 10[_.](\d+)/);jT=NT=Number(t)<15}if(e.includes("Chrome/")){let[,t]=e.match(/Chrome\/(\d+)/);jT=NT=Number(t)<81}else if(e.includes("Firefox/")){let[,t]=e.match(/Firefox\/(\d+)/);jT=NT=Number(t)<77}}async function _T(e){let t=await async function(e){let t=new cT(bT);await t.read(e);let n=await t.parse();if(n&&n.ifd0)return n.ifd0[274]}(e);return Object.assign({canvas:jT,css:NT},wT[t])}class ST extends PA{constructor(...e){super(...e),yA(this,"ranges",new MT),0!==this.byteLength&&this.ranges.add(0,this.byteLength)}_tryExtend(e,t,n){if(0===e&&0===this.byteLength&&n){let e=new DataView(n.buffer||n,n.byteOffset,n.byteLength);this._swapDataView(e)}else{let n=e+t;if(n>this.byteLength){let{dataView:e}=this._extend(n);this._swapDataView(e)}}}_extend(e){let t;t=SA?_A.allocUnsafe(e):new Uint8Array(e);let n=new DataView(t.buffer,t.byteOffset,t.byteLength);return t.set(new Uint8Array(this.buffer,this.byteOffset,this.byteLength),0),{uintView:t,dataView:n}}subarray(e,t,n=!1){return t=t||this._lengthToEnd(e),n&&this._tryExtend(e,t),this.ranges.add(e,t),super.subarray(e,t)}set(e,t,n=!1){n&&this._tryExtend(t,e.byteLength,e);let r=super.set(e,t);return this.ranges.add(t,r.byteLength),r}async ensureChunk(e,t){this.chunked&&(this.ranges.available(e,t)||await this.readChunk(e,t))}available(e,t){return this.ranges.available(e,t)}}class MT{constructor(){yA(this,"list",[])}get length(){return this.list.length}add(e,t,n=0){let r=e+t,s=this.list.filter(t=>CT(e,t.offset,r)||CT(e,t.end,r));if(s.length>0){e=Math.min(e,...s.map(e=>e.offset)),r=Math.max(r,...s.map(e=>e.end)),t=r-e;let n=s.shift();n.offset=e,n.length=t,n.end=r,this.list=this.list.filter(e=>!s.includes(e))}else this.list.push({offset:e,length:t,end:r})}available(e,t){let n=e+t;return this.list.some(t=>t.offset<=e&&n<=t.end)}}function CT(e,t,n){return e<=t&&t<=n}class ET extends ST{constructor(e,t){super(0),yA(this,"chunksRead",0),this.input=e,this.options=t}async readWhole(){this.chunked=!1,await this.readChunk(this.nextChunkOffset)}async readChunked(){this.chunked=!0,await this.readChunk(0,this.options.firstChunkSize)}async readNextChunk(e=this.nextChunkOffset){if(this.fullyRead)return this.chunksRead++,!1;let t=this.options.chunkSize,n=await this.readChunk(e,t);return!!n&&n.byteLength===t}async readChunk(e,t){if(this.chunksRead++,0!==(t=this.safeWrapAddress(e,t)))return this._readChunk(e,t)}safeWrapAddress(e,t){return void 0!==this.size&&e+t>this.size?Math.max(0,this.size-e):t}get nextChunkOffset(){if(0!==this.ranges.list.length)return this.ranges.list[0].length}get canReadNextChunk(){return this.chunksRead<this.options.chunkLimit}get fullyRead(){return void 0!==this.size&&this.nextChunkOffset===this.size}read(){return this.options.chunked?this.readChunked():this.readWhole()}close(){}}LA.set("blob",class extends ET{async readWhole(){this.chunked=!1;let e=await HA(this.input);this._swapArrayBuffer(e)}readChunked(){return this.chunked=!0,this.size=this.input.size,super.readChunked()}async _readChunk(e,t){let n=t?e+t:void 0,r=this.input.slice(e,n),s=await HA(r);return this.set(s,e,!0)}});const kT="5.0.1",AT={strings:{generatingThumbnails:"Generating thumbnails..."}};function TT(e,t,n){try{e.getContext("2d").getImageData(0,0,1,1)}catch(PUe){if(18===PUe.code)return Promise.reject(new Error("cannot read image, probably an svg with external resources"))}return e.toBlob?new Promise(r=>{e.toBlob(r,t,n)}).then(e=>{if(null===e)throw new Error("cannot read image, probably an svg with external resources");return e}):Promise.resolve().then(()=>function(e,t){const n=iC.exec(e),r=t.mimeType??n?.[1]??"plain/text";let s;if(null!=n?.[2]){const e=atob(decodeURIComponent(n[3])),t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);s=[t]}else null!=n?.[3]&&(s=[decodeURIComponent(n[3])]);return new Blob(s,{type:r})}(e.toDataURL(t,n),{})).then(e=>{if(null===e)throw new Error("could not extract blob, probably an old browser");return e})}const PT={thumbnailWidth:null,thumbnailHeight:null,thumbnailType:"image/jpeg",waitForThumbnailsBeforeUpload:!1,lazy:!1};class OT extends hk{constructor(e,t){if(super(e,{...PT,...t}),_t(this,"queue"),_t(this,"queueProcessing"),_t(this,"defaultThumbnailDimension"),_t(this,"thumbnailType"),_t(this,"onFileAdded",e=>{!e.preview&&e.data&&SC(e.type)&&!e.isRemote&&this.addToQueue(e.id)}),_t(this,"onCancelRequest",e=>{const t=this.queue.indexOf(e.id);-1!==t&&this.queue.splice(t,1)}),_t(this,"onFileRemoved",e=>{const t=this.queue.indexOf(e.id);-1!==t&&this.queue.splice(t,1),e.preview&&_C(e.preview)&&URL.revokeObjectURL(e.preview)}),_t(this,"onRestored",()=>{this.uppy.getFiles().filter(e=>e.isRestored).forEach(e=>{e.preview&&!_C(e.preview)||this.addToQueue(e.id)})}),_t(this,"onAllFilesRemoved",()=>{this.queue=[]}),_t(this,"waitUntilAllProcessed",e=>{e.forEach(e=>{const t=this.uppy.getFile(e);this.uppy.emit("preprocess-progress",t,{mode:"indeterminate",message:this.i18n("generatingThumbnails")})});const t=()=>{e.forEach(e=>{const t=this.uppy.getFile(e);this.uppy.emit("preprocess-complete",t)})};return new Promise(e=>{this.queueProcessing?this.uppy.once("thumbnail:all-generated",()=>{t(),e()}):(t(),e())})}),this.type="modifier",this.id=this.opts.id||"ThumbnailGenerator",this.title="Thumbnail Generator",this.queue=[],this.queueProcessing=!1,this.defaultThumbnailDimension=200,this.thumbnailType=this.opts.thumbnailType,this.defaultLocale=AT,this.i18nInit(),this.opts.lazy&&this.opts.waitForThumbnailsBeforeUpload)throw new Error("ThumbnailGenerator: The `lazy` and `waitForThumbnailsBeforeUpload` options are mutually exclusive. Please ensure at most one of them is set to `true`.")}createThumbnail(e,t,n){const r=URL.createObjectURL(e.data),s=new Promise((e,t)=>{const n=new Image;n.src=r,n.addEventListener("load",()=>{URL.revokeObjectURL(r),e(n)}),n.addEventListener("error",e=>{URL.revokeObjectURL(r),t(e.error||new Error("Could not create thumbnail"))})}),i=_T(e.data).catch(()=>1);return Promise.all([s,i]).then(([e,r])=>{const s=this.getProportionalDimensions(e,t,n,r.deg),i=function(e,t){let n=e.width,r=e.height;90!==t.deg&&270!==t.deg||(n=e.height,r=e.width);const s=document.createElement("canvas");s.width=n,s.height=r;const i=s.getContext("2d");return i.translate(n/2,r/2),t.canvas&&(i.rotate(t.rad),i.scale(t.scaleX,t.scaleY)),i.drawImage(e,-e.width/2,-e.height/2,e.width,e.height),s}(e,r);return TT(this.resizeImage(i,s.width,s.height),this.thumbnailType,80)}).then(e=>URL.createObjectURL(e))}getProportionalDimensions(e,t,n,r){let s=e.width/e.height;if(90!==r&&270!==r||(s=e.height/e.width),null!=t){let n=t;return e.width<t&&(n=e.width),{width:n,height:Math.round(n/s)}}if(null!=n){let t=n;return e.height<n&&(t=e.height),{width:Math.round(t*s),height:t}}return{width:this.defaultThumbnailDimension,height:Math.round(this.defaultThumbnailDimension/s)}}resizeImage(e,t,n){let r=function(e){const t=e.width/e.height,n=5e6,r=4096;let s=Math.floor(Math.sqrt(n*t)),i=Math.floor(n/Math.sqrt(n*t));if(s>r&&(s=r,i=Math.round(s/t)),i>r&&(i=r,s=Math.round(t*i)),e.width>s){const t=document.createElement("canvas");return t.width=s,t.height=i,t.getContext("2d").drawImage(e,0,0,s,i),t}return e}(e),s=Math.ceil(Math.log2(r.width/t));s<1&&(s=1);let i=t*2**(s-1),a=n*2**(s-1);for(;s--;){const e=document.createElement("canvas");e.width=i,e.height=a,e.getContext("2d").drawImage(r,0,0,i,a),r=e,i=Math.round(i/2),a=Math.round(a/2)}return r}setPreviewURL(e,t){this.uppy.setFileState(e,{preview:t})}addToQueue(e){this.queue.push(e),!1===this.queueProcessing&&this.processQueue()}processQueue(){if(this.queueProcessing=!0,this.queue.length>0){const e=this.uppy.getFile(this.queue.shift());return e?this.requestThumbnail(e).catch(()=>{}).then(()=>this.processQueue()):(this.uppy.log("[ThumbnailGenerator] file was removed before a thumbnail could be generated, but not removed from the queue. This is probably a bug","error"),Promise.resolve())}return this.queueProcessing=!1,this.uppy.log("[ThumbnailGenerator] Emptied thumbnail queue"),this.uppy.emit("thumbnail:all-generated"),Promise.resolve()}requestThumbnail(e){return SC(e.type)&&!e.isRemote?this.createThumbnail(e,this.opts.thumbnailWidth,this.opts.thumbnailHeight).then(t=>{this.setPreviewURL(e.id,t),this.uppy.log(`[ThumbnailGenerator] Generated thumbnail for ${e.id}`),this.uppy.emit("thumbnail:generated",this.uppy.getFile(e.id),t)}).catch(t=>{this.uppy.log(`[ThumbnailGenerator] Failed thumbnail for ${e.id}:`,"warning"),this.uppy.log(t,"warning"),this.uppy.emit("thumbnail:error",this.uppy.getFile(e.id),t)}):Promise.resolve()}install(){this.uppy.on("file-removed",this.onFileRemoved),this.uppy.on("cancel-all",this.onAllFilesRemoved),this.opts.lazy?(this.uppy.on("thumbnail:request",this.onFileAdded),this.uppy.on("thumbnail:cancel",this.onCancelRequest)):(this.uppy.on("thumbnail:request",this.onFileAdded),this.uppy.on("file-added",this.onFileAdded),this.uppy.on("restored",this.onRestored)),this.opts.waitForThumbnailsBeforeUpload&&this.uppy.addPreProcessor(this.waitUntilAllProcessed)}uninstall(){this.uppy.off("file-removed",this.onFileRemoved),this.uppy.off("cancel-all",this.onAllFilesRemoved),this.opts.lazy?(this.uppy.off("thumbnail:request",this.onFileAdded),this.uppy.off("thumbnail:cancel",this.onCancelRequest)):(this.uppy.off("thumbnail:request",this.onFileAdded),this.uppy.off("file-added",this.onFileAdded),this.uppy.off("restored",this.onRestored)),this.opts.waitForThumbnailsBeforeUpload&&this.uppy.removePreProcessor(this.waitUntilAllProcessed)}}_t(OT,"VERSION",kT);const RT="5.0.2";class IT extends nE{constructor(){super(...arguments),_t(this,"fileInput",null),_t(this,"folderInput",null),_t(this,"mobilePhotoFileInput",null),_t(this,"mobileVideoFileInput",null),_t(this,"triggerFileInputClick",()=>{this.fileInput?.click()}),_t(this,"triggerFolderInputClick",()=>{this.folderInput?.click()}),_t(this,"triggerVideoCameraInputClick",()=>{this.mobileVideoFileInput?.click()}),_t(this,"triggerPhotoCameraInputClick",()=>{this.mobilePhotoFileInput?.click()}),_t(this,"onFileInputChange",e=>{this.props.handleInputChange(e),e.currentTarget.value=""}),_t(this,"renderHiddenInput",(e,t)=>_E("input",{className:"uppy-Dashboard-input",hidden:!0,"aria-hidden":"true",tabIndex:-1,webkitdirectory:e,type:"file",name:"files[]",multiple:1!==this.props.maxNumberOfFiles,onChange:this.onFileInputChange,accept:this.props.allowedFileTypes?.join(", "),ref:t})),_t(this,"renderHiddenCameraInput",(e,t,n)=>{const r={photo:"image/*",video:"video/*"}[e];return _E("input",{className:"uppy-Dashboard-input",hidden:!0,"aria-hidden":"true",tabIndex:-1,type:"file",name:`camera-${e}`,onChange:this.onFileInputChange,capture:""===t?"environment":t,accept:r,ref:n})}),_t(this,"renderMyDeviceAcquirer",()=>_E("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MyDevice",children:_E("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:this.triggerFileInputClick,children:[_E("div",{className:"uppy-DashboardTab-inner",children:_E("svg",{className:"uppy-DashboardTab-iconMyDevice","aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32",children:_E("path",{d:"M8.45 22.087l-1.305-6.674h17.678l-1.572 6.674H8.45zm4.975-12.412l1.083 1.765a.823.823 0 00.715.386h7.951V13.5H8.587V9.675h4.838zM26.043 13.5h-1.195v-2.598c0-.463-.336-.75-.798-.75h-8.356l-1.082-1.766A.823.823 0 0013.897 8H7.728c-.462 0-.815.256-.815.718V13.5h-.956a.97.97 0 00-.746.37.972.972 0 00-.19.81l1.724 8.565c.095.44.484.755.933.755H24c.44 0 .824-.3.929-.727l2.043-8.568a.972.972 0 00-.176-.825.967.967 0 00-.753-.38z",fill:"currentcolor","fill-rule":"evenodd"})})}),_E("div",{className:"uppy-DashboardTab-name",children:this.props.i18n("myDevice")})]})})),_t(this,"renderPhotoCamera",()=>_E("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MobilePhotoCamera",children:_E("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:this.triggerPhotoCameraInputClick,children:[_E("div",{className:"uppy-DashboardTab-inner",children:_E("svg",{"aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32",children:_E("path",{d:"M23.5 9.5c1.417 0 2.5 1.083 2.5 2.5v9.167c0 1.416-1.083 2.5-2.5 2.5h-15c-1.417 0-2.5-1.084-2.5-2.5V12c0-1.417 1.083-2.5 2.5-2.5h2.917l1.416-2.167C13 7.167 13.25 7 13.5 7h5c.25 0 .5.167.667.333L20.583 9.5H23.5zM16 11.417a4.706 4.706 0 00-4.75 4.75 4.704 4.704 0 004.75 4.75 4.703 4.703 0 004.75-4.75c0-2.663-2.09-4.75-4.75-4.75zm0 7.825c-1.744 0-3.076-1.332-3.076-3.074 0-1.745 1.333-3.077 3.076-3.077 1.744 0 3.074 1.333 3.074 3.076s-1.33 3.075-3.074 3.075z",fill:"#02B383","fill-rule":"nonzero"})})}),_E("div",{className:"uppy-DashboardTab-name",children:this.props.i18n("takePictureBtn")})]})})),_t(this,"renderVideoCamera",()=>_E("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MobileVideoCamera",children:_E("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:this.triggerVideoCameraInputClick,children:[_E("div",{className:"uppy-DashboardTab-inner",children:_E("svg",{"aria-hidden":"true",width:"32",height:"32",viewBox:"0 0 32 32",children:_E("path",{fill:"#FF675E",fillRule:"nonzero",d:"m21.254 14.277 2.941-2.588c.797-.313 1.243.818 1.09 1.554-.01 2.094.02 4.189-.017 6.282-.126.915-1.145 1.08-1.58.34l-2.434-2.142c-.192.287-.504 1.305-.738.468-.104-1.293-.028-2.596-.05-3.894.047-.312.381.823.426 1.069.063-.384.206-.744.362-1.09zm-12.939-3.73c3.858.013 7.717-.025 11.574.02.912.129 1.492 1.237 1.351 2.217-.019 2.412.04 4.83-.03 7.239-.17 1.025-1.166 1.59-2.029 1.429-3.705-.012-7.41.025-11.114-.019-.913-.129-1.492-1.237-1.352-2.217.018-2.404-.036-4.813.029-7.214.136-.82.83-1.473 1.571-1.454z "})})}),_E("div",{className:"uppy-DashboardTab-name",children:this.props.i18n("recordVideoBtn")})]})})),_t(this,"renderBrowseButton",(e,t)=>_E("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-Dashboard-browse",onClick:t,"data-uppy-super-focusable":0===this.props.acquirers.length,children:e})),_t(this,"renderDropPasteBrowseTagline",e=>{const t=this.renderBrowseButton(this.props.i18n("browseFiles"),this.triggerFileInputClick),n=this.renderBrowseButton(this.props.i18n("browseFolders"),this.triggerFolderInputClick),r=this.props.fileManagerSelectionType,s=r.charAt(0).toUpperCase()+r.slice(1);return _E("div",{class:"uppy-Dashboard-AddFiles-title",children:this.props.disableLocalFiles?this.props.i18n("importFiles"):e>0?this.props.i18nArray(`dropPasteImport${s}`,{browseFiles:t,browseFolders:n,browse:t}):this.props.i18nArray(`dropPaste${s}`,{browseFiles:t,browseFolders:n,browse:t})})}),_t(this,"renderAcquirer",e=>_E("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":e.id,children:_E("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-cy":e.id,"aria-controls":`uppy-DashboardContent-panel--${e.id}`,"aria-selected":this.props.activePickerPanel?.id===e.id,"data-uppy-super-focusable":!0,onClick:()=>this.props.showPanel(e.id),children:[_E("div",{className:"uppy-DashboardTab-inner",children:e.icon()}),_E("div",{className:"uppy-DashboardTab-name",children:e.name})]})})),_t(this,"renderAcquirers",e=>{const t=[...e],n=t.splice(e.length-2,e.length);return _E(tE,{children:[t.map(e=>this.renderAcquirer(e)),_E("span",{role:"presentation",style:{"white-space":"nowrap"},children:n.map(e=>this.renderAcquirer(e))})]})}),_t(this,"renderSourcesList",(e,t)=>{const{showNativePhotoCameraButton:n,showNativeVideoCameraButton:r}=this.props;let s=[];const i="myDevice";t||s.push({key:i,elements:this.renderMyDeviceAcquirer()}),n&&s.push({key:"nativePhotoCameraButton",elements:this.renderPhotoCamera()}),r&&s.push({key:"nativePhotoCameraButton",elements:this.renderVideoCamera()}),s.push(...e.map(e=>({key:e.id,elements:this.renderAcquirer(e)})));1===s.length&&s[0].key===i&&(s=[]);const a=[...s],o=a.splice(s.length-2,s.length);return _E(tE,{children:[this.renderDropPasteBrowseTagline(s.length),_E("div",{className:"uppy-Dashboard-AddFiles-list",role:"tablist",children:[a.map(({key:e,elements:t})=>_E(tE,{children:t},e)),_E("span",{role:"presentation",style:{"white-space":"nowrap"},children:o.map(({key:e,elements:t})=>_E(tE,{children:t},e))})]})]})})}[Symbol.for("uppy test: disable unused locale key warning")](){this.props.i18nArray("dropPasteBoth"),this.props.i18nArray("dropPasteFiles"),this.props.i18nArray("dropPasteFolders"),this.props.i18nArray("dropPasteImportBoth"),this.props.i18nArray("dropPasteImportFiles"),this.props.i18nArray("dropPasteImportFolders")}renderPoweredByUppy(){const{i18nArray:e}=this.props,t=_E("span",{children:[_E("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-Dashboard-poweredByIcon",width:"11",height:"11",viewBox:"0 0 11 11",children:_E("path",{d:"M7.365 10.5l-.01-4.045h2.612L5.5.806l-4.467 5.65h2.604l.01 4.044h3.718z",fillRule:"evenodd"})}),_E("span",{className:"uppy-Dashboard-poweredByUppy",children:"Uppy"})]});return _E("a",{tabIndex:-1,href:"https://uppy.io",rel:"noreferrer noopener",target:"_blank",className:"uppy-Dashboard-poweredBy",children:e("poweredBy",{uppy:t})})}render(){const{showNativePhotoCameraButton:e,showNativeVideoCameraButton:t,nativeCameraFacingMode:n}=this.props;return _E("div",{className:"uppy-Dashboard-AddFiles",children:[this.renderHiddenInput(!1,e=>{this.fileInput=e}),this.renderHiddenInput(!0,e=>{this.folderInput=e}),e&&this.renderHiddenCameraInput("photo",n,e=>{this.mobilePhotoFileInput=e}),t&&this.renderHiddenCameraInput("video",n,e=>{this.mobileVideoFileInput=e}),this.renderSourcesList(this.props.acquirers,this.props.disableLocalFiles),_E("div",{className:"uppy-Dashboard-AddFiles-info",children:[this.props.note&&_E("div",{className:"uppy-Dashboard-note",children:this.props.note}),this.props.proudlyDisplayPoweredByUppy&&this.renderPoweredByUppy()]})]})}}const DT=e=>_E("div",{className:vA("uppy-Dashboard-AddFilesPanel",e.className),"data-uppy-panelType":"AddFiles","aria-hidden":!e.showAddFilesPanel,children:[_E("div",{className:"uppy-DashboardContent-bar",children:[_E("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":1,children:e.i18n("addingMoreFiles")}),_E("button",{className:"uppy-DashboardContent-back",type:"button",onClick:()=>e.toggleAddFilesPanel(!1),children:e.i18n("back")})]}),_E(IT,{...e})]});function LT(e){const t=e.files[e.fileCardFor];return _E("div",{className:vA("uppy-DashboardContent-panel",e.className),role:"tabpanel","data-uppy-panelType":"FileEditor",id:"uppy-DashboardContent-panel--editor",children:[_E("div",{className:"uppy-DashboardContent-bar",children:[_E("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":1,children:e.i18nArray("editing",{file:_E("span",{className:"uppy-DashboardContent-titleFile",children:t.meta?t.meta.name:t.name})})}),_E("button",{className:"uppy-DashboardContent-back",type:"button",onClick:()=>{e.uppy.emit("file-editor:cancel",t),e.closeFileEditor()},children:e.i18n("cancel")}),_E("button",{className:"uppy-DashboardContent-save",type:"button",onClick:e.saveFileEditor,children:e.i18n("save")})]}),_E("div",{className:"uppy-DashboardContent-panelBody",children:e.editors.map(t=>e.uppy.getPlugin(t.id).render(e.state))})]})}function FT(e){const t={color:"#838999",icon:_E("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25",children:_E("g",{fill:"#A7AFB7",fillRule:"nonzero",children:[_E("path",{d:"M5.5 22a.5.5 0 0 1-.5-.5v-18a.5.5 0 0 1 .5-.5h10.719a.5.5 0 0 1 .367.16l3.281 3.556a.5.5 0 0 1 .133.339V21.5a.5.5 0 0 1-.5.5h-14zm.5-1h13V7.25L16 4H6v17z"}),_E("path",{d:"M15 4v3a1 1 0 0 0 1 1h3V7h-3V4h-1z"})]})})};if(!e)return t;const n=e.split("/")[0],r=e.split("/")[1];if("text"===n)return{color:"#5a5e69",icon:_E("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25",children:_E("path",{d:"M4.5 7h13a.5.5 0 1 1 0 1h-13a.5.5 0 0 1 0-1zm0 3h15a.5.5 0 1 1 0 1h-15a.5.5 0 1 1 0-1zm0 3h15a.5.5 0 1 1 0 1h-15a.5.5 0 1 1 0-1zm0 3h10a.5.5 0 1 1 0 1h-10a.5.5 0 1 1 0-1z",fill:"#5A5E69",fillRule:"nonzero"})})};if("image"===n)return{color:"#686de0",icon:_E("svg",{"aria-hidden":"true",focusable:"false",width:"25",height:"25",viewBox:"0 0 25 25",children:_E("g",{fill:"#686DE0",fillRule:"evenodd",children:[_E("path",{d:"M5 7v10h15V7H5zm0-1h15a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1z",fillRule:"nonzero"}),_E("path",{d:"M6.35 17.172l4.994-5.026a.5.5 0 0 1 .707 0l2.16 2.16 3.505-3.505a.5.5 0 0 1 .707 0l2.336 2.31-.707.72-1.983-1.97-3.505 3.505a.5.5 0 0 1-.707 0l-2.16-2.159-3.938 3.939-1.409.026z",fillRule:"nonzero"}),_E("circle",{cx:"7.5",cy:"9.5",r:"1.5"})]})})};if("audio"===n)return{color:"#068dbb",icon:_E("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25",children:_E("path",{d:"M9.5 18.64c0 1.14-1.145 2-2.5 2s-2.5-.86-2.5-2c0-1.14 1.145-2 2.5-2 .557 0 1.079.145 1.5.396V7.25a.5.5 0 0 1 .379-.485l9-2.25A.5.5 0 0 1 18.5 5v11.64c0 1.14-1.145 2-2.5 2s-2.5-.86-2.5-2c0-1.14 1.145-2 2.5-2 .557 0 1.079.145 1.5.396V8.67l-8 2v7.97zm8-11v-2l-8 2v2l8-2zM7 19.64c.855 0 1.5-.484 1.5-1s-.645-1-1.5-1-1.5.484-1.5 1 .645 1 1.5 1zm9-2c.855 0 1.5-.484 1.5-1s-.645-1-1.5-1-1.5.484-1.5 1 .645 1 1.5 1z",fill:"#049BCF",fillRule:"nonzero"})})};if("video"===n)return{color:"#19af67",icon:_E("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25",children:_E("path",{d:"M16 11.834l4.486-2.691A1 1 0 0 1 22 10v6a1 1 0 0 1-1.514.857L16 14.167V17a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V9a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v2.834zM15 9H5v8h10V9zm1 4l5 3v-6l-5 3z",fill:"#19AF67",fillRule:"nonzero"})})};if("application"===n&&"pdf"===r)return{color:"#e25149",icon:_E("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25",children:_E("path",{d:"M9.766 8.295c-.691-1.843-.539-3.401.747-3.726 1.643-.414 2.505.938 2.39 3.299-.039.79-.194 1.662-.537 3.148.324.49.66.967 1.055 1.51.17.231.382.488.629.757 1.866-.128 3.653.114 4.918.655 1.487.635 2.192 1.685 1.614 2.84-.566 1.133-1.839 1.084-3.416.249-1.141-.604-2.457-1.634-3.51-2.707a13.467 13.467 0 0 0-2.238.426c-1.392 4.051-4.534 6.453-5.707 4.572-.986-1.58 1.38-4.206 4.914-5.375.097-.322.185-.656.264-1.001.08-.353.306-1.31.407-1.737-.678-1.059-1.2-2.031-1.53-2.91zm2.098 4.87c-.033.144-.068.287-.104.427l.033-.01-.012.038a14.065 14.065 0 0 1 1.02-.197l-.032-.033.052-.004a7.902 7.902 0 0 1-.208-.271c-.197-.27-.38-.526-.555-.775l-.006.028-.002-.003c-.076.323-.148.632-.186.8zm5.77 2.978c1.143.605 1.832.632 2.054.187.26-.519-.087-1.034-1.113-1.473-.911-.39-2.175-.608-3.55-.608.845.766 1.787 1.459 2.609 1.894zM6.559 18.789c.14.223.693.16 1.425-.413.827-.648 1.61-1.747 2.208-3.206-2.563 1.064-4.102 2.867-3.633 3.62zm5.345-10.97c.088-1.793-.351-2.48-1.146-2.28-.473.119-.564 1.05-.056 2.405.213.566.52 1.188.908 1.859.18-.858.268-1.453.294-1.984z",fill:"#E2514A",fillRule:"nonzero"})})};return"application"===n&&-1!==["zip","x-7z-compressed","x-zip-compressed","x-rar-compressed","x-tar","x-gzip","x-apple-diskimage"].indexOf(r)?{color:"#00C469",icon:_E("svg",{"aria-hidden":"true",focusable:"false",width:"25",height:"25",viewBox:"0 0 25 25",children:_E("path",{d:"M10.45 2.05h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5V2.55a.5.5 0 0 1 .5-.5zm2.05 1.024h1.05a.5.5 0 0 1 .5.5V3.6a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5v-.001zM10.45 0h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5V.5a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-2.05 3.074h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-2.05 1.024h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm-2.05 1.025h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-1.656 3.074l-.82 5.946c.52.302 1.174.458 1.976.458.803 0 1.455-.156 1.975-.458l-.82-5.946h-2.311zm0-1.025h2.312c.512 0 .946.378 1.015.885l.82 5.946c.056.412-.142.817-.501 1.026-.686.398-1.515.597-2.49.597-.974 0-1.804-.199-2.49-.597a1.025 1.025 0 0 1-.5-1.026l.819-5.946c.07-.507.503-.885 1.015-.885zm.545 6.6a.5.5 0 0 1-.397-.561l.143-.999a.5.5 0 0 1 .495-.429h.74a.5.5 0 0 1 .495.43l.143.998a.5.5 0 0 1-.397.561c-.404.08-.819.08-1.222 0z",fill:"#00C469",fillRule:"nonzero"})})}:t}function zT(e){const{tagName:t}=e.target;"INPUT"!==t&&"TEXTAREA"!==t?(e.preventDefault(),e.stopPropagation()):e.stopPropagation()}function BT(e){const{file:t}=e;if(t.preview)return _E("img",{draggable:!1,className:"uppy-Dashboard-Item-previewImg",alt:t.name,src:t.preview});const{color:n,icon:r}=FT(t.type);return _E("div",{className:"uppy-Dashboard-Item-previewIconWrap",children:[_E("span",{className:"uppy-Dashboard-Item-previewIcon",style:{color:n},children:r}),_E("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-Dashboard-Item-previewIconBg",width:"58",height:"76",viewBox:"0 0 58 76",children:_E("rect",{fill:"#FFF",width:"58",height:"76",rx:"3",fillRule:"evenodd"})})]})}function UT(e){const{computedMetaFields:t,requiredMetaFields:n,updateMeta:r,form:s,formState:i}=e,a={text:"uppy-u-reset uppy-c-textInput uppy-Dashboard-FileCard-input"};return t.map(e=>{const t=`uppy-Dashboard-FileCard-input-${e.id}`,o=n.includes(e.id);return _E("fieldset",{className:"uppy-Dashboard-FileCard-fieldset",children:[_E("label",{className:"uppy-Dashboard-FileCard-label",htmlFor:t,children:e.name}),void 0!==e.render?e.render({value:i[e.id],onChange:t=>r(t,e.id),fieldCSSClasses:a,required:o,form:s.id},QC):_E("input",{className:a.text,id:t,form:s.id,type:e.type||"text",required:o,value:i[e.id],placeholder:e.placeholder,onInput:t=>r(t.target.value,e.id),"data-uppy-super-focusable":!0})]},e.id)})}function VT(e){const{files:t,fileCardFor:n,toggleFileCard:r,saveFileCard:s,metaFields:i,requiredMetaFields:a,openFileEditor:o,i18n:l,i18nArray:c,className:d,canEditFile:u}=e,h=t[n],p=("function"==typeof i?i(t[n]):i)??[],m=u(h),f={};p.forEach(e=>{f[e.id]=h.meta[e.id]??""});const[g,x]=zE(f),v=HE(e=>{e.preventDefault(),s(g,n)},[s,g,n]),y=()=>{r(!1)},[b]=zE(()=>{const e=document.createElement("form");return e.setAttribute("tabindex","-1"),e.id=cA(),e});return BE(()=>(document.body.appendChild(b),b.addEventListener("submit",v),()=>{b.removeEventListener("submit",v),b.parentNode&&document.body.removeChild(b)}),[b,v]),_E("div",{className:vA("uppy-Dashboard-FileCard",d),"data-uppy-panelType":"FileCard",onDragOver:zT,onDragLeave:zT,onDrop:zT,onPaste:zT,children:[_E("div",{className:"uppy-DashboardContent-bar",children:[_E("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":1,children:c("editing",{file:_E("span",{className:"uppy-DashboardContent-titleFile",children:h.meta?h.meta.name:h.name})})}),_E("button",{className:"uppy-DashboardContent-back",type:"button",form:b.id,title:l("finishEditingFile"),onClick:y,children:l("cancel")})]}),_E("div",{className:"uppy-Dashboard-FileCard-inner",children:[_E("div",{className:"uppy-Dashboard-FileCard-preview",style:{backgroundColor:FT(h.type).color},children:[_E(BT,{file:h}),m&&_E("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-Dashboard-FileCard-edit",onClick:e=>{v(e),o(h)},children:l("editImage")})]}),_E("div",{className:"uppy-Dashboard-FileCard-info",children:_E(UT,{computedMetaFields:p,requiredMetaFields:a,updateMeta:(e,t)=>{x({...g,[t]:e})},form:b,formState:g})}),_E("div",{className:"uppy-Dashboard-FileCard-actions",children:[_E("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Dashboard-FileCard-actionsBtn",type:"submit",form:b.id,children:l("saveChanges")}),_E("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-link uppy-Dashboard-FileCard-actionsBtn",type:"button",onClick:y,form:b.id,children:l("cancel")})]})]})]})}function HT({file:e,uploadInProgressOrComplete:t,metaFields:n,canEditFile:r,i18n:s,onClick:i}){return!t&&n&&n.length>0||!t&&r(e)?_E("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-action uppy-Dashboard-Item-action--edit",type:"button","aria-label":s("editFileWithFilename",{file:e.meta.name}),title:s("editFileWithFilename",{file:e.meta.name}),onClick:()=>i(),children:_E("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"14",height:"14",viewBox:"0 0 14 14",children:_E("g",{fillRule:"evenodd",children:[_E("path",{d:"M1.5 10.793h2.793A1 1 0 0 0 5 10.5L11.5 4a1 1 0 0 0 0-1.414L9.707.793a1 1 0 0 0-1.414 0l-6.5 6.5A1 1 0 0 0 1.5 8v2.793zm1-1V8L9 1.5l1.793 1.793-6.5 6.5H2.5z",fillRule:"nonzero"}),_E("rect",{x:"1",y:"12.293",width:"11",height:"1",rx:".5"}),_E("path",{fillRule:"nonzero",d:"M6.793 2.5L9.5 5.207l.707-.707L7.5 1.793z"})]})})}):null}function WT({i18n:e,onClick:t,file:n}){return _E("button",{className:"uppy-u-reset uppy-Dashboard-Item-action uppy-Dashboard-Item-action--remove",type:"button","aria-label":e("removeFile",{file:n.meta.name}),title:e("removeFile",{file:n.meta.name}),onClick:()=>t(),children:_E("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"18",height:"18",viewBox:"0 0 18 18",children:[_E("path",{d:"M9 0C4.034 0 0 4.034 0 9s4.034 9 9 9 9-4.034 9-9-4.034-9-9-9z"}),_E("path",{fill:"#FFF",d:"M13 12.222l-.778.778L9 9.778 5.778 13 5 12.222 8.222 9 5 5.778 5.778 5 9 8.222 12.222 5l.778.778L9.778 9z"})]})})}function $T({file:e,uppy:t,i18n:n}){const r=r=>{(function(e,t="Copy the URL below"){return new Promise(n=>{const r=document.createElement("textarea");r.setAttribute("style",{position:"fixed",top:0,left:0,width:"2em",height:"2em",padding:0,border:"none",outline:"none",boxShadow:"none",background:"transparent"}),r.value=e,document.body.appendChild(r),r.select();const s=()=>{document.body.removeChild(r),window.prompt(t,e),n()};try{return document.execCommand("copy")?(document.body.removeChild(r),n()):s()}catch(i){return document.body.removeChild(r),s()}})})(e.uploadURL,n("copyLinkToClipboardFallback")).then(()=>{t.log("Link copied to clipboard."),t.info(n("copyLinkToClipboardSuccess"),"info",3e3)}).catch(t.log).then(()=>r.target.focus({preventScroll:!0}))};return _E("button",{className:"uppy-u-reset uppy-Dashboard-Item-action uppy-Dashboard-Item-action--copyLink",type:"button","aria-label":n("copyLink"),title:n("copyLink"),onClick:e=>r(e),children:_E("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"14",height:"14",viewBox:"0 0 14 12",children:_E("path",{d:"M7.94 7.703a2.613 2.613 0 0 1-.626 2.681l-.852.851a2.597 2.597 0 0 1-1.849.766A2.616 2.616 0 0 1 2.764 7.54l.852-.852a2.596 2.596 0 0 1 2.69-.625L5.267 7.099a1.44 1.44 0 0 0-.833.407l-.852.851a1.458 1.458 0 0 0 1.03 2.486c.39 0 .755-.152 1.03-.426l.852-.852c.231-.231.363-.522.406-.824l1.04-1.038zm4.295-5.937A2.596 2.596 0 0 0 10.387 1c-.698 0-1.355.272-1.849.766l-.852.851a2.614 2.614 0 0 0-.624 2.688l1.036-1.036c.041-.304.173-.6.407-.833l.852-.852c.275-.275.64-.426 1.03-.426a1.458 1.458 0 0 1 1.03 2.486l-.852.851a1.442 1.442 0 0 1-.824.406l-1.04 1.04a2.596 2.596 0 0 0 2.683-.628l.851-.85a2.616 2.616 0 0 0 0-3.697zm-6.88 6.883a.577.577 0 0 0 .82 0l3.474-3.474a.579.579 0 1 0-.819-.82L5.355 7.83a.579.579 0 0 0 0 .819z"})})})}function GT(e){const{uppy:t,file:n,uploadInProgressOrComplete:r,canEditFile:s,metaFields:i,showLinkToFileUploadResult:a,showRemoveButton:o,i18n:l,toggleFileCard:c,openFileEditor:d}=e;return _E("div",{className:"uppy-Dashboard-Item-actionWrapper",children:[_E(HT,{i18n:l,file:n,uploadInProgressOrComplete:r,canEditFile:s,metaFields:i,onClick:()=>{i&&i.length>0?c(!0,n.id):d(n)}}),a&&n.uploadURL?_E($T,{file:n,uppy:t,i18n:l}):null,o?_E(WT,{i18n:l,file:n,onClick:()=>t.removeFile(n.id)}):null]})}function qT(e){const{file:t,toggleFileCard:n,i18n:r,metaFields:s}=e,{missingRequiredMetaFields:i}=t;if(!i?.length)return null;const a=i.map(e=>((e,t)=>("function"==typeof t?t():t).filter(t=>t.id===e)[0].name)(e,s)).join(", ");return _E("div",{className:"uppy-Dashboard-Item-errorMessage",children:[r("missingRequiredMetaFields",{smart_count:i.length,fields:a})," ",_E("button",{type:"button",class:"uppy-u-reset uppy-Dashboard-Item-errorMessageBtn",onClick:()=>n(!0,t.id),children:r("editFile")})]})}const XT=e=>{const{author:t,name:n}=e.file.meta;return _E("div",{className:"uppy-Dashboard-Item-name",title:n,children:RC(n,e.isSingleFile&&e.containerHeight>=350?90:e.containerWidth<=352?35:e.containerWidth<=576?60:t?20:30)})},KT=e=>{const{author:t}=e.file.meta,n=e.file.remote?.providerName;return t?_E("div",{className:"uppy-Dashboard-Item-author",children:[_E("a",{href:`${t.url}?utm_source=Companion&utm_medium=referral`,target:"_blank",rel:"noopener noreferrer",children:RC(t.name,13)}),n?_E(tE,{children:["  ",n,"  "]}):null]}):null},YT=e=>e.file.size&&_E("div",{className:"uppy-Dashboard-Item-statusSize",children:sk(e.file.size)}),ZT=e=>e.file.isGhost&&_E("span",{children:["  ",_E("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-reSelect",type:"button",onClick:()=>e.toggleAddFilesPanel(!0),children:e.i18n("reSelect")})]}),JT=({file:e,onClick:t})=>e.error?_E("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-errorDetails","aria-label":e.error,"data-microtip-position":"bottom","data-microtip-size":"medium",onClick:t,type:"button",children:"?"}):null;function QT(e){const{file:t,i18n:n,toggleFileCard:r,metaFields:s,toggleAddFilesPanel:i,isSingleFile:a,containerHeight:o,containerWidth:l}=e;return _E("div",{className:"uppy-Dashboard-Item-fileInfo","data-uppy-file-source":t.source,children:[_E("div",{className:"uppy-Dashboard-Item-fileName",children:[XT({file:t,isSingleFile:a,containerHeight:o,containerWidth:l}),_E(JT,{file:t,onClick:()=>alert(t.error)})]}),_E("div",{className:"uppy-Dashboard-Item-status",children:[KT({file:t}),YT({file:t}),ZT({file:t,toggleAddFilesPanel:i,i18n:n})]}),_E(qT,{file:t,i18n:n,toggleFileCard:r,metaFields:s})]})}function eP(e){const{file:t,i18n:n,toggleFileCard:r,metaFields:s,showLinkToFileUploadResult:i}=e;return _E("div",{className:"uppy-Dashboard-Item-previewInnerWrap",style:{backgroundColor:t.preview?"rgba(255, 255, 255, 0.5)":FT(t.type).color},children:[i&&t.uploadURL&&_E("a",{className:"uppy-Dashboard-Item-previewLink",href:t.uploadURL,rel:"noreferrer noopener",target:"_blank","aria-label":t.meta.name,children:_E("span",{hidden:!0,children:t.meta.name})}),_E(BT,{file:t}),_E(qT,{file:t,i18n:n,toggleFileCard:r,metaFields:s})]})}function tP(e){return e.isUploaded?e.i18n("uploadComplete"):e.error?e.i18n("retryUpload"):e.resumableUploads?e.file.isPaused?e.i18n("resumeUpload"):e.i18n("pauseUpload"):e.individualCancellation?e.i18n("cancelUpload"):""}function nP(e){return _E("div",{className:"uppy-Dashboard-Item-progress",children:_E("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-progressIndicator",type:"button","aria-label":tP(e),title:tP(e),onClick:()=>function(e){e.isUploaded||(!e.error||e.hideRetryButton?e.resumableUploads&&!e.hidePauseResumeButton?e.uppy.pauseResume(e.file.id):e.individualCancellation&&!e.hideCancelButton&&e.uppy.removeFile(e.file.id):e.uppy.retryUpload(e.file.id))}(e),children:e.children})})}function rP({children:e}){return _E("svg",{"aria-hidden":"true",focusable:"false",width:"70",height:"70",viewBox:"0 0 36 36",className:"uppy-c-icon uppy-Dashboard-Item-progressIcon--circle",children:e})}function sP({progress:e}){const t=2*Math.PI*15;return _E("g",{children:[_E("circle",{className:"uppy-Dashboard-Item-progressIcon--bg",r:"15",cx:"18",cy:"18","stroke-width":"2",fill:"none"}),_E("circle",{className:"uppy-Dashboard-Item-progressIcon--progress",r:"15",cx:"18",cy:"18",transform:"rotate(-90, 18, 18)",fill:"none","stroke-width":"2","stroke-dasharray":t,"stroke-dashoffset":t-t/100*e})]})}function iP(e){return e.file.progress.uploadStarted?void 0===e.file.progress.percentage?null:e.isUploaded?_E("div",{className:"uppy-Dashboard-Item-progress",children:_E("div",{className:"uppy-Dashboard-Item-progressIndicator",children:_E(rP,{children:[_E("circle",{r:"15",cx:"18",cy:"18",fill:"#1bb240"}),_E("polygon",{className:"uppy-Dashboard-Item-progressIcon--check",transform:"translate(2, 3)",points:"14 22.5 7 15.2457065 8.99985857 13.1732815 14 18.3547104 22.9729883 9 25 11.1005634"})]})})}):e.recoveredState?null:e.error&&!e.hideRetryButton?_E(nP,{...e,children:_E("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-Dashboard-Item-progressIcon--retry",width:"28",height:"31",viewBox:"0 0 16 19",children:[_E("path",{d:"M16 11a8 8 0 1 1-8-8v2a6 6 0 1 0 6 6h2z"}),_E("path",{d:"M7.9 3H10v2H7.9z"}),_E("path",{d:"M8.536.5l3.535 3.536-1.414 1.414L7.12 1.914z"}),_E("path",{d:"M10.657 2.621l1.414 1.415L8.536 7.57 7.12 6.157z"})]})}):e.resumableUploads&&!e.hidePauseResumeButton?_E(nP,{...e,children:_E(rP,{children:[_E(sP,{progress:e.file.progress.percentage}),e.file.isPaused?_E("polygon",{className:"uppy-Dashboard-Item-progressIcon--play",transform:"translate(3, 3)",points:"12 20 12 10 20 15"}):_E("g",{className:"uppy-Dashboard-Item-progressIcon--pause",transform:"translate(14.5, 13)",children:[_E("rect",{x:"0",y:"0",width:"2",height:"10",rx:"0"}),_E("rect",{x:"5",y:"0",width:"2",height:"10",rx:"0"})]})]})}):e.resumableUploads||!e.individualCancellation||e.hideCancelButton?_E("div",{className:"uppy-Dashboard-Item-progress",children:_E("div",{className:"uppy-Dashboard-Item-progressIndicator",children:_E(rP,{children:_E(sP,{progress:e.file.progress.percentage})})})}):_E(nP,{...e,children:_E(rP,{children:[_E(sP,{progress:e.file.progress.percentage}),_E("polygon",{className:"cancel",transform:"translate(2, 2)",points:"19.8856516 11.0625 16 14.9481516 12.1019737 11.0625 11.0625 12.1143484 14.9481516 16 11.0625 19.8980263 12.1019737 20.9375 16 17.0518484 19.8856516 20.9375 20.9375 19.8980263 17.0518484 16 20.9375 12"})]})}):null}class aP extends nE{componentDidMount(){const{file:e}=this.props;e.preview||this.props.handleRequestThumbnail(e)}shouldComponentUpdate(e){return!function(e,t){if(e===t)return!0;if(!e||!t)return!1;const n=Object.keys(e),r=Object.keys(t),s=n.length;if(r.length!==s)return!1;for(let i=0;i<s;i++){const r=n[i];if(e[r]!==t[r]||!Object.prototype.hasOwnProperty.call(t,r))return!1}return!0}(this.props,e)}componentDidUpdate(){const{file:e}=this.props;e.preview||this.props.handleRequestThumbnail(e)}componentWillUnmount(){const{file:e}=this.props;e.preview||this.props.handleCancelThumbnail(e)}render(){const{file:e}=this.props,t=e.progress.preprocess||e.progress.postprocess,n=!!e.progress.uploadComplete&&!t&&!e.error,r=!!e.progress.uploadStarted||!!t,s=e.progress.uploadStarted&&!e.progress.uploadComplete||t,i=e.error||!1,{isGhost:a}=e;let o=(this.props.individualCancellation||!s)&&!n;n&&this.props.showRemoveButtonAfterComplete&&(o=!0);return _E("div",{className:vA({"uppy-Dashboard-Item":!0,"is-inprogress":s&&!this.props.recoveredState,"is-processing":t,"is-complete":n,"is-error":!!i,"is-resumable":this.props.resumableUploads,"is-noIndividualCancellation":!this.props.individualCancellation,"is-ghost":a}),id:`uppy_${e.id}`,role:this.props.role,children:[_E("div",{className:"uppy-Dashboard-Item-preview",children:[_E(eP,{file:e,showLinkToFileUploadResult:this.props.showLinkToFileUploadResult,i18n:this.props.i18n,toggleFileCard:this.props.toggleFileCard,metaFields:this.props.metaFields}),_E(iP,{uppy:this.props.uppy,file:e,error:i,isUploaded:n,hideRetryButton:this.props.hideRetryButton,hideCancelButton:this.props.hideCancelButton,hidePauseResumeButton:this.props.hidePauseResumeButton,recoveredState:this.props.recoveredState,resumableUploads:this.props.resumableUploads,individualCancellation:this.props.individualCancellation,i18n:this.props.i18n})]}),_E("div",{className:"uppy-Dashboard-Item-fileInfoAndButtons",children:[_E(QT,{file:e,containerWidth:this.props.containerWidth,containerHeight:this.props.containerHeight,i18n:this.props.i18n,toggleAddFilesPanel:this.props.toggleAddFilesPanel,toggleFileCard:this.props.toggleFileCard,metaFields:this.props.metaFields,isSingleFile:this.props.isSingleFile}),_E(GT,{file:e,metaFields:this.props.metaFields,showLinkToFileUploadResult:this.props.showLinkToFileUploadResult,showRemoveButton:o,canEditFile:this.props.canEditFile,uploadInProgressOrComplete:r,toggleFileCard:this.props.toggleFileCard,openFileEditor:this.props.openFileEditor,uppy:this.props.uppy,i18n:this.props.i18n})]})]})}}function oP({id:e,i18n:t,uppy:n,files:r,resumableUploads:s,hideRetryButton:i,hidePauseResumeButton:a,hideCancelButton:o,showLinkToFileUploadResult:l,showRemoveButtonAfterComplete:c,metaFields:d,isSingleFile:u,toggleFileCard:h,handleRequestThumbnail:p,handleCancelThumbnail:m,recoveredState:f,individualCancellation:g,itemsPerRow:x,openFileEditor:v,canEditFile:y,toggleAddFilesPanel:b,containerWidth:w,containerHeight:j}){const N=1===x?71:200,_=VE(()=>{const e=Object.keys(r);return f&&e.sort((e,t)=>Number(r[t].isGhost)-Number(r[e].isGhost)),function(e,t){const n=[];let r=[];return e.forEach(e=>{r.length<t?r.push(e):(n.push(r),r=[e])}),r.length&&n.push(r),n}(e,x)},[r,x,f]),S=x=>_E("div",{class:"uppy-Dashboard-filesInner",role:"presentation",children:x.map(x=>_E(aP,{uppy:n,id:e,i18n:t,resumableUploads:s,individualCancellation:g,hideRetryButton:i,hidePauseResumeButton:a,hideCancelButton:o,showLinkToFileUploadResult:l,showRemoveButtonAfterComplete:c,metaFields:d,recoveredState:f,isSingleFile:u,containerWidth:w,containerHeight:j,toggleFileCard:h,handleRequestThumbnail:p,handleCancelThumbnail:m,role:"listitem",openFileEditor:v,canEditFile:y,toggleAddFilesPanel:b,file:r[x]},x))},x[0]);return u?_E("div",{class:"uppy-Dashboard-files",children:S(_[0])}):_E(QE,{class:"uppy-Dashboard-files",role:"list",data:_,renderRow:S,rowHeight:N})}class lP extends nE{constructor(){super(...arguments),_t(this,"ref",{current:null})}componentWillEnter(e){this.ref.current.style.opacity="1",this.ref.current.style.transform="none",setTimeout(e,300)}componentWillLeave(e){this.ref.current.style.opacity="0",this.ref.current.style.transform="translateY(350%)",setTimeout(e,300)}render(){const{children:e}=this.props;return _E("div",{className:"uppy-Informer-animated",ref:this.ref,children:e})}}function cP(e,t){return e?.key??t}function dP(e){const t={};for(let n=0;n<e.length;n++)if(null!=e[n]){t[cP(e[n],n.toString(36))]=e[n]}return t}function uP(e,t){e=e||{},t=t||{};const n=n=>Object.hasOwn(t,n)?t[n]:e[n],r={};let s=[];for(const a in e)Object.hasOwn(t,a)?s.length&&(r[a]=s,s=[]):s.push(a);const i={};for(const a in t){if(Object.hasOwn(r,a))for(let e=0;e<r[a].length;e++){const t=r[a][e];i[r[a][e]]=n(t)}i[a]=n(a)}for(let a=0;a<s.length;a++)i[s[a]]=n(s[a]);return i}class hP extends nE{constructor(e,t){super(e,t),this.refs={},this.state={children:dP(cE(cE(this.props.children))||[])},this.performAppear=this.performAppear.bind(this),this.performEnter=this.performEnter.bind(this),this.performLeave=this.performLeave.bind(this)}componentWillMount(){this.currentlyTransitioningKeys={},this.keysToAbortLeave=[],this.keysToEnter=[],this.keysToLeave=[]}componentDidMount(){const e=this.state.children;for(const t in e)e[t]&&this.performAppear(t)}componentWillReceiveProps(e){const t=dP(cE(e.children)||[]),n=this.state.children;let r;for(r in this.setState(e=>({children:uP(e.children,t)})),t)if(Object.hasOwn(t,r)){const e=n&&Object.hasOwn(n,r);t[r]&&e&&this.currentlyTransitioningKeys[r]?(this.keysToEnter.push(r),this.keysToAbortLeave.push(r)):!t[r]||e||this.currentlyTransitioningKeys[r]||this.keysToEnter.push(r)}for(r in n)if(Object.hasOwn(n,r)){const e=t&&Object.hasOwn(t,r);!n[r]||e||this.currentlyTransitioningKeys[r]||this.keysToLeave.push(r)}}componentDidUpdate(){const{keysToEnter:e}=this;this.keysToEnter=[],e.forEach(this.performEnter);const{keysToLeave:t}=this;this.keysToLeave=[],t.forEach(this.performLeave)}_finishAbort(e){const t=this.keysToAbortLeave.indexOf(e);-1!==t&&this.keysToAbortLeave.splice(t,1)}performAppear(e){this.currentlyTransitioningKeys[e]=!0;const t=this.refs[e];t?.componentWillAppear?t.componentWillAppear(this._handleDoneAppearing.bind(this,e)):this._handleDoneAppearing(e)}_handleDoneAppearing(e){const t=this.refs[e];t?.componentDidAppear&&t.componentDidAppear(),delete this.currentlyTransitioningKeys[e],this._finishAbort(e);const n=dP(cE(this.props.children)||[]);n&&Object.hasOwn(n,e)||this.performLeave(e)}performEnter(e){this.currentlyTransitioningKeys[e]=!0;const t=this.refs[e];t?.componentWillEnter?t.componentWillEnter(this._handleDoneEntering.bind(this,e)):this._handleDoneEntering(e)}_handleDoneEntering(e){const t=this.refs[e];t?.componentDidEnter&&t.componentDidEnter(),delete this.currentlyTransitioningKeys[e],this._finishAbort(e);const n=dP(cE(this.props.children)||[]);n&&Object.hasOwn(n,e)||this.performLeave(e)}performLeave(e){if(-1!==this.keysToAbortLeave.indexOf(e))return;this.currentlyTransitioningKeys[e]=!0;const t=this.refs[e];t?.componentWillLeave?t.componentWillLeave(this._handleDoneLeaving.bind(this,e)):this._handleDoneLeaving(e)}_handleDoneLeaving(e){if(-1!==this.keysToAbortLeave.indexOf(e))return;const t=this.refs[e];t?.componentDidLeave&&t.componentDidLeave(),delete this.currentlyTransitioningKeys[e];const n=dP(cE(this.props.children)||[]);if(n&&Object.hasOwn(n,e))this.performEnter(e);else{const t=(r={},s=this.state.children,Object.assign(r,s));delete t[e],this.setState({children:t})}var r,s}render({childFactory:e,transitionLeave:t,transitionName:n,transitionAppear:r,transitionEnter:s,transitionLeaveTimeout:i,transitionEnterTimeout:a,transitionAppearTimeout:o,component:l,...c},{children:d}){const u=Object.entries(d).map(([t,n])=>{if(!n)return;const r=function(e,t){const n=e._ptgLinkedRefs||(e._ptgLinkedRefs={});return n[t]||(n[t]=n=>{e.refs[t]=n})}(this,t);return jE(e(n),{ref:r,key:t})}).filter(Boolean);return QC(l,c,u)}}hP.defaultProps={component:"span",childFactory:e=>e};class pP extends nE{render(){const{info:e}=this.props.uppy.getState();return _E("div",{className:"uppy uppy-Informer",children:_E(hP,{children:e.map(e=>_E(lP,{children:_E("p",{role:"alert",children:[e.message," ",e.details&&_E("span",{"aria-label":e.details,"data-microtip-position":"top-left","data-microtip-size":"medium",role:"tooltip",onClick:()=>alert(`${e.message} \n\n ${e.details}`),children:"?"})]})},e.message))})})}}function mP({activePickerPanel:e,className:t,hideAllPanels:n,i18n:r,state:s,uppy:i}){const a=UE(null);return _E("div",{className:vA("uppy-DashboardContent-panel",t),role:"tabpanel","data-uppy-panelType":"PickerPanel",id:`uppy-DashboardContent-panel--${e.id}`,onDragOver:zT,onDragLeave:zT,onDrop:zT,onPaste:zT,children:[_E("div",{className:"uppy-DashboardContent-bar",children:[_E("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":1,children:r("importFrom",{name:e.name})}),_E("button",{className:"uppy-DashboardContent-back",type:"button",onClick:n,children:r("cancel")})]}),_E("div",{ref:a,className:"uppy-DashboardContent-panelBody",children:i.getPlugin(e.id).render(s,a.current)})]})}const fP="error",gP="waiting",xP="preprocessing",vP="uploading",yP="postprocessing",bP="complete",wP="paused";function jP({files:e,i18n:t,isAllComplete:n,isAllErrored:r,isAllPaused:s,inProgressNotPausedFiles:i,newFiles:a,processingFiles:o}){const l=function(e,t,n,r={}){if(e)return fP;if(t)return bP;if(n)return wP;let s=gP;const i=Object.keys(r);for(let a=0;a<i.length;a++){const{progress:e}=r[i[a]];if(e.uploadStarted&&!e.uploadComplete)return vP;e.preprocess&&s!==vP&&(s=xP),e.postprocess&&s!==vP&&s!==xP&&(s=yP)}return s}(r,n,s,e);switch(l){case"uploading":return t("uploadingXFiles",{smart_count:i.length});case"preprocessing":case"postprocessing":return t("processingXFiles",{smart_count:o.length});case"paused":return t("uploadPaused");case"waiting":return t("xFilesSelected",{smart_count:a.length});case"complete":return t("uploadComplete");case"error":return t("error")}}function NP(e){const{i18n:t,isAllComplete:n,hideCancelButton:r,maxNumberOfFiles:s,toggleAddFilesPanel:i,uppy:a}=e;let{allowNewUpload:o}=e;return o&&s&&(o=e.totalFileCount<e.maxNumberOfFiles),_E("div",{className:"uppy-DashboardContent-bar",children:[n||r?_E("div",{}):_E("button",{className:"uppy-DashboardContent-back",type:"button",onClick:()=>a.cancelAll(),children:t("cancel")}),_E("div",{className:"uppy-DashboardContent-title",children:_E(jP,{...e})}),o?_E("button",{className:"uppy-DashboardContent-addMore",type:"button","aria-label":t("addMoreFiles"),title:t("addMoreFiles"),onClick:()=>i(!0),children:[_E("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"15",height:"15",viewBox:"0 0 15 15",children:_E("path",{d:"M8 6.5h6a.5.5 0 0 1 .5.5v.5a.5.5 0 0 1-.5.5H8v6a.5.5 0 0 1-.5.5H7a.5.5 0 0 1-.5-.5V8h-6a.5.5 0 0 1-.5-.5V7a.5.5 0 0 1 .5-.5h6v-6A.5.5 0 0 1 7 0h.5a.5.5 0 0 1 .5.5v6z"})}),_E("span",{className:"uppy-DashboardContent-addMoreCaption",children:t("addMore")})]}):_E("div",{})]})}const _P="uppy-transition-slideDownUp";function SP({children:e}){const[t,n]=zE(null),[r,s]=zE(""),i=UE(),a=UE(),o=UE(),l=HE(()=>{s(`${_P}-enter`),cancelAnimationFrame(o.current),clearTimeout(a.current),a.current=void 0,o.current=requestAnimationFrame(()=>{s(`${_P}-enter ${_P}-enter-active`),i.current=setTimeout(()=>{s("")},250)})},[]),c=HE(()=>{s(`${_P}-leave`),cancelAnimationFrame(o.current),clearTimeout(i.current),i.current=void 0,o.current=requestAnimationFrame(()=>{s(`${_P}-leave ${_P}-leave-active`),a.current=setTimeout(()=>{n(null),s("")},250)})},[]);return BE(()=>{const r=cE(e)[0];t!==r&&(r&&!t?l():!t||r||a.current||c(),n(r))},[e,t,l,c]),BE(()=>()=>{clearTimeout(i.current),clearTimeout(a.current),cancelAnimationFrame(o.current)},[]),t?jE(t,{className:vA(r,t.props.className)}):null}const MP={STATE_ERROR:"error",STATE_WAITING:"waiting",STATE_PREPROCESSING:"preprocessing",STATE_UPLOADING:"uploading",STATE_POSTPROCESSING:"postprocessing",STATE_COMPLETE:"complete"};function CP(e){const{newFiles:t,isUploadStarted:n,recoveredState:r,i18n:s,uploadState:i,isSomeGhost:a,startUpload:o}=e,l=vA("uppy-u-reset","uppy-c-btn","uppy-StatusBar-actionBtn","uppy-StatusBar-actionBtn--upload",{"uppy-c-btn-primary":i===MP.STATE_WAITING},{"uppy-StatusBar-actionBtn--disabled":a}),c=s(t&&n&&!r?"uploadXNewFiles":"uploadXFiles",{smart_count:t});return _E("button",{type:"button",className:l,"aria-label":s("uploadXFiles",{smart_count:t}),onClick:o,disabled:a,"data-uppy-super-focusable":!0,children:c})}function EP(e){const{i18n:t,uppy:n}=e;return _E("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-StatusBar-actionBtn uppy-StatusBar-actionBtn--retry","aria-label":t("retryUpload"),onClick:()=>n.retryAll().catch(()=>{}),"data-uppy-super-focusable":!0,"data-cy":"retry",children:[_E("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"8",height:"10",viewBox:"0 0 8 10",children:_E("path",{d:"M4 2.408a2.75 2.75 0 1 0 2.75 2.75.626.626 0 0 1 1.25.018v.023a4 4 0 1 1-4-4.041V.25a.25.25 0 0 1 .389-.208l2.299 1.533a.25.25 0 0 1 0 .416l-2.3 1.533A.25.25 0 0 1 4 3.316v-.908z"})}),t("retry")]})}function kP(e){const{i18n:t,uppy:n}=e;return _E("button",{type:"button",className:"uppy-u-reset uppy-StatusBar-actionCircleBtn",title:t("cancel"),"aria-label":t("cancel"),onClick:()=>n.cancelAll(),"data-cy":"cancel","data-uppy-super-focusable":!0,children:_E("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"16",height:"16",viewBox:"0 0 16 16",children:_E("g",{fill:"none",fillRule:"evenodd",children:[_E("circle",{fill:"#888",cx:"8",cy:"8",r:"8"}),_E("path",{fill:"#FFF",d:"M9.283 8l2.567 2.567-1.283 1.283L8 9.283 5.433 11.85 4.15 10.567 6.717 8 4.15 5.433 5.433 4.15 8 6.717l2.567-2.567 1.283 1.283z"})]})})})}function AP(e){const{isAllPaused:t,i18n:n,isAllComplete:r,resumableUploads:s,uppy:i}=e,a=n(t?"resume":"pause");return _E("button",{title:a,"aria-label":a,className:"uppy-u-reset uppy-StatusBar-actionCircleBtn",type:"button",onClick:function(){r||(s?t?i.resumeAll():i.pauseAll():i.cancelAll())},"data-cy":"togglePauseResume","data-uppy-super-focusable":!0,children:_E("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"16",height:"16",viewBox:"0 0 16 16",children:_E("g",{fill:"none",fillRule:"evenodd",children:[_E("circle",{fill:"#888",cx:"8",cy:"8",r:"8"}),_E("path",{fill:"#FFF",d:t?"M6 4.25L11.5 8 6 11.75z":"M5 4.5h2v7H5v-7zm4 0h2v7H9v-7z"})]})})})}function TP(e){const{i18n:t,doneButtonHandler:n}=e;return _E("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-StatusBar-actionBtn uppy-StatusBar-actionBtn--done",onClick:n,"data-uppy-super-focusable":!0,children:t("done")})}function PP(){return _E("svg",{className:"uppy-StatusBar-spinner","aria-hidden":"true",focusable:"false",width:"14",height:"14",children:_E("path",{d:"M13.983 6.547c-.12-2.509-1.64-4.893-3.939-5.936-2.48-1.127-5.488-.656-7.556 1.094C.524 3.367-.398 6.048.162 8.562c.556 2.495 2.46 4.52 4.94 5.183 2.932.784 5.61-.602 7.256-3.015-1.493 1.993-3.745 3.309-6.298 2.868-2.514-.434-4.578-2.349-5.153-4.84a6.226 6.226 0 0 1 2.98-6.778C6.34.586 9.74 1.1 11.373 3.493c.407.596.693 1.282.842 1.988.127.598.073 1.197.161 1.794.078.525.543 1.257 1.15.864.525-.341.49-1.05.456-1.592-.007-.15.02.3 0 0",fillRule:"evenodd"})})}function OP(e){const{progress:t}=e,{value:n,mode:r,message:s}=t;return _E("div",{className:"uppy-StatusBar-content",children:[_E(PP,{}),"determinate"===r?`${Math.round(100*n)}%  `:"",s]})}function RP(e){const{numUploads:t,complete:n,totalUploadedSize:r,totalSize:s,totalETA:i,i18n:a}=e,o=t>1,l=sk(r);return _E("div",{className:"uppy-StatusBar-statusSecondary",children:[o&&a("filesUploadedOfTotal",{complete:n,smart_count:t}),_E("span",{className:"uppy-StatusBar-additionalInfo",children:[o&&"  ",null!=s?a("dataUploadedOfTotal",{complete:l,total:sk(s)}):a("dataUploadedOfUnknown",{complete:l}),"  ",null!=i&&a("xTimeLeft",{time:MC(i)})]})]})}function IP(e){const{i18n:t,complete:n,numUploads:r}=e;return _E("div",{className:"uppy-StatusBar-statusSecondary",children:t("filesUploadedOfTotal",{complete:n,smart_count:r})})}function DP(e){const{i18n:t,newFiles:n,startUpload:r}=e,s=vA("uppy-u-reset","uppy-c-btn","uppy-StatusBar-actionBtn","uppy-StatusBar-actionBtn--uploadNewlyAdded");return _E("div",{className:"uppy-StatusBar-statusSecondary",children:[_E("div",{className:"uppy-StatusBar-statusSecondaryHint",children:t("xMoreFilesAdded",{smart_count:n})}),_E("button",{type:"button",className:s,"aria-label":t("uploadXFiles",{smart_count:n}),onClick:r,children:t("upload")})]})}function LP(e){const{i18n:t,supportsUploadProgress:n,totalProgress:r,hideProgressDetails:s,isUploadStarted:i,isAllComplete:a,isAllPaused:o,newFiles:l,numUploads:c,complete:d,totalUploadedSize:u,totalSize:h,totalETA:p,startUpload:m}=e,f=l&&i;if(!i||a)return null;const g=t(o?"paused":"uploading");return _E("div",{className:"uppy-StatusBar-content",title:g,children:[o?null:_E(PP,{}),_E("div",{className:"uppy-StatusBar-status",children:[_E("div",{className:"uppy-StatusBar-statusPrimary",children:n&&0!==r?`${g}: ${r}%`:g}),o||f||s?null:n?_E(RP,{numUploads:c,complete:d,totalUploadedSize:u,totalSize:h,totalETA:p,i18n:t}):_E(IP,{i18n:t,complete:d,numUploads:c}),f?_E(DP,{i18n:t,newFiles:l,startUpload:m}):null]})]})}function FP(e){const{i18n:t}=e;return _E("div",{className:"uppy-StatusBar-content",role:"status",title:t("complete"),children:_E("div",{className:"uppy-StatusBar-status",children:_E("div",{className:"uppy-StatusBar-statusPrimary",children:[_E("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-StatusBar-statusIndicator uppy-c-icon",width:"15",height:"11",viewBox:"0 0 15 11",children:_E("path",{d:"M.414 5.843L1.627 4.63l3.472 3.472L13.202 0l1.212 1.213L5.1 10.528z"})}),t("complete")]})})})}function zP(e){const{error:t,i18n:n,complete:r,numUploads:s}=e;return _E("div",{className:"uppy-StatusBar-content",title:n("uploadFailed"),children:[_E("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-StatusBar-statusIndicator uppy-c-icon",width:"11",height:"11",viewBox:"0 0 11 11",children:_E("path",{d:"M4.278 5.5L0 1.222 1.222 0 5.5 4.278 9.778 0 11 1.222 6.722 5.5 11 9.778 9.778 11 5.5 6.722 1.222 11 0 9.778z"})}),_E("div",{className:"uppy-StatusBar-status",children:[_E("div",{className:"uppy-StatusBar-statusPrimary",children:[n("uploadFailed"),_E("button",{className:"uppy-u-reset uppy-StatusBar-details","aria-label":n("showErrorDetails"),"data-microtip-position":"top-right","data-microtip-size":"medium",onClick:function(){const e=`${n("uploadFailed")} \n\n ${t}`;alert(e)},type:"button",children:"?"})]}),_E(IP,{i18n:n,complete:r,numUploads:s})]})]})}function BP(e){const t=[];let n,r="indeterminate";for(const{progress:s}of Object.values(e)){const{preprocess:e,postprocess:i}=s;null==n&&(e||i)&&({mode:r,message:n}=e||i),"determinate"===e?.mode&&t.push(e.value),"determinate"===i?.mode&&t.push(i.value)}return{mode:r,message:n,value:t.reduce((e,n)=>e+n/t.length,0)}}const{STATE_ERROR:UP,STATE_WAITING:VP,STATE_PREPROCESSING:HP,STATE_UPLOADING:WP,STATE_POSTPROCESSING:$P,STATE_COMPLETE:GP}=MP;function qP({newFiles:e,allowNewUpload:t,isUploadInProgress:n,isAllPaused:r,resumableUploads:s,error:i,hideUploadButton:a,hidePauseResumeButton:o=!1,hideCancelButton:l=!1,hideRetryButton:c=!1,recoveredState:d,uploadState:u,totalProgress:h,files:p,supportsUploadProgress:m,hideAfterFinish:f=!1,isSomeGhost:g,doneButtonHandler:x,isUploadStarted:v,i18n:y,startUpload:b,uppy:w,isAllComplete:j,hideProgressDetails:N,numUploads:_,complete:S,totalSize:M,totalETA:C,totalUploadedSize:E}){const k=function(){switch(u){case $P:case HP:{const e=BP(p);return"determinate"===e.mode?100*e.value:h}case UP:return null;case WP:return m?h:null;default:return h}}(),A=k??100,T=!i&&e&&(!n&&!r||d)&&t&&!a,P=!l&&u!==VP&&u!==GP,O=s&&!o&&u===WP,R=i&&!j&&!c,I=x&&u===GP,D=vA("uppy-StatusBar-progress",{"is-indeterminate":function(){switch(u){case $P:case HP:{const{mode:e}=BP(p);return"indeterminate"===e}case WP:return!m;default:return!1}}()}),L=vA("uppy-StatusBar",`is-${u}`,{"has-ghosts":g}),F=(()=>{switch(u){case HP:case $P:return _E(OP,{progress:BP(p)});case GP:return _E(FP,{i18n:y});case UP:return _E(zP,{error:i,i18n:y,numUploads:_,complete:S});case WP:return _E(LP,{i18n:y,supportsUploadProgress:m,totalProgress:h,hideProgressDetails:N,isUploadStarted:v,isAllComplete:j,isAllPaused:r,newFiles:e,numUploads:_,complete:S,totalUploadedSize:E,totalSize:M,totalETA:C,startUpload:b});default:return null}})();return!(T||R||O||P||I)&&!F||u===GP&&f?null:_E("div",{className:L,children:[_E("div",{className:D,style:{width:`${A}%`},role:"progressbar","aria-label":`${A}%`,"aria-valuetext":`${A}%`,"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":k}),F,_E("div",{className:"uppy-StatusBar-actions",children:[T?_E(CP,{newFiles:e,isUploadStarted:v,recoveredState:d,i18n:y,isSomeGhost:g,startUpload:b,uploadState:u}):null,R?_E(EP,{i18n:y,uppy:w}):null,O?_E(AP,{isAllPaused:r,i18n:y,isAllComplete:j,resumableUploads:s,uppy:w}):null,P?_E(kP,{i18n:y,uppy:w}):null,I?_E(TP,{i18n:y,doneButtonHandler:x}):null]})]})}function XP(e,t,n,r){if(e)return MP.STATE_ERROR;if(t)return MP.STATE_COMPLETE;if(n)return MP.STATE_WAITING;let s=MP.STATE_WAITING;const i=Object.keys(r);for(let a=0;a<i.length;a++){const{progress:e}=r[i[a]];if(e.uploadStarted&&!e.uploadComplete)return MP.STATE_UPLOADING;e.preprocess&&(s=MP.STATE_PREPROCESSING),e.postprocess&&s!==MP.STATE_PREPROCESSING&&(s=MP.STATE_POSTPROCESSING)}return s}class KP extends nE{constructor(){super(...arguments),Ct(this,re),Ct(this,J),Ct(this,Q),Ct(this,ee),Ct(this,te),Ct(this,ne,()=>{const{recoveredState:e}=this.props.uppy.getState();if(Et(this,ee,null),Et(this,te,null),e)return Et(this,Q,Object.values(e.files).reduce((e,{progress:t})=>e+(t.bytesUploaded||0),0)),void this.props.uppy.emit("restore-confirmed");Et(this,J,performance.now()),Et(this,Q,0)}),_t(this,"startUpload",()=>this.props.uppy.upload().catch(()=>{}))}componentDidMount(){Et(this,J,performance.now()),Et(this,Q,this.props.uppy.getFiles().reduce((e,t)=>e+(t.progress.bytesUploaded||0),0)),this.props.uppy.on("upload",Mt(this,ne))}componentWillUnmount(){this.props.uppy.off("upload",Mt(this,ne))}render(){const{capabilities:e,files:t,allowNewUpload:n,totalProgress:r,error:s,recoveredState:i}=this.props.uppy.getState(),{newFiles:a,startedFiles:o,completeFiles:l,isUploadStarted:c,isAllComplete:d,isAllPaused:u,isUploadInProgress:h,isSomeGhost:p}=this.props.uppy.getObjectOfFilesPerState(),m=i?Object.values(t):a,f=!!e.resumableUploads,g=!1!==e.uploadProgress;let x=null,v=0;o.every(e=>null!=e.progress.bytesTotal&&0!==e.progress.bytesTotal)?(x=0,o.forEach(e=>{x+=e.progress.bytesTotal||0,v+=e.progress.bytesUploaded||0})):o.forEach(e=>{v+=e.progress.bytesUploaded||0});const y=kt(this,re,se).call(this,{uploaded:v,total:x});return _E(qP,{error:s,uploadState:XP(s,d,i,t||{}),allowNewUpload:n,totalProgress:r,totalSize:x,totalUploadedSize:v,isAllComplete:d,isAllPaused:u,isUploadStarted:c,isUploadInProgress:h,isSomeGhost:p,recoveredState:i,complete:l.length,newFiles:m.length,numUploads:o.length,totalETA:y,files:t,i18n:this.props.i18n,uppy:this.props.uppy,startUpload:this.startUpload,doneButtonHandler:this.props.doneButtonHandler,resumableUploads:f,supportsUploadProgress:g,hideProgressDetails:this.props.hideProgressDetails,hideUploadButton:this.props.hideUploadButton,hideRetryButton:this.props.hideRetryButton,hidePauseResumeButton:this.props.hidePauseResumeButton,hideCancelButton:this.props.hideCancelButton,hideAfterFinish:this.props.hideAfterFinish})}}J=new WeakMap,Q=new WeakMap,ee=new WeakMap,te=new WeakMap,ne=new WeakMap,re=new WeakSet,se=function(e){if(null==e.total||0===e.total)return null;const t=e.total-e.uploaded;if(t<=0)return null;Mt(this,J)??Et(this,J,performance.now());const n=performance.now()-Mt(this,J);if(0===n)return Math.round((Mt(this,te)??0)/100)/10;if(null==Mt(this,Q))return Et(this,Q,e.uploaded),null;const r=e.uploaded-Mt(this,Q);if(Et(this,Q,e.uploaded),r<=0)return Math.round((Mt(this,te)??0)/100)/10;const s=r/n;if(!Number.isFinite(s)||s<=0)return null;const i=null==Mt(this,ee)?s:oC(s,Mt(this,ee),2e3,n);if(!Number.isFinite(i)||i<=0)return null;Et(this,ee,i);const a=t/i;if(!Number.isFinite(a)||a<0)return null;const o=Math.max((Mt(this,te)??0)-n,0),l=null==Mt(this,te)?a:oC(a,o,2e3,n);return!Number.isFinite(l)||l<0?null:(Et(this,te,l),Et(this,J,performance.now()),Math.round(l/100)/10)};const YP={strings:{closeModal:"Close Modal",addMoreFiles:"Add more files",addingMoreFiles:"Adding more files",importFrom:"Import from %{name}",dashboardWindowTitle:"Uppy Dashboard Window (Press escape to close)",dashboardTitle:"Uppy Dashboard",copyLinkToClipboardSuccess:"Link copied to clipboard.",copyLinkToClipboardFallback:"Copy the URL below",copyLink:"Copy link",back:"Back",removeFile:"Remove file",editFile:"Edit file",editImage:"Edit image",editing:"Editing %{file}",error:"Error",finishEditingFile:"Finish editing file",saveChanges:"Save changes",myDevice:"My Device",dropHint:"Drop your files here",uploadComplete:"Upload complete",uploadPaused:"Upload paused",resumeUpload:"Resume upload",pauseUpload:"Pause upload",retryUpload:"Retry upload",cancelUpload:"Cancel upload",xFilesSelected:{0:"%{smart_count} file selected",1:"%{smart_count} files selected"},uploadingXFiles:{0:"Uploading %{smart_count} file",1:"Uploading %{smart_count} files"},processingXFiles:{0:"Processing %{smart_count} file",1:"Processing %{smart_count} files"},poweredBy:"Powered by %{uppy}",addMore:"Add more",editFileWithFilename:"Edit file %{file}",save:"Save",cancel:"Cancel",dropPasteFiles:"Drop files here or %{browseFiles}",dropPasteFolders:"Drop files here or %{browseFolders}",dropPasteBoth:"Drop files here, %{browseFiles} or %{browseFolders}",dropPasteImportFiles:"Drop files here, %{browseFiles} or import from:",dropPasteImportFolders:"Drop files here, %{browseFolders} or import from:",dropPasteImportBoth:"Drop files here, %{browseFiles}, %{browseFolders} or import from:",importFiles:"Import files from:",browseFiles:"browse files",browseFolders:"browse folders",recoveredXFiles:{0:"We could not fully recover 1 file. Please re-select it and resume the upload.",1:"We could not fully recover %{smart_count} files. Please re-select them and resume the upload."},recoveredAllFiles:"We restored all files. You can now resume the upload.",sessionRestored:"Session restored",reSelect:"Re-select",missingRequiredMetaFields:{0:"Missing required meta field: %{fields}.",1:"Missing required meta fields: %{fields}."},takePictureBtn:"Take Picture",recordVideoBtn:"Record Video",uploading:"Uploading",complete:"Complete",uploadFailed:"Upload failed",paused:"Paused",retry:"Retry",pause:"Pause",resume:"Resume",done:"Done",filesUploadedOfTotal:{0:"%{complete} of %{smart_count} file uploaded",1:"%{complete} of %{smart_count} files uploaded"},dataUploadedOfTotal:"%{complete} of %{total}",dataUploadedOfUnknown:"%{complete} of unknown",xTimeLeft:"%{time} left",uploadXFiles:{0:"Upload %{smart_count} file",1:"Upload %{smart_count} files"},uploadXNewFiles:{0:"Upload +%{smart_count} file",1:"Upload +%{smart_count} files"},upload:"Upload",xMoreFilesAdded:{0:"%{smart_count} more file added",1:"%{smart_count} more files added"},showErrorDetails:"Show error details"}};function ZP(e,t){if(t){const n=e.querySelector(`[data-uppy-paneltype="${t}"]`);if(n)return n}return e}function JP(e,t){const n=t[0];n&&(n.focus(),e.preventDefault())}function QP(e,t,n){const r=ZP(n,t),s=vC(r.querySelectorAll(lC)),i=s.indexOf(document.activeElement);!function(e){return e.contains(document.activeElement)}(r)?JP(e,s):e.shiftKey&&0===i?function(e,t){const n=t[t.length-1];n&&(n.focus(),e.preventDefault())}(e,s):e.shiftKey||i!==s.length-1||JP(e,s)}function eO(){const e={};return e.promise=new Promise((t,n)=>{e.resolve=t,e.reject=n}),e}const tO={target:"body",metaFields:[],thumbnailWidth:280,thumbnailType:"image/jpeg",waitForThumbnailsBeforeUpload:!1,defaultPickerIcon:function(){return _E("svg",{"aria-hidden":"true",focusable:"false",width:"30",height:"30",viewBox:"0 0 30 30",children:_E("path",{d:"M15 30c8.284 0 15-6.716 15-15 0-8.284-6.716-15-15-15C6.716 0 0 6.716 0 15c0 8.284 6.716 15 15 15zm4.258-12.676v6.846h-8.426v-6.846H5.204l9.82-12.364 9.82 12.364H19.26z"})})},showLinkToFileUploadResult:!1,hideProgressDetails:!1,hideUploadButton:!1,hideCancelButton:!1,hideRetryButton:!1,hidePauseResumeButton:!1,hideProgressAfterFinish:!1,note:null,singleFileFullScreen:!0,disableStatusBar:!1,disableInformer:!1,disableThumbnailGenerator:!1,fileManagerSelectionType:"files",proudlyDisplayPoweredByUppy:!0,showSelectedFiles:!0,showRemoveButtonAfterComplete:!1,showNativePhotoCameraButton:!1,showNativeVideoCameraButton:!1,theme:"light",autoOpen:null,disabled:!1,disableLocalFiles:!1,nativeCameraFacingMode:"",onDragLeave:()=>{},onDragOver:()=>{},onDrop:()=>{},plugins:[],doneButtonHandler:void 0,onRequestCloseModal:null,inline:!1,animateOpenClose:!0,browserBackButtonClose:!1,closeAfterFinish:!1,closeModalOnClickOutside:!1,disablePageScrollWhenModalOpen:!0,trigger:null,width:750,height:550};class nO extends hk{constructor(e,t){var n;const r=t?.autoOpen??null;super(e,{...tO,...t,autoOpen:r}),Ct(this,ge),Ct(this,ie),_t(this,"modalName",`uppy-Dashboard-${cA()}`),_t(this,"superFocus",function(){let e=!1;return rA((t,n)=>{const r=ZP(t,n),s=r.contains(document.activeElement);if(s&&e)return;const i=r.querySelector("[data-uppy-super-focusable]");if(!s||i)if(i)i.focus({preventScroll:!0}),e=!0;else{const t=r.querySelector(lC);t?.focus({preventScroll:!0}),e=!1}},260)}()),_t(this,"ifFocusedOnUppyRecently",!1),_t(this,"dashboardIsDisabled"),_t(this,"savedScrollPosition"),_t(this,"savedActiveElement"),_t(this,"resizeObserver"),_t(this,"darkModeMediaQuery"),_t(this,"makeDashboardInsidesVisibleAnywayTimeout"),_t(this,"removeTarget",e=>{const t=this.getPluginState().targets.filter(t=>t.id!==e.id);this.setPluginState({targets:t})}),_t(this,"addTarget",e=>{const t=e.id||e.constructor.name,n=e.title||t,r=e.type;if("acquirer"!==r&&"progressindicator"!==r&&"editor"!==r){const e="Dashboard: can only be targeted by plugins of types: acquirer, progressindicator, editor";return this.uppy.log(e,"error"),null}const s={id:t,name:n,type:r},i=this.getPluginState().targets.slice();return i.push(s),this.setPluginState({targets:i}),this.el}),_t(this,"hideAllPanels",()=>{const e=this.getPluginState(),t={activePickerPanel:void 0,showAddFilesPanel:!1,activeOverlayType:null,fileCardFor:null,showFileEditor:!1};e.activePickerPanel===t.activePickerPanel&&e.showAddFilesPanel===t.showAddFilesPanel&&e.showFileEditor===t.showFileEditor&&e.activeOverlayType===t.activeOverlayType||(this.setPluginState(t),this.uppy.emit("dashboard:close-panel",e.activePickerPanel?.id))}),_t(this,"showPanel",e=>{const{targets:t}=this.getPluginState(),n=t.find(t=>"acquirer"===t.type&&t.id===e);this.setPluginState({activePickerPanel:n,activeOverlayType:"PickerPanel"}),this.uppy.emit("dashboard:show-panel",e)}),_t(this,"canEditFile",e=>{const{targets:t}=this.getPluginState();return Mt(this,he).call(this,t).some(t=>this.uppy.getPlugin(t.id).canEditFile(e))}),_t(this,"openFileEditor",e=>{const{targets:t}=this.getPluginState(),n=Mt(this,he).call(this,t);this.setPluginState({showFileEditor:!0,fileCardFor:e.id||null,activeOverlayType:"FileEditor"}),n.forEach(t=>{this.uppy.getPlugin(t.id).selectFile(e)})}),_t(this,"closeFileEditor",()=>{const{metaFields:e}=this.getPluginState();e&&e.length>0?this.setPluginState({showFileEditor:!1,activeOverlayType:"FileCard"}):this.setPluginState({showFileEditor:!1,fileCardFor:null,activeOverlayType:"AddFiles"})}),_t(this,"saveFileEditor",()=>{const{targets:e}=this.getPluginState();Mt(this,he).call(this,e).forEach(e=>{this.uppy.getPlugin(e.id).save()}),this.closeFileEditor()}),_t(this,"openModal",()=>{const{promise:e,resolve:t}=eO();if(this.savedScrollPosition=window.pageYOffset,this.savedActiveElement=document.activeElement,this.opts.disablePageScrollWhenModalOpen&&document.body.classList.add("uppy-Dashboard-isFixed"),this.opts.animateOpenClose&&this.getPluginState().isClosing){const e=()=>{this.setPluginState({isHidden:!1}),this.el.removeEventListener("animationend",e,!1),t()};this.el.addEventListener("animationend",e,!1)}else this.setPluginState({isHidden:!1}),t();return this.opts.browserBackButtonClose&&this.updateBrowserHistory(),document.addEventListener("keydown",this.handleKeyDownInModal),this.uppy.emit("dashboard:modal-open"),e}),_t(this,"closeModal",e=>{const t=e?.manualClose??!0,{isHidden:n,isClosing:r}=this.getPluginState();if(n||r)return;const{promise:s,resolve:i}=eO();if(this.opts.disablePageScrollWhenModalOpen&&document.body.classList.remove("uppy-Dashboard-isFixed"),this.opts.animateOpenClose){this.setPluginState({isClosing:!0});const e=()=>{this.setPluginState({isHidden:!0,isClosing:!1}),this.superFocus.cancel(),this.savedActiveElement.focus(),this.el.removeEventListener("animationend",e,!1),i()};this.el.addEventListener("animationend",e,!1)}else this.setPluginState({isHidden:!0}),this.superFocus.cancel(),this.savedActiveElement.focus(),i();return document.removeEventListener("keydown",this.handleKeyDownInModal),t&&this.opts.browserBackButtonClose&&history.state?.[this.modalName]&&history.back(),this.uppy.emit("dashboard:modal-closed"),s}),_t(this,"isModalOpen",()=>!this.getPluginState().isHidden||!1),_t(this,"requestCloseModal",()=>this.opts.onRequestCloseModal?this.opts.onRequestCloseModal():this.closeModal()),_t(this,"setDarkModeCapability",e=>{const{capabilities:t}=this.uppy.getState();this.uppy.setState({capabilities:{...t,darkMode:e}})}),_t(this,"handleSystemDarkModeChange",e=>{const t=e.matches;this.uppy.log("[Dashboard] Dark mode is "+(t?"on":"off")),this.setDarkModeCapability(t)}),_t(this,"toggleFileCard",(e,t)=>{const n=this.uppy.getFile(t);e?this.uppy.emit("dashboard:file-edit-start",n):this.uppy.emit("dashboard:file-edit-complete",n),this.setPluginState({fileCardFor:e?t:null,activeOverlayType:e?"FileCard":null})}),_t(this,"toggleAddFilesPanel",e=>{this.setPluginState({showAddFilesPanel:e,activeOverlayType:e?"AddFiles":null})}),_t(this,"addFiles",e=>{const t=e.map(e=>({source:this.id,name:e.name,type:e.type,data:e,meta:{relativePath:e.relativePath||e.webkitRelativePath||null}}));try{this.uppy.addFiles(t)}catch(PUe){this.uppy.log(PUe)}}),_t(this,"startListeningToResize",()=>{this.resizeObserver=new ResizeObserver(e=>{const t=e[0],{width:n,height:r}=t.contentRect;this.setPluginState({containerWidth:n,containerHeight:r,areInsidesReadyToBeVisible:!0})}),this.resizeObserver.observe(this.el.querySelector(".uppy-Dashboard-inner")),this.makeDashboardInsidesVisibleAnywayTimeout=setTimeout(()=>{const e=this.getPluginState(),t=!this.opts.inline&&e.isHidden;e.areInsidesReadyToBeVisible||t||(this.uppy.log("[Dashboard] resize event didnt fire on time: defaulted to mobile layout","warning"),this.setPluginState({areInsidesReadyToBeVisible:!0}))},1e3)}),_t(this,"stopListeningToResize",()=>{this.resizeObserver.disconnect(),clearTimeout(this.makeDashboardInsidesVisibleAnywayTimeout)}),_t(this,"recordIfFocusedOnUppyRecently",e=>{this.el.contains(e.target)?this.ifFocusedOnUppyRecently=!0:(this.ifFocusedOnUppyRecently=!1,this.superFocus.cancel())}),_t(this,"disableInteractiveElements",e=>{const t=Mt(this,ie)??vC(this.el.querySelectorAll(["a[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])",'[role="button"]:not([disabled])'])).filter(e=>!e.classList.contains("uppy-Dashboard-close"));for(const n of t)"A"===n.tagName?n.setAttribute("aria-disabled",e):n.disabled=e;Et(this,ie,e?t:null),this.dashboardIsDisabled=e}),_t(this,"updateBrowserHistory",()=>{history.state?.[this.modalName]||history.pushState({...history.state,[this.modalName]:!0},""),window.addEventListener("popstate",this.handlePopState,!1)}),_t(this,"handlePopState",e=>{!this.isModalOpen()||e.state&&e.state[this.modalName]||this.closeModal({manualClose:!1}),!this.isModalOpen()&&e.state?.[this.modalName]&&history.back()}),_t(this,"handleKeyDownInModal",e=>{27===e.keyCode&&this.requestCloseModal(),9===e.keyCode&&QP(e,this.getPluginState().activeOverlayType,this.el)}),_t(this,"handleClickOutside",()=>{this.opts.closeModalOnClickOutside&&this.requestCloseModal()}),_t(this,"handlePaste",e=>{this.uppy.iteratePlugins(t=>{"acquirer"===t.type&&t.handleRootPaste?.(e)});const t=vC(e.clipboardData.files);t.length>0&&(this.uppy.log("[Dashboard] Files pasted"),this.addFiles(t))}),_t(this,"handleInputChange",e=>{e.preventDefault();const t=vC(e.currentTarget.files||[]);t.length>0&&(this.uppy.log("[Dashboard] Files selected through input"),this.addFiles(t))}),_t(this,"handleDragOver",e=>{e.preventDefault(),e.stopPropagation();const t=(()=>{let t=!0;return this.uppy.iteratePlugins(n=>{n.canHandleRootDrop?.(e)&&(t=!0)}),t})(),n=(()=>{const{types:t}=e.dataTransfer;return t.some(e=>"Files"===e)})();!t&&!n||this.opts.disabled||this.opts.disableLocalFiles&&(n||!t)||!this.uppy.getState().allowNewUpload?e.dataTransfer.dropEffect="none":(e.dataTransfer.dropEffect="copy",this.setPluginState({isDraggingOver:!0}),this.opts.onDragOver(e))}),_t(this,"handleDragLeave",e=>{e.preventDefault(),e.stopPropagation(),this.setPluginState({isDraggingOver:!1}),this.opts.onDragLeave(e)}),_t(this,"handleDrop",async e=>{e.preventDefault(),e.stopPropagation(),this.setPluginState({isDraggingOver:!1}),this.uppy.iteratePlugins(t=>{"acquirer"===t.type&&t.handleRootDrop?.(e)});let t=!1;this.uppy.log("[Dashboard] Processing dropped files");const n=await jC(e.dataTransfer,{logDropError:e=>{this.uppy.log(e,"error"),t||(this.uppy.info(e.message,"error"),t=!0)}});n.length>0&&(this.uppy.log("[Dashboard] Files dropped"),this.addFiles(n)),this.opts.onDrop(e)}),_t(this,"handleRequestThumbnail",e=>{this.opts.waitForThumbnailsBeforeUpload||this.uppy.emit("thumbnail:request",e)}),_t(this,"handleCancelThumbnail",e=>{this.opts.waitForThumbnailsBeforeUpload||this.uppy.emit("thumbnail:cancel",e)}),_t(this,"handleKeyDownInInline",e=>{9===e.keyCode&&function(e,t,n){null===t||QP(e,t,n)}(e,this.getPluginState().activeOverlayType,this.el)}),_t(this,"handlePasteOnBody",e=>{this.el.contains(document.activeElement)&&this.handlePaste(e)}),_t(this,"handleComplete",({failed:e})=>{this.opts.closeAfterFinish&&!e?.length&&this.requestCloseModal()}),_t(this,"handleCancelRestore",()=>{this.uppy.emit("restore-canceled")}),Ct(this,ae,()=>{if(this.opts.disableThumbnailGenerator)return;const e=this.uppy.getFiles();if(1===e.length){const t=this.uppy.getPlugin(`${this.id}:ThumbnailGenerator`);t?.setOptions({thumbnailWidth:600});const n={...e[0],preview:void 0};t?.requestThumbnail(n).then(()=>{t?.setOptions({thumbnailWidth:this.opts.thumbnailWidth})})}}),Ct(this,oe,e=>{const t=e[0],{metaFields:n}=this.getPluginState(),r=n&&n.length>0,s=this.canEditFile(t);r&&"metaEditor"===this.opts.autoOpen?this.toggleFileCard(!0,t.id):s&&"imageEditor"===this.opts.autoOpen&&this.openFileEditor(t)}),_t(this,"initEvents",()=>{if(this.opts.trigger&&!this.opts.inline){const e=uC(this.opts.trigger);e?e.forEach(e=>e.addEventListener("click",this.openModal)):this.uppy.log("Dashboard modal trigger not found. Make sure `trigger` is set in Dashboard options, unless you are planning to call `dashboard.openModal()` method yourself","warning")}this.startListeningToResize(),document.addEventListener("paste",this.handlePasteOnBody),this.uppy.on("plugin-added",Mt(this,fe)),this.uppy.on("plugin-remove",this.removeTarget),this.uppy.on("file-added",this.hideAllPanels),this.uppy.on("dashboard:modal-closed",this.hideAllPanels),this.uppy.on("complete",this.handleComplete),this.uppy.on("files-added",Mt(this,ae)),this.uppy.on("file-removed",Mt(this,ae)),document.addEventListener("focus",this.recordIfFocusedOnUppyRecently,!0),document.addEventListener("click",this.recordIfFocusedOnUppyRecently,!0),this.opts.inline&&this.el.addEventListener("keydown",this.handleKeyDownInInline),this.opts.autoOpen&&this.uppy.on("files-added",Mt(this,oe))}),_t(this,"removeEvents",()=>{const e=uC(this.opts.trigger);!this.opts.inline&&e&&e.forEach(e=>e.removeEventListener("click",this.openModal)),this.stopListeningToResize(),document.removeEventListener("paste",this.handlePasteOnBody),window.removeEventListener("popstate",this.handlePopState,!1),this.uppy.off("plugin-added",Mt(this,fe)),this.uppy.off("plugin-remove",this.removeTarget),this.uppy.off("file-added",this.hideAllPanels),this.uppy.off("dashboard:modal-closed",this.hideAllPanels),this.uppy.off("complete",this.handleComplete),this.uppy.off("files-added",Mt(this,ae)),this.uppy.off("file-removed",Mt(this,ae)),document.removeEventListener("focus",this.recordIfFocusedOnUppyRecently),document.removeEventListener("click",this.recordIfFocusedOnUppyRecently),this.opts.inline&&this.el.removeEventListener("keydown",this.handleKeyDownInInline),this.opts.autoOpen&&this.uppy.off("files-added",Mt(this,oe))}),_t(this,"superFocusOnEachUpdate",()=>{const e=this.el.contains(document.activeElement),t=document.activeElement===document.body||null===document.activeElement,n=0===this.uppy.getState().info.length,r=!this.opts.inline;n&&(r||e||t&&this.ifFocusedOnUppyRecently)?this.superFocus(this.el,this.getPluginState().activeOverlayType):this.superFocus.cancel()}),_t(this,"afterUpdate",()=>{!this.opts.disabled||this.dashboardIsDisabled?(!this.opts.disabled&&this.dashboardIsDisabled&&this.disableInteractiveElements(!1),this.superFocusOnEachUpdate()):this.disableInteractiveElements(!0)}),_t(this,"saveFileCard",(e,t)=>{this.uppy.setFileMeta(t,e),this.toggleFileCard(!1,t)}),Ct(this,le,e=>{const t=this.uppy.getPlugin(e.id);return{...e,icon:t.icon||this.opts.defaultPickerIcon,render:t.render}}),Ct(this,ce,e=>{const t=this.uppy.getPlugin(e.id);return"function"!=typeof t.isSupported||t.isSupported()}),Ct(this,de,e=>e.filter(e=>"acquirer"===e.type&&Mt(this,ce).call(this,e)).map(Mt(this,le))),Ct(this,ue,e=>e.filter(e=>"progressindicator"===e.type).map(Mt(this,le))),Ct(this,he,e=>e.filter(e=>"editor"===e.type).map(Mt(this,le))),_t(this,"render",e=>{const t=this.getPluginState(),{files:n,capabilities:r,allowNewUpload:s}=e,{newFiles:i,uploadStartedFiles:a,completeFiles:o,erroredFiles:l,inProgressFiles:c,inProgressNotPausedFiles:d,processingFiles:u,isUploadStarted:h,isAllComplete:p,isAllPaused:m}=this.uppy.getObjectOfFilesPerState(),f=Mt(this,de).call(this,t.targets),g=Mt(this,ue).call(this,t.targets),x=Mt(this,he).call(this,t.targets);let v;return v="auto"===this.opts.theme?r.darkMode?"dark":"light":this.opts.theme,["files","folders","both"].indexOf(this.opts.fileManagerSelectionType)<0&&(this.opts.fileManagerSelectionType="files"),function(e){const t=0===e.totalFileCount,n=1===e.totalFileCount,r=e.containerWidth>576,s=e.containerHeight>330,i=vA({"uppy-Dashboard":!0,"uppy-Dashboard--isDisabled":e.disabled,"uppy-Dashboard--animateOpenClose":e.animateOpenClose,"uppy-Dashboard--isClosing":e.isClosing,"uppy-Dashboard--isDraggingOver":e.isDraggingOver,"uppy-Dashboard--modal":!e.inline,"uppy-size--md":e.containerWidth>576,"uppy-size--lg":e.containerWidth>700,"uppy-size--xl":e.containerWidth>900,"uppy-size--height-md":e.containerHeight>330,"uppy-Dashboard--isAddFilesPanelVisible":e.showAddFilesPanel,"uppy-Dashboard--isInnerWrapVisible":e.areInsidesReadyToBeVisible,"uppy-Dashboard--singleFile":e.singleFileFullScreen&&n&&s});let a=1;e.containerWidth>900?a=5:e.containerWidth>700?a=4:e.containerWidth>576&&(a=3);const o=e.showSelectedFiles&&!t,l=e.recoveredState?Object.keys(e.recoveredState.files).length:null,c=e.files?Object.keys(e.files).filter(t=>e.files[t].isGhost).length:0;return _E("div",{className:i,"data-uppy-theme":e.theme,"data-uppy-num-acquirers":e.acquirers.length,"data-uppy-drag-drop-supported":!e.disableLocalFiles&&NC(),"aria-hidden":e.inline?"false":e.isHidden,"aria-disabled":e.disabled,"aria-label":e.inline?e.i18n("dashboardTitle"):e.i18n("dashboardWindowTitle"),onPaste:e.handlePaste,onDragOver:e.handleDragOver,onDragLeave:e.handleDragLeave,onDrop:e.handleDrop,children:[_E("div",{"aria-hidden":"true",className:"uppy-Dashboard-overlay",tabIndex:-1,onClick:e.handleClickOutside}),_E("div",{className:"uppy-Dashboard-inner",role:e.inline?void 0:"dialog",style:{width:e.inline&&e.width?e.width:"",height:e.inline&&e.height?e.height:""},children:[e.inline?null:_E("button",{className:"uppy-u-reset uppy-Dashboard-close",type:"button","aria-label":e.i18n("closeModal"),title:e.i18n("closeModal"),onClick:e.closeModal,children:_E("span",{"aria-hidden":"true",children:""})}),_E("div",{className:"uppy-Dashboard-innerWrap",children:[_E("div",{className:"uppy-Dashboard-dropFilesHereHint",children:e.i18n("dropHint")}),o&&_E(NP,{...e}),l&&_E("div",{className:"uppy-Dashboard-serviceMsg",children:[_E("svg",{className:"uppy-Dashboard-serviceMsg-icon","aria-hidden":"true",focusable:"false",width:"21",height:"16",viewBox:"0 0 24 19",children:_E("g",{transform:"translate(0 -1)",fill:"none",fillRule:"evenodd",children:[_E("path",{d:"M12.857 1.43l10.234 17.056A1 1 0 0122.234 20H1.766a1 1 0 01-.857-1.514L11.143 1.429a1 1 0 011.714 0z",fill:"#FFD300"}),_E("path",{fill:"#000",d:"M11 6h2l-.3 8h-1.4z"}),_E("circle",{fill:"#000",cx:"12",cy:"17",r:"1"})]})}),_E("strong",{className:"uppy-Dashboard-serviceMsg-title",children:e.i18n("sessionRestored")}),_E("div",{className:"uppy-Dashboard-serviceMsg-text",children:c>0?e.i18n("recoveredXFiles",{smart_count:c}):e.i18n("recoveredAllFiles")})]}),o?_E(oP,{id:e.id,i18n:e.i18n,uppy:e.uppy,files:e.files,resumableUploads:e.resumableUploads,hideRetryButton:e.hideRetryButton,hidePauseResumeButton:e.hidePauseResumeButton,hideCancelButton:e.hideCancelButton,showLinkToFileUploadResult:e.showLinkToFileUploadResult,showRemoveButtonAfterComplete:e.showRemoveButtonAfterComplete,metaFields:e.metaFields,toggleFileCard:e.toggleFileCard,handleRequestThumbnail:e.handleRequestThumbnail,handleCancelThumbnail:e.handleCancelThumbnail,recoveredState:e.recoveredState,individualCancellation:e.individualCancellation,openFileEditor:e.openFileEditor,canEditFile:e.canEditFile,toggleAddFilesPanel:e.toggleAddFilesPanel,isSingleFile:n,itemsPerRow:a,containerWidth:e.containerWidth,containerHeight:e.containerHeight}):_E(IT,{i18n:e.i18n,i18nArray:e.i18nArray,acquirers:e.acquirers,handleInputChange:e.handleInputChange,maxNumberOfFiles:e.maxNumberOfFiles,allowedFileTypes:e.allowedFileTypes,showNativePhotoCameraButton:e.showNativePhotoCameraButton,showNativeVideoCameraButton:e.showNativeVideoCameraButton,nativeCameraFacingMode:e.nativeCameraFacingMode,showPanel:e.showPanel,activePickerPanel:e.activePickerPanel,disableLocalFiles:e.disableLocalFiles,fileManagerSelectionType:e.fileManagerSelectionType,note:e.note,proudlyDisplayPoweredByUppy:e.proudlyDisplayPoweredByUppy}),_E(SP,{children:e.showAddFilesPanel?_E(DT,{...e,isSizeMD:r},"AddFiles"):null}),_E(SP,{children:e.fileCardFor?_E(VT,{...e},"FileCard"):null}),_E(SP,{children:e.activePickerPanel?_E(mP,{...e},"Picker"):null}),_E(SP,{children:e.showFileEditor?_E(LT,{...e},"Editor"):null}),_E("div",{className:"uppy-Dashboard-progressindicators",children:[!e.disableInformer&&_E(pP,{uppy:e.uppy}),!e.disableStatusBar&&_E(KP,{uppy:e.uppy,i18n:e.i18n,hideProgressDetails:e.hideProgressDetails,hideUploadButton:e.hideUploadButton,hideRetryButton:e.hideRetryButton,hidePauseResumeButton:e.hidePauseResumeButton,hideCancelButton:e.hideCancelButton,hideAfterFinish:e.hideProgressAfterFinish,doneButtonHandler:e.doneButtonHandler}),!e.disableInformer&&_E(pP,{uppy:e.uppy}),e.progressindicators.map(t=>e.uppy.getPlugin(t.id).render(e.state))]})]})]})]})}({state:e,isHidden:t.isHidden,files:n,newFiles:i,uploadStartedFiles:a,completeFiles:o,erroredFiles:l,inProgressFiles:c,inProgressNotPausedFiles:d,processingFiles:u,isUploadStarted:h,isAllComplete:p,isAllPaused:m,totalFileCount:Object.keys(n).length,totalProgress:e.totalProgress,allowNewUpload:s,acquirers:f,theme:v,disabled:this.opts.disabled,disableLocalFiles:this.opts.disableLocalFiles,direction:this.opts.direction,activePickerPanel:t.activePickerPanel,showFileEditor:t.showFileEditor,saveFileEditor:this.saveFileEditor,closeFileEditor:this.closeFileEditor,disableInteractiveElements:this.disableInteractiveElements,animateOpenClose:this.opts.animateOpenClose,isClosing:t.isClosing,progressindicators:g,editors:x,autoProceed:this.uppy.opts.autoProceed,id:this.id,closeModal:this.requestCloseModal,handleClickOutside:this.handleClickOutside,handleInputChange:this.handleInputChange,handlePaste:this.handlePaste,inline:this.opts.inline,showPanel:this.showPanel,hideAllPanels:this.hideAllPanels,i18n:this.i18n,i18nArray:this.i18nArray,uppy:this.uppy,note:this.opts.note,recoveredState:e.recoveredState,metaFields:t.metaFields,resumableUploads:r.resumableUploads||!1,individualCancellation:r.individualCancellation,isMobileDevice:r.isMobileDevice,fileCardFor:t.fileCardFor,toggleFileCard:this.toggleFileCard,toggleAddFilesPanel:this.toggleAddFilesPanel,showAddFilesPanel:t.showAddFilesPanel,saveFileCard:this.saveFileCard,openFileEditor:this.openFileEditor,canEditFile:this.canEditFile,width:this.opts.width,height:this.opts.height,showLinkToFileUploadResult:this.opts.showLinkToFileUploadResult,fileManagerSelectionType:this.opts.fileManagerSelectionType,proudlyDisplayPoweredByUppy:this.opts.proudlyDisplayPoweredByUppy,showRemoveButtonAfterComplete:this.opts.showRemoveButtonAfterComplete,containerWidth:t.containerWidth,containerHeight:t.containerHeight,areInsidesReadyToBeVisible:t.areInsidesReadyToBeVisible,parentElement:this.el,allowedFileTypes:this.uppy.opts.restrictions.allowedFileTypes,maxNumberOfFiles:this.uppy.opts.restrictions.maxNumberOfFiles,requiredMetaFields:this.uppy.opts.restrictions.requiredMetaFields,showSelectedFiles:this.opts.showSelectedFiles,showNativePhotoCameraButton:this.opts.showNativePhotoCameraButton,showNativeVideoCameraButton:this.opts.showNativeVideoCameraButton,nativeCameraFacingMode:this.opts.nativeCameraFacingMode,singleFileFullScreen:this.opts.singleFileFullScreen,handleCancelRestore:this.handleCancelRestore,handleRequestThumbnail:this.handleRequestThumbnail,handleCancelThumbnail:this.handleCancelThumbnail,isDraggingOver:t.isDraggingOver,handleDragOver:this.handleDragOver,handleDragLeave:this.handleDragLeave,handleDrop:this.handleDrop,disableInformer:this.opts.disableInformer,disableStatusBar:this.opts.disableStatusBar,hideProgressDetails:this.opts.hideProgressDetails,hideUploadButton:this.opts.hideUploadButton,hideRetryButton:this.opts.hideRetryButton,hidePauseResumeButton:this.opts.hidePauseResumeButton,hideCancelButton:this.opts.hideCancelButton,hideProgressAfterFinish:this.opts.hideProgressAfterFinish,doneButtonHandler:this.opts.doneButtonHandler})}),Ct(this,pe,()=>{const{plugins:e}=this.opts;e.forEach(e=>{const t=this.uppy.getPlugin(e);t?t.mount(this,t):this.uppy.log(`[Uppy] Dashboard could not find plugin '${e}', make sure to uppy.use() the plugins you are specifying`,"warning")})}),Ct(this,me,()=>{this.uppy.iteratePlugins(Mt(this,fe))}),Ct(this,fe,e=>{if(e&&!e.opts?.target&&["acquirer","editor"].includes(e.type)){this.getPluginState().targets.some(t=>e.id===t.id)||e.mount(this,e)}}),_t(this,"install",()=>{this.setPluginState({isHidden:!0,fileCardFor:null,activeOverlayType:null,showAddFilesPanel:!1,activePickerPanel:void 0,showFileEditor:!1,metaFields:this.opts.metaFields,targets:[],areInsidesReadyToBeVisible:!1,isDraggingOver:!1});const{inline:e,closeAfterFinish:t}=this.opts;if(e&&t)throw new Error("[Dashboard] `closeAfterFinish: true` cannot be used on an inline Dashboard, because an inline Dashboard cannot be closed at all. Either set `inline: false`, or disable the `closeAfterFinish` option.");const{allowMultipleUploads:n,allowMultipleUploadBatches:r}=this.uppy.opts;(n||r)&&t&&this.uppy.log("[Dashboard] When using `closeAfterFinish`, we recommended setting the `allowMultipleUploadBatches` option to `false` in the Uppy constructor. See https://uppy.io/docs/uppy/#allowMultipleUploads-true","warning");const{target:s}=this.opts;s&&this.mount(s,this),this.opts.disableThumbnailGenerator||this.uppy.use(OT,{id:kt(this,ge,ve).call(this),...kt(this,ge,xe).call(this)}),this.darkModeMediaQuery="undefined"!=typeof window&&window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):null;const i=!!this.darkModeMediaQuery&&this.darkModeMediaQuery.matches;this.uppy.log("[Dashboard] Dark mode is "+(i?"on":"off")),this.setDarkModeCapability(i),"auto"===this.opts.theme&&this.darkModeMediaQuery?.addListener(this.handleSystemDarkModeChange),Mt(this,pe).call(this),Mt(this,me).call(this),this.initEvents()}),_t(this,"uninstall",()=>{if(!this.opts.disableThumbnailGenerator){const e=this.uppy.getPlugin(`${this.id}:ThumbnailGenerator`);e&&this.uppy.removePlugin(e)}const{plugins:e}=this.opts;e.forEach(e=>{const t=this.uppy.getPlugin(e);t&&t.unmount()}),"auto"===this.opts.theme&&this.darkModeMediaQuery?.removeListener(this.handleSystemDarkModeChange),this.opts.disablePageScrollWhenModalOpen&&document.body.classList.remove("uppy-Dashboard-isFixed"),this.unmount(),this.removeEvents()}),this.id=this.opts.id||"Dashboard",this.title="Dashboard",this.type="orchestrator",this.defaultLocale=YP,void 0===this.opts.doneButtonHandler&&(this.opts.doneButtonHandler=()=>{this.uppy.clear(),this.requestCloseModal()}),(n=this.opts).onRequestCloseModal??(n.onRequestCloseModal=()=>this.closeModal()),this.i18nInit()}setOptions(e){super.setOptions(e),this.uppy.getPlugin(kt(this,ge,ve).call(this))?.setOptions(kt(this,ge,xe).call(this))}}ie=new WeakMap,ae=new WeakMap,oe=new WeakMap,le=new WeakMap,ce=new WeakMap,de=new WeakMap,ue=new WeakMap,he=new WeakMap,pe=new WeakMap,me=new WeakMap,fe=new WeakMap,ge=new WeakSet,xe=function(){const{thumbnailWidth:e,thumbnailHeight:t,thumbnailType:n,waitForThumbnailsBeforeUpload:r}=this.opts;return{thumbnailWidth:e,thumbnailHeight:t,thumbnailType:n,waitForThumbnailsBeforeUpload:r,lazy:!r}},ve=function(){return`${this.id}:ThumbnailGenerator`},_t(nO,"VERSION",RT);const rO=["defaultChecked","defaultValue","suppressContentEditableWarning","suppressHydrationWarning","dangerouslySetInnerHTML","accessKey","className","contentEditable","contextMenu","dir","draggable","hidden","id","lang","placeholder","slot","spellCheck","style","tabIndex","title","translate","radioGroup","role","about","datatype","inlist","prefix","property","resource","typeof","vocab","autoCapitalize","autoCorrect","autoSave","color","itemProp","itemScope","itemType","itemID","itemRef","results","security","unselectable","inputMode","is","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],sO=/^(aria-|data-)/,iO=e=>Object.fromEntries(Object.entries(e).filter(([e])=>sO.test(e)||rO.includes(e)));class aO extends hn.Component{constructor(){super(...arguments),_t(this,"container"),_t(this,"plugin")}componentDidMount(){this.installPlugin()}componentDidUpdate(e){const{uppy:t,open:n,onRequestClose:r}=this.props;if(e.uppy!==t)this.uninstallPlugin(e),this.installPlugin();else if(function(e,t){const n=iO(e);return Object.keys(e).some(r=>!Object.hasOwn(n,r)&&e[r]!==t[r])}(this.props,e)){const{uppy:e,...t}={...this.props,inline:!1,onRequestCloseModal:r};this.plugin.setOptions(t)}e.open&&!n?this.plugin.closeModal():!e.open&&n&&this.plugin.openModal()}componentWillUnmount(){this.uninstallPlugin()}installPlugin(){const{target:e=this.container,open:t,onRequestClose:n,uppy:r,...s}=this.props,i={id:"DashboardModal",...s,inline:!1,target:e,open:t,onRequestCloseModal:n};r.use(nO,i),this.plugin=r.getPlugin(i.id),t&&this.plugin.openModal()}uninstallPlugin(e=this.props){const{uppy:t}=e;t.removePlugin(this.plugin)}render(){return hn.createElement("div",{className:"uppy-Container",ref:e=>{this.container=e},...iO(this.props)})}}_t(aO,"defaultProps",{open:void 0,onRequestClose:void 0});var oO={};function lO(e,t){"boolean"==typeof t&&(t={forever:t}),this._originalTimeouts=JSON.parse(JSON.stringify(e)),this._timeouts=e,this._options=t||{},this._maxRetryTime=t&&t.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}var cO,dO,uO=lO;lO.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)},lO.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null},lO.prototype.retry=function(e){if(this._timeout&&clearTimeout(this._timeout),!e)return!1;var t=(new Date).getTime();if(e&&t-this._operationStart>=this._maxRetryTime)return this._errors.push(e),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(e);var n=this._timeouts.shift();if(void 0===n){if(!this._cachedTimeouts)return!1;this._errors.splice(0,this._errors.length-1),n=this._cachedTimeouts.slice(-1)}var r=this;return this._timer=setTimeout(function(){r._attempts++,r._operationTimeoutCb&&(r._timeout=setTimeout(function(){r._operationTimeoutCb(r._attempts)},r._operationTimeout),r._options.unref&&r._timeout.unref()),r._fn(r._attempts)},n),this._options.unref&&this._timer.unref(),!0},lO.prototype.attempt=function(e,t){this._fn=e,t&&(t.timeout&&(this._operationTimeout=t.timeout),t.cb&&(this._operationTimeoutCb=t.cb));var n=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){n._operationTimeoutCb()},n._operationTimeout)),this._operationStart=(new Date).getTime(),this._fn(this._attempts)},lO.prototype.try=function(e){this.attempt(e)},lO.prototype.start=function(e){this.attempt(e)},lO.prototype.start=lO.prototype.try,lO.prototype.errors=function(){return this._errors},lO.prototype.attempts=function(){return this._attempts},lO.prototype.mainError=function(){if(0===this._errors.length)return null;for(var e={},t=null,n=0,r=0;r<this._errors.length;r++){var s=this._errors[r],i=s.message,a=(e[i]||0)+1;e[i]=a,a>=n&&(t=s,n=a)}return t},dO=uO,(cO=oO).operation=function(e){var t=cO.timeouts(e);return new dO(t,{forever:e&&(e.forever||e.retries===1/0),unref:e&&e.unref,maxRetryTime:e&&e.maxRetryTime})},cO.timeouts=function(e){if(e instanceof Array)return[].concat(e);var t={retries:10,factor:2,minTimeout:1e3,maxTimeout:1/0,randomize:!1};for(var n in e)t[n]=e[n];if(t.minTimeout>t.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var r=[],s=0;s<t.retries;s++)r.push(this.createTimeout(s,t));return e&&e.forever&&!r.length&&r.push(this.createTimeout(s,t)),r.sort(function(e,t){return e-t}),r},cO.createTimeout=function(e,t){var n=t.randomize?Math.random()+1:1,r=Math.round(n*Math.max(t.minTimeout,1)*Math.pow(t.factor,e));return r=Math.min(r,t.maxTimeout)},cO.wrap=function(e,t,n){if(t instanceof Array&&(n=t,t=null),!n)for(var r in n=[],e)"function"==typeof e[r]&&n.push(r);for(var s=0;s<n.length;s++){var i=n[s],a=e[i];e[i]=function(n){var r=cO.operation(t),s=Array.prototype.slice.call(arguments,1),i=s.pop();s.push(function(e){r.retry(e)||(e&&(arguments[0]=r.mainError()),i.apply(this,arguments))}),r.attempt(function(){n.apply(e,s)})}.bind(e,a),e[i].options=t}};const hO=mn(oO),pO=Object.prototype.toString,mO=new Set(["network error","Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed","fetch failed","terminated"," A network error occurred."]);function fO(e){var t;if(!(e&&(t=e,"[object Error]"===pO.call(t))&&"TypeError"===e.name&&"string"==typeof e.message))return!1;const{message:n,stack:r}=e;return"Load failed"===n?void 0===r||"__sentry_captured__"in e:!!n.startsWith("error sending request for url")||mO.has(n)}class gO extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,({message:e}=e)):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}}const xO=(e,t,n)=>{const r=n.retries-(t-1);return e.attemptNumber=t,e.retriesLeft=r,e};async function vO(e,t){return new Promise((n,r)=>{(t={...t}).onFailedAttempt??(t.onFailedAttempt=()=>{}),t.shouldRetry??(t.shouldRetry=()=>!0),t.retries??(t.retries=10);const s=hO.operation(t),i=()=>{s.stop(),r(t.signal?.reason)};t.signal&&!t.signal.aborted&&t.signal.addEventListener("abort",i,{once:!0});const a=()=>{t.signal?.removeEventListener("abort",i),s.stop()};s.attempt(async i=>{try{const t=await e(i);a(),n(t)}catch(o){try{if(!(o instanceof Error))throw new TypeError(`Non-error was thrown: "${o}". You should only throw errors.`);if(o instanceof gO)throw o.originalError;if(o instanceof TypeError&&!fO(o))throw o;if(xO(o,i,t),await t.shouldRetry(o)||(s.stop(),r(o)),await t.onFailedAttempt(o),!s.retry(o))throw s.mainError()}catch(l){xO(l,i,t),a(),r(l)}}})})}const yO="5.0.1";class bO extends Error{constructor(){super("Authorization required"),_t(this,"isAuthError"),this.name="AuthError",this.isAuthError=!0}}class wO extends Error{constructor({statusCode:e,message:t}){super(t),_t(this,"statusCode"),this.name="HttpError",this.statusCode=e}}class jO{constructor(e,t){Ct(this,be),Ct(this,ye),_t(this,"uppy"),_t(this,"opts"),Ct(this,je,async({file:e,postBody:t,signal:n})=>{if(null==e.remote?.url)throw new Error("Cannot connect to an undefined URL");return(await this.post(e.remote.url,{...e.remote.body,...t},{signal:n})).token}),this.uppy=e,this.opts=t,this.onReceiveResponse=this.onReceiveResponse.bind(this),Et(this,ye,t.companionHeaders)}setCompanionHeaders(e){Et(this,ye,e)}[Symbol.for("uppy test: getCompanionHeaders")](){return Mt(this,ye)}get hostname(){const{companion:e}=this.uppy.getState(),t=this.opts.companionUrl;return(e?.[t]?e[t]:t).replace(/\/$/,"")}async headers(e=!1){return{...{Accept:"application/json",...e?void 0:{"Content-Type":"application/json"}},...Mt(this,ye)}}onReceiveResponse(e){const{headers:t}=e,n=this.uppy.getState().companion||{},r=this.opts.companionUrl;t.has("i-am")&&t.get("i-am")!==n[r]&&this.uppy.setState({companion:{...n,[r]:t.get("i-am")}})}async request({path:e,method:t="GET",data:n,skipPostResponse:r,signal:s}){try{const i=await this.headers(!n),a=await function(...e){return fetch(...e).catch(e=>{throw"AbortError"===e.name?e:new cC(e)})}(kt(this,be,we).call(this,e),{method:t,signal:s,headers:i,credentials:this.opts.companionCookiesRule||"same-origin",body:n?JSON.stringify(n):null});return r||this.onReceiveResponse(a),await async function(e){if(401===e.status)throw new bO;if(e.ok)return e.json();let t,n=`Failed request with status: ${e.status}. ${e.statusText}`;try{t=await e.json(),t.message&&(n=`${n} message: ${t.message}`),t.requestId&&(n=`${n} request-Id: ${t.requestId}`)}catch(r){throw new Error(n,{cause:r})}if(e.status>=400&&e.status<=499&&t.message)throw new IC(t.message);throw new wO({statusCode:e.status,message:n})}(a)}catch(PUe){if(PUe.isAuthError||"UserFacingApiError"===PUe.name||"AbortError"===PUe.name)throw PUe;throw new aC(`Could not ${t} ${kt(this,be,we).call(this,e)}`,{cause:PUe})}}async get(e,t){return this.request({...t,path:e})}async post(e,t,n){return this.request({...n,path:e,method:"POST",data:t})}async delete(e,t,n){return this.request({...n,path:e,method:"DELETE",data:t})}async uploadRemoteFile(e,t,n){try{const{signal:r,getQueue:s}=n||{};return await vO(async()=>{const n=this.uppy.getFile(e.id)?.serverToken;if(null!=n)return this.uppy.log(`Connecting to exiting websocket ${n}`),kt(this,be,Ne).call(this,{file:e,queue:s(),signal:r});const i=s().wrapPromiseFunction(async(...e)=>{try{return await Mt(this,je).call(this,...e)}catch(t){if(t.isAuthError)throw new gO(t);if(null==t.cause)throw t;const e=t.cause,n=()=>[408,409,429,418,423].includes(e.statusCode)||e.statusCode>=500&&e.statusCode<=599&&![501,505].includes(e.statusCode);if("HttpError"===e.name&&!n())throw new gO(e);throw e}},{priority:-1}),a=await i({file:e,postBody:t,signal:r}).abortOn(r);return this.uppy.getFile(e.id)?(this.uppy.setFileState(e.id,{serverToken:a}),kt(this,be,Ne).call(this,{file:this.uppy.getFile(e.id),queue:s(),signal:r})):void 0},{retries:10,signal:r,onFailedAttempt:e=>this.uppy.log(`Retrying upload due to: ${e.message}`,"warning")})}catch(PUe){if("AbortError"===PUe.name)return;throw this.uppy.emit("upload-error",e,PUe),PUe}}}ye=new WeakMap,be=new WeakSet,we=function(e){return/^(https?:|)\/\//.test(e)?e:`${this.hostname}/${e}`},je=new WeakMap,Ne=async function({file:e,queue:t,signal:n}){let r;const{capabilities:s}=this.uppy.getState();try{return await new Promise((i,a)=>{const o=e.serverToken,l=function(e){const t=/^(?:https?:\/\/|\/\/)?(?:[^@\n]+@)?([^\n]+)/i.exec(e)?.[1];return`${/^http:\/\//i.test(e)?"ws":"wss"}://${t}`}(e.remote.companionUrl);let c,d,u,{isPaused:h}=e;const p=(t,n)=>{null!=c&&c.readyState===c.OPEN?c.send(JSON.stringify({action:t,payload:n??{}})):this.uppy.log(`Cannot send "${t}" to socket ${e.id} because the socket state was ${String(c?.readyState)}`,"warning")};function m(){s.resumableUploads&&p(h?"pause":"resume")}const f=e=>{s.resumableUploads&&(h=e,c&&m())},g=t=>{s.individualCancellation&&t.id===e.id&&(p("cancel"),d?.abort?.(),this.uppy.log(`upload ${e.id} was removed`),i())},x=()=>{p("cancel"),d?.abort?.(),this.uppy.log(`upload ${e.id} was canceled`),i()},v=(t,n)=>{t?.id===e.id&&f(n)},y=()=>f(!0),b=()=>f(!1);this.uppy.on("file-removed",g),this.uppy.on("cancel-all",x),this.uppy.on("upload-pause",v),this.uppy.on("pause-all",y),this.uppy.on("resume-all",b),r=()=>{this.uppy.off("file-removed",g),this.uppy.off("cancel-all",x),this.uppy.off("upload-pause",v),this.uppy.off("pause-all",y),this.uppy.off("resume-all",b)},n.addEventListener("abort",()=>{d?.abort()}),(async()=>{d&&d.abort(),d=new AbortController;const n=t=>{this.uppy.setFileState(e.id,{serverToken:null}),d?.abort?.(),a(t)};function r(){clearTimeout(u),h||(u=setTimeout(()=>n(new Error("Timeout waiting for message from Companion socket")),3e5))}try{await t.wrapPromiseFunction(async()=>{await vO(async()=>new Promise((t,s)=>{c=new WebSocket(`${l}/api/${o}`),r(),c.addEventListener("close",()=>{c=void 0,s(new Error("Socket closed unexpectedly"))}),c.addEventListener("error",e=>{this.uppy.log(`Companion socket error ${JSON.stringify(e)}, closing socket`,"warning"),c?.close()}),c.addEventListener("open",()=>{m()}),c.addEventListener("message",t=>{r();try{const{action:n,payload:r}=JSON.parse(t.data);switch(n){case"progress":!function(e,t,n){const{progress:r,bytesUploaded:s,bytesTotal:i}=t;r&&(e.uppy.log(`Upload progress: ${r}`),e.uppy.emit("upload-progress",n,{uploadStarted:n.progress.uploadStarted??0,bytesUploaded:s,bytesTotal:i}))}(this,r,this.uppy.getFile(e.id));break;case"success":{const t=r.response?.responseText;this.uppy.emit("upload-success",this.uppy.getFile(e.id),{uploadURL:r.url,status:r.response?.status??200,body:t?JSON.parse(t):void 0}),d?.abort?.(),i();break}case"error":{const{message:e}=r.error;throw Object.assign(new Error(e),{cause:r.error})}default:this.uppy.log(`Companion socket unknown action ${n}`,"warning")}}catch(PUe){n(PUe)}});const a=()=>{this.uppy.log(`Closing socket ${e.id}`),clearTimeout(u),c&&c.close(),c=void 0};d.signal.addEventListener("abort",()=>{a()})}),{retries:10,signal:d.signal,onFailedAttempt:()=>{d.signal.aborted||this.uppy.log(`Retrying websocket ${e.id}`)}})})().abortOn(d.signal)}catch(PUe){if(d.signal.aborted)return;n(PUe)}})()})}finally{r?.()}},_t(jO,"VERSION",yO);const NO="5.0.1";const _O=new TextEncoder,SO={name:"HMAC",hash:"SHA-256"};function MO(e){const t=new Uint8Array(e);let n="";for(let r=0;r<t.length;r++)n+=t[r].toString(16).padStart(2,"0");return n}async function CO(e,t){const{subtle:n}=globalThis.crypto;return n.sign(SO,await async function(e){const{subtle:t}=globalThis.crypto;return t.importKey("raw","string"==typeof e?_O.encode(e):e,SO,!1,["sign"])}(e),_O.encode(t))}async function EO({accountKey:e,accountSecret:t,sessionToken:n,bucketName:r,Key:s,Region:i,expires:a,uploadId:o,partNumber:l}){const c="s3",d=`${c}.${i}.amazonaws.com`,u=`/${r}/${encodeURI(s).replace(/[;?:@&=+$,#!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`)}`,h="UNSIGNED-PAYLOAD",p=(new Date).toISOString().replace(/[-:]|\.\d+/g,""),m=p.slice(0,8),f=`${m}/${i}/${c}/aws4_request`,g=new URL(`https://${d}${u}`);g.searchParams.set("X-Amz-Algorithm","AWS4-HMAC-SHA256"),g.searchParams.set("X-Amz-Content-Sha256",h),g.searchParams.set("X-Amz-Credential",`${e}/${f}`),g.searchParams.set("X-Amz-Date",p),g.searchParams.set("X-Amz-Expires",a),g.searchParams.set("X-Amz-Security-Token",n),g.searchParams.set("X-Amz-SignedHeaders","host"),l&&g.searchParams.set("partNumber",l),o&&g.searchParams.set("uploadId",o),g.searchParams.set("x-id",l&&o?"UploadPart":"PutObject");const x=function({method:e="PUT",CanonicalUri:t="/",CanonicalQueryString:n="",SignedHeaders:r,HashedPayload:s}){const i=Object.keys(r).map(e=>e.toLowerCase()).sort();return[e,t,n,...i.map(e=>`${e}:${r[e]}`),"",i.join(";"),s].join("\n")}({CanonicalUri:u,CanonicalQueryString:g.search.slice(1),SignedHeaders:{host:d},HashedPayload:h}),v=["AWS4-HMAC-SHA256",p,f,MO(await async function(e){const{subtle:t}=globalThis.crypto;return t.digest(SO.hash,_O.encode(e))}(x))].join("\n"),y=await CO(`AWS4${t}`,m),b=await CO(y,i),w=await CO(b,c),j=await CO(w,"aws4_request"),N=MO(await CO(j,v));return g.searchParams.set("X-Amz-Signature",N),g}const kO={getChunkSize:e=>Math.ceil(e.size/1e4),onProgress(){},onPartComplete(){},onSuccess(){},onError(e){throw e}};const AO=Symbol("pausing upload, not an actual error");class TO{constructor(e,t){var n;Ct(this,Le),_t(this,"options"),Ct(this,_e,new rC),Ct(this,Se,[]),Ct(this,Me,[]),Ct(this,Ce),Ct(this,Ee),Ct(this,ke,!1),Ct(this,Ae),Ct(this,Te),Ct(this,Pe),Ct(this,Oe),Ct(this,Re,e=>e?.cause===AO?null:Mt(this,Ae).call(this,e)),Ct(this,Ie,1e4),Ct(this,De,5242880),Ct(this,Ue,e=>t=>{if(!t.lengthComputable)return;Mt(this,Me)[e].uploaded=function(e){if("string"==typeof e)return parseInt(e,10);if("number"==typeof e)return e;throw new TypeError("Expected a number")}(t.loaded);const n=Mt(this,Me).reduce((e,t)=>e+t.uploaded,0);this.options.onProgress(n,Mt(this,Ce).size)}),Ct(this,Ve,e=>t=>{Mt(this,Se)[e]=null,Mt(this,Me)[e].etag=t,Mt(this,Me)[e].done=!0;const n={PartNumber:e+1,ETag:t};this.options.onPartComplete(n)}),this.options={...kO,...t},(n=this.options).getChunkSize??(n.getChunkSize=kO.getChunkSize),Et(this,Ce,e),Et(this,Ee,t.file),Et(this,Te,this.options.onSuccess),Et(this,Ae,this.options.onError),Et(this,Pe,this.options.shouldUseMultipart),Et(this,Oe,t.uploadId&&t.key),kt(this,Le,Fe).call(this)}start(){Mt(this,ke)?(Mt(this,_e).signal.aborted||Mt(this,_e).abort(AO),Et(this,_e,new rC),kt(this,Le,Be).call(this)):Mt(this,Oe)?(this.options.companionComm.restoreUploadFile(Mt(this,Ee),{uploadId:this.options.uploadId,key:this.options.key}),kt(this,Le,Be).call(this)):kt(this,Le,ze).call(this)}pause(){Mt(this,_e).abort(AO),Et(this,_e,new rC)}abort(e){e?.really?kt(this,Le,He).call(this):this.pause()}[Symbol.for("uppy test: getChunkState")](){return Mt(this,Me)}}function PO(e){if(e?.aborted)throw sC("The operation was aborted",{cause:e.reason})}function OO(e){const t=new URL(e);return t.search="",t.hash="",t.href}_e=new WeakMap,Se=new WeakMap,Me=new WeakMap,Ce=new WeakMap,Ee=new WeakMap,ke=new WeakMap,Ae=new WeakMap,Te=new WeakMap,Pe=new WeakMap,Oe=new WeakMap,Re=new WeakMap,Ie=new WeakMap,De=new WeakMap,Le=new WeakSet,Fe=function(){const e=Mt(this,Ce).size,t="function"==typeof Mt(this,Pe)?Mt(this,Pe).call(this,Mt(this,Ee)):Boolean(Mt(this,Pe));if(t&&e>Mt(this,De)){let n=Math.max(this.options.getChunkSize(Mt(this,Ce)),Mt(this,De)),r=Math.floor(e/n);r>Mt(this,Ie)&&(r=Mt(this,Ie),n=e/Mt(this,Ie)),Et(this,Se,Array(r));for(let s=0,i=0;s<e;s+=n,i++){const r=Math.min(e,s+n),a=()=>{const e=s;return Mt(this,Ce).slice(e,r)};if(Mt(this,Se)[i]={getData:a,onProgress:Mt(this,Ue).call(this,i),onComplete:Mt(this,Ve).call(this,i),shouldUseMultipart:t},Mt(this,Oe)){const t=s+n>e?e-s:n;Mt(this,Se)[i].setAsUploaded=()=>{Mt(this,Se)[i]=null,Mt(this,Me)[i].uploaded=t}}}}else Et(this,Se,[{getData:()=>Mt(this,Ce),onProgress:Mt(this,Ue).call(this,0),onComplete:Mt(this,Ve).call(this,0),shouldUseMultipart:t}]);Et(this,Me,Mt(this,Se).map(()=>({uploaded:0})))},ze=function(){this.options.companionComm.uploadFile(Mt(this,Ee),Mt(this,Se),Mt(this,_e).signal).then(Mt(this,Te),Mt(this,Re)),Et(this,ke,!0)},Be=function(){this.options.companionComm.resumeUploadFile(Mt(this,Ee),Mt(this,Se),Mt(this,_e).signal).then(Mt(this,Te),Mt(this,Re))},Ue=new WeakMap,Ve=new WeakMap,He=function(){Mt(this,_e).abort(),this.options.companionComm.abortFileUpload(Mt(this,Ee)).catch(e=>this.options.log(e))};class RO{constructor(e,t,n,r){Ct(this,rt),Ct(this,We),Ct(this,$e,new WeakMap),Ct(this,Ge),Ct(this,qe),Ct(this,Xe),Ct(this,Ke),Ct(this,Ye),Ct(this,Ze),Ct(this,Je),Ct(this,Qe),Ct(this,et),Ct(this,tt),Ct(this,nt),Et(this,Ze,e),Et(this,et,n),Et(this,nt,r),this.setOptions(t)}setOptions(e){const t=Mt(this,Ze);"abortMultipartUpload"in e&&Et(this,We,t.wrapPromiseFunction(e.abortMultipartUpload,{priority:1})),"createMultipartUpload"in e&&Et(this,Ge,t.wrapPromiseFunction(e.createMultipartUpload,{priority:-1})),"signPart"in e&&Et(this,qe,t.wrapPromiseFunction(e.signPart)),"listParts"in e&&Et(this,Ke,t.wrapPromiseFunction(e.listParts)),"completeMultipartUpload"in e&&Et(this,Qe,t.wrapPromiseFunction(e.completeMultipartUpload,{priority:1})),"retryDelays"in e&&Et(this,Je,e.retryDelays??[]),"uploadPartBytes"in e&&Et(this,tt,t.wrapPromiseFunction(e.uploadPartBytes,{priority:1/0})),"getUploadParameters"in e&&Et(this,Xe,t.wrapPromiseFunction(e.getUploadParameters))}async getUploadId(e,t){let n;for(;n=Mt(this,$e).get(e.data),null!=n;)try{return await n}catch{}const r=Mt(this,Ge).call(this,Mt(this,nt).call(this,e),t),s=()=>{r.abort(t.reason),Mt(this,$e).delete(e.data)};return t.addEventListener("abort",s,{once:!0}),Mt(this,$e).set(e.data,r),r.then(async n=>{t.removeEventListener("abort",s),Mt(this,et).call(this,e,n),Mt(this,$e).set(e.data,n)},()=>{t.removeEventListener("abort",s),Mt(this,$e).delete(e.data)}),r}async abortFileUpload(e){const t=Mt(this,$e).get(e.data);if(null==t)return;let n;Mt(this,$e).delete(e.data),Mt(this,et).call(this,e,Object.create(null));try{n=await t}catch{return}await Mt(this,We).call(this,Mt(this,nt).call(this,e),n)}async uploadFile(e,t,n){if(PO(n),1===t.length&&!t[0].shouldUseMultipart)return kt(this,rt,it).call(this,e,t[0],n);const{uploadId:r,key:s}=await this.getUploadId(e,n);PO(n);try{const i=await Promise.all(t.map((t,r)=>this.uploadChunk(e,r+1,t,n)));return PO(n),await Mt(this,Qe).call(this,Mt(this,nt).call(this,e),{key:s,uploadId:r,parts:i,signal:n},n).abortOn(n)}catch(PUe){throw PUe?.cause!==AO&&"AbortError"!==PUe?.name&&this.abortFileUpload(e),PUe}}restoreUploadFile(e,t){Mt(this,$e).set(e.data,t)}async resumeUploadFile(e,t,n){if(PO(n),1===t.length&&null!=t[0]&&!t[0].shouldUseMultipart)return kt(this,rt,it).call(this,e,t[0],n);const{uploadId:r,key:s}=await this.getUploadId(e,n);PO(n);const i=await Mt(this,Ke).call(this,Mt(this,nt).call(this,e),{uploadId:r,key:s,signal:n},n).abortOn(n);PO(n);const a=await Promise.all(t.map((t,r)=>{const s=r+1,a=i.find(({PartNumber:e})=>e===s);return null==a?this.uploadChunk(e,s,t,n):(t?.setAsUploaded?.(),{PartNumber:s,ETag:a.ETag})}));return PO(n),Mt(this,Qe).call(this,Mt(this,nt).call(this,e),{key:s,uploadId:r,parts:a,signal:n},n).abortOn(n)}async uploadChunk(e,t,n,r){PO(r);const{uploadId:s,key:i}=await this.getUploadId(e,r),a=Mt(this,Je).values(),o=Mt(this,Je).values(),l=()=>{const e=a.next();return null==e||e.done?null:e.value};for(;;){PO(r);const a=n.getData(),{onProgress:c,onComplete:d}=n;let u;try{u=await Mt(this,qe).call(this,Mt(this,nt).call(this,e),{uploadId:s,key:i,partNumber:t,body:a,signal:r}).abortOn(r)}catch(PUe){const t=l();if(null==t||r.aborted)throw PUe;await new Promise(e=>setTimeout(e,t));continue}PO(r);try{return{PartNumber:t,...await Mt(this,tt).call(this,{signature:u,body:a,size:a.size,onProgress:c,onComplete:d,signal:r}).abortOn(r)}}catch(PUe){if(!(await kt(this,rt,st).call(this,PUe,o)))throw PUe}}}}function IO(e){if(e?.error){const t=new Error(e.message);throw Object.assign(t,e.error),t}return e}function DO(e){const t=e.Expiration;if(t){const e=Math.floor((new Date(t)-Date.now())/1e3);if(e>9)return e}}function LO({meta:e,allowedMetaFields:t,querify:n=!1}){const r=t??Object.keys(e);return e?Object.fromEntries(r.filter(t=>null!=e[t]).map(t=>[n?`metadata[${t}]`:t,String(e[t])])):{}}We=new WeakMap,$e=new WeakMap,Ge=new WeakMap,qe=new WeakMap,Xe=new WeakMap,Ke=new WeakMap,Ye=new WeakMap,Ze=new WeakMap,Je=new WeakMap,Qe=new WeakMap,et=new WeakMap,tt=new WeakMap,nt=new WeakMap,rt=new WeakSet,st=async function(e,t){const n=Mt(this,Ze),r=e?.source?.status;if(null==r)return!1;if(403===r&&"Request has expired"===e.message){if(!n.isPaused){if(1===n.limit||null==Mt(this,Ye)){const e=t.next();if(null==e||e.done)return!1;Et(this,Ye,e.value)}n.rateLimit(0),await new Promise(e=>setTimeout(e,Mt(this,Ye)))}}else if(429===r){if(!n.isPaused){const e=t.next();if(null==e||e.done)return!1;n.rateLimit(e.value)}}else{if(r>400&&r<500&&409!==r)return!1;if("undefined"!=typeof navigator&&!1===navigator.onLine)n.isPaused||(n.pause(),window.addEventListener("online",()=>{n.resume()},{once:!0}));else{const e=t.next();if(null==e||e.done)return!1;await new Promise(t=>setTimeout(t,e.value))}}return!0},it=async function(e,t,n){const{method:r="POST",url:s,fields:i,headers:a}=await Mt(this,Xe).call(this,Mt(this,nt).call(this,e),{signal:n}).abortOn(n);let o;const l=t.getData();if("POST"===r.toUpperCase()){const e=new FormData;Object.entries(i).forEach(([t,n])=>e.set(t,n)),e.set("file",l),o=e}else o=l;const{onProgress:c,onComplete:d}=t,u=await Mt(this,tt).call(this,{signature:{url:s,headers:a,method:r},body:o,size:l.size,onProgress:c,onComplete:d,signal:n}).abortOn(n),h=i?.key;return Mt(this,et).call(this,e,{key:h}),{...u,location:u.location??OO(s),bucket:i?.bucket,key:h}};const FO={allowedMetaFields:!0,limit:6,getTemporarySecurityCredentials:!1,shouldUseMultipart:e=>(e.size||0)>104857600,retryDelays:[0,1e3,3e3,5e3]},zO=class e extends ek{constructor(t,n){super(t,{...FO,uploadPartBytes:e.uploadPartBytes,createMultipartUpload:null,listParts:null,abortMultipartUpload:null,completeMultipartUpload:null,signPart:null,getUploadParameters:null,...n}),Ct(this,lt),Ct(this,at),Ct(this,ot),_t(this,"requests"),_t(this,"uploaderEvents"),_t(this,"uploaders"),Ct(this,ut),Ct(this,pt,(e,{key:t,uploadId:n})=>{const r=this.uppy.getFile(e.id);null!=r&&this.uppy.setFileState(e.id,{s3Multipart:{...r.s3Multipart,key:t,uploadId:n}})}),Ct(this,mt,e=>this.uppy.getFile(e.id)||e),Ct(this,xt,async e=>{if(0===e.length)return;const t=function(e){return e.filter(e=>!(e=>"error"in e&&!!e.error)(e))}(this.uppy.getFilesByIds(e)),n=function(e){return e.filter(e=>!e.progress?.uploadStarted||!e.isRestored)}(t);this.uppy.emit("upload-start",n);const r=t.map(e=>{if(e.isRemote){const t=()=>this.requests;Mt(this,yt).call(this,!1);const n=new AbortController,r=t=>{t.id===e.id&&n.abort()};this.uppy.on("file-removed",r);const s=this.uppy.getRequestClientForFile(e).uploadRemoteFile(e,kt(this,lt,gt).call(this,e),{signal:n.signal,getQueue:t});return this.requests.wrapSyncFunction(()=>{this.uppy.off("file-removed",r)},{priority:-1})(),s}return kt(this,lt,ft).call(this,e)}),s=await Promise.allSettled(r);return Mt(this,yt).call(this,!0),s}),Ct(this,vt,()=>{Mt(this,ot)?.setCompanionHeaders(this.opts.headers)}),Ct(this,yt,e=>{const{capabilities:t}=this.uppy.getState();this.uppy.setState({capabilities:{...t,resumableUploads:e}})}),Ct(this,bt,()=>{Mt(this,yt).call(this,!0)}),this.type="uploader",this.id=this.opts.id||"AwsS3Multipart",kt(this,lt,ct).call(this,n);const r={createMultipartUpload:this.createMultipartUpload,listParts:this.listParts,abortMultipartUpload:this.abortMultipartUpload,completeMultipartUpload:this.completeMultipartUpload,signPart:n?.getTemporarySecurityCredentials?this.createSignedURL:this.signPart,getUploadParameters:n?.getTemporarySecurityCredentials?this.createSignedURL:this.getUploadParameters};for(const e of Object.keys(r))null==this.opts[e]&&(this.opts[e]=r[e].bind(this));this.requests=this.opts.rateLimitedQueue??new EC(this.opts.limit),Et(this,at,new RO(this.requests,this.opts,Mt(this,pt),Mt(this,mt))),this.uploaders=Object.create(null),this.uploaderEvents=Object.create(null)}[Symbol.for("uppy test: getClient")](){return Mt(this,ot)}setOptions(e){Mt(this,at).setOptions(e),super.setOptions(e),kt(this,lt,ct).call(this,e)}resetUploaderReferences(e,t){this.uploaders[e]&&(this.uploaders[e].abort({really:t?.abort||!1}),this.uploaders[e]=null),this.uploaderEvents[e]&&(this.uploaderEvents[e].remove(),this.uploaderEvents[e]=null)}createMultipartUpload(e,t){kt(this,lt,dt).call(this,"createMultipartUpload"),PO(t);const n=xC(this.opts.allowedMetaFields,e.meta),r=LO({meta:e.meta,allowedMetaFields:n});return Mt(this,ot).post("s3/multipart",{filename:e.name,type:e.type,metadata:r},{signal:t}).then(IO)}listParts(e,{key:t,uploadId:n,signal:r},s){r??(r=s),kt(this,lt,dt).call(this,"listParts"),PO(r);const i=encodeURIComponent(t);return Mt(this,ot).get(`s3/multipart/${encodeURIComponent(n)}?key=${i}`,{signal:r}).then(IO)}completeMultipartUpload(e,{key:t,uploadId:n,parts:r,signal:s},i){s??(s=i),kt(this,lt,dt).call(this,"completeMultipartUpload"),PO(s);const a=encodeURIComponent(t),o=encodeURIComponent(n);return Mt(this,ot).post(`s3/multipart/${o}/complete?key=${a}`,{parts:r.map(({ETag:e,PartNumber:t})=>({ETag:e,PartNumber:t}))},{signal:s}).then(IO)}async createSignedURL(e,t){const n=await kt(this,lt,ht).call(this,t),r=DO(n.credentials)||604800,{uploadId:s,key:i,partNumber:a}=t;return{method:"PUT",expires:r,fields:{},url:`${await EO({accountKey:n.credentials.AccessKeyId,accountSecret:n.credentials.SecretAccessKey,sessionToken:n.credentials.SessionToken,expires:r,bucketName:n.bucket,Region:n.region,Key:i??`${crypto.randomUUID()}-${e.name}`,uploadId:s,partNumber:a})}`,headers:{"Content-Type":e.type}}}signPart(e,{uploadId:t,key:n,partNumber:r,signal:s}){if(kt(this,lt,dt).call(this,"signPart"),PO(s),null==t||null==n||null==r)throw new Error("Cannot sign without a key, an uploadId, and a partNumber");const i=encodeURIComponent(n);return Mt(this,ot).get(`s3/multipart/${encodeURIComponent(t)}/${r}?key=${i}`,{signal:s}).then(IO)}abortMultipartUpload(e,{key:t,uploadId:n,signal:r}){kt(this,lt,dt).call(this,"abortMultipartUpload");const s=encodeURIComponent(t),i=encodeURIComponent(n);return Mt(this,ot).delete(`s3/multipart/${i}?key=${s}`,void 0,{signal:r}).then(IO)}getUploadParameters(e,t){kt(this,lt,dt).call(this,"getUploadParameters");const{meta:n}=e,{type:r,name:s}=n,i=LO({meta:n,allowedMetaFields:xC(this.opts.allowedMetaFields,e.meta),querify:!0}),a=new URLSearchParams({filename:s,type:r,...i});return Mt(this,ot).get(`s3/params?${a}`,t)}static async uploadPartBytes({signature:{url:e,expires:t,headers:n,method:r="PUT"},body:s,size:i=s.size,onProgress:a,onComplete:o,signal:l}){if(PO(l),null==e)throw new Error("Cannot upload to an undefined URL");return new Promise((c,d)=>{const u=new XMLHttpRequest;function h(){u.abort()}function p(){l?.removeEventListener("abort",h)}u.open(r,e,!0),n&&Object.keys(n).forEach(e=>{u.setRequestHeader(e,n[e])}),u.responseType="text","number"==typeof t&&(u.timeout=1e3*t),l?.addEventListener("abort",h),u.upload.addEventListener("progress",e=>{a(e)}),u.addEventListener("abort",()=>{p(),d(sC())}),u.addEventListener("timeout",()=>{p();const e=new Error("Request has expired");e.source={status:403},d(e)}),u.addEventListener("load",()=>{if(p(),403===u.status&&u.responseText.includes("<Message>Request has expired</Message>")){const e=new Error("Request has expired");return e.source=u,void d(e)}if(u.status<200||u.status>=300){const e=new Error("Non 2xx");return e.source=u,void d(e)}a?.({loaded:i,lengthComputable:!0});const e=u.getAllResponseHeaders().trim().split(/[\r\n]+/),t={__proto__:null};for(const r of e){const e=r.split(": "),n=e.shift(),s=e.join(": ");t[n]=s}const{etag:n,location:s}=t;r.toUpperCase(),null!=n&&(o?.(n),c({...t,ETag:n}))}),u.addEventListener("error",e=>{p();const t=new Error("Unknown error");t.source=e.target,d(t)}),u.send(s)})}install(){Mt(this,yt).call(this,!0),this.uppy.addPreProcessor(Mt(this,vt)),this.uppy.addUploader(Mt(this,xt)),this.uppy.on("cancel-all",Mt(this,bt))}uninstall(){this.uppy.removePreProcessor(Mt(this,vt)),this.uppy.removeUploader(Mt(this,xt)),this.uppy.off("cancel-all",Mt(this,bt))}};at=new WeakMap,ot=new WeakMap,lt=new WeakSet,ct=function(e){null!=e&&("endpoint"in e||"companionUrl"in e||"headers"in e||"companionHeaders"in e||"cookiesRule"in e||"companionCookiesRule"in e)&&("companionUrl"in e&&!("endpoint"in e)&&this.uppy.log("`companionUrl` option has been removed in @uppy/aws-s3, use `endpoint` instead.","warning"),"companionHeaders"in e&&!("headers"in e)&&this.uppy.log("`companionHeaders` option has been removed in @uppy/aws-s3, use `headers` instead.","warning"),"companionCookiesRule"in e&&!("cookiesRule"in e)&&this.uppy.log("`companionCookiesRule` option has been removed in @uppy/aws-s3, use `cookiesRule` instead.","warning"),"endpoint"in e?Et(this,ot,new jO(this.uppy,{pluginId:this.id,provider:"AWS",companionUrl:this.opts.endpoint,companionHeaders:this.opts.headers,companionCookiesRule:this.opts.cookiesRule})):("headers"in e&&Mt(this,vt).call(this),"cookiesRule"in e&&(Mt(this,ot).opts.companionCookiesRule=e.cookiesRule)))},dt=function(e){if(!Mt(this,ot))throw new Error(`Expected a \`endpoint\` option containing a URL, or if you are not using Companion, a custom \`${e}\` implementation.`)},ut=new WeakMap,ht=async function(e){if(PO(e?.signal),null==Mt(this,ut)){const{getTemporarySecurityCredentials:t}=this.opts;!0===t?(kt(this,lt,dt).call(this,"getTemporarySecurityCredentials"),Et(this,ut,Mt(this,ot).get("s3/sts",e).then(IO))):Et(this,ut,t(e)),Et(this,ut,await Mt(this,ut)),setTimeout(()=>{Et(this,ut,null)},500*(DO(Mt(this,ut).credentials)||0))}return Mt(this,ut)},pt=new WeakMap,mt=new WeakMap,ft=function(e){return new Promise((t,n)=>{const r=new TO(e.data,{companionComm:Mt(this,at),log:(...e)=>this.uppy.log(...e),getChunkSize:this.opts.getChunkSize?this.opts.getChunkSize.bind(this):void 0,onProgress:(t,n)=>{const r=this.uppy.getFile(e.id);this.uppy.emit("upload-progress",r,{uploadStarted:r.progress.uploadStarted??0,bytesUploaded:t,bytesTotal:n})},onError:t=>{this.uppy.log(t),this.uppy.emit("upload-error",e,t),this.resetUploaderReferences(e.id),n(t)},onSuccess:n=>{const r={body:{...n},status:200,uploadURL:n.location};this.resetUploaderReferences(e.id),this.uppy.emit("upload-success",Mt(this,mt).call(this,e),r),n.location&&this.uppy.log(`Download ${e.name} from ${n.location}`),t(void 0)},onPartComplete:t=>{this.uppy.emit("s3-multipart:part-uploaded",Mt(this,mt).call(this,e),t)},file:e,shouldUseMultipart:this.opts.shouldUseMultipart,...e.s3Multipart});this.uploaders[e.id]=r;const s=new tk(this.uppy);this.uploaderEvents[e.id]=s,s.onFileRemove(e.id,n=>{r.abort(),this.resetUploaderReferences(e.id,{abort:!0}),t(`upload ${n} was removed`)}),s.onCancelAll(e.id,()=>{r.abort(),this.resetUploaderReferences(e.id,{abort:!0}),t(`upload ${e.id} was canceled`)}),s.onFilePause(e.id,e=>{e?r.pause():r.start()}),s.onPauseAll(e.id,()=>{r.pause()}),s.onResumeAll(e.id,()=>{r.start()}),r.start()})},gt=function(e){return{...e.remote?.body,protocol:"s3-multipart",size:e.data.size,metadata:e.meta}},xt=new WeakMap,vt=new WeakMap,yt=new WeakMap,bt=new WeakMap,_t(zO,"VERSION",NO);let BO=zO;function UO({maxNumberOfFiles:e=1,maxFileSize:t=10485760,onGetUploadParameters:n,onComplete:r,buttonClassName:s,children:i}){const[a,o]=hn.useState(!1),[l]=hn.useState(()=>new fA({restrictions:{maxNumberOfFiles:e,maxFileSize:t},autoProceed:!1}).use(BO,{shouldUseMultipart:!1,getUploadParameters:n}).on("complete",e=>{r?.(e)}));return Ot.jsxs("div",{children:[Ot.jsx(Ln,{onClick:()=>o(!0),className:s,type:"button",children:i}),Ot.jsx(aO,{uppy:l,open:a,onRequestClose:()=>o(!1),proudlyDisplayPoweredByUppy:!1})]})}const VO=({className:e,containerRef:t,fromRef:n,toRef:r,curvature:s=0,reverse:i=!1,duration:a=3*Math.random()+4,delay:o=0,pathColor:l="gray",pathWidth:c=2,pathOpacity:d=.2,gradientStartColor:u="#ffaa40",gradientStopColor:h="#9c40ff",startXOffset:p=0,startYOffset:m=0,endXOffset:f=0,endYOffset:g=0})=>{const x=hn.useId(),[v,y]=hn.useState(""),[b,w]=hn.useState({width:0,height:0}),j=i?{x1:["90%","-10%"],x2:["100%","0%"],y1:["0%","0%"],y2:["0%","0%"]}:{x1:["10%","110%"],x2:["0%","100%"],y1:["0%","0%"],y2:["0%","0%"]};return hn.useEffect(()=>{const e=()=>{if(t.current&&n.current&&r.current){const e=t.current.getBoundingClientRect(),i=n.current.getBoundingClientRect(),a=r.current.getBoundingClientRect(),o=e.width,l=e.height;w({width:o,height:l});const c=i.left-e.left+i.width/2+p,d=i.top-e.top+i.height/2+m,u=a.left-e.left+a.width/2+f,h=a.top-e.top+a.height/2+g;y(`M ${c},${d} Q ${(c+u)/2},${d-s} ${u},${h}`)}},i=new ResizeObserver(t=>{for(let n of t)e()});return t.current&&i.observe(t.current),e(),()=>{i.disconnect()}},[t,n,r,s,p,m,f,g]),Ot.jsxs("svg",{fill:"none",width:b.width,height:b.height,xmlns:"http://www.w3.org/2000/svg",className:bn("pointer-events-none absolute left-0 top-0 transform-gpu stroke-2",e),viewBox:`0 0 ${b.width} ${b.height}`,children:[Ot.jsx("path",{d:v,stroke:l,strokeWidth:c,strokeOpacity:d,strokeLinecap:"round"}),Ot.jsx("path",{d:v,strokeWidth:c,stroke:`url(#${x})`,strokeOpacity:"1",strokeLinecap:"round"}),Ot.jsx("defs",{children:Ot.jsxs(wo.linearGradient,{className:"transform-gpu",id:x,gradientUnits:"userSpaceOnUse",initial:{x1:"0%",x2:"0%",y1:"0%",y2:"0%"},animate:{x1:j.x1,x2:j.x2,y1:j.y1,y2:j.y2},transition:{delay:o,duration:a,ease:[.16,1,.3,1],repeat:1/0,repeatDelay:0},children:[Ot.jsx("stop",{stopColor:u,stopOpacity:"0"}),Ot.jsx("stop",{stopColor:u}),Ot.jsx("stop",{offset:"32.5%",stopColor:h}),Ot.jsx("stop",{offset:"100%",stopColor:h,stopOpacity:"0"})]})})]})},HO=hn.forwardRef(({className:e,children:t},n)=>Ot.jsx("div",{ref:n,className:bn("z-10 flex size-16 items-center justify-center rounded-full border-2 p-4 shadow-lg dark:border-gray-700 transition-all hover:scale-110",e),style:{backgroundColor:"rgba(255, 255, 255, 0.15)",backdropFilter:"blur(12px)",WebkitBackdropFilter:"blur(12px)"},children:t}));function WO(){const{user:e}=Ua(),{toast:t}=Nn(),[n,r]=hn.useState(null),[s,i]=hn.useState(null),[a,o]=hn.useState(""),[l,c]=hn.useState("");hn.useState(!1);const[d,u]=hn.useState(new Set),[h,p]=hn.useState(!1);hn.useState(!1);const m=hn.useRef(null),f=hn.useRef(),g=hn.useRef(null),x=hn.useRef(null),v=hn.useRef(null),y=hn.useRef(null),b=hn.useRef(null),w=hn.useRef(null),j=hn.useRef(null),N=hn.useRef(null),_=hn.useRef(null),{socket:S,connected:M}=xM(),C=()=>{m.current?.scrollIntoView({behavior:"smooth"})};hn.useEffect(()=>{C()},[n]),hn.useEffect(()=>{if(!S)return;const e=e=>{vr.invalidateQueries({queryKey:["/api/messages/conversations"]}),n===e.conversationId&&vr.invalidateQueries({queryKey:["/api/messages",s]}),C()},t=e=>{e.conversationId===n&&u(t=>new Set(t).add(e.userId))},r=e=>{e.conversationId===n&&u(t=>{const n=new Set(t);return n.delete(e.userId),n})};return S.on("message:new",e),S.on("typing:start",t),S.on("typing:stop",r),()=>{S.off("message:new",e),S.off("typing:start",t),S.off("typing:stop",r)}},[S,n,s]);const{data:E=[],isLoading:k}=za({queryKey:["/api/messages/conversations"]}),{data:A=[],isLoading:T}=za({queryKey:["/api/messages",s],enabled:!!s}),{data:P=[]}=za({queryKey:["/api/businesses/my"]}),{data:O=0}=za({queryKey:["/api/messages/unread-count"],refetchInterval:3e4}),R=Fa({mutationFn:async e=>await qn("POST","/api/messages",e),onSuccess:()=>{o(""),S&&n&&S.emit("typing:stop",{conversationId:n}),vr.invalidateQueries({queryKey:["/api/messages/conversations"]}),vr.invalidateQueries({queryKey:["/api/messages",s]}),C()},onError:e=>{t({title:"Error",description:"Failed to send message. Please try again.",variant:"destructive"})}}),I=Fa({mutationFn:async e=>await qn("POST","/api/messages/share-business",e),onSuccess:()=>{p(!1),t({title:"Business shared",description:"Business profile shared successfully."})}}),D=Fa({mutationFn:async e=>await qn("POST","/api/messages/upload",e),onSuccess:()=>{t({title:"File shared",description:"File uploaded and shared successfully."}),vr.invalidateQueries({queryKey:["/api/messages/conversations"]}),vr.invalidateQueries({queryKey:["/api/messages",s]}),C()},onError:()=>{t({title:"Upload failed",description:"Failed to upload file. Please try again.",variant:"destructive"})}}),L=Fa({mutationFn:async e=>await qn("PUT",`/api/messages/${e}/read`),onSuccess:()=>{vr.invalidateQueries({queryKey:["/api/messages/unread-count"]}),vr.invalidateQueries({queryKey:["/api/messages",s]})}}),F=()=>{a.trim()&&s&&!R.isPending&&R.mutate({receiverId:s,content:a.trim()})};hn.useEffect(()=>{if(A.length>0&&s){A.filter(t=>t.receiverId===e?.id&&!t.isRead).forEach(e=>{L.mutate(e.id)})}},[A,s,e?.id]);return k?Ot.jsx("div",{className:"min-h-screen",children:Ot.jsx("div",{className:"container mx-auto px-4 py-8",children:Ot.jsxs("div",{className:"grid lg:grid-cols-4 gap-6 h-[calc(100vh-200px)]",children:[Ot.jsx("div",{className:"lg:col-span-1 space-y-4",children:[...Array(5)].map((e,t)=>Ot.jsxs("div",{className:"flex items-center space-x-3 p-4",children:[Ot.jsx(er,{className:"h-12 w-12 rounded-full"}),Ot.jsxs("div",{className:"space-y-2 flex-1",children:[Ot.jsx(er,{className:"h-4 w-3/4"}),Ot.jsx(er,{className:"h-3 w-1/2"})]})]},t))}),Ot.jsx("div",{className:"lg:col-span-3",children:Ot.jsx(er,{className:"h-full w-full rounded-lg"})})]})})}):Ot.jsx("div",{className:"min-h-screen",children:Ot.jsxs("div",{className:"container mx-auto px-4 py-8 messages-container",children:[Ot.jsx("div",{className:"mb-6 relative z-10",children:Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{children:[Ot.jsx("h1",{className:"text-3xl font-bold gradient-text-primary",children:"Florida Business Network"}),Ot.jsxs("p",{className:"text-muted-foreground flex items-center gap-2",children:[Ot.jsx(Bn,{className:"h-4 w-4 text-orange-500"}),"Connect and collaborate with local businesses"]})]}),Ot.jsxs("div",{className:"flex items-center gap-4",children:[Ot.jsxs(Tn,{variant:"outline",className:"hidden sm:flex",children:[Ot.jsx(Kr,{className:"h-2 w-2 mr-2 fill-current "+(M?"text-green-500":"text-red-500")}),M?"Connected":"Connecting..."]}),"object"==typeof O&&O.unreadCount>0&&Ot.jsxs(Tn,{variant:"default",className:"bg-orange-500",children:[O.unreadCount," unread"]})]})]})}),Ot.jsxs(Sn,{className:"mb-8 miami-glass border-orange-200/50 dark:border-gray-700/50 overflow-hidden",children:[Ot.jsxs("div",{className:"relative flex h-[300px] w-full items-center justify-center p-8 bg-gradient-to-br from-orange-50/50 to-blue-50/50 dark:from-gray-800/50 dark:to-gray-900/50",ref:x,children:[Ot.jsxs("div",{className:"relative w-full h-full max-w-4xl",children:[Ot.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2",children:Ot.jsx(HO,{ref:j,className:"size-20 sm:size-24 border-4 border-gradient-primary shadow-xl bg-gradient-to-br from-orange-100 to-blue-100 dark:from-orange-900/30 dark:to-blue-900/30",children:Ot.jsx("div",{className:"h-10 w-10 sm:h-12 sm:w-12 rounded-full bg-gradient-to-r from-orange-700 to-blue-700 flex items-center justify-center",children:Ot.jsx(Yr,{className:"h-6 w-6 sm:h-7 sm:w-7 text-white"})})})}),Ot.jsx("div",{className:"absolute top-[8%] left-[6%] sm:left-[8%]",children:Ot.jsx(HO,{ref:v,className:"border-orange-500 dark:border-orange-600",children:Ot.jsx(On,{className:"h-6 w-6 sm:h-8 sm:w-8 text-orange-600 dark:text-orange-400"})})}),Ot.jsx("div",{className:"absolute top-[48%] left-[3%] sm:left-[5%]",children:Ot.jsx(HO,{ref:_,className:"border-teal-500 dark:border-teal-600",children:Ot.jsx(Zr,{className:"h-6 w-6 sm:h-8 sm:w-8 text-teal-600 dark:text-teal-400"})})}),Ot.jsx("div",{className:"absolute bottom-[8%] left-[10%] sm:left-[13%]",children:Ot.jsx(HO,{ref:w,className:"border-purple-500 dark:border-purple-600",children:Ot.jsx(Jr,{className:"h-6 w-6 sm:h-8 sm:w-8 text-purple-600 dark:text-purple-400"})})}),Ot.jsx("div",{className:"absolute top-[10%] right-[8%] sm:right-[10%]",children:Ot.jsx(HO,{ref:y,className:"border-blue-500 dark:border-blue-600",children:Ot.jsx(Or,{className:"h-6 w-6 sm:h-8 sm:w-8 text-blue-600 dark:text-blue-400"})})}),Ot.jsx("div",{className:"absolute top-[46%] right-[3%] sm:right-[5%]",children:Ot.jsx(HO,{ref:b,className:"border-green-500 dark:border-green-600",children:Ot.jsx(Qr,{className:"h-6 w-6 sm:h-8 sm:w-8 text-green-600 dark:text-green-400"})})}),Ot.jsx("div",{className:"absolute bottom-[10%] right-[13%] sm:right-[16%]",children:Ot.jsx(HO,{ref:N,className:"border-pink-500 dark:border-pink-600",children:Ot.jsx(es,{className:"h-6 w-6 sm:h-8 sm:w-8 text-pink-600 dark:text-pink-400"})})})]}),Ot.jsx(VO,{containerRef:x,fromRef:v,toRef:j,curvature:-50,gradientStartColor:"#f97316",gradientStopColor:"#ea580c"}),Ot.jsx(VO,{containerRef:x,fromRef:y,toRef:j,curvature:0,gradientStartColor:"#3b82f6",gradientStopColor:"#2563eb"}),Ot.jsx(VO,{containerRef:x,fromRef:b,toRef:j,curvature:50,gradientStartColor:"#10b981",gradientStopColor:"#059669"}),Ot.jsx(VO,{containerRef:x,fromRef:w,toRef:j,curvature:50,reverse:!0,gradientStartColor:"#a855f7",gradientStopColor:"#9333ea"}),Ot.jsx(VO,{containerRef:x,fromRef:N,toRef:j,curvature:0,reverse:!0,gradientStartColor:"#ec4899",gradientStopColor:"#db2777"}),Ot.jsx(VO,{containerRef:x,fromRef:_,toRef:j,curvature:-50,reverse:!0,gradientStartColor:"#14b8a6",gradientStopColor:"#0d9488"})]}),Ot.jsx(Mn,{className:"py-4 text-center border-t border-border/50",children:Ot.jsx("p",{className:"text-sm text-muted-foreground",children:"Real-time messaging network connecting Florida businesses"})})]}),Ot.jsxs("div",{className:"grid lg:grid-cols-4 gap-6 h-[calc(100vh-200px)] relative z-10",children:[Ot.jsxs(Sn,{className:"lg:col-span-1 miami-glass border-orange-200/50 messages-conversation-list",children:[Ot.jsxs(Lr,{className:"pb-3 relative z-10",children:[Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs(zr,{className:"text-lg flex items-center gap-2",children:[Ot.jsx(On,{className:"h-5 w-5 text-orange-500"}),"Conversations"]}),Ot.jsx(Ln,{size:"sm",variant:"ghost",className:"h-8 w-8 p-0",children:Ot.jsx(Fn,{className:"h-4 w-4"})})]}),Ot.jsxs("div",{className:"relative",children:[Ot.jsx(Fn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),Ot.jsx(zn,{placeholder:"Search conversations...",value:l,onChange:e=>c(e.target.value),className:"pl-10","data-testid":"input-search-conversations"})]})]}),Ot.jsx(Mn,{className:"p-0 relative z-10",children:Ot.jsx(eC,{className:"h-96",children:E.length>0?E.filter(e=>!l||e.businessName?.toLowerCase().includes(l.toLowerCase())||e.content?.toLowerCase().includes(l.toLowerCase())).map(t=>{const n=t.senderId===e?.id?t.receiverId:t.senderId,a=s===n;return Ot.jsxs("div",{className:"messages-conversation-item flex items-center space-x-3 p-4 cursor-pointer hover:bg-muted/50 transition-colors border-b border-border/50 "+(a?"bg-muted border-l-4 border-l-orange-500":""),onClick:()=>(t=>{const n=t.senderId===e?.id?t.receiverId:t.senderId,s=[e?.id,n].sort().join("-");S&&g.current&&g.current!==s&&S.emit("leave:conversation",g.current),i(n),r(s),S&&(S.emit("join:conversation",s),g.current=s)})(t),"data-testid":`conversation-${n}`,children:[Ot.jsxs("div",{className:"relative z-10",children:[Ot.jsxs(ou,{className:"h-12 w-12",children:[Ot.jsx(lu,{src:t.avatar,alt:"User"}),Ot.jsx(cu,{className:"bg-gradient-to-r from-orange-700 to-blue-700 text-white",children:t.businessName?.charAt(0)||"B"})]}),Ot.jsx("div",{className:"absolute -bottom-1 -right-1 h-4 w-4 rounded-full border-2 border-background "+(t.isOnline?"bg-green-500":"bg-gray-400")})]}),Ot.jsxs("div",{className:"flex-1 min-w-0 relative z-10",children:[Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsx("p",{className:"font-medium truncate",children:t.businessName||"Business User"}),!t.isRead&&t.receiverId===e?.id&&Ot.jsx("div",{className:"h-2 w-2 bg-orange-500 rounded-full"})]}),Ot.jsx("p",{className:"text-sm text-muted-foreground truncate",children:t.content}),Ot.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[Ot.jsx(xr,{className:"h-3 w-3 text-muted-foreground"}),Ot.jsx("span",{className:"text-xs text-muted-foreground",children:t.createdAt?new Date(t.createdAt).toLocaleDateString():"Recent"})]})]})]},n)}):Ot.jsxs("div",{className:"text-center py-12 messages-empty-state",children:[Ot.jsx("div",{className:"mx-auto h-16 w-16 bg-gradient-to-r from-orange-700 to-blue-700 rounded-full flex items-center justify-center mb-4 relative z-10",children:Ot.jsx(Zr,{className:"h-8 w-8 text-white"})}),Ot.jsx("p",{className:"text-muted-foreground font-medium relative z-10",children:"No conversations yet"}),Ot.jsx("p",{className:"text-sm text-muted-foreground relative z-10",children:"Start networking with Florida businesses"})]})})})]}),Ot.jsx(Sn,{className:"lg:col-span-3 miami-glass border-blue-200/50 messages-chat-view",children:n&&s?Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(Lr,{className:"border-b border-border/50 relative z-10",children:Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{className:"flex items-center space-x-3",children:[Ot.jsxs(ou,{className:"h-12 w-12",children:[Ot.jsx(lu,{src:"",alt:"User"}),Ot.jsx(cu,{className:"bg-gradient-to-r from-orange-700 to-blue-700 text-white",children:"B"})]}),Ot.jsxs("div",{children:[Ot.jsx(zr,{className:"text-lg",children:"Business User"}),Ot.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[Ot.jsx(Kr,{className:"h-2 w-2 fill-current text-green-500"}),Ot.jsx("span",{children:"Online now"}),d.size>0&&Ot.jsx("span",{className:"text-orange-500 italic",children:"typing..."})]})]})]}),Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx(Ln,{size:"sm",variant:"ghost",children:Ot.jsx(Qr,{className:"h-4 w-4"})}),Ot.jsx(Ln,{size:"sm",variant:"ghost",children:Ot.jsx(ts,{className:"h-4 w-4"})})]})]})}),Ot.jsxs(Mn,{className:"p-0 flex flex-col relative z-10",children:[Ot.jsx(eC,{className:"flex-1 h-96 p-4",children:T?Ot.jsx("div",{className:"space-y-4",children:[...Array(5)].map((e,t)=>Ot.jsx("div",{className:"flex "+(t%2==0?"justify-start":"justify-end"),children:Ot.jsx(er,{className:"h-16 w-3/4 max-w-xs rounded-lg"})},t))}):A.length>0?Ot.jsxs("div",{className:"space-y-2",children:[A.map(t=>{const n=t.senderId===e?.id;return Ot.jsxs("div",{className:`flex gap-2 ${n?"justify-end":"justify-start"} mb-4`,children:[!n&&Ot.jsxs(ou,{className:"h-8 w-8",children:[Ot.jsx(lu,{src:t.user?.avatar}),Ot.jsx(cu,{className:"text-xs bg-gradient-to-r from-orange-700 to-blue-700 text-white",children:t.user?.name?.charAt(0)||"B"})]}),Ot.jsxs("div",{className:"max-w-xs lg:max-w-md "+(n?"order-first":""),children:[Ot.jsxs("div",{className:"px-4 py-2 rounded-lg "+(n?"bg-gradient-to-r from-orange-700 to-blue-700 text-white messages-bubble-sent":"bg-muted border border-border messages-bubble-received"),children:["business_share"===t.messageType&&t.sharedBusinessId&&Ot.jsxs("div",{className:"mb-2 p-3 bg-white/10 rounded-lg relative z-10",children:[Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx(Zr,{className:"h-4 w-4"}),Ot.jsx("span",{className:"font-medium text-sm",children:"Business Shared"})]}),Ot.jsx("p",{className:"text-sm mt-1",children:t.networkingContext?.businessName}),Ot.jsx("p",{className:"text-xs opacity-75",children:t.networkingContext?.businessCategory})]}),"file"===t.messageType&&Ot.jsxs("div",{className:"mb-2 p-3 bg-white/10 rounded-lg relative z-10",children:[Ot.jsxs("div",{className:"flex items-center gap-2 relative z-10",children:[t.fileType?.startsWith("image/")?Ot.jsx(Pr,{className:"h-4 w-4"}):Ot.jsx(cs,{className:"h-4 w-4"}),Ot.jsx("span",{className:"font-medium text-sm",children:t.fileName}),Ot.jsx(Ln,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0",onClick:()=>t.fileUrl&&window.open(t.fileUrl,"_blank"),"data-testid":`button-download-${t.id}`,children:Ot.jsx(ds,{className:"h-3 w-3"})})]}),t.fileType?.startsWith("image/")&&t.fileUrl&&Ot.jsx("img",{src:t.fileUrl,alt:t.fileName||"File attachment",className:"max-w-full h-auto rounded mt-2"})]}),Ot.jsx("p",{className:"text-sm relative z-10",children:t.content})]}),Ot.jsxs("div",{className:"flex items-center gap-1 mt-1 text-xs text-muted-foreground "+(n?"justify-end":""),children:[Ot.jsx(xr,{className:"h-3 w-3"}),Ot.jsx("span",{children:t.createdAt?new Date(t.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"Now"}),n&&Ot.jsx("div",{className:"ml-1",children:t.isRead?Ot.jsx(us,{className:"h-3 w-3 text-blue-500"}):t.isDelivered?Ot.jsx(us,{className:"h-3 w-3"}):Ot.jsx(Kr,{className:"h-3 w-3"})})]})]})]},t.id)}),Ot.jsx("div",{ref:m})]}):Ot.jsxs("div",{className:"text-center py-12 messages-empty-state",children:[Ot.jsx("div",{className:"mx-auto h-16 w-16 bg-gradient-to-r from-orange-700 to-blue-700 rounded-full flex items-center justify-center mb-4 relative z-10",children:Ot.jsx(ns,{className:"h-8 w-8 text-white"})}),Ot.jsx("p",{className:"text-muted-foreground font-medium relative z-10",children:"Start the conversation!"}),Ot.jsx("p",{className:"text-sm text-muted-foreground mb-4 relative z-10",children:"Send your first message to begin networking"}),Ot.jsxs("div",{className:"space-y-2 relative z-10",children:[Ot.jsx("p",{className:"text-xs text-orange-500 font-medium",children:"Florida Business Ice Breakers:"}),["Interested in collaborating on Florida tourism initiatives?","Would you like to explore cross-promotional opportunities?","Any insights on local Florida business regulations?","Looking to network with fellow Florida entrepreneurs!","Interested in joining our local business meetup group?"].slice(0,3).map((e,t)=>Ot.jsxs("button",{onClick:()=>o(e),className:"block text-xs text-muted-foreground hover:text-orange-500 transition-colors cursor-pointer p-2 hover:bg-orange-50 rounded",children:['"',e,'"']},t))]})]})}),Ot.jsx(rs,{}),Ot.jsxs("div",{className:"p-4 messages-compose-area",children:[Ot.jsxs("div",{className:"flex items-center gap-2 mb-3 relative z-10",children:[Ot.jsxs(yr,{open:h,onOpenChange:p,children:[Ot.jsx(br,{asChild:!0,children:Ot.jsxs(Ln,{size:"sm",variant:"outline",className:"text-xs",children:[Ot.jsx(ss,{className:"h-3 w-3 mr-1"}),"Share Business"]})}),Ot.jsxs(jr,{children:[Ot.jsx(Nr,{children:Ot.jsxs(_r,{className:"flex items-center gap-2",children:[Ot.jsx(Zr,{className:"h-5 w-5 text-orange-500"}),"Share a Florida Business"]})}),Ot.jsx("div",{className:"space-y-4",children:P.map(e=>Ot.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg cursor-pointer hover:bg-muted",onClick:()=>{return t=e.id,void(s&&I.mutate({receiverId:s,businessId:t}));var t},children:[Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsxs(ou,{children:[Ot.jsx(lu,{src:e.logoUrl||void 0}),Ot.jsx(cu,{className:"bg-gradient-to-r from-orange-700 to-blue-700 text-white",children:e.name.charAt(0)})]}),Ot.jsxs("div",{children:[Ot.jsx("p",{className:"font-medium",children:e.name}),Ot.jsx("p",{className:"text-sm text-muted-foreground",children:e.category}),Ot.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[Ot.jsx(Bn,{className:"h-3 w-3"}),e.location]})]})]}),Ot.jsx(Ln,{size:"sm",className:"bg-gradient-to-r from-orange-700 to-blue-700",children:"Share"})]},e.id))})]})]}),Ot.jsxs(UO,{maxNumberOfFiles:1,maxFileSize:10485760,onGetUploadParameters:async()=>{if(!s)return t({title:"Error",description:"Please select a conversation first.",variant:"destructive"}),Promise.reject("No conversation selected");const e=await fetch("/api/object-storage/generate-upload-url",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"});if(!e.ok)throw new Error("Failed to get upload URL");return{method:"PUT",url:(await e.json()).uploadUrl}},onComplete:e=>{if(!s||!e.successful||0===e.successful.length)return;const t=e.successful[0],n=t.uploadURL.split("?")[0];D.mutate({receiverId:s,fileUrl:n,fileName:t.name,fileType:t.type,fileSize:t.size})},buttonClassName:"text-xs h-8 px-3",children:[Ot.jsx(is,{className:"h-3 w-3 mr-1"}),"File"]}),Ot.jsxs(Ln,{size:"sm",variant:"outline",className:"text-xs",children:[Ot.jsx(as,{className:"h-3 w-3 mr-1"}),"Product"]}),Ot.jsxs(Ln,{size:"sm",variant:"outline",className:"text-xs",children:[Ot.jsx(ls,{className:"h-3 w-3 mr-1"}),"Emoji"]})]}),Ot.jsxs("div",{className:"flex space-x-2 relative z-10",children:[Ot.jsx(zn,{placeholder:"Type your message about Florida business opportunities...",value:a,onChange:e=>{o(e.target.value),S&&n&&(S.emit("typing:start",{conversationId:n}),f.current&&clearTimeout(f.current),f.current=setTimeout(()=>{S.emit("typing:stop",{conversationId:n})},1e3))},onKeyPress:e=>"Enter"===e.key&&F(),disabled:R.isPending,className:"flex-1","data-testid":"input-message"}),Ot.jsx(Ln,{onClick:F,disabled:!a.trim()||R.isPending,className:"bg-gradient-to-r from-orange-700 to-blue-700 hover:from-orange-600 hover:to-blue-600","data-testid":"button-send",children:Ot.jsx(ns,{className:"h-4 w-4"})})]}),Ot.jsxs("div",{className:"text-xs text-muted-foreground mt-2 text-center flex items-center justify-center gap-2 relative z-10",children:[Ot.jsx(Yr,{className:"h-3 w-3 text-orange-500"}),"Connect with fellow Florida entrepreneurs  Share resources  Grow together"]})]})]})]}):Ot.jsx("div",{className:"flex items-center justify-center h-full messages-empty-state",children:Ot.jsxs("div",{className:"text-center relative z-10",children:[Ot.jsx("div",{className:"mx-auto h-24 w-24 bg-gradient-to-r from-orange-700 to-blue-700 rounded-full flex items-center justify-center mb-6",children:Ot.jsx(Zr,{className:"h-12 w-12 text-white"})}),Ot.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Florida Business Network"}),Ot.jsx("p",{className:"text-muted-foreground mb-4",children:"Select a conversation to start networking with local businesses"}),Ot.jsxs("div",{className:"flex items-center justify-center gap-4 text-sm text-muted-foreground",children:[Ot.jsxs("div",{className:"flex items-center gap-1",children:[Ot.jsx(Bn,{className:"h-4 w-4 text-orange-500"}),Ot.jsx("span",{children:"Florida Local"})]}),Ot.jsxs("div",{className:"flex items-center gap-1",children:[Ot.jsx(Zr,{className:"h-4 w-4 text-blue-500"}),Ot.jsx("span",{children:"Business Network"})]}),Ot.jsxs("div",{className:"flex items-center gap-1",children:[Ot.jsx(On,{className:"h-4 w-4 text-green-500"}),Ot.jsx("span",{children:"Community"})]})]})]})})})]})]})})}HO.displayName="MessageNode";const $O=tn,GO=nn,qO=Kt,XO=hn.forwardRef(({className:e,...t},n)=>Ot.jsx(Xt,{className:bn("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));XO.displayName=Xt.displayName;const KO=hn.forwardRef(({className:e,"data-surface-intensity":t="delicate","data-surface-tone":n="cool",...r},s)=>Ot.jsxs(qO,{children:[Ot.jsx(XO,{}),Ot.jsx(Yt,{ref:s,"data-surface-intensity":t,"data-surface-tone":n,className:bn("premium-surface fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r})]}));KO.displayName=Yt.displayName;const YO=({className:e,...t})=>Ot.jsx("div",{className:bn("flex flex-col space-y-2 text-center sm:text-left",e),...t});YO.displayName="AlertDialogHeader";const ZO=({className:e,...t})=>Ot.jsx("div",{className:bn("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});ZO.displayName="AlertDialogFooter";const JO=hn.forwardRef(({className:e,...t},n)=>Ot.jsx(Zt,{ref:n,className:bn("text-lg font-semibold",e),...t}));JO.displayName=Zt.displayName;const QO=hn.forwardRef(({className:e,...t},n)=>Ot.jsx(Jt,{ref:n,className:bn("text-sm text-muted-foreground",e),...t}));QO.displayName=Jt.displayName;const eR=hn.forwardRef(({className:e,...t},n)=>Ot.jsx(Qt,{ref:n,className:bn(hs(),e),...t}));eR.displayName=Qt.displayName;const tR=hn.forwardRef(({className:e,...t},n)=>Ot.jsx(en,{ref:n,className:bn(hs({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));tR.displayName=en.displayName;const nR=Qd.extend({name:Ao().min(1,"Business name is required").max(255,"Business name must be less than 255 characters"),tagline:Ao().max(500,"Tagline must be less than 500 characters").optional(),description:Ao().optional(),category:Ao().min(1,"Please select a category"),location:Ao().optional(),address:Ao().optional(),phone:Ao().optional(),website:Ao().url("Please enter a valid website URL").optional().or(Oo(""))}),rR=["Food & Beverage","Retail & Shopping","Health & Beauty","Professional Services","Technology","Arts & Entertainment","Home & Garden","Automotive","Finance & Insurance","Real Estate","Education","Sports & Recreation","Travel & Tourism","Non-profit","Other"];function sR(){const{id:e}=ps(),{user:t,isAuthenticated:n}=Ua(),{toast:r}=Nn(),[,s]=_n(),{data:i,isLoading:a,error:o}=za({queryKey:["/api/businesses",e],enabled:!!e}),l=pn({resolver:Rr(nR),defaultValues:{name:"",tagline:"",description:"",category:"",location:"",address:"",phone:"",website:"",logoUrl:"",coverImageUrl:"",isActive:!0}});fn.useEffect(()=>{i&&l.reset({name:i.name||"",tagline:i.tagline||"",description:i.description||"",category:i.category||"",location:i.location||"",address:i.address||"",phone:i.phone||"",website:i.website||"",logoUrl:i.logoUrl||"",coverImageUrl:i.coverImageUrl||"",isActive:i.isActive??!0})},[i,l]);const c=Fa({mutationFn:async t=>{const n=await qn("PUT",`/api/businesses/${e}`,t);return await n.json()},onSuccess:t=>{r({title:"Business updated successfully!",description:"Your changes have been saved."}),vr.invalidateQueries({queryKey:["/api/businesses",e]}),vr.invalidateQueries({queryKey:["/api/businesses/my"]}),vr.invalidateQueries({queryKey:["/api/businesses/search"]}),s(`/business/${e}`)},onError:e=>{r({title:"Failed to update business",description:e.message||"Please try again later.",variant:"destructive"})}}),d=Fa({mutationFn:async()=>{const t=await qn("DELETE",`/api/businesses/${e}`);return await t.json()},onSuccess:()=>{r({title:"Business deleted successfully!",description:"Your business has been permanently removed."}),vr.invalidateQueries({queryKey:["/api/businesses/my"]}),vr.invalidateQueries({queryKey:["/api/businesses/search"]}),s("/")},onError:e=>{r({title:"Failed to delete business",description:e.message||"Please try again later.",variant:"destructive"})}});return n?a?Ot.jsx("div",{className:"premium-page-wrapper premium-surface min-h-screen marble-texture abstract-overlay-light","data-surface-intensity":"delicate","data-surface-tone":"warm",children:Ot.jsx("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:Ot.jsxs("div",{className:"space-y-8",children:[Ot.jsxs("div",{className:"flex items-center space-x-4",children:[Ot.jsx(er,{className:"h-8 w-16"}),Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsx(er,{className:"h-8 w-64"}),Ot.jsx(er,{className:"h-4 w-48"})]})]}),Ot.jsx("div",{className:"space-y-6",children:Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{children:[Ot.jsx(er,{className:"h-6 w-48"}),Ot.jsx(er,{className:"h-4 w-72"})]}),Ot.jsxs(Mn,{className:"space-y-6",children:[Ot.jsx(er,{className:"h-10 w-full"}),Ot.jsx(er,{className:"h-10 w-full"}),Ot.jsx(er,{className:"h-24 w-full"}),Ot.jsx(er,{className:"h-10 w-full"})]})]})})]})})}):o||!i?Ot.jsx("div",{className:"premium-page-wrapper premium-surface min-h-screen marble-texture abstract-overlay-light","data-surface-intensity":"delicate","data-surface-tone":"warm",children:Ot.jsxs("div",{className:"container mx-auto px-4 py-16 text-center",children:[Ot.jsx(ms,{className:"mx-auto h-16 w-16 text-muted-foreground mb-6"}),Ot.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Business Not Found"}),Ot.jsx("p",{className:"text-muted-foreground mb-8",children:"The business you're looking for doesn't exist or has been removed."}),Ot.jsx(Ln,{onClick:()=>s("/"),"data-testid":"button-back-home-error",children:"Back to Home"})]})}):i.ownerId!==t?.id?Ot.jsx("div",{className:"premium-page-wrapper premium-surface min-h-screen marble-texture abstract-overlay-light","data-surface-intensity":"delicate","data-surface-tone":"warm",children:Ot.jsxs("div",{className:"container mx-auto px-4 py-16 text-center",children:[Ot.jsx(ms,{className:"mx-auto h-16 w-16 text-destructive mb-6"}),Ot.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Access Denied"}),Ot.jsx("p",{className:"text-muted-foreground mb-8",children:"You can only edit businesses that you own."}),Ot.jsxs("div",{className:"flex justify-center space-x-4",children:[Ot.jsx(Ln,{variant:"outline",onClick:()=>s(`/business/${e}`),"data-testid":"button-view-business",children:"View Business"}),Ot.jsx(Ln,{onClick:()=>s("/"),"data-testid":"button-back-home-unauthorized",children:"Back to Home"})]})]})}):Ot.jsx("div",{className:"premium-page-wrapper premium-surface min-h-screen marble-texture abstract-overlay-light","data-surface-intensity":"delicate","data-surface-tone":"warm",children:Ot.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[Ot.jsx("div",{className:"edit-business-header flex items-center space-x-4 mb-8 rounded-2xl p-6",children:Ot.jsxs("div",{className:"marble-content flex items-center space-x-4 w-full",children:[Ot.jsxs(Ln,{variant:"outline",size:"sm",onClick:()=>s(`/business/${e}`),"data-testid":"button-back-business-profile",children:[Ot.jsx(fs,{className:"h-4 w-4 mr-2"}),"Back to Profile"]}),Ot.jsxs("div",{children:[Ot.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Edit Business"}),Ot.jsx("p",{className:"text-muted-foreground",children:"Update your business information"})]})]})}),Ot.jsx(Sr,{...l,children:Ot.jsxs("form",{onSubmit:l.handleSubmit(e=>{const t=Object.entries(e).reduce((e,[t,n])=>(e[t]=""===n?void 0:n,e),{});c.mutate(t)}),className:"space-y-8",children:[Ot.jsxs(Sn,{className:"edit-business-basics-card",children:[Ot.jsxs(Lr,{className:"marble-content",children:[Ot.jsxs(zr,{className:"flex items-center space-x-2",children:[Ot.jsx(fr,{className:"h-5 w-5"}),Ot.jsx("span",{children:"Business Basics"})]}),Ot.jsx(Ur,{children:"Essential information about your business"})]}),Ot.jsxs(Mn,{className:"marble-content space-y-6",children:[Ot.jsx(Mr,{control:l.control,name:"name",render:({field:e})=>Ot.jsxs(Cr,{children:[Ot.jsx(Er,{children:"Business Name *"}),Ot.jsx(kr,{children:Ot.jsx(zn,{placeholder:"Enter your business name",...e,"data-testid":"input-edit-business-name"})}),Ot.jsx(Ar,{})]})}),Ot.jsx(Mr,{control:l.control,name:"tagline",render:({field:e})=>Ot.jsxs(Cr,{children:[Ot.jsx(Er,{children:"Tagline"}),Ot.jsx(kr,{children:Ot.jsx(zn,{placeholder:"A short, catchy description of your business",...e,"data-testid":"input-edit-business-tagline"})}),Ot.jsx(gs,{children:"Optional tagline that appears under your business name"}),Ot.jsx(Ar,{})]})}),Ot.jsx(Mr,{control:l.control,name:"description",render:({field:e})=>Ot.jsxs(Cr,{children:[Ot.jsx(Er,{children:"Description"}),Ot.jsx(kr,{children:Ot.jsx(Tr,{placeholder:"Tell people about your business, what makes you special, your story...",className:"min-h-[120px]",...e,"data-testid":"textarea-edit-business-description"})}),Ot.jsx(gs,{children:"This will appear on your business profile page"}),Ot.jsx(Ar,{})]})}),Ot.jsx(Mr,{control:l.control,name:"category",render:({field:e})=>Ot.jsxs(Cr,{children:[Ot.jsx(Er,{children:"Category *"}),Ot.jsxs(Un,{onValueChange:e.onChange,value:e.value,children:[Ot.jsx(kr,{children:Ot.jsx(Vn,{"data-testid":"select-edit-business-category",children:Ot.jsx(Hn,{placeholder:"Select your business category"})})}),Ot.jsx(Wn,{children:rR.map(e=>Ot.jsx($n,{value:e,children:e},e))})]}),Ot.jsx(gs,{children:"This helps customers find your business"}),Ot.jsx(Ar,{})]})})]})]}),Ot.jsxs(Sn,{className:"edit-business-location-card",children:[Ot.jsxs(Lr,{className:"marble-content",children:[Ot.jsxs(zr,{className:"flex items-center space-x-2",children:[Ot.jsx(Bn,{className:"h-5 w-5"}),Ot.jsx("span",{children:"Location & Contact"})]}),Ot.jsx(Ur,{children:"Help customers find and contact you"})]}),Ot.jsxs(Mn,{className:"marble-content space-y-6",children:[Ot.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[Ot.jsx(Mr,{control:l.control,name:"location",render:({field:e})=>Ot.jsxs(Cr,{children:[Ot.jsx(Er,{children:"City/Area"}),Ot.jsx(kr,{children:Ot.jsx(zn,{placeholder:"e.g., Miami, FL",...e,"data-testid":"input-edit-business-location"})}),Ot.jsx(Ar,{})]})}),Ot.jsx(Mr,{control:l.control,name:"phone",render:({field:e})=>Ot.jsxs(Cr,{children:[Ot.jsx(Er,{children:"Phone Number"}),Ot.jsx(kr,{children:Ot.jsx(zn,{placeholder:"(555) 123-4567",type:"tel",...e,"data-testid":"input-edit-business-phone"})}),Ot.jsx(Ar,{})]})})]}),Ot.jsx(Mr,{control:l.control,name:"address",render:({field:e})=>Ot.jsxs(Cr,{children:[Ot.jsx(Er,{children:"Street Address"}),Ot.jsx(kr,{children:Ot.jsx(zn,{placeholder:"123 Main Street, Miami, FL 33101",...e,"data-testid":"input-edit-business-address"})}),Ot.jsx(gs,{children:"Full address for customer visits and deliveries"}),Ot.jsx(Ar,{})]})}),Ot.jsx(Mr,{control:l.control,name:"website",render:({field:e})=>Ot.jsxs(Cr,{children:[Ot.jsx(Er,{children:"Website"}),Ot.jsx(kr,{children:Ot.jsx(zn,{placeholder:"https://www.yourbusiness.com",type:"url",...e,"data-testid":"input-edit-business-website"})}),Ot.jsx(Ar,{})]})})]})]}),Ot.jsxs(Sn,{className:"edit-business-visual-card",children:[Ot.jsxs(Lr,{className:"marble-content",children:[Ot.jsx(zr,{children:"Visual Identity"}),Ot.jsx(Ur,{children:"Update your business visuals"})]}),Ot.jsx(Mn,{className:"marble-content space-y-6",children:Ot.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[Ot.jsx(Mr,{control:l.control,name:"logoUrl",render:({field:e})=>Ot.jsxs(Cr,{children:[Ot.jsx(xs,{label:"Business Logo",value:e.value??void 0,onChange:e.onChange,placeholder:"Upload your logo",aspectRatio:"square",maxSizeMB:2}),Ot.jsx(gs,{children:"Square image works best. Will be displayed at various sizes."}),Ot.jsx(Ar,{})]})}),Ot.jsx(Mr,{control:l.control,name:"coverImageUrl",render:({field:e})=>Ot.jsxs(Cr,{children:[Ot.jsx(xs,{label:"Cover Image",value:e.value??void 0,onChange:e.onChange,placeholder:"Upload cover image",aspectRatio:"landscape",maxSizeMB:5}),Ot.jsx(gs,{children:"Wide image for your business profile header."}),Ot.jsx(Ar,{})]})})]})})]}),Ot.jsx(Sn,{className:"edit-business-submit-card",children:Ot.jsx(Mn,{className:"marble-content pt-6",children:Ot.jsxs("div",{className:"flex flex-col space-y-4",children:[Ot.jsx("div",{className:"flex items-center justify-between",children:Ot.jsxs("div",{children:[Ot.jsx("h3",{className:"font-semibold",children:"Save your changes"}),Ot.jsx("p",{className:"text-sm text-muted-foreground",children:"Your updated information will be visible to customers immediately."})]})}),Ot.jsx(rs,{}),Ot.jsxs("div",{className:"flex justify-between",children:[Ot.jsxs($O,{children:[Ot.jsx(GO,{asChild:!0,children:Ot.jsxs(Ln,{type:"button",variant:"destructive",disabled:d.isPending,"data-testid":"button-delete-business",children:[Ot.jsx(vs,{className:"h-4 w-4 mr-2"}),"Delete Business"]})}),Ot.jsxs(KO,{children:[Ot.jsxs(YO,{children:[Ot.jsx(JO,{children:"Delete Business"}),Ot.jsx(QO,{children:"Are you sure you want to delete this business? This action cannot be undone and will permanently remove all business data including products, posts, and analytics."})]}),Ot.jsxs(ZO,{children:[Ot.jsx(tR,{"data-testid":"button-cancel-delete",children:"Cancel"}),Ot.jsx(eR,{onClick:()=>d.mutate(),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90","data-testid":"button-confirm-delete",children:d.isPending?Ot.jsxs(Ot.Fragment,{children:[Ot.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current mr-2"}),"Deleting..."]}):"Delete Business"})]})]})]}),Ot.jsxs("div",{className:"flex space-x-4",children:[Ot.jsx(Ln,{type:"button",variant:"outline",onClick:()=>s(`/business/${e}`),"data-testid":"button-cancel-edit-business",children:"Cancel"}),Ot.jsx(Ln,{type:"submit",disabled:c.isPending||d.isPending,"data-testid":"button-save-business-changes",children:c.isPending?Ot.jsxs(Ot.Fragment,{children:[Ot.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current mr-2"}),"Saving Changes..."]}):Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(ys,{className:"h-4 w-4 mr-2"}),"Save Changes"]})})]})]})]})})})]})})]})}):Ot.jsx("div",{className:"premium-page-wrapper premium-surface min-h-screen marble-texture abstract-overlay-light","data-surface-intensity":"delicate","data-surface-tone":"warm",children:Ot.jsxs("div",{className:"container mx-auto px-4 py-16 text-center",children:[Ot.jsx(fr,{className:"mx-auto h-16 w-16 text-muted-foreground mb-6"}),Ot.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Sign In Required"}),Ot.jsx("p",{className:"text-muted-foreground mb-8",children:"You need to sign in to edit a business profile."}),Ot.jsx(Ln,{onClick:()=>window.location.href="/api/login","data-testid":"button-signin-edit-business",children:"Sign In to Continue"})]})})}function iR(){const{isAuthenticated:e}=Ua();_n();const[t,n]=hn.useState(null),[r,s]=hn.useState(!0),i=new URLSearchParams(window.location.search),a=i.get("payment_intent"),o=i.get("orderId")||i.get("order_id"),l=Fa({mutationFn:async e=>{const t=await qn("POST",`/api/orders/${e.orderId}/complete`,{paymentIntentId:e.paymentIntentId});return await t.json()},onSuccess:e=>{n(e.order),s(!1)},onError:e=>{s(!1)}});hn.useEffect(()=>{o?a?l.mutate({orderId:o,paymentIntentId:a}):c():s(!1)},[a,o]);const c=async()=>{try{const e=await qn("GET",`/api/orders/${o}`),t=await e.json();n(t),s(!1)}catch(e){s(!1)}};return e?r?Ot.jsx("div",{className:"premium-page-wrapper premium-surface min-h-screen marble-texture abstract-overlay-light","data-surface-intensity":"delicate","data-surface-tone":"warm",children:Ot.jsxs("div",{className:"container mx-auto px-4 py-12 text-center",children:[Ot.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full mx-auto mb-4"}),Ot.jsx("h2",{className:"text-xl font-semibold",children:"Confirming your order..."}),Ot.jsx("p",{className:"text-muted-foreground mt-2",children:"Please wait while we process your payment"})]})}):Ot.jsx("div",{className:"premium-page-wrapper premium-surface min-h-screen marble-texture abstract-overlay-light","data-surface-intensity":"delicate","data-surface-tone":"warm",children:Ot.jsxs("div",{className:"container mx-auto px-4 py-8 lg:px-8",children:[Ot.jsx("div",{className:"confirmation-success-header relative text-center mb-8 p-8 rounded-2xl",children:Ot.jsxs("div",{className:"relative z-10",children:[Ot.jsx("div",{className:"flex justify-center mb-4",children:Ot.jsx("div",{className:"bg-green-100 dark:bg-green-900 rounded-full p-4",children:Ot.jsx(us,{className:"h-12 w-12 text-green-600 dark:text-green-400"})})}),Ot.jsx(co,{glowText:"Order Confirmed!",glowTextSize:"md",className:"mb-2","data-testid":"text-order-success"}),Ot.jsx("p",{className:"text-lg text-muted-foreground",children:"Thank you for your purchase. Your order has been successfully placed."}),t&&Ot.jsx("div",{className:"mt-4",children:Ot.jsxs(Tn,{variant:"secondary",className:"text-sm",children:["Order #",t.id.slice(-8).toUpperCase()]})})]})}),Ot.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[Ot.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[Ot.jsxs(Sn,{className:"confirmation-card relative",children:[Ot.jsx(Lr,{className:"relative z-10",children:Ot.jsxs(zr,{className:"flex items-center gap-2",children:[Ot.jsx(as,{className:"h-5 w-5"}),"What happens next?"]})}),Ot.jsxs(Mn,{className:"relative z-10 space-y-4",children:[Ot.jsxs("div",{className:"flex items-start gap-3",children:[Ot.jsx("div",{className:"bg-primary text-primary-foreground rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold mt-0.5",children:"1"}),Ot.jsxs("div",{children:[Ot.jsx("h4",{className:"font-semibold",children:"Order Processing"}),Ot.jsx("p",{className:"text-sm text-muted-foreground",children:"We're preparing your order and will send you a confirmation email shortly."})]})]}),Ot.jsxs("div",{className:"flex items-start gap-3",children:[Ot.jsx("div",{className:"bg-muted text-muted-foreground rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold mt-0.5",children:"2"}),Ot.jsxs("div",{children:[Ot.jsx("h4",{className:"font-semibold",children:"Shipping"}),Ot.jsx("p",{className:"text-sm text-muted-foreground",children:"Your items will be shipped within 2-3 business days. You'll receive tracking information via email."})]})]}),Ot.jsxs("div",{className:"flex items-start gap-3",children:[Ot.jsx("div",{className:"bg-muted text-muted-foreground rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold mt-0.5",children:"3"}),Ot.jsxs("div",{children:[Ot.jsx("h4",{className:"font-semibold",children:"Delivery"}),Ot.jsx("p",{className:"text-sm text-muted-foreground",children:"Estimated delivery: 5-7 business days for standard shipping."})]})]})]})]}),t&&Ot.jsxs(Sn,{className:"confirmation-card relative",children:[Ot.jsx(Lr,{className:"relative z-10",children:Ot.jsx(zr,{children:"Order Items"})}),Ot.jsx(Mn,{className:"relative z-10",children:Ot.jsx("div",{className:"space-y-4",children:t.orderItems.map(e=>Ot.jsxs("div",{className:"flex gap-4","data-testid":`order-item-${e.productId}`,children:[Ot.jsx("div",{className:"h-16 w-16 rounded-lg bg-gradient-to-br from-blue-500 to-orange-500 flex-shrink-0","data-testid":`img-order-product-${e.productId}`}),Ot.jsxs("div",{className:"flex-1",children:[Ot.jsx("h4",{className:"font-semibold","data-testid":`text-order-product-name-${e.productId}`,children:e.productName}),Ot.jsxs("p",{className:"text-sm text-muted-foreground",children:["Quantity: ",e.quantity]}),Ot.jsxs("p",{className:"text-sm text-muted-foreground",children:["$",parseFloat(e.productPrice).toFixed(2)," each"]})]}),Ot.jsx("div",{className:"text-right",children:Ot.jsxs("p",{className:"font-semibold","data-testid":`text-order-item-total-${e.productId}`,children:["$",parseFloat(e.totalPrice).toFixed(2)]})})]},e.id))})})]}),t&&Ot.jsxs(Sn,{className:"confirmation-card relative",children:[Ot.jsx(Lr,{className:"relative z-10",children:Ot.jsx(zr,{children:"Shipping Information"})}),Ot.jsx(Mn,{className:"relative z-10",children:Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsxs("p",{children:[Ot.jsx("strong",{children:"Email:"})," ",t.customerEmail]}),t.customerPhone&&Ot.jsxs("p",{children:[Ot.jsx("strong",{children:"Phone:"})," ",t.customerPhone]}),t.shippingAddress&&Ot.jsxs("div",{children:[Ot.jsx("p",{children:Ot.jsx("strong",{children:"Shipping Address:"})}),Ot.jsxs("div",{className:"ml-4 text-sm text-muted-foreground",children:[Ot.jsx("p",{children:t.shippingAddress.fullName}),Ot.jsx("p",{children:t.shippingAddress.addressLine1}),t.shippingAddress.addressLine2&&Ot.jsx("p",{children:t.shippingAddress.addressLine2}),Ot.jsxs("p",{children:[t.shippingAddress.city,", ",t.shippingAddress.state," ",t.shippingAddress.zipCode]})]})]})]})})]})]}),Ot.jsx("div",{className:"lg:col-span-1",children:Ot.jsxs(Sn,{className:"order-summary-card relative sticky top-4",children:[Ot.jsx(Lr,{className:"relative z-10",children:Ot.jsx(zr,{children:"Order Summary"})}),Ot.jsxs(Mn,{className:"relative z-10",children:[t?Ot.jsxs("div",{className:"space-y-3",children:[Ot.jsxs("div",{className:"flex justify-between",children:[Ot.jsx("span",{children:"Subtotal"}),Ot.jsxs("span",{"data-testid":"text-order-subtotal",children:["$",parseFloat(t.subtotal).toFixed(2)]})]}),Ot.jsxs("div",{className:"flex justify-between",children:[Ot.jsx("span",{children:"Tax"}),Ot.jsxs("span",{"data-testid":"text-order-tax",children:["$",parseFloat(t.taxAmount).toFixed(2)]})]}),Ot.jsxs("div",{className:"flex justify-between",children:[Ot.jsx("span",{children:"Shipping"}),Ot.jsx("span",{"data-testid":"text-order-shipping",children:0===parseFloat(t.shippingAmount)?"Free":`$${parseFloat(t.shippingAmount).toFixed(2)}`})]}),Ot.jsx(rs,{}),Ot.jsxs("div",{className:"flex justify-between text-lg font-semibold",children:[Ot.jsx("span",{children:"Total"}),Ot.jsxs("span",{"data-testid":"text-order-total",children:["$",parseFloat(t.total).toFixed(2)]})]}),Ot.jsx("div",{className:"text-sm text-muted-foreground",children:"Paid via credit card"})]}):Ot.jsxs("div",{className:"space-y-3",children:[Ot.jsxs("div",{className:"flex justify-between",children:[Ot.jsx("span",{children:"Order Total"}),Ot.jsx("span",{className:"font-semibold",children:"Payment Confirmed"})]}),Ot.jsx("p",{className:"text-sm text-muted-foreground",children:"Your payment has been successfully processed. You'll receive an email confirmation shortly."})]}),Ot.jsxs("div",{className:"space-y-3 mt-6",children:[Ot.jsx(Ln,{asChild:!0,className:"w-full","data-testid":"button-continue-shopping",children:Ot.jsxs(Yn,{href:"/marketplace",children:["Continue Shopping",Ot.jsx(mr,{className:"ml-2 h-4 w-4"})]})}),Ot.jsx(Ln,{variant:"outline",asChild:!0,className:"w-full","data-testid":"button-view-orders",children:Ot.jsx(Yn,{href:"/orders",children:"View Order History"})}),Ot.jsx(Ln,{variant:"ghost",asChild:!0,className:"w-full","data-testid":"button-home",children:Ot.jsxs(Yn,{href:"/",children:[Ot.jsx(bs,{className:"mr-2 h-4 w-4"}),"Back to Home"]})})]})]})]})})]})]})}):Ot.jsx("div",{className:"premium-page-wrapper premium-surface min-h-screen marble-texture abstract-overlay-light","data-surface-intensity":"delicate","data-surface-tone":"warm",children:Ot.jsxs("div",{className:"container mx-auto px-4 py-12 text-center",children:[Ot.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Please log in to view order confirmation"}),Ot.jsx(Ln,{onClick:()=>window.location.href="/api/login","data-testid":"button-login",children:"Log In"})]})})}function aR(){const{isAuthenticated:e}=Ua(),{data:t=[],isLoading:n}=za({queryKey:["/api/orders"],enabled:e}),r=e=>{switch(e.toLowerCase()){case"pending":return"topaz";case"processing":return"sapphire";case"shipped":return"amethyst";case"delivered":return"emerald";case"cancelled":return"crimson";default:return"pearl"}},s=e=>{switch(e.toLowerCase()){case"pending":return"Payment pending";case"processing":return"Order being prepared";case"shipped":return"Order has been shipped";case"delivered":return"Order delivered";case"cancelled":return"Order cancelled";default:return e}};return n?Ot.jsx("div",{className:"premium-page-wrapper premium-surface min-h-screen marble-texture abstract-overlay-light flex items-center justify-center","data-surface-intensity":"delicate","data-surface-tone":"warm",children:Ot.jsx(uo,{text:"Loading your orders..."})}):Ot.jsxs("div",{className:"premium-page-wrapper premium-surface min-h-screen marble-texture abstract-overlay-light relative","data-surface-intensity":"delicate","data-surface-tone":"warm",children:[Ot.jsx(ho,{intensity:"medium"}),Ot.jsxs(oo,{className:"py-16",children:[Ot.jsx(lo,{count:35,color:"purple"}),Ot.jsxs("div",{className:"container mx-auto px-4 lg:px-8 relative z-10",children:[Ot.jsxs("div",{className:"flex flex-col items-center gap-4 mb-4",children:[Ot.jsx(co,{glowText:"Your Orders",glowTextSize:"lg","data-testid":"text-orders-title"}),Ot.jsx("p",{className:"text-lg text-muted-foreground text-center",children:"Track and manage your order history"})]}),t.length>0&&Ot.jsxs("div",{className:"flex items-center gap-3 mt-4",children:[Ot.jsxs(po,{color:"sapphire",size:"md",children:[t.length," Total Order",1!==t.length?"s":""]}),Ot.jsxs(po,{color:"emerald",size:"sm",children:[Ot.jsx(Dn,{className:"h-4 w-4 mr-1"}),"Active"]})]})]})]}),Ot.jsxs("div",{className:"container mx-auto px-4 py-8 lg:px-8 relative",children:[!e&&Ot.jsx("div",{className:"absolute inset-0 z-50 bg-black/50 flex items-center justify-center backdrop-blur-sm rounded-2xl",children:Ot.jsx(mo,{children:Ot.jsx(fo,{children:Ot.jsxs(Mn,{className:"p-8 text-center",children:[Ot.jsx(tr,{className:"mx-auto h-16 w-16 text-muted-foreground mb-4"}),Ot.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Log in to view orders"}),Ot.jsx("p",{className:"text-muted-foreground mb-6",children:"Track your purchases and order history"}),Ot.jsx(Ln,{size:"lg",onClick:()=>window.location.href="/api/login","data-testid":"button-login",children:"Log In"})]})})})}),Ot.jsxs("div",{className:e?"":"pointer-events-none opacity-30",children:[Ot.jsx(mo,{children:Ot.jsx(fo,{className:"orders-empty-state mb-8",children:Ot.jsxs(Mn,{className:"text-center py-16",children:[Ot.jsx(as,{className:"mx-auto h-20 w-20 text-muted-foreground opacity-50 mb-6"}),Ot.jsx("h2",{className:"text-3xl font-bold mb-4","data-testid":"text-no-orders",children:"No orders yet"}),Ot.jsx("p",{className:"text-lg text-muted-foreground mb-8",children:"When you place your first order, it will appear here"}),Ot.jsx(Ln,{asChild:!0,size:"lg",children:Ot.jsxs(Yn,{href:"/marketplace","data-testid":"link-marketplace",children:[Ot.jsx(tr,{className:"h-5 w-5 mr-2"}),"Start Shopping"]})})]})})}),t.length>0&&Ot.jsx("div",{className:"space-y-6",children:t.map(e=>Ot.jsx(mo,{children:Ot.jsxs(fo,{className:"order-card-luxury","data-testid":`order-card-${e.id}`,children:[Ot.jsx(Lr,{className:"pb-4",children:Ot.jsxs("div",{className:"flex justify-between items-start",children:[Ot.jsxs("div",{children:[Ot.jsxs(zr,{className:"text-xl flex items-center gap-2","data-testid":`text-order-id-${e.id}`,children:[Ot.jsx(as,{className:"h-5 w-5 text-purple-500"}),"Order #",e.id.slice(-8).toUpperCase()]}),Ot.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[Ot.jsx(xr,{className:"h-4 w-4 text-muted-foreground"}),Ot.jsx("span",{className:"text-sm text-muted-foreground","data-testid":`text-order-date-${e.id}`,children:Fo(new Date(e.createdAt),"MMM d, yyyy h:mm a")})]})]}),Ot.jsx(po,{color:r(e.status),size:"md","data-testid":`badge-order-status-${e.id}`,children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})]})}),Ot.jsxs(Mn,{className:"pt-0",children:[Ot.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-6",children:[Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:s(e.status)}),Ot.jsxs("p",{className:"text-3xl font-black bg-gradient-to-r from-purple-600 via-pink-600 to-orange-500 bg-clip-text text-transparent","data-testid":`text-order-total-${e.id}`,children:["$",parseFloat(e.total).toFixed(2)]}),Ot.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:e.currency.toUpperCase()})]}),Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsxs("div",{className:"flex justify-between items-center p-2 rounded bg-muted/30",children:[Ot.jsx("span",{className:"text-sm",children:"Subtotal"}),Ot.jsxs("span",{className:"font-semibold",children:["$",parseFloat(e.subtotal).toFixed(2)]})]}),Ot.jsxs("div",{className:"flex justify-between items-center p-2 rounded bg-muted/30",children:[Ot.jsx("span",{className:"text-sm",children:"Tax"}),Ot.jsxs("span",{className:"font-semibold",children:["$",parseFloat(e.taxAmount).toFixed(2)]})]}),Ot.jsxs("div",{className:"flex justify-between items-center p-2 rounded bg-muted/30",children:[Ot.jsx("span",{className:"text-sm",children:"Shipping"}),Ot.jsx("span",{className:"font-semibold",children:0===parseFloat(e.shippingAmount)?Ot.jsx(po,{color:"emerald",size:"sm",children:"Free"}):`$${parseFloat(e.shippingAmount).toFixed(2)}`})]})]})]}),Ot.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 pt-4 border-t",children:[Ot.jsx("div",{className:"text-sm text-muted-foreground",children:e.shippingAddress&&Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx(tr,{className:"h-4 w-4"}),Ot.jsxs("span",{children:["Shipping to: ",e.shippingAddress.city,", ",e.shippingAddress.state]})]})}),Ot.jsx(Ln,{variant:"outline",size:"lg",asChild:!0,"data-testid":`button-view-order-${e.id}`,children:Ot.jsxs(Yn,{href:`/orders/${e.id}`,children:["View Details",Ot.jsx(mr,{className:"ml-2 h-4 w-4"})]})})]})]})]})},e.id))}),Ot.jsx("div",{className:"mt-12",children:Ot.jsx(mo,{children:Ot.jsx(fo,{className:"orders-quick-actions",children:Ot.jsxs(Mn,{className:"text-center py-12",children:[Ot.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Need help with an order?"}),Ot.jsx("p",{className:"text-muted-foreground mb-6",children:"Our support team is here to assist you"}),Ot.jsxs("div",{className:"flex flex-wrap justify-center gap-4",children:[Ot.jsx(Ln,{variant:"outline",size:"lg",asChild:!0,children:Ot.jsxs(Yn,{href:"/marketplace",children:[Ot.jsx(tr,{className:"h-5 w-5 mr-2"}),"Continue Shopping"]})}),Ot.jsx(Ln,{size:"lg",asChild:!0,children:Ot.jsx(Yn,{href:"/messages",children:"Contact Support"})})]})]})})})})]})]})]})}function oR(){const{isAuthenticated:e}=Ua(),{toast:t}=Nn(),n=La(),[r,s]=hn.useState(""),[i,a]=hn.useState(!1),[o,l]=hn.useState(null),{data:c=[]}=za({queryKey:["/api/businesses/my"],enabled:e}),{data:d=[],isLoading:u}=za({queryKey:["/api/businesses",r,"products"],enabled:!!r}),h=Fa({mutationFn:async e=>await qn("POST","/api/products",e),onSuccess:()=>{t({title:"Product created successfully"}),n.invalidateQueries({queryKey:["/api/businesses",r,"products"]}),a(!1)},onError:e=>{t({title:"Failed to create product",description:e.message,variant:"destructive"})}}),p=Fa({mutationFn:async({id:e,...t})=>await qn("PUT",`/api/products/${e}`,t),onSuccess:()=>{t({title:"Product updated successfully"}),n.invalidateQueries({queryKey:["/api/businesses",r,"products"]}),l(null)},onError:e=>{t({title:"Failed to update product",description:e.message,variant:"destructive"})}}),m=e=>{e.preventDefault();const t=new FormData(e.currentTarget),n={businessId:r,name:t.get("name"),description:t.get("description"),price:t.get("price"),originalPrice:t.get("originalPrice")||null,category:t.get("category"),inventory:parseInt(t.get("inventory"))||0,isActive:"true"===t.get("isActive"),isDigital:"true"===t.get("isDigital"),tags:t.get("tags")?t.get("tags").split(",").map(e=>e.trim()):[]};o?p.mutate({id:o.id,...n}):h.mutate(n)};return e?0===c.length?Ot.jsx("div",{className:"min-h-screen",children:Ot.jsxs("div",{className:"container mx-auto px-4 py-8",children:[Ot.jsx("h1",{className:"text-3xl font-bold mb-6 text-white",style:{textShadow:"0 2px 8px rgba(0,0,0,0.4)"},children:"Vendor Products"}),Ot.jsxs("div",{className:"text-white",style:{textShadow:"0 1px 2px rgba(0,0,0,0.25)"},children:["You need to create a business first. ",Ot.jsx("a",{href:"/create-business",className:"text-white underline hover:no-underline",children:"Create Business"})]})]})}):Ot.jsx("div",{className:"min-h-screen",children:Ot.jsxs("div",{className:"container mx-auto px-4 py-8",children:[Ot.jsxs("div",{className:"vendor-products-header flex items-center justify-between mb-6 rounded-2xl p-6 relative",children:[Ot.jsx("h1",{className:"text-3xl font-bold marble-content","data-testid":"heading-vendor-products",children:"Vendor Products"}),Ot.jsxs(yr,{open:i,onOpenChange:a,children:[Ot.jsx(br,{asChild:!0,children:Ot.jsx(Ln,{disabled:!r,className:"marble-content","data-testid":"button-add-product",children:"Add Product"})}),Ot.jsx(jr,{className:"max-w-2xl vendor-product-dialog",children:Ot.jsxs("div",{className:"marble-content",children:[Ot.jsx(Nr,{children:Ot.jsx(_r,{children:o?"Edit Product":"Create Product"})}),Ot.jsx(lR,{product:o,onSubmit:m,isLoading:h.isPending||p.isPending})]})})]})]}),Ot.jsx("div",{className:"vendor-business-selection mb-6 rounded-2xl p-6 relative",children:Ot.jsxs("div",{className:"marble-content",children:[Ot.jsx(ws,{htmlFor:"business-select",children:"Select Business"}),Ot.jsxs(Un,{value:r,onValueChange:s,children:[Ot.jsx(Vn,{className:"w-full max-w-md",id:"business-select","data-testid":"select-business",children:Ot.jsx(Hn,{placeholder:"Choose a business"})}),Ot.jsx(Wn,{children:c.map(e=>Ot.jsx($n,{value:e.id,children:e.name},e.id))})]})]})}),r&&Ot.jsx("div",{className:"vendor-products-grid grid md:grid-cols-2 lg:grid-cols-3 gap-6 relative rounded-2xl p-6",children:Ot.jsx("div",{className:"marble-content col-span-full grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:u?Ot.jsx("div",{"data-testid":"loading-products",children:"Loading products..."}):0===d.length?Ot.jsx("div",{className:"col-span-full text-muted-foreground","data-testid":"empty-products",children:"No products yet. Create your first product!"}):d.map(e=>Ot.jsxs(Sn,{className:"vendor-product-card hover:shadow-lg transition-shadow relative bg-white/80 backdrop-blur-md","data-testid":`card-product-${e.id}`,children:[Ot.jsx(Lr,{className:"marble-content",children:Ot.jsxs(zr,{className:"flex items-center justify-between",children:[Ot.jsx("span",{className:"truncate","data-testid":`text-product-name-${e.id}`,children:e.name}),Ot.jsx(Tn,{variant:e.isActive?"default":"secondary","data-testid":`badge-product-status-${e.id}`,children:e.isActive?"Active":"Inactive"})]})}),Ot.jsx(Mn,{className:"marble-content",children:Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("span",{className:"font-semibold","data-testid":`text-product-price-${e.id}`,children:["$",parseFloat(e.price).toFixed(2)]}),e.originalPrice&&parseFloat(e.originalPrice)>parseFloat(e.price)&&Ot.jsxs("span",{className:"text-sm text-muted-foreground line-through","data-testid":`text-original-price-${e.id}`,children:["$",parseFloat(e.originalPrice).toFixed(2)]})]}),Ot.jsxs("div",{className:"text-sm text-muted-foreground","data-testid":`text-product-stock-${e.id}`,children:["Stock: ",e.inventory??"Unlimited"]}),e.category&&Ot.jsx(Tn,{variant:"outline",className:"text-xs","data-testid":`badge-product-category-${e.id}`,children:e.category}),Ot.jsx("div",{className:"flex gap-2 mt-4",children:Ot.jsx(Ln,{size:"sm",variant:"outline",onClick:()=>{l(e),a(!0)},"data-testid":`button-edit-product-${e.id}`,children:"Edit"})})]})})]},e.id))})}),Ot.jsx(yr,{open:!!o&&i,onOpenChange:e=>{e||(l(null),a(!1))},children:Ot.jsx(jr,{className:"max-w-2xl vendor-product-dialog",children:Ot.jsxs("div",{className:"marble-content",children:[Ot.jsx(Nr,{children:Ot.jsx(_r,{children:"Edit Product"})}),Ot.jsx(lR,{product:o,onSubmit:m,isLoading:p.isPending})]})})})]})}):Ot.jsx("div",{className:"min-h-screen",children:Ot.jsx("div",{className:"container mx-auto px-4 py-8",children:"Please sign in to manage products."})})}function lR({product:e,onSubmit:t,isLoading:n}){const{toast:r}=Nn(),s=La(),[i,a]=hn.useState(!1),[o,l]=hn.useState(new Map),c=Fa({mutationFn:async({productId:e,imageUrl:t})=>await qn("POST",`/api/products/${e}/images`,{imageUrl:t}),onSuccess:()=>{r({title:"Image uploaded successfully"}),e?.businessId&&s.invalidateQueries({queryKey:["/api/businesses",e.businessId,"products"]}),s.invalidateQueries({queryKey:["/api/businesses/my"]})},onError:e=>{r({title:"Failed to save image",description:e.message,variant:"destructive"})}}),d=Fa({mutationFn:async({productId:e,imageUrl:t})=>await qn("DELETE",`/api/products/${e}/images`,{imageUrl:t}),onSuccess:()=>{r({title:"Image deleted successfully"}),e?.businessId&&s.invalidateQueries({queryKey:["/api/businesses",e.businessId,"products"]}),s.invalidateQueries({queryKey:["/api/businesses/my"]})},onError:e=>{r({title:"Failed to delete image",description:e.message,variant:"destructive"})}});return Ot.jsxs("form",{onSubmit:t,className:"space-y-4",children:[Ot.jsxs("div",{children:[Ot.jsx(ws,{htmlFor:"name",children:"Product Name *"}),Ot.jsx(zn,{id:"name",name:"name",defaultValue:e?.name||"",required:!0,"data-testid":"input-product-name"})]}),Ot.jsxs("div",{children:[Ot.jsx(ws,{htmlFor:"description",children:"Description"}),Ot.jsx(Tr,{id:"description",name:"description",defaultValue:e?.description||"",rows:3,"data-testid":"textarea-product-description"})]}),e?.id&&Ot.jsxs("div",{className:"space-y-3",children:[Ot.jsxs(ws,{children:["Product Images (",e.images?.length||0,"/5)"]}),e.images&&e.images.length>0&&Ot.jsx("div",{className:"grid grid-cols-3 gap-3",children:e.images.map((t,n)=>Ot.jsxs("div",{className:"relative group","data-testid":`image-thumbnail-${n}`,children:[Ot.jsx("img",{src:t,alt:`Product ${n+1}`,className:"w-full h-32 object-cover rounded-lg border"}),Ot.jsx(Ln,{type:"button",variant:"destructive",size:"sm",className:"absolute top-1 right-1 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>d.mutate({productId:e.id,imageUrl:t}),disabled:d.isPending,"data-testid":`button-delete-image-${n}`,children:Ot.jsx(jn,{className:"h-4 w-4"})})]},n))}),(!e.images||e.images.length<5)&&Ot.jsx(UO,{maxNumberOfFiles:1,maxFileSize:10485760,onGetUploadParameters:async t=>{if(!e?.id)return{method:"PUT",url:""};a(!0);try{const n=await qn("POST",`/api/products/${e.id}/images/upload-url`,{filename:t.name});return l(e=>{const r=new Map(e);return r.set(t.id,n.publicPath),r}),{method:"PUT",url:n.url}}catch(n){throw r({title:"Failed to get upload URL",description:n.message,variant:"destructive"}),a(!1),n}},onComplete:async t=>{if(!e?.id)return;a(!1);const n=t.successful||[];try{for(const t of n){const n=o.get(t.id);n?await c.mutateAsync({productId:e.id,imageUrl:n}):r({title:"Failed to save image",description:"Could not retrieve image path",variant:"destructive"})}}catch(s){r({title:"Error saving images",description:s.message,variant:"destructive"})}finally{l(new Map)}},buttonClassName:"w-full",children:i?"Uploading...":"Upload Product Image"})]}),Ot.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ot.jsxs("div",{children:[Ot.jsx(ws,{htmlFor:"price",children:"Price *"}),Ot.jsx(zn,{id:"price",name:"price",type:"number",step:"0.01",min:"0",defaultValue:e?.price||"",required:!0})]}),Ot.jsxs("div",{children:[Ot.jsx(ws,{htmlFor:"originalPrice",children:"Original Price"}),Ot.jsx(zn,{id:"originalPrice",name:"originalPrice",type:"number",step:"0.01",min:"0",defaultValue:e?.originalPrice||""})]})]}),Ot.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ot.jsxs("div",{children:[Ot.jsx(ws,{htmlFor:"category",children:"Category"}),Ot.jsxs(Un,{name:"category",defaultValue:e?.category||"",children:[Ot.jsx(Vn,{children:Ot.jsx(Hn,{placeholder:"Select category"})}),Ot.jsxs(Wn,{children:[Ot.jsx($n,{value:"Food & Beverage",children:"Food & Beverage"}),Ot.jsx($n,{value:"Fashion",children:"Fashion"}),Ot.jsx($n,{value:"Health & Beauty",children:"Health & Beauty"}),Ot.jsx($n,{value:"Home & Garden",children:"Home & Garden"}),Ot.jsx($n,{value:"Electronics",children:"Electronics"}),Ot.jsx($n,{value:"Art & Crafts",children:"Art & Crafts"})]})]})]}),Ot.jsxs("div",{children:[Ot.jsx(ws,{htmlFor:"inventory",children:"Inventory"}),Ot.jsx(zn,{id:"inventory",name:"inventory",type:"number",min:"0",defaultValue:e?.inventory?.toString()||"0"})]})]}),Ot.jsxs("div",{children:[Ot.jsx(ws,{htmlFor:"tags",children:"Tags (comma separated)"}),Ot.jsx(zn,{id:"tags",name:"tags",defaultValue:e?.tags?.join(", ")||"",placeholder:"local-made, eco-friendly, handcrafted"})]}),Ot.jsxs("div",{className:"flex gap-4",children:[Ot.jsxs("div",{className:"flex items-center space-x-2",children:[Ot.jsx("input",{type:"checkbox",id:"isActive",name:"isActive",value:"true",defaultChecked:!1!==e?.isActive}),Ot.jsx(ws,{htmlFor:"isActive",children:"Active"})]}),Ot.jsxs("div",{className:"flex items-center space-x-2",children:[Ot.jsx("input",{type:"checkbox",id:"isDigital",name:"isDigital",value:"true",defaultChecked:e?.isDigital||!1}),Ot.jsx(ws,{htmlFor:"isDigital",children:"Digital Product"})]})]}),Ot.jsxs("div",{className:"flex justify-end gap-2",children:[Ot.jsx(Ln,{type:"button",variant:"outline",onClick:()=>window.history.back(),children:"Cancel"}),Ot.jsx(Ln,{type:"submit",disabled:n,children:n?"Saving...":e?"Update Product":"Create Product"})]})]})}const cR=wn("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),dR=hn.forwardRef(({className:e,variant:t,...n},r)=>Ot.jsx("div",{ref:r,role:"alert",className:bn(cR({variant:t}),e),...n}));dR.displayName="Alert";const uR=hn.forwardRef(({className:e,...t},n)=>Ot.jsx("h5",{ref:n,className:bn("mb-1 font-medium leading-none tracking-tight",e),...t}));uR.displayName="AlertTitle";const hR=hn.forwardRef(({className:e,...t},n)=>Ot.jsx("div",{ref:n,className:bn("text-sm [&_p]:leading-relaxed",e),...t}));hR.displayName="AlertDescription";var pR="Checkbox",[mR]=At(pR),[fR,gR]=mR(pR),xR=hn.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:s,defaultChecked:i,required:a,disabled:o,value:l="on",onCheckedChange:c,form:d,...u}=e,[h,p]=hn.useState(null),m=Pt(t,e=>p(e)),f=hn.useRef(!1),g=!h||(d||!!h.closest("form")),[x=!1,v]=Dt({prop:s,defaultProp:i,onChange:c}),y=hn.useRef(x);return hn.useEffect(()=>{const e=h?.form;if(e){const t=()=>v(y.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[h,v]),Ot.jsxs(fR,{scope:n,state:x,disabled:o,children:[Ot.jsx(It.button,{type:"button",role:"checkbox","aria-checked":wR(x)?"mixed":x,"aria-required":a,"data-state":jR(x),"data-disabled":o?"":void 0,disabled:o,value:l,...u,ref:m,onKeyDown:Ft(e.onKeyDown,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:Ft(e.onClick,e=>{v(e=>!!wR(e)||!e),g&&(f.current=e.isPropagationStopped(),f.current||e.stopPropagation())})}),g&&Ot.jsx(bR,{control:h,bubbles:!f.current,name:r,value:l,checked:x,required:a,disabled:o,form:d,style:{transform:"translateX(-100%)"},defaultChecked:!wR(i)&&i})]})});xR.displayName=pR;var vR="CheckboxIndicator",yR=hn.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...s}=e,i=gR(vR,n);return Ot.jsx(Lt,{present:r||wR(i.state)||!0===i.state,children:Ot.jsx(It.span,{"data-state":jR(i.state),"data-disabled":i.disabled?"":void 0,...s,ref:t,style:{pointerEvents:"none",...e.style}})})});yR.displayName=vR;var bR=e=>{const{control:t,checked:n,bubbles:r=!0,defaultChecked:s,...i}=e,a=hn.useRef(null),o=js(n),l=Ns(t);hn.useEffect(()=>{const e=a.current,t=window.HTMLInputElement.prototype,s=Object.getOwnPropertyDescriptor(t,"checked").set;if(o!==n&&s){const t=new Event("click",{bubbles:r});e.indeterminate=wR(n),s.call(e,!wR(n)&&n),e.dispatchEvent(t)}},[o,n,r]);const c=hn.useRef(!wR(n)&&n);return Ot.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:s??c.current,...i,tabIndex:-1,ref:a,style:{...e.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function wR(e){return"indeterminate"===e}function jR(e){return wR(e)?"indeterminate":e?"checked":"unchecked"}var NR=xR,_R=yR;const SR=hn.forwardRef(({className:e,...t},n)=>Ot.jsx(NR,{ref:n,className:bn("luxury-checkbox",e),...t,children:Ot.jsx(_R,{className:bn("flex items-center justify-center text-current"),children:Ot.jsx(rr,{className:"h-3.5 w-3.5 stroke-[3]"})})}));function MR(e){const t=CR(e),n=hn.forwardRef((e,n)=>{const{children:r,...s}=e,i=hn.Children.toArray(r),a=i.find(kR);if(a){const e=a.props.children,r=i.map(t=>t===a?hn.Children.count(e)>1?hn.Children.only(null):hn.isValidElement(e)?e.props.children:null:t);return Ot.jsx(t,{...s,ref:n,children:hn.isValidElement(e)?hn.cloneElement(e,void 0,r):null})}return Ot.jsx(t,{...s,ref:n,children:r})});return n.displayName=`${e}.Slot`,n}function CR(e){const t=hn.forwardRef((e,t)=>{const{children:n,...r}=e;if(hn.isValidElement(n)){const e=function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;if(n)return e.ref;if(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n)return e.props.ref;return e.props.ref||e.ref}(n),s=function(e,t){const n={...t};for(const r in t){const s=e[r],i=t[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...e)=>{i(...e),s(...e)}:s&&(n[r]=s):"style"===r?n[r]={...s,...i}:"className"===r&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...e,...n}}(r,n.props);return n.type!==hn.Fragment&&(s.ref=t?rn(t,e):e),hn.cloneElement(n,s)}return hn.Children.count(n)>1?hn.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}SR.displayName=NR.displayName;var ER=Symbol("radix.slottable");function kR(e){return hn.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===ER}var AR=["Enter"," "],TR=["ArrowUp","PageDown","End"],PR=["ArrowDown","PageUp","Home",...TR],OR={ltr:[...AR,"ArrowRight"],rtl:[...AR,"ArrowLeft"]},RR={ltr:["ArrowLeft"],rtl:["ArrowRight"]},IR="Menu",[DR,LR,FR]=Tt(IR),[zR,BR]=At(IR,[FR,_s,Ss]),UR=_s(),VR=Ss(),[HR,WR]=zR(IR),[$R,GR]=zR(IR),qR=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:s,onOpenChange:i,modal:a=!0}=e,o=UR(t),[l,c]=hn.useState(null),d=hn.useRef(!1),u=zt(i),h=qt(s);return hn.useEffect(()=>{const e=()=>{d.current=!0,document.addEventListener("pointerdown",t,{capture:!0,once:!0}),document.addEventListener("pointermove",t,{capture:!0,once:!0})},t=()=>d.current=!1;return document.addEventListener("keydown",e,{capture:!0}),()=>{document.removeEventListener("keydown",e,{capture:!0}),document.removeEventListener("pointerdown",t,{capture:!0}),document.removeEventListener("pointermove",t,{capture:!0})}},[]),Ot.jsx(As,{...o,children:Ot.jsx(HR,{scope:t,open:n,onOpenChange:u,content:l,onContentChange:c,children:Ot.jsx($R,{scope:t,onClose:hn.useCallback(()=>u(!1),[u]),isUsingKeyboardRef:d,dir:h,modal:a,children:r})})})};qR.displayName=IR;var XR=hn.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,s=UR(n);return Ot.jsx(Ms,{...s,...r,ref:t})});XR.displayName="MenuAnchor";var KR="MenuPortal",[YR,ZR]=zR(KR,{forceMount:void 0}),JR=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:s}=e,i=WR(KR,t);return Ot.jsx(YR,{scope:t,forceMount:n,children:Ot.jsx(Lt,{present:n||i.open,children:Ot.jsx(Ut,{asChild:!0,container:s,children:r})})})};JR.displayName=KR;var QR="MenuContent",[eI,tI]=zR(QR),nI=hn.forwardRef((e,t)=>{const n=ZR(QR,e.__scopeMenu),{forceMount:r=n.forceMount,...s}=e,i=WR(QR,e.__scopeMenu),a=GR(QR,e.__scopeMenu);return Ot.jsx(DR.Provider,{scope:e.__scopeMenu,children:Ot.jsx(Lt,{present:r||i.open,children:Ot.jsx(DR.Slot,{scope:e.__scopeMenu,children:a.modal?Ot.jsx(rI,{...s,ref:t}):Ot.jsx(sI,{...s,ref:t})})})})}),rI=hn.forwardRef((e,t)=>{const n=WR(QR,e.__scopeMenu),r=hn.useRef(null),s=Pt(t,r);return hn.useEffect(()=>{const e=r.current;if(e)return cn(e)},[]),Ot.jsx(aI,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Ft(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),sI=hn.forwardRef((e,t)=>{const n=WR(QR,e.__scopeMenu);return Ot.jsx(aI,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),iI=MR("MenuContent.ScrollLock"),aI=hn.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:a,disableOutsidePointerEvents:o,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:d,onFocusOutside:u,onInteractOutside:h,onDismiss:p,disableOutsideScroll:m,...f}=e,g=WR(QR,n),x=GR(QR,n),v=UR(n),y=VR(n),b=LR(n),[w,j]=hn.useState(null),N=hn.useRef(null),_=Pt(t,N,g.onContentChange),S=hn.useRef(0),M=hn.useRef(""),C=hn.useRef(0),E=hn.useRef(null),k=hn.useRef("right"),A=hn.useRef(0),T=m?an:hn.Fragment,P=m?{as:iI,allowPinchZoom:!0}:void 0,O=e=>{const t=M.current+e,n=b().filter(e=>!e.disabled),r=document.activeElement,s=n.find(e=>e.ref.current===r)?.textValue,i=function(e,t,n){const r=t.length>1&&Array.from(t).every(e=>e===t[0]),s=r?t[0]:t,i=n?e.indexOf(n):-1;let a=(o=e,l=Math.max(i,0),o.map((e,t)=>o[(l+t)%o.length]));var o,l;1===s.length&&(a=a.filter(e=>e!==n));const c=a.find(e=>e.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}(n.map(e=>e.textValue),t,s),a=n.find(e=>e.textValue===i)?.ref.current;!function e(t){M.current=t,window.clearTimeout(S.current),""!==t&&(S.current=window.setTimeout(()=>e(""),1e3))}(t),a&&setTimeout(()=>a.focus())};hn.useEffect(()=>()=>window.clearTimeout(S.current),[]),sn();const R=hn.useCallback(e=>k.current===E.current?.side&&function(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return function(e,t){const{x:n,y:r}=e;let s=!1;for(let i=0,a=t.length-1;i<t.length;a=i++){const e=t[i].x,o=t[i].y,l=t[a].x,c=t[a].y;o>r!=c>r&&n<(l-e)*(r-o)/(c-o)+e&&(s=!s)}return s}(n,t)}(e,E.current?.area),[]);return Ot.jsx(eI,{scope:n,searchRef:M,onItemEnter:hn.useCallback(e=>{R(e)&&e.preventDefault()},[R]),onItemLeave:hn.useCallback(e=>{R(e)||(N.current?.focus(),j(null))},[R]),onTriggerLeave:hn.useCallback(e=>{R(e)&&e.preventDefault()},[R]),pointerGraceTimerRef:C,onPointerGraceIntentChange:hn.useCallback(e=>{E.current=e},[]),children:Ot.jsx(T,{...P,children:Ot.jsx(on,{asChild:!0,trapped:s,onMountAutoFocus:Ft(i,e=>{e.preventDefault(),N.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:a,children:Ot.jsx(ln,{asChild:!0,disableOutsidePointerEvents:o,onEscapeKeyDown:c,onPointerDownOutside:d,onFocusOutside:u,onInteractOutside:h,onDismiss:p,children:Ot.jsx(Es,{asChild:!0,...y,dir:x.dir,orientation:"vertical",loop:r,currentTabStopId:w,onCurrentTabStopIdChange:j,onEntryFocus:Ft(l,e=>{x.isUsingKeyboardRef.current||e.preventDefault()}),preventScrollOnEntryFocus:!0,children:Ot.jsx(ks,{role:"menu","aria-orientation":"vertical","data-state":PI(g.open),"data-radix-menu-content":"",dir:x.dir,...v,...f,ref:_,style:{outline:"none",...f.style},onKeyDown:Ft(f.onKeyDown,e=>{const t=e.target.closest("[data-radix-menu-content]")===e.currentTarget,n=e.ctrlKey||e.altKey||e.metaKey,r=1===e.key.length;t&&("Tab"===e.key&&e.preventDefault(),!n&&r&&O(e.key));const s=N.current;if(e.target!==s)return;if(!PR.includes(e.key))return;e.preventDefault();const i=b().filter(e=>!e.disabled).map(e=>e.ref.current);TR.includes(e.key)&&i.reverse(),function(e){const t=document.activeElement;for(const n of e){if(n===t)return;if(n.focus(),document.activeElement!==t)return}}(i)}),onBlur:Ft(e.onBlur,e=>{e.currentTarget.contains(e.target)||(window.clearTimeout(S.current),M.current="")}),onPointerMove:Ft(e.onPointerMove,II(e=>{const t=e.target,n=A.current!==e.clientX;if(e.currentTarget.contains(t)&&n){const t=e.clientX>A.current?"right":"left";k.current=t,A.current=e.clientX}}))})})})})})})});nI.displayName=QR;var oI=hn.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return Ot.jsx(It.div,{role:"group",...r,ref:t})});oI.displayName="MenuGroup";var lI=hn.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return Ot.jsx(It.div,{...r,ref:t})});lI.displayName="MenuLabel";var cI="MenuItem",dI="menu.itemSelect",uI=hn.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...s}=e,i=hn.useRef(null),a=GR(cI,e.__scopeMenu),o=tI(cI,e.__scopeMenu),l=Pt(t,i),c=hn.useRef(!1);return Ot.jsx(hI,{...s,ref:l,disabled:n,onClick:Ft(e.onClick,()=>{const e=i.current;if(!n&&e){const t=new CustomEvent(dI,{bubbles:!0,cancelable:!0});e.addEventListener(dI,e=>r?.(e),{once:!0}),Ht(e,t),t.defaultPrevented?c.current=!1:a.onClose()}}),onPointerDown:t=>{e.onPointerDown?.(t),c.current=!0},onPointerUp:Ft(e.onPointerUp,e=>{c.current||e.currentTarget?.click()}),onKeyDown:Ft(e.onKeyDown,e=>{const t=""!==o.searchRef.current;n||t&&" "===e.key||AR.includes(e.key)&&(e.currentTarget.click(),e.preventDefault())})})});uI.displayName=cI;var hI=hn.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:s,...i}=e,a=tI(cI,n),o=VR(n),l=hn.useRef(null),c=Pt(t,l),[d,u]=hn.useState(!1),[h,p]=hn.useState("");return hn.useEffect(()=>{const e=l.current;e&&p((e.textContent??"").trim())},[i.children]),Ot.jsx(DR.ItemSlot,{scope:n,disabled:r,textValue:s??h,children:Ot.jsx(Cs,{asChild:!0,...o,focusable:!r,children:Ot.jsx(It.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:c,onPointerMove:Ft(e.onPointerMove,II(e=>{if(r)a.onItemLeave(e);else if(a.onItemEnter(e),!e.defaultPrevented){e.currentTarget.focus({preventScroll:!0})}})),onPointerLeave:Ft(e.onPointerLeave,II(e=>a.onItemLeave(e))),onFocus:Ft(e.onFocus,()=>u(!0)),onBlur:Ft(e.onBlur,()=>u(!1))})})})}),pI=hn.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...s}=e;return Ot.jsx(wI,{scope:e.__scopeMenu,checked:n,children:Ot.jsx(uI,{role:"menuitemcheckbox","aria-checked":OI(n)?"mixed":n,...s,ref:t,"data-state":RI(n),onSelect:Ft(s.onSelect,()=>r?.(!!OI(n)||!n),{checkForDefaultPrevented:!1})})})});pI.displayName="MenuCheckboxItem";var mI="MenuRadioGroup",[fI,gI]=zR(mI,{value:void 0,onValueChange:()=>{}}),xI=hn.forwardRef((e,t)=>{const{value:n,onValueChange:r,...s}=e,i=zt(r);return Ot.jsx(fI,{scope:e.__scopeMenu,value:n,onValueChange:i,children:Ot.jsx(oI,{...s,ref:t})})});xI.displayName=mI;var vI="MenuRadioItem",yI=hn.forwardRef((e,t)=>{const{value:n,...r}=e,s=gI(vI,e.__scopeMenu),i=n===s.value;return Ot.jsx(wI,{scope:e.__scopeMenu,checked:i,children:Ot.jsx(uI,{role:"menuitemradio","aria-checked":i,...r,ref:t,"data-state":RI(i),onSelect:Ft(r.onSelect,()=>s.onValueChange?.(n),{checkForDefaultPrevented:!1})})})});yI.displayName=vI;var bI="MenuItemIndicator",[wI,jI]=zR(bI,{checked:!1}),NI=hn.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...s}=e,i=jI(bI,n);return Ot.jsx(Lt,{present:r||OI(i.checked)||!0===i.checked,children:Ot.jsx(It.span,{...s,ref:t,"data-state":RI(i.checked)})})});NI.displayName=bI;var _I=hn.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return Ot.jsx(It.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});_I.displayName="MenuSeparator";var SI=hn.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,s=UR(n);return Ot.jsx(Ts,{...s,...r,ref:t})});SI.displayName="MenuArrow";var[MI,CI]=zR("MenuSub"),EI="MenuSubTrigger",kI=hn.forwardRef((e,t)=>{const n=WR(EI,e.__scopeMenu),r=GR(EI,e.__scopeMenu),s=CI(EI,e.__scopeMenu),i=tI(EI,e.__scopeMenu),a=hn.useRef(null),{pointerGraceTimerRef:o,onPointerGraceIntentChange:l}=i,c={__scopeMenu:e.__scopeMenu},d=hn.useCallback(()=>{a.current&&window.clearTimeout(a.current),a.current=null},[]);return hn.useEffect(()=>d,[d]),hn.useEffect(()=>{const e=o.current;return()=>{window.clearTimeout(e),l(null)}},[o,l]),Ot.jsx(XR,{asChild:!0,...c,children:Ot.jsx(hI,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":s.contentId,"data-state":PI(n.open),...e,ref:rn(t,s.onTriggerChange),onClick:t=>{e.onClick?.(t),e.disabled||t.defaultPrevented||(t.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Ft(e.onPointerMove,II(t=>{i.onItemEnter(t),t.defaultPrevented||e.disabled||n.open||a.current||(i.onPointerGraceIntentChange(null),a.current=window.setTimeout(()=>{n.onOpenChange(!0),d()},100))})),onPointerLeave:Ft(e.onPointerLeave,II(e=>{d();const t=n.content?.getBoundingClientRect();if(t){const r=n.content?.dataset.side,s="right"===r,a=s?-5:5,l=t[s?"left":"right"],c=t[s?"right":"left"];i.onPointerGraceIntentChange({area:[{x:e.clientX+a,y:e.clientY},{x:l,y:t.top},{x:c,y:t.top},{x:c,y:t.bottom},{x:l,y:t.bottom}],side:r}),window.clearTimeout(o.current),o.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(e),e.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:Ft(e.onKeyDown,t=>{const s=""!==i.searchRef.current;e.disabled||s&&" "===t.key||OR[r.dir].includes(t.key)&&(n.onOpenChange(!0),n.content?.focus(),t.preventDefault())})})})});kI.displayName=EI;var AI="MenuSubContent",TI=hn.forwardRef((e,t)=>{const n=ZR(QR,e.__scopeMenu),{forceMount:r=n.forceMount,...s}=e,i=WR(QR,e.__scopeMenu),a=GR(QR,e.__scopeMenu),o=CI(AI,e.__scopeMenu),l=hn.useRef(null),c=Pt(t,l);return Ot.jsx(DR.Provider,{scope:e.__scopeMenu,children:Ot.jsx(Lt,{present:r||i.open,children:Ot.jsx(DR.Slot,{scope:e.__scopeMenu,children:Ot.jsx(aI,{id:o.contentId,"aria-labelledby":o.triggerId,...s,ref:c,align:"start",side:"rtl"===a.dir?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:e=>{a.isUsingKeyboardRef.current&&l.current?.focus(),e.preventDefault()},onCloseAutoFocus:e=>e.preventDefault(),onFocusOutside:Ft(e.onFocusOutside,e=>{e.target!==o.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:Ft(e.onEscapeKeyDown,e=>{a.onClose(),e.preventDefault()}),onKeyDown:Ft(e.onKeyDown,e=>{const t=e.currentTarget.contains(e.target),n=RR[a.dir].includes(e.key);t&&n&&(i.onOpenChange(!1),o.trigger?.focus(),e.preventDefault())})})})})})});function PI(e){return e?"open":"closed"}function OI(e){return"indeterminate"===e}function RI(e){return OI(e)?"indeterminate":e?"checked":"unchecked"}function II(e){return t=>"mouse"===t.pointerType?e(t):void 0}TI.displayName=AI;var DI=qR,LI=XR,FI=JR,zI=nI,BI=oI,UI=lI,VI=uI,HI=pI,WI=xI,$I=yI,GI=NI,qI=_I,XI=SI,KI=kI,YI=TI,ZI="DropdownMenu",[JI]=At(ZI,[BR]),QI=BR(),[eD,tD]=JI(ZI),nD=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:s,defaultOpen:i,onOpenChange:a,modal:o=!0}=e,l=QI(t),c=hn.useRef(null),[d=!1,u]=Dt({prop:s,defaultProp:i,onChange:a});return Ot.jsx(eD,{scope:t,triggerId:dn(),triggerRef:c,contentId:dn(),open:d,onOpenChange:u,onOpenToggle:hn.useCallback(()=>u(e=>!e),[u]),modal:o,children:Ot.jsx(DI,{...l,open:d,onOpenChange:u,dir:r,modal:o,children:n})})};nD.displayName=ZI;var rD="DropdownMenuTrigger",sD=hn.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...s}=e,i=tD(rD,n),a=QI(n);return Ot.jsx(LI,{asChild:!0,...a,children:Ot.jsx(It.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:rn(t,i.triggerRef),onPointerDown:Ft(e.onPointerDown,e=>{r||0!==e.button||!1!==e.ctrlKey||(i.onOpenToggle(),i.open||e.preventDefault())}),onKeyDown:Ft(e.onKeyDown,e=>{r||(["Enter"," "].includes(e.key)&&i.onOpenToggle(),"ArrowDown"===e.key&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(e.key)&&e.preventDefault())})})})});sD.displayName=rD;var iD=e=>{const{__scopeDropdownMenu:t,...n}=e,r=QI(t);return Ot.jsx(FI,{...r,...n})};iD.displayName="DropdownMenuPortal";var aD="DropdownMenuContent",oD=hn.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=tD(aD,n),i=QI(n),a=hn.useRef(!1);return Ot.jsx(zI,{id:s.contentId,"aria-labelledby":s.triggerId,...i,...r,ref:t,onCloseAutoFocus:Ft(e.onCloseAutoFocus,e=>{a.current||s.triggerRef.current?.focus(),a.current=!1,e.preventDefault()}),onInteractOutside:Ft(e.onInteractOutside,e=>{const t=e.detail.originalEvent,n=0===t.button&&!0===t.ctrlKey,r=2===t.button||n;s.modal&&!r||(a.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});oD.displayName=aD;hn.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=QI(n);return Ot.jsx(BI,{...s,...r,ref:t})}).displayName="DropdownMenuGroup";var lD=hn.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=QI(n);return Ot.jsx(UI,{...s,...r,ref:t})});lD.displayName="DropdownMenuLabel";var cD=hn.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=QI(n);return Ot.jsx(VI,{...s,...r,ref:t})});cD.displayName="DropdownMenuItem";var dD=hn.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=QI(n);return Ot.jsx(HI,{...s,...r,ref:t})});dD.displayName="DropdownMenuCheckboxItem";hn.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=QI(n);return Ot.jsx(WI,{...s,...r,ref:t})}).displayName="DropdownMenuRadioGroup";var uD=hn.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=QI(n);return Ot.jsx($I,{...s,...r,ref:t})});uD.displayName="DropdownMenuRadioItem";var hD=hn.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=QI(n);return Ot.jsx(GI,{...s,...r,ref:t})});hD.displayName="DropdownMenuItemIndicator";var pD=hn.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=QI(n);return Ot.jsx(qI,{...s,...r,ref:t})});pD.displayName="DropdownMenuSeparator";hn.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=QI(n);return Ot.jsx(XI,{...s,...r,ref:t})}).displayName="DropdownMenuArrow";var mD=hn.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=QI(n);return Ot.jsx(KI,{...s,...r,ref:t})});mD.displayName="DropdownMenuSubTrigger";var fD=hn.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=QI(n);return Ot.jsx(YI,{...s,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});fD.displayName="DropdownMenuSubContent";var gD=iD,xD=oD,vD=lD,yD=cD,bD=dD,wD=uD,jD=hD,ND=pD,_D=mD,SD=fD;const MD=nD,CD=sD;hn.forwardRef(({className:e,inset:t,children:n,...r},s)=>Ot.jsxs(_D,{ref:s,className:bn("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",e),...r,children:[n,Ot.jsx(Ps,{className:"ml-auto"})]})).displayName=_D.displayName;hn.forwardRef(({className:e,...t},n)=>Ot.jsx(SD,{ref:n,className:bn("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",e),...t})).displayName=SD.displayName;const ED=hn.forwardRef(({className:e,sideOffset:t=4,...n},r)=>Ot.jsx(gD,{children:Ot.jsx(xD,{ref:r,sideOffset:t,className:bn("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",e),...n})}));ED.displayName=xD.displayName;const kD=hn.forwardRef(({className:e,inset:t,...n},r)=>Ot.jsx(yD,{ref:r,className:bn("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",e),...n}));kD.displayName=yD.displayName;hn.forwardRef(({className:e,children:t,checked:n,...r},s)=>Ot.jsxs(bD,{ref:s,className:bn("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...r,children:[Ot.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:Ot.jsx(jD,{children:Ot.jsx(rr,{className:"h-4 w-4"})})}),t]})).displayName=bD.displayName;hn.forwardRef(({className:e,children:t,...n},r)=>Ot.jsxs(wD,{ref:r,className:bn("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[Ot.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:Ot.jsx(jD,{children:Ot.jsx(Kr,{className:"h-2 w-2 fill-current"})})}),t]})).displayName=wD.displayName;const AD=hn.forwardRef(({className:e,inset:t,...n},r)=>Ot.jsx(vD,{ref:r,className:bn("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));AD.displayName=vD.displayName;const TD=hn.forwardRef(({className:e,...t},n)=>Ot.jsx(ND,{ref:n,className:bn("-mx-1 my-1 h-px bg-muted",e),...t}));function PD({data:e,columns:t,searchable:n=!0,sortable:r=!0,filterable:s=!0,selectable:i=!0,paginated:a=!0,pageSize:o=10,onRowClick:l,onSelectionChange:c,onExport:d,loading:u=!1,emptyMessage:h="No data available",className:p}){const[m,f]=hn.useState(""),[g,x]=hn.useState(null),[v,y]=hn.useState([]),[b,w]=hn.useState(1),[j,N]=hn.useState({}),_=hn.useMemo(()=>{let t=e;return m&&(t=t.filter(e=>Object.values(e).some(e=>String(e).toLowerCase().includes(m.toLowerCase())))),Object.entries(j).forEach(([e,n])=>{n&&(t=t.filter(t=>String(t[e]).toLowerCase().includes(n.toLowerCase())))}),t},[e,m,j]),S=hn.useMemo(()=>g?[..._].sort((e,t)=>{const n=e[g.key],r=t[g.key];return n<r?"asc"===g.direction?-1:1:n>r?"asc"===g.direction?1:-1:0}):_,[_,g]),M=hn.useMemo(()=>{if(!a)return S;const e=(b-1)*o;return S.slice(e,e+o)},[S,b,o,a]),C=Math.ceil(S.length/o),E=hn.useCallback(e=>{r&&x(t=>t?.key===e?"asc"===t.direction?{key:e,direction:"desc"}:null:{key:e,direction:"asc"})},[r]),k=hn.useCallback(e=>{e?(y(M),c?.(M)):(y([]),c?.([]))},[M,c]),A=hn.useCallback((e,t)=>{const n=t?[...v,e]:v.filter(t=>t!==e);y(n),c?.(n)},[v,c]),T=hn.useCallback((e,t)=>{N(n=>({...n,[e]:t}))},[]),P=hn.useCallback(()=>{N({}),f("")},[]);return u?Ot.jsx("div",{className:"miami-glass rounded-2xl p-6 miami-card-glow",children:Ot.jsx("div",{className:"space-y-4",children:[...Array(5)].map((e,t)=>Ot.jsx("div",{className:"h-12 bg-gradient-to-r from-slate-200/50 to-slate-300/50 rounded-lg animate-pulse"},t))})}):Ot.jsxs("div",{className:bn("miami-glass rounded-2xl overflow-hidden miami-card-glow",p),children:[Ot.jsx("div",{className:"p-6 border-b border-white/20",children:Ot.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-center justify-between",children:[Ot.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 flex-1",children:[n&&Ot.jsxs("div",{className:"relative group",children:[Ot.jsx(Fn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-slate-500 group-hover:text-primary transition-colors duration-300"}),Ot.jsx(zn,{placeholder:"Search...",value:m,onChange:e=>f(e.target.value),className:"pl-10 pr-4 py-2 bg-white/80 border-white/30 focus:border-primary/50 transition-all duration-300"})]}),s&&Ot.jsx("div",{className:"flex gap-2",children:Ot.jsxs(MD,{children:[Ot.jsx(CD,{asChild:!0,children:Ot.jsxs(Ln,{variant:"outline",size:"sm",className:"glass-panel border-white/30 hover:border-primary/50",children:[Ot.jsx(Os,{className:"h-4 w-4 mr-2"}),"Filters"]})}),Ot.jsx(ED,{className:"w-64 p-4",children:Ot.jsxs("div",{className:"space-y-3",children:[t.filter(e=>e.filterable).map(e=>Ot.jsxs("div",{children:[Ot.jsx("label",{className:"text-sm font-medium text-slate-700 mb-1 block",children:e.title}),Ot.jsx(zn,{placeholder:`Filter by ${e.title}`,value:j[String(e.key)]||"",onChange:t=>T(String(e.key),t.target.value),className:"text-sm"})]},String(e.key))),Ot.jsx(Ln,{variant:"outline",size:"sm",onClick:P,className:"w-full",children:"Clear Filters"})]})})]})})]}),Ot.jsxs("div",{className:"flex gap-2",children:[d&&Ot.jsxs(Ln,{variant:"outline",size:"sm",onClick:()=>d(S),className:"glass-panel border-white/30 hover:border-primary/50",children:[Ot.jsx(ds,{className:"h-4 w-4 mr-2"}),"Export"]}),v.length>0&&Ot.jsxs(Tn,{variant:"secondary",className:"bg-primary/20 text-primary",children:[v.length," selected"]})]})]})}),Ot.jsx("div",{className:"overflow-x-auto",children:Ot.jsxs("table",{className:"w-full",children:[Ot.jsx("thead",{className:"bg-gradient-to-r from-white/10 to-white/5",children:Ot.jsxs("tr",{children:[i&&Ot.jsx("th",{className:"w-12 p-4",children:Ot.jsx(SR,{checked:v.length===M.length&&M.length>0,onCheckedChange:k,className:"data-[state=checked]:bg-primary data-[state=checked]:border-primary"})}),t.map(e=>Ot.jsx("th",{className:bn("p-4 text-left font-semibold text-slate-700","center"===e.align&&"text-center","right"===e.align&&"text-right",e.sortable&&"cursor-pointer hover:bg-white/20 transition-colors duration-200"),style:{width:e.width},onClick:()=>e.sortable&&E(e.key),children:Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx("span",{children:e.title}),e.sortable&&Ot.jsxs("div",{className:"flex flex-col",children:[Ot.jsx(Rs,{className:bn("h-3 w-3 transition-colors duration-200",g?.key===e.key&&"asc"===g.direction?"text-primary":"text-slate-400")}),Ot.jsx(Gn,{className:bn("h-3 w-3 -mt-1 transition-colors duration-200",g?.key===e.key&&"desc"===g.direction?"text-primary":"text-slate-400")})]})]})},String(e.key))),Ot.jsx("th",{className:"w-12 p-4"})]})}),Ot.jsx("tbody",{children:Ot.jsx(jo,{children:M.map((e,n)=>Ot.jsxs(wo.tr,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.2,delay:.05*n},className:bn("border-b border-white/10 hover:bg-white/5 transition-all duration-200 cursor-pointer group",v.includes(e)&&"bg-primary/10"),onClick:()=>l?.(e),children:[i&&Ot.jsx("td",{className:"p-4",children:Ot.jsx(SR,{checked:v.includes(e),onCheckedChange:t=>A(e,!!t),onClick:e=>e.stopPropagation(),className:"data-[state=checked]:bg-primary data-[state=checked]:border-primary"})}),t.map(t=>Ot.jsx("td",{className:bn("p-4 text-slate-600 group-hover:text-slate-900 transition-colors duration-200","center"===t.align&&"text-center","right"===t.align&&"text-right"),children:t.render?t.render(e[t.key],e):String(e[t.key]||"-")},String(t.key))),Ot.jsx("td",{className:"p-4",children:Ot.jsxs(MD,{children:[Ot.jsx(CD,{asChild:!0,children:Ot.jsx(Ln,{variant:"ghost",size:"sm",className:"opacity-0 group-hover:opacity-100 transition-opacity duration-200",onClick:e=>e.stopPropagation(),children:Ot.jsx(Is,{className:"h-4 w-4"})})}),Ot.jsxs(ED,{align:"end",children:[Ot.jsxs(kD,{children:[Ot.jsx($r,{className:"h-4 w-4 mr-2"}),"View"]}),Ot.jsxs(kD,{children:[Ot.jsx(Ds,{className:"h-4 w-4 mr-2"}),"Edit"]}),Ot.jsx(TD,{}),Ot.jsxs(kD,{className:"text-red-600",children:[Ot.jsx(vs,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})})]},n))})})]})}),0===M.length&&Ot.jsxs(wo.div,{initial:{opacity:0},animate:{opacity:1},className:"p-12 text-center",children:[Ot.jsx("div",{className:"text-slate-400 mb-4",children:Ot.jsx(Fn,{className:"h-12 w-12 mx-auto opacity-50"})}),Ot.jsx("h3",{className:"text-lg font-semibold text-slate-700 mb-2",children:"No data found"}),Ot.jsx("p",{className:"text-slate-500",children:h})]}),a&&C>1&&Ot.jsx("div",{className:"p-6 border-t border-white/20",children:Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{className:"text-sm text-slate-600",children:["Showing ",(b-1)*o+1," to ",Math.min(b*o,S.length)," of ",S.length," entries"]}),Ot.jsxs("div",{className:"flex gap-2",children:[Ot.jsx(Ln,{variant:"outline",size:"sm",onClick:()=>w(e=>Math.max(1,e-1)),disabled:1===b,className:"glass-panel border-white/30",children:"Previous"}),[...Array(C)].map((e,t)=>Ot.jsx(Ln,{variant:b===t+1?"default":"outline",size:"sm",onClick:()=>w(t+1),className:bn("min-w-[40px]",b===t+1?"bg-primary text-white":"glass-panel border-white/30"),children:t+1},t+1)),Ot.jsx(Ln,{variant:"outline",size:"sm",onClick:()=>w(e=>Math.min(C,e+1)),disabled:b===C,className:"glass-panel border-white/30",children:"Next"})]})]})})]})}TD.displayName=ND.displayName;function OD(){const{isAuthenticated:e}=Ua(),{toast:t}=Nn(),[n,r]=hn.useState(""),{data:s=[]}=za({queryKey:["/api/businesses/my"],enabled:e}),{data:i,isLoading:a,error:o}=za({queryKey:["/api/businesses",n,"stripe","status"],enabled:!!n,retry:!1}),{data:l,isLoading:c}=za({queryKey:["/api/businesses",n,"stripe","balance"],enabled:!!n&&!!i?.accountId,retry:!1}),{data:d,isLoading:u}=za({queryKey:["/api/businesses",n,"stripe","payouts"],enabled:!!n&&!!i?.accountId,retry:!1}),{data:h,isLoading:p}=za({queryKey:["/api/businesses",n,"stripe","transactions"],enabled:!!n&&!!i?.accountId,retry:!1}),m=l?.available?.find(e=>"usd"===e.currency)?.amount||0,f=pn({resolver:Rr((g=m,Eo({amount:zo.number({required_error:"Amount is required"}).min(1,"Amount must be at least $1").max(g/100,`Amount cannot exceed available balance ($${(g/100).toFixed(2)})`),description:Ao().max(500,"Description must be 500 characters or less").optional()}))),defaultValues:{amount:void 0,description:""}});var g;const x=Fa({mutationFn:async()=>await qn("POST",`/api/businesses/${n}/stripe/connect`,{}),onSuccess:e=>{e.accountLink?.url&&(window.location.href=e.accountLink.url)},onError:e=>{t({title:"Failed to setup Stripe Connect",description:e.message,variant:"destructive"})}}),v=Fa({mutationFn:async()=>{const e=await fetch(`/api/businesses/${n}/stripe/refresh`,{credentials:"include"});if(!e.ok){const t=await e.json();throw new Error(t.message||"Failed to resume onboarding")}return e.json()},onSuccess:e=>{e.url&&(window.location.href=e.url)},onError:e=>{t({title:"Failed to resume onboarding",description:e.message,variant:"destructive"})}}),y=Fa({mutationFn:async e=>{const t=Math.round(100*e.amount);return await qn("POST",`/api/businesses/${n}/stripe/payouts`,{amount:t,description:e.description||void 0})},onSuccess:()=>{t({title:"Payout requested successfully"}),f.reset(),vr.invalidateQueries({queryKey:["/api/businesses",n,"stripe","payouts"]}),vr.invalidateQueries({queryKey:["/api/businesses",n,"stripe","balance"]}),vr.invalidateQueries({queryKey:["/api/businesses",n,"stripe","transactions"]})},onError:e=>{t({title:"Failed to create payout",description:e.message,variant:"destructive"})}}),b=Fa({mutationFn:async e=>await qn("POST",`/api/businesses/${n}/stripe/payout-settings`,{interval:e,delayDays:2}),onSuccess:()=>{t({title:"Payout schedule updated successfully"}),vr.invalidateQueries({queryKey:["/api/businesses",n,"stripe","status"]})},onError:e=>{t({title:"Failed to update payout schedule",description:e.message,variant:"destructive"})}}),w=(e,t="usd")=>new Intl.NumberFormat("en-US",{style:"currency",currency:t.toUpperCase()}).format(e/100),j=[{key:"created",title:"Date",sortable:!0,render:e=>Fo(new Date(1e3*e),"MMM dd, yyyy")},{key:"amount",title:"Amount",sortable:!0,render:(e,t)=>Ot.jsx("span",{className:"font-semibold text-lg",children:w(e,t.currency)})},{key:"status",title:"Status",sortable:!0,render:e=>{const t={paid:{color:"bg-green-100 text-green-800 border-green-300",icon:zs},pending:{color:"bg-yellow-100 text-yellow-800 border-yellow-300",icon:xr},in_transit:{color:"bg-blue-100 text-blue-800 border-blue-300",icon:ns},failed:{color:"bg-red-100 text-red-800 border-red-300",icon:Bs},canceled:{color:"bg-gray-100 text-gray-800 border-gray-300",icon:Bs}},n=t[e]||t.pending,r=n.icon;return Ot.jsxs(Tn,{className:`${n.color} flex items-center gap-1 w-fit`,children:[Ot.jsx(r,{className:"h-3 w-3"}),e]})}},{key:"arrival_date",title:"Arrival Date",sortable:!0,render:e=>Fo(new Date(1e3*e),"MMM dd, yyyy")},{key:"description",title:"Description",render:e=>e||Ot.jsx("span",{className:"text-muted-foreground italic",children:"No description"})}],N=[{key:"created",title:"Date",sortable:!0,render:e=>Fo(new Date(1e3*e),"MMM dd, yyyy HH:mm")},{key:"type",title:"Type",sortable:!0,render:e=>Ot.jsx(Tn,{variant:"outline",className:"capitalize",children:e.replace(/_/g," ")})},{key:"description",title:"Description",render:e=>e||Ot.jsx("span",{className:"text-muted-foreground italic",children:"-"})},{key:"amount",title:"Amount",sortable:!0,align:"right",render:(e,t)=>Ot.jsx("span",{className:"font-semibold "+(e>=0?"text-green-600":"text-red-600"),children:w(e,t.currency)})},{key:"fee",title:"Fee",sortable:!0,align:"right",render:(e,t)=>Ot.jsx("span",{className:"text-muted-foreground",children:w(e,t.currency)})},{key:"net",title:"Net",sortable:!0,align:"right",render:(e,t)=>Ot.jsx("span",{className:"font-bold "+(e>=0?"text-green-700":"text-red-700"),children:w(e,t.currency)})}];if(!e)return Ot.jsx("div",{className:"container mx-auto px-4 py-8",children:Ot.jsxs(dR,{children:[Ot.jsx(Cn,{className:"h-4 w-4"}),Ot.jsx(uR,{children:"Authentication Required"}),Ot.jsx(hR,{children:"Please sign in to access vendor payouts."})]})});if(0===s.length)return Ot.jsx("div",{className:"container mx-auto px-4 py-8",children:Ot.jsxs(Sn,{className:"miami-glass",children:[Ot.jsxs(Lr,{children:[Ot.jsx(zr,{className:"text-3xl font-bold bg-gradient-to-r from-cyan-600 to-blue-600 bg-clip-text text-transparent",children:"Vendor Payouts"}),Ot.jsx(Ur,{children:"You need to create a business first to manage payouts."})]}),Ot.jsx(Mn,{children:Ot.jsx(Ln,{variant:"fl-gold",onClick:()=>window.location.href="/create-business",children:"Create Business"})})]})});const _=l?.available?.find(e=>"usd"===e.currency),S=l?.pending?.find(e=>"usd"===e.currency),M=!!o||!!i?.accountId,C=i?.onboardingComplete,E=i?.payoutsEnabled;return Ot.jsx("div",{className:"min-h-screen",children:Ot.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-8",children:[Ot.jsxs("div",{className:"vendor-payouts-header flex items-center justify-between rounded-2xl p-6 relative",children:[Ot.jsxs("div",{className:"marble-content",children:[Ot.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-cyan-600 via-blue-600 to-purple-600 bg-clip-text text-transparent mb-2","data-testid":"heading-vendor-payouts",children:"Vendor Payouts"}),Ot.jsx("p",{className:"text-muted-foreground",children:"Manage your Stripe Connect payouts and transactions"})]}),Ot.jsx(Ls,{className:"h-12 w-12 text-cyan-600 marble-content"})]}),Ot.jsxs(Sn,{className:"vendor-business-selection miami-glass border-white/30 relative",children:[Ot.jsx(Lr,{className:"marble-content",children:Ot.jsxs(zr,{className:"flex items-center gap-2",children:[Ot.jsx(ar,{className:"h-5 w-5"}),"Select Business"]})}),Ot.jsx(Mn,{className:"marble-content",children:Ot.jsxs(Un,{value:n,onValueChange:r,children:[Ot.jsx(Vn,{className:"w-full max-w-md bg-white/80 border-white/30","data-testid":"select-business",children:Ot.jsx(Hn,{placeholder:"Choose a business"})}),Ot.jsx(Wn,{children:s.map(e=>Ot.jsx($n,{value:e.id,children:e.name},e.id))})]})})]}),n&&Ot.jsxs(Ot.Fragment,{children:[a?Ot.jsx(Sn,{className:"vendor-stripe-status miami-glass relative",children:Ot.jsx(Mn,{className:"pt-6 marble-content",children:Ot.jsx(er,{className:"h-24 w-full"})})}):!M||o&&o.message?.includes("No Stripe Connect account")?Ot.jsxs(Sn,{className:"vendor-stripe-status miami-glass border-cyan-300 miami-card-glow relative",children:[Ot.jsxs(Lr,{className:"marble-content",children:[Ot.jsxs(zr,{className:"flex items-center gap-2",children:[Ot.jsx(Cn,{className:"h-6 w-6 text-cyan-600"}),"Set Up Stripe Payouts"]}),Ot.jsx(Ur,{children:"Connect your bank account to receive payouts from customer orders"})]}),Ot.jsx(Mn,{className:"marble-content",children:Ot.jsx(Ln,{variant:"fl-gold",onClick:()=>x.mutate(),disabled:x.isPending,className:"gap-2","data-testid":"button-setup-payouts",children:x.isPending?Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(Fs,{className:"h-4 w-4 animate-spin"}),"Setting up..."]}):Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(zs,{className:"h-4 w-4"}),"Set Up Payouts"]})})})]}):C?Ot.jsx(Sn,{className:"vendor-stripe-status miami-glass border-green-300 relative",children:Ot.jsx(Mn,{className:"pt-6 marble-content",children:Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsx(zs,{className:"h-8 w-8 text-green-600"}),Ot.jsxs("div",{children:[Ot.jsx("h3",{className:"font-semibold text-lg",children:"Stripe Account Active"}),Ot.jsxs("p",{className:"text-sm text-muted-foreground",children:["Payouts ",i.payoutsEnabled?"enabled":"disabled","  Charges ",i.chargesEnabled?"enabled":"disabled"]})]}),Ot.jsx(Tn,{className:"ml-auto bg-green-100 text-green-800 border-green-300","data-testid":"badge-account-status",children:"Active"})]})})}):Ot.jsxs(Sn,{className:"vendor-stripe-status miami-glass border-yellow-300 relative",children:[Ot.jsxs(Lr,{className:"marble-content",children:[Ot.jsxs(zr,{className:"flex items-center gap-2",children:[Ot.jsx(xr,{className:"h-6 w-6 text-yellow-600"}),"Complete Stripe Onboarding"]}),Ot.jsx(Ur,{children:"Finish setting up your account to start receiving payouts"})]}),Ot.jsxs(Mn,{className:"space-y-4 marble-content",children:[i?.requirements&&Ot.jsxs(dR,{"data-testid":"alert-requirements",children:[Ot.jsx(Cn,{className:"h-4 w-4"}),Ot.jsx(uR,{children:"Required Information"}),Ot.jsx(hR,{children:i.requirements.currently_due.length>0&&Ot.jsxs("div",{children:[Ot.jsx("p",{className:"font-semibold",children:"Currently Due:"}),Ot.jsx("ul",{className:"list-disc list-inside",children:i.requirements.currently_due.map(e=>Ot.jsx("li",{className:"capitalize",children:e.replace(/_/g," ")},e))})]})})]}),Ot.jsx(Ln,{variant:"fl-gold",onClick:()=>v.mutate(),disabled:v.isPending,className:"gap-2","data-testid":"button-resume-onboarding",children:v.isPending?Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(Fs,{className:"h-4 w-4 animate-spin"}),"Loading..."]}):Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(ns,{className:"h-4 w-4"}),"Resume Onboarding"]})})]})]}),C&&Ot.jsxs("div",{className:"vendor-balance-cards grid md:grid-cols-2 gap-6",children:[Ot.jsxs(Sn,{className:"miami-glass border-cyan-300 miami-card-glow relative overflow-hidden",children:[Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-cyan-500/10 to-blue-500/10"}),Ot.jsx(Lr,{className:"relative marble-content",children:Ot.jsxs(zr,{className:"flex items-center gap-2 text-cyan-700",children:[Ot.jsx(Dn,{className:"h-5 w-5"}),"Available Balance"]})}),Ot.jsx(Mn,{className:"relative marble-content",children:c?Ot.jsx(er,{className:"h-16 w-48"}):Ot.jsx("div",{className:"text-5xl font-bold bg-gradient-to-r from-cyan-600 to-blue-600 bg-clip-text text-transparent","data-testid":"text-available-balance",children:w(_?.amount||0)})})]}),Ot.jsxs(Sn,{className:"miami-glass border-purple-300 relative overflow-hidden",children:[Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-500/10 to-pink-500/10"}),Ot.jsx(Lr,{className:"relative marble-content",children:Ot.jsxs(zr,{className:"flex items-center gap-2 text-purple-700",children:[Ot.jsx(xr,{className:"h-5 w-5"}),"Pending Balance"]})}),Ot.jsx(Mn,{className:"relative marble-content",children:c?Ot.jsx(er,{className:"h-16 w-48"}):Ot.jsx("div",{className:"text-5xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent","data-testid":"text-pending-balance",children:w(S?.amount||0)})})]})]}),C&&Ot.jsxs("div",{className:"vendor-payout-settings grid md:grid-cols-2 gap-6",children:[Ot.jsxs(Sn,{className:"vendor-payout-schedule miami-glass relative",children:[Ot.jsx(Lr,{className:"marble-content",children:Ot.jsxs(zr,{className:"flex items-center gap-2",children:[Ot.jsx(Qn,{className:"h-5 w-5"}),"Payout Schedule"]})}),Ot.jsxs(Mn,{className:"space-y-4 marble-content",children:[Ot.jsxs("div",{children:[Ot.jsx(ws,{htmlFor:"payout-schedule",children:"Schedule Interval"}),Ot.jsxs(Un,{value:i?.payoutSchedule?.interval||"daily",onValueChange:e=>b.mutate(e),disabled:b.isPending,children:[Ot.jsx(Vn,{id:"payout-schedule",className:"bg-white/80 border-white/30","data-testid":"payout-schedule",children:Ot.jsx(Hn,{})}),Ot.jsxs(Wn,{children:[Ot.jsx($n,{value:"daily",children:"Daily"}),Ot.jsx($n,{value:"weekly",children:"Weekly"}),Ot.jsx($n,{value:"monthly",children:"Monthly"}),Ot.jsx($n,{value:"manual",children:"Manual"})]})]})]}),Ot.jsxs("div",{className:"text-sm text-muted-foreground",children:["Delay: ",i?.payoutSchedule?.delay_days||2," days"]}),"manual"===i?.payoutSchedule?.interval&&E&&Ot.jsxs(dR,{children:[Ot.jsx(Cn,{className:"h-4 w-4"}),Ot.jsx(hR,{children:"Manual mode enabled. Use the form below to request payouts."})]})]})]}),E&&Ot.jsxs(Sn,{className:"vendor-payout-form miami-glass border-blue-300 relative",children:[Ot.jsx(Lr,{className:"marble-content",children:Ot.jsxs(zr,{className:"flex items-center gap-2",children:[Ot.jsx(ns,{className:"h-5 w-5"}),"Request Payout"]})}),Ot.jsx(Mn,{className:"marble-content",children:Ot.jsx(Sr,{...f,children:Ot.jsxs("form",{onSubmit:f.handleSubmit(e=>y.mutate(e)),className:"space-y-4",children:[Ot.jsx(Mr,{control:f.control,name:"amount",render:({field:e})=>Ot.jsxs(Cr,{children:[Ot.jsx(Er,{children:"Amount (USD) *"}),Ot.jsx(kr,{children:Ot.jsx(zn,{type:"number",step:"0.01",min:"1",placeholder:"100.00",className:"bg-white/80 border-white/30","data-testid":"input-payout-amount",...e})}),Ot.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Available: ",w(_?.amount||0)]}),Ot.jsx(Ar,{})]})}),Ot.jsx(Mr,{control:f.control,name:"description",render:({field:e})=>Ot.jsxs(Cr,{children:[Ot.jsx(Er,{children:"Description (optional)"}),Ot.jsx(kr,{children:Ot.jsx(zn,{type:"text",placeholder:"Weekly payout",className:"bg-white/80 border-white/30","data-testid":"input-payout-description",...e})}),Ot.jsx(Ar,{})]})}),Ot.jsx(Ln,{variant:"fl-gold",type:"submit",disabled:!f.formState.isValid||y.isPending,className:"w-full gap-2","data-testid":"button-request-payout",children:y.isPending?Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(Fs,{className:"h-4 w-4 animate-spin"}),"Processing..."]}):Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(ns,{className:"h-4 w-4"}),"Request Payout"]})})]})})})]})]}),C&&Ot.jsxs(Sn,{className:"vendor-payouts-table miami-glass relative",children:[Ot.jsxs(Lr,{className:"marble-content",children:[Ot.jsx(zr,{children:"Payouts History"}),Ot.jsx(Ur,{children:"View all your payout transactions"})]}),Ot.jsx(Mn,{className:"marble-content",children:u?Ot.jsx("div",{className:"space-y-3","data-testid":"loading-payouts",children:[...Array(5)].map((e,t)=>Ot.jsx(er,{className:"h-12 w-full"},t))}):d?.data&&d.data.length>0?Ot.jsx("div",{"data-testid":"table-payouts",children:Ot.jsx(PD,{data:d.data,columns:j,searchable:!0,sortable:!0,paginated:!0,pageSize:10,emptyMessage:"No payouts yet"})}):Ot.jsxs(dR,{"data-testid":"alert-no-payouts",children:[Ot.jsx(Cn,{className:"h-4 w-4"}),Ot.jsx(uR,{children:"No Payouts Yet"}),Ot.jsx(hR,{children:"Your payout history will appear here once you start receiving payments."})]})})]}),C&&Ot.jsxs(Sn,{className:"vendor-transactions-table miami-glass relative",children:[Ot.jsxs(Lr,{className:"marble-content",children:[Ot.jsx(zr,{children:"Transaction History"}),Ot.jsx(Ur,{children:"All balance transactions including charges, refunds, and fees"})]}),Ot.jsx(Mn,{className:"marble-content",children:p?Ot.jsx("div",{className:"space-y-3","data-testid":"loading-transactions",children:[...Array(5)].map((e,t)=>Ot.jsx(er,{className:"h-12 w-full"},t))}):h?.data&&h.data.length>0?Ot.jsx("div",{"data-testid":"table-transactions",children:Ot.jsx(PD,{data:h.data,columns:N,searchable:!0,sortable:!0,paginated:!0,pageSize:10,emptyMessage:"No transactions yet"})}):Ot.jsxs(dR,{"data-testid":"alert-no-transactions",children:[Ot.jsx(Cn,{className:"h-4 w-4"}),Ot.jsx(uR,{children:"No Transactions Yet"}),Ot.jsx(hR,{children:"Your transaction history will appear here once you start processing payments."})]})})]})]})]})})}function RD(e,t){let n;return(...r)=>{window.clearTimeout(n),n=window.setTimeout(()=>e(...r),t)}}function ID({debounce:e,scroll:t,polyfill:n,offsetSize:r}={debounce:0,scroll:!1,offsetSize:!1}){const s=n||("undefined"==typeof window?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[i,a]=hn.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),o=hn.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:i,orientationHandler:null}),l=e?"number"==typeof e?e:e.scroll:null,c=e?"number"==typeof e?e:e.resize:null,d=hn.useRef(!1);hn.useEffect(()=>(d.current=!0,()=>{d.current=!1}));const[u,h,p]=hn.useMemo(()=>{const e=()=>{if(!o.current.element)return;const{left:e,top:t,width:n,height:s,bottom:i,right:l,x:c,y:u}=o.current.element.getBoundingClientRect(),h={left:e,top:t,width:n,height:s,bottom:i,right:l,x:c,y:u};o.current.element instanceof HTMLElement&&r&&(h.height=o.current.element.offsetHeight,h.width=o.current.element.offsetWidth),Object.freeze(h),d.current&&!FD(o.current.lastBounds,h)&&a(o.current.lastBounds=h)};return[e,c?RD(e,c):e,l?RD(e,l):e]},[a,r,l,c]);function m(){o.current.scrollContainers&&(o.current.scrollContainers.forEach(e=>e.removeEventListener("scroll",p,!0)),o.current.scrollContainers=null),o.current.resizeObserver&&(o.current.resizeObserver.disconnect(),o.current.resizeObserver=null),o.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",o.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",o.current.orientationHandler))}function f(){o.current.element&&(o.current.resizeObserver=new s(p),o.current.resizeObserver.observe(o.current.element),t&&o.current.scrollContainers&&o.current.scrollContainers.forEach(e=>e.addEventListener("scroll",p,{capture:!0,passive:!0})),o.current.orientationHandler=()=>{p()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",o.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",o.current.orientationHandler))}return function(e,t){hn.useEffect(()=>{if(t){const t=e;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>{window.removeEventListener("scroll",t,!0)}}},[e,t])}(p,!!t),function(e){hn.useEffect(()=>{const t=e;return window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}},[e])}(h),hn.useEffect(()=>{m(),f()},[t,p,h]),hn.useEffect(()=>m,[]),[e=>{!e||e===o.current.element||(m(),o.current.element=e,o.current.scrollContainers=DD(e),f())},i,u]}function DD(e){const t=[];if(!e||e===document.body)return t;const{overflow:n,overflowX:r,overflowY:s}=window.getComputedStyle(e);return[n,r,s].some(e=>"auto"===e||"scroll"===e)&&t.push(e),[...t,...DD(e.parentElement)]}const LD=["x","y","top","bottom","left","right","width","height"],FD=(e,t)=>LD.every(n=>e[n]===t[n]);function zD({children:e,gap:t=16,duration:n=25,durationOnHover:r,direction:s="horizontal",reverse:i=!1,className:a,speed:o,speedOnHover:l}){const c=o?o/10:n,d=l?l/10:r,[u,h]=hn.useState(c),[p,{width:m,height:f}]=ID(),g=No(0),[x,v]=hn.useState(!1),[y,b]=hn.useState(0);hn.useEffect(()=>{let e;const n=("horizontal"===s?m:f)+t,r=i?-n/2:0,a=i?0:-n/2;return e=x?_o(g,[g.get(),a],{ease:"linear",duration:u*Math.abs((g.get()-a)/n),onComplete:()=>{v(!1),b(e=>e+1)}}):_o(g,[r,a],{ease:"linear",duration:u,repeat:1/0,repeatType:"loop",repeatDelay:0,onRepeat:()=>{g.set(r)}}),e?.stop},[y,g,u,m,f,t,x,s,i]);const w=d?{onHoverStart:()=>{v(!0),h(d)},onHoverEnd:()=>{v(!0),h(c)}}:{};return Ot.jsx("div",{className:bn("overflow-hidden",a),children:Ot.jsxs(wo.div,{className:"flex w-max",style:{..."horizontal"===s?{x:g}:{y:g},gap:`${t}px`,flexDirection:"horizontal"===s?"row":"column"},ref:p,...w,children:[e,e]})})}const BD=hn.createContext({});function UD(e){const t=hn.useRef(null);return null===t.current&&(t.current=e()),t.current}const VD="undefined"!=typeof window,HD=VD?hn.useLayoutEffect:hn.useEffect,WD=hn.createContext(null);function $D(e,t){-1===e.indexOf(t)&&e.push(t)}function GD(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const qD=(e,t,n)=>n>t?t:n<e?e:n,XD={},KD=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function YD(e){return"object"==typeof e&&null!==e}const ZD=e=>/^0[^.\s]+$/u.test(e);function JD(e){let t;return()=>(void 0===t&&(t=e()),t)}const QD=e=>e,eL=(e,t)=>n=>t(e(n)),tL=(...e)=>e.reduce(eL),nL=(e,t,n)=>{const r=t-e;return 0===r?1:(n-e)/r};class rL{constructor(){this.subscriptions=[]}add(e){return $D(this.subscriptions,e),()=>GD(this.subscriptions,e)}notify(e,t,n){const r=this.subscriptions.length;if(r)if(1===r)this.subscriptions[0](e,t,n);else for(let s=0;s<r;s++){const r=this.subscriptions[s];r&&r(e,t,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const sL=e=>1e3*e,iL=e=>e/1e3;function aL(e,t){return t?e*(1e3/t):0}const oL=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e;function lL(e,t,n,r){if(e===t&&n===r)return QD;const s=t=>function(e,t,n,r,s){let i,a,o=0;do{a=t+(n-t)/2,i=oL(a,r,s)-e,i>0?n=a:t=a}while(Math.abs(i)>1e-7&&++o<12);return a}(t,0,1,e,n);return e=>0===e||1===e?e:oL(s(e),t,r)}const cL=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,dL=e=>t=>1-e(1-t),uL=lL(.33,1.53,.69,.99),hL=dL(uL),pL=cL(hL),mL=e=>(e*=2)<1?.5*hL(e):.5*(2-Math.pow(2,-10*(e-1))),fL=e=>1-Math.sin(Math.acos(e)),gL=dL(fL),xL=cL(fL),vL=lL(.42,0,1,1),yL=lL(0,0,.58,1),bL=lL(.42,0,.58,1),wL=e=>Array.isArray(e)&&"number"==typeof e[0],jL={linear:QD,easeIn:vL,easeInOut:bL,easeOut:yL,circIn:fL,circInOut:xL,circOut:gL,backIn:hL,backInOut:pL,backOut:uL,anticipate:mL},NL=e=>{if(wL(e)){const[t,n,r,s]=e;return lL(t,n,r,s)}return"string"==typeof e?jL[e]:e},_L=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function SL(e,t){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,a=_L.reduce((e,t)=>(e[t]=function(e){let t=new Set,n=new Set,r=!1,s=!1;const i=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function o(t){i.has(t)&&(l.schedule(t),e()),t(a)}const l={schedule:(e,s=!1,a=!1)=>{const o=a&&r?t:n;return s&&i.add(e),o.has(e)||o.add(e),e},cancel:e=>{n.delete(e),i.delete(e)},process:e=>{a=e,r?s=!0:(r=!0,[t,n]=[n,t],t.forEach(o),t.clear(),r=!1,s&&(s=!1,l.process(e)))}};return l}(i),e),{}),{setup:o,read:l,resolveKeyframes:c,preUpdate:d,update:u,preRender:h,render:p,postRender:m}=a,f=()=>{const i=XD.useManualTiming?s.timestamp:performance.now();n=!1,XD.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(i-s.timestamp,40),1)),s.timestamp=i,s.isProcessing=!0,o.process(s),l.process(s),c.process(s),d.process(s),u.process(s),h.process(s),p.process(s),m.process(s),s.isProcessing=!1,n&&t&&(r=!1,e(f))};return{schedule:_L.reduce((t,i)=>{const o=a[i];return t[i]=(t,i=!1,a=!1)=>(n||(n=!0,r=!0,s.isProcessing||e(f)),o.schedule(t,i,a)),t},{}),cancel:e=>{for(let t=0;t<_L.length;t++)a[_L[t]].cancel(e)},state:s,steps:a}}const{schedule:ML,cancel:CL,state:EL,steps:kL}=SL("undefined"!=typeof requestAnimationFrame?requestAnimationFrame:QD,!0);let AL;function TL(){AL=void 0}const PL={now:()=>(void 0===AL&&PL.set(EL.isProcessing||XD.useManualTiming?EL.timestamp:performance.now()),AL),set:e=>{AL=e,queueMicrotask(TL)}},OL=e=>t=>"string"==typeof t&&t.startsWith(e),RL=OL("--"),IL=OL("var(--"),DL=e=>!!IL(e)&&LL.test(e.split("/*")[0].trim()),LL=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,FL={test:e=>"number"==typeof e,parse:parseFloat,transform:e=>e},zL={...FL,transform:e=>qD(0,1,e)},BL={...FL,default:1},UL=e=>Math.round(1e5*e)/1e5,VL=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;const HL=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,WL=(e,t)=>n=>Boolean("string"==typeof n&&HL.test(n)&&n.startsWith(e)||t&&!function(e){return null==e}(n)&&Object.prototype.hasOwnProperty.call(n,t)),$L=(e,t,n)=>r=>{if("string"!=typeof r)return r;const[s,i,a,o]=r.match(VL);return{[e]:parseFloat(s),[t]:parseFloat(i),[n]:parseFloat(a),alpha:void 0!==o?parseFloat(o):1}},GL={...FL,transform:e=>Math.round((e=>qD(0,255,e))(e))},qL={test:WL("rgb","red"),parse:$L("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+GL.transform(e)+", "+GL.transform(t)+", "+GL.transform(n)+", "+UL(zL.transform(r))+")"};const XL={test:WL("#"),parse:function(e){let t="",n="",r="",s="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),s=e.substring(4,5),t+=t,n+=n,r+=r,s+=s),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}},transform:qL.transform},KL=e=>({test:t=>"string"==typeof t&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>`${t}${e}`}),YL=KL("deg"),ZL=KL("%"),JL=KL("px"),QL=KL("vh"),eF=KL("vw"),tF=(()=>({...ZL,parse:e=>ZL.parse(e)/100,transform:e=>ZL.transform(100*e)}))(),nF={test:WL("hsl","hue"),parse:$L("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+ZL.transform(UL(t))+", "+ZL.transform(UL(n))+", "+UL(zL.transform(r))+")"},rF={test:e=>qL.test(e)||XL.test(e)||nF.test(e),parse:e=>qL.test(e)?qL.parse(e):nF.test(e)?nF.parse(e):XL.parse(e),transform:e=>"string"==typeof e?e:e.hasOwnProperty("red")?qL.transform(e):nF.transform(e),getAnimatableNone:e=>{const t=rF.parse(e);return t.alpha=0,rF.transform(t)}},sF=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;const iF="number",aF="color",oF=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function lF(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},s=[];let i=0;const a=t.replace(oF,e=>(rF.test(e)?(r.color.push(i),s.push(aF),n.push(rF.parse(e))):e.startsWith("var(")?(r.var.push(i),s.push("var"),n.push(e)):(r.number.push(i),s.push(iF),n.push(parseFloat(e))),++i,"${}")).split("${}");return{values:n,split:a,indexes:r,types:s}}function cF(e){return lF(e).values}function dF(e){const{split:t,types:n}=lF(e),r=t.length;return e=>{let s="";for(let i=0;i<r;i++)if(s+=t[i],void 0!==e[i]){const t=n[i];s+=t===iF?UL(e[i]):t===aF?rF.transform(e[i]):e[i]}return s}}const uF=e=>"number"==typeof e?0:rF.test(e)?rF.getAnimatableNone(e):e;const hF={test:function(e){return isNaN(e)&&"string"==typeof e&&(e.match(VL)?.length||0)+(e.match(sF)?.length||0)>0},parse:cF,createTransformer:dF,getAnimatableNone:function(e){const t=cF(e);return dF(e)(t.map(uF))}};function pF(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function mF(e,t){return n=>n>0?t:e}const fF=(e,t,n)=>e+(t-e)*n,gF=(e,t,n)=>{const r=e*e,s=n*(t*t-r)+r;return s<0?0:Math.sqrt(s)},xF=[XL,qL,nF];function vF(e){const t=(n=e,xF.find(e=>e.test(n)));var n;if(!Boolean(t))return!1;let r=t.parse(e);return t===nF&&(r=function({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,n/=100;let s=0,i=0,a=0;if(t/=100){const r=n<.5?n*(1+t):n+t-n*t,o=2*n-r;s=pF(o,r,e+1/3),i=pF(o,r,e),a=pF(o,r,e-1/3)}else s=i=a=n;return{red:Math.round(255*s),green:Math.round(255*i),blue:Math.round(255*a),alpha:r}}(r)),r}const yF=(e,t)=>{const n=vF(e),r=vF(t);if(!n||!r)return mF(e,t);const s={...n};return e=>(s.red=gF(n.red,r.red,e),s.green=gF(n.green,r.green,e),s.blue=gF(n.blue,r.blue,e),s.alpha=fF(n.alpha,r.alpha,e),qL.transform(s))},bF=new Set(["none","hidden"]);function wF(e,t){return n=>fF(e,t,n)}function jF(e){return"number"==typeof e?wF:"string"==typeof e?DL(e)?mF:rF.test(e)?yF:SF:Array.isArray(e)?NF:"object"==typeof e?rF.test(e)?yF:_F:mF}function NF(e,t){const n=[...e],r=n.length,s=e.map((e,n)=>jF(e)(e,t[n]));return e=>{for(let t=0;t<r;t++)n[t]=s[t](e);return n}}function _F(e,t){const n={...e,...t},r={};for(const s in n)void 0!==e[s]&&void 0!==t[s]&&(r[s]=jF(e[s])(e[s],t[s]));return e=>{for(const t in r)n[t]=r[t](e);return n}}const SF=(e,t)=>{const n=hF.createTransformer(t),r=lF(e),s=lF(t);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?bF.has(e)&&!s.values.length||bF.has(t)&&!r.values.length?function(e,t){return bF.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}(e,t):tL(NF(function(e,t){const n=[],r={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const i=t.types[s],a=e.indexes[i][r[i]],o=e.values[a]??0;n[s]=o,r[i]++}return n}(r,s),s.values),n):mF(e,t)};function MF(e,t,n){if("number"==typeof e&&"number"==typeof t&&"number"==typeof n)return fF(e,t,n);return jF(e)(e,t)}const CF=e=>{const t=({timestamp:t})=>e(t);return{start:(e=!0)=>ML.update(t,e),stop:()=>CL(t),now:()=>EL.isProcessing?EL.timestamp:PL.now()}},EF=(e,t,n=10)=>{let r="";const s=Math.max(Math.round(t/n),2);for(let i=0;i<s;i++)r+=Math.round(1e4*e(i/(s-1)))/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},kF=2e4;function AF(e){let t=0;let n=e.next(t);for(;!n.done&&t<kF;)t+=50,n=e.next(t);return t>=kF?1/0:t}function TF(e,t,n){const r=Math.max(t-5,0);return aL(n-e(r),t-r)}const PF=100,OF=10,RF=1,IF=0,DF=800,LF=.3,FF=.3,zF={granular:.01,default:2},BF={granular:.005,default:.5},UF=.01,VF=10,HF=.05,WF=1,$F=.001;function GF({duration:e=DF,bounce:t=LF,velocity:n=IF,mass:r=RF}){let s,i,a=1-t;a=qD(HF,WF,a),e=qD(UF,VF,iL(e)),a<1?(s=t=>{const r=t*a,s=r*e,i=r-n,o=XF(t,a),l=Math.exp(-s);return $F-i/o*l},i=t=>{const r=t*a*e,i=r*n+n,o=Math.pow(a,2)*Math.pow(t,2)*e,l=Math.exp(-r),c=XF(Math.pow(t,2),a);return(-s(t)+$F>0?-1:1)*((i-o)*l)/c}):(s=t=>Math.exp(-t*e)*((t-n)*e+1)-.001,i=t=>Math.exp(-t*e)*(e*e*(n-t)));const o=function(e,t,n){let r=n;for(let s=1;s<qF;s++)r-=e(r)/t(r);return r}(s,i,5/e);if(e=sL(e),isNaN(o))return{stiffness:PF,damping:OF,duration:e};{const t=Math.pow(o,2)*r;return{stiffness:t,damping:2*a*Math.sqrt(r*t),duration:e}}}const qF=12;function XF(e,t){return e*Math.sqrt(1-t*t)}const KF=["duration","bounce"],YF=["stiffness","damping","mass"];function ZF(e,t){return t.some(t=>void 0!==e[t])}function JF(e=FF,t=LF){const n="object"!=typeof e?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:s}=n;const i=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],o={done:!1,value:i},{stiffness:l,damping:c,mass:d,duration:u,velocity:h,isResolvedFromDuration:p}=function(e){let t={velocity:IF,stiffness:PF,damping:OF,mass:RF,isResolvedFromDuration:!1,...e};if(!ZF(e,YF)&&ZF(e,KF))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(1.2*n),s=r*r,i=2*qD(.05,1,1-(e.bounce||0))*Math.sqrt(s);t={...t,mass:RF,stiffness:s,damping:i}}else{const n=GF(e);t={...t,...n,mass:RF},t.isResolvedFromDuration=!0}return t}({...n,velocity:-iL(n.velocity||0)}),m=h||0,f=c/(2*Math.sqrt(l*d)),g=a-i,x=iL(Math.sqrt(l/d)),v=Math.abs(g)<5;let y;if(r||(r=v?zF.granular:zF.default),s||(s=v?BF.granular:BF.default),f<1){const e=XF(x,f);y=t=>{const n=Math.exp(-f*x*t);return a-n*((m+f*x*g)/e*Math.sin(e*t)+g*Math.cos(e*t))}}else if(1===f)y=e=>a-Math.exp(-x*e)*(g+(m+x*g)*e);else{const e=x*Math.sqrt(f*f-1);y=t=>{const n=Math.exp(-f*x*t),r=Math.min(e*t,300);return a-n*((m+f*x*g)*Math.sinh(r)+e*g*Math.cosh(r))/e}}const b={calculatedDuration:p&&u||null,next:e=>{const t=y(e);if(p)o.done=e>=u;else{let n=0===e?m:0;f<1&&(n=0===e?sL(m):TF(y,e,t));const i=Math.abs(n)<=r,l=Math.abs(a-t)<=s;o.done=i&&l}return o.value=o.done?a:t,o},toString:()=>{const e=Math.min(AF(b),kF),t=EF(t=>b.next(e*t).value,e,30);return e+"ms "+t},toTransition:()=>{}};return b}function QF({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:a,min:o,max:l,restDelta:c=.5,restSpeed:d}){const u=e[0],h={done:!1,value:u},p=e=>void 0===o?l:void 0===l||Math.abs(o-e)<Math.abs(l-e)?o:l;let m=n*t;const f=u+m,g=void 0===a?f:a(f);g!==f&&(m=g-u);const x=e=>-m*Math.exp(-e/r),v=e=>g+x(e),y=e=>{const t=x(e),n=v(e);h.done=Math.abs(t)<=c,h.value=h.done?g:n};let b,w;const j=e=>{var t;(t=h.value,void 0!==o&&t<o||void 0!==l&&t>l)&&(b=e,w=JF({keyframes:[h.value,p(h.value)],velocity:TF(v,e,h.value),damping:s,stiffness:i,restDelta:c,restSpeed:d}))};return j(0),{calculatedDuration:null,next:e=>{let t=!1;return w||void 0!==b||(t=!0,y(e),j(e)),void 0!==b&&e>=b?w.next(e-b):(!t&&y(e),h)}}}function ez(e,t,{clamp:n=!0,ease:r,mixer:s}={}){const i=e.length;if(1===i)return()=>t[0];if(2===i&&t[0]===t[1])return()=>t[1];const a=e[0]===e[1];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=function(e,t,n){const r=[],s=n||XD.mix||MF,i=e.length-1;for(let a=0;a<i;a++){let n=s(e[a],e[a+1]);if(t){const e=Array.isArray(t)?t[a]||QD:t;n=tL(e,n)}r.push(n)}return r}(t,r,s),l=o.length,c=n=>{if(a&&n<e[0])return t[0];let r=0;if(l>1)for(;r<e.length-2&&!(n<e[r+1]);r++);const s=nL(e[r],e[r+1],n);return o[r](s)};return n?t=>c(qD(e[0],e[i-1],t)):c}function tz(e){const t=[0];return function(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const s=nL(0,t,r);e.push(fF(n,1,s))}}(t,e.length-1),t}function nz({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const s=(e=>Array.isArray(e)&&"number"!=typeof e[0])(r)?r.map(NL):NL(r),i={done:!1,value:t[0]},a=function(e,t){return e.map(e=>e*t)}(n&&n.length===t.length?n:tz(t),e),o=ez(a,t,{ease:Array.isArray(s)?s:(l=t,c=s,l.map(()=>c||bL).splice(0,l.length-1))});var l,c;return{calculatedDuration:e,next:t=>(i.value=o(t),i.done=t>=e,i)}}JF.applyToOptions=e=>{const t=function(e,t=100,n){const r=n({...e,keyframes:[0,t]}),s=Math.min(AF(r),kF);return{type:"keyframes",ease:e=>r.next(s*e).value/t,duration:iL(s)}}(e,100,JF);return e.ease=t.ease,e.duration=sL(t.duration),e.type="keyframes",e};const rz=e=>null!==e;function sz(e,{repeat:t,repeatType:n="loop"},r,s=1){const i=e.filter(rz),a=s<0||t&&"loop"!==n&&t%2==1?0:i.length-1;return a&&void 0!==r?r:i[a]}const iz={decay:QF,inertia:QF,tween:nz,keyframes:nz,spring:JF};function az(e){"string"==typeof e.type&&(e.type=iz[e.type])}class oz{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const lz=e=>e/100;class cz extends oz{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:e}=this.options;e&&e.updatedAt!==PL.now()&&this.tick(PL.now()),this.isStopped=!0,"idle"!==this.state&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),!1===e.autoplay&&this.pause()}initAnimation(){const{options:e}=this;az(e);const{type:t=nz,repeat:n=0,repeatDelay:r=0,repeatType:s,velocity:i=0}=e;let{keyframes:a}=e;const o=t||nz;o!==nz&&"number"!=typeof a[0]&&(this.mixKeyframes=tL(lz,MF(a[0],a[1])),a=[0,100]);const l=o({...e,keyframes:a});"mirror"===s&&(this.mirroredGenerator=o({...e,keyframes:[...a].reverse(),velocity:-i})),null===l.calculatedDuration&&(l.calculatedDuration=AF(l));const{calculatedDuration:c}=l;this.calculatedDuration=c,this.resolvedDuration=c+r,this.totalDuration=this.resolvedDuration*(n+1)-r,this.generator=l}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;null!==this.holdTime?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:n,totalDuration:r,mixKeyframes:s,mirroredGenerator:i,resolvedDuration:a,calculatedDuration:o}=this;if(null===this.startTime)return n.next(0);const{delay:l=0,keyframes:c,repeat:d,repeatType:u,repeatDelay:h,type:p,onUpdate:m,finalKeyframe:f}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-r/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const g=this.currentTime-l*(this.playbackSpeed>=0?1:-1),x=this.playbackSpeed>=0?g<0:g>r;this.currentTime=Math.max(g,0),"finished"===this.state&&null===this.holdTime&&(this.currentTime=r);let v=this.currentTime,y=n;if(d){const e=Math.min(this.currentTime,r)/a;let t=Math.floor(e),n=e%1;!n&&e>=1&&(n=1),1===n&&t--,t=Math.min(t,d+1);Boolean(t%2)&&("reverse"===u?(n=1-n,h&&(n-=h/a)):"mirror"===u&&(y=i)),v=qD(0,1,n)*a}const b=x?{done:!1,value:c[0]}:y.next(v);s&&(b.value=s(b.value));let{done:w}=b;x||null===o||(w=this.playbackSpeed>=0?this.currentTime>=r:this.currentTime<=0);const j=null===this.holdTime&&("finished"===this.state||"running"===this.state&&w);return j&&p!==QF&&(b.value=sz(c,this.options,f,this.speed)),m&&m(b.value),j&&this.finish(),b}then(e,t){return this.finished.then(e,t)}get duration(){return iL(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+iL(e)}get time(){return iL(this.currentTime)}set time(e){e=sL(e),this.currentTime=e,null===this.startTime||null!==this.holdTime||0===this.playbackSpeed?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(PL.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=iL(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=CF,startTime:t}=this.options;this.driver||(this.driver=e(e=>this.tick(e))),this.options.onPlay?.();const n=this.driver.now();"finished"===this.state?(this.updateFinished(),this.startTime=n):null!==this.holdTime?this.startTime=n-this.holdTime:this.startTime||(this.startTime=t??n),"finished"===this.state&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(PL.now()),this.holdTime=this.currentTime}complete(){"running"!==this.state&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}const dz=e=>180*e/Math.PI,uz=e=>{const t=dz(Math.atan2(e[1],e[0]));return pz(t)},hz={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:uz,rotateZ:uz,skewX:e=>dz(Math.atan(e[1])),skewY:e=>dz(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},pz=e=>((e%=360)<0&&(e+=360),e),mz=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),fz=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),gz={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:mz,scaleY:fz,scale:e=>(mz(e)+fz(e))/2,rotateX:e=>pz(dz(Math.atan2(e[6],e[5]))),rotateY:e=>pz(dz(Math.atan2(-e[2],e[0]))),rotateZ:uz,rotate:uz,skewX:e=>dz(Math.atan(e[4])),skewY:e=>dz(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function xz(e){return e.includes("scale")?1:0}function vz(e,t){if(!e||"none"===e)return xz(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(n)r=gz,s=n;else{const t=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=hz,s=t}if(!s)return xz(t);const i=r[t],a=s[1].split(",").map(yz);return"function"==typeof i?i(a):a[i]}function yz(e){return parseFloat(e.trim())}const bz=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],wz=(()=>new Set(bz))(),jz=e=>e===FL||e===JL,Nz=new Set(["x","y","z"]),_z=bz.filter(e=>!Nz.has(e));const Sz={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>vz(t,"x"),y:(e,{transform:t})=>vz(t,"y")};Sz.translateX=Sz.x,Sz.translateY=Sz.y;const Mz=new Set;let Cz=!1,Ez=!1,kz=!1;function Az(){if(Ez){const e=Array.from(Mz).filter(e=>e.needsMeasurement),t=new Set(e.map(e=>e.element)),n=new Map;t.forEach(e=>{const t=function(e){const t=[];return _z.forEach(n=>{const r=e.getValue(n);void 0!==r&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}(e);t.length&&(n.set(e,t),e.render())}),e.forEach(e=>e.measureInitialState()),t.forEach(e=>{e.render();const t=n.get(e);t&&t.forEach(([t,n])=>{e.getValue(t)?.set(n)})}),e.forEach(e=>e.measureEndState()),e.forEach(e=>{void 0!==e.suspendedScrollY&&window.scrollTo(0,e.suspendedScrollY)})}Ez=!1,Cz=!1,Mz.forEach(e=>e.complete(kz)),Mz.clear()}function Tz(){Mz.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(Ez=!0)})}class Pz{constructor(e,t,n,r,s,i=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=n,this.motionValue=r,this.element=s,this.isAsync=i}scheduleResolve(){this.state="scheduled",this.isAsync?(Mz.add(this),Cz||(Cz=!0,ML.read(Tz),ML.resolveKeyframes(Az))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:n,motionValue:r}=this;if(null===e[0]){const s=r?.get(),i=e[e.length-1];if(void 0!==s)e[0]=s;else if(n&&t){const r=n.readValue(t,i);null!=r&&(e[0]=r)}void 0===e[0]&&(e[0]=i),r&&void 0===s&&r.set(e[0])}!function(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Mz.delete(this)}cancel(){"scheduled"===this.state&&(Mz.delete(this),this.state="pending")}resume(){"pending"===this.state&&this.scheduleResolve()}}const Oz=JD(()=>void 0!==window.ScrollTimeline),Rz={};function Iz(e,t){const n=JD(e);return()=>Rz[t]??n()}const Dz=Iz(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(e){return!1}return!0},"linearEasing"),Lz=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,Fz={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Lz([0,.65,.55,1]),circOut:Lz([.55,0,1,.45]),backIn:Lz([.31,.01,.66,-.59]),backOut:Lz([.33,1.53,.69,.99])};function zz(e,t){return e?"function"==typeof e?Dz()?EF(e,t):"ease-out":wL(e)?Lz(e):Array.isArray(e)?e.map(e=>zz(e,t)||Fz.easeOut):Fz[e]:void 0}function Bz(e,t,n,{delay:r=0,duration:s=300,repeat:i=0,repeatType:a="loop",ease:o="easeOut",times:l}={},c=void 0){const d={[t]:n};l&&(d.offset=l);const u=zz(o,s);Array.isArray(u)&&(d.easing=u);const h={delay:r,duration:s,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:i+1,direction:"reverse"===a?"alternate":"normal"};c&&(h.pseudoElement=c);return e.animate(d,h)}function Uz(e){return"function"==typeof e&&"applyToOptions"in e}class Vz extends oz{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:n,keyframes:r,pseudoElement:s,allowFlatten:i=!1,finalKeyframe:a,onComplete:o}=e;this.isPseudoElement=Boolean(s),this.allowFlatten=i,this.options=e;const l=function({type:e,...t}){return Uz(e)&&Dz()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}(e);this.animation=Bz(t,n,r,l,s),!1===l.autoplay&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const e=sz(r,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(e):function(e,t,n){(e=>e.startsWith("--"))(t)?e.style.setProperty(t,n):e.style[t]=n}(t,n,e),this.animation.cancel()}o?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),"finished"===this.state&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch(e){}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;"idle"!==e&&"finished"!==e&&(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return iL(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+iL(e)}get time(){return iL(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=sL(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return null!==this.finishedTime?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&Oz()?(this.animation.timeline=e,QD):t(this)}}const Hz={anticipate:mL,backInOut:pL,circInOut:xL};function Wz(e){"string"==typeof e.ease&&e.ease in Hz&&(e.ease=Hz[e.ease])}class $z extends Vz{constructor(e){Wz(e),az(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:n,onComplete:r,element:s,...i}=this.options;if(!t)return;if(void 0!==e)return void t.set(e);const a=new cz({...i,autoplay:!1}),o=sL(this.finishedTime??this.time);t.setWithVelocity(a.sample(o-10).value,a.sample(o).value,10),a.stop()}}const Gz=(e,t)=>"zIndex"!==t&&(!("number"!=typeof e&&!Array.isArray(e))||!("string"!=typeof e||!hF.test(e)&&"0"!==e||e.startsWith("url(")));function qz(e){e.duration=0,e.type="keyframes"}const Xz=new Set(["opacity","clipPath","filter","transform"]),Kz=JD(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));class Yz extends oz{constructor({autoplay:e=!0,delay:t=0,type:n="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:i="loop",keyframes:a,name:o,motionValue:l,element:c,...d}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=PL.now();const u={autoplay:e,delay:t,type:n,repeat:r,repeatDelay:s,repeatType:i,name:o,motionValue:l,element:c,...d},h=c?.KeyframeResolver||Pz;this.keyframeResolver=new h(a,(e,t,n)=>this.onKeyframesResolved(e,t,u,!n),o,l,c),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,t,n,r){this.keyframeResolver=void 0;const{name:s,type:i,velocity:a,delay:o,isHandoff:l,onUpdate:c}=n;this.resolvedAt=PL.now(),function(e,t,n,r){const s=e[0];if(null===s)return!1;if("display"===t||"visibility"===t)return!0;const i=e[e.length-1],a=Gz(s,t),o=Gz(i,t);return!(!a||!o)&&(function(e){const t=e[0];if(1===e.length)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}(e)||("spring"===n||Uz(n))&&r)}(e,s,i,a)||(!XD.instantAnimations&&o||c?.(sz(e,n,t)),e[0]=e[e.length-1],qz(n),n.repeat=0);const d={startTime:r?this.resolvedAt&&this.resolvedAt-this.createdAt>40?this.resolvedAt:this.createdAt:void 0,finalKeyframe:t,...n,keyframes:e},u=!l&&function(e){const{motionValue:t,name:n,repeatDelay:r,repeatType:s,damping:i,type:a}=e,o=t?.owner?.current;if(!(o instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=t.owner.getProps();return Kz()&&n&&Xz.has(n)&&("transform"!==n||!c)&&!l&&!r&&"mirror"!==s&&0!==i&&"inertia"!==a}(d)?new $z({...d,element:d.motionValue.owner.current}):new cz(d);u.finished.then(()=>this.notifyFinished()).catch(QD),this.pendingTimeline&&(this.stopTimeline=u.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=u}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),kz=!0,Tz(),Az(),kz=!1),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const Zz=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Jz(e,t,n=1){const[r,s]=function(e){const t=Zz.exec(e);if(!t)return[,];const[,n,r,s]=t;return[`--${n??r}`,s]}(e);if(!r)return;const i=window.getComputedStyle(t).getPropertyValue(r);if(i){const e=i.trim();return KD(e)?parseFloat(e):e}return DL(s)?Jz(s,t,n+1):s}function Qz(e,t){return e?.[t]??e?.default??e}const eB=new Set(["width","height","top","left","right","bottom",...bz]),tB=e=>t=>t.test(e),nB=[FL,JL,ZL,YL,eF,QL,{test:e=>"auto"===e,parse:e=>e}],rB=e=>nB.find(tB(e));function sB(e){return"number"==typeof e?0===e:null===e||("none"===e||"0"===e||ZD(e))}const iB=new Set(["brightness","contrast","saturate","opacity"]);function aB(e){const[t,n]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;const[r]=n.match(VL)||[];if(!r)return e;const s=n.replace(r,"");let i=iB.has(t)?1:0;return r!==n&&(i*=100),t+"("+i+s+")"}const oB=/\b([a-z-]*)\(.*?\)/gu,lB={...hF,getAnimatableNone:e=>{const t=e.match(oB);return t?t.map(aB).join(" "):e}},cB={...FL,transform:Math.round},dB={borderWidth:JL,borderTopWidth:JL,borderRightWidth:JL,borderBottomWidth:JL,borderLeftWidth:JL,borderRadius:JL,radius:JL,borderTopLeftRadius:JL,borderTopRightRadius:JL,borderBottomRightRadius:JL,borderBottomLeftRadius:JL,width:JL,maxWidth:JL,height:JL,maxHeight:JL,top:JL,right:JL,bottom:JL,left:JL,padding:JL,paddingTop:JL,paddingRight:JL,paddingBottom:JL,paddingLeft:JL,margin:JL,marginTop:JL,marginRight:JL,marginBottom:JL,marginLeft:JL,backgroundPositionX:JL,backgroundPositionY:JL,...{rotate:YL,rotateX:YL,rotateY:YL,rotateZ:YL,scale:BL,scaleX:BL,scaleY:BL,scaleZ:BL,skew:YL,skewX:YL,skewY:YL,distance:JL,translateX:JL,translateY:JL,translateZ:JL,x:JL,y:JL,z:JL,perspective:JL,transformPerspective:JL,opacity:zL,originX:tF,originY:tF,originZ:JL},zIndex:cB,fillOpacity:zL,strokeOpacity:zL,numOctaves:cB},uB={...dB,color:rF,backgroundColor:rF,outlineColor:rF,fill:rF,stroke:rF,borderColor:rF,borderTopColor:rF,borderRightColor:rF,borderBottomColor:rF,borderLeftColor:rF,filter:lB,WebkitFilter:lB},hB=e=>uB[e];function pB(e,t){let n=hB(e);return n!==lB&&(n=hF),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const mB=new Set(["auto","none","0"]);class fB extends Pz{constructor(e,t,n,r,s){super(e,t,n,r,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:n}=this;if(!t||!t.current)return;super.readKeyframes();for(let o=0;o<e.length;o++){let n=e[o];if("string"==typeof n&&(n=n.trim(),DL(n))){const r=Jz(n,t.current);void 0!==r&&(e[o]=r),o===e.length-1&&(this.finalKeyframe=n)}}if(this.resolveNoneKeyframes(),!eB.has(n)||2!==e.length)return;const[r,s]=e,i=rB(r),a=rB(s);if(i!==a)if(jz(i)&&jz(a))for(let o=0;o<e.length;o++){const t=e[o];"string"==typeof t&&(e[o]=parseFloat(t))}else Sz[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,n=[];for(let r=0;r<e.length;r++)(null===e[r]||sB(e[r]))&&n.push(r);n.length&&function(e,t,n){let r,s=0;for(;s<e.length&&!r;){const t=e[s];"string"==typeof t&&!mB.has(t)&&lF(t).values.length&&(r=e[s]),s++}if(r&&n)for(const i of t)e[i]=pB(n,r)}(e,n,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:n}=this;if(!e||!e.current)return;"height"===n&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Sz[n](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const r=t[t.length-1];void 0!==r&&e.getValue(n,r).jump(r,!1)}measureEndState(){const{element:e,name:t,unresolvedKeyframes:n}=this;if(!e||!e.current)return;const r=e.getValue(t);r&&r.jump(this.measuredOrigin,!1);const s=n.length-1,i=n[s];n[s]=Sz[t](e.measureViewportBox(),window.getComputedStyle(e.current)),null!==i&&void 0===this.finalKeyframe&&(this.finalKeyframe=i),this.removedTransforms?.length&&this.removedTransforms.forEach(([t,n])=>{e.getValue(t).set(n)}),this.resolveNoneKeyframes()}}function gB(e,t,n){if(e instanceof EventTarget)return[e];if("string"==typeof e){const t=document.querySelectorAll(e);return t?Array.from(t):[]}return Array.from(e)}const xB=(e,t)=>t&&"number"==typeof e?t.transform(e):e;function vB(e){return YD(e)&&"offsetHeight"in e}const yB={current:void 0};class bB{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=e=>{const t=PL.now();if(this.updatedAt!==t&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(e),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const n of this.dependents)n.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){var t;this.current=e,this.updatedAt=PL.now(),null===this.canTrackVelocity&&void 0!==e&&(this.canTrackVelocity=(t=this.current,!isNaN(parseFloat(t))))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new rL);const n=this.events[e].add(t);return"change"===e?()=>{n(),ML.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,n){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return yB.current&&yB.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=PL.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||e-this.updatedAt>30)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,30);return aL(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function wB(e,t){return new bB(e,t)}const{schedule:jB}=SL(queueMicrotask,!1),NB={x:!1,y:!1};function _B(){return NB.x||NB.y}function SB(e,t){const n=gB(e),r=new AbortController;return[n,{passive:!0,...t,signal:r.signal},()=>r.abort()]}function MB(e){return!("touch"===e.pointerType||_B())}const CB=(e,t)=>!!t&&(e===t||CB(e,t.parentElement)),EB=e=>"mouse"===e.pointerType?"number"!=typeof e.button||e.button<=0:!1!==e.isPrimary,kB=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);const AB=new WeakSet;function TB(e){return t=>{"Enter"===t.key&&e(t)}}function PB(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}function OB(e){return EB(e)&&!_B()}function RB(e,t,n={}){const[r,s,i]=SB(e,n),a=e=>{const r=e.currentTarget;if(!OB(e))return;AB.add(r);const i=t(r,e),a=(e,t)=>{window.removeEventListener("pointerup",o),window.removeEventListener("pointercancel",l),AB.has(r)&&AB.delete(r),OB(e)&&"function"==typeof i&&i(e,{success:t})},o=e=>{a(e,r===window||r===document||n.useGlobalTarget||CB(r,e.target))},l=e=>{a(e,!1)};window.addEventListener("pointerup",o,s),window.addEventListener("pointercancel",l,s)};return r.forEach(e=>{var t;(n.useGlobalTarget?window:e).addEventListener("pointerdown",a,s),vB(e)&&(e.addEventListener("focus",e=>((e,t)=>{const n=e.currentTarget;if(!n)return;const r=TB(()=>{if(AB.has(n))return;PB(n,"down");const e=TB(()=>{PB(n,"up")});n.addEventListener("keyup",e,t),n.addEventListener("blur",()=>PB(n,"cancel"),t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)})(e,s)),t=e,kB.has(t.tagName)||-1!==t.tabIndex||e.hasAttribute("tabindex")||(e.tabIndex=0))}),i}function IB(e){return YD(e)&&"ownerSVGElement"in e}const DB=new WeakMap;let LB;const FB=(e,t,n)=>(r,s)=>s&&s[0]?s[0][e+"Size"]:IB(r)&&"getBBox"in r?r.getBBox()[t]:r[n],zB=FB("inline","width","offsetWidth"),BB=FB("block","height","offsetHeight");function UB({target:e,borderBoxSize:t}){DB.get(e)?.forEach(n=>{n(e,{get width(){return zB(e,t)},get height(){return BB(e,t)}})})}function VB(e){e.forEach(UB)}function HB(e,t){LB||"undefined"!=typeof ResizeObserver&&(LB=new ResizeObserver(VB));const n=gB(e);return n.forEach(e=>{let n=DB.get(e);n||(n=new Set,DB.set(e,n)),n.add(t),LB?.observe(e)}),()=>{n.forEach(e=>{const n=DB.get(e);n?.delete(t),n?.size||LB?.unobserve(e)})}}const WB=new Set;let $B;function GB(e){return WB.add(e),$B||($B=()=>{const e={get width(){return window.innerWidth},get height(){return window.innerHeight}};WB.forEach(t=>t(e))},window.addEventListener("resize",$B)),()=>{WB.delete(e),WB.size||"function"!=typeof $B||(window.removeEventListener("resize",$B),$B=void 0)}}function qB(e,t){let n;const r=()=>{const{currentTime:r}=t,s=(null===r?0:r.value)/100;n!==s&&e(s),n=s};return ML.preUpdate(r,!0),()=>CL(r)}const XB=e=>Boolean(e&&e.getVelocity),KB=[...nB,rF,hF],YB=hn.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});const ZB=hn.createContext({strict:!1}),JB={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},QB={};for(const os in JB)QB[os]={isEnabled:e=>JB[os].some(t=>!!e[t])};const eU=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function tU(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||eU.has(e)}let nU=e=>!tU(e);try{"function"==typeof(rU=require("@emotion/is-prop-valid").default)&&(nU=e=>e.startsWith("on")?!tU(e):rU(e))}catch{}var rU;const sU=hn.createContext({});function iU(e){return null!==e&&"object"==typeof e&&"function"==typeof e.start}function aU(e){return"string"==typeof e||Array.isArray(e)}const oU=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],lU=["initial",...oU];function cU(e){return iU(e.animate)||lU.some(t=>aU(e[t]))}function dU(e){return Boolean(cU(e)||e.variants)}function uU(e){const{initial:t,animate:n}=function(e,t){if(cU(e)){const{initial:t,animate:n}=e;return{initial:!1===t||aU(t)?t:void 0,animate:aU(n)?n:void 0}}return!1!==e.inherit?t:{}}(e,hn.useContext(sU));return hn.useMemo(()=>({initial:t,animate:n}),[hU(t),hU(n)])}function hU(e){return Array.isArray(e)?e.join(" "):e}const pU={};function mU(e,{layout:t,layoutId:n}){return wz.has(e)||e.startsWith("origin")||(t||void 0!==n)&&(!!pU[e]||"opacity"===e)}const fU={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},gU=bz.length;function xU(e,t,n){const{style:r,vars:s,transformOrigin:i}=e;let a=!1,o=!1;for(const l in t){const e=t[l];if(wz.has(l))a=!0;else if(RL(l))s[l]=e;else{const t=xB(e,dB[l]);l.startsWith("origin")?(o=!0,i[l]=t):r[l]=t}}if(t.transform||(a||n?r.transform=function(e,t,n){let r="",s=!0;for(let i=0;i<gU;i++){const a=bz[i],o=e[a];if(void 0===o)continue;let l=!0;if(l="number"==typeof o?o===(a.startsWith("scale")?1:0):0===parseFloat(o),!l||n){const e=xB(o,dB[a]);l||(s=!1,r+=`${fU[a]||a}(${e}) `),n&&(t[a]=e)}}return r=r.trim(),n?r=n(t,s?"":r):s&&(r="none"),r}(t,e.transform,n):r.transform&&(r.transform="none")),o){const{originX:e="50%",originY:t="50%",originZ:n=0}=i;r.transformOrigin=`${e} ${t} ${n}`}}const vU=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function yU(e,t,n){for(const r in t)XB(t[r])||mU(r,n)||(e[r]=t[r])}function bU(e,t){const n={};return yU(n,e.style||{},e),Object.assign(n,function({transformTemplate:e},t){return hn.useMemo(()=>{const n={style:{},transform:{},transformOrigin:{},vars:{}};return xU(n,t,e),Object.assign({},n.vars,n.style)},[t])}(e,t)),n}function wU(e,t){const n={},r=bU(e,t);return e.drag&&!1!==e.dragListener&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=!0===e.drag?"none":"pan-"+("x"===e.drag?"y":"x")),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const jU={offset:"stroke-dashoffset",array:"stroke-dasharray"},NU={offset:"strokeDashoffset",array:"strokeDasharray"};function _U(e,{attrX:t,attrY:n,attrScale:r,pathLength:s,pathSpacing:i=1,pathOffset:a=0,...o},l,c,d){if(xU(e,o,c),l)return void(e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox));e.attrs=e.style,e.style={};const{attrs:u,style:h}=e;u.transform&&(h.transform=u.transform,delete u.transform),(h.transform||u.transformOrigin)&&(h.transformOrigin=u.transformOrigin??"50% 50%",delete u.transformOrigin),h.transform&&(h.transformBox=d?.transformBox??"fill-box",delete u.transformBox),void 0!==t&&(u.x=t),void 0!==n&&(u.y=n),void 0!==r&&(u.scale=r),void 0!==s&&function(e,t,n=1,r=0,s=!0){e.pathLength=1;const i=s?jU:NU;e[i.offset]=JL.transform(-r);const a=JL.transform(t),o=JL.transform(n);e[i.array]=`${a} ${o}`}(u,s,i,a,!1)}const SU=()=>({style:{},transform:{},transformOrigin:{},vars:{},attrs:{}}),MU=e=>"string"==typeof e&&"svg"===e.toLowerCase();function CU(e,t,n,r){const s=hn.useMemo(()=>{const n={style:{},transform:{},transformOrigin:{},vars:{},attrs:{}};return _U(n,t,MU(r),e.transformTemplate,e.style),{...n.attrs,style:{...n.style}}},[t]);if(e.style){const t={};yU(t,e.style,e),s.style={...t,...s.style}}return s}const EU=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function kU(e){return"string"==typeof e&&!e.includes("-")&&!!(EU.indexOf(e)>-1||/[A-Z]/u.test(e))}function AU(e,t,n,{latestValues:r},s,i=!1){const a=(kU(e)?CU:wU)(t,r,s,e),o=function(e,t,n){const r={};for(const s in e)"values"===s&&"object"==typeof e.values||(nU(s)||!0===n&&tU(s)||!t&&!tU(s)||e.draggable&&s.startsWith("onDrag"))&&(r[s]=e[s]);return r}(t,"string"==typeof e,i),l=e!==hn.Fragment?{...o,...a,ref:n}:{},{children:c}=t,d=hn.useMemo(()=>XB(c)?c.get():c,[c]);return hn.createElement(e,{...l,children:d})}function TU(e){const t=[{},{}];return e?.values.forEach((e,n)=>{t[0][n]=e.get(),t[1][n]=e.getVelocity()}),t}function PU(e,t,n,r){if("function"==typeof t){const[s,i]=TU(r);t=t(void 0!==n?n:e.custom,s,i)}if("string"==typeof t&&(t=e.variants&&e.variants[t]),"function"==typeof t){const[s,i]=TU(r);t=t(void 0!==n?n:e.custom,s,i)}return t}function OU(e){return XB(e)?e.get():e}function RU(e,t,n,r){const s={},i=r(e,{});for(const h in i)s[h]=OU(i[h]);let{initial:a,animate:o}=e;const l=cU(e),c=dU(e);t&&c&&!l&&!1!==e.inherit&&(void 0===a&&(a=t.initial),void 0===o&&(o=t.animate));let d=!!n&&!1===n.initial;d=d||!1===a;const u=d?o:a;if(u&&"boolean"!=typeof u&&!iU(u)){const t=Array.isArray(u)?u:[u];for(let n=0;n<t.length;n++){const r=PU(e,t[n]);if(r){const{transitionEnd:e,transition:t,...n}=r;for(const r in n){let e=n[r];if(Array.isArray(e)){e=e[d?e.length-1:0]}null!==e&&(s[r]=e)}for(const r in e)s[r]=e[r]}}}return s}const IU=e=>(t,n)=>{const r=hn.useContext(sU),s=hn.useContext(WD),i=()=>function({scrapeMotionValuesFromProps:e,createRenderState:t},n,r,s){return{latestValues:RU(n,r,s,e),renderState:t()}}(e,t,r,s);return n?i():UD(i)};function DU(e,t,n){const{style:r}=e,s={};for(const i in r)(XB(r[i])||t.style&&XB(t.style[i])||mU(i,e)||void 0!==n?.getValue(i)?.liveStyle)&&(s[i]=r[i]);return s}const LU=IU({scrapeMotionValuesFromProps:DU,createRenderState:vU});function FU(e,t,n){const r=DU(e,t,n);for(const s in e)if(XB(e[s])||XB(t[s])){r[-1!==bz.indexOf(s)?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s]=e[s]}return r}const zU=IU({scrapeMotionValuesFromProps:FU,createRenderState:SU}),BU=Symbol.for("motionComponentSymbol");function UU(e){return e&&"object"==typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function VU(e,t,n){return hn.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&("function"==typeof n?n(r):UU(n)&&(n.current=r))},[t])}const HU=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),WU="data-"+HU("framerAppearId"),$U=hn.createContext({});function GU(e,t,n,r,s){const{visualElement:i}=hn.useContext(sU),a=hn.useContext(ZB),o=hn.useContext(WD),l=hn.useContext(YB).reducedMotion,c=hn.useRef(null);r=r||a.renderer,!c.current&&r&&(c.current=r(e,{visualState:t,parent:i,props:n,presenceContext:o,blockInitialAnimation:!!o&&!1===o.initial,reducedMotionConfig:l}));const d=c.current,u=hn.useContext($U);!d||d.projection||!s||"html"!==d.type&&"svg"!==d.type||function(e,t,n,r){const{layoutId:s,layout:i,drag:a,dragConstraints:o,layoutScroll:l,layoutRoot:c,layoutCrossfade:d}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:qU(e.parent)),e.projection.setOptions({layoutId:s,layout:i,alwaysMeasureLayout:Boolean(a)||o&&UU(o),visualElement:e,animationType:"string"==typeof i?i:"both",initialPromotionConfig:r,crossfade:d,layoutScroll:l,layoutRoot:c})}(c.current,n,s,u);const h=hn.useRef(!1);hn.useInsertionEffect(()=>{d&&h.current&&d.update(n,o)});const p=n[WU],m=hn.useRef(Boolean(p)&&!window.MotionHandoffIsComplete?.(p)&&window.MotionHasOptimisedAnimation?.(p));return HD(()=>{d&&(h.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),d.scheduleRenderMicrotask(),m.current&&d.animationState&&d.animationState.animateChanges())}),hn.useEffect(()=>{d&&(!m.current&&d.animationState&&d.animationState.animateChanges(),m.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(p)}),m.current=!1),d.enteringChildren=void 0)}),d}function qU(e){if(e)return!1!==e.options.allowProjection?e.projection:qU(e.parent)}function XU(e,{forwardMotionProps:t=!1}={},n,r){n&&function(e){for(const t in e)QB[t]={...QB[t],...e[t]}}(n);const s=kU(e)?zU:LU;function i(n,i){let a;const o={...hn.useContext(YB),...n,layoutId:KU(n)},{isStatic:l}=o,c=uU(n),d=s(n,l);if(!l&&VD){hn.useContext(ZB).strict;const t=function(e){const{drag:t,layout:n}=QB;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t?.isEnabled(e)||n?.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}(o);a=t.MeasureLayout,c.visualElement=GU(e,d,o,r,t.ProjectionNode)}return Ot.jsxs(sU.Provider,{value:c,children:[a&&c.visualElement?Ot.jsx(a,{visualElement:c.visualElement,...o}):null,AU(e,n,VU(d,c.visualElement,i),d,l,t)]})}i.displayName=`motion.${"string"==typeof e?e:`create(${e.displayName??e.name??""})`}`;const a=hn.forwardRef(i);return a[BU]=e,a}function KU({layoutId:e}){const t=hn.useContext(BD).id;return t&&void 0!==e?t+"-"+e:e}function YU(e,t){if("undefined"==typeof Proxy)return XU;const n=new Map,r=(n,r)=>XU(n,r,e,t);return new Proxy((e,t)=>r(e,t),{get:(s,i)=>"create"===i?r:(n.has(i)||n.set(i,XU(i,void 0,e,t)),n.get(i))})}function ZU({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function JU(e){return void 0===e||1===e}function QU({scale:e,scaleX:t,scaleY:n}){return!JU(e)||!JU(t)||!JU(n)}function eV(e){return QU(e)||tV(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function tV(e){return nV(e.x)||nV(e.y)}function nV(e){return e&&"0%"!==e}function rV(e,t,n){return n+t*(e-n)}function sV(e,t,n,r,s){return void 0!==s&&(e=rV(e,s,r)),rV(e,n,r)+t}function iV(e,t=0,n=1,r,s){e.min=sV(e.min,t,n,r,s),e.max=sV(e.max,t,n,r,s)}function aV(e,{x:t,y:n}){iV(e.x,t.translate,t.scale,t.originPoint),iV(e.y,n.translate,n.scale,n.originPoint)}const oV=.999999999999,lV=1.0000000000001;function cV(e,t){e.min=e.min+t,e.max=e.max+t}function dV(e,t,n,r,s=.5){iV(e,t,n,fF(e.min,e.max,s),r)}function uV(e,t){dV(e.x,t.x,t.scaleX,t.scale,t.originX),dV(e.y,t.y,t.scaleY,t.scale,t.originY)}function hV(e,t){return ZU(function(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}(e.getBoundingClientRect(),t))}const pV=()=>({x:{min:0,max:0},y:{min:0,max:0}}),mV={current:null},fV={current:!1};const gV=new WeakMap;const xV=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class vV{scrapeMotionValuesFromProps(e,t,n){return{}}constructor({parent:e,props:t,presenceContext:n,reducedMotionConfig:r,blockInitialAnimation:s,visualState:i},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Pz,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const e=PL.now();this.renderScheduledAt<e&&(this.renderScheduledAt=e,ML.render(this.render,!1,!0))};const{latestValues:o,renderState:l}=i;this.latestValues=o,this.baseTarget={...o},this.initialValues=t.initial?{...o}:{},this.renderState=l,this.parent=e,this.props=t,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=a,this.blockInitialAnimation=Boolean(s),this.isControllingVariants=cU(t),this.isVariantNode=dU(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(e&&e.current);const{willChange:c,...d}=this.scrapeMotionValuesFromProps(t,{},this);for(const u in d){const e=d[u];void 0!==o[u]&&XB(e)&&e.set(o[u])}}mount(e){this.current=e,gV.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,t)=>this.bindToMotionValue(t,e)),fV.current||function(){if(fV.current=!0,VD)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>mV.current=e.matches;e.addEventListener("change",t),t()}else mV.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||mV.current),this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),CL(this.notifyUpdate),CL(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=wz.has(e);n&&this.onBindTransform&&this.onBindTransform();const r=t.on("change",t=>{this.latestValues[e]=t,this.props.onUpdate&&ML.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{r(),s&&s(),t.owner&&t.stop()})}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}updateFeatures(){let e="animation";for(e in QB){const t=QB[e];if(!t)continue;const{isEnabled:n,Feature:r}=t;if(!this.features[e]&&r&&n(this.props)&&(this.features[e]=new r(this)),this.features[e]){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):{x:{min:0,max:0},y:{min:0,max:0}}}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let n=0;n<xV.length;n++){const t=xV[n];this.propEventSubscriptions[t]&&(this.propEventSubscriptions[t](),delete this.propEventSubscriptions[t]);const r=e["on"+t];r&&(this.propEventSubscriptions[t]=this.on(t,r))}this.prevMotionValues=function(e,t,n){for(const r in t){const s=t[r],i=n[r];if(XB(s))e.addValue(r,s);else if(XB(i))e.addValue(r,wB(s,{owner:e}));else if(i!==s)if(e.hasValue(r)){const t=e.getValue(r);!0===t.liveStyle?t.jump(s):t.hasAnimated||t.set(s)}else{const t=e.getStaticValue(r);e.addValue(r,wB(void 0!==t?t:s,{owner:e}))}}for(const r in n)void 0===t[r]&&e.removeValue(r);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const n=this.values.get(e);t!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return void 0===n&&void 0!==t&&(n=wB(null===t?void 0:t,{owner:this}),this.addValue(e,n)),n}readValue(e,t){let n=void 0===this.latestValues[e]&&this.current?this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options):this.latestValues[e];var r;return null!=n&&("string"==typeof n&&(KD(n)||ZD(n))?n=parseFloat(n):(r=n,!KB.find(tB(r))&&hF.test(t)&&(n=pB(e,t))),this.setBaseTarget(e,XB(n)?n.get():n)),XB(n)?n.get():n}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){const{initial:t}=this.props;let n;if("string"==typeof t||"object"==typeof t){const r=PU(this.props,t,this.presenceContext?.custom);r&&(n=r[e])}if(t&&void 0!==n)return n;const r=this.getBaseTargetFromProps(this.props,e);return void 0===r||XB(r)?void 0!==this.initialValues[e]&&void 0===n?void 0:this.baseTarget[e]:r}on(e,t){return this.events[e]||(this.events[e]=new rL),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){jB.render(this.render)}}class yV extends vV{constructor(){super(...arguments),this.KeyframeResolver=fB}sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:n}){delete t[e],delete n[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;XB(e)&&(this.childSubscription=e.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}function bV(e,{style:t,vars:n},r,s){const i=e.style;let a;for(a in t)i[a]=t[a];for(a in s?.applyProjectionStyles(i,r),n)i.setProperty(a,n[a])}class wV extends yV{constructor(){super(...arguments),this.type="html",this.renderInstance=bV}readValueFromInstance(e,t){if(wz.has(t))return this.projection?.isProjecting?xz(t):((e,t)=>{const{transform:n="none"}=getComputedStyle(e);return vz(n,t)})(e,t);{const r=(n=e,window.getComputedStyle(n)),s=(RL(t)?r.getPropertyValue(t):r[t])||0;return"string"==typeof s?s.trim():s}var n}measureInstanceViewportBox(e,{transformPagePoint:t}){return hV(e,t)}build(e,t,n){xU(e,t,n.transformTemplate)}scrapeMotionValuesFromProps(e,t,n){return DU(e,t,n)}}const jV=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);class NV extends yV{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=pV}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(wz.has(t)){const e=hB(t);return e&&e.default||0}return t=jV.has(t)?t:HU(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,n){return FU(e,t,n)}build(e,t,n){_U(e,t,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(e,t,n,r){!function(e,t,n,r){bV(e,t,void 0,r);for(const s in t.attrs)e.setAttribute(jV.has(s)?s:HU(s),t.attrs[s])}(e,t,0,r)}mount(e){this.isSVGTag=MU(e.tagName),super.mount(e)}}const _V=(e,t)=>kU(e)?new NV(t):new wV(t,{allowProjection:e!==hn.Fragment});function SV(e,t,n){const r=e.getProps();return PU(r,t,void 0!==n?n:r.custom,e)}const MV=e=>Array.isArray(e);function CV(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,wB(n))}function EV(e){return MV(e)?e[e.length-1]||0:e}function kV(e,t){const n=e.getValue("willChange");if(r=n,Boolean(XB(r)&&r.add))return n.add(t);if(!n&&XD.WillChange){const n=new XD.WillChange("auto");e.addValue("willChange",n),n.add(t)}var r}function AV(e){return e.props[WU]}const TV=e=>null!==e;const PV={type:"spring",stiffness:500,damping:25,restSpeed:10},OV={type:"keyframes",duration:.8},RV={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},IV=(e,{keyframes:t})=>t.length>2?OV:wz.has(e)?e.startsWith("scale")?{type:"spring",stiffness:550,damping:0===t[1]?2*Math.sqrt(550):30,restSpeed:10}:PV:RV;const DV=(e,t,n,r={},s,i)=>a=>{const o=Qz(r,e)||{},l=o.delay||r.delay||0;let{elapsed:c=0}=r;c-=sL(l);const d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...o,delay:-c,onUpdate:e=>{t.set(e),o.onUpdate&&o.onUpdate(e)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:e,motionValue:t,element:i?void 0:s};(function({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:a,repeatDelay:o,from:l,elapsed:c,...d}){return!!Object.keys(d).length})(o)||Object.assign(d,IV(e,d)),d.duration&&(d.duration=sL(d.duration)),d.repeatDelay&&(d.repeatDelay=sL(d.repeatDelay)),void 0!==d.from&&(d.keyframes[0]=d.from);let u=!1;if((!1===d.type||0===d.duration&&!d.repeatDelay)&&(qz(d),0===d.delay&&(u=!0)),(XD.instantAnimations||XD.skipAnimations)&&(u=!0,qz(d),d.delay=0),d.allowFlatten=!o.type&&!o.ease,u&&!i&&void 0!==t.get()){const e=function(e,{repeat:t,repeatType:n="loop"}){const r=e.filter(TV);return r[t&&"loop"!==n&&t%2==1?0:r.length-1]}(d.keyframes,o);if(void 0!==e)return void ML.update(()=>{d.onUpdate(e),d.onComplete()})}return o.isSync?new cz(d):new Yz(d)};function LV({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&!0!==t[n];return t[n]=!1,r}function FV(e,t,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:a,...o}=t;r&&(i=r);const l=[],c=s&&e.animationState&&e.animationState.getState()[s];for(const d in o){const t=e.getValue(d,e.latestValues[d]??null),r=o[d];if(void 0===r||c&&LV(c,d))continue;const s={delay:n,...Qz(i||{},d)},a=t.get();if(void 0!==a&&!t.isAnimating&&!Array.isArray(r)&&r===a&&!s.velocity)continue;let u=!1;if(window.MotionHandoffAnimation){const t=AV(e);if(t){const e=window.MotionHandoffAnimation(t,d,ML);null!==e&&(s.startTime=e,u=!0)}}kV(e,d),t.start(DV(d,t,r,e.shouldReduceMotion&&eB.has(d)?{type:!1}:s,e,u));const h=t.animation;h&&l.push(h)}return a&&Promise.all(l).then(()=>{ML.update(()=>{a&&function(e,t){const n=SV(e,t);let{transitionEnd:r={},transition:s={},...i}=n||{};i={...i,...r};for(const a in i)CV(e,a,EV(i[a]))}(e,a)})}),l}function zV(e,t,n,r=0,s=1){const i=Array.from(e).sort((e,t)=>e.sortNodePosition(t)).indexOf(t),a=e.size,o=(a-1)*r;return"function"==typeof n?n(i,a):1===s?i*r:o-i*r}function BV(e,t,n={}){const r=SV(e,t,"exit"===n.type?e.presenceContext?.custom:void 0);let{transition:s=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const i=r?()=>Promise.all(FV(e,r,n)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?(r=0)=>{const{delayChildren:i=0,staggerChildren:a,staggerDirection:o}=s;return function(e,t,n=0,r=0,s=0,i=1,a){const o=[];for(const l of e.variantChildren)l.notify("AnimationStart",t),o.push(BV(l,t,{...a,delay:n+("function"==typeof r?0:r)+zV(e.variantChildren,l,r,s,i)}).then(()=>l.notify("AnimationComplete",t)));return Promise.all(o)}(e,t,r,i,a,o,n)}:()=>Promise.resolve(),{when:o}=s;if(o){const[e,t]="beforeChildren"===o?[i,a]:[a,i];return e().then(()=>t())}return Promise.all([i(),a(n.delay)])}function UV(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const VV=lU.length;function HV(e){if(!e)return;if(!e.isControllingVariants){const t=e.parent&&HV(e.parent)||{};return void 0!==e.props.initial&&(t.initial=e.props.initial),t}const t={};for(let n=0;n<VV;n++){const r=lU[n],s=e.props[r];(aU(s)||!1===s)&&(t[r]=s)}return t}const WV=[...oU].reverse(),$V=oU.length;function GV(e){return t=>Promise.all(t.map(({animation:t,options:n})=>function(e,t,n={}){let r;if(e.notify("AnimationStart",t),Array.isArray(t)){const s=t.map(t=>BV(e,t,n));r=Promise.all(s)}else if("string"==typeof t)r=BV(e,t,n);else{const s="function"==typeof t?SV(e,t,n.custom):t;r=Promise.all(FV(e,s,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}(e,t,n)))}function qV(e){let t=GV(e),n=YV(),r=!0;const s=t=>(n,r)=>{const s=SV(e,r,"exit"===t?e.presenceContext?.custom:void 0);if(s){const{transition:e,transitionEnd:t,...r}=s;n={...n,...r,...t}}return n};function i(i){const{props:a}=e,o=HV(e.parent)||{},l=[],c=new Set;let d={},u=1/0;for(let t=0;t<$V;t++){const h=WV[t],p=n[h],m=void 0!==a[h]?a[h]:o[h],f=aU(m),g=h===i?p.isActive:null;!1===g&&(u=t);let x=m===o[h]&&m!==a[h]&&f;if(x&&r&&e.manuallyAnimateOnMount&&(x=!1),p.protectedKeys={...d},!p.isActive&&null===g||!m&&!p.prevProp||iU(m)||"boolean"==typeof m)continue;const v=XV(p.prevProp,m);let y=v||h===i&&p.isActive&&!x&&f||t>u&&f,b=!1;const w=Array.isArray(m)?m:[m];let j=w.reduce(s(h),{});!1===g&&(j={});const{prevResolvedValues:N={}}=p,_={...N,...j},S=t=>{y=!0,c.has(t)&&(b=!0,c.delete(t)),p.needsAnimating[t]=!0;const n=e.getValue(t);n&&(n.liveStyle=!1)};for(const e in _){const t=j[e],n=N[e];if(d.hasOwnProperty(e))continue;let r=!1;r=MV(t)&&MV(n)?!UV(t,n):t!==n,r?null!=t?S(e):c.add(e):void 0!==t&&c.has(e)?S(e):p.protectedKeys[e]=!0}p.prevProp=m,p.prevResolvedValues=j,p.isActive&&(d={...d,...j}),r&&e.blockInitialAnimation&&(y=!1);const M=x&&v;y&&(!M||b)&&l.push(...w.map(t=>{const n={type:h};if("string"==typeof t&&r&&!M&&e.manuallyAnimateOnMount&&e.parent){const{parent:r}=e,s=SV(r,t);if(r.enteringChildren&&s){const{delayChildren:t}=s.transition||{};n.delay=zV(r.enteringChildren,e,t)}}return{animation:t,options:n}}))}if(c.size){const t={};if("boolean"!=typeof a.initial){const n=SV(e,Array.isArray(a.initial)?a.initial[0]:a.initial);n&&n.transition&&(t.transition=n.transition)}c.forEach(n=>{const r=e.getBaseTarget(n),s=e.getValue(n);s&&(s.liveStyle=!0),t[n]=r??null}),l.push({animation:t})}let h=Boolean(l.length);return!r||!1!==a.initial&&a.initial!==a.animate||e.manuallyAnimateOnMount||(h=!1),r=!1,h?t(l):Promise.resolve()}return{animateChanges:i,setActive:function(t,r){if(n[t].isActive===r)return Promise.resolve();e.variantChildren?.forEach(e=>e.animationState?.setActive(t,r)),n[t].isActive=r;const s=i(t);for(const e in n)n[e].protectedKeys={};return s},setAnimateFunction:function(n){t=n(e)},getState:()=>n,reset:()=>{n=YV()}}}function XV(e,t){return"string"==typeof t?t!==e:!!Array.isArray(t)&&!UV(t,e)}function KV(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function YV(){return{animate:KV(!0),whileInView:KV(),whileHover:KV(),whileTap:KV(),whileDrag:KV(),whileFocus:KV(),exit:KV()}}class ZV{constructor(e){this.isMounted=!1,this.node=e}update(){}}let JV=0;const QV={animation:{Feature:class extends ZV{constructor(e){super(e),e.animationState||(e.animationState=qV(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();iU(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}},exit:{Feature:class extends ZV{constructor(){super(...arguments),this.id=JV++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const r=this.node.animationState.setActive("exit",!e);t&&!e&&r.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}}};function eH(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function tH(e){return{point:{x:e.pageX,y:e.pageY}}}function nH(e,t,n,r){return eH(e,t,(e=>t=>EB(t)&&e(t,tH(t)))(n),r)}function rH(e){return e.max-e.min}function sH(e,t,n,r=.5){e.origin=r,e.originPoint=fF(t.min,t.max,e.origin),e.scale=rH(n)/rH(t),e.translate=fF(n.min,n.max,e.origin)-e.originPoint,(e.scale>=.9999&&e.scale<=1.0001||isNaN(e.scale))&&(e.scale=1),(e.translate>=-.01&&e.translate<=.01||isNaN(e.translate))&&(e.translate=0)}function iH(e,t,n,r){sH(e.x,t.x,n.x,r?r.originX:void 0),sH(e.y,t.y,n.y,r?r.originY:void 0)}function aH(e,t,n){e.min=n.min+t.min,e.max=e.min+rH(t)}function oH(e,t,n){e.min=t.min-n.min,e.max=e.min+rH(t)}function lH(e,t,n){oH(e.x,t.x,n.x),oH(e.y,t.y,n.y)}function cH(e){return[e("x"),e("y")]}const dH=({current:e})=>e?e.ownerDocument.defaultView:null,uH=(e,t)=>Math.abs(e-t);class hH{constructor(e,t,{transformPagePoint:n,contextWindow:r=window,dragSnapToOrigin:s=!1,distanceThreshold:i=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!this.lastMoveEvent||!this.lastMoveEventInfo)return;const e=fH(this.lastMoveEventInfo,this.history),t=null!==this.startEvent,n=function(e,t){const n=uH(e.x,t.x),r=uH(e.y,t.y);return Math.sqrt(n**2+r**2)}(e.offset,{x:0,y:0})>=this.distanceThreshold;if(!t&&!n)return;const{point:r}=e,{timestamp:s}=EL;this.history.push({...r,timestamp:s});const{onStart:i,onMove:a}=this.handlers;t||(i&&i(this.lastMoveEvent,e),this.startEvent=this.lastMoveEvent),a&&a(this.lastMoveEvent,e)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=pH(t,this.transformPagePoint),ML.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{this.end();const{onEnd:n,onSessionEnd:r,resumeAnimation:s}=this.handlers;if(this.dragSnapToOrigin&&s&&s(),!this.lastMoveEvent||!this.lastMoveEventInfo)return;const i=fH("pointercancel"===e.type?this.lastMoveEventInfo:pH(t,this.transformPagePoint),this.history);this.startEvent&&n&&n(e,i),r&&r(e,i)},!EB(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=n,this.distanceThreshold=i,this.contextWindow=r||window;const a=pH(tH(e),this.transformPagePoint),{point:o}=a,{timestamp:l}=EL;this.history=[{...o,timestamp:l}];const{onSessionStart:c}=t;c&&c(e,fH(a,this.history)),this.removeListeners=tL(nH(this.contextWindow,"pointermove",this.handlePointerMove),nH(this.contextWindow,"pointerup",this.handlePointerUp),nH(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),CL(this.updatePoint)}}function pH(e,t){return t?{point:t(e.point)}:e}function mH(e,t){return{x:e.x-t.x,y:e.y-t.y}}function fH({point:e},t){return{point:e,delta:mH(e,xH(t)),offset:mH(e,gH(t)),velocity:vH(t,.1)}}function gH(e){return e[0]}function xH(e){return e[e.length-1]}function vH(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const s=xH(e);for(;n>=0&&(r=e[n],!(s.timestamp-r.timestamp>sL(t)));)n--;if(!r)return{x:0,y:0};const i=iL(s.timestamp-r.timestamp);if(0===i)return{x:0,y:0};const a={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function yH(e,t,n){return{min:void 0!==t?e.min+t:void 0,max:void 0!==n?e.max+n-(e.max-e.min):void 0}}function bH(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}const wH=.35;function jH(e,t,n){return{min:NH(e,t),max:NH(e,n)}}function NH(e,t){return"number"==typeof e?e:e[t]||0}const _H=new WeakMap;class SH{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic={x:{min:0,max:0},y:{min:0,max:0}},this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:n}={}){const{presenceContext:r}=this.visualElement;if(r&&!1===r.isPresent)return;const{dragSnapToOrigin:s}=this.getProps();this.panSession=new hH(e,{onSessionStart:e=>{const{dragSnapToOrigin:n}=this.getProps();n?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(tH(e).point)},onStart:(e,t)=>{const{drag:n,dragPropagation:r,onDragStart:s}=this.getProps();if(n&&!r&&(this.openDragLock&&this.openDragLock(),this.openDragLock="x"===(i=n)||"y"===i?NB[i]?null:(NB[i]=!0,()=>{NB[i]=!1}):NB.x||NB.y?null:(NB.x=NB.y=!0,()=>{NB.x=NB.y=!1}),!this.openDragLock))return;var i;this.latestPointerEvent=e,this.latestPanInfo=t,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),cH(e=>{let t=this.getAxisMotionValue(e).get()||0;if(ZL.test(t)){const{projection:n}=this.visualElement;if(n&&n.layout){const r=n.layout.layoutBox[e];if(r){t=rH(r)*(parseFloat(t)/100)}}}this.originPoint[e]=t}),s&&ML.postRender(()=>s(e,t)),kV(this.visualElement,"transform");const{animationState:a}=this.visualElement;a&&a.setActive("whileDrag",!0)},onMove:(e,t)=>{this.latestPointerEvent=e,this.latestPanInfo=t;const{dragPropagation:n,dragDirectionLock:r,onDirectionLock:s,onDrag:i}=this.getProps();if(!n&&!this.openDragLock)return;const{offset:a}=t;if(r&&null===this.currentDirection)return this.currentDirection=function(e,t=10){let n=null;Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x");return n}(a),void(null!==this.currentDirection&&s&&s(this.currentDirection));this.updateAxis("x",t.point,a),this.updateAxis("y",t.point,a),this.visualElement.render(),i&&i(e,t)},onSessionEnd:(e,t)=>{this.latestPointerEvent=e,this.latestPanInfo=t,this.stop(e,t),this.latestPointerEvent=null,this.latestPanInfo=null},resumeAnimation:()=>cH(e=>"paused"===this.getAnimationState(e)&&this.getAxisMotionValue(e).animation?.play())},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:s,distanceThreshold:n,contextWindow:dH(this.visualElement)})}stop(e,t){const n=e||this.latestPointerEvent,r=t||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!r||!n)return;const{velocity:i}=r;this.startAnimation(i);const{onDragEnd:a}=this.getProps();a&&ML.postRender(()=>a(n,r))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,n){const{drag:r}=this.getProps();if(!n||!MH(e,r,this.currentDirection))return;const s=this.getAxisMotionValue(e);let i=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(i=function(e,{min:t,max:n},r){return void 0!==t&&e<t?e=r?fF(t,e,r.min):Math.max(e,t):void 0!==n&&e>n&&(e=r?fF(n,e,r.max):Math.min(e,n)),e}(i,this.constraints[e],this.elastic[e])),s.set(i)}resolveConstraints(){const{dragConstraints:e,dragElastic:t}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,r=this.constraints;e&&UU(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!e||!n)&&function(e,{top:t,left:n,bottom:r,right:s}){return{x:yH(e.x,n,s),y:yH(e.y,t,r)}}(n.layoutBox,e),this.elastic=function(e=wH){return!1===e?e=0:!0===e&&(e=wH),{x:jH(e,"left","right"),y:jH(e,"top","bottom")}}(t),r!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&cH(e=>{!1!==this.constraints&&this.getAxisMotionValue(e)&&(this.constraints[e]=function(e,t){const n={};return void 0!==t.min&&(n.min=t.min-e.min),void 0!==t.max&&(n.max=t.max-e.min),n}(n.layoutBox[e],this.constraints[e]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!UU(e))return!1;const n=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const s=function(e,t,n){const r=hV(e,n),{scroll:s}=t;return s&&(cV(r.x,s.offset.x),cV(r.y,s.offset.y)),r}(n,r.root,this.visualElement.getTransformPagePoint());let i=function(e,t){return{x:bH(e.x,t.x),y:bH(e.y,t.y)}}(r.layout.layoutBox,s);if(t){const e=t(function({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}(i));this.hasMutatedConstraints=!!e,e&&(i=ZU(e))}return i}startAnimation(e){const{drag:t,dragMomentum:n,dragElastic:r,dragTransition:s,dragSnapToOrigin:i,onDragTransitionEnd:a}=this.getProps(),o=this.constraints||{},l=cH(a=>{if(!MH(a,t,this.currentDirection))return;let l=o&&o[a]||{};i&&(l={min:0,max:0});const c=r?200:1e6,d=r?40:1e7,u={type:"inertia",velocity:n?e[a]:0,bounceStiffness:c,bounceDamping:d,timeConstant:750,restDelta:1,restSpeed:10,...s,...l};return this.startAxisValueAnimation(a,u)});return Promise.all(l).then(a)}startAxisValueAnimation(e,t){const n=this.getAxisMotionValue(e);return kV(this.visualElement,e),n.start(DV(e,n,0,t,this.visualElement,!1))}stopAnimation(){cH(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){cH(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps(),r=n[t];return r||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){cH(t=>{const{drag:n}=this.getProps();if(!MH(t,n,this.currentDirection))return;const{projection:r}=this.visualElement,s=this.getAxisMotionValue(t);if(r&&r.layout){const{min:n,max:i}=r.layout.layoutBox[t];s.set(e[t]-fF(n,i,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:n}=this.visualElement;if(!UU(t)||!n||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};cH(e=>{const t=this.getAxisMotionValue(e);if(t&&!1!==this.constraints){const n=t.get();r[e]=function(e,t){let n=.5;const r=rH(e),s=rH(t);return s>r?n=nL(t.min,t.max-r,e.min):r>s&&(n=nL(e.min,e.max-s,t.min)),qD(0,1,n)}({min:n,max:n},this.constraints[e])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),cH(t=>{if(!MH(t,e,null))return;const n=this.getAxisMotionValue(t),{min:s,max:i}=this.constraints[t];n.set(fF(s,i,r[t]))})}addListeners(){if(!this.visualElement.current)return;_H.set(this.visualElement,this);const e=nH(this.visualElement.current,"pointerdown",e=>{const{drag:t,dragListener:n=!0}=this.getProps();t&&n&&this.start(e)}),t=()=>{const{dragConstraints:e}=this.getProps();UU(e)&&e.current&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,r=n.addEventListener("measure",t);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),ML.read(t);const s=eH(window,"resize",()=>this.scalePositionWithinConstraints()),i=n.addEventListener("didUpdate",({delta:e,hasLayoutChanged:t})=>{this.isDragging&&t&&(cH(t=>{const n=this.getAxisMotionValue(t);n&&(this.originPoint[t]+=e[t].translate,n.set(n.get()+e[t].translate))}),this.visualElement.render())});return()=>{s(),e(),r(),i&&i()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:n=!1,dragPropagation:r=!1,dragConstraints:s=!1,dragElastic:i=wH,dragMomentum:a=!0}=e;return{...e,drag:t,dragDirectionLock:n,dragPropagation:r,dragConstraints:s,dragElastic:i,dragMomentum:a}}}function MH(e,t,n){return!(!0!==t&&t!==e||null!==n&&n!==e)}const CH=e=>(t,n)=>{e&&ML.postRender(()=>e(t,n))};const EH={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function kH(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const AH={correct:(e,t)=>{if(!t.target)return e;if("string"==typeof e){if(!JL.test(e))return e;e=parseFloat(e)}return`${kH(e,t.target.x)}% ${kH(e,t.target.y)}%`}},TH={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,s=hF.parse(e);if(s.length>5)return r;const i=hF.createTransformer(e),a="number"!=typeof s[0]?1:0,o=n.x.scale*t.x,l=n.y.scale*t.y;s[0+a]/=o,s[1+a]/=l;const c=fF(o,l,.5);return"number"==typeof s[2+a]&&(s[2+a]/=c),"number"==typeof s[3+a]&&(s[3+a]/=c),i(s)}};let PH=!1;class OH extends hn.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n,layoutId:r}=this.props,{projection:s}=e;!function(e){for(const t in e)pU[t]=e[t],RL(t)&&(pU[t].isCSSVariable=!0)}(IH),s&&(t.group&&t.group.add(s),n&&n.register&&r&&n.register(s),PH&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),EH.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:n,drag:r,isPresent:s}=this.props,{projection:i}=n;return i?(i.isPresent=s,PH=!0,r||e.layoutDependency!==t||void 0===t||e.isPresent!==s?i.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?i.promote():i.relegate()||ML.postRender(()=>{const e=i.getStack();e&&e.members.length||this.safeToRemove()})),null):null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),jB.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n}=this.props,{projection:r}=e;PH=!0,r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),n&&n.deregister&&n.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function RH(e){const[t,n]=function(e=!0){const t=hn.useContext(WD);if(null===t)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=t,i=hn.useId();hn.useEffect(()=>{if(e)return s(i)},[e]);const a=hn.useCallback(()=>e&&r&&r(i),[i,r,e]);return!n&&r?[!1,a]:[!0]}(),r=hn.useContext(BD);return Ot.jsx(OH,{...e,layoutGroup:r,switchLayoutGroup:hn.useContext($U),isPresent:t,safeToRemove:n})}const IH={borderRadius:{...AH,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:AH,borderTopRightRadius:AH,borderBottomLeftRadius:AH,borderBottomRightRadius:AH,boxShadow:TH};const DH=(e,t)=>e.depth-t.depth;class LH{constructor(){this.children=[],this.isDirty=!1}add(e){$D(this.children,e),this.isDirty=!0}remove(e){GD(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(DH),this.isDirty=!1,this.children.forEach(e)}}const FH=["TopLeft","TopRight","BottomLeft","BottomRight"],zH=FH.length,BH=e=>"string"==typeof e?parseFloat(e):e,UH=e=>"number"==typeof e||JL.test(e);function VH(e,t){return void 0!==e[t]?e[t]:e.borderRadius}const HH=$H(0,.5,gL),WH=$H(.5,.95,QD);function $H(e,t,n){return r=>r<e?0:r>t?1:n(nL(e,t,r))}function GH(e,t){e.min=t.min,e.max=t.max}function qH(e,t){GH(e.x,t.x),GH(e.y,t.y)}function XH(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function KH(e,t,n,r,s){return e=rV(e-=t,1/n,r),void 0!==s&&(e=rV(e,1/s,r)),e}function YH(e,t,[n,r,s],i,a){!function(e,t=0,n=1,r=.5,s,i=e,a=e){ZL.test(t)&&(t=parseFloat(t),t=fF(a.min,a.max,t/100)-a.min);if("number"!=typeof t)return;let o=fF(i.min,i.max,r);e===i&&(o-=t),e.min=KH(e.min,t,n,o,s),e.max=KH(e.max,t,n,o,s)}(e,t[n],t[r],t[s],t.scale,i,a)}const ZH=["x","scaleX","originX"],JH=["y","scaleY","originY"];function QH(e,t,n,r){YH(e.x,t,ZH,n?n.x:void 0,r?r.x:void 0),YH(e.y,t,JH,n?n.y:void 0,r?r.y:void 0)}function eW(e){return 0===e.translate&&1===e.scale}function tW(e){return eW(e.x)&&eW(e.y)}function nW(e,t){return e.min===t.min&&e.max===t.max}function rW(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function sW(e,t){return rW(e.x,t.x)&&rW(e.y,t.y)}function iW(e){return rH(e.x)/rH(e.y)}function aW(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class oW{constructor(){this.members=[]}add(e){$D(this.members,e),e.scheduleRender()}remove(e){if(GD(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){const t=this.members.findIndex(t=>e===t);if(0===t)return!1;let n;for(let r=t;r>=0;r--){const e=this.members[r];if(!1!==e.isPresent){n=e;break}}return!!n&&(this.promote(n),!0)}promote(e,t){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;!1===r&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:n}=e;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const lW=["","X","Y","Z"];let cW=0;function dW(e,t,n,r){const{latestValues:s}=t;s[e]&&(n[e]=s[e],t.setStaticValue(e,0),r&&(r[e]=0))}function uW(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=AV(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:t,layoutId:r}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",ML,!(t||r))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&uW(r)}function hW({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(e={},n=t?.()){this.id=cW++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(fW),this.nodes.forEach(jW),this.nodes.forEach(NW),this.nodes.forEach(gW)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=n?n.root||n:this,this.path=n?[...n.path,n]:[],this.parent=n,this.depth=n?n.depth+1:0;for(let t=0;t<this.path.length;t++)this.path[t].shouldResetTransform=!0;this.root===this&&(this.nodes=new LH)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new rL),this.eventHandlers.get(e).add(t)}notifyListeners(e,...t){const n=this.eventHandlers.get(e);n&&n.notify(...t)}hasListeners(e){return this.eventHandlers.has(e)}mount(t){if(this.instance)return;var n;this.isSVG=IB(t)&&!(IB(n=t)&&"svg"===n.tagName),this.instance=t;const{layoutId:r,layout:s,visualElement:i}=this.options;if(i&&!i.current&&i.mount(t),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(s||r)&&(this.isLayoutDirty=!0),e){let n,r=0;const s=()=>this.root.updateBlockedByResize=!1;ML.read(()=>{r=window.innerWidth}),e(t,()=>{const e=window.innerWidth;e!==r&&(r=e,this.root.updateBlockedByResize=!0,n&&n(),n=function(e,t){const n=PL.now(),r=({timestamp:s})=>{const i=s-n;i>=t&&(CL(r),e(i-t))};return ML.setup(r,!0),()=>CL(r)}(s,250),EH.hasAnimatedSinceResize&&(EH.hasAnimatedSinceResize=!1,this.nodes.forEach(wW)))})}r&&this.root.registerSharedNode(r,this),!1!==this.options.animate&&i&&(r||s)&&this.addEventListener("didUpdate",({delta:e,hasLayoutChanged:t,hasRelativeLayoutChanged:n,layout:r})=>{if(this.isTreeAnimationBlocked())return this.target=void 0,void(this.relativeTarget=void 0);const s=this.options.transition||i.getDefaultTransition()||kW,{onLayoutAnimationStart:a,onLayoutAnimationComplete:o}=i.getProps(),l=!this.targetLayout||!sW(this.targetLayout,r),c=!t&&n;if(this.options.layoutRoot||this.resumeFrom||c||t&&(l||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const t={...Qz(s,"layout"),onPlay:a,onComplete:o};(i.shouldReduceMotion||this.options.layoutRoot)&&(t.delay=0,t.type=!1),this.startAnimation(t),this.setAnimationOrigin(e,c)}else t||wW(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=r})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),CL(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(_W),this.animationId++)}getTransformTemplate(){const{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(e=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked())return void(this.options.onExitComplete&&this.options.onExitComplete());if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&uW(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let s=0;s<this.path.length;s++){const e=this.path[s];e.shouldResetTransform=!0,e.updateScroll("snapshot"),e.options.layoutRoot&&e.willUpdate(!1)}const{layoutId:t,layout:n}=this.options;if(void 0===t&&!n)return;const r=this.getTransformTemplate();this.prevTransformTemplateValue=r?r(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){this.updateScheduled=!1;if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(vW);if(this.animationId<=this.animationCommitId)return void this.nodes.forEach(yW);this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(bW),this.nodes.forEach(pW),this.nodes.forEach(mW)):this.nodes.forEach(yW),this.clearAllSnapshots();const e=PL.now();EL.delta=qD(0,1e3/60,e-EL.timestamp),EL.timestamp=e,EL.isProcessing=!0,kL.update.process(EL),kL.preRender.process(EL),kL.render.process(EL),EL.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,jB.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(xW),this.sharedNodes.forEach(SW)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ML.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ML.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure(),!this.snapshot||rH(this.snapshot.measuredBox.x)||rH(this.snapshot.measuredBox.y)||(this.snapshot=void 0))}updateLayout(){if(!this.instance)return;if(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead()||this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let n=0;n<this.path.length;n++){this.path[n].updateScroll()}const e=this.layout;this.layout=this.measure(!1),this.layoutCorrected={x:{min:0,max:0},y:{min:0,max:0}},this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(e="measure"){let t=Boolean(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t&&this.instance){const t=r(this.instance);this.scroll={animationId:this.root.animationId,phase:e,isRoot:t,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:t}}}resetTransform(){if(!s)return;const e=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,t=this.projectionDelta&&!tW(this.projectionDelta),n=this.getTransformTemplate(),r=n?n(this.latestValues,""):void 0,i=r!==this.prevTransformTemplateValue;e&&this.instance&&(t||eV(this.latestValues)||i)&&(s(this.instance,r),this.shouldResetTransform=!1,this.scheduleRender())}measure(e=!0){const t=this.measurePageBox();let n=this.removeElementScroll(t);var r;return e&&(n=this.removeTransform(n)),PW((r=n).x),PW(r.y),{animationId:this.root.animationId,measuredBox:t,layoutBox:n,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:e}=this.options;if(!e)return{x:{min:0,max:0},y:{min:0,max:0}};const t=e.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(RW))){const{scroll:e}=this.root;e&&(cV(t.x,e.offset.x),cV(t.y,e.offset.y))}return t}removeElementScroll(e){const t={x:{min:0,max:0},y:{min:0,max:0}};if(qH(t,e),this.scroll?.wasRoot)return t;for(let n=0;n<this.path.length;n++){const r=this.path[n],{scroll:s,options:i}=r;r!==this.root&&s&&i.layoutScroll&&(s.wasRoot&&qH(t,e),cV(t.x,s.offset.x),cV(t.y,s.offset.y))}return t}applyTransform(e,t=!1){const n={x:{min:0,max:0},y:{min:0,max:0}};qH(n,e);for(let r=0;r<this.path.length;r++){const e=this.path[r];!t&&e.options.layoutScroll&&e.scroll&&e!==e.root&&uV(n,{x:-e.scroll.offset.x,y:-e.scroll.offset.y}),eV(e.latestValues)&&uV(n,e.latestValues)}return eV(this.latestValues)&&uV(n,this.latestValues),n}removeTransform(e){const t={x:{min:0,max:0},y:{min:0,max:0}};qH(t,e);for(let n=0;n<this.path.length;n++){const e=this.path[n];if(!e.instance)continue;if(!eV(e.latestValues))continue;QU(e.latestValues)&&e.updateSnapshot();const r=pV();qH(r,e.measurePageBox()),QH(t,e.latestValues,e.snapshot?e.snapshot.layoutBox:void 0,r)}return eV(this.latestValues)&&QH(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options={...this.options,...e,crossfade:void 0===e.crossfade||e.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==EL.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(e=!1){const t=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=t.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=t.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=t.isSharedProjectionDirty);const n=Boolean(this.resumingFrom)||this!==t;if(!(e||n&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:r,layoutId:s}=this.options;if(this.layout&&(r||s)){if(this.resolvedRelativeTargetAt=EL.timestamp,!this.targetDelta&&!this.relativeTarget){const e=this.getClosestProjectingParent();e&&e.layout&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},lH(this.relativeTargetOrigin,this.layout.layoutBox,e.layout.layoutBox),qH(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}var i,a,o;if(this.relativeTarget||this.targetDelta)if(this.target||(this.target={x:{min:0,max:0},y:{min:0,max:0}},this.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}}),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),i=this.target,a=this.relativeTarget,o=this.relativeParent.target,aH(i.x,a.x,o.x),aH(i.y,a.y,o.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):qH(this.target,this.layout.layoutBox),aV(this.target,this.targetDelta)):qH(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const e=this.getClosestProjectingParent();e&&Boolean(e.resumingFrom)===Boolean(this.resumingFrom)&&!e.options.layoutScroll&&e.target&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},lH(this.relativeTargetOrigin,this.target,e.target),qH(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(this.parent&&!QU(this.parent.latestValues)&&!tV(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const e=this.getLead(),t=Boolean(this.resumingFrom)||this!==e;let n=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(n=!1),t&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(n=!1),this.resolvedRelativeTargetAt===EL.timestamp&&(n=!1),n)return;const{layout:r,layoutId:s}=this.options;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!r&&!s)return;qH(this.layoutCorrected,this.layout.layoutBox);const i=this.treeScale.x,a=this.treeScale.y;!function(e,t,n,r=!1){const s=n.length;if(!s)return;let i,a;t.x=t.y=1;for(let o=0;o<s;o++){i=n[o],a=i.projectionDelta;const{visualElement:s}=i.options;s&&s.props.style&&"contents"===s.props.style.display||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&uV(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),a&&(t.x*=a.x.scale,t.y*=a.y.scale,aV(e,a)),r&&eV(i.latestValues)&&uV(e,i.latestValues))}t.x<lV&&t.x>oV&&(t.x=1),t.y<lV&&t.y>oV&&(t.y=1)}(this.layoutCorrected,this.treeScale,this.path,t),!e.layout||e.target||1===this.treeScale.x&&1===this.treeScale.y||(e.target=e.layout.layoutBox,e.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}});const{target:o}=e;o?(this.projectionDelta&&this.prevProjectionDelta?(XH(this.prevProjectionDelta.x,this.projectionDelta.x),XH(this.prevProjectionDelta.y,this.projectionDelta.y)):this.createProjectionDeltas(),iH(this.projectionDelta,this.layoutCorrected,o,this.latestValues),this.treeScale.x===i&&this.treeScale.y===a&&aW(this.projectionDelta.x,this.prevProjectionDelta.x)&&aW(this.projectionDelta.y,this.prevProjectionDelta.y)||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",o))):this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender())}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(e=!0){if(this.options.visualElement?.scheduleRender(),e){const e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDeltaWithTransform={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}}}setAnimationOrigin(e,t=!1){const n=this.snapshot,r=n?n.latestValues:{},s={...this.latestValues},i={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;const a={x:{min:0,max:0},y:{min:0,max:0}},o=(n?n.source:void 0)!==(this.layout?this.layout.source:void 0),l=this.getStack(),c=!l||l.members.length<=1,d=Boolean(o&&!c&&!0===this.options.crossfade&&!this.path.some(EW));let u;this.animationProgress=0,this.mixTargetDelta=t=>{const n=t/1e3;var l,h,p,m,f,g;MW(i.x,e.x,n),MW(i.y,e.y,n),this.setTargetDelta(i),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(lH(a,this.layout.layoutBox,this.relativeParent.layout.layoutBox),p=this.relativeTarget,m=this.relativeTargetOrigin,f=a,g=n,CW(p.x,m.x,f.x,g),CW(p.y,m.y,f.y,g),u&&(l=this.relativeTarget,h=u,nW(l.x,h.x)&&nW(l.y,h.y))&&(this.isProjectionDirty=!1),u||(u={x:{min:0,max:0},y:{min:0,max:0}}),qH(u,this.relativeTarget)),o&&(this.animationValues=s,function(e,t,n,r,s,i){s?(e.opacity=fF(0,n.opacity??1,HH(r)),e.opacityExit=fF(t.opacity??1,0,WH(r))):i&&(e.opacity=fF(t.opacity??1,n.opacity??1,r));for(let a=0;a<zH;a++){const s=`border${FH[a]}Radius`;let i=VH(t,s),o=VH(n,s);void 0===i&&void 0===o||(i||(i=0),o||(o=0),0===i||0===o||UH(i)===UH(o)?(e[s]=Math.max(fF(BH(i),BH(o),r),0),(ZL.test(o)||ZL.test(i))&&(e[s]+="%")):e[s]=o)}(t.rotate||n.rotate)&&(e.rotate=fF(t.rotate||0,n.rotate||0,r))}(s,r,this.latestValues,n,d,c)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=n},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(e){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(CL(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ML.update(()=>{EH.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=wB(0)),this.currentAnimation=function(e,t,n){const r=XB(e)?e:wB(e);return r.start(DV("",r,t,n)),r.animation}(this.motionValue,[0,1e3],{...e,velocity:0,isSync:!0,onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onStop:()=>{},onComplete:()=>{e.onComplete&&e.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const e=this.getLead();let{targetWithTransforms:t,target:n,layout:r,latestValues:s}=e;if(t&&n&&r){if(this!==e&&this.layout&&r&&OW(this.options.animationType,this.layout.layoutBox,r.layoutBox)){n=this.target||{x:{min:0,max:0},y:{min:0,max:0}};const t=rH(this.layout.layoutBox.x);n.x.min=e.target.x.min,n.x.max=n.x.min+t;const r=rH(this.layout.layoutBox.y);n.y.min=e.target.y.min,n.y.max=n.y.min+r}qH(t,n),uV(t,s),iH(this.projectionDeltaWithTransform,this.layoutCorrected,t,s)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new oW);this.sharedNodes.get(e).add(t);const n=t.options.initialPromotionConfig;t.promote({transition:n?n.transition:void 0,preserveFollowOpacity:n&&n.shouldPreserveFollowOpacity?n.shouldPreserveFollowOpacity(t):void 0})}isLead(){const e=this.getStack();return!e||e.lead===this}getLead(){const{layoutId:e}=this.options;return e&&this.getStack()?.lead||this}getPrevLead(){const{layoutId:e}=this.options;return e?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote({needsReset:e,transition:t,preserveFollowOpacity:n}={}){const r=this.getStack();r&&r.promote(this,n),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){const e=this.getStack();return!!e&&e.relegate(this)}resetSkewAndRotation(){const{visualElement:e}=this.options;if(!e)return;let t=!1;const{latestValues:n}=e;if((n.z||n.rotate||n.rotateX||n.rotateY||n.rotateZ||n.skewX||n.skewY)&&(t=!0),!t)return;const r={};n.z&&dW("z",e,r,this.animationValues);for(let s=0;s<lW.length;s++)dW(`rotate${lW[s]}`,e,r,this.animationValues),dW(`skew${lW[s]}`,e,r,this.animationValues);e.render();for(const s in r)e.setStaticValue(s,r[s]),this.animationValues&&(this.animationValues[s]=r[s]);e.scheduleRender()}applyProjectionStyles(e,t){if(!this.instance||this.isSVG)return;if(!this.isVisible)return void(e.visibility="hidden");const n=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,e.visibility="",e.opacity="",e.pointerEvents=OU(t?.pointerEvents)||"",void(e.transform=n?n(this.latestValues,""):"none");const r=this.getLead();if(!this.projectionDelta||!this.layout||!r.target)return this.options.layoutId&&(e.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,e.pointerEvents=OU(t?.pointerEvents)||""),void(this.hasProjected&&!eV(this.latestValues)&&(e.transform=n?n({},""):"none",this.hasProjected=!1));e.visibility="";const s=r.animationValues||r.latestValues;this.applyTransformsToTarget();let i=function(e,t,n){let r="";const s=e.x.translate/t.x,i=e.y.translate/t.y,a=n?.z||0;if((s||i||a)&&(r=`translate3d(${s}px, ${i}px, ${a}px) `),1===t.x&&1===t.y||(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:e,rotate:t,rotateX:s,rotateY:i,skewX:a,skewY:o}=n;e&&(r=`perspective(${e}px) ${r}`),t&&(r+=`rotate(${t}deg) `),s&&(r+=`rotateX(${s}deg) `),i&&(r+=`rotateY(${i}deg) `),a&&(r+=`skewX(${a}deg) `),o&&(r+=`skewY(${o}deg) `)}const o=e.x.scale*t.x,l=e.y.scale*t.y;return 1===o&&1===l||(r+=`scale(${o}, ${l})`),r||"none"}(this.projectionDeltaWithTransform,this.treeScale,s);n&&(i=n(s,i)),e.transform=i;const{x:a,y:o}=this.projectionDelta;e.transformOrigin=`${100*a.origin}% ${100*o.origin}% 0`,r.animationValues?e.opacity=r===this?s.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:s.opacityExit:e.opacity=r===this?void 0!==s.opacity?s.opacity:"":void 0!==s.opacityExit?s.opacityExit:0;for(const l in pU){if(void 0===s[l])continue;const{correct:t,applyTo:n,isCSSVariable:a}=pU[l],o="none"===i?s[l]:t(s[l],r);if(n){const t=n.length;for(let r=0;r<t;r++)e[n[r]]=o}else a?this.options.visualElement.renderState.vars[l]=o:e[l]=o}this.options.layoutId&&(e.pointerEvents=r===this?OU(t?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(e=>e.currentAnimation?.stop()),this.root.nodes.forEach(vW),this.root.sharedNodes.clear()}}}function pW(e){e.updateLayout()}function mW(e){const t=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=e.layout,{animationType:s}=e.options,i=t.source!==e.layout.source;"size"===s?cH(e=>{const r=i?t.measuredBox[e]:t.layoutBox[e],s=rH(r);r.min=n[e].min,r.max=r.min+s}):OW(s,t.layoutBox,n)&&cH(r=>{const s=i?t.measuredBox[r]:t.layoutBox[r],a=rH(n[r]);s.max=s.min+a,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[r].max=e.relativeTarget[r].min+a)});const a={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};iH(a,n,t.layoutBox);const o={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};i?iH(o,e.applyTransform(r,!0),t.measuredBox):iH(o,n,t.layoutBox);const l=!tW(a);let c=!1;if(!e.resumeFrom){const r=e.getClosestProjectingParent();if(r&&!r.resumeFrom){const{snapshot:s,layout:i}=r;if(s&&i){const a={x:{min:0,max:0},y:{min:0,max:0}};lH(a,t.layoutBox,s.layoutBox);const o={x:{min:0,max:0},y:{min:0,max:0}};lH(o,n,i.layoutBox),sW(a,o)||(c=!0),r.options.layoutRoot&&(e.relativeTarget=o,e.relativeTargetOrigin=a,e.relativeParent=r)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:t,delta:o,layoutDelta:a,hasLayoutChanged:l,hasRelativeLayoutChanged:c})}else if(e.isLead()){const{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function fW(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=Boolean(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function gW(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function xW(e){e.clearSnapshot()}function vW(e){e.clearMeasurements()}function yW(e){e.isLayoutDirty=!1}function bW(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function wW(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function jW(e){e.resolveTargetDelta()}function NW(e){e.calcProjection()}function _W(e){e.resetSkewAndRotation()}function SW(e){e.removeLeadSnapshot()}function MW(e,t,n){e.translate=fF(t.translate,0,n),e.scale=fF(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function CW(e,t,n,r){e.min=fF(t.min,n.min,r),e.max=fF(t.max,n.max,r)}function EW(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}const kW={duration:.45,ease:[.4,0,.1,1]},AW=e=>"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),TW=AW("applewebkit/")&&!AW("chrome/")?Math.round:QD;function PW(e){e.min=TW(e.min),e.max=TW(e.max)}function OW(e,t,n){return"position"===e||"preserve-aspect"===e&&(r=iW(t),s=iW(n),i=.2,!(Math.abs(r-s)<=i));var r,s,i}function RW(e){return e!==e.root&&e.scroll?.wasRoot}const IW=hW({attachResizeListener:(e,t)=>eH(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),DW={current:void 0},LW=hW({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!DW.current){const e=new IW({});e.mount(window),e.setOptions({layoutScroll:!0}),DW.current=e}return DW.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>Boolean("fixed"===window.getComputedStyle(e).position)}),FW={pan:{Feature:class extends ZV{constructor(){super(...arguments),this.removePointerDownListener=QD}onPointerDown(e){this.session=new hH(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:dH(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:n,onPanEnd:r}=this.node.getProps();return{onSessionStart:CH(e),onStart:CH(t),onMove:n,onEnd:(e,t)=>{delete this.session,r&&ML.postRender(()=>r(e,t))}}}mount(){this.removePointerDownListener=nH(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends ZV{constructor(e){super(e),this.removeGroupControls=QD,this.removeListeners=QD,this.controls=new SH(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||QD}unmount(){this.removeGroupControls(),this.removeListeners()}},ProjectionNode:LW,MeasureLayout:RH}};function zW(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover","Start"===n);const s=r["onHover"+n];s&&ML.postRender(()=>s(t,tH(t)))}function BW(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap","Start"===n);const s=r["onTap"+("End"===n?"":n)];s&&ML.postRender(()=>s(t,tH(t)))}const UW=new WeakMap,VW=new WeakMap,HW=e=>{const t=UW.get(e.target);t&&t(e)},WW=e=>{e.forEach(HW)};function $W(e,t,n){const r=function({root:e,...t}){const n=e||document;VW.has(n)||VW.set(n,{});const r=VW.get(n),s=JSON.stringify(t);return r[s]||(r[s]=new IntersectionObserver(WW,{root:e,...t})),r[s]}(t);return UW.set(e,n),r.observe(e),()=>{UW.delete(e),r.unobserve(e)}}const GW={some:0,all:1};const qW=YU({...QV,...{inView:{Feature:class extends ZV{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:n,amount:r="some",once:s}=e,i={root:t?t.current:void 0,rootMargin:n,threshold:"number"==typeof r?r:GW[r]};return $W(this.node.current,i,e=>{const{isIntersecting:t}=e;if(this.isInView===t)return;if(this.isInView=t,s&&!t&&this.hasEnteredView)return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);const{onViewportEnter:n,onViewportLeave:r}=this.node.getProps(),i=t?n:r;i&&i(e)})}mount(){this.startObserver()}update(){if("undefined"==typeof IntersectionObserver)return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(function({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}(e,t))&&this.startObserver()}unmount(){}}},tap:{Feature:class extends ZV{mount(){const{current:e}=this.node;e&&(this.unmount=RB(e,(e,t)=>(BW(this.node,t,"Start"),(e,{success:t})=>BW(this.node,e,t?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}},focus:{Feature:class extends ZV{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(t){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=tL(eH(this.node.current,"focus",()=>this.onFocus()),eH(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}},hover:{Feature:class extends ZV{mount(){const{current:e}=this.node;e&&(this.unmount=function(e,t,n={}){const[r,s,i]=SB(e,n),a=e=>{if(!MB(e))return;const{target:n}=e,r=t(n,e);if("function"!=typeof r||!n)return;const i=e=>{MB(e)&&(r(e),n.removeEventListener("pointerleave",i))};n.addEventListener("pointerleave",i,s)};return r.forEach(e=>{e.addEventListener("pointerenter",a,s)}),i}(e,(e,t)=>(zW(this.node,t,"Start"),e=>zW(this.node,e,"End"))))}unmount(){}}}},...FW,...{layout:{ProjectionNode:LW,MeasureLayout:RH}}},_V),XW={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};function KW(e,t,n,r){const s=n[t],{length:i,position:a}=XW[t],o=s.current,l=n.time;s.current=e[`scroll${a}`],s.scrollLength=e[`scroll${i}`]-e[`client${i}`],s.offset.length=0,s.offset[0]=0,s.offset[1]=s.scrollLength,s.progress=nL(0,s.scrollLength,s.current);const c=r-l;s.velocity=c>50?0:aL(s.current-o,c)}const YW={start:0,center:.5,end:1};function ZW(e,t,n=0){let r=0;if(e in YW&&(e=YW[e]),"string"==typeof e){const t=parseFloat(e);e.endsWith("px")?r=t:e.endsWith("%")?e=t/100:e.endsWith("vw")?r=t/100*document.documentElement.clientWidth:e.endsWith("vh")?r=t/100*document.documentElement.clientHeight:e=t}return"number"==typeof e&&(r=t*e),n+r}const JW=[0,0];function QW(e,t,n,r){let s=Array.isArray(e)?e:JW,i=0,a=0;return"number"==typeof e?s=[e,e]:"string"==typeof e&&(s=(e=e.trim()).includes(" ")?e.split(" "):[e,YW[e]?e:"0"]),i=ZW(s[0],n,r),a=ZW(s[1],t),i-a}const e$={All:[[0,0],[1,1]]},t$={x:0,y:0};function n$(e,t,n){const{offset:r=e$.All}=n,{target:s=e,axis:i="y"}=n,a="y"===i?"height":"width",o=s!==e?function(e,t){const n={x:0,y:0};let r=e;for(;r&&r!==t;)if(vB(r))n.x+=r.offsetLeft,n.y+=r.offsetTop,r=r.offsetParent;else if("svg"===r.tagName){const e=r.getBoundingClientRect();r=r.parentElement;const t=r.getBoundingClientRect();n.x+=e.left-t.left,n.y+=e.top-t.top}else{if(!(r instanceof SVGGraphicsElement))break;{const{x:e,y:t}=r.getBBox();n.x+=e,n.y+=t;let s=null,i=r.parentNode;for(;!s;)"svg"===i.tagName&&(s=i),i=r.parentNode;r=s}}return n}(s,e):t$,l=s===e?{width:e.scrollWidth,height:e.scrollHeight}:function(e){return"getBBox"in e&&"svg"!==e.tagName?e.getBBox():{width:e.clientWidth,height:e.clientHeight}}(s),c={width:e.clientWidth,height:e.clientHeight};t[i].offset.length=0;let d=!t[i].interpolate;const u=r.length;for(let h=0;h<u;h++){const e=QW(r[h],c[a],l[a],o[i]);d||e===t[i].interpolatorOffsets[h]||(d=!0),t[i].offset[h]=e}d&&(t[i].interpolate=ez(t[i].offset,tz(r),{clamp:!1}),t[i].interpolatorOffsets=[...t[i].offset]),t[i].progress=qD(0,1,t[i].interpolate(t[i].current))}function r$(e,t,n,r={}){return{measure:t=>{!function(e,t=e,n){if(n.x.targetOffset=0,n.y.targetOffset=0,t!==e){let r=t;for(;r&&r!==e;)n.x.targetOffset+=r.offsetLeft,n.y.targetOffset+=r.offsetTop,r=r.offsetParent}n.x.targetLength=t===e?t.scrollWidth:t.clientWidth,n.y.targetLength=t===e?t.scrollHeight:t.clientHeight,n.x.containerLength=e.clientWidth,n.y.containerLength=e.clientHeight}(e,r.target,n),function(e,t,n){KW(e,"x",t,n),KW(e,"y",t,n),t.time=n}(e,n,t),(r.offset||r.target)&&n$(e,n,r)},notify:()=>t(n)}}const s$=new WeakMap,i$=new WeakMap,a$=new WeakMap,o$=e=>e===document.scrollingElement?window:e;function l$(e,{container:t=document.scrollingElement,...n}={}){if(!t)return QD;let r=a$.get(t);r||(r=new Set,a$.set(t,r));const s=r$(t,e,{time:0,x:{current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0},y:{current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0}},n);if(r.add(s),!s$.has(t)){const e=()=>{for(const e of r)e.measure(EL.timestamp);ML.preUpdate(n)},n=()=>{for(const e of r)e.notify()},s=()=>ML.read(e);s$.set(t,s);const o=o$(t);window.addEventListener("resize",s,{passive:!0}),t!==document.documentElement&&i$.set(t,(a=s,"function"==typeof(i=t)?GB(i):HB(i,a))),o.addEventListener("scroll",s,{passive:!0}),s()}var i,a;const o=s$.get(t);return ML.read(o,!1,!0),()=>{CL(o);const e=a$.get(t);if(!e)return;if(e.delete(s),e.size)return;const n=s$.get(t);s$.delete(t),n&&(o$(t).removeEventListener("scroll",n),i$.get(t)?.(),window.removeEventListener("resize",n))}}const c$=new Map;function d$({source:e,container:t,...n}){const{axis:r}=n;e&&(t=e);const s=c$.get(t)??new Map;c$.set(t,s);const i=n.target??"self",a=s.get(i)??{},o=r+(n.offset??[]).join(",");return a[o]||(a[o]=!n.target&&Oz()?new ScrollTimeline({source:t,axis:r}):function(e){const t={value:0},n=l$(n=>{t.value=100*n[e.axis].progress},e);return{currentTime:t,cancel:n}}({container:t,...n})),a[o]}function u$(e,{axis:t="y",container:n=document.scrollingElement,...r}={}){if(!n)return QD;const s={axis:t,container:n,...r};return"function"==typeof e?function(e,t){return function(e){return 2===e.length}(e)?l$(n=>{e(n[t.axis].progress,n)},t):qB(e,d$(t))}(e,s):function(e,t){const n=d$(t);return e.attachTimeline({timeline:t.target?void 0:n,observe:e=>(e.pause(),qB(t=>{e.time=e.iterationDuration*t},n))})}(e,s)}const h$=()=>({scrollX:wB(0),scrollY:wB(0),scrollXProgress:wB(0),scrollYProgress:wB(0)}),p$=e=>!!e&&!e.current;function m$(e,t){const n=function(e){const t=UD(()=>wB(e)),{isStatic:n}=hn.useContext(YB);if(n){const[,n]=hn.useState(e);hn.useEffect(()=>t.on("change",n),[])}return t}(t()),r=()=>n.set(t());return r(),HD(()=>{const t=()=>ML.preRender(r,!1,!0),n=e.map(e=>e.on("change",t));return()=>{n.forEach(e=>e()),CL(r)}}),n}function f$(e,t,n,r){if("function"==typeof e)return function(e){yB.current=[],e();const t=m$(yB.current,e);return yB.current=void 0,t}(e);const s="function"==typeof t?t:function(...e){const t=!Array.isArray(e[0]),n=t?0:-1,r=e[0+n],s=ez(e[1+n],e[2+n],e[3+n]);return t?s(r):s}(t,n,r);return Array.isArray(e)?g$(e,s):g$([e],([e])=>s(e))}function g$(e,t){const n=UD(()=>[]);return m$(e,()=>{n.length=0;const r=e.length;for(let t=0;t<r;t++)n[t]=e[t].get();return t(n)})}const x$={top:0,right:90,bottom:180,left:270};function v$({direction:e="bottom",blurLayers:t=8,className:n,blurIntensity:r=.25,...s}){const i=Math.max(t,2),a=1/(t+1);return Ot.jsx("div",{className:bn("relative",n),children:Array.from({length:i}).map((t,n)=>{const i=`linear-gradient(${x$[e]}deg, ${[n*a,(n+1)*a,(n+2)*a,(n+3)*a].map((e,t)=>`rgba(255, 255, 255, ${1===t||2===t?1:0}) ${100*e}%`).join(", ")})`;return Ot.jsx(qW.div,{className:"pointer-events-none absolute inset-0 rounded-[inherit]",style:{maskImage:i,WebkitMaskImage:i,backdropFilter:`blur(${n*r}px)`},...s},n)})})}var y$=(e=>(e.H1="h1",e.H2="h2",e.H3="h3",e.P="p",e))(y$||{});function b$({texts:e=["Next.js","React"],font:t={fontFamily:"sans-serif",fontSize:"50px",fontWeight:400},color:n="rgb(255, 255, 255)",spread:r=5,density:s=5,animation:i={vaporizeDuration:2,fadeInDuration:1,waitDuration:.5},direction:a="left-to-right",alignment:o="center",tag:l="p"}){const c=hn.useRef(null),d=hn.useRef(null),u=function(e){const[t,n]=hn.useState(!1);return hn.useEffect(()=>{if(!e.current)return;const t=new IntersectionObserver(([e])=>{n(e.isIntersecting)},{threshold:0,rootMargin:"50px"});return t.observe(e.current),()=>{t.disconnect()}},[e]),t}(d),h=hn.useRef(null),p=hn.useRef([]),m=hn.useRef(null),[f,g]=hn.useState(0),[x,v]=hn.useState("static"),y=hn.useRef(0),b=hn.useRef(0),[w,j]=hn.useState({width:0,height:0}),N=function(e,t,n,r=!1){const[s,i]=t,[a,o]=n;let l=a+(e-s)/(i-s)*(o-a);r&&(l=o>a?Math.min(Math.max(l,a),o):Math.min(Math.max(l,o),a));return l}(s,[0,10],[.3,1],!0),_=hn.useMemo(()=>"undefined"!=typeof window&&1.5*window.devicePixelRatio||1,[]),S=hn.useMemo(()=>({width:"100%",height:"100%",pointerEvents:"none"}),[]),M=hn.useMemo(()=>({minWidth:"30px",minHeight:"20px",pointerEvents:"none"}),[]),C=hn.useMemo(()=>({VAPORIZE_DURATION:1e3*(i.vaporizeDuration??2),FADE_IN_DURATION:1e3*(i.fadeInDuration??1),WAIT_DURATION:1e3*(i.waitDuration??.5)}),[i.vaporizeDuration,i.fadeInDuration,i.waitDuration]),E=hn.useMemo(()=>{const e=parseInt(t.fontSize?.replace("px","")||"50"),n=k$(e);return{fontSize:e,VAPORIZE_SPREAD:n,MULTIPLIED_VAPORIZE_SPREAD:n*r,font:`${t.fontWeight??400} ${e*_}px ${t.fontFamily}`}},[t.fontSize,t.fontWeight,t.fontFamily,r,_]),k=hn.useCallback((e,t,n)=>M$(e,t,n,E.MULTIPLIED_VAPORIZE_SPREAD,C.VAPORIZE_DURATION,a,N),[E.MULTIPLIED_VAPORIZE_SPREAD,C.VAPORIZE_DURATION,a,N]),A=hn.useCallback((e,t)=>{C$(e,t,_)},[_]);return hn.useEffect(()=>{if(u){const e=setTimeout(()=>{v("vaporizing")},0);return()=>clearTimeout(e)}v("static"),m.current&&(cancelAnimationFrame(m.current),m.current=null)},[u]),hn.useEffect(()=>{if(!u)return;let t,n=performance.now();const r=s=>{const i=(s-n)/1e3;n=s;const o=c.current,l=o?.getContext("2d");if(o&&l&&p.current.length){switch(l.clearRect(0,0,o.width,o.height),x){case"static":case"waiting":A(l,p.current);break;case"vaporizing":{y.current+=100*i/(C.VAPORIZE_DURATION/1e3);const t=o.textBoundaries;if(!t)break;const n=Math.min(100,y.current),r="left-to-right"===a?t.left+t.width*n/100:t.right-t.width*n/100,s=k(p.current,r,i);A(l,p.current),y.current>=100&&s&&(g(t=>(t+1)%e.length),v("fadingIn"),b.current=0);break}case"fadingIn":b.current+=1e3*i/C.FADE_IN_DURATION,l.save(),l.scale(_,_),p.current.forEach(e=>{e.x=e.originalX,e.y=e.originalY;const t=Math.min(b.current,1)*e.originalAlpha,n=e.color.replace(/[\d.]+\)$/,`${t})`);l.fillStyle=n,l.fillRect(e.x/_,e.y/_,1,1)}),l.restore(),b.current>=1&&(v("waiting"),setTimeout(()=>{v("vaporizing"),y.current=0,E$(p.current)},C.WAIT_DURATION))}t=requestAnimationFrame(r)}else t=requestAnimationFrame(r)};return t=requestAnimationFrame(r),()=>{t&&cancelAnimationFrame(t)}},[x,u,e.length,a,_,k,A,C.FADE_IN_DURATION,C.WAIT_DURATION,C.VAPORIZE_DURATION]),hn.useEffect(()=>{_$({framerProps:{texts:e,font:t,color:n,alignment:o},canvasRef:c,wrapperSize:w,particlesRef:p,globalDpr:_,currentTextIndex:f,transformedDensity:N});const r=t.fontFamily||"sans-serif";return j$({currentFont:r,lastFontRef:h,canvasRef:c,wrapperSize:w,particlesRef:p,globalDpr:_,currentTextIndex:f,transformedDensity:N,framerProps:{texts:e,font:t,color:n,alignment:o}})},[e,t,n,o,w,f,_,N]),hn.useEffect(()=>{const r=d.current;if(!r)return;const s=new ResizeObserver(s=>{for(const e of s){const{width:t,height:n}=e.contentRect;j({width:t,height:n})}_$({framerProps:{texts:e,font:t,color:n,alignment:o},canvasRef:c,wrapperSize:{width:r.clientWidth,height:r.clientHeight},particlesRef:p,globalDpr:_,currentTextIndex:f,transformedDensity:N})});return s.observe(r),()=>{s.disconnect()}},[d.current]),hn.useEffect(()=>{if(d.current){const e=d.current.getBoundingClientRect();j({width:e.width,height:e.height})}},[]),Ot.jsxs("div",{ref:d,style:S,children:[Ot.jsx("canvas",{ref:c,style:M}),Ot.jsx(w$,{tag:l,texts:e})]})}const w$=hn.memo(({tag:e="p",texts:t})=>{const n=hn.useMemo(()=>({position:"absolute",width:"0",height:"0",overflow:"hidden",userSelect:"none",pointerEvents:"none"}),[]),r=Object.values(y$).includes(e)?e:"p";return hn.createElement(r,{style:n},t?.join(" ")??"")}),j$=({currentFont:e,lastFontRef:t,canvasRef:n,wrapperSize:r,particlesRef:s,globalDpr:i,currentTextIndex:a,transformedDensity:o,framerProps:l})=>{if(e!==t.current){t.current=e;const c=setTimeout(()=>{N$({canvasRef:n,particlesRef:s}),_$({framerProps:l,canvasRef:n,wrapperSize:r,particlesRef:s,globalDpr:i,currentTextIndex:a,transformedDensity:o})},1e3);return()=>{clearTimeout(c),N$({canvasRef:n,particlesRef:s})}}},N$=({canvasRef:e,particlesRef:t})=>{const n=e.current,r=n?.getContext("2d");n&&r&&r.clearRect(0,0,n.width,n.height),t.current&&(t.current=[])},_$=({framerProps:e,canvasRef:t,wrapperSize:n,particlesRef:r,globalDpr:s,currentTextIndex:i,transformedDensity:a})=>{const o=t.current;if(!o||!n.width||!n.height)return;const l=o.getContext("2d");if(!l)return;const{width:c,height:d}=n;o.style.width=`${c}px`,o.style.height=`${d}px`,o.width=Math.floor(c*s),o.height=Math.floor(d*s);const u=parseInt(e.font?.fontSize?.replace("px","")||"50"),h=`${e.font?.fontWeight??400} ${u*s}px ${e.font?.fontFamily??"sans-serif"}`,p=A$(e.color??"rgb(153, 153, 153)");let m;const f=o.height/2,g=e.texts[i]||"Next.js";m="center"===e.alignment?o.width/2:"left"===e.alignment?0:o.width;const{particles:x,textBoundaries:v}=S$(l,o,g,m,f,h,p,e.alignment||"left");r.current=x,o.textBoundaries=v},S$=(e,t,n,r,s,i,a,o)=>{const l=[];e.clearRect(0,0,t.width,t.height),e.fillStyle=a,e.font=i,e.textAlign=o,e.textBaseline="middle",e.imageSmoothingQuality="high",e.imageSmoothingEnabled=!0,"fontKerning"in e&&(e.fontKerning="normal"),"textRendering"in e&&(e.textRendering="geometricPrecision");let c;const d=e.measureText(n).width;c="center"===o?r-d/2:"left"===o?r:r-d;const u={left:c,right:c+d,width:d};e.fillText(n,r,s);const h=e.getImageData(0,0,t.width,t.height).data,p=t.width/parseInt(t.style.width),m=Math.max(1,Math.round(p/3)),f=Math.max(1,Math.round(m));for(let g=0;g<t.height;g+=f)for(let e=0;e<t.width;e+=f){const n=4*(g*t.width+e),r=h[n+3];if(r>0){const t=r/255*(f/p),s={x:e,y:g,originalX:e,originalY:g,color:`rgba(${h[n]}, ${h[n+1]}, ${h[n+2]}, ${t})`,opacity:t,originalAlpha:t,velocityX:0,velocityY:0,angle:0,speed:0};l.push(s)}}return e.clearRect(0,0,t.width,t.height),{particles:l,textBoundaries:u}},M$=(e,t,n,r,s,i,a)=>{let o=!0;return e.forEach(e=>{if("left-to-right"===i?e.originalX<=t:e.originalX>=t){if(0===e.speed&&(e.angle=Math.random()*Math.PI*2,e.speed=(1*Math.random()+.5)*r,e.velocityX=Math.cos(e.angle)*e.speed,e.velocityY=Math.sin(e.angle)*e.speed,e.shouldFadeQuickly=Math.random()>a),e.shouldFadeQuickly)e.opacity=Math.max(0,e.opacity-n);else{const t=e.originalX-e.x,i=e.originalY-e.y,a=Math.sqrt(t*t+i*i),o=Math.max(.95,1-a/(100*r)),l=3*r,c=(Math.random()-.5)*l,d=(Math.random()-.5)*l;e.velocityX=(e.velocityX+c+.002*t)*o,e.velocityY=(e.velocityY+d+.002*i)*o;const u=2*r,h=Math.sqrt(e.velocityX*e.velocityX+e.velocityY*e.velocityY);if(h>u){const t=u/h;e.velocityX*=t,e.velocityY*=t}e.x+=e.velocityX*n*20,e.y+=e.velocityY*n*10;const p=.25*(2e3/s);e.opacity=Math.max(0,e.opacity-n*p)}e.opacity>.01&&(o=!1)}else o=!1}),o},C$=(e,t,n)=>{e.save(),e.scale(n,n),t.forEach(t=>{if(t.opacity>0){const r=t.color.replace(/[\d.]+\)$/,`${t.opacity})`);e.fillStyle=r,e.fillRect(t.x/n,t.y/n,1,1)}}),e.restore()},E$=e=>{e.forEach(e=>{e.x=e.originalX,e.y=e.originalY,e.opacity=e.originalAlpha,e.speed=0,e.velocityX=0,e.velocityY=0})},k$=e=>{const t="string"==typeof e?parseInt(e):e,n=[{size:20,spread:.2},{size:50,spread:.5},{size:100,spread:1.5}];if(t<=n[0].size)return n[0].spread;if(t>=n[n.length-1].size)return n[n.length-1].spread;let r=0;for(;r<n.length-1&&n[r+1].size<t;)r++;const s=n[r],i=n[r+1];return s.spread+(t-s.size)*(i.spread-s.spread)/(i.size-s.size)},A$=e=>{const t=e.match(/rgb\((\d+),\s*(\d+),\s*(\d+)\)/),n=e.match(/rgba\((\d+),\s*(\d+),\s*(\d+),\s*([\d.]+)\)/);if(n){const[e,t,r,s,i]=n;return`rgba(${t}, ${r}, ${s}, ${i})`}if(t){const[e,n,r,s]=t;return`rgba(${n}, ${r}, ${s}, 1)`}return"rgba(0, 0, 0, 1)"};const T$=hn.createContext(null);function P$(){const e=hn.useContext(T$);if(!e)throw new Error("useScrollXCarousel must be used within a ScrollXCarousel");return e}function O$({children:e,className:t,...n}){const r=hn.useRef(null),{scrollYProgress:s}=function({container:e,target:t,...n}={}){const r=UD(h$),s=hn.useRef(null),i=hn.useRef(!1),a=hn.useCallback(()=>(s.current=u$((e,{x:t,y:n})=>{r.scrollX.set(t.current),r.scrollXProgress.set(t.progress),r.scrollY.set(n.current),r.scrollYProgress.set(n.progress)},{...n,container:e?.current||void 0,target:t?.current||void 0}),()=>{s.current?.()}),[e,t,JSON.stringify(n.offset)]);return HD(()=>(i.current=!1,p$(e)||p$(t)?void(i.current=!0):a()),[a]),hn.useEffect(()=>i.current?a():void 0,[a]),r}({target:r});return Ot.jsx(T$.Provider,{value:{scrollYProgress:s},children:Ot.jsx("div",{ref:r,className:bn("relative w-screen max-w-full",t),...n,children:e})})}function R$({className:e,...t}){return Ot.jsx("div",{className:bn("sticky overflow-hidden w-full top-0 left-0",e),...t})}function I$({className:e,style:t,xRagnge:n=["-0%","-80%"],...r}){const{scrollYProgress:s}=P$(),i=f$(s,[0,1],n);return Ot.jsx(qW.div,{className:bn("w-fit",e),style:{x:i,...t},...r})}function D$({className:e,style:t,progressStyle:n,...r}){const{scrollYProgress:s}=P$(),i=f$(s,[0,1],[0,1]);return Ot.jsx("div",{className:bn("max-w-screen overflow-hidden",e),...r,children:Ot.jsx(qW.div,{className:bn("origin-left",n),style:{scaleX:i,...t}})})}const L$=hn.createContext({}),F$=()=>{const e=hn.useContext(L$);if(!e)throw new Error("useCardHoverRevealContext must be used within a CardHoverRevealProvider");return e},z$=hn.forwardRef(({className:e,...t},n)=>{const[r,s]=hn.useState(!1);return Ot.jsx(L$.Provider,{value:{isHovered:r,setIsHovered:s},children:Ot.jsx("div",{ref:n,className:bn("relative overflow-hidden",e),onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),...t})})});z$.displayName="CardHoverReveal";const B$=hn.forwardRef(({className:e,initialScale:t=1,hoverScale:n=1.05,...r},s)=>{const{isHovered:i}=F$();return Ot.jsx("div",{ref:s,className:bn("size-full transition-transform duration-300 ",e),style:i?{transform:`scale(${n})`,...r.style}:{transform:`scale(${t})`,...r.style},...r})});B$.displayName="CardHoverRevealMain";const U$=hn.forwardRef(({className:e,...t},n)=>{const{isHovered:r}=F$();return Ot.jsx("div",{ref:n,className:bn("absolute inset-[auto_1.5rem_1.5rem] p-6 backdrop-blur-lg transition-all duration-500 ease-in-out",e),style:r?{translate:"0%",opacity:1,...t.style}:{translate:"0% 120%",opacity:0,...t.style},...t})});U$.displayName="CardHoverRevealContent";const V$=({value:e,suffix:t="",prefix:n=""})=>{const[r,s]=hn.useState(0);return hn.useEffect(()=>{const t=setTimeout(()=>{const t=e/50,n=setInterval(()=>{s(r=>{const s=r+t;return s>=e?(clearInterval(n),e):s})},30)},500);return()=>clearTimeout(t)},[e]),Ot.jsxs("span",{className:"font-bold text-4xl md:text-5xl",children:[n,Math.floor(r).toLocaleString(),t]})},H$=({children:e,icon:t})=>Ot.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-gradient-to-r from-amber-400 via-yellow-400 to-amber-400 text-black font-bold shadow-lg transform hover:scale-105 transition-all duration-300",children:[t&&Ot.jsx(t,{className:"h-4 w-4"}),Ot.jsx("span",{className:"text-sm uppercase tracking-wider",children:e}),Ot.jsx("div",{className:"absolute inset-0 rounded-full bg-gradient-to-r from-transparent via-white to-transparent opacity-30 animate-shimmer"})]});function W$({variant:e=1,className:t=""}){const{scrollYProgress:n}=So(),r=Mo(n,[0,1],[0,-50]),s=Mo(n,[0,.5,1],[1,1,.8]);return 1===e?Ot.jsxs("section",{className:`relative py-20 lg:py-32 overflow-hidden bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 ${t}`,children:[Ot.jsxs("div",{className:"absolute inset-0",children:[Ot.jsx("div",{className:"absolute inset-0 bg-[url('/grid.svg')] opacity-10"}),Ot.jsx("div",{className:"absolute top-0 left-0 w-96 h-96 bg-purple-500 rounded-full blur-3xl opacity-20 animate-pulse"}),Ot.jsx("div",{className:"absolute bottom-0 right-0 w-96 h-96 bg-blue-500 rounded-full blur-3xl opacity-20 animate-pulse delay-1000"})]}),Ot.jsx("div",{className:"absolute inset-0",children:[...Array(20)].map((e,t)=>Ot.jsx("div",{className:"absolute animate-float",style:{left:100*Math.random()+"%",top:100*Math.random()+"%",animationDelay:5*Math.random()+"s",animationDuration:5+10*Math.random()+"s"},children:Ot.jsx(An,{className:"h-4 w-4 text-yellow-400 opacity-60"})},t))}),Ot.jsx(wo.div,{className:"container mx-auto px-4 relative z-10",style:{y:r,opacity:s},children:Ot.jsxs("div",{className:"max-w-7xl mx-auto",children:[Ot.jsx("div",{className:"flex justify-center mb-8",children:Ot.jsx(H$,{icon:Wr,children:"Limited Premium Placement Available"})}),Ot.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 items-center",children:[Ot.jsxs(wo.div,{className:"relative",initial:{opacity:0,x:-50},whileInView:{opacity:1,x:0},transition:{duration:.8},viewport:{once:!0},children:[Ot.jsx("div",{className:"relative rounded-3xl overflow-hidden shadow-2xl transform hover:scale-105 transition-all duration-500",children:Ot.jsx("img",{src:"/your-company-here.png",alt:"Your Company Here - Premium Advertisement",className:"w-full h-auto"})}),Ot.jsx("div",{className:"absolute -top-4 -right-4 z-30",children:Ot.jsx("div",{className:"bg-gradient-to-r from-red-500 to-pink-500 text-white px-4 py-2 rounded-full shadow-lg animate-bounce",children:Ot.jsx("span",{className:"font-bold text-sm",children:"HOT SPOT"})})})]}),Ot.jsxs(wo.div,{initial:{opacity:0,x:50},whileInView:{opacity:1,x:0},transition:{duration:.8,delay:.2},viewport:{once:!0},children:[Ot.jsxs("h2",{className:"text-5xl md:text-6xl font-black mb-6 text-white",children:["Amplify Your Brand's"," ",Ot.jsx("span",{className:"bg-gradient-to-r from-yellow-400 to-orange-400 bg-clip-text text-transparent",children:"Digital Presence"})]}),Ot.jsxs("p",{className:"text-xl text-gray-300 mb-8 leading-relaxed",children:["Secure your premium placement in Florida's most elite digital marketplace. Our high-conversion advertising ecosystem delivers ",Ot.jsx("span",{className:"text-yellow-400 font-bold",children:"unparalleled ROI"})," through strategic positioning, targeted audience segmentation, and data-driven optimization protocols."]}),Ot.jsxs("div",{className:"space-y-4 mb-8",children:[Ot.jsxs("div",{className:"flex items-start gap-3",children:[Ot.jsx(Us,{className:"h-6 w-6 text-green-400 flex-shrink-0 mt-1"}),Ot.jsxs("div",{children:[Ot.jsx("h4",{className:"text-white font-bold mb-1",children:"Laser-Targeted Demographics"}),Ot.jsx("p",{className:"text-gray-400 text-sm",children:"Reach your ideal customer profile with precision-engineered audience targeting delivering 3x industry-standard engagement rates."})]})]}),Ot.jsxs("div",{className:"flex items-start gap-3",children:[Ot.jsx(Dn,{className:"h-6 w-6 text-blue-400 flex-shrink-0 mt-1"}),Ot.jsxs("div",{children:[Ot.jsx("h4",{className:"text-white font-bold mb-1",children:"Performance-Driven Analytics"}),Ot.jsx("p",{className:"text-gray-400 text-sm",children:"Real-time KPI dashboards with conversion tracking, attribution modeling, and predictive performance insights."})]})]}),Ot.jsxs("div",{className:"flex items-start gap-3",children:[Ot.jsx(Rn,{className:"h-6 w-6 text-purple-400 flex-shrink-0 mt-1"}),Ot.jsxs("div",{children:[Ot.jsx("h4",{className:"text-white font-bold mb-1",children:"Brand Safety Guaranteed"}),Ot.jsx("p",{className:"text-gray-400 text-sm",children:"Premium placement alongside curated, brand-safe content with full transparency and viewability metrics."})]})]})]}),Ot.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[Ot.jsxs(Ln,{size:"lg",className:"bg-gradient-to-r from-yellow-400 to-orange-400 hover:from-yellow-500 hover:to-orange-500 text-black font-bold px-8 py-6 text-lg rounded-full shadow-xl transform hover:scale-105 transition-all duration-300",children:[Ot.jsx(Vs,{className:"mr-2 h-5 w-5"}),"Claim Your Premium Spot",Ot.jsx(Ps,{className:"ml-2 h-5 w-5"})]}),Ot.jsx(Ln,{size:"lg",variant:"outline",className:"border-2 border-purple-400 text-purple-400 hover:bg-purple-400 hover:text-black font-bold px-8 py-6 text-lg rounded-full",children:"View Success Stories"})]}),Ot.jsx("div",{className:"mt-8 pt-8 border-t border-gray-700",children:Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx(In,{className:"h-5 w-5 text-yellow-400 fill-yellow-400"}),Ot.jsx(In,{className:"h-5 w-5 text-yellow-400 fill-yellow-400"}),Ot.jsx(In,{className:"h-5 w-5 text-yellow-400 fill-yellow-400"}),Ot.jsx(In,{className:"h-5 w-5 text-yellow-400 fill-yellow-400"}),Ot.jsx(In,{className:"h-5 w-5 text-yellow-400 fill-yellow-400"}),Ot.jsx("span",{className:"text-gray-400 ml-2",children:"5.0 Advertiser Rating"})]}),Ot.jsxs(Tn,{className:"bg-green-500/20 text-green-400 border-green-400",children:[Ot.jsx(sr,{className:"h-3 w-3 mr-1"}),"Top 1% Platform"]})]})})]})]})]})})]}):2===e?Ot.jsxs("section",{className:`relative py-16 lg:py-24 bg-gradient-to-br from-gray-50 via-blue-50 to-purple-50 overflow-hidden ${t}`,children:[Ot.jsx("div",{className:"absolute inset-0 opacity-5",children:Ot.jsx("div",{className:"absolute inset-0",style:{backgroundImage:"repeating-linear-gradient(45deg, transparent, transparent 35px, rgba(0,0,0,0.05) 35px, rgba(0,0,0,0.05) 70px)"}})}),Ot.jsx("div",{className:"container mx-auto px-4 relative z-10",children:Ot.jsxs("div",{className:"max-w-7xl mx-auto",children:[Ot.jsxs(wo.div,{className:"text-center mb-12",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6},viewport:{once:!0},children:[Ot.jsxs(Tn,{className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white px-6 py-3 text-lg mb-4",children:[Ot.jsx(Pn,{className:"h-4 w-4 mr-2"}),"CONVERSION OPTIMIZATION ZONE"]}),Ot.jsxs("h2",{className:"text-4xl md:text-5xl font-black mb-4",children:["Transform"," ",Ot.jsx("span",{className:"bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Browsers into Loyal Customers"})]}),Ot.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Leverage our advanced conversion funnel optimization and behavioral targeting to maximize your customer acquisition efficiency."})]}),Ot.jsx(Sn,{className:"rounded-3xl shadow-2xl overflow-hidden bg-white/95 backdrop-blur-lg border-0",children:Ot.jsxs("div",{className:"grid lg:grid-cols-2 gap-0",children:[Ot.jsxs("div",{className:"p-12 bg-gradient-to-br from-blue-600 to-purple-600 text-white",children:[Ot.jsx("h3",{className:"text-3xl font-bold mb-8",children:"Performance Metrics That Matter"}),Ot.jsxs("div",{className:"space-y-8",children:[Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{children:[Ot.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[Ot.jsx(Hs,{className:"h-5 w-5 text-yellow-400"}),Ot.jsx("span",{className:"text-sm uppercase tracking-wider opacity-80",children:"Average CTR"})]}),Ot.jsx(V$,{value:12.8,suffix:"%"})]}),Ot.jsx("div",{className:"text-green-400 text-sm font-bold",children:"+285% vs Industry"})]}),Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{children:[Ot.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[Ot.jsx(On,{className:"h-5 w-5 text-green-400"}),Ot.jsx("span",{className:"text-sm uppercase tracking-wider opacity-80",children:"Qualified Leads"})]}),Ot.jsx(V$,{value:847,suffix:"/mo"})]}),Ot.jsx("div",{className:"text-green-400 text-sm font-bold",children:"+42% MoM Growth"})]}),Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{children:[Ot.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[Ot.jsx(ar,{className:"h-5 w-5 text-orange-400"}),Ot.jsx("span",{className:"text-sm uppercase tracking-wider opacity-80",children:"ROI Average"})]}),Ot.jsx(V$,{value:426,suffix:"%"})]}),Ot.jsx("div",{className:"text-green-400 text-sm font-bold",children:"Top Performer"})]})]}),Ot.jsxs("div",{className:"mt-10 pt-10 border-t border-white/20",children:[Ot.jsx("h4",{className:"font-bold mb-4",children:"Included Premium Features:"}),Ot.jsxs("ul",{className:"space-y-3",children:[Ot.jsxs("li",{className:"flex items-center gap-2",children:[Ot.jsx("div",{className:"w-5 h-5 rounded-full bg-green-400 flex items-center justify-center",children:Ot.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:Ot.jsx("path",{d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"})})}),Ot.jsx("span",{children:"Multi-touch Attribution Tracking"})]}),Ot.jsxs("li",{className:"flex items-center gap-2",children:[Ot.jsx("div",{className:"w-5 h-5 rounded-full bg-green-400 flex items-center justify-center",children:Ot.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:Ot.jsx("path",{d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"})})}),Ot.jsx("span",{children:"A/B Testing Framework"})]}),Ot.jsxs("li",{className:"flex items-center gap-2",children:[Ot.jsx("div",{className:"w-5 h-5 rounded-full bg-green-400 flex items-center justify-center",children:Ot.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:Ot.jsx("path",{d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"})})}),Ot.jsx("span",{children:"Retargeting Pixel Integration"})]}),Ot.jsxs("li",{className:"flex items-center gap-2",children:[Ot.jsx("div",{className:"w-5 h-5 rounded-full bg-green-400 flex items-center justify-center",children:Ot.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:Ot.jsx("path",{d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"})})}),Ot.jsx("span",{children:"Custom Audience Segmentation"})]})]})]})]}),Ot.jsxs("div",{className:"relative h-full min-h-[600px] flex flex-col justify-center p-12",children:[Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-100/50 to-purple-100/50"}),Ot.jsxs("div",{className:"relative z-10",children:[Ot.jsx("img",{src:"/your-company-here.png",alt:"Your Company Here - Premium Advertisement",className:"w-full h-auto rounded-2xl shadow-2xl mb-8 transform hover:scale-105 transition-all duration-500"}),Ot.jsxs("div",{className:"text-center",children:[Ot.jsxs("p",{className:"text-gray-700 mb-6 text-lg",children:["Join ",Ot.jsx("span",{className:"font-bold text-purple-600",children:"200+ successful brands"})," already maximizing their digital footprint with our premium placement solutions."]}),Ot.jsxs(Ln,{size:"lg",className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-bold px-10 py-6 text-lg rounded-full shadow-xl transform hover:scale-105 transition-all duration-300",children:[Ot.jsx(Yr,{className:"mr-2 h-5 w-5"}),"Reserve Your Premium Space",Ot.jsx(Ps,{className:"ml-2 h-5 w-5"})]}),Ot.jsx("p",{className:"mt-4 text-sm text-gray-500",children:"Limited availability  No setup fees  Cancel anytime"})]})]})]})]})})]})})]}):Ot.jsxs("section",{className:`relative py-16 lg:py-24 bg-gradient-to-br from-emerald-50 via-teal-50 to-cyan-50 overflow-hidden ${t}`,children:[Ot.jsxs("div",{className:"absolute inset-0",children:[Ot.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-emerald-300 rounded-full blur-3xl opacity-20 animate-pulse"}),Ot.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 bg-teal-300 rounded-full blur-3xl opacity-20 animate-pulse delay-1000"})]}),Ot.jsx("div",{className:"container mx-auto px-4 relative z-10",children:Ot.jsxs("div",{className:"max-w-7xl mx-auto",children:[Ot.jsxs(wo.div,{className:"text-center mb-12",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6},viewport:{once:!0},children:[Ot.jsxs(Tn,{className:"bg-gradient-to-r from-emerald-500 to-teal-500 text-white px-6 py-3 text-lg mb-4",children:[Ot.jsx(Wr,{className:"h-4 w-4 mr-2"}),"MARKET DOMINATION PLATFORM"]}),Ot.jsxs("h2",{className:"text-4xl md:text-5xl font-black mb-4",children:["Dominate Your"," ",Ot.jsx("span",{className:"bg-gradient-to-r from-emerald-600 to-teal-600 bg-clip-text text-transparent",children:"Market Vertical"})]}),Ot.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Establish unshakeable brand authority with our enterprise-grade advertising infrastructure and competitive intelligence systems."})]}),Ot.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[Ot.jsx(wo.div,{initial:{opacity:0,x:-30},whileInView:{opacity:1,x:0},transition:{duration:.6},viewport:{once:!0},children:Ot.jsxs(Sn,{className:"h-full rounded-2xl shadow-xl bg-white/90 backdrop-blur-lg p-8",children:[Ot.jsx("h3",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Market Intelligence"}),Ot.jsxs("div",{className:"space-y-4",children:[Ot.jsxs("div",{className:"p-4 bg-emerald-50 rounded-xl hover:bg-emerald-100 transition-colors cursor-pointer",children:[Ot.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[Ot.jsx(Us,{className:"h-5 w-5 text-emerald-600"}),Ot.jsx("h4",{className:"font-bold text-gray-800",children:"Competitor Analysis"})]}),Ot.jsx("p",{className:"text-sm text-gray-600",children:"Real-time competitive landscape monitoring"})]}),Ot.jsxs("div",{className:"p-4 bg-teal-50 rounded-xl hover:bg-teal-100 transition-colors cursor-pointer",children:[Ot.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[Ot.jsx(Dn,{className:"h-5 w-5 text-teal-600"}),Ot.jsx("h4",{className:"font-bold text-gray-800",children:"Trend Forecasting"})]}),Ot.jsx("p",{className:"text-sm text-gray-600",children:"AI-powered market trend predictions"})]}),Ot.jsxs("div",{className:"p-4 bg-cyan-50 rounded-xl hover:bg-cyan-100 transition-colors cursor-pointer",children:[Ot.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[Ot.jsx(Rn,{className:"h-5 w-5 text-cyan-600"}),Ot.jsx("h4",{className:"font-bold text-gray-800",children:"Brand Protection"})]}),Ot.jsx("p",{className:"text-sm text-gray-600",children:"Reputation management & crisis prevention"})]})]})]})}),Ot.jsxs(wo.div,{initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},transition:{duration:.6,delay:.2},viewport:{once:!0},className:"relative",children:[Ot.jsx(Sn,{className:"rounded-2xl shadow-2xl overflow-hidden hover:shadow-3xl transition-all duration-500 transform hover:scale-105",children:Ot.jsx("img",{src:"/your-company-here.png",alt:"Your Company Here - Premium Advertisement",className:"w-full h-full object-cover"})}),Ot.jsx("div",{className:"absolute -bottom-6 left-1/2 transform -translate-x-1/2 z-20",children:Ot.jsxs(Ln,{size:"lg",className:"bg-gradient-to-r from-emerald-500 to-teal-500 hover:from-emerald-600 hover:to-teal-600 text-white font-bold px-8 py-4 rounded-full shadow-xl transform hover:scale-110 transition-all duration-300",children:[Ot.jsx(Vs,{className:"mr-2 h-5 w-5"}),"Launch Your Campaign"]})})]}),Ot.jsx(wo.div,{initial:{opacity:0,x:30},whileInView:{opacity:1,x:0},transition:{duration:.6,delay:.4},viewport:{once:!0},children:Ot.jsxs(Sn,{className:"h-full rounded-2xl shadow-xl bg-white/90 backdrop-blur-lg p-8",children:[Ot.jsx("h3",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Success Metrics"}),Ot.jsxs("div",{className:"mb-6 p-4 bg-gradient-to-r from-emerald-50 to-teal-50 rounded-xl",children:[Ot.jsx("p",{className:"text-sm text-gray-600 mb-2 italic",children:'"The ROI we\'ve seen has been phenomenal. Our brand visibility increased by 400% within the first quarter."'}),Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-r from-emerald-400 to-teal-400"}),Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-xs font-bold text-gray-800",children:"Sarah Johnson"}),Ot.jsx("p",{className:"text-xs text-gray-600",children:"CEO, TechStart Inc."})]})]})]}),Ot.jsxs("div",{className:"space-y-4",children:[Ot.jsxs("div",{className:"flex justify-between items-center",children:[Ot.jsx("span",{className:"text-gray-600",children:"Brand Recall"}),Ot.jsx("span",{className:"font-bold text-emerald-600",children:"+67%"})]}),Ot.jsxs("div",{className:"flex justify-between items-center",children:[Ot.jsx("span",{className:"text-gray-600",children:"Market Share"}),Ot.jsx("span",{className:"font-bold text-teal-600",children:"+23%"})]}),Ot.jsxs("div",{className:"flex justify-between items-center",children:[Ot.jsx("span",{className:"text-gray-600",children:"Customer LTV"}),Ot.jsx("span",{className:"font-bold text-cyan-600",children:"+145%"})]}),Ot.jsxs("div",{className:"flex justify-between items-center",children:[Ot.jsx("span",{className:"text-gray-600",children:"NPS Score"}),Ot.jsx("span",{className:"font-bold text-emerald-600",children:"82"})]})]}),Ot.jsxs("div",{className:"mt-6 p-4 bg-gradient-to-r from-yellow-50 to-orange-50 rounded-xl text-center",children:[Ot.jsx(sr,{className:"h-8 w-8 text-yellow-600 mx-auto mb-2"}),Ot.jsx("p",{className:"text-xs font-bold text-gray-800",children:"CERTIFIED PARTNER"}),Ot.jsx("p",{className:"text-xs text-gray-600",children:"Google Premier  Meta Business"})]})]})})]}),Ot.jsxs(wo.div,{className:"mt-12 p-6 bg-gradient-to-r from-emerald-600 to-teal-600 rounded-2xl text-white text-center",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:.6},viewport:{once:!0},children:[Ot.jsxs("p",{className:"text-lg mb-2",children:[Ot.jsx("span",{className:"font-bold",children:"Limited Time Offer:"})," Get 30% off your first 3 months + Free creative services"]}),Ot.jsx("p",{className:"text-sm opacity-90",children:"Offer expires in 48 hours  Only 3 spots remaining"})]})]})})]})}function $$({variant:e=1,className:t=""}){const{scrollYProgress:n}=So(),r=Mo(n,[0,1],[0,-50]),s=Mo(n,[0,.5,1],[1,1,.8]);return 1===e?Ot.jsxs("section",{className:`relative py-12 lg:py-16 overflow-hidden bg-gradient-to-br from-purple-900 via-fuchsia-900 to-indigo-900 ${t}`,children:[Ot.jsxs("div",{className:"absolute inset-0",children:[Ot.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(ellipse_at_center,rgba(168,85,247,0.15),transparent_70%)]"}),Ot.jsx("div",{className:"absolute top-0 right-0 w-[400px] h-[400px] bg-pink-500 rounded-full blur-3xl opacity-20"})]}),Ot.jsx(wo.div,{className:"container mx-auto px-4 relative z-10",style:{y:r,opacity:s},children:Ot.jsxs("div",{className:"max-w-6xl mx-auto",children:[Ot.jsx("div",{className:"flex justify-center mb-6",children:Ot.jsxs(Tn,{className:"bg-gradient-to-r from-pink-500 to-purple-500 text-white px-5 py-2 text-sm",children:[Ot.jsx(es,{className:"h-4 w-4 mr-2"}),"Featured Creator Spotlight"]})}),Ot.jsxs(wo.div,{className:"relative mb-8",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6},viewport:{once:!0},children:[Ot.jsx("div",{className:"rounded-2xl overflow-hidden shadow-xl",children:Ot.jsx("img",{src:"/content-creators-showcase.jpg",alt:"Content Creators - Showcase Your Content Here",className:"w-full h-auto aspect-video object-cover"})}),Ot.jsx("div",{className:"absolute top-4 right-4",children:Ot.jsxs("div",{className:"bg-gradient-to-r from-orange-500 to-red-500 text-white px-4 py-2 rounded-full shadow-lg text-sm font-bold flex items-center gap-1",children:[Ot.jsx(Pn,{className:"h-3 w-3"}),"TRENDING"]})})]}),Ot.jsxs(wo.div,{className:"max-w-4xl mx-auto",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:.2},viewport:{once:!0},children:[Ot.jsxs("div",{className:"text-center mb-8",children:[Ot.jsxs("h2",{className:"text-3xl md:text-4xl font-bold mb-4 text-white",children:["Creators, Get"," ",Ot.jsx("span",{className:"bg-gradient-to-r from-pink-400 to-orange-400 bg-clip-text text-transparent",children:"Featured"})]}),Ot.jsx("p",{className:"text-lg text-gray-300 mb-4 max-w-2xl mx-auto",children:"Showcase your content to Florida's most engaged local audience. Get discovered by brands and grow your following."})]}),Ot.jsxs("div",{className:"grid md:grid-cols-2 gap-5 mb-8",children:[Ot.jsx("div",{className:"p-6 bg-white/5 backdrop-blur-sm rounded-xl border border-white/10 hover:border-pink-400/30 transition-colors",children:Ot.jsxs("div",{className:"flex items-start gap-4",children:[Ot.jsx("div",{className:"w-12 h-12 rounded-lg bg-gradient-to-br from-pink-500 to-orange-500 flex items-center justify-center flex-shrink-0",children:Ot.jsx(Dn,{className:"h-6 w-6 text-white"})}),Ot.jsxs("div",{children:[Ot.jsx("h4",{className:"text-white font-bold mb-2",children:"Massive Reach"}),Ot.jsx("p",{className:"text-gray-400 text-sm",children:"Get your videos, reels, and posts in front of thousands of engaged Florida locals actively looking for content creators."})]})]})}),Ot.jsx("div",{className:"p-6 bg-white/5 backdrop-blur-sm rounded-xl border border-white/10 hover:border-purple-400/30 transition-colors",children:Ot.jsxs("div",{className:"flex items-start gap-4",children:[Ot.jsx("div",{className:"w-12 h-12 rounded-lg bg-gradient-to-br from-purple-500 to-fuchsia-500 flex items-center justify-center flex-shrink-0",children:Ot.jsx(ar,{className:"h-6 w-6 text-white"})}),Ot.jsxs("div",{children:[Ot.jsx("h4",{className:"text-white font-bold mb-2",children:"Brand Deals"}),Ot.jsx("p",{className:"text-gray-400 text-sm",children:"Connect directly with local businesses for sponsored content, partnerships, and paid collaborations."})]})]})})]}),Ot.jsx("div",{className:"flex justify-center mb-6",children:Ot.jsxs(Ln,{size:"lg",className:"bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 text-white font-bold px-8 py-3 rounded-full shadow-lg transform hover:scale-105 transition-all",children:[Ot.jsx(Ws,{className:"mr-2 h-5 w-5"}),"Submit Your Content",Ot.jsx(Ps,{className:"ml-2 h-5 w-5"})]})}),Ot.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-6 text-sm text-gray-400",children:[Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx(On,{className:"h-4 w-4 text-pink-400"}),Ot.jsx("span",{children:"5,000+ Creators"})]}),Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx($r,{className:"h-4 w-4 text-purple-400"}),Ot.jsx("span",{children:"2M+ Monthly Views"})]})]})]})]})})]}):Ot.jsxs("section",{className:`relative py-12 lg:py-16 bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50 overflow-hidden ${t}`,children:[Ot.jsxs("div",{className:"absolute inset-0",children:[Ot.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(ellipse_at_center,rgba(168,85,247,0.08),transparent_70%)]"}),Ot.jsx("div",{className:"absolute bottom-0 left-0 w-[400px] h-[400px] bg-purple-200 rounded-full blur-3xl opacity-15"})]}),Ot.jsx("div",{className:"container mx-auto px-4 relative z-10",children:Ot.jsxs("div",{className:"max-w-6xl mx-auto",children:[Ot.jsxs(wo.div,{className:"text-center mb-8",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6},viewport:{once:!0},children:[Ot.jsxs(Tn,{className:"bg-gradient-to-r from-purple-500 to-pink-500 text-white px-5 py-2 text-sm mb-4",children:[Ot.jsx(On,{className:"h-4 w-4 mr-2"}),"Join Our Creator Network"]}),Ot.jsxs("h2",{className:"text-3xl md:text-4xl font-bold mb-4",children:["Build Your"," ",Ot.jsx("span",{className:"bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Following"})]}),Ot.jsx("p",{className:"text-lg text-gray-700 max-w-2xl mx-auto",children:"Connect with engaged local audiences and grow your creator business in Florida."})]}),Ot.jsx(wo.div,{className:"relative mb-8",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6},viewport:{once:!0},children:Ot.jsxs("div",{className:"rounded-2xl overflow-hidden shadow-xl",children:[Ot.jsx("img",{src:"/content-creators-showcase.jpg",alt:"Content Creators - Showcase Your Content Here",className:"w-full h-auto aspect-video object-cover"}),Ot.jsx("div",{className:"absolute top-4 left-4",children:Ot.jsx("div",{className:"bg-white/90 backdrop-blur-sm px-4 py-2 rounded-lg shadow-lg",children:Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx($r,{className:"h-4 w-4 text-purple-600"}),Ot.jsx("span",{className:"text-sm font-bold text-gray-800",children:"2.4M Views"})]})})}),Ot.jsx("div",{className:"absolute bottom-4 right-4",children:Ot.jsx("div",{className:"bg-white/90 backdrop-blur-sm px-4 py-2 rounded-lg shadow-lg",children:Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx(Zn,{className:"h-4 w-4 text-pink-600 fill-pink-600"}),Ot.jsx("span",{className:"text-sm font-bold text-gray-800",children:"127K Likes"})]})})})]})}),Ot.jsx(Sn,{className:"rounded-2xl shadow-xl overflow-hidden bg-white border border-gray-200",children:Ot.jsxs("div",{className:"grid lg:grid-cols-2 gap-0",children:[Ot.jsxs("div",{className:"p-8 bg-gradient-to-br from-purple-600 to-pink-600 text-white flex flex-col justify-center",children:[Ot.jsx("h3",{className:"text-2xl font-bold mb-6",children:"Why Creators Join"}),Ot.jsxs("div",{className:"space-y-6 mb-8",children:[Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsx(Dn,{className:"h-6 w-6 text-green-400"}),Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-2xl font-bold",children:"10x"}),Ot.jsx("p",{className:"text-sm opacity-90",children:"Engagement Boost"})]})]}),Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsx(On,{className:"h-6 w-6 text-blue-400"}),Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-2xl font-bold",children:"5,000+"}),Ot.jsx("p",{className:"text-sm opacity-90",children:"Active Creators"})]})]}),Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsx($r,{className:"h-6 w-6 text-yellow-400"}),Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-2xl font-bold",children:"2M+"}),Ot.jsx("p",{className:"text-sm opacity-90",children:"Monthly Reach"})]})]})]}),Ot.jsxs("div",{className:"space-y-2 text-sm",children:[Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-green-400"}),Ot.jsx("span",{children:"Featured placement"})]}),Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-green-400"}),Ot.jsx("span",{children:"Brand connections"})]}),Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-green-400"}),Ot.jsx("span",{children:"Analytics access"})]})]})]}),Ot.jsxs("div",{className:"p-8 bg-gradient-to-br from-gray-50 to-white flex flex-col justify-center",children:[Ot.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-3",children:"Start Sharing Today"}),Ot.jsx("p",{className:"text-gray-700 mb-6",children:"Join thousands of creators building their brands on Florida's top local platform."}),Ot.jsxs(Ln,{size:"lg",className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white font-bold px-8 py-3 rounded-full shadow-lg mb-4",children:[Ot.jsx(Vs,{className:"mr-2 h-5 w-5"}),"Join Now",Ot.jsx(Ps,{className:"ml-2 h-5 w-5"})]}),Ot.jsx("p",{className:"text-sm text-center text-gray-600",children:"Free to join  No setup fees"})]})]})})]})})]})}const G$=hn.forwardRef(({offer:e},t)=>Ot.jsxs(wo.a,{ref:t,href:e.href,className:"relative flex-shrink-0 w-[320px] h-[420px] rounded-3xl overflow-hidden group snap-start cursor-pointer",whileHover:{y:-12,scale:1.02},whileTap:{scale:.98},transition:{type:"spring",stiffness:300,damping:20},style:{perspective:"1000px",transformStyle:"preserve-3d"},children:[Ot.jsx("div",{className:"absolute inset-0 rounded-3xl p-[2px] bg-gradient-to-br from-white/40 via-white/10 to-white/40 group-hover:from-white/60 group-hover:via-white/30 group-hover:to-white/60 transition-all duration-500",children:Ot.jsx("div",{className:"absolute inset-0 rounded-3xl bg-gradient-to-br from-purple-500/20 via-pink-500/10 to-blue-500/20 opacity-0 group-hover:opacity-100 transition-opacity duration-500 blur-xl"})}),Ot.jsxs("div",{className:"absolute inset-0 w-full h-[55%] overflow-hidden rounded-t-3xl",children:[Ot.jsx("img",{src:e.imageSrc,alt:e.imageAlt,className:"w-full h-full object-cover transition-all duration-700 group-hover:scale-110 group-hover:brightness-110"}),Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-transparent to-black/40 group-hover:to-black/30 transition-all duration-500"}),Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/0 via-white/20 to-white/0 opacity-0 group-hover:opacity-100 transition-opacity duration-700 translate-x-[-100%] group-hover:translate-x-[100%] transform",style:{transition:"transform 1.2s cubic-bezier(0.22, 1, 0.36, 1), opacity 0.7s"}})]}),Ot.jsxs("div",{className:"absolute bottom-0 left-0 right-0 h-[45%] p-6 flex flex-col justify-between backdrop-blur-[24px] bg-white/95 dark:bg-gray-900/95 border-t border-white/20",style:{boxShadow:"0 -4px 30px rgba(0, 0, 0, 0.1), inset 0 1px 0 rgba(255, 255, 255, 0.6)"},children:[Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-white/40 via-transparent to-transparent opacity-50 pointer-events-none"}),Ot.jsxs("div",{className:"space-y-2 relative z-10",children:[Ot.jsxs("div",{className:"inline-flex items-center text-xs font-semibold px-3 py-1.5 rounded-full bg-gradient-to-r from-purple-500/20 to-pink-500/20 backdrop-blur-md border border-white/30 text-purple-700 dark:text-purple-300 group-hover:from-purple-500/30 group-hover:to-pink-500/30 transition-all duration-300",children:[Ot.jsx($s,{className:"w-3.5 h-3.5 mr-1.5"}),Ot.jsx("span",{children:e.tag})]}),Ot.jsx("h3",{className:"text-2xl font-bold bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 dark:from-white dark:via-gray-100 dark:to-white bg-clip-text text-transparent leading-tight tracking-tight",children:e.title}),Ot.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 leading-relaxed line-clamp-2",children:e.description})]}),Ot.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200/50 dark:border-gray-700/50 relative z-10",children:[Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsxs("div",{className:"relative",children:[Ot.jsx("img",{src:e.brandLogoSrc,alt:`${e.brandName} logo`,className:"w-10 h-10 rounded-full border-2 border-white/50 shadow-lg transition-transform duration-300 group-hover:scale-110"}),Ot.jsx("div",{className:"absolute inset-0 rounded-full bg-gradient-to-br from-white/20 to-transparent"})]}),Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-xs font-bold text-gray-900 dark:text-white tracking-wide",children:e.brandName}),e.promoCode&&Ot.jsx("p",{className:"text-xs font-semibold text-purple-600 dark:text-purple-400",children:e.promoCode})]})]}),Ot.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center text-white shadow-lg shadow-purple-500/50 transform transition-all duration-500 group-hover:rotate-[-45deg] group-hover:shadow-xl group-hover:shadow-purple-500/70 group-hover:scale-110",style:{boxShadow:"0 4px 20px rgba(168, 85, 247, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.4)"},children:Ot.jsx(mr,{className:"w-5 h-5"})})]})]})]}));G$.displayName="OfferCard";const q$=hn.forwardRef(({offers:e,className:t,...n},r)=>{const s=hn.useRef(null),i=e=>{if(s.current){const{current:t}=s,n=.8*t.clientWidth;t.scrollBy({left:"left"===e?-n:n,behavior:"smooth"})}};return Ot.jsxs("div",{ref:r,className:bn("relative w-full group",t),...n,children:[Ot.jsxs("button",{onClick:()=>i("left"),className:"absolute top-1/2 -translate-y-1/2 -left-6 z-20 w-14 h-14 rounded-full backdrop-blur-[20px] bg-white/90 dark:bg-gray-900/90 border-2 border-white/40 flex items-center justify-center text-gray-900 dark:text-white opacity-0 group-hover:opacity-100 transition-all duration-300 hover:scale-110 hover:shadow-2xl hover:shadow-purple-500/30 disabled:opacity-0 active:scale-95",style:{boxShadow:"0 8px 32px rgba(0, 0, 0, 0.12), inset 0 2px 0 rgba(255, 255, 255, 0.5)"},"aria-label":"Scroll Left",children:[Ot.jsx("div",{className:"absolute inset-0 rounded-full bg-gradient-to-br from-white/50 via-transparent to-transparent opacity-60"}),Ot.jsx(Gs,{className:"w-7 h-7 relative z-10 transition-transform duration-300 group-hover:translate-x-[-2px]"})]}),Ot.jsx("div",{ref:s,className:"flex space-x-8 overflow-x-auto pb-6 px-4 scrollbar-hide snap-x snap-mandatory scroll-smooth",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:e.map(e=>Ot.jsx(G$,{offer:e},e.id))}),Ot.jsxs("button",{onClick:()=>i("right"),className:"absolute top-1/2 -translate-y-1/2 -right-6 z-20 w-14 h-14 rounded-full backdrop-blur-[20px] bg-white/90 dark:bg-gray-900/90 border-2 border-white/40 flex items-center justify-center text-gray-900 dark:text-white opacity-0 group-hover:opacity-100 transition-all duration-300 hover:scale-110 hover:shadow-2xl hover:shadow-purple-500/30 disabled:opacity-0 active:scale-95",style:{boxShadow:"0 8px 32px rgba(0, 0, 0, 0.12), inset 0 2px 0 rgba(255, 255, 255, 0.5)"},"aria-label":"Scroll Right",children:[Ot.jsx("div",{className:"absolute inset-0 rounded-full bg-gradient-to-br from-white/50 via-transparent to-transparent opacity-60"}),Ot.jsx(Ps,{className:"w-7 h-7 relative z-10 transition-transform duration-300 group-hover:translate-x-[2px]"})]})]})});q$.displayName="OfferCarousel";const X$=({children:e,color:t="gold",className:n=""})=>{const r={gold:{background:"linear-gradient(135deg, #f6d365 0%, #fda085 50%, #f093fb 100%)",shadow:"0 4px 20px rgba(246, 211, 101, 0.5), inset 0 1px 0 rgba(255,255,255,0.8), inset 0 -1px 0 rgba(0,0,0,0.2)"},platinum:{background:"linear-gradient(135deg, #e0e7ff 0%, #c7d2fe 50%, #a5b4fc 100%)",shadow:"0 4px 20px rgba(192, 210, 254, 0.5), inset 0 1px 0 rgba(255,255,255,0.9), inset 0 -1px 0 rgba(0,0,0,0.15)"},bronze:{background:"linear-gradient(135deg, #cd7f32 0%, #e89b5c 50%, #fbb574 100%)",shadow:"0 4px 20px rgba(205, 127, 50, 0.5), inset 0 1px 0 rgba(255,255,255,0.7), inset 0 -1px 0 rgba(0,0,0,0.25)"},emerald:{background:"linear-gradient(135deg, #10b981 0%, #34d399 50%, #6ee7b7 100%)",shadow:"0 4px 20px rgba(16, 185, 129, 0.5), inset 0 1px 0 rgba(255,255,255,0.8), inset 0 -1px 0 rgba(0,0,0,0.2)"},ruby:{background:"linear-gradient(135deg, #f43f5e 0%, #fb7185 50%, #fda4af 100%)",shadow:"0 4px 20px rgba(244, 63, 94, 0.5), inset 0 1px 0 rgba(255,255,255,0.8), inset 0 -1px 0 rgba(0,0,0,0.2)"}}[t],s="platinum"===t?"text-gray-900":"text-white";return Ot.jsxs("div",{className:`relative inline-flex items-center gap-2 px-4 py-2 rounded-xl overflow-hidden font-bold uppercase tracking-wide ${s} transform hover:scale-105 transition-all duration-300 ${n}`,style:{background:r.background,boxShadow:r.shadow},children:[Ot.jsx("div",{className:"absolute inset-0 opacity-70",style:{background:"linear-gradient(135deg, rgba(255,255,255,0.9) 0%, transparent 30%, transparent 70%, rgba(255,255,255,0.9) 100%)",backgroundSize:"200% 100%",animation:"shimmer 3s linear infinite"}}),Ot.jsx("div",{className:"absolute inset-0 opacity-30",style:{background:"linear-gradient(180deg, rgba(255,255,255,0.8) 0%, transparent 50%, rgba(0,0,0,0.1) 100%)"}}),Ot.jsx(An,{className:"h-4 w-4 relative z-10"}),Ot.jsx("span",{className:"relative z-10 drop-shadow-md text-sm",children:e})]})};function K$(){const[e,t]=hn.useState("restaurants");return hn.useEffect(()=>(document.body.classList.add("has-video-bg"),()=>document.body.classList.remove("has-video-bg")),[]),Ot.jsxs("div",{className:"min-h-screen relative overflow-hidden",style:{background:"transparent",backgroundColor:"transparent"},children:[Ot.jsx(ho,{intensity:"medium"}),Ot.jsx(go,{}),Ot.jsxs("div",{className:"relative",style:{zIndex:10},children:[Ot.jsxs("section",{className:"relative overflow-hidden min-h-[700px] md:min-h-[850px] lg:min-h-[100vh] bg-gradient-to-br from-gray-900 via-blue-900 to-purple-900",style:{zIndex:1e3},children:[Ot.jsx("div",{className:"absolute inset-0 w-full h-full overflow-hidden",style:{zIndex:0},children:Ot.jsx(Gr,{youtubeUrl:"https://youtu.be/5RVvKpX9eBU",overlayOpacity:.3})}),Ot.jsxs("div",{className:"relative min-h-[700px] md:min-h-[850px] lg:min-h-[100vh]",style:{zIndex:10},children:[Ot.jsxs("div",{className:"absolute left-1/2 top-[38.5%] -translate-x-1/2 -translate-y-1/2",style:{zIndex:100},children:[Ot.jsx("div",{className:"absolute inset-0 animate-pulse",style:{background:"radial-gradient(circle, rgba(251,191,36,0.2) 0%, transparent 70%)",filter:"blur(60px)",transform:"scale(1.3)"}}),Ot.jsx("img",{src:"/logo-big.webp",alt:"Florida Local",className:"w-auto object-contain relative z-10",style:{width:"70vw",height:"70vh",maxWidth:"none",filter:"drop-shadow(0 2px 4px rgba(0,0,0,0.9)) drop-shadow(0 4px 8px rgba(0,0,0,0.8)) drop-shadow(0 0 60px rgba(251,191,36,0.5)) drop-shadow(0 0 100px rgba(251,191,36,0.3)) drop-shadow(0 20px 40px rgba(0,0,0,0.6)) drop-shadow(0 0 120px rgba(255,255,255,0.4))"}}),Ot.jsx("div",{className:"absolute bottom-0 left-1/2 -translate-x-1/2 w-full h-32 opacity-50",style:{background:"radial-gradient(ellipse at center, rgba(251,191,36,0.4) 0%, transparent 70%)",filter:"blur(40px)"}})]}),Ot.jsx("div",{className:"absolute bottom-32 md:bottom-40 lg:bottom-48 left-0 right-0 w-full px-4",style:{zIndex:50},children:Ot.jsx("p",{className:"text-center text-5xl md:text-6xl lg:text-7xl leading-relaxed tracking-wide whitespace-nowrap","data-testid":"text-hero-tagline",children:Ot.jsxs("span",{className:"inline-block relative",children:[Ot.jsx("span",{className:"text-white",style:{filter:"drop-shadow(0 2px 4px rgba(0,0,0,1)) drop-shadow(0 4px 8px rgba(0,0,0,1)) drop-shadow(0 6px 12px rgba(0,0,0,0.8))"},children:"Life is "}),Ot.jsx("span",{className:"font-bold tracking-wider gold-underline text-yellow-400",style:{filter:"drop-shadow(0 2px 4px rgba(0,0,0,1)) drop-shadow(0 4px 8px rgba(0,0,0,1)) drop-shadow(0 6px 12px rgba(0,0,0,0.8)) drop-shadow(0 0 20px rgba(251,191,36,0.8))"},children:"BETTER"}),Ot.jsx("span",{className:"text-white",style:{filter:"drop-shadow(0 2px 4px rgba(0,0,0,1)) drop-shadow(0 4px 8px rgba(0,0,0,1)) drop-shadow(0 6px 12px rgba(0,0,0,0.8))"},children:" when you're "}),Ot.jsx("span",{className:"font-bold tracking-wider gold-underline text-yellow-400",style:{filter:"drop-shadow(0 2px 4px rgba(0,0,0,1)) drop-shadow(0 4px 8px rgba(0,0,0,1)) drop-shadow(0 6px 12px rgba(0,0,0,0.8)) drop-shadow(0 0 20px rgba(251,191,36,0.8))"},children:"LIVING"}),Ot.jsx("span",{className:"text-white",style:{filter:"drop-shadow(0 2px 4px rgba(0,0,0,1)) drop-shadow(0 4px 8px rgba(0,0,0,1)) drop-shadow(0 6px 12px rgba(0,0,0,0.8))"},children:" "}),Ot.jsx("span",{className:"font-bold tracking-wider gold-underline text-yellow-400",style:{filter:"drop-shadow(0 2px 4px rgba(0,0,0,1)) drop-shadow(0 4px 8px rgba(0,0,0,1)) drop-shadow(0 6px 12px rgba(0,0,0,0.8)) drop-shadow(0 0 20px rgba(251,191,36,0.8))"},children:"LIKE"}),Ot.jsx("span",{className:"text-white",style:{filter:"drop-shadow(0 2px 4px rgba(0,0,0,1)) drop-shadow(0 4px 8px rgba(0,0,0,1)) drop-shadow(0 6px 12px rgba(0,0,0,0.8))"},children:" a "}),Ot.jsx("span",{className:"font-bold tracking-wider gold-underline text-yellow-400",style:{filter:"drop-shadow(0 2px 4px rgba(0,0,0,1)) drop-shadow(0 4px 8px rgba(0,0,0,1)) drop-shadow(0 6px 12px rgba(0,0,0,0.8)) drop-shadow(0 0 20px rgba(251,191,36,0.8))"},children:"LOCAL"}),Ot.jsx("span",{className:"text-white",style:{filter:"drop-shadow(0 2px 4px rgba(0,0,0,1)) drop-shadow(0 4px 8px rgba(0,0,0,1)) drop-shadow(0 6px 12px rgba(0,0,0,0.8))"},children:"."})]})})}),Ot.jsx("div",{className:"absolute bottom-2 md:bottom-4 lg:bottom-6 left-0 right-0 w-full",style:{zIndex:30},children:Ot.jsx("div",{className:"mx-auto max-w-7xl px-6 py-4 bg-black/70 backdrop-blur-sm rounded-2xl",children:Ot.jsx("div",{className:"group relative m-auto max-w-7xl px-6",children:Ot.jsxs("div",{className:"flex flex-col items-center md:flex-row",children:[Ot.jsx("div",{className:"md:max-w-44 md:border-r md:border-white/30 md:pr-6",children:Ot.jsx("p",{className:"text-end text-sm text-white font-bold",children:"Powering the best teams"})}),Ot.jsxs("div",{className:"relative py-6 md:w-[calc(100%-11rem)]",children:[Ot.jsxs(zD,{speedOnHover:40,speed:80,gap:112,children:[Ot.jsx("div",{className:"flex",children:Ot.jsx("img",{className:"mx-auto h-5 w-fit brightness-0 invert",src:"https://html.tailus.io/blocks/customers/nvidia.svg",alt:"Nvidia Logo",height:"20",width:"auto"})}),Ot.jsx("div",{className:"flex",children:Ot.jsx("img",{className:"mx-auto h-4 w-fit brightness-0 invert",src:"https://html.tailus.io/blocks/customers/column.svg",alt:"Column Logo",height:"16",width:"auto"})}),Ot.jsx("div",{className:"flex",children:Ot.jsx("img",{className:"mx-auto h-4 w-fit brightness-0 invert",src:"https://html.tailus.io/blocks/customers/github.svg",alt:"GitHub Logo",height:"16",width:"auto"})}),Ot.jsx("div",{className:"flex",children:Ot.jsx("img",{className:"mx-auto h-5 w-fit brightness-0 invert",src:"https://html.tailus.io/blocks/customers/nike.svg",alt:"Nike Logo",height:"20",width:"auto"})}),Ot.jsx("div",{className:"flex",children:Ot.jsx("img",{className:"mx-auto h-5 w-fit brightness-0 invert",src:"https://html.tailus.io/blocks/customers/lemonsqueezy.svg",alt:"Lemon Squeezy Logo",height:"20",width:"auto"})}),Ot.jsx("div",{className:"flex",children:Ot.jsx("img",{className:"mx-auto h-4 w-fit brightness-0 invert",src:"https://html.tailus.io/blocks/customers/laravel.svg",alt:"Laravel Logo",height:"16",width:"auto"})}),Ot.jsx("div",{className:"flex",children:Ot.jsx("img",{className:"mx-auto h-7 w-fit brightness-0 invert",src:"https://html.tailus.io/blocks/customers/lilly.svg",alt:"Lilly Logo",height:"28",width:"auto"})}),Ot.jsx("div",{className:"flex",children:Ot.jsx("img",{className:"mx-auto h-6 w-fit brightness-0 invert",src:"https://html.tailus.io/blocks/customers/openai.svg",alt:"OpenAI Logo",height:"24",width:"auto"})})]}),Ot.jsx(v$,{className:"pointer-events-none absolute left-0 top-0 h-full w-20",direction:"left",blurIntensity:1}),Ot.jsx(v$,{className:"pointer-events-none absolute right-0 top-0 h-full w-20",direction:"right",blurIntensity:1})]})]})})})})]})]}),Ot.jsx("section",{className:"bg-black w-full pt-16 md:pt-20 pb-8",children:Ot.jsx("div",{className:"h-32 md:h-40 flex justify-center items-center",children:Ot.jsx(b$,{texts:["Foodies","Creators","Collaborators","The Florida Local"],font:{fontFamily:"Inter, sans-serif",fontSize:"70px",fontWeight:600},color:"rgb(255,255, 255)",spread:5,density:5,animation:{vaporizeDuration:2,fadeInDuration:1,waitDuration:.5},direction:"left-to-right",alignment:"center",tag:y$.H2})})}),Ot.jsx(W$,{variant:1}),Ot.jsx(O$,{className:"h-auto bg-black pb-16",children:Ot.jsxs(R$,{className:"h-auto place-content-center flex flex-col gap-8 py-8",children:[Ot.jsx("div",{className:"pointer-events-none w-[12vw] h-[103%] absolute inset-[0_auto_0_0] z-10 bg-[linear-gradient(90deg,_rgb(0_0_0)_35%,_transparent)]"}),Ot.jsx("div",{className:"pointer-events-none bg-[linear-gradient(270deg,_rgb(0_0_0)_35%,_transparent)] w-[15vw] h-[103%] absolute inset-[0_0_0_auto] z-10"}),Ot.jsx(I$,{className:"flex-4/5 flex space-x-8 [&>*:first-child]:ml-8",children:[{id:"slide-1",title:"#4Boho Out In the D.R.",description:"Experience the bohemian lifestyle with our featured local creator, sharing the best of Dominican Republic adventures.",services:["travel","lifestyle","photography"],type:"#4EverTourist",imageUrl:"/florida-local/IMG_8619_qri8nygdvbs6m28t7xaxn_3.jpg"},{id:"slide-2",title:"Sarah Insure",description:"Your trusted insurance expert bringing peace of mind and comprehensive coverage solutions to the community.",services:["insurance","consulting","local business"],type:"#ipowermoves",imageUrl:"/florida-local/Sarah_Insure_qri8nxijohqwaga6d_2.png"},{id:"slide-3",title:"Explore With Kenzo & Ben",description:"Join Kenzo & Ben on their exciting adventures exploring the best local spots and hidden gems.",services:["exploration","food","entertainment"],type:"#itsGoodAF",imageUrl:"/florida-local/IMG_9321_1_qri8nze825tgxo7g2fp_4.png"},{id:"slide-4",title:"OASIS Tropic Wear",description:"Discover trendy tropical fashion that brings island vibes to your everyday style.",services:["fashion","tropical wear","local brand"],type:"#effintrendy",imageUrl:"/florida-local/3E6A3388_scaled_qri8nygjylpn3c_7.jpg"},{id:"slide-5",title:"HOW TO BE FEATURED",description:"Want to be featured on The Florida Local? Join our community of creators, foodies, and collaborators.",services:["community","featured","collaboration"],type:"#NeverHuntAlone",imageUrl:"/florida-local/Never_Hunt_Alone_Logo_47.png"}].map(e=>Ot.jsxs(z$,{className:"min-w-[70vw] md:min-w-[38vw] shadow-xl border xl:min-w-[30vw] rounded-xl","data-testid":`card-${e.id}`,children:[Ot.jsx(B$,{children:Ot.jsx("img",{alt:e.title,src:e.imageUrl,className:"size-full aspect-square object-cover","data-testid":`img-${e.id}`})}),Ot.jsxs(U$,{className:"space-y-4 rounded-2xl bg-[rgba(0,0,0,.5)] backdrop-blur-3xl p-4",children:[Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsx("h3",{className:"text-sm text-white font-bold",children:"Type"}),Ot.jsx("div",{className:"flex flex-wrap gap-2",children:Ot.jsx(Tn,{className:"capitalize rounded-full bg-indigo-500","data-testid":`badge-type-${e.id}`,children:e.type})})]}),Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsx("h3",{className:"text-sm text-white font-bold",children:"Services"}),Ot.jsx("div",{className:"flex flex-wrap gap-2",children:e.services.map(t=>Ot.jsx(Tn,{className:"capitalize rounded-full",variant:"secondary","data-testid":`badge-service-${e.id}-${t}`,children:t},t))})]}),Ot.jsxs("div",{className:"space-y-2 mt-2",children:[Ot.jsx("h3",{className:"text-white capitalize font-medium","data-testid":`title-${e.id}`,children:e.title}),Ot.jsx("p",{className:"text-white text-sm","data-testid":`description-${e.id}`,children:e.description})]})]})]},e.id))}),Ot.jsx(D$,{className:"bg-secondary mx-8 h-1 rounded-full overflow-hidden",progressStyle:"size-full bg-indigo-500/70 rounded-full"})]})}),Ot.jsx("section",{className:"py-20 relative overflow-hidden abstract-glass-premium",style:{backgroundImage:"url('/backgrounds/colorful-series-circles-with-orange-blue-colors_889056-245202.jpg')",backgroundSize:"cover",backgroundPosition:"center"},children:Ot.jsx("div",{className:"container mx-auto px-4",children:Ot.jsxs("div",{className:"max-w-6xl mx-auto",children:[Ot.jsx(qr,{className:"rounded-3xl group",children:Ot.jsxs("div",{className:"grid md:grid-cols-2 gap-0",children:[Ot.jsxs("div",{className:"p-12 flex flex-col justify-center holo-content bg-black/40 backdrop-blur-sm",children:[Ot.jsx(X$,{color:"ruby",className:"mb-4",children:"FEATURED LOCAL PAGES"}),Ot.jsx("p",{className:"text-sm text-white mb-3 font-bold",style:{textShadow:"0 4px 8px rgba(0,0,0,1), 0 2px 4px rgba(0,0,0,1)"},children:"By The Locals  March 25, 2024"}),Ot.jsx("h3",{className:"text-5xl font-black mb-6 text-white",style:{textShadow:"0 4px 12px rgba(0,0,0,1), 0 2px 6px rgba(0,0,0,1)"},children:"The Florida Local"}),Ot.jsx("p",{className:"text-xl text-white leading-relaxed font-bold",style:{textShadow:"0 4px 8px rgba(0,0,0,1), 0 2px 4px rgba(0,0,0,1)"},children:"It's ALL ABOUT US. Be Featured #ItsGoodAF | #4EverTourist"})]}),Ot.jsxs("div",{className:"relative h-96 md:h-auto overflow-hidden rounded-r-3xl",children:[Ot.jsx("img",{src:"/florida-local/IMG_5090_1024x574_15.jpg",alt:"Florida Local Lifestyle",className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-110"}),Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-500/20 via-transparent to-pink-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-500"})]})]})}),Ot.jsx("div",{className:"mt-10 text-center",children:Ot.jsx("a",{href:"#",className:"inline-flex items-center gap-2 text-white font-bold text-xl hover:scale-105 transition-transform duration-300 bg-blue-600 px-6 py-3 rounded-full",style:{textShadow:"0 2px 8px rgba(0,0,0,0.8)"},children:"Follow The Orlando Locals On IG!"})})]})})}),Ot.jsx("section",{className:"py-20 relative overflow-hidden abstract-glass-premium",style:{backgroundImage:"url('/backgrounds/208414429-a-close-up-of-a-colorful-abstract-painting-generative-ai-image.jpg')",backgroundSize:"cover",backgroundPosition:"center"},children:Ot.jsx("div",{className:"container mx-auto px-4",children:Ot.jsx("div",{className:"max-w-6xl mx-auto",children:Ot.jsx(qr,{className:"rounded-3xl group",children:Ot.jsxs("div",{className:"grid md:grid-cols-2 gap-0",children:[Ot.jsxs("div",{className:"p-12 flex flex-col justify-center holo-content bg-black/40 backdrop-blur-sm",children:[Ot.jsx(X$,{color:"platinum",className:"mb-4",children:"FEATURED"}),Ot.jsx("p",{className:"text-sm text-white mb-3 font-bold",style:{textShadow:"0 4px 8px rgba(0,0,0,1), 0 2px 4px rgba(0,0,0,1)"},children:"The Locals  July 17, 2023"}),Ot.jsx("h3",{className:"text-5xl font-black mb-6 text-white",style:{textShadow:"0 4px 12px rgba(0,0,0,1), 0 2px 6px rgba(0,0,0,1)"},children:"Florida Lake Life With Kelli & Jason @TheOrlandoLocals"})]}),Ot.jsxs("div",{className:"relative h-96 md:h-auto overflow-hidden rounded-r-3xl",children:[Ot.jsx("img",{src:"/florida-local/Screen_Shot_2023_07_17_at_7_21_79.png",alt:"Florida Lake Life",className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-110"}),Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/20 via-transparent to-teal-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-500"})]})]})})})})}),Ot.jsx("section",{className:"py-16 bg-gradient-to-br from-orange-50 via-blue-50 to-purple-50",children:Ot.jsx("div",{className:"container mx-auto px-4",children:Ot.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[Ot.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-6 bg-gradient-to-r from-orange-600 via-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Discover The Florida Local Lifestyle"}),Ot.jsx("p",{className:"text-xl text-gray-700 mb-8 leading-relaxed",children:"Join thousands of locals exploring the best food, experiences, and hidden gems across Florida. From lake life adventures to foodie hotspots, we're your guide to living like a true local."}),Ot.jsxs("div",{className:"flex flex-wrap gap-4 justify-center items-center",children:[Ot.jsx(Ln,{className:"bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white text-lg px-8 py-6 rounded-full shadow-xl hover:shadow-2xl transition-all duration-300",children:"Join Our Community"}),Ot.jsx(Ln,{variant:"outline",className:"border-2 border-blue-600 text-blue-600 hover:bg-blue-50 text-lg px-8 py-6 rounded-full",children:"Explore Features"})]}),Ot.jsxs("div",{className:"mt-12 grid grid-cols-3 gap-6 max-w-2xl mx-auto",children:[Ot.jsxs("div",{className:"text-center",children:[Ot.jsx("div",{className:"text-3xl font-bold text-orange-600 mb-2",children:"500+"}),Ot.jsx("div",{className:"text-sm text-gray-600",children:"Local Businesses"})]}),Ot.jsxs("div",{className:"text-center",children:[Ot.jsx("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:"10K+"}),Ot.jsx("div",{className:"text-sm text-gray-600",children:"Community Members"})]}),Ot.jsxs("div",{className:"text-center",children:[Ot.jsx("div",{className:"text-3xl font-bold text-purple-600 mb-2",children:"1000+"}),Ot.jsx("div",{className:"text-sm text-gray-600",children:"Featured Posts"})]})]})]})})}),Ot.jsx("section",{className:"py-20 relative overflow-hidden abstract-glass-premium",style:{backgroundImage:"url('/backgrounds/dynamic-abstract-patterns-with-overlapping-circles-spirals-creating-sense-motion_36897-73531.avif')",backgroundSize:"cover",backgroundPosition:"center"},children:Ot.jsx("div",{className:"container mx-auto px-4",children:Ot.jsxs("div",{className:"grid md:grid-cols-3 gap-8 max-w-7xl mx-auto",children:[Ot.jsx(Sn,{className:"rounded-3xl overflow-hidden group hover:-translate-y-2 transition-all duration-500",style:{background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(20px)",boxShadow:"0 15px 50px rgba(0,0,0,0.18), inset 0 2px 0 rgba(255,255,255,1)",border:"2px solid rgba(255, 255, 255, 0.6)"},children:Ot.jsxs("div",{className:"relative h-full min-h-[400px] overflow-hidden",children:[Ot.jsx("img",{src:"/florida-local/bavariandonsta_1024x923_58.jpg",alt:"Ivanhoe Park Brewing",className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-110"}),Ot.jsxs("div",{className:"absolute inset-0 p-8 flex flex-col justify-end",style:{background:"linear-gradient(to top, rgba(0,0,0,0.85), rgba(0,0,0,0.4), transparent)",backdropFilter:"blur(10px)"},children:[Ot.jsx(X$,{color:"gold",className:"mb-4",children:"FEATURED"}),Ot.jsx("p",{className:"text-white font-bold text-xl drop-shadow-lg",children:"Ivanhoe Park Brewing Co."})]})]})}),Ot.jsxs("div",{className:"flex flex-col items-center justify-center",children:[Ot.jsx(Ln,{className:"bg-gradient-to-r from-green-400 to-emerald-500 hover:from-green-500 hover:to-emerald-600 text-white text-2xl font-bold px-12 py-8 rounded-full shadow-2xl hover:shadow-green-500/50 transition-all duration-300 hover:scale-105 mb-12",children:"You've GOTTA Try This!"}),Ot.jsx("div",{className:"w-full",children:Ot.jsxs(qs,{value:e,onValueChange:t,className:"w-full",children:[Ot.jsxs(Xs,{className:"grid w-full grid-cols-3 bg-white rounded-2xl p-2 shadow-lg",children:[Ot.jsx(Ks,{value:"restaurants",className:"rounded-xl",children:"Local Restaurants"}),Ot.jsx(Ks,{value:"reviews",className:"rounded-xl",children:"Foodie Reviews"}),Ot.jsx(Ks,{value:"menus",className:"rounded-xl",children:"Menus"})]}),Ot.jsx(Ys,{value:"restaurants",className:"mt-6 space-y-4",children:["Have You Tried Nona's Urban Pizza Yet?","Paella Tuesday at Turulls","Cilantrillo New Restaurant Opening in Old Town Kissimmee","DON TURULL CAFE, Bonafide Agricultural Company w/ Coffee Straight from PR"].map((e,t)=>Ot.jsx(Sn,{className:"p-4 hover:shadow-lg transition-shadow cursor-pointer rounded-2xl",children:Ot.jsx("p",{className:"font-semibold text-gray-800",children:e})},t))}),Ot.jsx(Ys,{value:"reviews",className:"mt-6 space-y-4",children:Ot.jsx(Sn,{className:"p-4 rounded-2xl",children:Ot.jsx("p",{className:"font-semibold text-gray-800",children:"Foodie reviews coming soon..."})})}),Ot.jsx(Ys,{value:"menus",className:"mt-6 space-y-4",children:Ot.jsx(Sn,{className:"p-4 rounded-2xl",children:Ot.jsx("p",{className:"font-semibold text-gray-800",children:"Menu highlights coming soon..."})})})]})})]}),Ot.jsxs("div",{className:"space-y-4",children:[Ot.jsx(X$,{color:"ruby",children:"Local Foodie Verified"}),Ot.jsx(Sn,{className:"rounded-3xl overflow-hidden shadow-2xl h-64",children:Ot.jsx("img",{src:"/florida-local/elbles_bistello_stacks_2_57.jpg",alt:"Local Food",className:"w-full h-full object-cover"})}),Ot.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold",children:[Ot.jsx(Bn,{className:"h-4 w-4 text-orange-500"}),"ORLANDO |  Top Recommended Dishes"]})]})]})})}),Ot.jsx(W$,{variant:2}),Ot.jsx("section",{className:"py-12 lg:py-20 relative overflow-hidden abstract-glass-premium",style:{backgroundImage:"url('/backgrounds/abstract-composition-glowing-bubbles-dark-background-with-orange-blue-tones_1090747-6434.avif')",backgroundSize:"cover",backgroundPosition:"center"},children:Ot.jsxs("div",{className:"container mx-auto px-4 max-w-6xl",children:[Ot.jsx("h2",{className:"text-4xl font-bold text-center mb-12 bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent drop-shadow-lg",children:"Locals | East Orlando Flavor"}),Ot.jsxs("div",{className:"grid md:grid-cols-2 gap-8 mb-12",children:[Ot.jsxs("div",{className:"bg-white/95 backdrop-blur-sm p-8 rounded-3xl shadow-xl",children:[Ot.jsx("h3",{className:"text-4xl font-bold mb-4 text-gray-900",style:{textShadow:"0 1px 2px rgba(0,0,0,0.1)"},children:"Turull's Boqueria"}),Ot.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[Ot.jsxs("div",{className:"flex",children:[[...Array(4)].map((e,t)=>Ot.jsx(In,{className:"h-5 w-5 fill-yellow-400 text-yellow-400"},t)),Ot.jsx(In,{className:"h-5 w-5 fill-yellow-400 text-yellow-400 opacity-50"})]}),Ot.jsx("span",{className:"text-gray-900 font-semibold",children:"(52 reviews)"})]}),Ot.jsx("p",{className:"text-lg mb-4 text-gray-900 font-semibold",children:"$30 and under  Spanish"}),Ot.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:["Great For Live Music","Lively","Great For Brunch"].map((e,t)=>Ot.jsx(Tn,{className:"bg-purple-100 text-purple-700 px-4 py-2 rounded-full font-semibold",children:e},t))}),Ot.jsx("p",{className:"text-gray-900 leading-relaxed mb-4 text-lg",children:"Diverse menu with authentic Spanish tapas, paella, and more. Perfect for group dining and celebrations."}),Ot.jsx("a",{href:"#",className:"text-purple-700 font-bold hover:underline text-lg inline-flex items-center gap-1 hover:gap-2 transition-all",children:"Read more "})]}),Ot.jsxs(Sn,{className:"p-8 flex flex-col items-center justify-center text-center rounded-3xl shadow-xl bg-white",children:[Ot.jsx("div",{className:"text-6xl mb-4",children:""}),Ot.jsx("h4",{className:"text-2xl font-bold mb-6",children:"Reserve Your Table"}),Ot.jsx(Ln,{className:"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white px-8 py-6 rounded-full text-lg",children:"Click Here to Reserve a Table Today!"})]})]}),Ot.jsxs("div",{className:"mb-8",children:[Ot.jsxs("div",{className:"flex items-center justify-between mb-4 bg-white/95 backdrop-blur-sm p-4 rounded-2xl shadow-lg",children:[Ot.jsx("h4",{className:"text-2xl font-bold text-gray-900",children:"Espaa Cuisine  | Check Our Menu"}),Ot.jsxs("div",{className:"flex gap-2",children:[Ot.jsx(Ln,{variant:"outline",size:"icon",className:"rounded-full bg-white",children:Ot.jsx(Gs,{className:"h-4 w-4"})}),Ot.jsx(Ln,{variant:"outline",size:"icon",className:"rounded-full bg-white",children:Ot.jsx(Ps,{className:"h-4 w-4"})})]})]}),Ot.jsx("div",{className:"grid grid-cols-3 gap-4",children:["/florida-local/Updated_Turulls_Dish_36.png","/florida-local/IMG_1376_2_123.jpg","/florida-local/IMG_1378_124.jpg"].map((e,t)=>Ot.jsx(Sn,{className:"rounded-2xl overflow-hidden h-64 shadow-lg",children:Ot.jsx("img",{src:e,alt:`Spanish cuisine ${t+1}`,className:"w-full h-full object-cover"})},t))})]}),Ot.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[Ot.jsx(Sn,{className:"rounded-2xl overflow-hidden h-64 bg-gray-200",children:Ot.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-900",children:Ot.jsx(Bn,{className:"h-12 w-12"})})}),Ot.jsx("div",{className:"flex items-center justify-center",children:Ot.jsx(Ln,{className:"bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white text-xl px-12 py-8 rounded-full shadow-2xl",children:"Book a Reservation Today"})})]})]})}),Ot.jsxs("section",{className:"relative h-96 overflow-hidden",children:[Ot.jsx("div",{className:"absolute inset-0",children:Ot.jsx("img",{src:"/florida-local/IMG_0655_Optimized_90.jpg",alt:"Every Day is A Vacation",className:"w-full h-full object-cover"})}),Ot.jsx("div",{className:"absolute inset-0 bg-black/40"}),Ot.jsxs("div",{className:"relative z-10 h-full flex flex-col items-center justify-center text-center px-4",children:[Ot.jsx(Tn,{className:"bg-white/20 backdrop-blur-md text-white border-white/40 px-6 py-3 mb-6 text-lg",children:"#ItsGoodAF | You've Gotta Try This!"}),Ot.jsx("h2",{className:"text-6xl font-bold text-white mb-4",children:"Every Day is A Vacation"}),Ot.jsx("p",{className:"text-2xl text-white",children:" #4EverTourist  | #TheOrlando Locals"})]})]}),Ot.jsx("section",{className:"py-12 lg:py-20 bg-gradient-to-br from-blue-600 to-blue-800 text-white",children:Ot.jsx("div",{className:"container mx-auto px-4",children:Ot.jsxs("div",{className:"max-w-5xl mx-auto text-center",children:[Ot.jsx("h2",{className:"text-5xl font-bold mb-8",children:"Looking For a New Career It's Always Healthcare Awareness Month"}),Ot.jsxs(Sn,{className:"bg-white text-gray-900 rounded-3xl shadow-2xl p-8 mb-8",children:[Ot.jsxs("div",{className:"flex items-center justify-between mb-6 flex-wrap gap-4",children:[Ot.jsx("h3",{className:"text-2xl font-bold",children:"Central Florida Insurance School"}),Ot.jsx(Tn,{className:"bg-blue-600 text-white px-4 py-2",children:"DPS Authorized Insurance Ed Provider"})]}),Ot.jsxs("div",{className:"flex gap-6 justify-center text-sm font-semibold flex-wrap",children:[Ot.jsx("a",{href:"#",className:"hover:text-blue-600",children:"Home"}),Ot.jsx("a",{href:"#",className:"hover:text-blue-600",children:"Fast Agent Pre-Licensing"}),Ot.jsx("a",{href:"#",className:"hover:text-blue-600",children:"Continuing Education"}),Ot.jsx("a",{href:"#",className:"hover:text-blue-600",children:"Blog"}),Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx(Qr,{className:"h-4 w-4"}),Ot.jsx("span",{children:"Contact"})]})]})]}),Ot.jsx(Tn,{className:"bg-white/20 backdrop-blur-md text-white mb-6 px-6 py-3",children:"As Seen On..."}),Ot.jsx("div",{className:"grid md:grid-cols-3 gap-6 mb-8",children:["/florida-local/cropped_Central_Florida_Insura_10.png","/florida-local/Screen_Shot_2023_07_26_at_6_32_12.png","/florida-local/Screen_Shot_2023_07_26_at_6_19_13.png"].map((e,t)=>Ot.jsx(Sn,{className:"rounded-2xl overflow-hidden h-48",children:Ot.jsx("img",{src:e,alt:`Insurance school ${t+1}`,className:"w-full h-full object-cover"})},t))}),Ot.jsx(Sn,{className:"bg-white/10 backdrop-blur-md border-white/20 rounded-2xl p-6",children:Ot.jsx("h4",{className:"text-2xl font-bold mb-2",children:"The Insurance School | We Make Pre-Licensing Easy"})})]})})}),Ot.jsxs("section",{className:"py-12 lg:py-20 bg-gradient-to-br from-gray-900 to-blue-900 text-white relative overflow-hidden",children:[Ot.jsx("div",{className:"absolute inset-0 opacity-10 text-4xl font-bold flex flex-wrap",children:Array(20).fill("NEVER HUNT ALONE  Connect | Collaborate").map((e,t)=>Ot.jsx("span",{className:"whitespace-nowrap px-4",children:e},t))}),Ot.jsxs("div",{className:"container mx-auto px-4 relative z-10",children:[Ot.jsx(Tn,{className:"bg-gradient-to-r from-orange-500 to-yellow-500 text-white px-8 py-4 text-xl font-bold mb-8 mx-auto block w-fit rounded-full shadow-2xl",children:"Enroll Today | Insurance Careers Start Here"}),Ot.jsxs("div",{className:"max-w-6xl mx-auto",children:[Ot.jsx("h2",{className:"text-5xl font-bold text-center mb-4",children:"iPOWERMOVES LIVE PODCAST"}),Ot.jsx("p",{className:"text-center text-2xl mb-12 text-white",children:"View Our Next Live Class!"}),Ot.jsxs("div",{className:"grid md:grid-cols-2 gap-12 items-center mb-12",children:[Ot.jsx(Sn,{className:"rounded-3xl overflow-hidden aspect-video bg-black flex items-center justify-center border-4 border-white/10",children:Ot.jsxs("div",{className:"text-center",children:[Ot.jsx(Zs,{className:"h-20 w-20 text-white mx-auto mb-4"}),Ot.jsx("p",{className:"text-white",children:"Video Unavailable"})]})}),Ot.jsxs("div",{className:"text-center",children:[Ot.jsx("h3",{className:"text-3xl font-bold mb-8",children:"Download the iPowerMoves App"}),Ot.jsx("div",{className:"mb-8",children:Ot.jsx("img",{src:"/florida-local/iflash4uscreens_1024x1024_1_19.png",alt:"iPowerMoves App",className:"w-full max-w-md mx-auto mb-6"})}),Ot.jsxs("div",{className:"flex flex-col gap-4 justify-center mb-8",children:[Ot.jsx("img",{src:"/florida-local/App_Store_Download_18.png",alt:"Download on App Store",className:"w-full max-w-xs mx-auto cursor-pointer hover:opacity-80 transition-opacity"}),Ot.jsx("img",{src:"/florida-local/Get_it_On_Google_Play_Mobile_A_17.png",alt:"Get it on Google Play",className:"w-full max-w-xs mx-auto cursor-pointer hover:opacity-80 transition-opacity"})]})]})]}),Ot.jsxs("div",{className:"text-center",children:[Ot.jsx("p",{className:"text-xl mb-6",children:"Subscribe on your favorite platform:"}),Ot.jsxs("div",{className:"flex gap-6 justify-center text-white",children:[Ot.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:Ot.jsx(Js,{className:"h-8 w-8"})}),Ot.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:Ot.jsx("svg",{className:"h-8 w-8",viewBox:"0 0 24 24",fill:"currentColor",children:Ot.jsx("path",{d:"M12.5,2C7,2 2.5,6.5 2.5,12C2.5,17.5 7,22 12.5,22C18,22 22.5,17.5 22.5,12C22.5,6.5 18,2 12.5,2M12.5,20A8,8 0 0,1 4.5,12A8,8 0 0,1 12.5,4A8,8 0 0,1 20.5,12A8,8 0 0,1 12.5,20M13.19,11.5L10.93,10.82L10.93,12.18L13.19,11.5Z"})})}),Ot.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:Ot.jsx("svg",{className:"h-8 w-8",viewBox:"0 0 24 24",fill:"currentColor",children:Ot.jsx("path",{d:"M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20A8,8 0 0,0 20,12A8,8 0 0,0 12,4M9.5,8.5L14.5,12L9.5,15.5V8.5Z"})})})]})]})]})]})]}),Ot.jsx("section",{className:"py-12 lg:py-20 relative overflow-hidden abstract-glass-premium",style:{backgroundImage:"url('/backgrounds/360_F_652778958_COkVj7I3ibeJHDY0fKzEuHj5ptec0AB3.jpg')",backgroundSize:"cover",backgroundPosition:"center"},children:Ot.jsxs("div",{className:"container mx-auto px-4",children:[Ot.jsx("div",{className:"flex justify-center mb-12",children:Ot.jsx(X$,{color:"emerald",className:"text-2xl px-10 py-5",children:"Entrepreneurs, Creators & Collaborators"})}),Ot.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 max-w-7xl mx-auto",children:[{title:"The Insurance School | We Make...",image:"/florida-local/Screen_Shot_2023_07_26_at_6_17_14.png"},{title:"Power Moves | The Mo-Fo's Who are...",image:"/florida-local/how_to_make_a_website_like_onl_11.png"},{title:"Neil Schwabe, MGA With United...",image:"/florida-local/Sample_Logo_6.png"},{title:"Tactical Brewing Newest Released...",image:"/florida-local/banner7_3_1_52.jpg"}].map((e,t)=>Ot.jsxs(Sn,{className:"rounded-3xl overflow-hidden shadow-xl hover:shadow-2xl transition-all duration-300 hover:-translate-y-2 cursor-pointer",children:[Ot.jsx("div",{className:"h-64",children:Ot.jsx("img",{src:e.image,alt:e.title,className:"w-full h-full object-cover"})}),Ot.jsxs(Mn,{className:"p-6",children:[Ot.jsx(Tn,{className:"bg-green-500 text-white mb-3 px-3 py-1 rounded-full text-xs",children:"FEATURED"}),Ot.jsx("h4",{className:"font-bold text-lg",children:e.title})]})]},t))})]})}),Ot.jsx(W$,{variant:3}),Ot.jsx("section",{className:"py-12 lg:py-20 relative overflow-hidden bg-gradient-to-br from-gray-50 to-gray-100",children:Ot.jsxs("div",{className:"container mx-auto px-4",children:[Ot.jsx("div",{className:"max-w-6xl mx-auto mb-12",children:Ot.jsx(Sn,{className:"rounded-3xl shadow-2xl overflow-hidden",children:Ot.jsxs("div",{className:"grid md:grid-cols-2 gap-0",children:[Ot.jsxs("div",{className:"p-12 flex flex-col justify-center",children:[Ot.jsx(Tn,{className:"bg-pink-500 text-white w-fit mb-4 px-4 py-2",children:"#TheCaribbeanLocals"}),Ot.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"The Locals  June 10, 2024"}),Ot.jsx("h3",{className:"text-4xl font-bold mb-6",children:"I  PR | Jan & Lauras Island Excursions"})]}),Ot.jsx("div",{className:"relative h-96 md:h-auto",children:Ot.jsx("img",{src:"/florida-local/IMG_4616_2_96.jpg",alt:"I Love PR",className:"w-full h-full object-cover"})})]})})}),Ot.jsx("div",{className:"flex justify-center mb-8",children:Ot.jsx(X$,{color:"emerald",className:"text-xl px-8 py-4",children:"Power of We | Shop Local #NeverHuntAlone"})}),Ot.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[{title:"Steffieemariee  DR is In",image:"/florida-local/3E6A3770_scaled_qri8nxim47c6uw_64.jpg"},{title:"Island Hopping In Punta Cana DR",image:"/florida-local/3E6A3784_2_scaled_qri8nxim47c6_62.jpg"},{title:"Clear Water Beach on a Charge",image:"/florida-local/3E6A1746_1_scaled_qri8nyggb1dh_66.jpg"},{title:"Caribbean Hotspots, Visit Punta Cana...",image:"/florida-local/IMG_9321_1_qri8nzeahveri4j4nbg_65.png"}].map((e,t)=>Ot.jsxs(Sn,{className:"rounded-3xl overflow-hidden shadow-xl hover:shadow-2xl transition-all duration-300 hover:-translate-y-2 cursor-pointer",children:[Ot.jsx("div",{className:"h-64",children:Ot.jsx("img",{src:e.image,alt:e.title,className:"w-full h-full object-cover"})}),Ot.jsx(Mn,{className:"p-6",children:Ot.jsx("h4",{className:"font-bold text-lg",children:e.title})})]},t))})]})}),Ot.jsx("section",{className:"py-12 lg:py-20 relative overflow-hidden bg-gradient-to-br from-gray-50 to-gray-100",children:Ot.jsxs("div",{className:"container mx-auto px-4 max-w-6xl",children:[Ot.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-2xl mb-8",style:{backdropFilter:"none"},children:[Ot.jsx("h2",{className:"text-5xl font-bold text-center mb-4 text-black",children:"ORLANDO | Your SMILE Is Contagious"}),Ot.jsx("p",{className:"text-2xl text-center mb-0 text-black font-bold",children:"Dr. Mario | THE ORLANDO LOCAL DENTIST"})]}),Ot.jsxs("div",{className:"grid md:grid-cols-2 gap-8 mb-8",children:[Ot.jsxs("div",{children:[Ot.jsx("div",{className:"grid grid-cols-2 gap-4 mb-4",children:["/florida-local/ANTES_YD_768x960_2_r0z7vyga2r3_31.png","/florida-local/999_768x960_2_r0z7w0bygf6dlldx_32.png","/florida-local/34_1_768x960_2_r0z7w19sn97nx7c_33.jpg","/florida-local/JJBHJBJH_768x960_2_r0z7w35h0xa_34.png"].map((e,t)=>Ot.jsx(Sn,{className:"rounded-2xl overflow-hidden h-48",children:Ot.jsx("img",{src:e,alt:`Dental work ${t+1}`,className:"w-full h-full object-cover"})},t))}),Ot.jsx("div",{className:"flex justify-center gap-2",children:[1,2,3,4].map(e=>Ot.jsx("div",{className:"w-2 h-2 rounded-full "+(1===e?"bg-blue-600":"bg-gray-300")},e))})]}),Ot.jsx(Sn,{className:"rounded-2xl overflow-hidden bg-white shadow-2xl",children:Ot.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center p-8",children:[Ot.jsx(Bn,{className:"h-16 w-16 text-blue-600 mb-4"}),Ot.jsx("h4",{className:"font-bold text-xl mb-2 text-black",children:"Sian Dental Studio"}),Ot.jsx("p",{className:"text-center text-black font-bold",children:"508 N Mills Ave B, Orlando FL"})]})})]}),Ot.jsx("div",{className:"text-center",children:Ot.jsx(Ln,{className:"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white text-xl px-12 py-8 rounded-full shadow-2xl",children:"Sian Dental  Schedule a Virtual Visit Here"})})]})}),Ot.jsx("section",{className:"py-12 lg:py-20 relative overflow-hidden bg-gradient-to-br from-gray-50 to-gray-100",children:Ot.jsxs("div",{className:"container mx-auto px-4",children:[Ot.jsx("div",{className:"flex justify-center mb-6",children:Ot.jsx(X$,{color:"emerald",className:"text-xl px-8 py-4",children:"The Florida Local  Featured Collaborators"})}),Ot.jsx("div",{className:"flex justify-center mb-12",children:Ot.jsx(X$,{color:"ruby",className:"text-2xl px-10 py-5",children:"#itsGoodAF | The Local Foodie Experts"})}),Ot.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 max-w-7xl mx-auto mb-12",children:[["/florida-local/IMG_6248_120.jpg","/florida-local/Icafe_Cover_1024x576_134.jpg","/florida-local/IMG_0205_scaled_93.jpg"].map((e,t)=>Ot.jsx(Sn,{className:"rounded-3xl overflow-hidden shadow-xl hover:shadow-2xl transition-all duration-300",children:Ot.jsx("div",{className:"h-64",children:Ot.jsx("img",{src:e,alt:`Foodie ${t+1}`,className:"w-full h-full object-cover"})})},t)),Ot.jsx(Sn,{className:"rounded-3xl overflow-hidden shadow-xl bg-yellow-400 flex items-center justify-center",children:Ot.jsxs("div",{className:"text-center p-8",children:[Ot.jsx(Zn,{className:"h-16 w-16 mx-auto mb-4 text-white"}),Ot.jsx(Ln,{className:"bg-white text-yellow-600 hover:bg-gray-100 rounded-full px-8 py-4 font-bold italic",children:"Read More"})]})})]}),Ot.jsxs("div",{className:"max-w-4xl mx-auto mb-12 p-8 bg-gradient-to-r from-pink-400 to-purple-500 rounded-3xl text-center text-white shadow-2xl",children:[Ot.jsx(Zn,{className:"h-12 w-12 mx-auto mb-4"}),Ot.jsx("h3",{className:"text-3xl font-bold mb-2",children:"Send Us Your Foodie Reels"}),Ot.jsx("p",{className:"text-xl",children:"Featured iFastSocial Subscriptions"})]}),Ot.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 max-w-5xl mx-auto",children:["5 of The Best Spots For Healthy Foodies in Orlando","Happy Birthday! @LexyMonty","Felez Lunes a Todos From Hiram!"].map((e,t)=>Ot.jsxs(Sn,{className:"p-6 rounded-2xl shadow-lg hover:shadow-xl transition-shadow cursor-pointer",children:[Ot.jsx("h4",{className:"font-bold text-lg mb-2",children:e}),Ot.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[Ot.jsx(Qs,{className:"h-4 w-4"}),Ot.jsx("span",{children:"0 Views  0 Comments"})]})]},t))})]})}),Ot.jsx("section",{className:"py-12 lg:py-20 relative overflow-hidden bg-gradient-to-br from-gray-50 to-gray-100",children:Ot.jsx("div",{className:"container mx-auto px-4",children:Ot.jsx("div",{className:"max-w-6xl mx-auto",children:Ot.jsx(Sn,{className:"rounded-3xl shadow-2xl overflow-hidden",children:Ot.jsxs("div",{className:"grid md:grid-cols-2 gap-0",children:[Ot.jsxs("div",{className:"p-12 flex flex-col justify-center",children:[Ot.jsx(Tn,{className:"bg-blue-500 text-white w-fit mb-4 px-4 py-2",children:"#SpaceCoastLocals"}),Ot.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"The Locals  January 8, 2024"}),Ot.jsx("h3",{className:"text-4xl font-bold mb-6",children:"The City Council of Palm Bay Joins the Space Coast Locals"})]}),Ot.jsx("div",{className:"relative h-96 md:h-auto",children:Ot.jsx("img",{src:"/florida-local/252864306_118346030630867_6942_139.jpg",alt:"City Council Palm Bay",className:"w-full h-full object-cover"})})]})})})})}),Ot.jsx("section",{className:"py-12 lg:py-20 relative overflow-hidden bg-gradient-to-br from-gray-50 to-gray-100",children:Ot.jsx("div",{className:"container mx-auto px-4 max-w-6xl",children:Ot.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[Ot.jsxs("div",{className:"space-y-6",children:[Ot.jsxs(Sn,{className:"rounded-3xl overflow-hidden shadow-xl",children:[Ot.jsx("div",{className:"h-64",children:Ot.jsx("img",{src:"/florida-local/IMG_4953_91.jpg",alt:"Pizza Guy",className:"w-full h-full object-cover"})}),Ot.jsxs(Mn,{className:"p-6",children:[Ot.jsx("h4",{className:"font-bold text-xl mb-2",children:"Fly Guy Pizza Guy W/ @EatsWithAlicia"}),Ot.jsx("p",{className:"text-gray-600",children:"Woman enjoying cheesy pizza"})]})]}),Ot.jsxs(Sn,{className:"rounded-3xl overflow-hidden shadow-xl",children:[Ot.jsx("div",{className:"h-64",children:Ot.jsx("img",{src:"/florida-local/IMG_4962_98.jpg",alt:"Tibby's New Orleans",className:"w-full h-full object-cover"})}),Ot.jsxs(Mn,{className:"p-6",children:[Ot.jsx("h4",{className:"font-bold text-xl mb-2",children:"Tibby's New Orleans Kitchen with Baloo Eats"}),Ot.jsx("p",{className:"text-gray-600",children:"Smiling man enjoying a drink"})]})]})]}),Ot.jsxs(Sn,{className:"rounded-3xl shadow-xl p-8",children:[Ot.jsx("h3",{className:"text-3xl font-bold mb-6 bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:"El Cilantrillo Restaurant"}),Ot.jsxs(qs,{defaultValue:"entrees",className:"w-full",children:[Ot.jsxs(Xs,{className:"grid w-full grid-cols-3 bg-gray-100 rounded-2xl p-2",children:[Ot.jsx(Ks,{value:"entrees",className:"rounded-xl",children:"Cilantrillo Entrees"}),Ot.jsx(Ks,{value:"appetizers",className:"rounded-xl",children:"Appetizers"}),Ot.jsx(Ks,{value:"news",className:"rounded-xl",children:"News"})]}),Ot.jsx(Ys,{value:"entrees",className:"mt-6 space-y-4",children:["MAIN ENTREES ","EL PARRADN ","STUFFED MOFONGOS ","AFRENTAOS "].map((e,t)=>Ot.jsx(Sn,{className:"p-4 hover:shadow-lg transition-shadow cursor-pointer rounded-2xl",children:Ot.jsx("p",{className:"font-semibold text-lg",children:e})},t))}),Ot.jsx(Ys,{value:"appetizers",className:"mt-6",children:Ot.jsx(Sn,{className:"p-4 rounded-2xl",children:Ot.jsx("p",{className:"text-gray-600",children:"Appetizers menu coming soon..."})})}),Ot.jsx(Ys,{value:"news",className:"mt-6",children:Ot.jsxs(Sn,{className:"p-4 rounded-2xl",children:[Ot.jsx("p",{className:"font-semibold mb-2",children:"Los pasteles llevan Ketchup?"}),Ot.jsx("p",{className:"text-gray-600",children:"Aydanos a resolver este problema"})]})})]})]})]})})}),Ot.jsx("section",{className:"py-12 lg:py-20 relative overflow-hidden abstract-glass-premium",style:{backgroundImage:"url('/backgrounds/360_F_652778958_COkVj7I3ibeJHDY0fKzEuHj5ptec0AB3.jpg')",backgroundSize:"cover",backgroundPosition:"center"},children:Ot.jsx("div",{className:"container mx-auto px-4",children:Ot.jsx("div",{className:"max-w-6xl mx-auto",children:Ot.jsx(Sn,{className:"rounded-3xl shadow-2xl overflow-hidden",children:Ot.jsxs("div",{className:"grid md:grid-cols-2 gap-0",children:[Ot.jsxs("div",{className:"p-12 flex flex-col justify-center bg-gradient-to-br from-yellow-100 to-pink-100",children:[Ot.jsx(Tn,{className:"bg-purple-500 text-white w-fit mb-4 px-4 py-2",children:"#iPowerMoves"}),Ot.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"The Locals  August 6, 2023"}),Ot.jsx("h3",{className:"text-4xl font-bold mb-6",children:"iFastSocial  Be Featured in Our Endorsement"})]}),Ot.jsx("div",{className:"relative h-96 md:h-auto bg-yellow-400 flex items-center justify-center p-12",children:Ot.jsxs("div",{className:"text-center",children:[Ot.jsx("div",{className:"text-6xl font-bold mb-4",children:"iFastSocial"}),Ot.jsx("p",{className:"text-2xl font-semibold",children:"Connecting Local Businesses"})]})})]})})})})}),Ot.jsx($$,{variant:1}),Ot.jsx("section",{className:"py-12 lg:py-20 relative overflow-hidden abstract-glass-premium",style:{backgroundImage:"url('/backgrounds/dynamic-abstract-patterns-with-overlapping-circles-spirals-creating-sense-motion_36897-73531.avif')",backgroundSize:"cover",backgroundPosition:"center"},children:Ot.jsxs("div",{className:"container mx-auto px-4",children:[Ot.jsx("div",{className:"flex justify-center mb-12",children:Ot.jsx(X$,{color:"platinum",className:"text-2xl px-10 py-5",children:"#iPowerMoves | Entrepreneur Spotlight  The Florida Local "})}),Ot.jsx("div",{className:"bg-white p-6 rounded-3xl shadow-2xl mb-12 max-w-4xl mx-auto",style:{backdropFilter:"none"},children:Ot.jsx("h3",{className:"text-3xl font-bold text-center text-black",children:"The Florida Local Creators & Collaborators"})}),Ot.jsxs("div",{className:"grid md:grid-cols-2 gap-12 max-w-7xl mx-auto",children:[Ot.jsx("div",{className:"space-y-6",children:[{title:"Step into the AM | Orlando Aston Martin Unveils The New DB12",tag:"#TheOrlandoLocals",date:"September 8, 2024"},{title:"Caribbean Hotspots, Visit Punta Cana D.R.  for Your Next Trip!",tag:"#EffinTrendy",date:"June 11, 2024"},{title:"MAIN ENTREE's",tag:"Cilantrillo Entrees",date:"June 11, 2024"},{title:"STUFFED MOFONGOS",tag:"Cilantrillo Entrees",date:"June 11, 2024"}].map((e,t)=>Ot.jsxs(Sn,{className:"p-6 rounded-3xl shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1 cursor-pointer bg-white",children:[Ot.jsx(Tn,{className:"bg-purple-100 text-purple-700 mb-3 px-3 py-1 rounded-full text-xs font-semibold",children:e.tag}),Ot.jsx("h4",{className:"font-bold text-xl mb-2 text-black",children:e.title}),Ot.jsxs("div",{className:"flex items-center gap-4 text-sm text-black font-medium",children:[Ot.jsx("span",{children:e.date}),Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx(Qs,{className:"h-4 w-4"}),Ot.jsx("span",{children:"0 Views"})]})]})]},t))}),Ot.jsxs("div",{className:"space-y-4",children:[Ot.jsx("div",{className:"bg-white p-4 rounded-2xl shadow-xl",style:{backdropFilter:"none"},children:Ot.jsx("h4",{className:"text-2xl font-bold text-black",children:"More Stories"})}),["Step into the AM | Orlando Aston Martin Unveils The New DB12","iFastSocial  Be Featured in Our Endorsement","iPower Moves | Creating Content For the Insurance Industry","Florida Lake Life With Kelli & Jason @TheOrlandoLocals","I  PR | Jan & Lauras Island Excursions","The City Council of Palm Bay Joins the Space Coast Locals"].map((e,t)=>Ot.jsx(Sn,{className:"p-4 rounded-2xl hover:shadow-lg transition-shadow cursor-pointer bg-white shadow-lg",children:Ot.jsx("p",{className:"font-bold text-sm text-black",children:e})},t))]})]})]})}),Ot.jsx($$,{variant:2}),Ot.jsxs("section",{className:"py-12 lg:py-20 relative overflow-hidden abstract-glass-premium",style:{backgroundImage:"url('/backgrounds/geometric-lines-intersecting-with-organic-shapes-hd-4k_964851-163761.jpg')",backgroundSize:"cover",backgroundPosition:"center"},children:[Ot.jsx("div",{className:"absolute inset-0 opacity-[0.02]",style:{backgroundImage:"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='140' height='140' viewBox='0 0 140 140'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='.8'/%3E%3C/svg%3E\")"}}),Ot.jsx("div",{className:"absolute inset-0 opacity-[0.15] bg-[radial-gradient(80%_60%_at_50%_40%,rgba(180,230,255,.3),transparent_70%)]"}),Ot.jsx("div",{className:"container mx-auto px-4 relative z-10",children:Ot.jsxs("div",{className:"max-w-7xl mx-auto",children:[Ot.jsxs("div",{className:"text-center mb-12 bg-white p-8 rounded-3xl shadow-2xl max-w-4xl mx-auto",style:{backdropFilter:"none"},children:[Ot.jsx("h2",{className:"text-5xl lg:text-6xl font-bold mb-4 text-black tracking-tight",children:"Explore By Category"}),Ot.jsx("p",{className:"text-lg text-black font-bold tracking-wide",children:"Discover exclusive local offers and experiences"})]}),Ot.jsx(q$,{offers:[{id:1,imageSrc:"/florida-local/IMG_6248_120.jpg",imageAlt:"ItsGoodAF - Local food experiences",tag:"Food & Dining",title:"#ItsGoodAF",description:"Discover the best local restaurants and food experiences in Florida.",brandLogoSrc:"/i-am-the-logo.png",brandName:"The Florida Local",promoCode:"30 Featured Posts",href:"#"},{id:2,imageSrc:"/florida-local/IMG_9321_1_qri8nzeahveri4j4nbg_65.png",imageAlt:"KidPowerMoves - Family activities",tag:"Family & Kids",title:"#KidPowerMoves",description:"Family-friendly activities and adventures for the young ones.",brandLogoSrc:"/i-am-the-logo.png",brandName:"The Florida Local",promoCode:"1 Featured Post",href:"#"},{id:3,imageSrc:"/florida-local/Never_Hunt_Alone_Logo_47.png",imageAlt:"NeverHuntAlone - Community collaboration",tag:"Community",title:"#NeverHuntAlone",description:"Connect with local entrepreneurs, creators, and collaborators.",brandLogoSrc:"/i-am-the-logo.png",brandName:"The Florida Local",promoCode:"1 Featured Post",href:"#"},{id:4,imageSrc:"/florida-local/how_to_make_a_website_like_onl_11.png",imageAlt:"SideHustles - Entrepreneurship",tag:"Business",title:"#SideHustles",description:"Explore side hustle opportunities and entrepreneurial ventures.",brandLogoSrc:"/i-am-the-logo.png",brandName:"The Florida Local",promoCode:"3 Featured Posts",href:"#"},{id:5,imageSrc:"/florida-local/3E6A3388_scaled_qri8nygjylpn3c_7.jpg",imageAlt:"EffinTrendy - Fashion and lifestyle",tag:"Fashion & Lifestyle",title:"#EffinTrendy",description:"Stay updated with the latest trends in fashion, music, and lifestyle.",brandLogoSrc:"/i-am-the-logo.png",brandName:"The Florida Local",promoCode:"13 Featured Posts",href:"#"}]})]})})]}),Ot.jsx("section",{className:"py-12 lg:py-20 bg-gradient-to-r from-purple-900 to-indigo-900 text-white",children:Ot.jsx("div",{className:"container mx-auto px-4 max-w-5xl",children:Ot.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:["Step into the AM | Orlando Aston Martin Unveils The New DB12","Caribbean Hotspots, Visit Punta Cana D.R.  for Your Next Trip!","MAIN ENTREE's","EL PARRADN","STUFFED MOFONGOS","AFRENTAOS"].map((e,t)=>Ot.jsx(Sn,{className:"bg-white/10 backdrop-blur-md border-white/20 p-4 rounded-2xl hover:bg-white/20 transition-colors cursor-pointer",children:Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsx("p",{className:"font-semibold text-sm",children:e}),Ot.jsxs("div",{className:"flex items-center gap-3 text-xs text-white",children:[Ot.jsx("span",{children:"0 View"}),Ot.jsx("span",{children:"0 Comment"})]})]})},t))})})})]})]})}function Y$(e){return function(e){return"[object Object]"===Object.prototype.toString.call(e)}(e)||Array.isArray(e)}function Z$(e,t){const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;return JSON.stringify(Object.keys(e.breakpoints||{}))===JSON.stringify(Object.keys(t.breakpoints||{}))&&n.every(n=>{const r=e[n],s=t[n];return"function"==typeof r?`${r}`==`${s}`:Y$(r)&&Y$(s)?Z$(r,s):r===s})}function J$(e){return e.concat().sort((e,t)=>e.name>t.name?1:-1).map(e=>e.options)}function Q$(e){return"number"==typeof e}function eG(e){return"string"==typeof e}function tG(e){return"boolean"==typeof e}function nG(e){return"[object Object]"===Object.prototype.toString.call(e)}function rG(e){return Math.abs(e)}function sG(e){return Math.sign(e)}function iG(e,t){return rG(e-t)}function aG(e){return uG(e).map(Number)}function oG(e){return e[lG(e)]}function lG(e){return Math.max(0,e.length-1)}function cG(e,t){return t===lG(e)}function dG(e,t=0){return Array.from(Array(e),(e,n)=>t+n)}function uG(e){return Object.keys(e)}function hG(e,t){return[e,t].reduce((e,t)=>(uG(t).forEach(n=>{const r=e[n],s=t[n],i=nG(r)&&nG(s);e[n]=i?hG(r,s):s}),e),{})}function pG(e,t){return void 0!==t.MouseEvent&&e instanceof t.MouseEvent}function mG(){let e=[];const t={add:function(n,r,s,i={passive:!0}){let a;if("addEventListener"in n)n.addEventListener(r,s,i),a=()=>n.removeEventListener(r,s,i);else{const e=n;e.addListener(s),a=()=>e.removeListener(s)}return e.push(a),t},clear:function(){e=e.filter(e=>e())}};return t}function fG(e,t,n,r){const s=mG(),i=1e3/60;let a=null,o=0,l=0;function c(e){if(!l)return;a||(a=e,n(),n());const s=e-a;for(a=e,o+=s;o>=i;)n(),o-=i;r(o/i),l&&(l=t.requestAnimationFrame(c))}function d(){t.cancelAnimationFrame(l),a=null,o=0,l=0}return{init:function(){s.add(e,"visibilitychange",()=>{e.hidden&&(a=null,o=0)})},destroy:function(){d(),s.clear()},start:function(){l||(l=t.requestAnimationFrame(c))},stop:d,update:n,render:r}}function gG(e=0,t=0){const n=rG(e-t);function r(t){return t<e}function s(e){return e>t}function i(e){return r(e)||s(e)}return{length:n,max:t,min:e,constrain:function(n){return i(n)?r(n)?e:t:n},reachedAny:i,reachedMax:s,reachedMin:r,removeOffset:function(e){return n?e-n*Math.ceil((e-t)/n):e}}}function xG(e,t,n){const{constrain:r}=gG(0,e),s=e+1;let i=a(t);function a(e){return n?rG((s+e)%s):r(e)}function o(){return i}function l(){return xG(e,o(),n)}const c={get:o,set:function(e){return i=a(e),c},add:function(e){return l().set(o()+e)},clone:l};return c}function vG(e,t,n,r,s,i,a,o,l,c,d,u,h,p,m,f,g,x,v){const{cross:y,direction:b}=e,w=["INPUT","SELECT","TEXTAREA"],j={passive:!1},N=mG(),_=mG(),S=gG(50,225).constrain(p.measure(20)),M={mouse:300,touch:400},C={mouse:500,touch:600},E=m?43:25;let k=!1,A=0,T=0,P=!1,O=!1,R=!1,I=!1;function D(e){if(!pG(e,r)&&e.touches.length>=2)return L(e);const t=i.readPoint(e),n=i.readPoint(e,y),a=iG(t,A),l=iG(n,T);if(!O&&!I){if(!e.cancelable)return L(e);if(O=a>l,!O)return L(e)}const d=i.pointerMove(e);a>f&&(R=!0),c.useFriction(.3).useDuration(.75),o.start(),s.add(b(d)),e.preventDefault()}function L(e){const t=d.byDistance(0,!1).index!==u.get(),n=i.pointerUp(e)*(m?C:M)[I?"mouse":"touch"],r=function(e,t){const n=u.add(-1*sG(e)),r=d.byDistance(e,!m).distance;return m||rG(e)<S?r:g&&t?.5*r:d.byIndex(n.get(),0).distance}(b(n),t),s=function(e,t){if(0===e||0===t)return 0;if(rG(e)<=rG(t))return 0;const n=iG(rG(e),rG(t));return rG(n/e)}(n,r),a=E-10*s,o=x+s/50;O=!1,P=!1,_.clear(),c.useDuration(a).useFriction(o),l.distance(r,!m),I=!1,h.emit("pointerUp")}function F(e){R&&(e.stopPropagation(),e.preventDefault(),R=!1)}return{init:function(e){if(!v)return;function o(o){(tG(v)||v(e,o))&&function(e){const o=pG(e,r);if(I=o,R=m&&o&&!e.buttons&&k,k=iG(s.get(),a.get())>=2,o&&0!==e.button)return;if(function(e){const t=e.nodeName||"";return w.includes(t)}(e.target))return;P=!0,i.pointerDown(e),c.useFriction(0).useDuration(0),s.set(a),function(){const e=I?n:t;_.add(e,"touchmove",D,j).add(e,"touchend",L).add(e,"mousemove",D,j).add(e,"mouseup",L)}(),A=i.readPoint(e),T=i.readPoint(e,y),h.emit("pointerDown")}(o)}const l=t;N.add(l,"dragstart",e=>e.preventDefault(),j).add(l,"touchmove",()=>{},j).add(l,"touchend",()=>{}).add(l,"touchstart",o).add(l,"mousedown",o).add(l,"touchcancel",L).add(l,"contextmenu",L).add(l,"click",F,!0)},destroy:function(){N.clear(),_.clear()},pointerDown:function(){return P}}}function yG(e,t){let n,r;function s(e){return e.timeStamp}function i(n,r){const s="client"+("x"===(r||e.scroll)?"X":"Y");return(pG(n,t)?n:n.touches[0])[s]}return{pointerDown:function(e){return n=e,r=e,i(e)},pointerMove:function(e){const t=i(e)-i(r),a=s(e)-s(n)>170;return r=e,a&&(n=e),t},pointerUp:function(e){if(!n||!r)return 0;const t=i(r)-i(n),a=s(e)-s(n),o=s(e)-s(r)>170,l=t/a;return a&&!o&&rG(l)>.1?l:0},readPoint:i}}function bG(e,t,n,r,s,i,a){const o=[e].concat(r);let l,c,d=[],u=!1;function h(e){return s.measureSize(a.measure(e))}return{init:function(s){i&&(c=h(e),d=r.map(h),l=new ResizeObserver(n=>{(tG(i)||i(s,n))&&function(n){for(const i of n){if(u)return;const n=i.target===e,a=r.indexOf(i.target),o=n?c:d[a];if(rG(h(n?e:r[a])-o)>=.5){s.reInit(),t.emit("resize");break}}}(n)}),n.requestAnimationFrame(()=>{o.forEach(e=>l.observe(e))}))},destroy:function(){u=!0,l&&l.disconnect()}}}function wG(e,t,n,r,s){const i=s.measure(10),a=s.measure(50),o=gG(.1,.99);let l=!1;function c(){return!l&&(!!e.reachedAny(n.get())&&!!e.reachedAny(t.get()))}return{shouldConstrain:c,constrain:function(s){if(!c())return;const l=e.reachedMin(t.get())?"min":"max",d=rG(e[l]-t.get()),u=n.get()-t.get(),h=o.constrain(d/a);n.subtract(u*h),!s&&rG(u)<i&&(n.set(e.constrain(n.get())),r.useDuration(25).useBaseFriction())},toggleActive:function(e){l=!e}}}function jG(e,t,n,r){const s=t.min+.1,i=t.max+.1,{reachedMin:a,reachedMax:o}=gG(s,i);return{loop:function(t){if(!function(e){return 1===e?o(n.get()):-1===e&&a(n.get())}(t))return;const s=e*(-1*t);r.forEach(e=>e.add(s))}}}function NG(e,t,n,r,s){const{reachedAny:i,removeOffset:a,constrain:o}=r;function l(e){return e.concat().sort((e,t)=>rG(e)-rG(t))[0]}function c(t,r){const s=[t,t+n,t-n];if(!e)return t;if(!r)return l(s);const i=s.filter(e=>sG(e)===r);return i.length?l(i):oG(s)-n}return{byDistance:function(n,r){const l=s.get()+n,{index:d,distance:u}=function(n){const r=e?a(n):o(n),s=t.map((e,t)=>({diff:c(e-r,0),index:t})).sort((e,t)=>rG(e.diff)-rG(t.diff)),{index:i}=s[0];return{index:i,distance:r}}(l),h=!e&&i(l);return!r||h?{index:d,distance:n}:{index:d,distance:n+c(t[d]-u,0)}},byIndex:function(e,n){return{index:e,distance:c(t[e]-s.get(),n)}},shortcut:c}}function _G(e,t,n,r,s,i,a,o){const l={passive:!0,capture:!0};let c=0;function d(e){"Tab"===e.code&&(c=(new Date).getTime())}return{init:function(u){o&&(i.add(document,"keydown",d,!1),t.forEach((t,d)=>{i.add(t,"focus",t=>{(tG(o)||o(u,t))&&function(t){if((new Date).getTime()-c>10)return;a.emit("slideFocusStart"),e.scrollLeft=0;const i=n.findIndex(e=>e.includes(t));Q$(i)&&(s.useDuration(0),r.index(i,0),a.emit("slideFocus"))}(d)},l)}))}}}function SG(e){let t=e;function n(e){return Q$(e)?e:e.get()}return{get:function(){return t},set:function(e){t=n(e)},add:function(e){t+=n(e)},subtract:function(e){t-=n(e)}}}function MG(e,t){const n="x"===e.scroll?function(e){return`translate3d(${e}px,0px,0px)`}:function(e){return`translate3d(0px,${e}px,0px)`},r=t.style;let s=null,i=!1;return{clear:function(){i||(r.transform="",t.getAttribute("style")||t.removeAttribute("style"))},to:function(t){if(i)return;const a=(o=e.direction(t),Math.round(100*o)/100);var o;a!==s&&(r.transform=n(a),s=a)},toggleActive:function(e){i=!e}}}function CG(e,t,n,r,s,i,a,o,l){const c=aG(s),d=aG(s).reverse(),u=function(){const e=a[0];return m(p(d,e),n,!1)}().concat(function(){const e=t-a[0]-1;return m(p(c,e),-n,!0)}());function h(e,t){return e.reduce((e,t)=>e-s[t],t)}function p(e,t){return e.reduce((e,n)=>h(e,t)>0?e.concat([n]):e,[])}function m(s,a,c){const d=function(e){return i.map((n,s)=>({start:n-r[s]+.5+e,end:n+t-.5+e}))}(a);return s.map(t=>{const r=c?0:-n,s=c?n:0,i=c?"end":"start",a=d[t][i];return{index:t,loopPoint:a,slideLocation:SG(-1),translate:MG(e,l[t]),target:()=>o.get()>a?r:s}})}const f={canLoop:function(){return u.every(({index:e})=>{const n=c.filter(t=>t!==e);return h(n,t)<=.1})},clear:function(){u.forEach(e=>e.translate.clear())},loop:function(){u.forEach(e=>{const{target:t,translate:n,slideLocation:r}=e,s=t();s!==r.get()&&(n.to(s),r.set(s))})},loopPoints:u};return f}function EG(e,t,n){let r,s=!1;return{init:function(i){n&&(r=new MutationObserver(e=>{s||(tG(n)||n(i,e))&&function(e){for(const n of e)if("childList"===n.type){i.reInit(),t.emit("slidesChanged");break}}(e)}),r.observe(e,{childList:!0}))},destroy:function(){r&&r.disconnect(),s=!0}}}function kG(e,t,n,r){const s={};let i,a=null,o=null,l=!1;return{init:function(){i=new IntersectionObserver(e=>{l||(e.forEach(e=>{const n=t.indexOf(e.target);s[n]=e}),a=null,o=null,n.emit("slidesInView"))},{root:e.parentElement,threshold:r}),t.forEach(e=>i.observe(e))},destroy:function(){i&&i.disconnect(),l=!0},get:function(e=!0){if(e&&a)return a;if(!e&&o)return o;const t=function(e){return uG(s).reduce((t,n)=>{const r=parseInt(n),{isIntersecting:i}=s[r];return(e&&i||!e&&!i)&&t.push(r),t},[])}(e);return e&&(a=t),e||(o=t),t}}}function AG(e,t,n,r,s,i,a,o,l){const{startEdge:c,endEdge:d,direction:u}=e,h=Q$(n);const p={groupSlides:function(e){return h?function(e,t){return aG(e).filter(e=>e%t===0).map(n=>e.slice(n,n+t))}(e,n):function(e){return e.length?aG(e).reduce((n,h,p)=>{const m=oG(n)||0,f=0===m,g=h===lG(e),x=s[c]-i[m][c],v=s[c]-i[h][d],y=!r&&f?u(a):0,b=rG(v-(!r&&g?u(o):0)-(x+y));return p&&b>t+l&&n.push(h),g&&n.push(e.length),n},[]).map((t,n,r)=>{const s=Math.max(r[n-1]||0);return e.slice(s,t)}):[]}(e)}};return p}function TG(e,t,n,r,s,i,a){const{align:o,axis:l,direction:c,startIndex:d,loop:u,duration:h,dragFree:p,dragThreshold:m,inViewThreshold:f,slidesToScroll:g,skipSnaps:x,containScroll:v,watchResize:y,watchSlides:b,watchDrag:w,watchFocus:j}=i,N={measure:function(e){const{offsetTop:t,offsetLeft:n,offsetWidth:r,offsetHeight:s}=e;return{top:t,right:n+r,bottom:t+s,left:n,width:r,height:s}}},_=N.measure(t),S=n.map(N.measure),M=function(e,t){const n="rtl"===t,r="y"===e,s=!r&&n?-1:1;return{scroll:r?"y":"x",cross:r?"x":"y",startEdge:r?"top":n?"right":"left",endEdge:r?"bottom":n?"left":"right",measureSize:function(e){const{height:t,width:n}=e;return r?t:n},direction:function(e){return e*s}}}(l,c),C=M.measureSize(_),E=function(e){return{measure:function(t){return e*(t/100)}}}(C),k=function(e,t){const n={start:function(){return 0},center:function(e){return r(e)/2},end:r};function r(e){return t-e}return{measure:function(r,s){return eG(e)?n[e](r):e(t,r,s)}}}(o,C),A=!u&&!!v,T=u||!!v,{slideSizes:P,slideSizesWithGaps:O,startGap:R,endGap:I}=function(e,t,n,r,s,i){const{measureSize:a,startEdge:o,endEdge:l}=e,c=n[0]&&s,d=function(){if(!c)return 0;const e=n[0];return rG(t[o]-e[o])}(),u=function(){if(!c)return 0;const e=i.getComputedStyle(oG(r));return parseFloat(e.getPropertyValue(`margin-${l}`))}(),h=n.map(a),p=n.map((e,t,n)=>{const r=!t,s=cG(n,t);return r?h[t]+d:s?h[t]+u:n[t+1][o]-e[o]}).map(rG);return{slideSizes:h,slideSizesWithGaps:p,startGap:d,endGap:u}}(M,_,S,n,T,s),D=AG(M,C,g,u,_,S,R,I,2),{snaps:L,snapsAligned:F}=function(e,t,n,r,s){const{startEdge:i,endEdge:a}=e,{groupSlides:o}=s,l=o(r).map(e=>oG(e)[a]-e[0][i]).map(rG).map(t.measure),c=r.map(e=>n[i]-e[i]).map(e=>-rG(e)),d=o(c).map(e=>e[0]).map((e,t)=>e+l[t]);return{snaps:c,snapsAligned:d}}(M,k,_,S,D),z=-oG(L)+oG(O),{snapsContained:B,scrollContainLimit:U}=function(e,t,n,r,s){const i=gG(-t+e,0),a=n.map((e,t)=>{const{min:r,max:s}=i,a=i.constrain(e),o=!t,c=cG(n,t);return o?s:c||l(r,a)?r:l(s,a)?s:a}).map(e=>parseFloat(e.toFixed(3))),o=function(){const e=a[0],t=oG(a);return gG(a.lastIndexOf(e),a.indexOf(t)+1)}();function l(e,t){return iG(e,t)<=1}return{snapsContained:function(){if(t<=e+s)return[i.max];if("keepSnaps"===r)return a;const{min:n,max:l}=o;return a.slice(n,l)}(),scrollContainLimit:o}}(C,z,F,v,2),V=A?B:F,{limit:H}=function(e,t,n){const r=t[0];return{limit:gG(n?r-e:oG(t),r)}}(z,V,u),W=xG(lG(V),d,u),$=W.clone(),G=aG(n),q=fG(r,s,()=>(({dragHandler:e,scrollBody:t,scrollBounds:n,options:{loop:r}})=>{r||n.constrain(e.pointerDown()),t.seek()})(oe),e=>(({scrollBody:e,translate:t,location:n,offsetLocation:r,previousLocation:s,scrollLooper:i,slideLooper:a,dragHandler:o,animation:l,eventHandler:c,scrollBounds:d,options:{loop:u}},h)=>{const p=e.settled(),m=!d.shouldConstrain(),f=u?p:p&&m,g=f&&!o.pointerDown();g&&l.stop();const x=n.get()*h+s.get()*(1-h);r.set(x),u&&(i.loop(e.direction()),a.loop()),t.to(r.get()),g&&c.emit("settle"),f||c.emit("scroll")})(oe,e)),X=V[W.get()],K=SG(X),Y=SG(X),Z=SG(X),J=SG(X),Q=function(e,t,n,r,s,i){let a=0,o=0,l=s,c=i,d=e.get(),u=0;function h(e){return l=e,m}function p(e){return c=e,m}const m={direction:function(){return o},duration:function(){return l},velocity:function(){return a},seek:function(){const t=r.get()-e.get();let s=0;return l?(n.set(e),a+=t/l,a*=c,d+=a,e.add(a),s=d-u):(a=0,n.set(r),e.set(r),s=t),o=sG(s),u=d,m},settled:function(){return rG(r.get()-t.get())<.001},useBaseFriction:function(){return p(i)},useBaseDuration:function(){return h(s)},useFriction:p,useDuration:h};return m}(K,Z,Y,J,h,.68),ee=NG(u,V,z,H,J),te=function(e,t,n,r,s,i,a){function o(s){const o=s.distance,l=s.index!==t.get();i.add(o),o&&(r.duration()?e.start():(e.update(),e.render(1),e.update())),l&&(n.set(t.get()),t.set(s.index),a.emit("select"))}return{distance:function(e,t){o(s.byDistance(e,t))},index:function(e,n){const r=t.clone().set(e);o(s.byIndex(r.get(),n))}}}(q,W,$,Q,ee,J,a),ne=function(e){const{max:t,length:n}=e;return{get:function(e){return n?(e-t)/-n:0}}}(H),re=mG(),se=kG(t,n,a,f),{slideRegistry:ie}=function(e,t,n,r,s,i){const{groupSlides:a}=s,{min:o,max:l}=r;return{slideRegistry:function(){const r=a(i),s=!e||"keepSnaps"===t;return 1===n.length?[i]:s?r:r.slice(o,l).map((e,t,n)=>{const r=!t,s=cG(n,t);return r?dG(oG(n[0])+1):s?dG(lG(i)-oG(n)[0]+1,oG(n)[0]):e})}()}}(A,v,V,U,D,G),ae=_G(e,n,ie,te,Q,re,a,j),oe={ownerDocument:r,ownerWindow:s,eventHandler:a,containerRect:_,slideRects:S,animation:q,axis:M,dragHandler:vG(M,e,r,s,J,yG(M,s),K,q,te,Q,ee,W,a,E,p,m,x,.68,w),eventStore:re,percentOfView:E,index:W,indexPrevious:$,limit:H,location:K,offsetLocation:Z,previousLocation:Y,options:i,resizeHandler:bG(t,a,s,n,M,y,N),scrollBody:Q,scrollBounds:wG(H,Z,J,Q,E),scrollLooper:jG(z,H,Z,[K,Z,Y,J]),scrollProgress:ne,scrollSnapList:V.map(ne.get),scrollSnaps:V,scrollTarget:ee,scrollTo:te,slideLooper:CG(M,C,z,P,O,L,V,Z,n),slideFocus:ae,slidesHandler:EG(t,a,b),slidesInView:se,slideIndexes:G,slideRegistry:ie,slidesToScroll:D,target:J,translate:MG(M,t)};return oe}const PG={align:"center",axis:"x",container:null,slides:null,containScroll:"trimSnaps",direction:"ltr",slidesToScroll:1,inViewThreshold:0,breakpoints:{},dragFree:!1,dragThreshold:10,loop:!1,skipSnaps:!1,duration:25,startIndex:0,active:!0,watchDrag:!0,watchResize:!0,watchSlides:!0,watchFocus:!0};function OG(e){function t(e,t){return hG(e,t||{})}return{mergeOptions:t,optionsAtMedia:function(n){const r=n.breakpoints||{},s=uG(r).filter(t=>e.matchMedia(t).matches).map(e=>r[e]).reduce((e,n)=>t(e,n),{});return t(n,s)},optionsMediaQueries:function(t){return t.map(e=>uG(e.breakpoints||{})).reduce((e,t)=>e.concat(t),[]).map(e.matchMedia)}}}function RG(e,t,n){const r=e.ownerDocument,s=r.defaultView,i=OG(s),a=function(e){let t=[];return{init:function(n,r){return t=r.filter(({options:t})=>!1!==e.optionsAtMedia(t).active),t.forEach(t=>t.init(n,e)),r.reduce((e,t)=>Object.assign(e,{[t.name]:t}),{})},destroy:function(){t=t.filter(e=>e.destroy())}}}(i),o=mG(),l=function(){let e,t={};function n(e){return t[e]||[]}const r={init:function(t){e=t},emit:function(t){return n(t).forEach(n=>n(e,t)),r},off:function(e,s){return t[e]=n(e).filter(e=>e!==s),r},on:function(e,s){return t[e]=n(e).concat([s]),r},clear:function(){t={}}};return r}(),{mergeOptions:c,optionsAtMedia:d,optionsMediaQueries:u}=i,{on:h,off:p,emit:m}=l,f=M;let g,x,v,y,b=!1,w=c(PG,RG.globalOptions),j=c(w),N=[];function _(t){const n=TG(e,v,y,r,s,t,l);if(t.loop&&!n.slideLooper.canLoop()){return _(Object.assign({},t,{loop:!1}))}return n}function S(t,n){b||(w=c(w,t),j=d(w),N=n||N,function(){const{container:t,slides:n}=j,r=eG(t)?e.querySelector(t):t;v=r||e.children[0];const s=eG(n)?v.querySelectorAll(n):n;y=[].slice.call(s||v.children)}(),g=_(j),u([w,...N.map(({options:e})=>e)]).forEach(e=>o.add(e,"change",M)),j.active&&(g.translate.to(g.location.get()),g.animation.init(),g.slidesInView.init(),g.slideFocus.init(A),g.eventHandler.init(A),g.resizeHandler.init(A),g.slidesHandler.init(A),g.options.loop&&g.slideLooper.loop(),v.offsetParent&&y.length&&g.dragHandler.init(A),x=a.init(A,N)))}function M(e,t){const n=k();C(),S(c({startIndex:n},e),t),l.emit("reInit")}function C(){g.dragHandler.destroy(),g.eventStore.clear(),g.translate.clear(),g.slideLooper.clear(),g.resizeHandler.destroy(),g.slidesHandler.destroy(),g.slidesInView.destroy(),g.animation.destroy(),a.destroy(),o.clear()}function E(e,t,n){j.active&&!b&&(g.scrollBody.useBaseFriction().useDuration(!0===t?0:j.duration),g.scrollTo.index(e,n||0))}function k(){return g.index.get()}const A={canScrollNext:function(){return g.index.add(1).get()!==k()},canScrollPrev:function(){return g.index.add(-1).get()!==k()},containerNode:function(){return v},internalEngine:function(){return g},destroy:function(){b||(b=!0,o.clear(),C(),l.emit("destroy"),l.clear())},off:p,on:h,emit:m,plugins:function(){return x},previousScrollSnap:function(){return g.indexPrevious.get()},reInit:f,rootNode:function(){return e},scrollNext:function(e){E(g.index.add(1).get(),e,-1)},scrollPrev:function(e){E(g.index.add(-1).get(),e,1)},scrollProgress:function(){return g.scrollProgress.get(g.offsetLocation.get())},scrollSnapList:function(){return g.scrollSnapList},scrollTo:E,selectedScrollSnap:k,slideNodes:function(){return y},slidesInView:function(){return g.slidesInView.get()},slidesNotInView:function(){return g.slidesInView.get(!1)}};return S(t,n),setTimeout(()=>l.emit("init"),0),A}function IG(e={},t=[]){const n=hn.useRef(e),r=hn.useRef(t),[s,i]=hn.useState(),[a,o]=hn.useState(),l=hn.useCallback(()=>{s&&s.reInit(n.current,r.current)},[s]);return hn.useEffect(()=>{Z$(n.current,e)||(n.current=e,l())},[e,l]),hn.useEffect(()=>{(function(e,t){if(e.length!==t.length)return!1;const n=J$(e),r=J$(t);return n.every((e,t)=>Z$(e,r[t]))})(r.current,t)||(r.current=t,l())},[t,l]),hn.useEffect(()=>{if("undefined"!=typeof window&&window.document&&window.document.createElement&&a){RG.globalOptions=IG.globalOptions;const e=RG(a,n.current,r.current);return i(e),()=>e.destroy()}i(void 0)},[a,i]),[o,s]}RG.globalOptions=void 0,IG.globalOptions=void 0;const DG=hn.createContext(null);function LG(){const e=hn.useContext(DG);if(!e)throw new Error("useCarousel must be used within a <Carousel />");return e}const FG=hn.forwardRef(({orientation:e="horizontal",opts:t,setApi:n,plugins:r,className:s,children:i,...a},o)=>{const[l,c]=IG({...t,axis:"horizontal"===e?"x":"y"},r),[d,u]=hn.useState(!1),[h,p]=hn.useState(!1),m=hn.useCallback(e=>{e&&(u(e.canScrollPrev()),p(e.canScrollNext()))},[]),f=hn.useCallback(()=>{c?.scrollPrev()},[c]),g=hn.useCallback(()=>{c?.scrollNext()},[c]),x=hn.useCallback(e=>{"ArrowLeft"===e.key?(e.preventDefault(),f()):"ArrowRight"===e.key&&(e.preventDefault(),g())},[f,g]);return hn.useEffect(()=>{c&&n&&n(c)},[c,n]),hn.useEffect(()=>{if(c)return m(c),c.on("reInit",m),c.on("select",m),()=>{c?.off("select",m)}},[c,m]),Ot.jsx(DG.Provider,{value:{carouselRef:l,api:c,opts:t,orientation:e||("y"===t?.axis?"vertical":"horizontal"),scrollPrev:f,scrollNext:g,canScrollPrev:d,canScrollNext:h},children:Ot.jsx("div",{ref:o,onKeyDownCapture:x,className:bn("relative",s),role:"region","aria-roledescription":"carousel",...a,children:i})})});FG.displayName="Carousel";const zG=hn.forwardRef(({className:e,...t},n)=>{const{carouselRef:r,orientation:s}=LG();return Ot.jsx("div",{ref:r,className:"overflow-hidden",children:Ot.jsx("div",{ref:n,className:bn("flex","horizontal"===s?"-ml-4":"-mt-4 flex-col",e),...t})})});zG.displayName="CarouselContent";const BG=hn.forwardRef(({className:e,...t},n)=>{const{orientation:r}=LG();return Ot.jsx("div",{ref:n,role:"group","aria-roledescription":"slide",className:bn("min-w-0 shrink-0 grow-0 basis-full","horizontal"===r?"pl-4":"pt-4",e),...t})});BG.displayName="CarouselItem";hn.forwardRef(({className:e,variant:t="outline",size:n="icon",...r},s)=>{const{orientation:i,scrollPrev:a,canScrollPrev:o}=LG();return Ot.jsxs(Ln,{ref:s,variant:t,size:n,className:bn("absolute  h-8 w-8 rounded-full","horizontal"===i?"-left-12 top-1/2 -translate-y-1/2":"-top-12 left-1/2 -translate-x-1/2 rotate-90",e),disabled:!o,onClick:a,...r,children:[Ot.jsx(fs,{className:"h-4 w-4"}),Ot.jsx("span",{className:"sr-only",children:"Previous slide"})]})}).displayName="CarouselPrevious";function UG({children:e,duration:t=.5,getEnterDelay:n=e=>.1*e,getExitDelay:r=e=>.1*e+.2,className:s,transition:i={ease:"easeIn"},variants:a,onAnimationComplete:o}){const l={enter:{initial:{rotateX:0},animate:{rotateX:90}},exit:{initial:{rotateX:90},animate:{rotateX:0}}},c=e.split("");return Ot.jsxs("span",{className:s,children:[c.map((e,s)=>Ot.jsxs("span",{className:"relative inline-block [perspective:10000px] [transform-style:preserve-3d] [width:auto]","aria-hidden":"true",children:[Ot.jsx(qW.span,{className:"absolute inline-block [backface-visibility:hidden] [transform-origin:50%_25%]",initial:a?.enter?.initial??l.enter.initial,animate:a?.enter?.animate??l.enter.animate,transition:{...i,duration:t,delay:n(s)},children:" "===e?"":e}),Ot.jsx(qW.span,{className:"absolute inline-block [backface-visibility:hidden] [transform-origin:50%_100%]",initial:a?.exit?.initial??l.exit.initial,animate:a?.exit?.animate??l.exit.animate,transition:{...i,duration:t,delay:r(s)},onAnimationComplete:c.length===s+1?o:void 0,children:" "===e?"":e}),Ot.jsx("span",{className:"invisible",children:" "===e?"":e})]},s)),Ot.jsx("span",{className:"sr-only",children:e})]})}hn.forwardRef(({className:e,variant:t="outline",size:n="icon",...r},s)=>{const{orientation:i,scrollNext:a,canScrollNext:o}=LG();return Ot.jsxs(Ln,{ref:s,variant:t,size:n,className:bn("absolute h-8 w-8 rounded-full","horizontal"===i?"-right-12 top-1/2 -translate-y-1/2":"-bottom-12 left-1/2 -translate-x-1/2 rotate-90",e),disabled:!o,onClick:a,...r,children:[Ot.jsx(mr,{className:"h-4 w-4"}),Ot.jsx("span",{className:"sr-only",children:"Next slide"})]})}).displayName="CarouselNext";const VG=({title:e="Trusted by thousands of businesses worldwide",logoCount:t=15,autoPlay:n=!0,autoPlayInterval:r=1e3,logos:s=null,containerClassName:i="",titleClassName:a="",carouselClassName:o="",logoClassName:l="",itemsPerViewMobile:c=4,itemsPerViewDesktop:d=6,spacing:u="gap-10",padding:h="py-20 lg:py-40",logoContainerWidth:p="w-48",logoContainerHeight:m="h-24",logoImageWidth:f="w-full",logoImageHeight:g="h-full",logoMaxWidth:x="",logoMaxHeight:v=""})=>{const[y,b]=hn.useState(),[w,j]=hn.useState(0);hn.useEffect(()=>{if(!y||!n)return;const e=setTimeout(()=>{y.selectedScrollSnap()+1===y.scrollSnapList().length?(j(0),y.scrollTo(0)):(y.scrollNext(),j(w+1))},r);return()=>clearTimeout(e)},[y,w,n,r]);const N=s||Array.from({length:t},(e,t)=>`https://th.bing.com/th/id/R.4aa108082e7d3cbd55add79f84612aaa?rik=I4dbPhSe%2fbHHSg&riu=http%3a%2f%2fpurepng.com%2fpublic%2fuploads%2flarge%2fpurepng.com-google-logo-2015brandlogobrand-logoiconssymbolslogosgoogle-6815229372333mqrr.png&ehk=ewmaCOvP0Ji4QViEJnxSdlrYUrTSTWhi8nZ9XdyCgAI%3d&risl=&pid=ImgRaw&r=0100x100?text=Logo+${t+1}`),_=`${f} ${g} ${x} ${v}`.trim();return Ot.jsx("div",{className:`w-full ${h} ${i}`,children:Ot.jsx("div",{className:"container mx-auto px-4",children:Ot.jsxs("div",{className:`flex flex-col ${u}`,children:[Ot.jsx("h2",{className:`text-xl sm:text-2xl md:text-3xl lg:text-4xl xl:text-5xl tracking-tighter font-semibold text-left whitespace-nowrap overflow-visible text-slate-900 ${a}`,children:Ot.jsx(UG,{children:e})}),Ot.jsx("div",{children:Ot.jsx(FG,{setApi:b,className:`w-full ${o}`,children:Ot.jsx(zG,{children:N.map((e,t)=>Ot.jsx(BG,{className:`basis-1/${c} lg:basis-1/${d}`,children:Ot.jsx("div",{className:`flex rounded-xl ${p} ${m} items-center justify-center p-6 hover:bg-gradient-to-br hover:from-accent/5 hover:to-primary/5 transition-all duration-500 hover:scale-110 hover:-translate-y-1 border border-transparent hover:border-primary/20 ${l}`,children:Ot.jsx("img",{src:e,alt:`Logo ${t+1}`,className:`${_} object-contain drop-shadow-2xl hover:drop-shadow-[0_0_15px_rgba(0,200,255,0.3)] transition-all duration-500`,style:{imageRendering:"-webkit-optimize-contrast",WebkitFontSmoothing:"antialiased",backfaceVisibility:"hidden",transform:"translateZ(0)",willChange:"transform"}})})},t))})})})]})})})};
/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var HG={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};
/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const WG=((e,t,n,r)=>{const s=hn.forwardRef(({color:n="currentColor",size:s=24,stroke:i=2,title:a,className:o,children:l,...c},d)=>hn.createElement("svg",{ref:d,...HG[e],width:s,height:s,className:["tabler-icon",`tabler-icon-${t}`,o].join(" "),strokeWidth:i,stroke:n,...c},[a&&hn.createElement("title",{key:"svg-title"},a),...r.map(([e,t])=>hn.createElement(e,t)),...Array.isArray(l)?l:[l]]));return s.displayName=`${n}`,s})("outline","arrow-narrow-right","ArrowNarrowRight",[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M15 16l4 -4",key:"svg-1"}],["path",{d:"M15 8l4 4",key:"svg-2"}]]),$G=({slide:e,index:t,current:n,handleSlideClick:r})=>{const s=hn.useRef(null),i=hn.useRef(0),a=hn.useRef(0),o=hn.useRef();hn.useEffect(()=>{const e=()=>{if(!s.current)return;const t=i.current,n=a.current;s.current.style.setProperty("--x",`${t}px`),s.current.style.setProperty("--y",`${n}px`),o.current=requestAnimationFrame(e)};return o.current=requestAnimationFrame(e),()=>{o.current&&cancelAnimationFrame(o.current)}},[]);const{src:l,button:c,title:d}=e;return Ot.jsx("div",{className:"[perspective:1200px] [transform-style:preserve-3d]",children:Ot.jsxs("li",{ref:s,className:"flex flex-1 flex-col items-center justify-center relative text-center text-white opacity-100 transition-all duration-300 ease-in-out w-[70vmin] h-[70vmin] mx-[4vmin] z-10 ",onClick:()=>r(t),onMouseMove:e=>{const t=s.current;if(!t)return;const n=t.getBoundingClientRect();i.current=e.clientX-(n.left+Math.floor(n.width/2)),a.current=e.clientY-(n.top+Math.floor(n.height/2))},onMouseLeave:()=>{i.current=0,a.current=0},style:{transform:n!==t?"scale(0.98) rotateX(8deg)":"scale(1) rotateX(0deg)",transition:"transform 0.5s cubic-bezier(0.4, 0, 0.2, 1)",transformOrigin:"bottom"},children:[Ot.jsxs("div",{className:"absolute top-0 left-0 w-full h-full bg-[#1D1F2F] rounded-[1%] overflow-hidden transition-all duration-150 ease-out",style:{transform:n===t?"translate3d(calc(var(--x) / 30), calc(var(--y) / 30), 0)":"none"},children:[Ot.jsx("img",{className:"absolute inset-0 w-[120%] h-[120%] object-cover opacity-100 transition-opacity duration-600 ease-in-out",style:{opacity:n===t?1:.5},alt:d,src:l,onLoad:e=>{e.currentTarget.style.opacity="1"},loading:"eager",decoding:"sync"}),n===t&&Ot.jsx("div",{className:"absolute inset-0 bg-black/30 transition-all duration-1000"})]}),Ot.jsxs("article",{className:"relative p-[4vmin] transition-opacity duration-1000 ease-in-out "+(n===t?"opacity-100 visible":"opacity-0 invisible"),children:[Ot.jsx("h2",{className:"text-lg md:text-2xl lg:text-4xl font-semibold relative",children:d}),Ot.jsx("div",{className:"flex justify-center",children:Ot.jsx("button",{className:"mt-6 px-4 py-2 w-fit mx-auto sm:text-sm text-black bg-white h-12 border border-transparent text-xs flex justify-center items-center rounded-2xl hover:shadow-lg transition duration-200 shadow-[0px_2px_3px_-1px_rgba(0,0,0,0.1),0px_1px_0px_0px_rgba(25,28,33,0.02),0px_0px_0px_1px_rgba(25,28,33,0.08)]",children:c})})]})]})})},GG=({type:e,title:t,handleClick:n})=>Ot.jsx("button",{className:"w-10 h-10 flex items-center mx-2 justify-center bg-neutral-200 dark:bg-neutral-800 border-3 border-transparent rounded-full focus:border-[#6D64F7] focus:outline-none hover:-translate-y-0.5 active:translate-y-0.5 transition duration-200 "+("previous"===e?"rotate-180":""),title:t,onClick:n,"data-testid":`carousel-control-${e}`,children:Ot.jsx(WG,{className:"text-neutral-600 dark:text-neutral-200"})});
/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */function qG({slides:e,autoRotate:t=!0,rotateInterval:n=5e3,direction:r="forward"}){const[s,i]=hn.useState(0);hn.useEffect(()=>{if(!t)return;const e=setInterval(()=>{"forward"===r?o():a()},n);return()=>clearInterval(e)},[s,t,n,r]);const a=()=>{const t=s-1;i(t<0?e.length-1:t)},o=()=>{const t=s+1;i(t===e.length?0:t)},l=e=>{s!==e&&i(e)},c=hn.useId();return Ot.jsxs("div",{className:"relative w-[70vmin] h-[70vmin] mx-auto","aria-labelledby":`carousel-heading-${c}`,"data-testid":"rotating-carousel-container",children:[Ot.jsx("ul",{className:"absolute flex mx-[-4vmin] transition-transform duration-1000 ease-in-out",style:{transform:`translateX(-${s*(100/e.length)}%)`},children:e.map((e,t)=>Ot.jsx($G,{slide:e,index:t,current:s,handleSlideClick:l},t))}),Ot.jsxs("div",{className:"absolute flex justify-center w-full top-[calc(100%+1rem)]",children:[Ot.jsx(GG,{type:"previous",title:"Go to previous slide",handleClick:a}),Ot.jsx(GG,{type:"next",title:"Go to next slide",handleClick:o})]})]})}const XG=({slot:e,translate:t})=>Ot.jsx(wo.div,{style:{x:t},whileHover:{y:-20},className:"group/slot h-96 w-[30rem] relative flex-shrink-0",children:Ot.jsx("div",{className:"block group-hover/slot:shadow-2xl relative h-full w-full rounded-2xl overflow-hidden",children:Ot.jsx("img",{src:"/your-company-here.png",alt:"Premium Advertisement Space",className:"w-full h-full object-cover"})})},e.id),KG=()=>Ot.jsxs("div",{className:"max-w-7xl relative mx-auto py-20 md:py-32 px-4 w-full left-0 top-0",children:[Ot.jsxs("h1",{className:"text-2xl md:text-7xl font-bold bg-gradient-to-r from-white via-[var(--fl-sunset-gold)] to-white bg-clip-text text-transparent",children:["Florida's Elite ",Ot.jsx("br",{})," Entrepreneurs & Businesses"]}),Ot.jsx("p",{className:"max-w-2xl text-base md:text-xl mt-8 text-gray-200 dark:text-neutral-200",children:"Discover the visionaries and innovators shaping Florida's business landscape. From established entrepreneurs to rising stars, explore the stories behind the Sunshine State's most dynamic businesses."})]});function YG(){const e=hn.useRef(null),{scrollYProgress:t}=So({target:e,offset:["start start","end start"]}),n={stiffness:300,damping:30,bounce:100},r=Co(Mo(t,[0,1],[0,1e3]),n),s=Co(Mo(t,[0,1],[0,-1e3]),n),i=Co(Mo(t,[0,.2],[15,0]),n),a=Co(Mo(t,[0,.2],[.1,1]),n),o=Co(Mo(t,[0,.2],[20,0]),n),l=Co(Mo(t,[0,.2],[-700,500]),n),{data:c=[]}=za({queryKey:["/api/premium-slots"]}),d=Array.from({length:27},(e,t)=>({id:`slot-${t+1}`,companyName:"Your Company Here",tagline:"Advertise to thousands of local customers",imageUrl:"",isPremium:!1})),u=c.length>0?c:d,h=u.slice(0,9),p=u.slice(9,18),m=u.slice(18,27);return Ot.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-black via-gray-900 to-black",children:[Ot.jsxs("div",{ref:e,className:"h-[280vh] py-20 overflow-hidden antialiased relative flex flex-col self-auto [perspective:1000px] [transform-style:preserve-3d]","data-testid":"registry-parallax-container",children:[Ot.jsx(KG,{}),Ot.jsxs(wo.div,{style:{rotateX:i,rotateZ:o,translateY:l,opacity:a},className:"",children:[Ot.jsx(wo.div,{className:"flex flex-row-reverse space-x-reverse space-x-20 mb-20",children:h.map(e=>Ot.jsx(XG,{slot:e,translate:r},e.id))}),Ot.jsx(wo.div,{className:"flex flex-row mb-20 space-x-20",children:p.map(e=>Ot.jsx(XG,{slot:e,translate:s},e.id))}),Ot.jsx(wo.div,{className:"flex flex-row-reverse space-x-reverse space-x-20",children:m.map(e=>Ot.jsx(XG,{slot:e,translate:r},e.id))})]})]}),Ot.jsxs("div",{className:"py-16 bg-gradient-to-b from-transparent via-[var(--fl-teal-lagoon)]/5 to-transparent","data-testid":"carousel-owners-section",children:[Ot.jsxs("div",{className:"text-center mb-12",children:[Ot.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-4 bg-gradient-to-r from-[var(--fl-teal-lagoon)] to-[var(--fl-bronze)] bg-clip-text text-transparent",children:"Meet the Visionaries"}),Ot.jsx("p",{className:"text-muted-foreground text-lg max-w-2xl mx-auto",children:"Florida's most innovative business leaders and entrepreneurs"})]}),Ot.jsx(qG,{slides:[{title:"Maria Rodriguez",button:"View Profile",src:"https://images.unsplash.com/photo-1573496359142-b8d87734a5a2?w=600&h=600&fit=crop"},{title:"James Patterson",button:"View Profile",src:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=600&h=600&fit=crop"},{title:"Sarah Chen",button:"View Profile",src:"https://images.unsplash.com/photo-1580489944761-15a19d654956?w=600&h=600&fit=crop"},{title:"Michael Thompson",button:"View Profile",src:"https://images.unsplash.com/photo-1556157382-97eda2d62296?w=600&h=600&fit=crop"},{title:"Elena Vasquez",button:"View Profile",src:"https://images.unsplash.com/photo-1594744803329-e58b31de8bf5?w=600&h=600&fit=crop"},{title:"David Martinez",button:"View Profile",src:"https://images.unsplash.com/photo-1500648767791-00dcc994a43e?w=600&h=600&fit=crop"},{title:"Rachel Kim",button:"View Profile",src:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=600&h=600&fit=crop"},{title:"Anthony Blake",button:"View Profile",src:"https://images.unsplash.com/photo-1519085360753-af0119f7cbe7?w=600&h=600&fit=crop"}],autoRotate:!0,rotateInterval:5e3,direction:"forward"})]}),Ot.jsxs("div",{className:"py-16 bg-gradient-to-b from-transparent via-[var(--fl-sunset-gold)]/5 to-[var(--fl-bronze)]/5","data-testid":"carousel-showcases-section",children:[Ot.jsxs("div",{className:"text-center mb-12",children:[Ot.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-4 bg-gradient-to-r from-[var(--fl-sunset-gold)] to-[var(--fl-bronze)] bg-clip-text text-transparent",children:"Elite Business Showcase"}),Ot.jsx("p",{className:"text-muted-foreground text-lg max-w-2xl mx-auto",children:"Discover exceptional businesses making their mark in Florida"})]}),Ot.jsx(qG,{slides:[{title:"Sunshine Caf",button:"Explore Business",src:"https://images.unsplash.com/photo-1554118811-1e0d58224f24?w=600&h=600&fit=crop"},{title:"Martinez Construction Co.",button:"Explore Business",src:"https://images.unsplash.com/photo-1500648767791-00dcc994a43e?w=600&h=600&fit=crop"},{title:"Ocean View Properties",button:"Explore Business",src:"https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?w=600&h=600&fit=crop"},{title:"Digital Marketing Pro",button:"Explore Business",src:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=600&h=600&fit=crop"},{title:"Luxury Spa & Retreat",button:"Explore Business",src:"https://images.unsplash.com/photo-1540555700478-4be289fbecef?w=600&h=600&fit=crop"},{title:"Elite Fitness Center",button:"Explore Business",src:"https://images.unsplash.com/photo-1534438327276-14e5300c3a48?w=600&h=600&fit=crop"},{title:"Tropical Fitness Studio",button:"Explore Business",src:"https://images.unsplash.com/photo-1534438327276-14e5300c3a48?w=600&h=600&fit=crop"},{title:"Artisan Coffee Roasters",button:"Explore Business",src:"https://images.unsplash.com/photo-1509440159596-0249088772ff?w=600&h=600&fit=crop"}],autoRotate:!0,rotateInterval:5e3,direction:"reverse"})]}),Ot.jsx("div",{className:"relative mt-20",children:Ot.jsx(VG,{title:"Empowering Local Commerce",autoPlay:!0,autoPlayInterval:2e3,itemsPerViewMobile:3,itemsPerViewDesktop:5,padding:"py-16 lg:py-20",containerClassName:"bg-gradient-to-b from-transparent via-[var(--fl-bronze)]/3 to-background/50 border-t border-[var(--fl-bronze)]/20",titleClassName:"bg-gradient-to-r from-[var(--fl-sunset-gold)] via-[var(--fl-bronze)] to-[var(--fl-teal-lagoon)] bg-clip-text text-transparent text-center",logoContainerWidth:"w-40",logoContainerHeight:"h-20",logoImageWidth:"w-auto",logoImageHeight:"h-12"})})]})}const ZG=[{id:"social-post",name:"Social Media Post",description:"Engaging social media content for your business",category:"social",icon:Ot.jsx(Or,{className:"h-5 w-5"}),prompt:"Create an engaging social media post about",tone:"friendly",length:"short"},{id:"product-description",name:"Product Description",description:"Compelling product descriptions that sell",category:"product",icon:Ot.jsx(cs,{className:"h-5 w-5"}),prompt:"Write a compelling product description for",tone:"professional",length:"medium"},{id:"email-campaign",name:"Email Campaign",description:"Persuasive email marketing content",category:"email",icon:Ot.jsx(Jr,{className:"h-5 w-5"}),prompt:"Create an email campaign about",tone:"persuasive",length:"medium"},{id:"blog-post",name:"Blog Post",description:"SEO-optimized blog content",category:"blog",icon:Ot.jsx(cs,{className:"h-5 w-5"}),prompt:"Write a blog post about",tone:"informative",length:"long"},{id:"promo-announcement",name:"Promotion Announcement",description:"Exciting promotional announcements",category:"promo",icon:Ot.jsx(Dn,{className:"h-5 w-5"}),prompt:"Create a promotional announcement for",tone:"excited",length:"short"},{id:"event-invitation",name:"Event Invitation",description:"Inviting event announcements",category:"event",icon:Ot.jsx(Qn,{className:"h-5 w-5"}),prompt:"Create an event invitation for",tone:"inviting",length:"medium"}],JG=[{value:"professional",label:"Professional"},{value:"friendly",label:"Friendly"},{value:"casual",label:"Casual"},{value:"excited",label:"Excited"},{value:"persuasive",label:"Persuasive"},{value:"informative",label:"Informative"}],QG=[{value:"short",label:"Short (1-2 paragraphs)"},{value:"medium",label:"Medium (3-5 paragraphs)"},{value:"long",label:"Long (6+ paragraphs)"}];function eq(){const{isAuthenticated:e}=Ua(),{toast:t}=Nn(),[n,r]=hn.useState(null),[s,i]=hn.useState(""),[a,o]=hn.useState("professional"),[l,c]=hn.useState("medium"),[d,u]=hn.useState(""),[h,p]=hn.useState("templates"),{data:m=[],isLoading:f}=za({queryKey:["/api/ai/content-history"],enabled:e}),{data:g}=za({queryKey:["/api/ai/usage-stats"],enabled:e}),x=Fa({mutationFn:async e=>await qn("POST","/api/ai/generate-content",e),onSuccess:e=>{u(e.content),t({title:"Content Generated!",description:"Your AI-powered content is ready."}),vr.invalidateQueries({queryKey:["/api/ai/content-history"]}),vr.invalidateQueries({queryKey:["/api/ai/usage-stats"]})},onError:e=>{t({title:"Generation Failed",description:e.message||"Failed to generate content. Please try again.",variant:"destructive"})}}),v=()=>{s.trim()?x.mutate({prompt:s,tone:a,length:l,template:n?.id||"custom"}):t({title:"Prompt Required",description:"Please enter what you want to generate content about.",variant:"destructive"})};return e?Ot.jsxs("div",{className:"min-h-screen",children:[Ot.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-r from-purple-600 via-blue-600 to-cyan-600 text-white",children:[Ot.jsx("div",{className:"absolute inset-0 opacity-20",children:[...Array(30)].map((e,t)=>Ot.jsx(wo.div,{className:"absolute w-2 h-2 bg-white rounded-full",style:{left:100*Math.random()+"%",top:100*Math.random()+"%"},animate:{opacity:[.2,.8,.2],scale:[1,1.5,1]},transition:{duration:3+2*Math.random(),repeat:1/0,delay:2*Math.random()}},t))}),Ot.jsx("div",{className:"container mx-auto px-4 py-16 relative z-10",children:Ot.jsxs(wo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center",children:[Ot.jsxs("div",{className:"flex items-center justify-center gap-3 mb-6",children:[Ot.jsx(ei,{className:"h-12 w-12"}),Ot.jsx("h1",{className:"text-5xl font-bold",children:"AI Content Generator"}),Ot.jsx(An,{className:"h-12 w-12"})]}),Ot.jsx("p",{className:"text-xl opacity-90 max-w-2xl mx-auto mb-8",children:"Create professional, engaging content in seconds with our AI-powered generator. Save hours of work and boost your marketing effectiveness."}),g&&Ot.jsxs(wo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"flex flex-wrap justify-center gap-6",children:[Ot.jsxs("div",{className:"flex items-center gap-2 bg-white/20 backdrop-blur-sm rounded-lg px-6 py-3",children:[Ot.jsx(Pn,{className:"h-5 w-5"}),Ot.jsxs("div",{className:"text-left",children:[Ot.jsx("div",{className:"text-2xl font-bold",children:g.totalGenerations}),Ot.jsx("div",{className:"text-xs opacity-80",children:"Generations"})]})]}),Ot.jsxs("div",{className:"flex items-center gap-2 bg-white/20 backdrop-blur-sm rounded-lg px-6 py-3",children:[Ot.jsx(xr,{className:"h-5 w-5"}),Ot.jsxs("div",{className:"text-left",children:[Ot.jsxs("div",{className:"text-2xl font-bold",children:[g.timeSavedHours,"h"]}),Ot.jsx("div",{className:"text-xs opacity-80",children:"Time Saved"})]})]}),Ot.jsxs("div",{className:"flex items-center gap-2 bg-white/20 backdrop-blur-sm rounded-lg px-6 py-3",children:[Ot.jsx(Dn,{className:"h-5 w-5"}),Ot.jsxs("div",{className:"text-left",children:[Ot.jsxs("div",{className:"text-2xl font-bold",children:["$",g.costSavings]}),Ot.jsx("div",{className:"text-xs opacity-80",children:"Cost Savings"})]})]})]})]})})]}),Ot.jsx("div",{className:"container mx-auto px-4 py-12",children:Ot.jsxs(qs,{value:h,onValueChange:p,className:"space-y-8",children:[Ot.jsxs(Xs,{className:"grid w-full grid-cols-3 max-w-2xl mx-auto",children:[Ot.jsxs(Ks,{value:"templates",className:"flex items-center gap-2",children:[Ot.jsx(ti,{className:"h-4 w-4"}),"Templates"]}),Ot.jsxs(Ks,{value:"generate",className:"flex items-center gap-2",children:[Ot.jsx(ei,{className:"h-4 w-4"}),"Generate"]}),Ot.jsxs(Ks,{value:"history",className:"flex items-center gap-2",children:[Ot.jsx(xr,{className:"h-4 w-4"}),"History"]})]}),Ot.jsxs(Ys,{value:"templates",className:"space-y-6",children:[Ot.jsxs("div",{className:"text-center mb-8",children:[Ot.jsx("h2",{className:"text-3xl font-bold mb-3 text-white",style:{textShadow:"0 2px 8px rgba(0,0,0,0.4)"},children:"Choose a Template"}),Ot.jsx("p",{className:"text-white text-lg",style:{textShadow:"0 1px 2px rgba(0,0,0,0.25)"},children:"Select from our professionally crafted templates to get started quickly"})]}),Ot.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:ZG.map((e,t)=>Ot.jsx(wo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},children:Ot.jsxs(Sn,{className:"cursor-pointer hover:shadow-lg transition-all duration-300 hover:-translate-y-1 border-2 hover:border-purple-300",onClick:()=>(e=>{r(e),o(e.tone),c(e.length),p("generate")})(e),children:[Ot.jsxs(Lr,{children:[Ot.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[Ot.jsx("div",{className:"p-3 rounded-lg bg-gradient-to-r from-purple-500 to-pink-500 text-white",children:e.icon}),Ot.jsxs("div",{children:[Ot.jsx(zr,{className:"text-lg",children:e.name}),Ot.jsx(Tn,{variant:"outline",className:"mt-1",children:e.category})]})]}),Ot.jsx(Ur,{children:e.description})]}),Ot.jsx(Mn,{children:Ot.jsxs("div",{className:"flex gap-2 text-xs text-muted-foreground",children:[Ot.jsx(Tn,{variant:"secondary",children:e.tone}),Ot.jsx(Tn,{variant:"secondary",children:e.length})]})})]})},e.id))})]}),Ot.jsx(Ys,{value:"generate",className:"space-y-6",children:Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{children:[Ot.jsxs(zr,{className:"flex items-center gap-3",children:[Ot.jsx(An,{className:"h-6 w-6 text-purple-500"}),"Generate Content"]}),Ot.jsx(Ur,{children:n?`Using template: ${n.name}`:"Create custom content with AI"})]}),Ot.jsxs(Mn,{className:"space-y-6",children:[Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsx("label",{className:"text-sm font-medium",children:"What would you like to create?"}),Ot.jsx(Tr,{placeholder:"Example: A social media post about our new summer menu featuring fresh Florida seafood...",value:s,onChange:e=>i(e.target.value),rows:4,className:"resize-none"})]}),Ot.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsx("label",{className:"text-sm font-medium",children:"Tone"}),Ot.jsxs(Un,{value:a,onValueChange:o,children:[Ot.jsx(Vn,{children:Ot.jsx(Hn,{})}),Ot.jsx(Wn,{children:JG.map(e=>Ot.jsx($n,{value:e.value,children:e.label},e.value))})]})]}),Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsx("label",{className:"text-sm font-medium",children:"Length"}),Ot.jsxs(Un,{value:l,onValueChange:c,children:[Ot.jsx(Vn,{children:Ot.jsx(Hn,{})}),Ot.jsx(Wn,{children:QG.map(e=>Ot.jsx($n,{value:e.value,children:e.label},e.value))})]})]})]}),Ot.jsx(Ln,{onClick:v,disabled:x.isPending||!s.trim(),className:"w-full h-12 text-lg bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700",children:x.isPending?Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(Fr,{className:"h-5 w-5 mr-2 animate-spin"}),"Generating..."]}):Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(An,{className:"h-5 w-5 mr-2"}),"Generate Content"]})}),Ot.jsx(jo,{children:d&&Ot.jsxs(wo.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-4",children:[Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[Ot.jsx(rr,{className:"h-5 w-5 text-green-500"}),"Generated Content"]}),Ot.jsxs("div",{className:"flex gap-2",children:[Ot.jsxs(Ln,{variant:"outline",size:"sm",onClick:()=>{navigator.clipboard.writeText(d),t({title:"Copied!",description:"Content copied to clipboard."})},children:[Ot.jsx(ni,{className:"h-4 w-4 mr-2"}),"Copy"]}),Ot.jsxs(Ln,{variant:"outline",size:"sm",onClick:()=>{t({title:"Saved!",description:"Content saved to your favorites."})},children:[Ot.jsx(Zn,{className:"h-4 w-4 mr-2"}),"Save"]}),Ot.jsxs(Ln,{variant:"outline",size:"sm",onClick:v,disabled:x.isPending,children:[Ot.jsx(Fs,{className:"h-4 w-4 mr-2"}),"Regenerate"]})]})]}),Ot.jsx("div",{className:"p-6 rounded-lg bg-gradient-to-r from-purple-50 to-pink-50 border-2 border-purple-200",children:Ot.jsx("p",{className:"whitespace-pre-wrap leading-relaxed",children:d})})]})})]})]})}),Ot.jsxs(Ys,{value:"history",className:"space-y-6",children:[Ot.jsxs("div",{className:"text-center mb-8",children:[Ot.jsx("h2",{className:"text-3xl font-bold mb-3 text-white",style:{textShadow:"0 2px 8px rgba(0,0,0,0.4)"},children:"Generation History"}),Ot.jsx("p",{className:"text-white text-lg",style:{textShadow:"0 1px 2px rgba(0,0,0,0.25)"},children:"View and reuse your previously generated content"})]}),f?Ot.jsx("div",{className:"space-y-4",children:[...Array(3)].map((e,t)=>Ot.jsx(Sn,{children:Ot.jsx(Mn,{className:"p-6",children:Ot.jsx(er,{className:"h-24 w-full"})})},t))}):m.length>0?Ot.jsx("div",{className:"space-y-4",children:m.map(e=>Ot.jsx(Sn,{className:"hover:shadow-md transition-shadow",children:Ot.jsxs(Mn,{className:"p-6",children:[Ot.jsxs("div",{className:"flex items-start justify-between mb-4",children:[Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsx(Tn,{children:e.template}),Ot.jsx(Tn,{variant:"outline",children:e.tone}),e.isFavorite&&Ot.jsx(Zn,{className:"h-4 w-4 fill-current text-red-500"})]}),Ot.jsx("div",{className:"text-sm text-muted-foreground",children:new Date(e.createdAt).toLocaleDateString()})]}),Ot.jsx("p",{className:"text-sm line-clamp-3 mb-4",children:e.content}),Ot.jsx("div",{className:"flex gap-2",children:Ot.jsxs(Ln,{variant:"outline",size:"sm",onClick:()=>{u(e.content),p("generate")},children:[Ot.jsx(ni,{className:"h-4 w-4 mr-2"}),"Reuse"]})})]})},e.id))}):Ot.jsx(Sn,{children:Ot.jsxs(Mn,{className:"p-12 text-center",children:[Ot.jsx(xr,{className:"h-16 w-16 mx-auto mb-4 text-muted-foreground"}),Ot.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No History Yet"}),Ot.jsx("p",{className:"text-muted-foreground mb-6",children:"Start generating content to see your history here"}),Ot.jsxs(Ln,{onClick:()=>p("templates"),children:[Ot.jsx(ti,{className:"h-4 w-4 mr-2"}),"Browse Templates"]})]})})]})]})})]}):Ot.jsx("div",{className:"min-h-screen",children:Ot.jsxs("div",{className:"container mx-auto px-4 py-20 text-center",children:[Ot.jsx(An,{className:"h-16 w-16 mx-auto mb-6 text-purple-500"}),Ot.jsx("h1",{className:"text-4xl font-bold mb-4",children:"AI Content Generator"}),Ot.jsx("p",{className:"text-xl text-muted-foreground mb-8",children:"Please sign in to access AI-powered content generation."}),Ot.jsx(Ln,{size:"lg",onClick:()=>window.location.href="/api/login",children:"Sign In"})]})})}const tq=[{id:"campaign_optimize",name:"Campaign Optimizer",description:"AI-powered campaign optimization to boost open rates, CTR, and conversions",category:"marketing",icon:Ot.jsx(Dn,{className:"w-5 h-5"}),endpoint:"/api/ai/marketing/campaign/optimize",color:"from-blue-500 to-cyan-500",fields:[{name:"subject",label:"Subject Line",type:"text",required:!0,placeholder:"Your current subject line"},{name:"content",label:"Email Content",type:"textarea",required:!0,placeholder:"Paste your email content here"},{name:"targetAudience",label:"Target Audience",type:"text",placeholder:"e.g., Small business owners in Miami"},{name:"openRate",label:"Current Open Rate (%)",type:"number",placeholder:"21"},{name:"clickRate",label:"Current Click Rate (%)",type:"number",placeholder:"2.6"}]},{id:"content_generate",name:"Content Generator",description:"Generate high-converting email copy, subject lines, and CTAs",category:"marketing",icon:Ot.jsx(cs,{className:"w-5 h-5"}),endpoint:"/api/ai/marketing/content/generate",color:"from-purple-500 to-pink-500",fields:[{name:"campaignType",label:"Campaign Type",type:"select",required:!0,options:[{value:"promotional",label:"Promotional"},{value:"newsletter",label:"Newsletter"},{value:"announcement",label:"Announcement"},{value:"welcome",label:"Welcome Series"},{value:"abandoned_cart",label:"Abandoned Cart"}]},{name:"audience",label:"Target Audience",type:"text",placeholder:"Florida restaurant owners"},{name:"goal",label:"Campaign Goal",type:"text",placeholder:"Increase weekend bookings"},{name:"tone",label:"Brand Tone",type:"select",options:[{value:"professional",label:"Professional"},{value:"friendly",label:"Friendly"},{value:"casual",label:"Casual"},{value:"urgent",label:"Urgent"}]},{name:"product",label:"Product/Service",type:"text",placeholder:"Weekend dinner special"},{name:"offer",label:"Special Offer",type:"text",placeholder:"20% off for reservations"}]},{id:"subject_test",name:"Subject Line Tester",description:"Generate A/B test variations with psychological triggers",category:"marketing",icon:Ot.jsx(Jr,{className:"w-5 h-5"}),endpoint:"/api/ai/marketing/subject/test",color:"from-green-500 to-emerald-500",fields:[{name:"originalSubject",label:"Current Subject",type:"text",required:!0},{name:"industry",label:"Industry",type:"text",placeholder:"Restaurant"},{name:"audience",label:"Target Segment",type:"text",placeholder:"Local families"},{name:"goal",label:"Primary Goal",type:"select",options:[{value:"open_rate",label:"Maximize Opens"},{value:"urgency",label:"Create Urgency"},{value:"curiosity",label:"Build Curiosity"},{value:"value",label:"Highlight Value"}]}]},{id:"send_time_optimize",name:"Send Time Optimizer",description:"Find the perfect send time for maximum engagement",category:"marketing",icon:Ot.jsx(xr,{className:"w-5 h-5"}),endpoint:"/api/ai/marketing/sendtime/optimize",color:"from-orange-500 to-red-500",fields:[{name:"audience",label:"Audience Type",type:"select",required:!0,options:[{value:"b2b",label:"Business (B2B)"},{value:"b2c",label:"Consumer (B2C)"},{value:"mixed",label:"Mixed Audience"}]},{name:"timezone",label:"Primary Timezone",type:"select",options:[{value:"EST",label:"Eastern Time"},{value:"CST",label:"Central Time (Panhandle)"}]},{name:"industry",label:"Industry",type:"text",placeholder:"Retail"},{name:"historicalData",label:"Best Past Performance",type:"text",placeholder:"Tuesdays at 10am"}]},{id:"segment_analyze",name:"Segment Analyzer",description:"AI-powered customer segmentation and behavior prediction",category:"marketing",icon:Ot.jsx(On,{className:"w-5 h-5"}),endpoint:"/api/ai/marketing/segment/analyze",color:"from-indigo-500 to-purple-500",fields:[{name:"segmentName",label:"Segment Name",type:"text",required:!0},{name:"criteria",label:"Segment Criteria",type:"textarea",placeholder:"Customers who purchased in last 30 days"},{name:"size",label:"Segment Size",type:"number",placeholder:"1500"},{name:"avgOrderValue",label:"Avg Order Value ($)",type:"number",placeholder:"85"}]},{id:"workflow_generate",name:"Workflow Builder",description:"Design automated marketing workflows that convert",category:"marketing",icon:Ot.jsx(ri,{className:"w-5 h-5"}),endpoint:"/api/ai/marketing/workflow/generate",color:"from-teal-500 to-green-500",fields:[{name:"workflowType",label:"Workflow Type",type:"select",required:!0,options:[{value:"welcome",label:"Welcome Series"},{value:"nurture",label:"Lead Nurturing"},{value:"reengagement",label:"Re-engagement"},{value:"abandoned_cart",label:"Abandoned Cart"},{value:"post_purchase",label:"Post-Purchase"}]},{name:"steps",label:"Number of Steps",type:"number",placeholder:"5"},{name:"duration",label:"Total Duration (days)",type:"number",placeholder:"14"},{name:"goal",label:"Workflow Goal",type:"text",placeholder:"Convert trial users to paid"}]},{id:"form_optimize",name:"Form Optimizer",description:"Boost form conversion rates by 20-50%",category:"marketing",icon:Ot.jsx(cs,{className:"w-5 h-5"}),endpoint:"/api/ai/marketing/form/optimize",color:"from-yellow-500 to-orange-500",fields:[{name:"formType",label:"Form Type",type:"select",required:!0,options:[{value:"signup",label:"Sign Up"},{value:"contact",label:"Contact"},{value:"checkout",label:"Checkout"},{value:"survey",label:"Survey"},{value:"application",label:"Application"}]},{name:"currentFields",label:"Current Fields",type:"textarea",placeholder:"Name, Email, Phone, Company, Message"},{name:"conversionRate",label:"Current Conversion (%)",type:"number",placeholder:"15"},{name:"dropoffPoint",label:"Main Drop-off Point",type:"text",placeholder:"Phone number field"}]},{id:"marketplace_optimize",name:"Marketplace Optimizer",description:"Strategic pricing and category analysis for Florida businesses",category:"marketplace",icon:Ot.jsx(Ir,{className:"w-5 h-5"}),endpoint:"/api/ai/marketplace/optimize",color:"from-blue-500 to-indigo-500",fields:[{name:"businessId",label:"Business ID",type:"text",required:!0},{name:"category",label:"Product Category",type:"text",placeholder:"Beachwear"},{name:"currentPrice",label:"Current Price ($)",type:"number",placeholder:"29.99"},{name:"location",label:"Florida Region",type:"select",options:[{value:"south",label:"South Florida"},{value:"central",label:"Central Florida"},{value:"north",label:"North Florida"},{value:"panhandle",label:"Panhandle"},{value:"keys",label:"Florida Keys"}]}]},{id:"gmb_orchestrate",name:"GMB Orchestrator",description:"Google My Business optimization and local SEO",category:"marketplace",icon:Ot.jsx(Bn,{className:"w-5 h-5"}),endpoint:"/api/ai/gmb/orchestrate",color:"from-green-500 to-teal-500",fields:[{name:"businessId",label:"Business ID",type:"text",required:!0},{name:"gmbId",label:"GMB Listing ID",type:"text"},{name:"objective",label:"Optimization Goal",type:"select",options:[{value:"reviews",label:"Improve Reviews"},{value:"visibility",label:"Increase Visibility"},{value:"posts",label:"Content Strategy"},{value:"qa",label:"Q&A Management"}]}]},{id:"fraud_detect",name:"Fraud Detector",description:"Advanced security and anomaly detection",category:"marketplace",icon:Ot.jsx(Rn,{className:"w-5 h-5"}),endpoint:"/api/ai/security/fraud/detect",color:"from-red-500 to-pink-500",fields:[{name:"transactionId",label:"Transaction ID",type:"text"},{name:"userId",label:"User ID",type:"text"},{name:"amount",label:"Transaction Amount ($)",type:"number"},{name:"type",label:"Check Type",type:"select",options:[{value:"transaction",label:"Transaction"},{value:"review",label:"Review Authenticity"},{value:"account",label:"Account Activity"},{value:"vendor",label:"Vendor Verification"}]}]},{id:"customer_success",name:"Customer Success AI",description:"Predict churn and improve retention",category:"marketplace",icon:Ot.jsx(si,{className:"w-5 h-5"}),endpoint:"/api/ai/customer/success",color:"from-purple-500 to-indigo-500",fields:[{name:"customerId",label:"Customer ID",type:"text",required:!0},{name:"lastActivity",label:"Days Since Last Activity",type:"number"},{name:"totalSpent",label:"Total Spent ($)",type:"number"},{name:"supportTickets",label:"Recent Support Tickets",type:"number"}]},{id:"spotlight_curate",name:"Spotlight Curator",description:"AI curation for featured businesses",category:"marketplace",icon:Ot.jsx(Jn,{className:"w-5 h-5"}),endpoint:"/api/ai/spotlight/curate",color:"from-yellow-500 to-red-500",fields:[{name:"category",label:"Business Category",type:"text"},{name:"region",label:"Florida Region",type:"text"},{name:"criteria",label:"Selection Criteria",type:"select",options:[{value:"trending",label:"Trending Now"},{value:"new",label:"New & Noteworthy"},{value:"top_rated",label:"Top Rated"},{value:"seasonal",label:"Seasonal Picks"}]}]},{id:"product_intelligence",name:"Product Intelligence",description:"Smart product recommendations and insights",category:"marketplace",icon:Ot.jsx(ei,{className:"w-5 h-5"}),endpoint:"/api/ai/product/intelligence",color:"from-cyan-500 to-blue-500",fields:[{name:"productId",label:"Product ID",type:"text"},{name:"category",label:"Category",type:"text"},{name:"analysisType",label:"Analysis Type",type:"select",options:[{value:"pricing",label:"Pricing Strategy"},{value:"demand",label:"Demand Forecast"},{value:"competition",label:"Competitive Analysis"},{value:"bundling",label:"Bundle Suggestions"}]}]},{id:"vendor_coach",name:"Vendor Coach",description:"Personalized coaching for vendor success",category:"marketplace",icon:Ot.jsx(Vs,{className:"w-5 h-5"}),endpoint:"/api/ai/vendor/coach",color:"from-indigo-500 to-blue-500",fields:[{name:"vendorId",label:"Vendor ID",type:"text",required:!0},{name:"metric",label:"Focus Area",type:"select",options:[{value:"sales",label:"Increase Sales"},{value:"conversion",label:"Improve Conversion"},{value:"inventory",label:"Inventory Management"},{value:"customer_service",label:"Customer Service"}]}]},{id:"inventory_optimize",name:"Inventory Optimizer",description:"Demand forecasting and stock optimization",category:"marketplace",icon:Ot.jsx(as,{className:"w-5 h-5"}),endpoint:"/api/ai/inventory/optimize",color:"from-green-500 to-cyan-500",fields:[{name:"productId",label:"Product ID",type:"text",required:!0},{name:"currentStock",label:"Current Stock",type:"number"},{name:"salesVelocity",label:"Daily Sales Avg",type:"number"},{name:"seasonality",label:"Season",type:"select",options:[{value:"high",label:"High Season (Winter)"},{value:"low",label:"Low Season (Summer)"},{value:"hurricane",label:"Hurricane Season"},{value:"holiday",label:"Holiday Period"}]}]}],nq={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.2}}},rq={hidden:{opacity:0,y:30,scale:.95},visible:{opacity:1,y:0,scale:1,transition:{type:"spring",stiffness:100,damping:15}}},sq={hidden:{opacity:0,y:-20},visible:{opacity:1,y:0,transition:{duration:.8,ease:"easeOut"}}};function iq(){const{toast:e}=Nn(),[t,n]=hn.useState(null),[r,s]=hn.useState({}),[i,a]=hn.useState({}),[o,l]=hn.useState("all"),[c,d]=hn.useState(null),u="undefined"!=typeof window&&window.matchMedia("(prefers-reduced-motion: reduce)").matches,h=Fa({mutationFn:async({agent:e,data:t})=>{const n=await qn("POST",e.endpoint,t);return await n.json()},onSuccess:(t,{agent:r})=>{const i=t.taskId||t.id;i?(a(e=>({...e,[i]:{id:i,status:"processing",progress:10}})),p(i),e({title:"AI Agent Started",description:`${r.name} is processing your request. Task ID: ${i}`})):t.result&&e({title:"AI Agent Completed",description:`${r.name} has completed the task successfully.`}),s({}),n(null)},onError:t=>{e({title:"Agent Error",description:t.message||"Failed to execute AI agent task",variant:"destructive"})}}),p=async t=>{let n=0;const r=async()=>{n++;try{const s=await qn("GET",`/api/ai/tasks/${t}`),i=await s.json();a(e=>({...e,[t]:{...i,progress:Math.min(90,3*n)}})),"completed"===i.status?e({title:"AI Task Completed",description:"Your AI agent task has been completed successfully."}):"failed"===i.status?e({title:"AI Task Failed",description:i.error||"The AI agent task failed to complete.",variant:"destructive"}):n<30?setTimeout(r,2e3):e({title:"Task Timeout",description:"The AI agent task is taking longer than expected.",variant:"destructive"})}catch(s){n<30&&setTimeout(r,3e3)}};r()},m="all"===o?tq:tq.filter(e=>e.category===o),f=e=>{switch(e){case"completed":return Ot.jsx(us,{className:"w-4 h-4 text-green-600"});case"failed":return Ot.jsx(ms,{className:"w-4 h-4 text-red-600"});case"processing":return Ot.jsx(Fs,{className:"w-4 h-4 text-blue-600 "+(u?"":"animate-spin")});default:return Ot.jsx(xr,{className:"w-4 h-4 text-gray-400"})}};return Ot.jsxs("div",{className:"min-h-screen relative overflow-hidden",children:[Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-[var(--fl-teal-lagoon)]/5 via-transparent to-[var(--fl-sunset-gold)]/5 animate-pulse",style:{animationDuration:"8s"}}),Ot.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-[var(--fl-teal-lagoon)]/10 rounded-full blur-3xl animate-pulse",style:{animationDuration:"6s"}}),Ot.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 bg-[var(--fl-sunset-gold)]/10 rounded-full blur-3xl animate-pulse",style:{animationDuration:"7s"}}),Ot.jsxs("div",{className:"relative z-10 space-y-8 pb-12",children:[Ot.jsxs(wo.div,{className:"text-center py-12 relative",initial:"hidden",animate:"visible",variants:sq,children:[Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-[var(--fl-teal-lagoon)]/5 to-transparent"}),Ot.jsxs("div",{className:"relative",children:[Ot.jsx(wo.div,{animate:u?{}:{scale:[1,1.05,1],rotate:[0,5,-5,0]},transition:{duration:4,repeat:1/0,repeatType:"reverse"},className:"inline-block mb-4",children:Ot.jsx(An,{className:"w-16 h-16 text-[var(--fl-sunset-gold)] drop-shadow-[0_0_15px_rgba(212,175,55,0.5)]"})}),Ot.jsx("h2",{className:"text-5xl md:text-6xl font-bold mb-4 bg-gradient-to-r from-[var(--fl-teal-lagoon)] via-[var(--fl-sunset-gold)] to-[var(--fl-bronze)] bg-clip-text text-transparent drop-shadow-2xl",children:"AI Command Center"}),Ot.jsxs("p",{className:"text-xl text-muted-foreground max-w-3xl mx-auto font-light",children:["Unleash the power of ",Ot.jsx("span",{className:"font-semibold text-[var(--fl-sunset-gold)]",children:"15 specialized AI agents"})," designed to supercharge your business"]}),Ot.jsxs("div",{className:"flex justify-center gap-6 mt-8",children:[Ot.jsx(wo.div,{className:"px-6 py-3 rounded-full bg-white/80 dark:bg-black/40 backdrop-blur-xl border border-[var(--fl-teal-lagoon)]/30 shadow-lg",whileHover:u?{}:{scale:1.05,y:-2},children:Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx(Pn,{className:"w-5 h-5 text-[var(--fl-sunset-gold)]"}),Ot.jsx("span",{className:"font-semibold text-sm",children:"Ultra Fast"})]})}),Ot.jsx(wo.div,{className:"px-6 py-3 rounded-full bg-white/80 dark:bg-black/40 backdrop-blur-xl border border-[var(--fl-sunset-gold)]/30 shadow-lg",whileHover:u?{}:{scale:1.05,y:-2},children:Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx(ei,{className:"w-5 h-5 text-[var(--fl-teal-lagoon)]"}),Ot.jsx("span",{className:"font-semibold text-sm",children:"AI Powered"})]})})]})]})]}),Ot.jsx(jo,{children:Object.keys(i).length>0&&Ot.jsx(wo.div,{initial:{opacity:0,y:-20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},transition:{duration:.4},children:Ot.jsxs(Sn,{className:"bg-gradient-to-br from-slate-800 via-slate-900 to-slate-950 border-2 border-slate-700/50 hover:border-cyan-400/80 transition-all duration-500 hover:shadow-[0_0_40px_rgba(0,255,255,0.4)] cyber-3d-lift relative overflow-hidden group",children:[Ot.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-500 cyber-metallic-shine z-0"}),Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-cyan-500/10 via-purple-500/10 to-pink-500/10 opacity-0 group-hover:opacity-100 transition-all duration-500 mix-blend-overlay pointer-events-none z-0"}),Ot.jsx("div",{className:"absolute inset-0 cyber-scan-line pointer-events-none z-0"}),Ot.jsx(Lr,{className:"relative z-10",children:Ot.jsxs(zr,{className:"text-xl flex items-center gap-3",children:[Ot.jsx(wo.div,{animate:u?{}:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},children:Ot.jsx(ri,{className:"h-6 w-6 text-[var(--fl-teal-lagoon)]"})}),Ot.jsx("span",{className:"bg-gradient-to-r from-[var(--fl-teal-lagoon)] to-[var(--fl-sunset-gold)] bg-clip-text text-transparent",children:"Active AI Tasks"}),Ot.jsx(Tn,{variant:"secondary",className:"bg-[var(--fl-sunset-gold)]/20 text-[var(--fl-sunset-gold)]",children:Object.keys(i).length})]})}),Ot.jsx(Mn,{className:"relative z-10",children:Ot.jsx("div",{className:"space-y-3",children:Object.entries(i).map(([e,t],n)=>Ot.jsxs(wo.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*n},className:"flex items-center justify-between p-4 rounded-xl bg-white/90 dark:bg-black/40 border-2 border-[var(--fl-teal-lagoon)]/30 shadow-lg hover:shadow-2xl hover:border-[var(--fl-sunset-gold)]/50 transition-all duration-300 backdrop-blur-sm relative overflow-hidden group",children:["processing"===t.status&&Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-[var(--fl-teal-lagoon)]/10 to-[var(--fl-sunset-gold)]/10 animate-pulse"}),Ot.jsxs("div",{className:"flex items-center gap-3 relative z-10",children:[Ot.jsx(wo.div,{animate:"processing"!==t.status||u?{}:{scale:[1,1.2,1],rotate:[0,180,360]},transition:{duration:2,repeat:1/0},children:f(t.status)}),Ot.jsxs("div",{children:[Ot.jsxs("span",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:["Task ",e.slice(0,8)]}),Ot.jsx(Tn,{variant:"secondary",className:"ml-2 "+("completed"===t.status?"bg-green-500/20 text-green-700 dark:text-green-400 border-green-500/50":"processing"===t.status?"bg-blue-500/20 text-blue-700 dark:text-blue-400 border-blue-500/50":"bg-gray-500/20 text-gray-700 dark:text-gray-400 border-gray-500/50"),children:t.status})]})]}),void 0!==t.progress&&"processing"===t.status&&Ot.jsxs("div",{className:"flex items-center gap-3 relative z-10",children:[Ot.jsxs("span",{className:"text-xs font-semibold text-[var(--fl-teal-lagoon)]",children:[t.progress,"%"]}),Ot.jsx(Vr,{value:t.progress,className:"w-32 h-2 bg-gray-200 dark:bg-gray-700"})]})]},e))})})]})})}),Ot.jsxs(qs,{value:o,onValueChange:e=>l(e),children:[Ot.jsxs(Xs,{className:"grid w-full grid-cols-3 max-w-2xl mx-auto h-16 bg-white/90 dark:bg-black/40 backdrop-blur-xl shadow-2xl border-2 border-[var(--fl-teal-lagoon)]/30 rounded-2xl p-1 relative overflow-hidden",children:[Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-[var(--fl-teal-lagoon)]/10 via-[var(--fl-sunset-gold)]/10 to-[var(--fl-teal-lagoon)]/10 opacity-50 blur-xl"}),Ot.jsx(Ks,{value:"all",className:"text-base font-bold relative z-10 data-[state=active]:bg-gradient-to-r data-[state=active]:from-[var(--fl-teal-lagoon)] data-[state=active]:to-[var(--fl-sunset-gold)] data-[state=active]:text-white data-[state=active]:shadow-[0_0_20px_rgba(0,128,128,0.5)] transition-all duration-300 rounded-xl data-[state=inactive]:hover:bg-[var(--fl-teal-lagoon)]/10","data-testid":"tab-all",children:Ot.jsxs(wo.div,{className:"flex items-center gap-2",whileHover:{scale:1.05},whileTap:{scale:.95},children:[Ot.jsx(An,{className:"w-4 h-4"}),"All Agents",Ot.jsx(Tn,{variant:"secondary",className:"ml-1 bg-[var(--fl-sunset-gold)]/20 text-[var(--fl-sunset-gold)] data-[state=active]:bg-white/30 data-[state=active]:text-white border-0",children:tq.length})]})}),Ot.jsx(Ks,{value:"marketing",className:"text-base font-bold relative z-10 data-[state=active]:bg-gradient-to-r data-[state=active]:from-[var(--fl-sunset-gold)] data-[state=active]:to-[var(--fl-bronze)] data-[state=active]:text-white data-[state=active]:shadow-[0_0_20px_rgba(212,175,55,0.5)] transition-all duration-300 rounded-xl data-[state=inactive]:hover:bg-[var(--fl-sunset-gold)]/10","data-testid":"tab-marketing",children:Ot.jsxs(wo.div,{className:"flex items-center gap-2",whileHover:{scale:1.05},whileTap:{scale:.95},children:[Ot.jsx(Dn,{className:"w-4 h-4"}),"Marketing",Ot.jsx(Tn,{variant:"secondary",className:"ml-1 bg-[var(--fl-teal-lagoon)]/20 text-[var(--fl-teal-lagoon)] data-[state=active]:bg-white/30 data-[state=active]:text-white border-0",children:"7"})]})}),Ot.jsx(Ks,{value:"marketplace",className:"text-base font-bold relative z-10 data-[state=active]:bg-gradient-to-r data-[state=active]:from-[var(--fl-teal-lagoon)] data-[state=active]:to-blue-500 data-[state=active]:text-white data-[state=active]:shadow-[0_0_20px_rgba(0,128,128,0.5)] transition-all duration-300 rounded-xl data-[state=inactive]:hover:bg-blue-500/10","data-testid":"tab-marketplace",children:Ot.jsxs(wo.div,{className:"flex items-center gap-2",whileHover:{scale:1.05},whileTap:{scale:.95},children:[Ot.jsx(Ir,{className:"w-4 h-4"}),"Marketplace",Ot.jsx(Tn,{variant:"secondary",className:"ml-1 bg-blue-500/20 text-blue-600 dark:text-blue-400 data-[state=active]:bg-white/30 data-[state=active]:text-white border-0",children:"8"})]})})]}),Ot.jsx(Ys,{value:o,className:"mt-8",children:Ot.jsx(wo.div,{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",variants:nq,initial:"hidden",animate:"visible",children:m.map((e,r)=>Ot.jsx(wo.div,{variants:rq,whileHover:u?{}:{scale:1.03,rotateY:5,z:50},whileTap:u?{}:{scale:.98},onHoverStart:()=>d(e.id),onHoverEnd:()=>d(null),style:{transformStyle:"preserve-3d",perspective:1e3},children:Ot.jsxs(Sn,{className:"h-full cursor-pointer bg-gradient-to-br from-slate-800 via-slate-900 to-slate-950 border-2 border-slate-700/50 hover:border-cyan-400/80 transition-all duration-500 hover:shadow-[0_0_40px_rgba(0,255,255,0.4)] cyber-3d-lift relative overflow-hidden group "+(t?.id===e.id?"ring-4 ring-cyan-400/50 shadow-[0_0_50px_rgba(0,255,255,0.4)] border-cyan-400":""),onClick:()=>n(e),"data-testid":`card-agent-${e.id}`,children:[Ot.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-500 cyber-metallic-shine z-0"}),Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-cyan-500/10 via-purple-500/10 to-pink-500/10 opacity-0 group-hover:opacity-100 transition-all duration-500 mix-blend-overlay pointer-events-none z-0"}),Ot.jsx("div",{className:"absolute inset-0 cyber-scan-line pointer-events-none z-0"}),Ot.jsx("div",{className:"absolute inset-0 cyber-circuit-pattern opacity-5 group-hover:opacity-10 transition-opacity z-0"}),Ot.jsxs(Lr,{className:"relative z-10",children:[Ot.jsxs("div",{className:"flex items-start justify-between mb-3",children:[Ot.jsxs(wo.div,{className:`p-3 rounded-xl bg-gradient-to-br ${e.color} text-white shadow-lg relative overflow-hidden`,whileHover:u?{}:{rotate:360},transition:{duration:.6},children:[Ot.jsx("div",{className:"absolute inset-0 bg-white/20 rounded-xl blur-sm group-hover:bg-white/40 transition-all"}),Ot.jsx("div",{className:"relative z-10",children:e.icon})]}),Ot.jsx(Tn,{variant:"outline",className:"text-xs font-semibold border-[var(--fl-teal-lagoon)]/40 bg-gradient-to-r from-[var(--fl-teal-lagoon)]/10 to-[var(--fl-sunset-gold)]/10 backdrop-blur-sm",children:e.category})]}),Ot.jsx(zr,{className:"text-lg font-bold bg-gradient-to-r from-gray-900 dark:from-gray-100 to-gray-600 dark:to-gray-400 bg-clip-text text-transparent group-hover:from-[var(--fl-teal-lagoon)] group-hover:to-[var(--fl-sunset-gold)] transition-all duration-300",children:e.name}),Ot.jsx(Ur,{className:"text-sm leading-relaxed text-gray-600 dark:text-gray-400",children:e.description})]}),Ot.jsx(Mn,{className:"relative z-10",children:Ot.jsxs(Ln,{className:"w-full font-semibold transition-all duration-300 relative overflow-hidden group/btn "+(t?.id===e.id?"bg-gradient-to-r from-[var(--fl-sunset-gold)] to-[var(--fl-bronze)] hover:shadow-[0_0_30px_rgba(212,175,55,0.5)] text-white":"bg-gradient-to-r from-[var(--fl-teal-lagoon)] to-blue-500 text-white hover:shadow-[0_0_30px_rgba(0,128,128,0.5)]"),"data-testid":`button-select-${e.id}`,children:[Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent translate-x-[-200%] group-hover/btn:translate-x-[200%] transition-transform duration-700"}),Ot.jsx("span",{className:"relative z-10 flex items-center justify-center gap-2",children:t?.id===e.id?Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(us,{className:"w-4 h-4"}),"Selected"]}):Ot.jsxs(Ot.Fragment,{children:["Select Agent",Ot.jsx(Ps,{className:"w-4 h-4 group-hover/btn:translate-x-1 transition-transform"})]})})]})})]})},e.id))})})]}),Ot.jsx(jo,{children:t&&Ot.jsx(wo.div,{initial:{opacity:0,y:30,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:30,scale:.95},transition:{type:"spring",stiffness:200,damping:20},children:Ot.jsxs(Sn,{className:"bg-gradient-to-br from-slate-800 via-slate-900 to-slate-950 border-2 border-slate-700/50 hover:border-cyan-400/80 transition-all duration-500 hover:shadow-[0_0_40px_rgba(0,255,255,0.4)] cyber-3d-lift relative overflow-hidden group",children:[Ot.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-500 cyber-metallic-shine z-0"}),Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-cyan-500/10 via-purple-500/10 to-pink-500/10 opacity-0 group-hover:opacity-100 transition-all duration-500 mix-blend-overlay pointer-events-none z-0"}),Ot.jsx("div",{className:"absolute inset-0 cyber-scan-line pointer-events-none z-0"}),Ot.jsx("div",{className:"absolute inset-0 cyber-circuit-pattern opacity-5 group-hover:opacity-10 transition-opacity z-0"}),Ot.jsx(Lr,{className:"bg-gradient-to-r from-[var(--fl-teal-lagoon)]/10 to-[var(--fl-sunset-gold)]/10 relative z-10",children:Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{className:"flex items-center gap-4",children:[Ot.jsxs(wo.div,{className:`p-4 rounded-2xl bg-gradient-to-br ${t.color} text-white shadow-2xl relative overflow-hidden`,whileHover:u?{}:{rotate:[0,-10,10,-10,0]},transition:{duration:.5},children:[Ot.jsx("div",{className:"absolute inset-0 bg-white/20 rounded-2xl blur-sm"}),Ot.jsx("div",{className:"relative z-10",children:t.icon})]}),Ot.jsxs("div",{children:[Ot.jsx(zr,{className:"text-3xl font-bold bg-gradient-to-r from-[var(--fl-teal-lagoon)] via-[var(--fl-sunset-gold)] to-[var(--fl-bronze)] bg-clip-text text-transparent",children:t.name}),Ot.jsx(Ur,{className:"text-base mt-1 text-gray-600 dark:text-gray-400",children:t.description})]})]}),Ot.jsx(wo.div,{whileHover:u?{}:{scale:1.1,rotate:90},whileTap:u?{}:{scale:.9},children:Ot.jsx(Ln,{variant:"ghost",size:"sm",onClick:()=>{n(null),s({})},className:"hover:bg-red-100 dark:hover:bg-red-900/30 hover:text-red-600 dark:hover:text-red-400 rounded-full h-10 w-10 p-0","data-testid":"button-close-agent",children:""})})]})}),Ot.jsx(Mn,{className:"pt-6",children:Ot.jsxs("div",{className:"space-y-5",children:[t.fields.map(e=>Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsxs(ws,{htmlFor:e.name,className:"text-sm font-semibold text-gray-700",children:[e.label,e.required&&Ot.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),"textarea"===e.type?Ot.jsx(Tr,{id:e.name,placeholder:e.placeholder,value:r[e.name]||"",onChange:t=>s(n=>({...n,[e.name]:t.target.value})),className:"border-[var(--fl-teal-lagoon)]/30 focus:border-[var(--fl-sunset-gold)] focus:ring-[var(--fl-sunset-gold)] bg-white/80",rows:4}):"select"===e.type?Ot.jsxs(Un,{value:r[e.name]||"",onValueChange:t=>s(n=>({...n,[e.name]:t})),children:[Ot.jsx(Vn,{className:"border-[var(--fl-teal-lagoon)]/30 focus:border-[var(--fl-sunset-gold)] focus:ring-[var(--fl-sunset-gold)] bg-white/80",children:Ot.jsx(Hn,{placeholder:`Select ${e.label.toLowerCase()}`})}),Ot.jsx(Wn,{children:e.options?.map(e=>Ot.jsx($n,{value:e.value,children:e.label},e.value))})]}):Ot.jsx(zn,{id:e.name,type:e.type,placeholder:e.placeholder,value:r[e.name]||"",onChange:t=>s(n=>({...n,[e.name]:t.target.value})),className:"border-[var(--fl-teal-lagoon)]/30 focus:border-[var(--fl-sunset-gold)] focus:ring-[var(--fl-sunset-gold)] bg-white/80"})]},e.name)),Ot.jsxs("div",{className:"flex gap-3 pt-6 border-t border-[var(--fl-teal-lagoon)]/20",children:[Ot.jsx(Ln,{onClick:()=>{if(!t)return;const n=t.fields.filter(e=>e.required&&!r[e.name]).map(e=>e.label);n.length>0?e({title:"Missing Required Fields",description:`Please fill in: ${n.join(", ")}`,variant:"destructive"}):h.mutate({agent:t,data:r})},disabled:h.isPending,className:"flex-1 h-12 text-base font-semibold bg-gradient-to-r from-[var(--fl-sunset-gold)] to-[var(--fl-bronze)] hover:shadow-xl transition-all",children:h.isPending?Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(Fs,{className:"w-5 h-5 mr-2 animate-spin"}),"Processing..."]}):Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(Pn,{className:"w-5 h-5 mr-2"}),"Execute AI Agent"]})}),Ot.jsx(Ln,{variant:"outline",onClick:()=>s({}),disabled:h.isPending,className:"h-12 px-8 border-[var(--fl-teal-lagoon)]/30 hover:bg-[var(--fl-teal-lagoon)]/10",children:"Clear"})]})]})})]})})})]})]})}function aq(){return _n(),Ot.jsxs("div",{className:"premium-page-wrapper premium-surface min-h-screen relative","data-surface-intensity":"delicate","data-surface-tone":"cool",children:[Ot.jsx(ho,{intensity:"medium"}),Ot.jsxs("div",{className:"relative py-24 overflow-hidden gradient-shift",children:[Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-[var(--fl-teal-lagoon)]/10 via-background to-[var(--fl-sunset-gold)]/10"}),Ot.jsx(lo,{count:50,color:"cyan"}),Ot.jsxs("div",{className:"container mx-auto px-4 lg:px-8 text-center relative z-10",children:[Ot.jsx(co,{glowText:"AI Agents Command Center",glowTextSize:"xl",className:"mb-8 entrance-fade-up"}),Ot.jsxs(wo.div,{className:"flex items-center justify-center gap-6 mb-8",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.2},children:[Ot.jsx("div",{className:"p-4 rounded-xl bg-gradient-to-br from-[var(--fl-teal-lagoon)] to-[var(--fl-sunset-gold)] shadow-2xl ambient-glow-teal transform hover:scale-110 transition-transform",children:Ot.jsx(ii,{className:"w-10 h-10 text-white"})}),Ot.jsx(ei,{className:"w-12 h-12 text-[var(--fl-teal-lagoon)] animate-pulse"}),Ot.jsx(An,{className:"w-10 h-10 text-[var(--fl-sunset-gold)] animate-pulse"})]}),Ot.jsx("p",{className:"text-xl text-white max-w-3xl mx-auto leading-relaxed mb-12 entrance-fade-up stagger-1",style:{textShadow:"0 1px 3px rgba(0,0,0,0.3)"},children:"15 specialized AI agents working for your Florida business. Optimize marketing, enhance your marketplace presence, and automate success."}),Ot.jsxs("div",{className:"grid md:grid-cols-3 gap-6 max-w-4xl mx-auto mb-8",children:[Ot.jsx(mo,{className:"card-entrance stagger-2",children:Ot.jsx(fo,{className:"group hover:shadow-[0_20px_45px_rgba(0,139,139,0.25)] transition-all duration-300",children:Ot.jsxs(Mn,{className:"p-6 text-center",children:[Ot.jsx(xo,{color:"rgba(0, 139, 139, 0.8)",children:Ot.jsx(Pn,{className:"h-10 w-10 mx-auto mb-4 text-[var(--fl-teal-lagoon)]"})}),Ot.jsx("h3",{className:"font-bold text-3xl mb-2 text-white",style:{textShadow:"0 2px 6px rgba(0,0,0,0.35)"},children:"15"}),Ot.jsx("p",{className:"text-sm text-white",style:{textShadow:"0 1px 2px rgba(0,0,0,0.25)"},children:"AI Agents Ready"})]})})}),Ot.jsx(mo,{className:"card-entrance stagger-3",children:Ot.jsx(fo,{className:"group hover:shadow-[0_20px_45px_rgba(212,175,55,0.25)] transition-all duration-300",children:Ot.jsxs(Mn,{className:"p-6 text-center",children:[Ot.jsx(xo,{color:"rgba(212, 175, 55, 0.8)",children:Ot.jsx(Dn,{className:"h-10 w-10 mx-auto mb-4 text-[var(--fl-sunset-gold)]"})}),Ot.jsx("h3",{className:"font-bold text-3xl mb-2 text-white",style:{textShadow:"0 2px 6px rgba(0,0,0,0.35)"},children:"7"}),Ot.jsx("p",{className:"text-sm text-white",style:{textShadow:"0 1px 2px rgba(0,0,0,0.25)"},children:"Marketing Agents"})]})})}),Ot.jsx(mo,{className:"card-entrance stagger-4",children:Ot.jsx(fo,{className:"group hover:shadow-[0_20px_45px_rgba(205,127,50,0.25)] transition-all duration-300",children:Ot.jsxs(Mn,{className:"p-6 text-center",children:[Ot.jsx(xo,{color:"rgba(205, 127, 50, 0.8)",children:Ot.jsx(Us,{className:"h-10 w-10 mx-auto mb-4 text-[var(--fl-bronze)]"})}),Ot.jsx("h3",{className:"font-bold text-3xl mb-2 text-white",style:{textShadow:"0 2px 6px rgba(0,0,0,0.35)"},children:"8"}),Ot.jsx("p",{className:"text-sm text-white",style:{textShadow:"0 1px 2px rgba(0,0,0,0.25)"},children:"Marketplace Agents"})]})})})]})]})]}),Ot.jsxs("div",{className:"relative",style:{backgroundImage:"url('/backgrounds/colorful-series-circles-with-orange-blue-colors_889056-245202.jpg')",backgroundSize:"cover",backgroundPosition:"center",backgroundAttachment:"fixed"},children:[Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/88 via-blue-50/85 to-orange-50/85 backdrop-blur-sm"}),Ot.jsx("div",{className:"container mx-auto px-4 py-16 relative z-10",children:Ot.jsx(iq,{})})]})]})}function oq(){const{toast:e}=Nn(),t=hn.useRef(null),[n,r]=hn.useState(null),[s,i]=hn.useState(null),[a,o]=hn.useState("upload"),[l,c]=hn.useState(""),[d,u]=hn.useState(null),h=Fa({mutationFn:async e=>{const t=new FormData;e.file?t.append("image",e.file):e.url?t.append("imageUrl",e.url):e.base64&&t.append("imageBase64",e.base64);const n=await fetch("/api/ai/visual-search",{method:"POST",body:t,credentials:"include"});if(!n.ok)throw new Error(`${n.status}: ${n.statusText}`);return await n.json()},onSuccess:t=>{u(t),e({title:"Visual Search Complete",description:`Found ${t.products.length} products and ${t.businesses.length} businesses`})},onError:t=>{u({products:[{id:"1",name:"Sunset Beach Canvas Print",description:"Beautiful Florida sunset captured on canvas",price:89.99,image:"/api/placeholder/300/200",businessId:"b1",businessName:"Florida Art Gallery",rating:4.8,similarity:.92,tags:["art","beach","sunset","florida"]},{id:"2",name:"Beach Photography Workshop",description:"Learn to capture stunning beach scenes",price:149.99,image:"/api/placeholder/300/200",businessId:"b2",businessName:"Coastal Photography Studio",rating:4.9,similarity:.87,tags:["photography","workshop","beach"]},{id:"3",name:"Tropical Sunset Tour",description:"Guided sunset viewing experience",price:45,image:"/api/placeholder/300/200",businessId:"b3",businessName:"Florida Adventures",rating:4.7,similarity:.85,tags:["tours","sunset","experience"]}],businesses:[{id:"b1",name:"Florida Art Gallery",description:"Local art featuring Florida landscapes",image:"/api/placeholder/400/200",category:"Art & Photography",rating:4.8,location:"Miami Beach, FL",relevance:.95},{id:"b2",name:"Coastal Photography Studio",description:"Professional photography services and workshops",image:"/api/placeholder/400/200",category:"Photography",rating:4.9,location:"Fort Lauderdale, FL",relevance:.88}],analysis:{detectedObjects:["sunset","beach","palm trees","ocean","clouds"],colors:["#FF6B35","#FFA500","#4169E1","#FFD700","#87CEEB"],style:"Landscape Photography",category:"Nature & Outdoors",suggestedSearchTerms:["florida sunset","beach art","coastal photography","tropical landscape"]}}),e({title:"Using Demo Results",description:"Showing sample results. Connect GPT-4 Vision API for real search."})}}),p=hn.useCallback(async()=>{try{const t=await navigator.mediaDevices.getUserMedia({video:!0}),n=document.createElement("video");n.srcObject=t,n.play(),setTimeout(()=>{const s=document.createElement("canvas");s.width=n.videoWidth,s.height=n.videoHeight;const i=s.getContext("2d");i?.drawImage(n,0,0);const a=s.toDataURL("image/jpeg");r(a),t.getTracks().forEach(e=>e.stop()),e({title:"Photo Captured",description:"Your photo has been captured successfully"})},1e3)}catch(t){e({title:"Camera Access Denied",description:"Please allow camera access to use this feature",variant:"destructive"})}},[e]);return Ot.jsxs("div",{className:"space-y-6",children:[Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{children:[Ot.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent",children:"Visual Search"}),Ot.jsx("p",{className:"text-muted-foreground",children:"Search for products and businesses using images"})]}),Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx($r,{className:"w-6 h-6 text-purple-600"}),Ot.jsx(An,{className:"w-5 h-5 text-blue-600 animate-pulse"})]})]}),Ot.jsxs(Sn,{className:"bg-gradient-to-br from-slate-800 via-slate-900 to-slate-950 border-2 border-slate-700/50 hover:border-cyan-400/80 transition-all duration-500 hover:shadow-[0_0_40px_rgba(0,255,255,0.4)] cyber-3d-lift relative overflow-hidden group",children:[Ot.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-500 cyber-metallic-shine z-0"}),Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-cyan-500/10 via-purple-500/10 to-pink-500/10 opacity-0 group-hover:opacity-100 transition-all duration-500 mix-blend-overlay pointer-events-none z-0"}),Ot.jsx("div",{className:"absolute inset-0 cyber-scan-line pointer-events-none z-0"}),Ot.jsxs(Lr,{className:"relative z-10",children:[Ot.jsx(zr,{className:"text-white",children:"Select Image"}),Ot.jsx(Ur,{children:"Choose how you want to provide an image for search"})]}),Ot.jsxs(Mn,{className:"relative z-10",children:[Ot.jsxs(qs,{value:a,onValueChange:e=>o(e),children:[Ot.jsxs(Xs,{className:"grid w-full grid-cols-3",children:[Ot.jsxs(Ks,{value:"upload",children:[Ot.jsx(ai,{className:"w-4 h-4 mr-2"}),"Upload"]}),Ot.jsxs(Ks,{value:"camera",children:[Ot.jsx(Ws,{className:"w-4 h-4 mr-2"}),"Camera"]}),Ot.jsxs(Ks,{value:"url",children:[Ot.jsx(Pr,{className:"w-4 h-4 mr-2"}),"URL"]})]}),Ot.jsx(Ys,{value:"upload",className:"space-y-4",children:Ot.jsx("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-700 rounded-lg p-8 text-center",children:n&&!l?Ot.jsxs("div",{className:"relative inline-block",children:[Ot.jsx("img",{src:n,alt:"Selected",className:"max-w-full max-h-64 rounded-lg"}),Ot.jsx(Ln,{variant:"destructive",size:"icon",className:"absolute top-2 right-2",onClick:()=>{r(null),i(null)},children:Ot.jsx(jn,{className:"w-4 h-4"})})]}):Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(ai,{className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),Ot.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-2",children:"Drag and drop an image here, or click to browse"}),Ot.jsx("input",{ref:t,type:"file",accept:"image/*",onChange:t=>{const n=t.target.files?.[0];if(n){if(n.size>5242880)return void e({title:"File too large",description:"Please upload an image smaller than 5MB",variant:"destructive"});const t=new FileReader;t.onloadend=()=>{r(t.result),i(n)},t.readAsDataURL(n)}},className:"hidden"}),Ot.jsx(Ln,{variant:"outline",onClick:()=>t.current?.click(),children:"Choose Image"})]})})}),Ot.jsx(Ys,{value:"camera",className:"space-y-4",children:Ot.jsx("div",{className:"text-center py-8",children:n&&n.startsWith("data:")?Ot.jsxs("div",{className:"relative inline-block",children:[Ot.jsx("img",{src:n,alt:"Captured",className:"max-w-full max-h-64 rounded-lg"}),Ot.jsx(Ln,{variant:"destructive",size:"icon",className:"absolute top-2 right-2",onClick:()=>r(null),children:Ot.jsx(jn,{className:"w-4 h-4"})})]}):Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(Ws,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),Ot.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Use your device camera to capture an image"}),Ot.jsxs(Ln,{onClick:p,children:[Ot.jsx(Ws,{className:"w-4 h-4 mr-2"}),"Open Camera"]})]})})}),Ot.jsx(Ys,{value:"url",className:"space-y-4",children:Ot.jsxs("div",{className:"space-y-4",children:[Ot.jsxs("div",{children:[Ot.jsx(ws,{htmlFor:"imageUrl",children:"Image URL"}),Ot.jsxs("div",{className:"flex gap-2 mt-1",children:[Ot.jsx(zn,{id:"imageUrl",type:"url",placeholder:"https://example.com/image.jpg",value:l,onChange:e=>c(e.target.value)}),Ot.jsx(Ln,{onClick:()=>{if(l)try{new URL(l),r(l)}catch{e({title:"Invalid URL",description:"Please enter a valid image URL",variant:"destructive"})}else e({title:"URL Required",description:"Please enter an image URL",variant:"destructive"})},children:"Load"})]})]}),n&&l&&Ot.jsxs("div",{className:"relative inline-block",children:[Ot.jsx("img",{src:n,alt:"From URL",className:"max-w-full max-h-64 rounded-lg",onError:()=>{r(null),e({title:"Failed to load image",description:"The image URL could not be loaded",variant:"destructive"})}}),Ot.jsx(Ln,{variant:"destructive",size:"icon",className:"absolute top-2 right-2",onClick:()=>{r(null),c("")},children:Ot.jsx(jn,{className:"w-4 h-4"})})]})]})})]}),n&&Ot.jsxs("div",{className:"flex gap-3 mt-6",children:[Ot.jsx(Ln,{className:"flex-1",onClick:()=>{n?s?h.mutate({file:s}):l?h.mutate({url:l}):n.startsWith("data:")&&h.mutate({base64:n}):e({title:"No Image Selected",description:"Please select an image to search",variant:"destructive"})},disabled:h.isPending,children:h.isPending?Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(Fr,{className:"w-4 h-4 mr-2 animate-spin"}),"Analyzing Image..."]}):Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(Fn,{className:"w-4 h-4 mr-2"}),"Search Similar Products"]})}),Ot.jsx(Ln,{variant:"outline",onClick:()=>{r(null),i(null),c(""),u(null)},children:"Clear"})]})]})]}),d&&Ot.jsx(jo,{children:Ot.jsxs(wo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[Ot.jsxs(Sn,{className:"bg-gradient-to-br from-slate-800 via-slate-900 to-slate-950 border-2 border-slate-700/50 hover:border-purple-400/80 transition-all duration-500 hover:shadow-[0_0_40px_rgba(168,85,247,0.4)] cyber-3d-lift relative overflow-hidden group",children:[Ot.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-500 cyber-metallic-shine z-0"}),Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-500/10 via-pink-500/10 to-purple-500/10 opacity-0 group-hover:opacity-100 transition-all duration-500 mix-blend-overlay pointer-events-none z-0"}),Ot.jsx("div",{className:"absolute inset-0 cyber-scan-line pointer-events-none z-0"}),Ot.jsx(Lr,{className:"relative z-10",children:Ot.jsxs(zr,{className:"flex items-center gap-2 text-white",children:[Ot.jsx(An,{className:"w-5 h-5 text-purple-400"}),"AI Image Analysis"]})}),Ot.jsxs(Mn,{className:"space-y-4 relative z-10",children:[Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-sm font-medium mb-2",children:"Detected Objects:"}),Ot.jsx("div",{className:"flex flex-wrap gap-2",children:d.analysis.detectedObjects.map((e,t)=>Ot.jsx(Tn,{variant:"secondary",children:e},t))})]}),Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-sm font-medium mb-2",children:"Color Palette:"}),Ot.jsx("div",{className:"flex gap-2",children:d.analysis.colors.map((e,t)=>Ot.jsx("div",{className:"w-10 h-10 rounded-lg border-2 border-gray-300",style:{backgroundColor:e},title:e},t))})]}),Ot.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-sm text-muted-foreground",children:"Style"}),Ot.jsx("p",{className:"font-medium",children:d.analysis.style})]}),Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-sm text-muted-foreground",children:"Category"}),Ot.jsx("p",{className:"font-medium",children:d.analysis.category})]})]}),Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-sm font-medium mb-2",children:"Suggested Searches:"}),Ot.jsx("div",{className:"flex flex-wrap gap-2",children:d.analysis.suggestedSearchTerms.map((e,t)=>Ot.jsxs(Ln,{variant:"outline",size:"sm",children:[Ot.jsx(Fn,{className:"w-3 h-3 mr-1"}),e]},t))})]})]})]}),Ot.jsxs(Sn,{className:"bg-gradient-to-br from-slate-800 via-slate-900 to-slate-950 border-2 border-slate-700/50 hover:border-cyan-400/80 transition-all duration-500 hover:shadow-[0_0_40px_rgba(0,255,255,0.4)] cyber-3d-lift relative overflow-hidden group",children:[Ot.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-500 cyber-metallic-shine z-0"}),Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-cyan-500/10 via-purple-500/10 to-pink-500/10 opacity-0 group-hover:opacity-100 transition-all duration-500 mix-blend-overlay pointer-events-none z-0"}),Ot.jsx("div",{className:"absolute inset-0 cyber-scan-line pointer-events-none z-0"}),Ot.jsx(Lr,{className:"relative z-10",children:Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsx(zr,{className:"text-white",children:"Similar Products"}),Ot.jsxs(Tn,{variant:"secondary",children:[d.products.length," found"]})]})}),Ot.jsx(Mn,{className:"relative z-10",children:Ot.jsx(eC,{className:"h-[400px]",children:Ot.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:d.products.map(e=>Ot.jsx(wo.div,{initial:{opacity:0},animate:{opacity:1},className:"group cursor-pointer",children:Ot.jsxs(Sn,{className:"bg-gradient-to-br from-slate-800 via-slate-900 to-slate-950 border border-slate-700/50 hover:border-cyan-400/80 transition-all duration-300 hover:shadow-[0_0_20px_rgba(0,255,255,0.4)] overflow-hidden",children:[Ot.jsxs("div",{className:"relative",children:[Ot.jsx("img",{src:e.image,alt:e.name,className:"w-full h-48 object-cover"}),Ot.jsxs(Tn,{className:"absolute top-2 right-2",variant:e.similarity>.9?"default":"secondary",children:[Math.round(100*e.similarity),"% Match"]})]}),Ot.jsxs(Mn,{className:"p-4",children:[Ot.jsx("h4",{className:"font-semibold line-clamp-1",children:e.name}),Ot.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mt-1",children:e.description}),Ot.jsxs("div",{className:"flex items-center justify-between mt-3",children:[Ot.jsxs("span",{className:"text-lg font-bold",children:["$",e.price]}),Ot.jsxs("div",{className:"flex items-center gap-1",children:[Ot.jsx(In,{className:"w-4 h-4 text-yellow-500 fill-current"}),Ot.jsx("span",{className:"text-sm",children:e.rating})]})]}),Ot.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["by ",e.businessName]}),Ot.jsxs("div",{className:"flex gap-2 mt-3",children:[Ot.jsxs(Ln,{size:"sm",className:"flex-1",children:[Ot.jsx(Ir,{className:"w-3 h-3 mr-1"}),"Add to Cart"]}),Ot.jsx(Yn,{href:`/product/${e.id}`,children:Ot.jsx(Ln,{size:"sm",variant:"outline",children:"View"})})]})]})]})},e.id))})})})]}),Ot.jsxs(Sn,{className:"bg-gradient-to-br from-slate-800 via-slate-900 to-slate-950 border-2 border-slate-700/50 hover:border-cyan-400/80 transition-all duration-500 hover:shadow-[0_0_40px_rgba(0,255,255,0.4)] cyber-3d-lift relative overflow-hidden group",children:[Ot.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-500 cyber-metallic-shine z-0"}),Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-cyan-500/10 via-purple-500/10 to-pink-500/10 opacity-0 group-hover:opacity-100 transition-all duration-500 mix-blend-overlay pointer-events-none z-0"}),Ot.jsx("div",{className:"absolute inset-0 cyber-scan-line pointer-events-none z-0"}),Ot.jsx(Lr,{className:"relative z-10",children:Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsx(zr,{className:"text-white",children:"Related Businesses"}),Ot.jsxs(Tn,{variant:"secondary",children:[d.businesses.length," found"]})]})}),Ot.jsx(Mn,{className:"relative z-10",children:Ot.jsx("div",{className:"space-y-4",children:d.businesses.map(e=>Ot.jsx(Yn,{href:`/business/${e.id}`,children:Ot.jsx(Sn,{className:"bg-gradient-to-br from-slate-800 via-slate-900 to-slate-950 border border-slate-700/50 hover:border-cyan-400/80 transition-all duration-300 hover:shadow-[0_0_20px_rgba(0,255,255,0.4)] cursor-pointer",children:Ot.jsx(Mn,{className:"p-4",children:Ot.jsxs("div",{className:"flex gap-4",children:[Ot.jsx("img",{src:e.image,alt:e.name,className:"w-24 h-24 rounded-lg object-cover"}),Ot.jsxs("div",{className:"flex-1",children:[Ot.jsxs("div",{className:"flex items-start justify-between",children:[Ot.jsxs("div",{children:[Ot.jsx("h4",{className:"font-semibold",children:e.name}),Ot.jsx("p",{className:"text-sm text-muted-foreground",children:e.category})]}),Ot.jsxs(Tn,{variant:"outline",children:[Math.round(100*e.relevance),"% Relevant"]})]}),Ot.jsx("p",{className:"text-sm mt-2 line-clamp-2",children:e.description}),Ot.jsxs("div",{className:"flex items-center gap-4 mt-3 text-sm",children:[Ot.jsxs("div",{className:"flex items-center gap-1",children:[Ot.jsx(Bn,{className:"w-3 h-3"}),e.location]}),Ot.jsxs("div",{className:"flex items-center gap-1",children:[Ot.jsx(In,{className:"w-3 h-3 text-yellow-500 fill-current"}),e.rating]})]})]}),Ot.jsx(Ps,{className:"w-5 h-5 text-muted-foreground"})]})})})},e.id))})})]})]})})]})}function lq(e){let t=e[0],n=e[1],r=e[2];return Math.sqrt(t*t+n*n+r*r)}function cq(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function dq(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function uq(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function hq(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function pq(e){let t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r}function mq(e,t){let n=t[0],r=t[1],s=t[2],i=n*n+r*r+s*s;return i>0&&(i=1/Math.sqrt(i)),e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e}function fq(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function gq(e,t,n){let r=t[0],s=t[1],i=t[2],a=n[0],o=n[1],l=n[2];return e[0]=s*l-i*o,e[1]=i*a-r*l,e[2]=r*o-s*a,e}const xq=function(){const e=[0,0,0],t=[0,0,0];return function(n,r){cq(e,n),cq(t,r),mq(e,e),mq(t,t);let s=fq(e,t);return s>1?0:s<-1?Math.PI:Math.acos(s)}}();class vq extends Array{constructor(e=0,t=e,n=e){return super(e,t,n),this}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}set x(e){this[0]=e}set y(e){this[1]=e}set z(e){this[2]=e}set(e,t=e,n=e){return e.length?this.copy(e):(function(e,t,n,r){e[0]=t,e[1]=n,e[2]=r}(this,e,t,n),this)}copy(e){return cq(this,e),this}add(e,t){return t?dq(this,e,t):dq(this,this,e),this}sub(e,t){return t?uq(this,e,t):uq(this,this,e),this}multiply(e){var t,n,r;return e.length?(n=this,r=e,(t=this)[0]=n[0]*r[0],t[1]=n[1]*r[1],t[2]=n[2]*r[2]):hq(this,this,e),this}divide(e){var t,n,r;return e.length?(n=this,r=e,(t=this)[0]=n[0]/r[0],t[1]=n[1]/r[1],t[2]=n[2]/r[2]):hq(this,this,1/e),this}inverse(e=this){var t,n;return n=e,(t=this)[0]=1/n[0],t[1]=1/n[1],t[2]=1/n[2],this}len(){return lq(this)}distance(e){return e?function(e,t){let n=t[0]-e[0],r=t[1]-e[1],s=t[2]-e[2];return Math.sqrt(n*n+r*r+s*s)}(this,e):lq(this)}squaredLen(){return pq(this)}squaredDistance(e){return e?function(e,t){let n=t[0]-e[0],r=t[1]-e[1],s=t[2]-e[2];return n*n+r*r+s*s}(this,e):pq(this)}negate(e=this){var t,n;return n=e,(t=this)[0]=-n[0],t[1]=-n[1],t[2]=-n[2],this}cross(e,t){return t?gq(this,e,t):gq(this,this,e),this}scale(e){return hq(this,this,e),this}normalize(){return mq(this,this),this}dot(e){return fq(this,e)}equals(e){return n=e,(t=this)[0]===n[0]&&t[1]===n[1]&&t[2]===n[2];var t,n}applyMatrix3(e){return function(e,t,n){let r=t[0],s=t[1],i=t[2];e[0]=r*n[0]+s*n[3]+i*n[6],e[1]=r*n[1]+s*n[4]+i*n[7],e[2]=r*n[2]+s*n[5]+i*n[8]}(this,this,e),this}applyMatrix4(e){return function(e,t,n){let r=t[0],s=t[1],i=t[2],a=n[3]*r+n[7]*s+n[11]*i+n[15];a=a||1,e[0]=(n[0]*r+n[4]*s+n[8]*i+n[12])/a,e[1]=(n[1]*r+n[5]*s+n[9]*i+n[13])/a,e[2]=(n[2]*r+n[6]*s+n[10]*i+n[14])/a}(this,this,e),this}scaleRotateMatrix4(e){return function(e,t,n){let r=t[0],s=t[1],i=t[2],a=n[3]*r+n[7]*s+n[11]*i+n[15];a=a||1,e[0]=(n[0]*r+n[4]*s+n[8]*i)/a,e[1]=(n[1]*r+n[5]*s+n[9]*i)/a,e[2]=(n[2]*r+n[6]*s+n[10]*i)/a}(this,this,e),this}applyQuaternion(e){return function(e,t,n){let r=t[0],s=t[1],i=t[2],a=n[0],o=n[1],l=n[2],c=o*i-l*s,d=l*r-a*i,u=a*s-o*r,h=o*u-l*d,p=l*c-a*u,m=a*d-o*c,f=2*n[3];c*=f,d*=f,u*=f,h*=2,p*=2,m*=2,e[0]=r+c+h,e[1]=s+d+p,e[2]=i+u+m}(this,this,e),this}angle(e){return xq(this,e)}lerp(e,t){return function(e,t,n,r){let s=t[0],i=t[1],a=t[2];e[0]=s+r*(n[0]-s),e[1]=i+r*(n[1]-i),e[2]=a+r*(n[2]-a)}(this,this,e,t),this}smoothLerp(e,t,n){return function(e,t,n,r,s){const i=Math.exp(-r*s);let a=t[0],o=t[1],l=t[2];e[0]=n[0]+(a-n[0])*i,e[1]=n[1]+(o-n[1])*i,e[2]=n[2]+(l-n[2])*i}(this,this,e,t,n),this}clone(){return new vq(this[0],this[1],this[2])}fromArray(e,t=0){return this[0]=e[t],this[1]=e[t+1],this[2]=e[t+2],this}toArray(e=[],t=0){return e[t]=this[0],e[t+1]=this[1],e[t+2]=this[2],e}transformDirection(e){const t=this[0],n=this[1],r=this[2];return this[0]=e[0]*t+e[4]*n+e[8]*r,this[1]=e[1]*t+e[5]*n+e[9]*r,this[2]=e[2]*t+e[6]*n+e[10]*r,this.normalize()}}const yq=new vq;let bq=1,wq=1,jq=!1;class Nq{constructor(e,t={}){e.canvas,this.gl=e,this.attributes=t,this.id=bq++,this.VAOs={},this.drawRange={start:0,count:0},this.instancedCount=0,this.gl.renderer.bindVertexArray(null),this.gl.renderer.currentGeometry=null,this.glState=this.gl.renderer.state;for(let n in t)this.addAttribute(n,t[n])}addAttribute(e,t){if(this.attributes[e]=t,t.id=wq++,t.size=t.size||1,t.type=t.type||(t.data.constructor===Float32Array?this.gl.FLOAT:t.data.constructor===Uint16Array?this.gl.UNSIGNED_SHORT:this.gl.UNSIGNED_INT),t.target="index"===e?this.gl.ELEMENT_ARRAY_BUFFER:this.gl.ARRAY_BUFFER,t.normalized=t.normalized||!1,t.stride=t.stride||0,t.offset=t.offset||0,t.count=t.count||(t.stride?t.data.byteLength/t.stride:t.data.length/t.size),t.divisor=t.instanced||0,t.needsUpdate=!1,t.usage=t.usage||this.gl.STATIC_DRAW,t.buffer||this.updateAttribute(t),t.divisor){if(this.isInstanced=!0,this.instancedCount&&this.instancedCount!==t.count*t.divisor)return this.instancedCount=Math.min(this.instancedCount,t.count*t.divisor);this.instancedCount=t.count*t.divisor}else"index"===e?this.drawRange.count=t.count:this.attributes.index||(this.drawRange.count=Math.max(this.drawRange.count,t.count))}updateAttribute(e){const t=!e.buffer;t&&(e.buffer=this.gl.createBuffer()),this.glState.boundBuffer!==e.buffer&&(this.gl.bindBuffer(e.target,e.buffer),this.glState.boundBuffer=e.buffer),t?this.gl.bufferData(e.target,e.data,e.usage):this.gl.bufferSubData(e.target,0,e.data),e.needsUpdate=!1}setIndex(e){this.addAttribute("index",e)}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}setInstancedCount(e){this.instancedCount=e}createVAO(e){this.VAOs[e.attributeOrder]=this.gl.renderer.createVertexArray(),this.gl.renderer.bindVertexArray(this.VAOs[e.attributeOrder]),this.bindAttributes(e)}bindAttributes(e){e.attributeLocations.forEach((e,{name:t,type:n})=>{if(!this.attributes[t])return;const r=this.attributes[t];this.gl.bindBuffer(r.target,r.buffer),this.glState.boundBuffer=r.buffer;let s=1;35674===n&&(s=2),35675===n&&(s=3),35676===n&&(s=4);const i=r.size/s,a=1===s?0:s*s*4,o=1===s?0:4*s;for(let l=0;l<s;l++)this.gl.vertexAttribPointer(e+l,i,r.type,r.normalized,r.stride+a,r.offset+l*o),this.gl.enableVertexAttribArray(e+l),this.gl.renderer.vertexAttribDivisor(e+l,r.divisor)}),this.attributes.index&&this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.attributes.index.buffer)}draw({program:e,mode:t=this.gl.TRIANGLES}){this.gl.renderer.currentGeometry!==`${this.id}_${e.attributeOrder}`&&(this.VAOs[e.attributeOrder]||this.createVAO(e),this.gl.renderer.bindVertexArray(this.VAOs[e.attributeOrder]),this.gl.renderer.currentGeometry=`${this.id}_${e.attributeOrder}`),e.attributeLocations.forEach((e,{name:t})=>{const n=this.attributes[t];n.needsUpdate&&this.updateAttribute(n)});let n=2;this.attributes.index?.type===this.gl.UNSIGNED_INT&&(n=4),this.isInstanced?this.attributes.index?this.gl.renderer.drawElementsInstanced(t,this.drawRange.count,this.attributes.index.type,this.attributes.index.offset+this.drawRange.start*n,this.instancedCount):this.gl.renderer.drawArraysInstanced(t,this.drawRange.start,this.drawRange.count,this.instancedCount):this.attributes.index?this.gl.drawElements(t,this.drawRange.count,this.attributes.index.type,this.attributes.index.offset+this.drawRange.start*n):this.gl.drawArrays(t,this.drawRange.start,this.drawRange.count)}getPosition(){const e=this.attributes.position;return e.data?e:jq?void 0:jq=!0}computeBoundingBox(e){e||(e=this.getPosition());const t=e.data,n=e.size;this.bounds||(this.bounds={min:new vq,max:new vq,center:new vq,scale:new vq,radius:1/0});const r=this.bounds.min,s=this.bounds.max,i=this.bounds.center,a=this.bounds.scale;r.set(1/0),s.set(-1/0);for(let o=0,l=t.length;o<l;o+=n){const e=t[o],n=t[o+1],i=t[o+2];r.x=Math.min(e,r.x),r.y=Math.min(n,r.y),r.z=Math.min(i,r.z),s.x=Math.max(e,s.x),s.y=Math.max(n,s.y),s.z=Math.max(i,s.z)}a.sub(s,r),i.add(r,s).divide(2)}computeBoundingSphere(e){e||(e=this.getPosition());const t=e.data,n=e.size;this.bounds||this.computeBoundingBox(e);let r=0;for(let s=0,i=t.length;s<i;s+=n)yq.fromArray(t,s),r=Math.max(r,this.bounds.center.squaredDistance(yq));this.bounds.radius=Math.sqrt(r)}remove(){for(let e in this.VAOs)this.gl.renderer.deleteVertexArray(this.VAOs[e]),delete this.VAOs[e];for(let e in this.attributes)this.gl.deleteBuffer(this.attributes[e].buffer),delete this.attributes[e]}}let _q=1;const Sq={};class Mq{constructor(e,{vertex:t,fragment:n,uniforms:r={},transparent:s=!1,cullFace:i=e.BACK,frontFace:a=e.CCW,depthTest:o=!0,depthWrite:l=!0,depthFunc:c=e.LEQUAL}={}){e.canvas,this.gl=e,this.uniforms=r,this.id=_q++,this.transparent=s,this.cullFace=i,this.frontFace=a,this.depthTest=o,this.depthWrite=l,this.depthFunc=c,this.blendFunc={},this.blendEquation={},this.stencilFunc={},this.stencilOp={},this.transparent&&!this.blendFunc.src&&(this.gl.renderer.premultipliedAlpha?this.setBlendFunc(this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA):this.setBlendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA)),this.vertexShader=e.createShader(e.VERTEX_SHADER),this.fragmentShader=e.createShader(e.FRAGMENT_SHADER),this.program=e.createProgram(),e.attachShader(this.program,this.vertexShader),e.attachShader(this.program,this.fragmentShader),this.setShaders({vertex:t,fragment:n})}setShaders({vertex:e,fragment:t}){if(e&&(this.gl.shaderSource(this.vertexShader,e),this.gl.compileShader(this.vertexShader),this.gl.getShaderInfoLog(this.vertexShader)),t&&(this.gl.shaderSource(this.fragmentShader,t),this.gl.compileShader(this.fragmentShader),this.gl.getShaderInfoLog(this.fragmentShader)),this.gl.linkProgram(this.program),!this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS))return;this.uniformLocations=new Map;let n=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_UNIFORMS);for(let i=0;i<n;i++){let e=this.gl.getActiveUniform(this.program,i);this.uniformLocations.set(e,this.gl.getUniformLocation(this.program,e.name));const t=e.name.match(/(\w+)/g);e.uniformName=t[0],e.nameComponents=t.slice(1)}this.attributeLocations=new Map;const r=[],s=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES);for(let i=0;i<s;i++){const e=this.gl.getActiveAttrib(this.program,i),t=this.gl.getAttribLocation(this.program,e.name);-1!==t&&(r[t]=e.name,this.attributeLocations.set(e,t))}this.attributeOrder=r.join("")}setBlendFunc(e,t,n,r){this.blendFunc.src=e,this.blendFunc.dst=t,this.blendFunc.srcAlpha=n,this.blendFunc.dstAlpha=r,e&&(this.transparent=!0)}setBlendEquation(e,t){this.blendEquation.modeRGB=e,this.blendEquation.modeAlpha=t}setStencilFunc(e,t,n){this.stencilRef=t,this.stencilFunc.func=e,this.stencilFunc.ref=t,this.stencilFunc.mask=n}setStencilOp(e,t,n){this.stencilOp.stencilFail=e,this.stencilOp.depthFail=t,this.stencilOp.depthPass=n}applyState(){this.depthTest?this.gl.renderer.enable(this.gl.DEPTH_TEST):this.gl.renderer.disable(this.gl.DEPTH_TEST),this.cullFace?this.gl.renderer.enable(this.gl.CULL_FACE):this.gl.renderer.disable(this.gl.CULL_FACE),this.blendFunc.src?this.gl.renderer.enable(this.gl.BLEND):this.gl.renderer.disable(this.gl.BLEND),this.cullFace&&this.gl.renderer.setCullFace(this.cullFace),this.gl.renderer.setFrontFace(this.frontFace),this.gl.renderer.setDepthMask(this.depthWrite),this.gl.renderer.setDepthFunc(this.depthFunc),this.blendFunc.src&&this.gl.renderer.setBlendFunc(this.blendFunc.src,this.blendFunc.dst,this.blendFunc.srcAlpha,this.blendFunc.dstAlpha),this.gl.renderer.setBlendEquation(this.blendEquation.modeRGB,this.blendEquation.modeAlpha),this.stencilFunc.func||this.stencilOp.stencilFail?this.gl.renderer.enable(this.gl.STENCIL_TEST):this.gl.renderer.disable(this.gl.STENCIL_TEST),this.gl.renderer.setStencilFunc(this.stencilFunc.func,this.stencilFunc.ref,this.stencilFunc.mask),this.gl.renderer.setStencilOp(this.stencilOp.stencilFail,this.stencilOp.depthFail,this.stencilOp.depthPass)}use({flipFaces:e=!1}={}){let t=-1;this.gl.renderer.state.currentProgram===this.id||(this.gl.useProgram(this.program),this.gl.renderer.state.currentProgram=this.id),this.uniformLocations.forEach((e,n)=>{let r=this.uniforms[n.uniformName];for(const t of n.nameComponents){if(!r)break;if(!(t in r)){if(Array.isArray(r.value))break;r=void 0;break}r=r[t]}if(!r)return kq(`Active uniform ${n.name} has not been supplied`);if(r&&void 0===r.value)return kq(`${n.name} uniform is missing a value parameter`);if(r.value.texture)return t+=1,r.value.update(t),Cq(this.gl,n.type,e,t);if(r.value.length&&r.value[0].texture){const s=[];return r.value.forEach(e=>{t+=1,e.update(t),s.push(t)}),Cq(this.gl,n.type,e,s)}Cq(this.gl,n.type,e,r.value)}),this.applyState(),e&&this.gl.renderer.setFrontFace(this.frontFace===this.gl.CCW?this.gl.CW:this.gl.CCW)}remove(){this.gl.deleteProgram(this.program)}}function Cq(e,t,n,r){r=r.length?function(e){const t=e.length,n=e[0].length;if(void 0===n)return e;const r=t*n;let s=Sq[r];s||(Sq[r]=s=new Float32Array(r));for(let i=0;i<t;i++)s.set(e[i],i*n);return s}(r):r;const s=e.renderer.state.uniformLocations.get(n);if(r.length)if(void 0===s||s.length!==r.length)e.renderer.state.uniformLocations.set(n,r.slice(0));else{if(function(e,t){if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}(s,r))return;s.set?s.set(r):function(e,t){for(let n=0,r=e.length;n<r;n++)e[n]=t[n]}(s,r),e.renderer.state.uniformLocations.set(n,s)}else{if(s===r)return;e.renderer.state.uniformLocations.set(n,r)}switch(t){case 5126:return r.length?e.uniform1fv(n,r):e.uniform1f(n,r);case 35664:return e.uniform2fv(n,r);case 35665:return e.uniform3fv(n,r);case 35666:return e.uniform4fv(n,r);case 35670:case 5124:case 35678:case 36306:case 35680:case 36289:return r.length?e.uniform1iv(n,r):e.uniform1i(n,r);case 35671:case 35667:return e.uniform2iv(n,r);case 35672:case 35668:return e.uniform3iv(n,r);case 35673:case 35669:return e.uniform4iv(n,r);case 35674:return e.uniformMatrix2fv(n,!1,r);case 35675:return e.uniformMatrix3fv(n,!1,r);case 35676:return e.uniformMatrix4fv(n,!1,r)}}let Eq=0;function kq(e){Eq>100||Eq++}const Aq=new vq;let Tq=1;class Pq{constructor({canvas:e=document.createElement("canvas"),width:t=300,height:n=150,dpr:r=1,alpha:s=!1,depth:i=!0,stencil:a=!1,antialias:o=!1,premultipliedAlpha:l=!1,preserveDrawingBuffer:c=!1,powerPreference:d="default",autoClear:u=!0,webgl:h=2}={}){const p={alpha:s,depth:i,stencil:a,antialias:o,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:d};this.dpr=r,this.alpha=s,this.color=!0,this.depth=i,this.stencil=a,this.premultipliedAlpha=l,this.autoClear=u,this.id=Tq++,2===h&&(this.gl=e.getContext("webgl2",p)),this.isWebgl2=!!this.gl,this.gl||(this.gl=e.getContext("webgl",p)),this.gl,this.gl.renderer=this,this.setSize(t,n),this.state={},this.state.blendFunc={src:this.gl.ONE,dst:this.gl.ZERO},this.state.blendEquation={modeRGB:this.gl.FUNC_ADD},this.state.cullFace=!1,this.state.frontFace=this.gl.CCW,this.state.depthMask=!0,this.state.depthFunc=this.gl.LEQUAL,this.state.premultiplyAlpha=!1,this.state.flipY=!1,this.state.unpackAlignment=4,this.state.framebuffer=null,this.state.viewport={x:0,y:0,width:null,height:null},this.state.textureUnits=[],this.state.activeTextureUnit=0,this.state.boundBuffer=null,this.state.uniformLocations=new Map,this.state.currentProgram=null,this.extensions={},this.isWebgl2?(this.getExtension("EXT_color_buffer_float"),this.getExtension("OES_texture_float_linear")):(this.getExtension("OES_texture_float"),this.getExtension("OES_texture_float_linear"),this.getExtension("OES_texture_half_float"),this.getExtension("OES_texture_half_float_linear"),this.getExtension("OES_element_index_uint"),this.getExtension("OES_standard_derivatives"),this.getExtension("EXT_sRGB"),this.getExtension("WEBGL_depth_texture"),this.getExtension("WEBGL_draw_buffers")),this.getExtension("WEBGL_compressed_texture_astc"),this.getExtension("EXT_texture_compression_bptc"),this.getExtension("WEBGL_compressed_texture_s3tc"),this.getExtension("WEBGL_compressed_texture_etc1"),this.getExtension("WEBGL_compressed_texture_pvrtc"),this.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),this.vertexAttribDivisor=this.getExtension("ANGLE_instanced_arrays","vertexAttribDivisor","vertexAttribDivisorANGLE"),this.drawArraysInstanced=this.getExtension("ANGLE_instanced_arrays","drawArraysInstanced","drawArraysInstancedANGLE"),this.drawElementsInstanced=this.getExtension("ANGLE_instanced_arrays","drawElementsInstanced","drawElementsInstancedANGLE"),this.createVertexArray=this.getExtension("OES_vertex_array_object","createVertexArray","createVertexArrayOES"),this.bindVertexArray=this.getExtension("OES_vertex_array_object","bindVertexArray","bindVertexArrayOES"),this.deleteVertexArray=this.getExtension("OES_vertex_array_object","deleteVertexArray","deleteVertexArrayOES"),this.drawBuffers=this.getExtension("WEBGL_draw_buffers","drawBuffers","drawBuffersWEBGL"),this.parameters={},this.parameters.maxTextureUnits=this.gl.getParameter(this.gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS),this.parameters.maxAnisotropy=this.getExtension("EXT_texture_filter_anisotropic")?this.gl.getParameter(this.getExtension("EXT_texture_filter_anisotropic").MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}setSize(e,t){this.width=e,this.height=t,this.gl.canvas.width=e*this.dpr,this.gl.canvas.height=t*this.dpr,this.gl.canvas.style&&Object.assign(this.gl.canvas.style,{width:e+"px",height:t+"px"})}setViewport(e,t,n=0,r=0){this.state.viewport.width===e&&this.state.viewport.height===t||(this.state.viewport.width=e,this.state.viewport.height=t,this.state.viewport.x=n,this.state.viewport.y=r,this.gl.viewport(n,r,e,t))}setScissor(e,t,n=0,r=0){this.gl.scissor(n,r,e,t)}enable(e){!0!==this.state[e]&&(this.gl.enable(e),this.state[e]=!0)}disable(e){!1!==this.state[e]&&(this.gl.disable(e),this.state[e]=!1)}setBlendFunc(e,t,n,r){this.state.blendFunc.src===e&&this.state.blendFunc.dst===t&&this.state.blendFunc.srcAlpha===n&&this.state.blendFunc.dstAlpha===r||(this.state.blendFunc.src=e,this.state.blendFunc.dst=t,this.state.blendFunc.srcAlpha=n,this.state.blendFunc.dstAlpha=r,void 0!==n?this.gl.blendFuncSeparate(e,t,n,r):this.gl.blendFunc(e,t))}setBlendEquation(e,t){e=e||this.gl.FUNC_ADD,this.state.blendEquation.modeRGB===e&&this.state.blendEquation.modeAlpha===t||(this.state.blendEquation.modeRGB=e,this.state.blendEquation.modeAlpha=t,void 0!==t?this.gl.blendEquationSeparate(e,t):this.gl.blendEquation(e))}setCullFace(e){this.state.cullFace!==e&&(this.state.cullFace=e,this.gl.cullFace(e))}setFrontFace(e){this.state.frontFace!==e&&(this.state.frontFace=e,this.gl.frontFace(e))}setDepthMask(e){this.state.depthMask!==e&&(this.state.depthMask=e,this.gl.depthMask(e))}setDepthFunc(e){this.state.depthFunc!==e&&(this.state.depthFunc=e,this.gl.depthFunc(e))}setStencilMask(e){this.state.stencilMask!==e&&(this.state.stencilMask=e,this.gl.stencilMask(e))}setStencilFunc(e,t,n){this.state.stencilFunc===e&&this.state.stencilRef===t&&this.state.stencilFuncMask===n||(this.state.stencilFunc=e||this.gl.ALWAYS,this.state.stencilRef=t||0,this.state.stencilFuncMask=n||0,this.gl.stencilFunc(e||this.gl.ALWAYS,t||0,n||0))}setStencilOp(e,t,n){this.state.stencilFail===e&&this.state.stencilDepthFail===t&&this.state.stencilDepthPass===n||(this.state.stencilFail=e,this.state.stencilDepthFail=t,this.state.stencilDepthPass=n,this.gl.stencilOp(e,t,n))}activeTexture(e){this.state.activeTextureUnit!==e&&(this.state.activeTextureUnit=e,this.gl.activeTexture(this.gl.TEXTURE0+e))}bindFramebuffer({target:e=this.gl.FRAMEBUFFER,buffer:t=null}={}){this.state.framebuffer!==t&&(this.state.framebuffer=t,this.gl.bindFramebuffer(e,t))}getExtension(e,t,n){return t&&this.gl[t]?this.gl[t].bind(this.gl):(this.extensions[e]||(this.extensions[e]=this.gl.getExtension(e)),t?this.extensions[e]?this.extensions[e][n].bind(this.extensions[e]):null:this.extensions[e])}sortOpaque(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program.id!==t.program.id?e.program.id-t.program.id:e.zDepth!==t.zDepth?e.zDepth-t.zDepth:t.id-e.id}sortTransparent(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.zDepth!==t.zDepth?t.zDepth-e.zDepth:t.id-e.id}sortUI(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program.id!==t.program.id?e.program.id-t.program.id:t.id-e.id}getRenderList({scene:e,camera:t,frustumCull:n,sort:r}){let s=[];if(t&&n&&t.updateFrustum(),e.traverse(e=>{if(!e.visible)return!0;e.draw&&(n&&e.frustumCulled&&t&&!t.frustumIntersectsMesh(e)||s.push(e))}),r){const e=[],n=[],r=[];s.forEach(s=>{s.program.transparent?s.program.depthTest?n.push(s):r.push(s):e.push(s),s.zDepth=0,0===s.renderOrder&&s.program.depthTest&&t&&(s.worldMatrix.getTranslation(Aq),Aq.applyMatrix4(t.projectionViewMatrix),s.zDepth=Aq.z)}),e.sort(this.sortOpaque),n.sort(this.sortTransparent),r.sort(this.sortUI),s=e.concat(n,r)}return s}render({scene:e,camera:t,target:n=null,update:r=!0,sort:s=!0,frustumCull:i=!0,clear:a}){null===n?(this.bindFramebuffer(),this.setViewport(this.width*this.dpr,this.height*this.dpr)):(this.bindFramebuffer(n),this.setViewport(n.width,n.height)),(a||this.autoClear&&!1!==a)&&(!this.depth||n&&!n.depth||(this.enable(this.gl.DEPTH_TEST),this.setDepthMask(!0)),(this.stencil||!n||n.stencil)&&(this.enable(this.gl.STENCIL_TEST),this.setStencilMask(255)),this.gl.clear((this.color?this.gl.COLOR_BUFFER_BIT:0)|(this.depth?this.gl.DEPTH_BUFFER_BIT:0)|(this.stencil?this.gl.STENCIL_BUFFER_BIT:0))),r&&e.updateMatrixWorld(),t&&t.updateMatrixWorld();this.getRenderList({scene:e,camera:t,frustumCull:i,sort:s}).forEach(e=>{e.draw({camera:t})})}}function Oq(e,t,n){let r=t[0],s=t[1],i=t[2],a=t[3],o=n[0],l=n[1],c=n[2],d=n[3];return e[0]=r*d+a*o+s*c-i*l,e[1]=s*d+a*l+i*o-r*c,e[2]=i*d+a*c+r*l-s*o,e[3]=a*d-r*o-s*l-i*c,e}const Rq=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},Iq=function(e,t,n,r,s){return e[0]=t,e[1]=n,e[2]=r,e[3]=s,e},Dq=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},Lq=function(e,t){let n=t[0],r=t[1],s=t[2],i=t[3],a=n*n+r*r+s*s+i*i;return a>0&&(a=1/Math.sqrt(a)),e[0]=n*a,e[1]=r*a,e[2]=s*a,e[3]=i*a,e};class Fq extends Array{constructor(e=0,t=0,n=0,r=1){super(e,t,n,r),this.onChange=()=>{},this._target=this;const s=["0","1","2","3"];return new Proxy(this,{set(e,t){const n=Reflect.set(...arguments);return n&&s.includes(t)&&e.onChange(),n}})}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}get w(){return this[3]}set x(e){this._target[0]=e,this.onChange()}set y(e){this._target[1]=e,this.onChange()}set z(e){this._target[2]=e,this.onChange()}set w(e){this._target[3]=e,this.onChange()}identity(){var e;return(e=this._target)[0]=0,e[1]=0,e[2]=0,e[3]=1,this.onChange(),this}set(e,t,n,r){return e.length?this.copy(e):(Iq(this._target,e,t,n,r),this.onChange(),this)}rotateX(e){return function(e,t,n){n*=.5;let r=t[0],s=t[1],i=t[2],a=t[3],o=Math.sin(n),l=Math.cos(n);e[0]=r*l+a*o,e[1]=s*l+i*o,e[2]=i*l-s*o,e[3]=a*l-r*o}(this._target,this._target,e),this.onChange(),this}rotateY(e){return function(e,t,n){n*=.5;let r=t[0],s=t[1],i=t[2],a=t[3],o=Math.sin(n),l=Math.cos(n);e[0]=r*l-i*o,e[1]=s*l+a*o,e[2]=i*l+r*o,e[3]=a*l-s*o}(this._target,this._target,e),this.onChange(),this}rotateZ(e){return function(e,t,n){n*=.5;let r=t[0],s=t[1],i=t[2],a=t[3],o=Math.sin(n),l=Math.cos(n);e[0]=r*l+s*o,e[1]=s*l-r*o,e[2]=i*l+a*o,e[3]=a*l-i*o}(this._target,this._target,e),this.onChange(),this}inverse(e=this._target){return function(e,t){let n=t[0],r=t[1],s=t[2],i=t[3],a=n*n+r*r+s*s+i*i,o=a?1/a:0;e[0]=-n*o,e[1]=-r*o,e[2]=-s*o,e[3]=i*o}(this._target,e),this.onChange(),this}conjugate(e=this._target){var t,n;return t=this._target,n=e,t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=n[3],this.onChange(),this}copy(e){return Rq(this._target,e),this.onChange(),this}normalize(e=this._target){return Lq(this._target,e),this.onChange(),this}multiply(e,t){return t?Oq(this._target,e,t):Oq(this._target,this._target,e),this.onChange(),this}dot(e){return Dq(this._target,e)}fromMatrix3(e){return function(e,t){let n,r=t[0]+t[4]+t[8];if(r>0)n=Math.sqrt(r+1),e[3]=.5*n,n=.5/n,e[0]=(t[5]-t[7])*n,e[1]=(t[6]-t[2])*n,e[2]=(t[1]-t[3])*n;else{let r=0;t[4]>t[0]&&(r=1),t[8]>t[3*r+r]&&(r=2);let s=(r+1)%3,i=(r+2)%3;n=Math.sqrt(t[3*r+r]-t[3*s+s]-t[3*i+i]+1),e[r]=.5*n,n=.5/n,e[3]=(t[3*s+i]-t[3*i+s])*n,e[s]=(t[3*s+r]+t[3*r+s])*n,e[i]=(t[3*i+r]+t[3*r+i])*n}}(this._target,e),this.onChange(),this}fromEuler(e,t){return function(e,t,n="YXZ"){let r=Math.sin(.5*t[0]),s=Math.cos(.5*t[0]),i=Math.sin(.5*t[1]),a=Math.cos(.5*t[1]),o=Math.sin(.5*t[2]),l=Math.cos(.5*t[2]);"XYZ"===n?(e[0]=r*a*l+s*i*o,e[1]=s*i*l-r*a*o,e[2]=s*a*o+r*i*l,e[3]=s*a*l-r*i*o):"YXZ"===n?(e[0]=r*a*l+s*i*o,e[1]=s*i*l-r*a*o,e[2]=s*a*o-r*i*l,e[3]=s*a*l+r*i*o):"ZXY"===n?(e[0]=r*a*l-s*i*o,e[1]=s*i*l+r*a*o,e[2]=s*a*o+r*i*l,e[3]=s*a*l-r*i*o):"ZYX"===n?(e[0]=r*a*l-s*i*o,e[1]=s*i*l+r*a*o,e[2]=s*a*o-r*i*l,e[3]=s*a*l+r*i*o):"YZX"===n?(e[0]=r*a*l+s*i*o,e[1]=s*i*l+r*a*o,e[2]=s*a*o-r*i*l,e[3]=s*a*l-r*i*o):"XZY"===n&&(e[0]=r*a*l-s*i*o,e[1]=s*i*l-r*a*o,e[2]=s*a*o+r*i*l,e[3]=s*a*l+r*i*o)}(this._target,e,e.order),t||this.onChange(),this}fromAxisAngle(e,t){return function(e,t,n){n*=.5;let r=Math.sin(n);e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=Math.cos(n)}(this._target,e,t),this.onChange(),this}slerp(e,t){return function(e,t,n,r){let s,i,a,o,l,c=t[0],d=t[1],u=t[2],h=t[3],p=n[0],m=n[1],f=n[2],g=n[3];i=c*p+d*m+u*f+h*g,i<0&&(i=-i,p=-p,m=-m,f=-f,g=-g),1-i>1e-6?(s=Math.acos(i),a=Math.sin(s),o=Math.sin((1-r)*s)/a,l=Math.sin(r*s)/a):(o=1-r,l=r),e[0]=o*c+l*p,e[1]=o*d+l*m,e[2]=o*u+l*f,e[3]=o*h+l*g}(this._target,this._target,e,t),this.onChange(),this}fromArray(e,t=0){return this._target[0]=e[t],this._target[1]=e[t+1],this._target[2]=e[t+2],this._target[3]=e[t+3],this.onChange(),this}toArray(e=[],t=0){return e[t]=this[0],e[t+1]=this[1],e[t+2]=this[2],e[t+3]=this[3],e}}function zq(e){let t=e[0],n=e[1],r=e[2],s=e[3],i=e[4],a=e[5],o=e[6],l=e[7],c=e[8],d=e[9],u=e[10],h=e[11],p=e[12],m=e[13],f=e[14],g=e[15];return(t*a-n*i)*(u*g-h*f)-(t*o-r*i)*(d*g-h*m)+(t*l-s*i)*(d*f-u*m)+(n*o-r*a)*(c*g-h*p)-(n*l-s*a)*(c*f-u*p)+(r*l-s*o)*(c*m-d*p)}function Bq(e,t,n){let r=t[0],s=t[1],i=t[2],a=t[3],o=t[4],l=t[5],c=t[6],d=t[7],u=t[8],h=t[9],p=t[10],m=t[11],f=t[12],g=t[13],x=t[14],v=t[15],y=n[0],b=n[1],w=n[2],j=n[3];return e[0]=y*r+b*o+w*u+j*f,e[1]=y*s+b*l+w*h+j*g,e[2]=y*i+b*c+w*p+j*x,e[3]=y*a+b*d+w*m+j*v,y=n[4],b=n[5],w=n[6],j=n[7],e[4]=y*r+b*o+w*u+j*f,e[5]=y*s+b*l+w*h+j*g,e[6]=y*i+b*c+w*p+j*x,e[7]=y*a+b*d+w*m+j*v,y=n[8],b=n[9],w=n[10],j=n[11],e[8]=y*r+b*o+w*u+j*f,e[9]=y*s+b*l+w*h+j*g,e[10]=y*i+b*c+w*p+j*x,e[11]=y*a+b*d+w*m+j*v,y=n[12],b=n[13],w=n[14],j=n[15],e[12]=y*r+b*o+w*u+j*f,e[13]=y*s+b*l+w*h+j*g,e[14]=y*i+b*c+w*p+j*x,e[15]=y*a+b*d+w*m+j*v,e}function Uq(e,t){let n=t[0],r=t[1],s=t[2],i=t[4],a=t[5],o=t[6],l=t[8],c=t[9],d=t[10];return e[0]=Math.hypot(n,r,s),e[1]=Math.hypot(i,a,o),e[2]=Math.hypot(l,c,d),e}const Vq=function(){const e=[1,1,1];return function(t,n){let r=e;Uq(r,n);let s=1/r[0],i=1/r[1],a=1/r[2],o=n[0]*s,l=n[1]*i,c=n[2]*a,d=n[4]*s,u=n[5]*i,h=n[6]*a,p=n[8]*s,m=n[9]*i,f=n[10]*a,g=o+u+f,x=0;return g>0?(x=2*Math.sqrt(g+1),t[3]=.25*x,t[0]=(h-m)/x,t[1]=(p-c)/x,t[2]=(l-d)/x):o>u&&o>f?(x=2*Math.sqrt(1+o-u-f),t[3]=(h-m)/x,t[0]=.25*x,t[1]=(l+d)/x,t[2]=(p+c)/x):u>f?(x=2*Math.sqrt(1+u-o-f),t[3]=(p-c)/x,t[0]=(l+d)/x,t[1]=.25*x,t[2]=(h+m)/x):(x=2*Math.sqrt(1+f-o-u),t[3]=(l-d)/x,t[0]=(p+c)/x,t[1]=(h+m)/x,t[2]=.25*x),t}}();function Hq(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e[9]=t[9]+n[9],e[10]=t[10]+n[10],e[11]=t[11]+n[11],e[12]=t[12]+n[12],e[13]=t[13]+n[13],e[14]=t[14]+n[14],e[15]=t[15]+n[15],e}function Wq(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e[9]=t[9]-n[9],e[10]=t[10]-n[10],e[11]=t[11]-n[11],e[12]=t[12]-n[12],e[13]=t[13]-n[13],e[14]=t[14]-n[14],e[15]=t[15]-n[15],e}class $q extends Array{constructor(e=1,t=0,n=0,r=0,s=0,i=1,a=0,o=0,l=0,c=0,d=1,u=0,h=0,p=0,m=0,f=1){return super(e,t,n,r,s,i,a,o,l,c,d,u,h,p,m,f),this}get x(){return this[12]}get y(){return this[13]}get z(){return this[14]}get w(){return this[15]}set x(e){this[12]=e}set y(e){this[13]=e}set z(e){this[14]=e}set w(e){this[15]=e}set(e,t,n,r,s,i,a,o,l,c,d,u,h,p,m,f){return e.length?this.copy(e):(function(e,t,n,r,s,i,a,o,l,c,d,u,h,p,m,f,g){e[0]=t,e[1]=n,e[2]=r,e[3]=s,e[4]=i,e[5]=a,e[6]=o,e[7]=l,e[8]=c,e[9]=d,e[10]=u,e[11]=h,e[12]=p,e[13]=m,e[14]=f,e[15]=g}(this,e,t,n,r,s,i,a,o,l,c,d,u,h,p,m,f),this)}translate(e,t=this){return function(e,t,n){let r,s,i,a,o,l,c,d,u,h,p,m,f=n[0],g=n[1],x=n[2];t===e?(e[12]=t[0]*f+t[4]*g+t[8]*x+t[12],e[13]=t[1]*f+t[5]*g+t[9]*x+t[13],e[14]=t[2]*f+t[6]*g+t[10]*x+t[14],e[15]=t[3]*f+t[7]*g+t[11]*x+t[15]):(r=t[0],s=t[1],i=t[2],a=t[3],o=t[4],l=t[5],c=t[6],d=t[7],u=t[8],h=t[9],p=t[10],m=t[11],e[0]=r,e[1]=s,e[2]=i,e[3]=a,e[4]=o,e[5]=l,e[6]=c,e[7]=d,e[8]=u,e[9]=h,e[10]=p,e[11]=m,e[12]=r*f+o*g+u*x+t[12],e[13]=s*f+l*g+h*x+t[13],e[14]=i*f+c*g+p*x+t[14],e[15]=a*f+d*g+m*x+t[15])}(this,t,e),this}rotate(e,t,n=this){return function(e,t,n,r){let s,i,a,o,l,c,d,u,h,p,m,f,g,x,v,y,b,w,j,N,_,S,M,C,E=r[0],k=r[1],A=r[2],T=Math.hypot(E,k,A);Math.abs(T)<1e-6||(T=1/T,E*=T,k*=T,A*=T,s=Math.sin(n),i=Math.cos(n),a=1-i,o=t[0],l=t[1],c=t[2],d=t[3],u=t[4],h=t[5],p=t[6],m=t[7],f=t[8],g=t[9],x=t[10],v=t[11],y=E*E*a+i,b=k*E*a+A*s,w=A*E*a-k*s,j=E*k*a-A*s,N=k*k*a+i,_=A*k*a+E*s,S=E*A*a+k*s,M=k*A*a-E*s,C=A*A*a+i,e[0]=o*y+u*b+f*w,e[1]=l*y+h*b+g*w,e[2]=c*y+p*b+x*w,e[3]=d*y+m*b+v*w,e[4]=o*j+u*N+f*_,e[5]=l*j+h*N+g*_,e[6]=c*j+p*N+x*_,e[7]=d*j+m*N+v*_,e[8]=o*S+u*M+f*C,e[9]=l*S+h*M+g*C,e[10]=c*S+p*M+x*C,e[11]=d*S+m*M+v*C,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]))}(this,n,e,t),this}scale(e,t=this){return function(e,t,n){let r=n[0],s=n[1],i=n[2];e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*s,e[5]=t[5]*s,e[6]=t[6]*s,e[7]=t[7]*s,e[8]=t[8]*i,e[9]=t[9]*i,e[10]=t[10]*i,e[11]=t[11]*i,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]}(this,t,"number"==typeof e?[e,e,e]:e),this}add(e,t){return t?Hq(this,e,t):Hq(this,this,e),this}sub(e,t){return t?Wq(this,e,t):Wq(this,this,e),this}multiply(e,t){var n,r,s;return e.length?t?Bq(this,e,t):Bq(this,this,e):(r=this,s=e,(n=this)[0]=r[0]*s,n[1]=r[1]*s,n[2]=r[2]*s,n[3]=r[3]*s,n[4]=r[4]*s,n[5]=r[5]*s,n[6]=r[6]*s,n[7]=r[7]*s,n[8]=r[8]*s,n[9]=r[9]*s,n[10]=r[10]*s,n[11]=r[11]*s,n[12]=r[12]*s,n[13]=r[13]*s,n[14]=r[14]*s,n[15]=r[15]*s),this}identity(){var e;return(e=this)[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}copy(e){var t,n;return n=e,(t=this)[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}fromPerspective({fov:e,aspect:t,near:n,far:r}={}){return function(e,t,n,r,s){let i=1/Math.tan(t/2),a=1/(r-s);e[0]=i/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(s+r)*a,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*s*r*a,e[15]=0}(this,e,t,n,r),this}fromOrthogonal({left:e,right:t,bottom:n,top:r,near:s,far:i}){return function(e,t,n,r,s,i,a){let o=1/(t-n),l=1/(r-s),c=1/(i-a);e[0]=-2*o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+n)*o,e[13]=(s+r)*l,e[14]=(a+i)*c,e[15]=1}(this,e,t,n,r,s,i),this}fromQuaternion(e){return function(e,t){let n=t[0],r=t[1],s=t[2],i=t[3],a=n+n,o=r+r,l=s+s,c=n*a,d=r*a,u=r*o,h=s*a,p=s*o,m=s*l,f=i*a,g=i*o,x=i*l;e[0]=1-u-m,e[1]=d+x,e[2]=h-g,e[3]=0,e[4]=d-x,e[5]=1-c-m,e[6]=p+f,e[7]=0,e[8]=h+g,e[9]=p-f,e[10]=1-c-u,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1}(this,e),this}setPosition(e){return this.x=e[0],this.y=e[1],this.z=e[2],this}inverse(e=this){return function(e,t){let n=t[0],r=t[1],s=t[2],i=t[3],a=t[4],o=t[5],l=t[6],c=t[7],d=t[8],u=t[9],h=t[10],p=t[11],m=t[12],f=t[13],g=t[14],x=t[15],v=n*o-r*a,y=n*l-s*a,b=n*c-i*a,w=r*l-s*o,j=r*c-i*o,N=s*c-i*l,_=d*f-u*m,S=d*g-h*m,M=d*x-p*m,C=u*g-h*f,E=u*x-p*f,k=h*x-p*g,A=v*k-y*E+b*C+w*M-j*S+N*_;A&&(A=1/A,e[0]=(o*k-l*E+c*C)*A,e[1]=(s*E-r*k-i*C)*A,e[2]=(f*N-g*j+x*w)*A,e[3]=(h*j-u*N-p*w)*A,e[4]=(l*M-a*k-c*S)*A,e[5]=(n*k-s*M+i*S)*A,e[6]=(g*b-m*N-x*y)*A,e[7]=(d*N-h*b+p*y)*A,e[8]=(a*E-o*M+c*_)*A,e[9]=(r*M-n*E-i*_)*A,e[10]=(m*j-f*b+x*v)*A,e[11]=(u*b-d*j-p*v)*A,e[12]=(o*S-a*C-l*_)*A,e[13]=(n*C-r*S+s*_)*A,e[14]=(f*y-m*w-g*v)*A,e[15]=(d*w-u*y+h*v)*A)}(this,e),this}compose(e,t,n){return function(e,t,n,r){const s=e,i=t[0],a=t[1],o=t[2],l=t[3],c=i+i,d=a+a,u=o+o,h=i*c,p=i*d,m=i*u,f=a*d,g=a*u,x=o*u,v=l*c,y=l*d,b=l*u,w=r[0],j=r[1],N=r[2];s[0]=(1-(f+x))*w,s[1]=(p+b)*w,s[2]=(m-y)*w,s[3]=0,s[4]=(p-b)*j,s[5]=(1-(h+x))*j,s[6]=(g+v)*j,s[7]=0,s[8]=(m+y)*N,s[9]=(g-v)*N,s[10]=(1-(h+f))*N,s[11]=0,s[12]=n[0],s[13]=n[1],s[14]=n[2],s[15]=1}(this,e,t,n),this}decompose(e,t,n){return function(e,t,n,r){let s=lq([e[0],e[1],e[2]]);const i=lq([e[4],e[5],e[6]]),a=lq([e[8],e[9],e[10]]);zq(e)<0&&(s=-s),n[0]=e[12],n[1]=e[13],n[2]=e[14];const o=e.slice(),l=1/s,c=1/i,d=1/a;o[0]*=l,o[1]*=l,o[2]*=l,o[4]*=c,o[5]*=c,o[6]*=c,o[8]*=d,o[9]*=d,o[10]*=d,Vq(t,o),r[0]=s,r[1]=i,r[2]=a}(this,e,t,n),this}getRotation(e){return Vq(e,this),this}getTranslation(e){var t,n;return n=this,(t=e)[0]=n[12],t[1]=n[13],t[2]=n[14],this}getScaling(e){return Uq(e,this),this}getMaxScaleOnAxis(){return function(e){let t=e[0],n=e[1],r=e[2],s=e[4],i=e[5],a=e[6],o=e[8],l=e[9],c=e[10];const d=t*t+n*n+r*r,u=s*s+i*i+a*a,h=o*o+l*l+c*c;return Math.sqrt(Math.max(d,u,h))}(this)}lookAt(e,t,n){return function(e,t,n,r){let s=t[0],i=t[1],a=t[2],o=r[0],l=r[1],c=r[2],d=s-n[0],u=i-n[1],h=a-n[2],p=d*d+u*u+h*h;0===p?h=1:(p=1/Math.sqrt(p),d*=p,u*=p,h*=p);let m=l*h-c*u,f=c*d-o*h,g=o*u-l*d;p=m*m+f*f+g*g,0===p&&(c?o+=1e-6:l?c+=1e-6:l+=1e-6,m=l*h-c*u,f=c*d-o*h,g=o*u-l*d,p=m*m+f*f+g*g),p=1/Math.sqrt(p),m*=p,f*=p,g*=p,e[0]=m,e[1]=f,e[2]=g,e[3]=0,e[4]=u*g-h*f,e[5]=h*m-d*g,e[6]=d*f-u*m,e[7]=0,e[8]=d,e[9]=u,e[10]=h,e[11]=0,e[12]=s,e[13]=i,e[14]=a,e[15]=1}(this,e,t,n),this}determinant(){return zq(this)}fromArray(e,t=0){return this[0]=e[t],this[1]=e[t+1],this[2]=e[t+2],this[3]=e[t+3],this[4]=e[t+4],this[5]=e[t+5],this[6]=e[t+6],this[7]=e[t+7],this[8]=e[t+8],this[9]=e[t+9],this[10]=e[t+10],this[11]=e[t+11],this[12]=e[t+12],this[13]=e[t+13],this[14]=e[t+14],this[15]=e[t+15],this}toArray(e=[],t=0){return e[t]=this[0],e[t+1]=this[1],e[t+2]=this[2],e[t+3]=this[3],e[t+4]=this[4],e[t+5]=this[5],e[t+6]=this[6],e[t+7]=this[7],e[t+8]=this[8],e[t+9]=this[9],e[t+10]=this[10],e[t+11]=this[11],e[t+12]=this[12],e[t+13]=this[13],e[t+14]=this[14],e[t+15]=this[15],e}}const Gq=new $q;class qq extends Array{constructor(e=0,t=e,n=e,r="YXZ"){super(e,t,n),this.order=r,this.onChange=()=>{},this._target=this;const s=["0","1","2"];return new Proxy(this,{set(e,t){const n=Reflect.set(...arguments);return n&&s.includes(t)&&e.onChange(),n}})}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}set x(e){this._target[0]=e,this.onChange()}set y(e){this._target[1]=e,this.onChange()}set z(e){this._target[2]=e,this.onChange()}set(e,t=e,n=e){return e.length?this.copy(e):(this._target[0]=e,this._target[1]=t,this._target[2]=n,this.onChange(),this)}copy(e){return this._target[0]=e[0],this._target[1]=e[1],this._target[2]=e[2],this.onChange(),this}reorder(e){return this._target.order=e,this.onChange(),this}fromRotationMatrix(e,t=this.order){return function(e,t,n="YXZ"){"XYZ"===n?(e[1]=Math.asin(Math.min(Math.max(t[8],-1),1)),Math.abs(t[8])<.99999?(e[0]=Math.atan2(-t[9],t[10]),e[2]=Math.atan2(-t[4],t[0])):(e[0]=Math.atan2(t[6],t[5]),e[2]=0)):"YXZ"===n?(e[0]=Math.asin(-Math.min(Math.max(t[9],-1),1)),Math.abs(t[9])<.99999?(e[1]=Math.atan2(t[8],t[10]),e[2]=Math.atan2(t[1],t[5])):(e[1]=Math.atan2(-t[2],t[0]),e[2]=0)):"ZXY"===n?(e[0]=Math.asin(Math.min(Math.max(t[6],-1),1)),Math.abs(t[6])<.99999?(e[1]=Math.atan2(-t[2],t[10]),e[2]=Math.atan2(-t[4],t[5])):(e[1]=0,e[2]=Math.atan2(t[1],t[0]))):"ZYX"===n?(e[1]=Math.asin(-Math.min(Math.max(t[2],-1),1)),Math.abs(t[2])<.99999?(e[0]=Math.atan2(t[6],t[10]),e[2]=Math.atan2(t[1],t[0])):(e[0]=0,e[2]=Math.atan2(-t[4],t[5]))):"YZX"===n?(e[2]=Math.asin(Math.min(Math.max(t[1],-1),1)),Math.abs(t[1])<.99999?(e[0]=Math.atan2(-t[9],t[5]),e[1]=Math.atan2(-t[2],t[0])):(e[0]=0,e[1]=Math.atan2(t[8],t[10]))):"XZY"===n&&(e[2]=Math.asin(-Math.min(Math.max(t[4],-1),1)),Math.abs(t[4])<.99999?(e[0]=Math.atan2(t[6],t[5]),e[1]=Math.atan2(t[8],t[0])):(e[0]=Math.atan2(-t[9],t[10]),e[1]=0))}(this._target,e,t),this.onChange(),this}fromQuaternion(e,t=this.order,n){return Gq.fromQuaternion(e),this._target.fromRotationMatrix(Gq,t),n||this.onChange(),this}fromArray(e,t=0){return this._target[0]=e[t],this._target[1]=e[t+1],this._target[2]=e[t+2],this}toArray(e=[],t=0){return e[t]=this[0],e[t+1]=this[1],e[t+2]=this[2],e}}let Xq=class{constructor(){this.parent=null,this.children=[],this.visible=!0,this.matrix=new $q,this.worldMatrix=new $q,this.matrixAutoUpdate=!0,this.worldMatrixNeedsUpdate=!1,this.position=new vq,this.quaternion=new Fq,this.scale=new vq(1),this.rotation=new qq,this.up=new vq(0,1,0),this.rotation._target.onChange=()=>this.quaternion.fromEuler(this.rotation,!0),this.quaternion._target.onChange=()=>this.rotation.fromQuaternion(this.quaternion,void 0,!0)}setParent(e,t=!0){this.parent&&e!==this.parent&&this.parent.removeChild(this,!1),this.parent=e,t&&e&&e.addChild(this,!1)}addChild(e,t=!0){~this.children.indexOf(e)||this.children.push(e),t&&e.setParent(this,!1)}removeChild(e,t=!0){~this.children.indexOf(e)&&this.children.splice(this.children.indexOf(e),1),t&&e.setParent(null,!1)}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.worldMatrixNeedsUpdate||e)&&(null===this.parent?this.worldMatrix.copy(this.matrix):this.worldMatrix.multiply(this.parent.worldMatrix,this.matrix),this.worldMatrixNeedsUpdate=!1,e=!0);for(let t=0,n=this.children.length;t<n;t++)this.children[t].updateMatrixWorld(e)}updateMatrix(){this.matrix.compose(this.quaternion,this.position,this.scale),this.worldMatrixNeedsUpdate=!0}traverse(e){if(!e(this))for(let t=0,n=this.children.length;t<n;t++)this.children[t].traverse(e)}decompose(){this.matrix.decompose(this.quaternion._target,this.position,this.scale),this.rotation.fromQuaternion(this.quaternion)}lookAt(e,t=!1){t?this.matrix.lookAt(this.position,e,this.up):this.matrix.lookAt(e,this.position,this.up),this.matrix.getRotation(this.quaternion._target),this.rotation.fromQuaternion(this.quaternion)}};function Kq(e,t,n){let r=t[0],s=t[1],i=t[2],a=t[3],o=t[4],l=t[5],c=t[6],d=t[7],u=t[8],h=n[0],p=n[1],m=n[2],f=n[3],g=n[4],x=n[5],v=n[6],y=n[7],b=n[8];return e[0]=h*r+p*a+m*c,e[1]=h*s+p*o+m*d,e[2]=h*i+p*l+m*u,e[3]=f*r+g*a+x*c,e[4]=f*s+g*o+x*d,e[5]=f*i+g*l+x*u,e[6]=v*r+y*a+b*c,e[7]=v*s+y*o+b*d,e[8]=v*i+y*l+b*u,e}class Yq extends Array{constructor(e=1,t=0,n=0,r=0,s=1,i=0,a=0,o=0,l=1){return super(e,t,n,r,s,i,a,o,l),this}set(e,t,n,r,s,i,a,o,l){return e.length?this.copy(e):(function(e,t,n,r,s,i,a,o,l,c){e[0]=t,e[1]=n,e[2]=r,e[3]=s,e[4]=i,e[5]=a,e[6]=o,e[7]=l,e[8]=c}(this,e,t,n,r,s,i,a,o,l),this)}translate(e,t=this){return function(e,t,n){let r=t[0],s=t[1],i=t[2],a=t[3],o=t[4],l=t[5],c=t[6],d=t[7],u=t[8],h=n[0],p=n[1];e[0]=r,e[1]=s,e[2]=i,e[3]=a,e[4]=o,e[5]=l,e[6]=h*r+p*a+c,e[7]=h*s+p*o+d,e[8]=h*i+p*l+u}(this,t,e),this}rotate(e,t=this){return function(e,t,n){let r=t[0],s=t[1],i=t[2],a=t[3],o=t[4],l=t[5],c=t[6],d=t[7],u=t[8],h=Math.sin(n),p=Math.cos(n);e[0]=p*r+h*a,e[1]=p*s+h*o,e[2]=p*i+h*l,e[3]=p*a-h*r,e[4]=p*o-h*s,e[5]=p*l-h*i,e[6]=c,e[7]=d,e[8]=u}(this,t,e),this}scale(e,t=this){return function(e,t,n){let r=n[0],s=n[1];e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=s*t[3],e[4]=s*t[4],e[5]=s*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8]}(this,t,e),this}multiply(e,t){return t?Kq(this,e,t):Kq(this,this,e),this}identity(){var e;return(e=this)[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,this}copy(e){var t,n;return n=e,(t=this)[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}fromMatrix4(e){var t,n;return n=e,(t=this)[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[4],t[4]=n[5],t[5]=n[6],t[6]=n[8],t[7]=n[9],t[8]=n[10],this}fromQuaternion(e){return function(e,t){let n=t[0],r=t[1],s=t[2],i=t[3],a=n+n,o=r+r,l=s+s,c=n*a,d=r*a,u=r*o,h=s*a,p=s*o,m=s*l,f=i*a,g=i*o,x=i*l;e[0]=1-u-m,e[3]=d-x,e[6]=h+g,e[1]=d+x,e[4]=1-c-m,e[7]=p-f,e[2]=h-g,e[5]=p+f,e[8]=1-c-u}(this,e),this}fromBasis(e,t,n){return this.set(e[0],e[1],e[2],t[0],t[1],t[2],n[0],n[1],n[2]),this}inverse(e=this){return function(e,t){let n=t[0],r=t[1],s=t[2],i=t[3],a=t[4],o=t[5],l=t[6],c=t[7],d=t[8],u=d*a-o*c,h=-d*i+o*l,p=c*i-a*l,m=n*u+r*h+s*p;m&&(m=1/m,e[0]=u*m,e[1]=(-d*r+s*c)*m,e[2]=(o*r-s*a)*m,e[3]=h*m,e[4]=(d*n-s*l)*m,e[5]=(-o*n+s*i)*m,e[6]=p*m,e[7]=(-c*n+r*l)*m,e[8]=(a*n-r*i)*m)}(this,e),this}getNormalMatrix(e){return function(e,t){let n=t[0],r=t[1],s=t[2],i=t[3],a=t[4],o=t[5],l=t[6],c=t[7],d=t[8],u=t[9],h=t[10],p=t[11],m=t[12],f=t[13],g=t[14],x=t[15],v=n*o-r*a,y=n*l-s*a,b=n*c-i*a,w=r*l-s*o,j=r*c-i*o,N=s*c-i*l,_=d*f-u*m,S=d*g-h*m,M=d*x-p*m,C=u*g-h*f,E=u*x-p*f,k=h*x-p*g,A=v*k-y*E+b*C+w*M-j*S+N*_;A&&(A=1/A,e[0]=(o*k-l*E+c*C)*A,e[1]=(l*M-a*k-c*S)*A,e[2]=(a*E-o*M+c*_)*A,e[3]=(s*E-r*k-i*C)*A,e[4]=(n*k-s*M+i*S)*A,e[5]=(r*M-n*E-i*_)*A,e[6]=(f*N-g*j+x*w)*A,e[7]=(g*b-m*N-x*y)*A,e[8]=(m*j-f*b+x*v)*A)}(this,e),this}}let Zq=0;class Jq extends Xq{constructor(e,{geometry:t,program:n,mode:r=e.TRIANGLES,frustumCulled:s=!0,renderOrder:i=0}={}){super(),e.canvas,this.gl=e,this.id=Zq++,this.geometry=t,this.program=n,this.mode=r,this.frustumCulled=s,this.renderOrder=i,this.modelViewMatrix=new $q,this.normalMatrix=new Yq,this.beforeRenderCallbacks=[],this.afterRenderCallbacks=[]}onBeforeRender(e){return this.beforeRenderCallbacks.push(e),this}onAfterRender(e){return this.afterRenderCallbacks.push(e),this}draw({camera:e}={}){e&&(this.program.uniforms.modelMatrix||Object.assign(this.program.uniforms,{modelMatrix:{value:null},viewMatrix:{value:null},modelViewMatrix:{value:null},normalMatrix:{value:null},projectionMatrix:{value:null},cameraPosition:{value:null}}),this.program.uniforms.projectionMatrix.value=e.projectionMatrix,this.program.uniforms.cameraPosition.value=e.worldPosition,this.program.uniforms.viewMatrix.value=e.viewMatrix,this.modelViewMatrix.multiply(e.viewMatrix,this.worldMatrix),this.normalMatrix.getNormalMatrix(this.modelViewMatrix),this.program.uniforms.modelMatrix.value=this.worldMatrix,this.program.uniforms.modelViewMatrix.value=this.modelViewMatrix,this.program.uniforms.normalMatrix.value=this.normalMatrix),this.beforeRenderCallbacks.forEach(t=>t&&t({mesh:this,camera:e}));let t=this.program.cullFace&&this.worldMatrix.determinant()<0;this.program.use({flipFaces:t}),this.geometry.draw({mode:this.mode,program:this.program}),this.afterRenderCallbacks.forEach(t=>t&&t({mesh:this,camera:e}))}}class Qq extends Nq{constructor(e,{attributes:t={}}={}){Object.assign(t,{position:{size:2,data:new Float32Array([-1,-1,3,-1,-1,3])},uv:{size:2,data:new Float32Array([0,0,2,0,0,2])}}),super(e,t)}}const eX=({className:e,hue:t=0,enableVoiceControl:n=!0,voiceSensitivity:r=1.5,maxRotationSpeed:s=1.2,maxHoverIntensity:i=.8,onVoiceDetected:a})=>{const o=hn.useRef(null),l=hn.useRef(null),c=hn.useRef(null),d=hn.useRef(null),u=hn.useRef(null);hn.useRef();const h=hn.useRef(null),p="\n    precision highp float;\n    attribute vec2 position;\n    attribute vec2 uv;\n    varying vec2 vUv;\n    void main() {\n      vUv = uv;\n      gl_Position = vec4(position, 0.0, 1.0);\n    }\n  ",m="\n    precision highp float;\n\n    uniform float iTime;\n    uniform vec3 iResolution;\n    uniform float hue;\n    uniform float hover;\n    uniform float rot;\n    uniform float hoverIntensity;\n    varying vec2 vUv;\n\n    vec3 rgb2yiq(vec3 c) {\n      float y = dot(c, vec3(0.299, 0.587, 0.114));\n      float i = dot(c, vec3(0.596, -0.274, -0.322));\n      float q = dot(c, vec3(0.211, -0.523, 0.312));\n      return vec3(y, i, q);\n    }\n\n    vec3 yiq2rgb(vec3 c) {\n      float r = c.x + 0.956 * c.y + 0.621 * c.z;\n      float g = c.x - 0.272 * c.y - 0.647 * c.z;\n      float b = c.x - 1.106 * c.y + 1.703 * c.z;\n      return vec3(r, g, b);\n    }\n\n    vec3 adjustHue(vec3 color, float hueDeg) {\n      float hueRad = hueDeg * 3.14159265 / 180.0;\n      vec3 yiq = rgb2yiq(color);\n      float cosA = cos(hueRad);\n      float sinA = sin(hueRad);\n      float i = yiq.y * cosA - yiq.z * sinA;\n      float q = yiq.y * sinA + yiq.z * cosA;\n      yiq.y = i;\n      yiq.z = q;\n      return yiq2rgb(yiq);\n    }\n\n    vec3 hash33(vec3 p3) {\n      p3 = fract(p3 * vec3(0.1031, 0.11369, 0.13787));\n      p3 += dot(p3, p3.yxz + 19.19);\n      return -1.0 + 2.0 * fract(vec3(\n        p3.x + p3.y,\n        p3.x + p3.z,\n        p3.y + p3.z\n      ) * p3.zyx);\n    }\n\n    float snoise3(vec3 p) {\n      const float K1 = 0.333333333;\n      const float K2 = 0.166666667;\n      vec3 i = floor(p + (p.x + p.y + p.z) * K1);\n      vec3 d0 = p - (i - (i.x + i.y + i.z) * K2);\n      vec3 e = step(vec3(0.0), d0 - d0.yzx);\n      vec3 i1 = e * (1.0 - e.zxy);\n      vec3 i2 = 1.0 - e.zxy * (1.0 - e);\n      vec3 d1 = d0 - (i1 - K2);\n      vec3 d2 = d0 - (i2 - K1);\n      vec3 d3 = d0 - 0.5;\n      vec4 h = max(0.6 - vec4(\n        dot(d0, d0),\n        dot(d1, d1),\n        dot(d2, d2),\n        dot(d3, d3)\n      ), 0.0);\n      vec4 n = h * h * h * h * vec4(\n        dot(d0, hash33(i)),\n        dot(d1, hash33(i + i1)),\n        dot(d2, hash33(i + i2)),\n        dot(d3, hash33(i + 1.0))\n      );\n      return dot(vec4(31.316), n);\n    }\n\n    vec4 extractAlpha(vec3 colorIn) {\n      float a = max(max(colorIn.r, colorIn.g), colorIn.b);\n      return vec4(colorIn.rgb / (a + 1e-5), a);\n    }\n\n    const vec3 baseColor1 = vec3(0.611765, 0.262745, 0.996078);\n    const vec3 baseColor2 = vec3(0.298039, 0.760784, 0.913725);\n    const vec3 baseColor3 = vec3(0.062745, 0.078431, 0.600000);\n    const float innerRadius = 0.6;\n    const float noiseScale = 0.65;\n\n    float light1(float intensity, float attenuation, float dist) {\n      return intensity / (1.0 + dist * attenuation);\n    }\n\n    float light2(float intensity, float attenuation, float dist) {\n      return intensity / (1.0 + dist * dist * attenuation);\n    }\n\n    vec4 draw(vec2 uv) {\n      vec3 color1 = adjustHue(baseColor1, hue);\n      vec3 color2 = adjustHue(baseColor2, hue);\n      vec3 color3 = adjustHue(baseColor3, hue);\n\n      float ang = atan(uv.y, uv.x);\n      float len = length(uv);\n      float invLen = len > 0.0 ? 1.0 / len : 0.0;\n\n      float n0 = snoise3(vec3(uv * noiseScale, iTime * 0.5)) * 0.5 + 0.5;\n      float r0 = mix(mix(innerRadius, 1.0, 0.4), mix(innerRadius, 1.0, 0.6), n0);\n      float d0 = distance(uv, (r0 * invLen) * uv);\n      float v0 = light1(1.0, 10.0, d0);\n      v0 *= smoothstep(r0 * 1.05, r0, len);\n      float cl = cos(ang + iTime * 2.0) * 0.5 + 0.5;\n\n      float a = iTime * -1.0;\n      vec2 pos = vec2(cos(a), sin(a)) * r0;\n      float d = distance(uv, pos);\n      float v1 = light2(1.5, 5.0, d);\n      v1 *= light1(1.0, 50.0, d0);\n\n      float v2 = smoothstep(1.0, mix(innerRadius, 1.0, n0 * 0.5), len);\n      float v3 = smoothstep(innerRadius, mix(innerRadius, 1.0, 0.5), len);\n\n      vec3 col = mix(color1, color2, cl);\n      col = mix(color3, col, v0);\n      col = (col + v1) * v2 * v3;\n      col = clamp(col, 0.0, 1.0);\n\n      return extractAlpha(col);\n    }\n\n    vec4 mainImage(vec2 fragCoord) {\n      vec2 center = iResolution.xy * 0.5;\n      float size = min(iResolution.x, iResolution.y);\n      vec2 uv = (fragCoord - center) / size * 2.0;\n\n      float angle = rot;\n      float s = sin(angle);\n      float c = cos(angle);\n      uv = vec2(c * uv.x - s * uv.y, s * uv.x + c * uv.y);\n\n      uv.x += hover * hoverIntensity * 0.1 * sin(uv.y * 10.0 + iTime);\n      uv.y += hover * hoverIntensity * 0.1 * sin(uv.x * 10.0 + iTime);\n\n      return draw(uv);\n    }\n\n    void main() {\n      vec2 fragCoord = vUv * iResolution.xy;\n      vec4 col = mainImage(fragCoord);\n      gl_FragColor = vec4(col.rgb * col.a, col.a);\n    }\n  ",f=()=>{try{h.current&&(h.current.getTracks().forEach(e=>{e.stop()}),h.current=null),d.current&&(d.current.disconnect(),d.current=null),c.current&&(c.current.disconnect(),c.current=null),l.current&&"closed"!==l.current.state&&(l.current.close(),l.current=null),u.current=null}catch(e){}},g=async()=>{try{f();const e=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!1,noiseSuppression:!1,autoGainControl:!1,sampleRate:44100}});return h.current=e,l.current=new(window.AudioContext||window.webkitAudioContext),"suspended"===l.current.state&&await l.current.resume(),c.current=l.current.createAnalyser(),d.current=l.current.createMediaStreamSource(e),c.current.fftSize=512,c.current.smoothingTimeConstant=.3,c.current.minDecibels=-90,c.current.maxDecibels=-10,d.current.connect(c.current),u.current=new Uint8Array(c.current.frequencyBinCount),!0}catch(e){return!1}};return hn.useEffect(()=>{const e=o.current;if(!e)return;let l,d=null,h=null,x=null;try{for(d=new Pq({alpha:!0,premultipliedAlpha:!1,antialias:!0,dpr:window.devicePixelRatio||1}),h=d.gl,h.clearColor(0,0,0,0),h.enable(h.BLEND),h.blendFunc(h.SRC_ALPHA,h.ONE_MINUS_SRC_ALPHA);e.firstChild;)e.removeChild(e.firstChild);e.appendChild(h.canvas);const o=new Qq(h);x=new Mq(h,{vertex:p,fragment:m,uniforms:{iTime:{value:0},iResolution:{value:new vq(h.canvas.width,h.canvas.height,h.canvas.width/h.canvas.height)},hue:{value:t},hover:{value:0},rot:{value:0},hoverIntensity:{value:0}}});const v=new Jq(h,{geometry:o,program:x}),y=()=>{if(!e||!d||!h)return;const t=window.devicePixelRatio||1,n=e.clientWidth,r=e.clientHeight;0!==n&&0!==r&&(d.setSize(n*t,r*t),h.canvas.style.width=n+"px",h.canvas.style.height=r+"px",x&&x.uniforms.iResolution.value.set(h.canvas.width,h.canvas.height,h.canvas.width/h.canvas.height))};window.addEventListener("resize",y),y();let b=0,w=0,j=0;const N=.3;let _=!1;n?g().then(e=>{_=e}):(f(),_=!1);const S=e=>{if(l=requestAnimationFrame(S),!x)return;const o=.001*(e-b);if(b=e,x.uniforms.iTime.value=.001*e,x.uniforms.hue.value=t,n&&_){j=(()=>{if(!c.current||!u.current)return 0;c.current.getByteFrequencyData(u.current);let e=0;for(let n=0;n<u.current.length;n++){const t=u.current[n]/255;e+=t*t}const t=Math.sqrt(e/u.current.length);return Math.min(t*r*3,1)})(),a&&a(j>.1);j>.05&&(w+=o*(N+j*s*2)),x.uniforms.hover.value=Math.min(2*j,1),x.uniforms.hoverIntensity.value=Math.min(j*i*.8,i)}else x.uniforms.hover.value=0,x.uniforms.hoverIntensity.value=0,a&&a(!1);x.uniforms.rot.value=w,d&&h&&(h.clear(h.COLOR_BUFFER_BIT|h.DEPTH_BUFFER_BIT),d.render({scene:v}))};return l=requestAnimationFrame(S),()=>{if(cancelAnimationFrame(l),window.removeEventListener("resize",y),e&&h&&h.canvas)try{e.contains(h.canvas)&&e.removeChild(h.canvas)}catch(t){}f(),h&&h.getExtension("WEBGL_lose_context")?.loseContext()}}catch(v){return e&&e.firstChild&&e.removeChild(e.firstChild),()=>{window.removeEventListener("resize",()=>{})}}},[t,n,r,s,i,p,m]),hn.useEffect(()=>{let e=!0;return(async()=>{if(n){if(await g(),!e);}else f()})(),()=>{e=!1}},[n]),Ot.jsx("div",{ref:o,className:bn("w-full h-full relative",e)})};function tX({isListening:e,isSpeaking:t=!1,transcript:n,interimTranscript:r,onToggleListening:s,statusText:i,className:a,size:o="md",showControls:l=!0,hue:c=180}){const[d,u]=hn.useState(!1),h={sm:{orb:"w-32 h-32",button:"h-8 w-8",text:"text-sm"},md:{orb:"w-48 h-48",button:"h-10 w-10",text:"text-base"},lg:{orb:"w-64 h-64",button:"h-12 w-12",text:"text-lg"}}[o],p=e&&d?"active":e?"listening":t?"speaking":"idle";return Ot.jsxs("div",{className:bn("flex flex-col items-center space-y-6",a),children:[Ot.jsxs(Sn,{className:bn("relative bg-gradient-to-br from-slate-900/95 to-slate-800/90 border-2 backdrop-blur-xl transition-all duration-500 cyber-3d-lift overflow-hidden group",(()=>{switch(p){case"active":return"border-cyan-400/80 shadow-[0_0_60px_rgba(0,255,255,0.5)] bg-cyan-500/5";case"listening":return"border-blue-400/60 shadow-[0_0_40px_rgba(59,130,246,0.3)] bg-blue-500/5";case"speaking":return"border-purple-400/60 shadow-[0_0_40px_rgba(168,85,247,0.3)] bg-purple-500/5";default:return"border-white/10 hover:border-cyan-400/50 hover:shadow-[0_0_30px_rgba(0,255,255,0.2)]"}})()),children:[Ot.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-500 cyber-metallic-shine z-0"}),Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-cyan-500/10 via-purple-500/10 to-pink-500/10 opacity-0 group-hover:opacity-100 transition-all duration-500 mix-blend-overlay pointer-events-none z-0"}),Ot.jsx("div",{className:"absolute inset-0 cyber-scan-line pointer-events-none z-0"}),Ot.jsx("div",{className:"pointer-events-none absolute inset-0 rounded-lg shadow-[inset_0_1px_0_rgba(255,255,255,.12)]"}),Ot.jsx(Mn,{className:"p-8 relative z-10",children:Ot.jsxs("div",{className:"flex flex-col items-center space-y-6",children:[Ot.jsxs("div",{className:"relative",children:[Ot.jsx(jo,{children:"active"===p&&Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(wo.div,{initial:{scale:1,opacity:.5},animate:{scale:1.3,opacity:0},exit:{opacity:0},transition:{duration:1.5,repeat:1/0},className:bn("absolute inset-0 rounded-full border-4 border-cyan-400",h.orb)}),Ot.jsx(wo.div,{initial:{scale:1,opacity:.5},animate:{scale:1.5,opacity:0},exit:{opacity:0},transition:{duration:2,repeat:1/0,delay:.5},className:bn("absolute inset-0 rounded-full border-4 border-purple-400",h.orb)})]})}),Ot.jsx("div",{className:bn("relative rounded-2xl overflow-hidden border border-white/20 shadow-[0_8px_32px_rgba(0,0,0,0.2)] backdrop-blur-sm",h.orb),children:Ot.jsx(eX,{enableVoiceControl:e,hue:c,voiceSensitivity:1.8,maxRotationSpeed:1.5,maxHoverIntensity:1,onVoiceDetected:u,className:"w-full h-full"})}),l&&Ot.jsx(wo.div,{className:"absolute inset-0 flex items-center justify-center",whileHover:{scale:1.1},whileTap:{scale:.95},children:Ot.jsx(Ln,{onClick:s,variant:"ghost",size:"icon",className:bn("rounded-full backdrop-blur-md bg-white/10 border-2 border-white/20 hover:bg-white/20 hover:border-white/40 shadow-lg transition-all duration-300",h.button,e&&"bg-cyan-500/20 border-cyan-400/50 hover:bg-cyan-500/30"),children:e?Ot.jsx(oi,{className:bn("text-white","sm"===o?"w-4 h-4":"md"===o?"w-5 h-5":"w-6 h-6")}):Ot.jsx(li,{className:bn("text-white","sm"===o?"w-4 h-4":"md"===o?"w-5 h-5":"w-6 h-6")})})})]}),Ot.jsxs("div",{className:"text-center space-y-2",children:[e?Ot.jsxs("div",{className:"flex items-center gap-2 justify-center",children:[Ot.jsx(wo.div,{animate:{scale:[1,1.2,1]},transition:{duration:1.5,repeat:1/0},children:d?Ot.jsx(An,{className:"w-5 h-5 text-cyan-400"}):Ot.jsx(li,{className:"w-5 h-5 text-blue-400 animate-pulse"})}),Ot.jsx("p",{className:bn("font-medium",h.text,d?"text-cyan-400":"text-blue-400"),children:d?"Voice Detected":"Listening..."})]}):t?Ot.jsxs("div",{className:"flex items-center gap-2 justify-center",children:[Ot.jsx(ci,{className:"w-5 h-5 text-purple-400 animate-pulse"}),Ot.jsx("p",{className:bn("font-medium text-purple-400",h.text),children:"Speaking..."})]}):Ot.jsx("p",{className:bn("text-muted-foreground",h.text),children:i||"Press to start voice input"}),r&&Ot.jsxs(wo.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"text-sm text-gray-400 italic max-w-md",children:['"',r,'"']})]}),Ot.jsxs("div",{className:"flex items-center gap-2 flex-wrap justify-center",children:[Ot.jsxs(Tn,{variant:"secondary",className:bn("backdrop-blur-sm transition-all duration-300","active"===p&&"bg-cyan-500/20 text-cyan-300 border-cyan-400/50","listening"===p&&"bg-blue-500/20 text-blue-300 border-blue-400/50","speaking"===p&&"bg-purple-500/20 text-purple-300 border-purple-400/50","idle"===p&&"bg-white/5 text-gray-400 border-white/10"),children:["active"===p&&" Active","listening"===p&&" Listening","speaking"===p&&" Speaking","idle"===p&&" Ready"]}),e&&Ot.jsx(Tn,{variant:"outline",className:"backdrop-blur-sm bg-white/5 border-white/20 text-white animate-pulse",children:"Recording"})]})]})})]}),n&&Ot.jsx(wo.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"w-full",children:Ot.jsx(Sn,{className:"bg-gradient-to-br from-slate-900/95 to-slate-800/90 border border-white/10 backdrop-blur-xl",children:Ot.jsx(Mn,{className:"pt-4",children:Ot.jsxs("div",{className:"flex items-start gap-2",children:[Ot.jsx(An,{className:"w-4 h-4 text-cyan-400 mt-1 flex-shrink-0"}),Ot.jsxs("div",{className:"flex-1 min-w-0",children:[Ot.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Transcript:"}),Ot.jsx("p",{className:"text-sm text-white break-words",children:n})]})]})})})})]})}function nX(){const{toast:e}=Nn(),[t,n]=hn.useState(!1);hn.useState(!1);const[r,s]=hn.useState(0),[i,a]=hn.useState(""),[o,l]=hn.useState(""),[c,d]=hn.useState(null),[u,h]=hn.useState(!0),[p,m]=hn.useState([]),f=hn.useRef(null),g=hn.useRef(null),x=hn.useRef(null),v=hn.useRef(null),y=Fa({mutationFn:async e=>{const t=new FormData;t.append("audio",e,"recording.webm"),t.append("model","whisper-1"),t.append("language","en");const n=await fetch("/api/ai/voice/transcribe",{method:"POST",body:t,credentials:"include"});if(!n.ok)throw new Error(`${n.status}: ${n.statusText}`);return await n.json()},onSuccess:e=>{const{text:t,confidence:n}=e;a(t),j(t,n)},onError:e=>{w()}}),b=Fa({mutationFn:async e=>{const t=await qn("POST","/api/search/voice",{query:e});return await t.json()},onSuccess:e=>{d(e),u&&e.products.length>0&&E(e)},onError:e=>{const t={query:i,transcript:i,confidence:.95,products:[{id:"1",name:"Florida Orange Juice - Fresh Squeezed",price:12.99,businessName:"Sunshine Citrus Co.",rating:4.8},{id:"2",name:"Key West Sunset Tour",price:89.99,businessName:"Island Adventures",rating:4.9},{id:"3",name:"Miami Beach Umbrella",price:34.99,businessName:"Beach Essentials Store",rating:4.5}],businesses:[{id:"b1",name:"Sunshine Citrus Co.",category:"Food & Beverage",rating:4.8,distance:"2.3 mi"},{id:"b2",name:"Island Adventures",category:"Tours & Activities",rating:4.9,distance:"5.1 mi"}],suggestedActions:[{type:"search",label:"Search similar products",action:"search:similar"},{type:"filter",label:"Filter by price",action:"filter:price"},{type:"navigate",label:"View all results",action:"navigate:results"}]};d(t),u&&E(t)}});hn.useEffect(()=>("undefined"!=typeof window&&"AudioContext"in window&&(g.current=new AudioContext),()=>{g.current&&g.current.close(),v.current&&cancelAnimationFrame(v.current)}),[]);const w=()=>{if(!("webkitSpeechRecognition"in window)&&!("SpeechRecognition"in window))return void e({title:"Not Supported",description:"Voice search is not supported in your browser",variant:"destructive"});const t=new(window.webkitSpeechRecognition||window.SpeechRecognition);t.continuous=!0,t.interimResults=!0,t.lang="en-US",t.onstart=()=>{n(!0),e({title:"Listening...",description:"Speak your search query"})},t.onresult=e=>{let t="",n="";for(let r=e.resultIndex;r<e.results.length;r++){const s=e.results[r][0].transcript;e.results[r].isFinal?n+=s:t+=s}n?(a(n),l(""),j(n,e.results[0][0].confidence)):l(t)},t.onerror=t=>{n(!1),"no-speech"===t.error&&e({title:"No Speech Detected",description:"Please try again and speak clearly"})},t.onend=()=>{n(!1)},f.current=t,t.start()},j=(e,t)=>{const n={command:e,confidence:t,intent:N(e),parameters:_(e)};switch(m(e=>[n,...e.slice(0,4)]),n.intent){case"search":b.mutate(e);break;case"navigate":S(n.parameters?.destination);break;case"filter":M(n.parameters);break;case"action":C(n.parameters?.action)}},N=e=>{const t=e.toLowerCase();return t.includes("go to")||t.includes("open")||t.includes("show me")?"navigate":t.includes("filter")||t.includes("sort")||t.includes("under $")?"filter":t.includes("add to cart")||t.includes("buy")||t.includes("checkout")?"action":"search"},_=e=>{const t={},n=e.toLowerCase(),r=n.match(/under \$?(\d+)|less than \$?(\d+)|below \$?(\d+)/);r&&(t.maxPrice=parseInt(r[1]||r[2]||r[3]));const s=n.match(/in (\w+)|near (\w+)|around (\w+)/);s&&(t.location=s[1]||s[2]||s[3]);return["restaurant","shop","store","service","tour","activity"].forEach(e=>{n.includes(e)&&(t.category=e)}),t},S=e=>{if(!e)return;const t={home:"/",marketplace:"/marketplace",cart:"/cart",profile:"/profile",dashboard:"/business-dashboard","ai agents":"/ai/agents"}[e.toLowerCase()];t&&(window.location.href=t)},M=t=>{t&&e({title:"Applying Filters",description:`Filtering by: ${Object.entries(t).map(([e,t])=>`${e}: ${t}`).join(", ")}`})},C=t=>{t&&e({title:"Executing Action",description:`Performing: ${t}`})},E=e=>{if(!("speechSynthesis"in window))return;const t=`Found ${e.products.length} products and ${e.businesses.length} businesses.\n      Top result is ${e.products[0]?.name} from ${e.products[0]?.businessName} for $${e.products[0]?.price}.`,n=new SpeechSynthesisUtterance(t);n.rate=.9,n.pitch=1,speechSynthesis.speak(n)},k=()=>{navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({audio:!0}).then(e=>{const t=new MediaRecorder(e),r=[];t.ondataavailable=e=>{r.push(e.data)},t.onstop=()=>{const t=new Blob(r,{type:"audio/webm"});y.mutate(t),e.getTracks().forEach(e=>e.stop())},t.start(),n(!0),setTimeout(()=>{"recording"===t.state&&(t.stop(),n(!1))},1e4),T(e)}).catch(e=>{w()}):w()},A=()=>{f.current&&f.current.stop(),n(!1),l("")},T=e=>{if(!g.current)return;const n=g.current.createMediaStreamSource(e),r=g.current.createAnalyser();r.fftSize=256,n.connect(r),x.current=r;const i=r.frequencyBinCount,a=new Uint8Array(i),o=()=>{if(!x.current)return;x.current.getByteFrequencyData(a);const e=a.reduce((e,t)=>e+t)/i;s(e/255*100),t&&(v.current=requestAnimationFrame(o))};o()};return Ot.jsxs("div",{className:"space-y-6",children:[Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{children:[Ot.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Voice Search"}),Ot.jsx("p",{className:"text-muted-foreground",children:"Search hands-free with voice commands"})]}),Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx(Ln,{variant:"outline",size:"sm",onClick:()=>h(!u),children:u?Ot.jsx(ci,{className:"w-4 h-4"}):Ot.jsx(di,{className:"w-4 h-4"})}),Ot.jsx(An,{className:"w-5 h-5 text-purple-600 animate-pulse"})]})]}),Ot.jsxs(Sn,{className:"bg-gradient-to-br from-slate-800 via-slate-900 to-slate-950 border-2 transition-all duration-500 cyber-3d-lift relative overflow-hidden group "+(t?"border-cyan-400/70 shadow-[0_0_50px_rgba(0,255,255,0.3)]":"border-slate-700/50 hover:border-cyan-400/80 hover:shadow-[0_0_40px_rgba(0,255,255,0.4)]"),children:[Ot.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-500 cyber-metallic-shine z-0"}),Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-cyan-500/10 via-purple-500/10 to-pink-500/10 opacity-0 group-hover:opacity-100 transition-all duration-500 mix-blend-overlay pointer-events-none z-0"}),Ot.jsx("div",{className:"absolute inset-0 cyber-scan-line pointer-events-none z-0"}),Ot.jsxs(Lr,{className:"relative z-10",children:[Ot.jsx(zr,{className:"text-white",children:"Voice Command"}),Ot.jsx(Ur,{children:"Click the microphone and speak your search query or command"})]}),Ot.jsxs(Mn,{className:"space-y-6 relative z-10",children:[Ot.jsx(tX,{isListening:t,transcript:i,interimTranscript:o,onToggleListening:()=>{t?A():k()},statusText:"Press to start voice search",size:"lg",hue:160,showControls:!0}),p.length>0&&Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-sm font-medium mb-2",children:"Recent Commands:"}),Ot.jsx("div",{className:"space-y-2",children:p.map((e,t)=>Ot.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg bg-gray-50 dark:bg-gray-900",children:[Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsx(Tn,{variant:"search"===e.intent?"default":"secondary",children:e.intent}),Ot.jsx("span",{className:"text-sm",children:e.command})]}),Ot.jsxs("span",{className:"text-xs text-muted-foreground",children:[Math.round(100*e.confidence),"% confidence"]})]},t))})]}),Ot.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[Ot.jsx(Sn,{className:"bg-gradient-to-br from-slate-800 via-slate-900 to-slate-950 border border-slate-700/50 hover:border-cyan-400/80 transition-all duration-300",children:Ot.jsxs(Mn,{className:"pt-4",children:[Ot.jsx("p",{className:"text-xs font-medium text-blue-700 dark:text-blue-300 mb-1",children:"Try saying:"}),Ot.jsx("p",{className:"text-sm",children:'"Find restaurants near me"'})]})}),Ot.jsx(Sn,{className:"bg-gradient-to-br from-slate-800 via-slate-900 to-slate-950 border border-slate-700/50 hover:border-purple-400/80 transition-all duration-300",children:Ot.jsxs(Mn,{className:"pt-4",children:[Ot.jsx("p",{className:"text-xs font-medium text-purple-700 dark:text-purple-300 mb-1",children:"Or:"}),Ot.jsx("p",{className:"text-sm",children:'"Show beach products under $50"'})]})})]})]})]}),c&&Ot.jsx(jo,{children:Ot.jsxs(wo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-4",children:[c.products.length>0&&Ot.jsxs(Sn,{className:"bg-gradient-to-br from-slate-800 via-slate-900 to-slate-950 border-2 border-white/10 hover:border-cyan-400/50 transition-all duration-500 hover:shadow-[0_0_40px_rgba(0,255,255,0.2)] cyber-3d-lift relative overflow-hidden group",children:[Ot.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-500 cyber-metallic-shine z-0"}),Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-cyan-500/10 via-purple-500/10 to-pink-500/10 opacity-0 group-hover:opacity-100 transition-all duration-500 mix-blend-overlay pointer-events-none z-0"}),Ot.jsx("div",{className:"absolute inset-0 cyber-scan-line pointer-events-none z-0"}),Ot.jsx(Lr,{className:"relative z-10",children:Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsx(zr,{className:"text-white",children:"Products Found"}),Ot.jsxs(Tn,{children:[c.products.length," results"]})]})}),Ot.jsx(Mn,{className:"relative z-10",children:Ot.jsx("div",{className:"space-y-3",children:c.products.map(e=>Ot.jsx(Yn,{href:`/product/${e.id}`,children:Ot.jsx(Sn,{className:"bg-gradient-to-br from-slate-800 via-slate-900 to-slate-950 border border-slate-700/50 hover:border-cyan-400/80 transition-all duration-300 hover:shadow-[0_0_20px_rgba(0,255,255,0.2)] cursor-pointer",children:Ot.jsx(Mn,{className:"p-4",children:Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsx(as,{className:"w-5 h-5 text-muted-foreground"}),Ot.jsxs("div",{children:[Ot.jsx("p",{className:"font-medium",children:e.name}),Ot.jsxs("p",{className:"text-sm text-muted-foreground",children:["by ",e.businessName]})]})]}),Ot.jsxs("div",{className:"text-right",children:[Ot.jsxs("p",{className:"font-bold text-lg",children:["$",e.price]}),Ot.jsxs("div",{className:"flex items-center gap-1",children:[Ot.jsx(In,{className:"w-3 h-3 text-yellow-500 fill-current"}),Ot.jsx("span",{className:"text-xs",children:e.rating})]})]}),Ot.jsx(Ps,{className:"w-5 h-5 text-muted-foreground"})]})})})},e.id))})})]}),c.businesses.length>0&&Ot.jsxs(Sn,{className:"bg-gradient-to-br from-slate-800 via-slate-900 to-slate-950 border-2 border-white/10 hover:border-cyan-400/50 transition-all duration-500 hover:shadow-[0_0_40px_rgba(0,255,255,0.2)] cyber-3d-lift relative overflow-hidden group",children:[Ot.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-500 cyber-metallic-shine z-0"}),Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-cyan-500/10 via-purple-500/10 to-pink-500/10 opacity-0 group-hover:opacity-100 transition-all duration-500 mix-blend-overlay pointer-events-none z-0"}),Ot.jsx("div",{className:"absolute inset-0 cyber-scan-line pointer-events-none z-0"}),Ot.jsx(Lr,{className:"relative z-10",children:Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsx(zr,{className:"text-white",children:"Businesses"}),Ot.jsxs(Tn,{variant:"secondary",children:[c.businesses.length," results"]})]})}),Ot.jsx(Mn,{className:"relative z-10",children:Ot.jsx("div",{className:"space-y-3",children:c.businesses.map(e=>Ot.jsx(Yn,{href:`/business/${e.id}`,children:Ot.jsx(Sn,{className:"bg-gradient-to-br from-slate-800 via-slate-900 to-slate-950 border border-slate-700/50 hover:border-cyan-400/80 transition-all duration-300 hover:shadow-[0_0_20px_rgba(0,255,255,0.2)] cursor-pointer",children:Ot.jsx(Mn,{className:"p-4",children:Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsx(fr,{className:"w-5 h-5 text-muted-foreground"}),Ot.jsxs("div",{children:[Ot.jsx("p",{className:"font-medium",children:e.name}),Ot.jsx("p",{className:"text-sm text-muted-foreground",children:e.category})]})]}),Ot.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[e.distance&&Ot.jsxs("div",{className:"flex items-center gap-1",children:[Ot.jsx(Bn,{className:"w-3 h-3"}),e.distance]}),Ot.jsxs("div",{className:"flex items-center gap-1",children:[Ot.jsx(In,{className:"w-3 h-3 text-yellow-500 fill-current"}),e.rating]})]}),Ot.jsx(Ps,{className:"w-5 h-5 text-muted-foreground"})]})})})},e.id))})})]}),c.suggestedActions.length>0&&Ot.jsxs(Sn,{className:"bg-gradient-to-br from-slate-800 via-slate-900 to-slate-950 border-2 border-white/10 hover:border-cyan-400/50 transition-all duration-500 hover:shadow-[0_0_40px_rgba(0,255,255,0.2)] cyber-3d-lift relative overflow-hidden group",children:[Ot.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-500 cyber-metallic-shine z-0"}),Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-cyan-500/10 via-purple-500/10 to-pink-500/10 opacity-0 group-hover:opacity-100 transition-all duration-500 mix-blend-overlay pointer-events-none z-0"}),Ot.jsx("div",{className:"absolute inset-0 cyber-scan-line pointer-events-none z-0"}),Ot.jsx(Lr,{className:"relative z-10",children:Ot.jsx(zr,{className:"text-white",children:"Suggested Actions"})}),Ot.jsx(Mn,{children:Ot.jsx("div",{className:"flex flex-wrap gap-2",children:c.suggestedActions.map((e,t)=>Ot.jsxs(Ln,{variant:"outline",size:"sm",children:["search"===e.type&&Ot.jsx(Fn,{className:"w-3 h-3 mr-1"}),"filter"===e.type&&Ot.jsx(Dn,{className:"w-3 h-3 mr-1"}),"navigate"===e.type&&Ot.jsx(Ps,{className:"w-3 h-3 mr-1"}),e.label]},t))})})]}),Ot.jsx("div",{className:"flex justify-center",children:Ot.jsxs(Ln,{variant:"outline",onClick:()=>{a(""),l(""),d(null),m([])},children:[Ot.jsx(ui,{className:"w-4 h-4 mr-2"}),"New Search"]})})]})})]})}var rX=["PageUp","PageDown"],sX=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],iX={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},aX="Slider",[oX,lX,cX]=Tt(aX),[dX]=At(aX,[cX]),[uX,hX]=dX(aX),pX=hn.forwardRef((e,t)=>{const{name:n,min:r=0,max:s=100,step:i=1,orientation:a="horizontal",disabled:o=!1,minStepsBetweenThumbs:l=0,defaultValue:c=[r],value:d,onValueChange:u=()=>{},onValueCommit:h=()=>{},inverted:p=!1,form:m,...f}=e,g=hn.useRef(new Set),x=hn.useRef(0),v="horizontal"===a?gX:xX,[y=[],b]=Dt({prop:d,defaultProp:c,onChange:e=>{const t=[...g.current];t[x.current]?.focus(),u(e)}}),w=hn.useRef(y);function j(e,t,{commit:n}={commit:!1}){const a=function(e){return(String(e).split(".")[1]||"").length}(i),o=function(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}(Math.round((e-r)/i)*i+r,a),c=Xr(o,[r,s]);b((e=[])=>{const r=function(e=[],t,n){const r=[...e];return r[n]=t,r.sort((e,t)=>e-t)}(e,c,t);if(function(e,t){if(t>0){const n=function(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}(e);return Math.min(...n)>=t}return!0}(r,l*i)){x.current=r.indexOf(c);const t=String(r)!==String(e);return t&&n&&h(r),t?r:e}return e})}return Ot.jsx(uX,{scope:e.__scopeSlider,name:n,disabled:o,min:r,max:s,valueIndexToChangeRef:x,thumbs:g.current,values:y,orientation:a,form:m,children:Ot.jsx(oX.Provider,{scope:e.__scopeSlider,children:Ot.jsx(oX.Slot,{scope:e.__scopeSlider,children:Ot.jsx(v,{"aria-disabled":o,"data-disabled":o?"":void 0,...f,ref:t,onPointerDown:Ft(f.onPointerDown,()=>{o||(w.current=y)}),min:r,max:s,inverted:p,onSlideStart:o?void 0:function(e){const t=function(e,t){if(1===e.length)return 0;const n=e.map(e=>Math.abs(e-t)),r=Math.min(...n);return n.indexOf(r)}(y,e);j(e,t)},onSlideMove:o?void 0:function(e){j(e,x.current)},onSlideEnd:o?void 0:function(){const e=w.current[x.current];y[x.current]!==e&&h(y)},onHomeKeyDown:()=>!o&&j(r,0,{commit:!0}),onEndKeyDown:()=>!o&&j(s,y.length-1,{commit:!0}),onStepKeyDown:({event:e,direction:t})=>{if(!o){const n=rX.includes(e.key)||e.shiftKey&&sX.includes(e.key)?10:1,r=x.current;j(y[r]+i*n*t,r,{commit:!0})}}})})})})});pX.displayName=aX;var[mX,fX]=dX(aX,{startEdge:"left",endEdge:"right",size:"width",direction:1}),gX=hn.forwardRef((e,t)=>{const{min:n,max:r,dir:s,inverted:i,onSlideStart:a,onSlideMove:o,onSlideEnd:l,onStepKeyDown:c,...d}=e,[u,h]=hn.useState(null),p=Pt(t,e=>h(e)),m=hn.useRef(void 0),f=qt(s),g="ltr"===f,x=g&&!i||!g&&i;function v(e){const t=m.current||u.getBoundingClientRect(),s=EX([0,t.width],x?[n,r]:[r,n]);return m.current=t,s(e-t.left)}return Ot.jsx(mX,{scope:e.__scopeSlider,startEdge:x?"left":"right",endEdge:x?"right":"left",direction:x?1:-1,size:"width",children:Ot.jsx(vX,{dir:f,"data-orientation":"horizontal",...d,ref:p,style:{...d.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:e=>{const t=v(e.clientX);a?.(t)},onSlideMove:e=>{const t=v(e.clientX);o?.(t)},onSlideEnd:()=>{m.current=void 0,l?.()},onStepKeyDown:e=>{const t=iX[x?"from-left":"from-right"].includes(e.key);c?.({event:e,direction:t?-1:1})}})})}),xX=hn.forwardRef((e,t)=>{const{min:n,max:r,inverted:s,onSlideStart:i,onSlideMove:a,onSlideEnd:o,onStepKeyDown:l,...c}=e,d=hn.useRef(null),u=Pt(t,d),h=hn.useRef(void 0),p=!s;function m(e){const t=h.current||d.current.getBoundingClientRect(),s=EX([0,t.height],p?[r,n]:[n,r]);return h.current=t,s(e-t.top)}return Ot.jsx(mX,{scope:e.__scopeSlider,startEdge:p?"bottom":"top",endEdge:p?"top":"bottom",size:"height",direction:p?1:-1,children:Ot.jsx(vX,{"data-orientation":"vertical",...c,ref:u,style:{...c.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:e=>{const t=m(e.clientY);i?.(t)},onSlideMove:e=>{const t=m(e.clientY);a?.(t)},onSlideEnd:()=>{h.current=void 0,o?.()},onStepKeyDown:e=>{const t=iX[p?"from-bottom":"from-top"].includes(e.key);l?.({event:e,direction:t?-1:1})}})})}),vX=hn.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:s,onSlideEnd:i,onHomeKeyDown:a,onEndKeyDown:o,onStepKeyDown:l,...c}=e,d=hX(aX,n);return Ot.jsx(It.span,{...c,ref:t,onKeyDown:Ft(e.onKeyDown,e=>{"Home"===e.key?(a(e),e.preventDefault()):"End"===e.key?(o(e),e.preventDefault()):rX.concat(sX).includes(e.key)&&(l(e),e.preventDefault())}),onPointerDown:Ft(e.onPointerDown,e=>{const t=e.target;t.setPointerCapture(e.pointerId),e.preventDefault(),d.thumbs.has(t)?t.focus():r(e)}),onPointerMove:Ft(e.onPointerMove,e=>{e.target.hasPointerCapture(e.pointerId)&&s(e)}),onPointerUp:Ft(e.onPointerUp,e=>{const t=e.target;t.hasPointerCapture(e.pointerId)&&(t.releasePointerCapture(e.pointerId),i(e))})})}),yX="SliderTrack",bX=hn.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,s=hX(yX,n);return Ot.jsx(It.span,{"data-disabled":s.disabled?"":void 0,"data-orientation":s.orientation,...r,ref:t})});bX.displayName=yX;var wX="SliderRange",jX=hn.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,s=hX(wX,n),i=fX(wX,n),a=hn.useRef(null),o=Pt(t,a),l=s.values.length,c=s.values.map(e=>CX(e,s.min,s.max)),d=l>1?Math.min(...c):0,u=100-Math.max(...c);return Ot.jsx(It.span,{"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,...r,ref:o,style:{...e.style,[i.startEdge]:d+"%",[i.endEdge]:u+"%"}})});jX.displayName=wX;var NX="SliderThumb",_X=hn.forwardRef((e,t)=>{const n=lX(e.__scopeSlider),[r,s]=hn.useState(null),i=Pt(t,e=>s(e)),a=hn.useMemo(()=>r?n().findIndex(e=>e.ref.current===r):-1,[n,r]);return Ot.jsx(SX,{...e,ref:i,index:a})}),SX=hn.forwardRef((e,t)=>{const{__scopeSlider:n,index:r,name:s,...i}=e,a=hX(NX,n),o=fX(NX,n),[l,c]=hn.useState(null),d=Pt(t,e=>c(e)),u=!l||(a.form||!!l.closest("form")),h=Ns(l),p=a.values[r],m=void 0===p?0:CX(p,a.min,a.max),f=function(e,t){return t>2?`Value ${e+1} of ${t}`:2===t?["Minimum","Maximum"][e]:void 0}(r,a.values.length),g=h?.[o.size],x=g?function(e,t,n){const r=e/2,s=EX([0,50],[0,r]);return(r-s(t)*n)*n}(g,m,o.direction):0;return hn.useEffect(()=>{if(l)return a.thumbs.add(l),()=>{a.thumbs.delete(l)}},[l,a.thumbs]),Ot.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[o.startEdge]:`calc(${m}% + ${x}px)`},children:[Ot.jsx(oX.ItemSlot,{scope:e.__scopeSlider,children:Ot.jsx(It.span,{role:"slider","aria-label":e["aria-label"]||f,"aria-valuemin":a.min,"aria-valuenow":p,"aria-valuemax":a.max,"aria-orientation":a.orientation,"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,tabIndex:a.disabled?void 0:0,...i,ref:d,style:void 0===p?{display:"none"}:e.style,onFocus:Ft(e.onFocus,()=>{a.valueIndexToChangeRef.current=r})})}),u&&Ot.jsx(MX,{name:s??(a.name?a.name+(a.values.length>1?"[]":""):void 0),form:a.form,value:p},r)]})});_X.displayName=NX;var MX=e=>{const{value:t,...n}=e,r=hn.useRef(null),s=js(t);return hn.useEffect(()=>{const e=r.current,n=window.HTMLInputElement.prototype,i=Object.getOwnPropertyDescriptor(n,"value").set;if(s!==t&&i){const n=new Event("input",{bubbles:!0});i.call(e,t),e.dispatchEvent(n)}},[s,t]),Ot.jsx("input",{style:{display:"none"},...n,ref:r,defaultValue:t})};function CX(e,t,n){return Xr(100/(n-t)*(e-t),[0,100])}function EX(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}var kX=pX,AX=bX,TX=jX,PX=_X;const OX=hn.forwardRef(({className:e,...t},n)=>Ot.jsxs(kX,{ref:n,className:bn("relative flex w-full touch-none select-none items-center",e),...t,children:[Ot.jsx(AX,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:Ot.jsx(TX,{className:"absolute h-full bg-primary"})}),Ot.jsx(PX,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));OX.displayName=kX.displayName;var RX="Switch",[IX]=At(RX),[DX,LX]=IX(RX),FX=hn.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:i,required:a,disabled:o,value:l="on",onCheckedChange:c,form:d,...u}=e,[h,p]=hn.useState(null),m=Pt(t,e=>p(e)),f=hn.useRef(!1),g=!h||(d||!!h.closest("form")),[x=!1,v]=Dt({prop:s,defaultProp:i,onChange:c});return Ot.jsxs(DX,{scope:n,checked:x,disabled:o,children:[Ot.jsx(It.button,{type:"button",role:"switch","aria-checked":x,"aria-required":a,"data-state":VX(x),"data-disabled":o?"":void 0,disabled:o,value:l,...u,ref:m,onClick:Ft(e.onClick,e=>{v(e=>!e),g&&(f.current=e.isPropagationStopped(),f.current||e.stopPropagation())})}),g&&Ot.jsx(UX,{control:h,bubbles:!f.current,name:r,value:l,checked:x,required:a,disabled:o,form:d,style:{transform:"translateX(-100%)"}})]})});FX.displayName=RX;var zX="SwitchThumb",BX=hn.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,s=LX(zX,n);return Ot.jsx(It.span,{"data-state":VX(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:t})});BX.displayName=zX;var UX=e=>{const{control:t,checked:n,bubbles:r=!0,...s}=e,i=hn.useRef(null),a=js(n),o=Ns(t);return hn.useEffect(()=>{const e=i.current,t=window.HTMLInputElement.prototype,s=Object.getOwnPropertyDescriptor(t,"checked").set;if(a!==n&&s){const t=new Event("click",{bubbles:r});s.call(e,n),e.dispatchEvent(t)}},[a,n,r]),Ot.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:i,style:{...e.style,...o,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function VX(e){return e?"checked":"unchecked"}var HX=FX,WX=BX;const $X=hn.forwardRef(({className:e,...t},n)=>Ot.jsx(HX,{className:bn("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:n,children:Ot.jsx(WX,{className:bn("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));$X.displayName=HX.displayName;const GX=[{value:"realistic-vision-v5",label:"Realistic Vision v5",category:"realistic"},{value:"stable-diffusion-xl",label:"Stable Diffusion XL",category:"general"},{value:"midjourney-v6",label:"Midjourney v6 Style",category:"artistic"},{value:"dalle-3",label:"DALL-E 3 Style",category:"creative"},{value:"anime-diffusion",label:"Anime Diffusion",category:"anime"},{value:"photorealistic-v2",label:"Photorealistic v2",category:"realistic"},{value:"artistic-vision",label:"Artistic Vision",category:"artistic"},{value:"product-shot-v1",label:"Product Shot v1",category:"product"}],qX=[{value:"default",label:"Default"},{value:"cinematic",label:"Cinematic"},{value:"product",label:"Product Photography"},{value:"fashion",label:"Fashion"},{value:"food",label:"Food Photography"},{value:"architecture",label:"Architecture"},{value:"nature",label:"Nature"},{value:"portrait",label:"Portrait"},{value:"abstract",label:"Abstract"},{value:"minimalist",label:"Minimalist"}],XX=["natural light","studio lighting","golden hour","blue hour","dramatic lighting","soft lighting","neon lighting","backlit"],KX=["DSLR","35mm film","medium format","wide angle","telephoto","macro lens","fisheye","tilt-shift"],YX=[{category:"Product",templates:["Professional product photo of {product} on white background, studio lighting, high quality","{product} floating in air, minimalist, soft shadows, commercial photography","Lifestyle shot of {product}, natural lighting, bokeh background"]},{category:"Business",templates:["Modern storefront of {business} in Florida, sunny day, palm trees","Interior of upscale {business}, warm lighting, customers enjoying","Aerial view of {business} location, tropical setting, vibrant colors"]},{category:"Marketing",templates:["Social media banner for {product/service}, eye-catching, modern design","Advertisement poster for {event}, Florida beach theme, sunset colors","Email header image for {campaign}, professional, brand colors"]}];function ZX(){const{toast:e}=Nn(),[t,n]=hn.useState({model:"realistic-vision-v5",prompt:"",negativePrompt:"blurry, low quality, distorted, watermark",width:1024,height:1024,steps:30,guidance:7.5,numImages:1,style:"default",lighting:"natural light",camera:"DSLR"}),[r,s]=hn.useState([]),[i,a]=hn.useState([]),[o,l]=hn.useState(null),[c,d]=hn.useState(!1),[u,h]=hn.useState("generate"),p=Fa({mutationFn:async e=>{const t=c?`${e.prompt}, ${e.style} style, ${e.lighting}, shot with ${e.camera}, highly detailed, professional`:e.prompt;return await qn("POST","/api/ai/images/generate",{...e,prompt:t,provider:"piapi"})},onSuccess:n=>{const r=n.images.map(e=>({id:e.id||Math.random().toString(36).substr(2,9),url:e.url,prompt:t.prompt,model:t.model,created:new Date,metadata:{width:t.width,height:t.height,steps:t.steps,guidance:t.guidance,seed:e.seed}}));s(e=>[...r,...e]),e({title:"Images Generated",description:`Successfully generated ${r.length} image(s)`})},onError:n=>{const r=Array.from({length:t.numImages},(e,n)=>({id:Math.random().toString(36).substr(2,9),url:`/api/placeholder/${t.width}/${t.height}`,prompt:t.prompt,model:t.model,created:new Date,metadata:{width:t.width,height:t.height,steps:t.steps,guidance:t.guidance,seed:Math.floor(1e6*Math.random())}}));s(e=>[...r,...e]),e({title:"Demo Mode",description:"Showing sample images. Connect PiAPI for real generation."})}}),m=Fa({mutationFn:async e=>await qn("POST",`/api/ai/images/${e}/upscale`,{scale:2,provider:"piapi"}),onSuccess:t=>{e({title:"Image Upscaled",description:"Your image has been upscaled to 2x resolution"})}}),f=Fa({mutationFn:async({imageUrl:e,productId:t})=>await qn("POST","/api/products/images",{imageUrl:e,productId:t,source:"ai-generated"}),onSuccess:()=>{e({title:"Saved to Product",description:"Image has been added to your product gallery"})}}),g=(t,n)=>{switch(t){case"download":const t=document.createElement("a");t.href=n.url,t.download=`generated-${n.id}.png`,t.click();break;case"copy":navigator.clipboard.writeText(n.url),e({title:"Copied",description:"Image URL copied to clipboard"});break;case"save":a(e=>[...e,n]),e({title:"Saved",description:"Image saved to your collection"});break;case"upscale":m.mutate(n.id);break;case"use-for-product":f.mutate({imageUrl:n.url})}};return Ot.jsxs("div",{className:"space-y-6",children:[Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{children:[Ot.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:"AI Image Studio"}),Ot.jsx("p",{className:"text-muted-foreground",children:"Generate stunning images for your business"})]}),Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx(ti,{className:"w-6 h-6 text-purple-600"}),Ot.jsx(An,{className:"w-5 h-5 text-pink-600 animate-pulse"})]})]}),Ot.jsxs(qs,{value:u,onValueChange:h,children:[Ot.jsxs(Xs,{className:"grid w-full grid-cols-3",children:[Ot.jsxs(Ks,{value:"generate",children:[Ot.jsx(ti,{className:"w-4 h-4 mr-2"}),"Generate"]}),Ot.jsxs(Ks,{value:"gallery",children:[Ot.jsx(hi,{className:"w-4 h-4 mr-2"}),"Gallery",r.length>0&&Ot.jsx(Tn,{variant:"secondary",className:"ml-2",children:r.length})]}),Ot.jsxs(Ks,{value:"saved",children:[Ot.jsx(Zn,{className:"w-4 h-4 mr-2"}),"Saved",i.length>0&&Ot.jsx(Tn,{variant:"secondary",className:"ml-2",children:i.length})]})]}),Ot.jsx(Ys,{value:"generate",className:"space-y-6",children:Ot.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[Ot.jsxs("div",{className:"space-y-4",children:[Ot.jsxs(Sn,{className:"bg-gradient-to-br from-slate-800 via-slate-900 to-slate-950 border-2 border-slate-700/50 hover:border-cyan-400/80 transition-all duration-500 hover:shadow-[0_0_40px_rgba(0,255,255,0.4)] cyber-3d-lift relative overflow-hidden group",children:[Ot.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-500 cyber-metallic-shine z-0"}),Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-cyan-500/10 via-purple-500/10 to-pink-500/10 opacity-0 group-hover:opacity-100 transition-all duration-500 mix-blend-overlay pointer-events-none z-0"}),Ot.jsx("div",{className:"absolute inset-0 cyber-scan-line pointer-events-none z-0"}),Ot.jsxs(Lr,{className:"relative z-10",children:[Ot.jsx(zr,{children:"Prompt"}),Ot.jsx(Ur,{children:"Describe what you want to generate"})]}),Ot.jsxs(Mn,{className:"space-y-4 relative z-10",children:[Ot.jsxs("div",{children:[Ot.jsx(ws,{htmlFor:"prompt",children:"Main Prompt"}),Ot.jsx(Tr,{id:"prompt",placeholder:"A modern Florida beach restaurant at sunset, palm trees, warm lighting...",value:t.prompt,onChange:e=>n(t=>({...t,prompt:e.target.value})),className:"mt-1 min-h-[100px]"})]}),Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsx(ws,{htmlFor:"enhance",children:"AI Enhancement"}),Ot.jsx($X,{id:"enhance",checked:c,onCheckedChange:d})]}),Ot.jsxs("div",{children:[Ot.jsx(ws,{children:"Quick Templates"}),Ot.jsx(eC,{className:"h-32 mt-1",children:Ot.jsx("div",{className:"space-y-2",children:YX.map(e=>Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-xs font-medium text-muted-foreground mb-1",children:e.category}),e.templates.map((e,t)=>Ot.jsx(Ln,{variant:"ghost",size:"sm",className:"w-full justify-start text-xs",onClick:()=>(e=>{n(t=>({...t,prompt:e}))})(e),children:e},t))]},e.category))})})]}),Ot.jsxs("div",{children:[Ot.jsx(ws,{htmlFor:"negative",children:"Negative Prompt"}),Ot.jsx(zn,{id:"negative",placeholder:"Things to avoid...",value:t.negativePrompt,onChange:e=>n(t=>({...t,negativePrompt:e.target.value})),className:"mt-1"})]})]})]}),Ot.jsxs(Sn,{className:"bg-gradient-to-br from-slate-800 via-slate-900 to-slate-950 border-2 border-slate-700/50 hover:border-cyan-400/80 transition-all duration-500 hover:shadow-[0_0_40px_rgba(0,255,255,0.4)] cyber-3d-lift relative overflow-hidden group",children:[Ot.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-500 cyber-metallic-shine z-0"}),Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-cyan-500/10 via-purple-500/10 to-pink-500/10 opacity-0 group-hover:opacity-100 transition-all duration-500 mix-blend-overlay pointer-events-none z-0"}),Ot.jsx("div",{className:"absolute inset-0 cyber-scan-line pointer-events-none z-0"}),Ot.jsx(Lr,{className:"relative z-10",children:Ot.jsx(zr,{children:"Model Settings"})}),Ot.jsxs(Mn,{className:"space-y-4 relative z-10",children:[Ot.jsxs("div",{children:[Ot.jsx(ws,{htmlFor:"model",children:"AI Model"}),Ot.jsxs(Un,{value:t.model,onValueChange:e=>n(t=>({...t,model:e})),children:[Ot.jsx(Vn,{className:"mt-1",children:Ot.jsx(Hn,{})}),Ot.jsx(Wn,{children:GX.map(e=>Ot.jsx($n,{value:e.value,children:Ot.jsxs("div",{className:"flex items-center justify-between w-full",children:[Ot.jsx("span",{children:e.label}),Ot.jsx(Tn,{variant:"outline",className:"ml-2 text-xs",children:e.category})]})},e.value))})]})]}),Ot.jsxs("div",{children:[Ot.jsx(ws,{children:"Aspect Ratio"}),Ot.jsxs(Un,{value:`${t.width}x${t.height}`,onValueChange:e=>{const[t,r]=e.split("x").map(Number);n(e=>({...e,width:t,height:r}))},children:[Ot.jsx(Vn,{className:"mt-1",children:Ot.jsx(Hn,{})}),Ot.jsx(Wn,{children:[{label:"1:1 Square",width:1024,height:1024},{label:"16:9 Wide",width:1920,height:1080},{label:"9:16 Portrait",width:1080,height:1920},{label:"4:3 Standard",width:1024,height:768},{label:"3:2 Classic",width:1536,height:1024}].map(e=>Ot.jsxs($n,{value:`${e.width}x${e.height}`,children:[e.label," (",e.width,"x",e.height,")"]},e.label))})]})]}),Ot.jsxs("div",{children:[Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsx(ws,{children:"Quality Steps"}),Ot.jsx("span",{className:"text-sm text-muted-foreground",children:t.steps})]}),Ot.jsx(OX,{value:[t.steps],onValueChange:([e])=>n(t=>({...t,steps:e})),min:10,max:50,step:5,className:"mt-2"})]}),Ot.jsxs("div",{children:[Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsx(ws,{children:"Guidance Scale"}),Ot.jsx("span",{className:"text-sm text-muted-foreground",children:t.guidance})]}),Ot.jsx(OX,{value:[t.guidance],onValueChange:([e])=>n(t=>({...t,guidance:e})),min:1,max:20,step:.5,className:"mt-2"})]}),Ot.jsxs("div",{children:[Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsx(ws,{children:"Number of Images"}),Ot.jsx("span",{className:"text-sm text-muted-foreground",children:t.numImages})]}),Ot.jsx(OX,{value:[t.numImages],onValueChange:([e])=>n(t=>({...t,numImages:e})),min:1,max:4,step:1,className:"mt-2"})]})]})]})]}),Ot.jsxs("div",{className:"space-y-4",children:[Ot.jsxs(Sn,{className:"bg-gradient-to-br from-slate-800 via-slate-900 to-slate-950 border-2 border-slate-700/50 hover:border-cyan-400/80 transition-all duration-500 hover:shadow-[0_0_40px_rgba(0,255,255,0.4)] cyber-3d-lift relative overflow-hidden group",children:[Ot.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-500 cyber-metallic-shine z-0"}),Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-cyan-500/10 via-purple-500/10 to-pink-500/10 opacity-0 group-hover:opacity-100 transition-all duration-500 mix-blend-overlay pointer-events-none z-0"}),Ot.jsx("div",{className:"absolute inset-0 cyber-scan-line pointer-events-none z-0"}),Ot.jsx(Lr,{className:"relative z-10",children:Ot.jsx(zr,{children:"Style Options"})}),Ot.jsxs(Mn,{className:"space-y-4 relative z-10",children:[Ot.jsxs("div",{children:[Ot.jsx(ws,{children:"Style Preset"}),Ot.jsxs(Un,{value:t.style,onValueChange:e=>n(t=>({...t,style:e})),children:[Ot.jsx(Vn,{className:"mt-1",children:Ot.jsx(Hn,{})}),Ot.jsx(Wn,{children:qX.map(e=>Ot.jsx($n,{value:e.value,children:e.label},e.value))})]})]}),Ot.jsxs("div",{children:[Ot.jsx(ws,{children:"Lighting"}),Ot.jsxs(Un,{value:t.lighting,onValueChange:e=>n(t=>({...t,lighting:e})),children:[Ot.jsx(Vn,{className:"mt-1",children:Ot.jsx(Hn,{})}),Ot.jsx(Wn,{children:XX.map(e=>Ot.jsx($n,{value:e,children:e},e))})]})]}),Ot.jsxs("div",{children:[Ot.jsx(ws,{children:"Camera Type"}),Ot.jsxs(Un,{value:t.camera,onValueChange:e=>n(t=>({...t,camera:e})),children:[Ot.jsx(Vn,{className:"mt-1",children:Ot.jsx(Hn,{})}),Ot.jsx(Wn,{children:KX.map(e=>Ot.jsx($n,{value:e,children:e},e))})]})]})]})]}),Ot.jsxs(Sn,{className:"bg-gradient-to-br from-slate-800 via-slate-900 to-slate-950 border-2 border-cyan-400/30 hover:border-cyan-400/50 transition-all duration-500 hover:shadow-[0_0_40px_rgba(0,255,255,0.2)] cyber-3d-lift relative overflow-hidden group",children:[Ot.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-500 cyber-metallic-shine z-0"}),Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-cyan-500/10 via-purple-500/10 to-pink-500/10 opacity-0 group-hover:opacity-100 transition-all duration-500 mix-blend-overlay pointer-events-none z-0"}),Ot.jsx("div",{className:"absolute inset-0 cyber-scan-line pointer-events-none z-0"}),Ot.jsx(Mn,{className:"pt-6 relative z-10",children:Ot.jsx("div",{className:"aspect-square bg-gradient-to-br from-purple-100 to-pink-100 dark:from-purple-950 dark:to-pink-950 rounded-lg flex items-center justify-center",children:p.isPending?Ot.jsxs("div",{className:"text-center",children:[Ot.jsx(Fr,{className:"w-12 h-12 mx-auto mb-4 animate-spin text-purple-600"}),Ot.jsx("p",{className:"text-sm text-muted-foreground",children:"Generating your images..."})]}):Ot.jsxs("div",{className:"text-center",children:[Ot.jsx(Pr,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),Ot.jsx("p",{className:"text-sm text-muted-foreground",children:"Your generated images will appear here"})]})})})]}),Ot.jsx(Ln,{className:"w-full bg-gradient-to-r from-cyan-500 to-purple-600 hover:from-cyan-600 hover:to-purple-700 shadow-[0_0_30px_rgba(6,182,212,0.4)] hover:shadow-[0_0_40px_rgba(6,182,212,0.6)] transition-all duration-300 cyber-3d-lift",size:"lg",onClick:()=>p.mutate(t),disabled:!t.prompt||p.isPending,children:p.isPending?Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(Fr,{className:"w-4 h-4 mr-2 animate-spin"}),"Generating..."]}):Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(Pn,{className:"w-4 h-4 mr-2"}),"Generate Images (",t.numImages,")"]})})]})]})}),Ot.jsx(Ys,{value:"gallery",className:"space-y-4",children:0===r.length?Ot.jsxs(Sn,{className:"bg-gradient-to-br from-slate-800 via-slate-900 to-slate-950 border-2 border-slate-700/50 hover:border-cyan-400/80 transition-all duration-500 hover:shadow-[0_0_40px_rgba(0,255,255,0.4)] cyber-3d-lift relative overflow-hidden group",children:[Ot.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-500 cyber-metallic-shine z-0"}),Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-cyan-500/10 via-purple-500/10 to-pink-500/10 opacity-0 group-hover:opacity-100 transition-all duration-500 mix-blend-overlay pointer-events-none z-0"}),Ot.jsx("div",{className:"absolute inset-0 cyber-scan-line pointer-events-none z-0"}),Ot.jsxs(Mn,{className:"py-12 text-center relative z-10",children:[Ot.jsx(Pr,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),Ot.jsx("p",{className:"text-muted-foreground",children:"No images generated yet"}),Ot.jsx(Ln,{className:"mt-4",onClick:()=>h("generate"),children:"Generate Your First Image"})]})]}):Ot.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:r.map(e=>Ot.jsx(wo.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},children:Ot.jsxs(Sn,{className:"bg-gradient-to-br from-slate-800 via-slate-900 to-slate-950 border-2 border-slate-700/50 hover:border-cyan-400/80 transition-all duration-500 hover:shadow-[0_0_40px_rgba(0,255,255,0.4)] cyber-3d-lift relative overflow-hidden group",children:[Ot.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-500 cyber-metallic-shine z-0"}),Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-cyan-500/10 via-purple-500/10 to-pink-500/10 opacity-0 group-hover:opacity-100 transition-all duration-500 mix-blend-overlay pointer-events-none z-0"}),Ot.jsx("div",{className:"absolute inset-0 cyber-scan-line pointer-events-none z-0"}),Ot.jsxs("div",{className:"relative aspect-square z-10",children:[Ot.jsx("img",{src:e.url,alt:e.prompt,className:"w-full h-full object-cover"}),Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent opacity-0 group-hover:opacity-100 transition-opacity",children:Ot.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-4",children:[Ot.jsx("p",{className:"text-white text-sm line-clamp-2 mb-2",children:e.prompt}),Ot.jsxs("div",{className:"flex gap-2",children:[Ot.jsx(Ln,{size:"sm",variant:"secondary",onClick:()=>g("download",e),children:Ot.jsx(ds,{className:"w-3 h-3"})}),Ot.jsx(Ln,{size:"sm",variant:"secondary",onClick:()=>g("copy",e),children:Ot.jsx(ni,{className:"w-3 h-3"})}),Ot.jsx(Ln,{size:"sm",variant:"secondary",onClick:()=>g("save",e),children:Ot.jsx(Zn,{className:"w-3 h-3"})}),Ot.jsx(Ln,{size:"sm",variant:"secondary",onClick:()=>l(e),children:Ot.jsx(pi,{className:"w-3 h-3"})})]})]})})]}),Ot.jsx(Mn,{className:"p-3",children:Ot.jsxs("div",{className:"flex items-center justify-between text-xs",children:[Ot.jsx(Tn,{variant:"outline",children:e.model}),Ot.jsxs("span",{className:"text-muted-foreground",children:[e.metadata.width,"x",e.metadata.height]})]})})]})},e.id))})}),Ot.jsx(Ys,{value:"saved",className:"space-y-4",children:0===i.length?Ot.jsxs(Sn,{className:"bg-gradient-to-br from-slate-800 via-slate-900 to-slate-950 border-2 border-slate-700/50 hover:border-cyan-400/80 transition-all duration-500 hover:shadow-[0_0_40px_rgba(0,255,255,0.4)] cyber-3d-lift relative overflow-hidden group",children:[Ot.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-500 cyber-metallic-shine z-0"}),Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-cyan-500/10 via-purple-500/10 to-pink-500/10 opacity-0 group-hover:opacity-100 transition-all duration-500 mix-blend-overlay pointer-events-none z-0"}),Ot.jsx("div",{className:"absolute inset-0 cyber-scan-line pointer-events-none z-0"}),Ot.jsxs(Mn,{className:"py-12 text-center relative z-10",children:[Ot.jsx(Zn,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),Ot.jsx("p",{className:"text-muted-foreground",children:"No saved images yet"}),Ot.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Save images from the gallery to access them later"})]})]}):Ot.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:i.map(e=>Ot.jsxs(Sn,{className:"bg-gradient-to-br from-slate-800 via-slate-900 to-slate-950 border-2 border-slate-700/50 hover:border-cyan-400/80 transition-all duration-500 hover:shadow-[0_0_40px_rgba(0,255,255,0.4)] cyber-3d-lift relative overflow-hidden group",children:[Ot.jsx("img",{src:e.url,alt:e.prompt,className:"w-full aspect-square object-cover"}),Ot.jsxs(Mn,{className:"p-4",children:[Ot.jsx("p",{className:"text-sm line-clamp-2 mb-3",children:e.prompt}),Ot.jsxs("div",{className:"flex gap-2",children:[Ot.jsxs(Ln,{size:"sm",className:"flex-1",onClick:()=>g("use-for-product",e),children:[Ot.jsx(Ir,{className:"w-3 h-3 mr-1"}),"Use for Product"]}),Ot.jsx(Ln,{size:"sm",variant:"outline",onClick:()=>g("upscale",e),children:Ot.jsx(Pn,{className:"w-3 h-3"})})]})]})]},e.id))})})]}),Ot.jsx(jo,{children:o&&Ot.jsx(wo.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black/80 flex items-center justify-center p-4",onClick:()=>l(null),children:Ot.jsx(wo.div,{initial:{scale:.9},animate:{scale:1},exit:{scale:.9},className:"bg-white dark:bg-gray-900 rounded-lg max-w-4xl w-full max-h-[90vh] overflow-auto",onClick:e=>e.stopPropagation(),children:Ot.jsxs("div",{className:"p-4",children:[Ot.jsx("img",{src:o.url,alt:o.prompt,className:"w-full rounded-lg"}),Ot.jsxs("div",{className:"mt-4 space-y-2",children:[Ot.jsx("p",{className:"font-medium",children:o.prompt}),Ot.jsxs("div",{className:"flex flex-wrap gap-2",children:[Ot.jsx(Tn,{children:o.model}),Ot.jsxs(Tn,{variant:"outline",children:[o.metadata.width,"x",o.metadata.height]}),Ot.jsxs(Tn,{variant:"outline",children:[o.metadata.steps," steps"]}),o.metadata.seed&&Ot.jsxs(Tn,{variant:"outline",children:["Seed: ",o.metadata.seed]})]})]})]})})})})]})}const JX={facebook:{name:"Facebook",icon:gi,maxLength:63206,color:"text-blue-600",bgColor:"bg-blue-50",features:["Long-form content","Links","Images","Videos"]},instagram:{name:"Instagram",icon:fi,maxLength:2200,color:"text-pink-600",bgColor:"bg-pink-50",features:["Visual focus","Hashtags","Stories","Reels"]},linkedin:{name:"LinkedIn",icon:mi,maxLength:3e3,color:"text-blue-700",bgColor:"bg-blue-50",features:["Professional tone","Industry insights","Networking"]},gmb:{name:"Google My Business",icon:Yr,maxLength:1500,color:"text-green-600",bgColor:"bg-green-50",features:["Local SEO","Updates","Offers","Events"]},email:{name:"Email Newsletter",icon:Jr,maxLength:5e4,color:"text-purple-600",bgColor:"bg-purple-50",features:["Personalization","CTA buttons","Rich formatting"]}},QX=[{value:"professional",label:"Professional",description:"Formal and business-focused"},{value:"casual",label:"Casual",description:"Friendly and conversational"},{value:"promotional",label:"Promotional",description:"Marketing and sales-driven"},{value:"educational",label:"Educational",description:"Informative and helpful"},{value:"inspirational",label:"Inspirational",description:"Motivational and uplifting"}];function eK({businessId:e}){const{toast:t}=Nn(),[n,r]=hn.useState("facebook"),[s,i]=hn.useState(""),[a,o]=hn.useState("professional"),[l,c]=hn.useState([]),[d,u]=hn.useState(0),{data:h,isLoading:p}=za({queryKey:[`/api/businesses/${e}`]}),m=Fa({mutationFn:async e=>await qn("POST","/api/ai/generate-content",e),onSuccess:e=>{c([e]),u(0),t({title:"Content generated!",description:"Your AI-powered content is ready to use."})},onError:e=>{t({title:"Generation failed",description:e.message||"Failed to generate content. Please try again.",variant:"destructive"})}}),f=()=>{s.trim()?m.mutate({businessId:e,platform:n,idea:s,tone:a}):t({title:"Post idea required",description:"Please enter an idea or topic for your content.",variant:"destructive"})},g=JX[n],x=g.icon;return p?Ot.jsx(Sn,{children:Ot.jsx(Mn,{className:"flex items-center justify-center py-12",children:Ot.jsx(Fr,{className:"h-8 w-8 animate-spin text-primary"})})}):Ot.jsxs(Sn,{className:"bg-gradient-to-br from-slate-800 via-slate-900 to-slate-950 border-2 border-slate-700/50 hover:border-cyan-400/80 transition-all duration-500 hover:shadow-[0_0_40px_rgba(0,255,255,0.4)] cyber-3d-lift relative overflow-hidden group",children:[Ot.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-500 cyber-metallic-shine z-0"}),Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-cyan-500/10 via-purple-500/10 to-pink-500/10 opacity-0 group-hover:opacity-100 transition-all duration-500 mix-blend-overlay pointer-events-none z-0"}),Ot.jsx("div",{className:"absolute inset-0 cyber-scan-line pointer-events-none z-0"}),Ot.jsx(Lr,{className:"bg-gradient-to-r from-purple-50 to-blue-50 dark:from-purple-950 dark:to-blue-950 relative z-10",children:Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsx("div",{className:"p-3 rounded-lg bg-gradient-to-r from-purple-600 to-blue-600",children:Ot.jsx(An,{className:"h-6 w-6 text-white"})}),Ot.jsxs("div",{children:[Ot.jsx(zr,{className:"text-2xl",children:"AI Content Generator"}),Ot.jsx(Ur,{className:"text-base",children:"Generate platform-specific content with your business data auto-injected"})]})]})}),Ot.jsxs(Mn,{className:"space-y-6 pt-6 relative z-10",children:[Ot.jsxs("div",{className:"p-4 rounded-lg bg-gradient-to-r from-teal-50 to-cyan-50 dark:from-teal-950 dark:to-cyan-950 border relative overflow-hidden group",children:[Ot.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-500 cyber-metallic-shine z-0"}),Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-cyan-500/10 via-purple-500/10 to-pink-500/10 opacity-0 group-hover:opacity-100 transition-all duration-500 mix-blend-overlay pointer-events-none z-0"}),Ot.jsxs("div",{className:"flex items-start gap-4",children:[h?.logoUrl&&Ot.jsx("img",{src:h.logoUrl,alt:h.name,className:"w-16 h-16 rounded-lg object-cover"}),Ot.jsxs("div",{children:[Ot.jsx("h3",{className:"font-bold text-lg",children:h?.name}),Ot.jsx("p",{className:"text-sm text-muted-foreground",children:h?.tagline}),Ot.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[Ot.jsx(Tn,{variant:"secondary",children:h?.category}),Ot.jsx(Tn,{variant:"outline",children:h?.location})]})]})]})]}),Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsx(ws,{className:"text-base font-semibold",children:"1. Select Platform"}),Ot.jsx(qs,{value:n,onValueChange:r,className:"w-full",children:Ot.jsx(Xs,{className:"grid w-full grid-cols-5",children:Object.entries(JX).map(([e,t])=>{const n=t.icon;return Ot.jsxs(Ks,{value:e,className:"flex items-center gap-2",children:[Ot.jsx(n,{className:`h-4 w-4 ${t.color}`}),Ot.jsx("span",{className:"hidden sm:inline",children:t.name})]},e)})})}),Ot.jsxs("div",{className:`p-4 rounded-lg ${g.bgColor} border relative overflow-hidden group`,children:[Ot.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-500 cyber-metallic-shine z-0"}),Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-cyan-500/10 via-purple-500/10 to-pink-500/10 opacity-0 group-hover:opacity-100 transition-all duration-500 mix-blend-overlay pointer-events-none z-0"}),Ot.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[Ot.jsx(x,{className:`h-5 w-5 ${g.color}`}),Ot.jsx("span",{className:"font-semibold",children:g.name}),Ot.jsxs(Tn,{variant:"outline",className:"ml-auto",children:[g.maxLength.toLocaleString()," chars max"]})]}),Ot.jsx("div",{className:"flex flex-wrap gap-2",children:g.features.map(e=>Ot.jsx(Tn,{variant:"secondary",className:"text-xs",children:e},e))})]})]}),Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsx(ws,{htmlFor:"post-idea",className:"text-base font-semibold",children:"2. Enter Your Post Idea or Topic"}),Ot.jsx(Tr,{id:"post-idea",placeholder:"Example: Announcing our new summer menu with fresh seafood dishes...",value:s,onChange:e=>i(e.target.value),rows:4,className:"resize-none"}),Ot.jsx("p",{className:"text-xs text-muted-foreground",children:"Be specific! The AI will inject your business name, location, and other details automatically."})]}),Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsx(ws,{htmlFor:"tone",className:"text-base font-semibold",children:"3. Select Tone"}),Ot.jsxs(Un,{value:a,onValueChange:o,children:[Ot.jsx(Vn,{id:"tone",children:Ot.jsx(Hn,{})}),Ot.jsx(Wn,{children:QX.map(e=>Ot.jsx($n,{value:e.value,children:Ot.jsxs("div",{children:[Ot.jsx("div",{className:"font-medium",children:e.label}),Ot.jsx("div",{className:"text-xs text-muted-foreground",children:e.description})]})},e.value))})]})]}),Ot.jsx(Ln,{onClick:f,disabled:m.isPending||!s.trim(),className:"w-full bg-gradient-to-r from-cyan-500 to-purple-600 hover:from-cyan-600 hover:to-purple-700 shadow-[0_0_30px_rgba(6,182,212,0.4)] hover:shadow-[0_0_40px_rgba(6,182,212,0.6)] transition-all duration-300 cyber-3d-lift text-lg py-6",size:"lg",children:m.isPending?Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(Fr,{className:"mr-2 h-5 w-5 animate-spin"}),"Generating AI Content..."]}):Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(An,{className:"mr-2 h-5 w-5"}),"Generate Content"]})}),l.length>0&&Ot.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsx(ws,{className:"text-base font-semibold",children:"4. Preview & Export"}),Ot.jsxs(Tn,{variant:"default",className:"bg-green-500",children:[Ot.jsx(us,{className:"h-3 w-3 mr-1"}),"Generated"]})]}),Ot.jsxs(Sn,{className:"bg-gradient-to-br from-slate-800 via-slate-900 to-slate-950 border-2 border-slate-700/50 hover:border-cyan-400/80 transition-all duration-500 hover:shadow-[0_0_40px_rgba(0,255,255,0.4)] cyber-3d-lift relative overflow-hidden group",children:[Ot.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-500 cyber-metallic-shine z-0"}),Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-cyan-500/10 via-purple-500/10 to-pink-500/10 opacity-0 group-hover:opacity-100 transition-all duration-500 mix-blend-overlay pointer-events-none z-0"}),Ot.jsx("div",{className:"absolute inset-0 cyber-scan-line pointer-events-none z-0"}),Ot.jsx(Lr,{className:"bg-muted/50 relative z-10",children:Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx(x,{className:`h-5 w-5 ${g.color}`}),Ot.jsxs(zr,{className:"text-lg",children:[g.name," Post"]})]}),Ot.jsxs("div",{className:"flex gap-2",children:[Ot.jsxs(Ln,{variant:"outline",size:"sm",onClick:()=>{return e=l[d].content,navigator.clipboard.writeText(e),void t({title:"Copied!",description:"Content copied to clipboard."});var e},children:[Ot.jsx(ni,{className:"h-4 w-4 mr-1"}),"Copy"]}),Ot.jsxs(Ln,{variant:"outline",size:"sm",onClick:()=>((e,n)=>{const r=new Blob([e],{type:"text/plain"}),s=URL.createObjectURL(r),i=document.createElement("a");i.href=s,i.download=`${n}_post_${Date.now()}.txt`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(s),t({title:"Exported!",description:"Content downloaded as text file."})})(l[d].content,n),children:[Ot.jsx(ds,{className:"h-4 w-4 mr-1"}),"Export"]}),Ot.jsxs(Ln,{variant:"outline",size:"sm",onClick:f,children:[Ot.jsx(Fs,{className:"h-4 w-4 mr-1"}),"Regenerate"]})]})]})}),Ot.jsxs(Mn,{className:"pt-6",children:[Ot.jsx("div",{className:"prose prose-sm max-w-none",children:Ot.jsx("div",{className:"whitespace-pre-wrap text-sm leading-relaxed",children:l[d].content})}),l[d].hashtags&&Ot.jsxs("div",{className:"mt-4 pt-4 border-t",children:[Ot.jsx(ws,{className:"text-xs font-semibold text-muted-foreground",children:"Suggested Hashtags:"}),Ot.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:l[d].hashtags.map(e=>Ot.jsxs(Tn,{variant:"secondary",children:["#",e]},e))})]}),l[d].metadata&&Ot.jsxs("div",{className:"mt-4 pt-4 border-t flex gap-4 text-xs text-muted-foreground",children:[Ot.jsxs("div",{children:[Ot.jsx("strong",{children:"Characters:"})," ",l[d].metadata.characterCount]}),Ot.jsxs("div",{children:[Ot.jsx("strong",{children:"Words:"})," ",l[d].metadata.wordCount]}),l[d].metadata.estimatedReadTime&&Ot.jsxs("div",{children:[Ot.jsx("strong",{children:"Read Time:"})," ",l[d].metadata.estimatedReadTime]})]})]})]}),Ot.jsx("div",{className:"p-4 rounded-lg bg-blue-50 dark:bg-blue-950 border border-blue-200 dark:border-blue-800",children:Ot.jsxs("p",{className:"text-sm text-blue-900 dark:text-blue-100",children:[" ",Ot.jsx("strong",{children:"Pro Tip:"})," You can edit the generated content before posting. The AI has automatically injected your business name (",h?.name,"), location (",h?.location,"), and tagline."]})})]})]})]})}function tK(){const{toast:e}=Nn(),[t,n]=hn.useState(null),[r,s]=hn.useState(""),[i,a]=hn.useState(!1),[o,l]=hn.useState([]),[c,d]=hn.useState(null),[u]=hn.useState(""),[h,p]=hn.useState("create"),[m,f]=hn.useState(!1),g=hn.useRef(null),{data:x,isLoading:v}=za({queryKey:["/api/visual-commerce/images"]});za({queryKey:["/api/products/search",u],enabled:u.length>2});const y=Fa({mutationFn:async e=>{const t=new FormData;return t.append("image",e),await qn("POST","/api/ai/visual-commerce/detect",t)},onSuccess:t=>{if(t.products&&t.products.length>0){const n=t.products.map((e,t)=>({id:Math.random().toString(36).substr(2,9),x:e.boundingBox?.x||20+15*t,y:e.boundingBox?.y||30+10*t,productId:e.id,productName:e.name,price:e.price,businessName:e.businessName,confidence:e.confidence||.85}));l(n),e({title:"Products Detected",description:`Found ${n.length} products in the image`})}else{l([{id:"1",x:25,y:40,productId:"p1",productName:"Beach Umbrella",price:34.99,businessName:"Florida Beach Supplies",confidence:.92},{id:"2",x:65,y:55,productId:"p2",productName:"Sunset Canvas Print",price:89.99,businessName:"Coastal Art Gallery",confidence:.87},{id:"3",x:45,y:75,productId:"p3",productName:"Beach Towel Set",price:24.99,businessName:"Beach Essentials",confidence:.95}]),e({title:"Demo Mode",description:"Showing sample product tags"})}},onError:t=>{e({title:"Detection Failed",description:"Could not detect products in the image",variant:"destructive"})}}),b=Fa({mutationFn:async e=>{const t=new FormData;return t.append("image",e.image),t.append("tags",JSON.stringify(e.tags)),e.title&&t.append("title",e.title),e.description&&t.append("description",e.description),await qn("POST","/api/visual-commerce/images",t)},onSuccess:()=>{e({title:"Image Saved",description:"Your shoppable image has been created successfully"}),n(null),s(""),l([]),p("gallery")}});return Ot.jsxs("div",{className:"space-y-6",children:[Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{children:[Ot.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Visual Commerce Studio"}),Ot.jsx("p",{className:"text-muted-foreground",children:"Create shoppable images and AR experiences"})]}),Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx(Tn,{variant:"secondary",children:"Beta"}),Ot.jsx(nr,{className:"w-6 h-6 text-purple-600"}),Ot.jsx(An,{className:"w-5 h-5 text-pink-600 animate-pulse"})]})]}),Ot.jsxs(qs,{value:h,onValueChange:p,children:[Ot.jsxs(Xs,{className:"grid w-full grid-cols-4",children:[Ot.jsxs(Ks,{value:"create",children:[Ot.jsx(wr,{className:"w-4 h-4 mr-2"}),"Create"]}),Ot.jsxs(Ks,{value:"gallery",children:[Ot.jsx(Pr,{className:"w-4 h-4 mr-2"}),"Gallery",x&&x.length>0&&Ot.jsx(Tn,{variant:"secondary",className:"ml-2",children:x.length})]}),Ot.jsxs(Ks,{value:"analytics",children:[Ot.jsx(Dn,{className:"w-4 h-4 mr-2"}),"Analytics"]}),Ot.jsxs(Ks,{value:"ar",children:[Ot.jsx(xi,{className:"w-4 h-4 mr-2"}),"AR Preview"]})]}),Ot.jsxs(Ys,{value:"create",className:"space-y-4",children:[Ot.jsxs(Sn,{className:"bg-gradient-to-br from-slate-800 via-slate-900 to-slate-950 border-2 border-slate-700/50 hover:border-cyan-400/80 transition-all duration-500 hover:shadow-[0_0_40px_rgba(0,255,255,0.4)] cyber-3d-lift relative overflow-hidden group",children:[Ot.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-500 cyber-metallic-shine z-0"}),Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-cyan-500/10 via-purple-500/10 to-pink-500/10 opacity-0 group-hover:opacity-100 transition-all duration-500 mix-blend-overlay pointer-events-none z-0"}),Ot.jsx("div",{className:"absolute inset-0 cyber-scan-line pointer-events-none z-0"}),Ot.jsxs(Lr,{className:"relative z-10",children:[Ot.jsx(zr,{children:"Create Shoppable Image"}),Ot.jsx(Ur,{children:"Upload an image and tag products to make them shoppable"})]}),Ot.jsx(Mn,{className:"space-y-4 relative z-10",children:r?Ot.jsxs("div",{className:"space-y-4",children:[Ot.jsxs("div",{className:"relative",ref:g,children:[Ot.jsx("img",{src:r,alt:"Shoppable",className:"w-full rounded-lg "+(i?"cursor-crosshair":""),onClick:e=>{if(!i||!g.current)return;const t=g.current.getBoundingClientRect(),n=(e.clientX-t.left)/t.width*100,r=(e.clientY-t.top)/t.height*100,s={id:Math.random().toString(36).substr(2,9),x:n,y:r,productId:"",productName:"Select Product",price:0,businessName:"",confidence:1};l([...o,s]),d(s)}}),o.map(e=>Ot.jsx(cr,{children:Ot.jsxs(dr,{children:[Ot.jsx(ur,{asChild:!0,children:Ot.jsx(wo.div,{initial:{scale:0},animate:{scale:1},className:"absolute w-8 h-8 -translate-x-1/2 -translate-y-1/2 cursor-pointer",style:{left:`${e.x}%`,top:`${e.y}%`},children:Ot.jsxs("div",{className:"relative",children:[Ot.jsx("div",{className:"absolute inset-0 bg-white rounded-full animate-ping opacity-75"}),Ot.jsx("div",{className:"relative bg-gradient-to-r from-purple-500 to-pink-500 rounded-full w-8 h-8 flex items-center justify-center text-white shadow-lg",children:Ot.jsx($s,{className:"w-4 h-4"})}),Ot.jsx(Ln,{variant:"destructive",size:"icon",className:"absolute -top-2 -right-2 w-5 h-5",onClick:t=>{var n;t.stopPropagation(),n=e.id,l(o.filter(e=>e.id!==n))},children:Ot.jsx(jn,{className:"w-3 h-3"})})]})})}),Ot.jsx(hr,{children:Ot.jsxs("div",{className:"space-y-1",children:[Ot.jsx("p",{className:"font-semibold",children:e.productName}),Ot.jsxs("p",{className:"text-sm",children:["$",e.price]}),Ot.jsx("p",{className:"text-xs text-muted-foreground",children:e.businessName}),e.confidence<1&&Ot.jsxs(Tn,{variant:"outline",className:"text-xs",children:[Math.round(100*e.confidence),"% match"]})]})})]})},e.id))]}),Ot.jsxs("div",{className:"flex justify-between items-center",children:[Ot.jsxs("div",{className:"flex gap-2",children:[Ot.jsxs(Ln,{variant:i?"default":"outline",onClick:()=>a(!i),children:[Ot.jsx($s,{className:"w-4 h-4 mr-2"}),i?"Tagging Mode On":"Add Tags"]}),Ot.jsx(Ln,{variant:"outline",onClick:()=>{t&&y.mutate(t)},disabled:y.isPending,children:y.isPending?Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(Fr,{className:"w-4 h-4 mr-2 animate-spin"}),"Detecting..."]}):Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(An,{className:"w-4 h-4 mr-2"}),"Auto-Detect Products"]})})]}),Ot.jsx("div",{className:"flex items-center gap-2",children:Ot.jsxs(Tn,{variant:"secondary",children:[o.length," products tagged"]})})]}),o.length>0&&Ot.jsxs(Sn,{children:[Ot.jsx(Lr,{children:Ot.jsx(zr,{className:"text-base",children:"Tagged Products"})}),Ot.jsx(Mn,{children:Ot.jsx(eC,{className:"h-32",children:Ot.jsx("div",{className:"space-y-2",children:o.map(e=>Ot.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg bg-gray-50 dark:bg-gray-900",children:[Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsx($s,{className:"w-4 h-4 text-purple-600"}),Ot.jsxs("div",{children:[Ot.jsx("p",{className:"font-medium text-sm",children:e.productName}),Ot.jsxs("p",{className:"text-xs text-muted-foreground",children:["$",e.price,"  ",e.businessName]})]})]}),e.confidence<1&&Ot.jsxs(Tn,{variant:"outline",className:"text-xs",children:[Math.round(100*e.confidence),"%"]})]},e.id))})})})]}),Ot.jsxs("div",{className:"flex gap-3",children:[Ot.jsx(Ln,{className:"flex-1",onClick:()=>{t&&o.length>0&&b.mutate({image:t,tags:o,title:"Shoppable Image",description:"Click on products to shop"})},disabled:!t||0===o.length||b.isPending,children:b.isPending?Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(Fr,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(rr,{className:"w-4 h-4 mr-2"}),"Save Shoppable Image"]})}),Ot.jsx(Ln,{variant:"outline",onClick:()=>{n(null),s(""),l([])},children:"Cancel"})]})]}):Ot.jsxs("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-700 rounded-lg p-12 text-center",children:[Ot.jsx(ai,{className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),Ot.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-2",children:"Drag and drop an image here, or click to browse"}),Ot.jsx("input",{type:"file",accept:"image/*",onChange:e=>{const t=e.target.files?.[0];if(t){n(t);const e=new FileReader;e.onloadend=()=>{s(e.result)},e.readAsDataURL(t)}},className:"hidden",id:"image-upload"}),Ot.jsx(Ln,{variant:"outline",asChild:!0,children:Ot.jsx("label",{htmlFor:"image-upload",className:"cursor-pointer",children:"Choose Image"})})]})})]}),Ot.jsxs(Sn,{className:"bg-gradient-to-br from-slate-800 via-slate-900 to-slate-950 border-2 border-purple-400/30 hover:border-cyan-400/50 transition-all duration-500 hover:shadow-[0_0_40px_rgba(0,255,255,0.2)] cyber-3d-lift relative overflow-hidden group",children:[Ot.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-500 cyber-metallic-shine z-0"}),Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-cyan-500/10 via-purple-500/10 to-pink-500/10 opacity-0 group-hover:opacity-100 transition-all duration-500 mix-blend-overlay pointer-events-none z-0"}),Ot.jsx("div",{className:"absolute inset-0 cyber-scan-line pointer-events-none z-0"}),Ot.jsx(Lr,{className:"relative z-10",children:Ot.jsxs(zr,{className:"text-base flex items-center gap-2",children:[Ot.jsx(pr,{className:"w-4 h-4 text-purple-600"}),"Pro Tips"]})}),Ot.jsx(Mn,{className:"relative z-10",children:Ot.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[Ot.jsxs("li",{className:"flex items-start gap-2",children:[Ot.jsx("span",{className:"text-purple-600 mt-0.5",children:""}),"Use high-quality images with products clearly visible"]}),Ot.jsxs("li",{className:"flex items-start gap-2",children:[Ot.jsx("span",{className:"text-purple-600 mt-0.5",children:""}),"Auto-detect works best with uncluttered backgrounds"]}),Ot.jsxs("li",{className:"flex items-start gap-2",children:[Ot.jsx("span",{className:"text-purple-600 mt-0.5",children:""}),"Tag up to 10 products per image for best performance"]}),Ot.jsxs("li",{className:"flex items-start gap-2",children:[Ot.jsx("span",{className:"text-purple-600 mt-0.5",children:""}),"Add AR preview for furniture and decor items"]})]})})]})]}),Ot.jsx(Ys,{value:"gallery",children:Ot.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:v?Array.from({length:6}).map((e,t)=>Ot.jsxs(Sn,{children:[Ot.jsx(er,{className:"h-48 w-full"}),Ot.jsxs(Mn,{className:"pt-4",children:[Ot.jsx(er,{className:"h-4 w-3/4 mb-2"}),Ot.jsx(er,{className:"h-3 w-1/2"})]})]},t)):x&&x.length>0?x.map(e=>Ot.jsx(wo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:Ot.jsxs(Sn,{className:"bg-gradient-to-br from-slate-800 via-slate-900 to-slate-950 border-2 border-slate-700/50 hover:border-cyan-400/80 transition-all duration-500 hover:shadow-[0_0_40px_rgba(0,255,255,0.4)] cyber-3d-lift relative overflow-hidden group cursor-pointer",children:[Ot.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-500 cyber-metallic-shine z-0"}),Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-cyan-500/10 via-purple-500/10 to-pink-500/10 opacity-0 group-hover:opacity-100 transition-all duration-500 mix-blend-overlay pointer-events-none z-0"}),Ot.jsx("div",{className:"absolute inset-0 cyber-scan-line pointer-events-none z-0"}),Ot.jsxs("div",{className:"relative group z-10",children:[Ot.jsx("img",{src:e.imageUrl,alt:e.title||"Shoppable image",className:"w-full h-48 object-cover"}),Ot.jsxs("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-2",children:[Ot.jsxs(Ln,{size:"sm",variant:"secondary",children:[Ot.jsx($r,{className:"w-4 h-4 mr-1"}),"View"]}),Ot.jsxs(Ln,{size:"sm",variant:"secondary",children:[Ot.jsx(ss,{className:"w-4 h-4 mr-1"}),"Share"]})]}),Ot.jsxs(Tn,{className:"absolute top-2 right-2",children:[e.tags.length," Products"]})]}),Ot.jsxs(Mn,{className:"pt-4",children:[Ot.jsx("h3",{className:"font-semibold line-clamp-1",children:e.title||"Untitled"}),Ot.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:e.description||`${e.tags.length} shoppable products`}),Ot.jsxs("div",{className:"flex items-center justify-between mt-3 text-sm",children:[Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsxs("span",{className:"flex items-center gap-1",children:[Ot.jsx($r,{className:"w-3 h-3"}),e.totalViews]}),Ot.jsxs("span",{className:"flex items-center gap-1",children:[Ot.jsx(Ir,{className:"w-3 h-3"}),e.totalClicks]})]}),Ot.jsxs(Tn,{variant:"outline",className:"text-xs",children:[(100*e.conversionRate).toFixed(1),"% CTR"]})]})]})]})},e.id)):Ot.jsxs(Sn,{className:"col-span-full bg-gradient-to-br from-slate-800 via-slate-900 to-slate-950 border-2 border-slate-700/50 hover:border-cyan-400/80 transition-all duration-500 hover:shadow-[0_0_40px_rgba(0,255,255,0.4)] cyber-3d-lift relative overflow-hidden group",children:[Ot.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-500 cyber-metallic-shine z-0"}),Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-cyan-500/10 via-purple-500/10 to-pink-500/10 opacity-0 group-hover:opacity-100 transition-all duration-500 mix-blend-overlay pointer-events-none z-0"}),Ot.jsx("div",{className:"absolute inset-0 cyber-scan-line pointer-events-none z-0"}),Ot.jsxs(Mn,{className:"py-12 text-center relative z-10",children:[Ot.jsx(Pr,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),Ot.jsx("p",{className:"text-muted-foreground mb-4",children:"No shoppable images yet"}),Ot.jsx(Ln,{onClick:()=>p("create"),children:"Create Your First Shoppable Image"})]})]})})}),Ot.jsxs(Ys,{value:"analytics",children:[Ot.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ot.jsx(zr,{className:"text-sm font-medium",children:"Total Views"}),Ot.jsx($r,{className:"h-4 w-4 text-muted-foreground"})]}),Ot.jsxs(Mn,{children:[Ot.jsx("div",{className:"text-2xl font-bold",children:"12,453"}),Ot.jsx("p",{className:"text-xs text-muted-foreground",children:"+15.2% from last month"})]})]}),Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ot.jsx(zr,{className:"text-sm font-medium",children:"Product Clicks"}),Ot.jsx(Ir,{className:"h-4 w-4 text-muted-foreground"})]}),Ot.jsxs(Mn,{children:[Ot.jsx("div",{className:"text-2xl font-bold",children:"3,234"}),Ot.jsx("p",{className:"text-xs text-muted-foreground",children:"26% click-through rate"})]})]}),Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ot.jsx(zr,{className:"text-sm font-medium",children:"Conversions"}),Ot.jsx(ar,{className:"h-4 w-4 text-muted-foreground"})]}),Ot.jsxs(Mn,{children:[Ot.jsx("div",{className:"text-2xl font-bold",children:"487"}),Ot.jsx("p",{className:"text-xs text-muted-foreground",children:"15% conversion rate"})]})]}),Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ot.jsx(zr,{className:"text-sm font-medium",children:"Revenue"}),Ot.jsx(Dn,{className:"h-4 w-4 text-muted-foreground"})]}),Ot.jsxs(Mn,{children:[Ot.jsx("div",{className:"text-2xl font-bold",children:"$28,945"}),Ot.jsx("p",{className:"text-xs text-muted-foreground",children:"+32.1% from last month"})]})]})]}),Ot.jsxs(Sn,{className:"mt-4",children:[Ot.jsxs(Lr,{children:[Ot.jsx(zr,{children:"Top Performing Images"}),Ot.jsx(Ur,{children:"Images with highest conversion rates"})]}),Ot.jsx(Mn,{children:Ot.jsx("div",{className:"space-y-4",children:[1,2,3].map(e=>Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsx("img",{src:"/api/placeholder/60/60",alt:`Top ${e}`,className:"w-12 h-12 rounded-lg object-cover"}),Ot.jsxs("div",{children:[Ot.jsx("p",{className:"font-medium",children:"Beach Lifestyle Collection"}),Ot.jsx("p",{className:"text-sm text-muted-foreground",children:"8 products  2,341 views"})]})]}),Ot.jsxs("div",{className:"text-right",children:[Ot.jsx("p",{className:"font-medium",children:"32% CTR"}),Ot.jsx("p",{className:"text-sm text-green-600",children:"$4,231 revenue"})]})]},e))})})]})]}),Ot.jsx(Ys,{value:"ar",children:Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{children:[Ot.jsx(zr,{children:"AR Product Preview"}),Ot.jsx(Ur,{children:"Let customers visualize products in their space using AR"})]}),Ot.jsxs(Mn,{className:"space-y-4",children:[Ot.jsx("div",{className:"aspect-video bg-gradient-to-br from-purple-100 to-pink-100 dark:from-purple-950 dark:to-pink-950 rounded-lg flex items-center justify-center",children:m?Ot.jsxs("div",{className:"text-center",children:[Ot.jsx(vi,{className:"w-32 h-32 mx-auto mb-4"}),Ot.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Scan with your phone to view in AR"}),Ot.jsx(Ln,{variant:"outline",size:"sm",onClick:()=>f(!1),children:"Close"})]}):Ot.jsxs("div",{className:"text-center",children:[Ot.jsx(xi,{className:"w-16 h-16 mx-auto mb-4 text-purple-600"}),Ot.jsx("p",{className:"text-lg font-medium mb-2",children:"AR Preview"}),Ot.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Enable AR preview for compatible products"}),Ot.jsxs(Ln,{onClick:()=>{e({title:"AR Preview",description:"Scan QR code with your phone to view in AR"}),f(!0)},children:[Ot.jsx(vi,{className:"w-4 h-4 mr-2"}),"Generate AR Code"]})]})}),Ot.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[Ot.jsx(Sn,{children:Ot.jsx(Mn,{className:"pt-6",children:Ot.jsxs("div",{className:"flex flex-col items-center text-center",children:[Ot.jsx("div",{className:"p-3 rounded-full bg-purple-100 dark:bg-purple-900 mb-3",children:Ot.jsx(nr,{className:"w-6 h-6 text-purple-600"})}),Ot.jsx("h4",{className:"font-medium mb-1",children:"3D Models"}),Ot.jsx("p",{className:"text-sm text-muted-foreground",children:"Upload 3D models for products"})]})})}),Ot.jsx(Sn,{children:Ot.jsx(Mn,{className:"pt-6",children:Ot.jsxs("div",{className:"flex flex-col items-center text-center",children:[Ot.jsx("div",{className:"p-3 rounded-full bg-blue-100 dark:bg-blue-900 mb-3",children:Ot.jsx(xi,{className:"w-6 h-6 text-blue-600"})}),Ot.jsx("h4",{className:"font-medium mb-1",children:"Mobile Ready"}),Ot.jsx("p",{className:"text-sm text-muted-foreground",children:"Works on iOS and Android"})]})})}),Ot.jsx(Sn,{children:Ot.jsx(Mn,{className:"pt-6",children:Ot.jsxs("div",{className:"flex flex-col items-center text-center",children:[Ot.jsx("div",{className:"p-3 rounded-full bg-green-100 dark:bg-green-900 mb-3",children:Ot.jsx(Pn,{className:"w-6 h-6 text-green-600"})}),Ot.jsx("h4",{className:"font-medium mb-1",children:"Instant Preview"}),Ot.jsx("p",{className:"text-sm text-muted-foreground",children:"No app download required"})]})})})]}),Ot.jsx(Sn,{className:"border-purple-200 dark:border-purple-900",children:Ot.jsx(Mn,{className:"pt-6",children:Ot.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-2xl font-bold text-purple-600",children:"68%"}),Ot.jsx("p",{className:"text-sm text-muted-foreground",children:"Higher engagement"})]}),Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-2xl font-bold text-purple-600",children:"3.4x"}),Ot.jsx("p",{className:"text-sm text-muted-foreground",children:"Conversion boost"})]}),Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-2xl font-bold text-purple-600",children:"-64%"}),Ot.jsx("p",{className:"text-sm text-muted-foreground",children:"Return rate"})]})]})})})]})]})})]})]})}var nK={};const rK=[{id:"rachel",name:"Rachel",accent:"American",gender:"Female",useCase:"Shopping Assistant"},{id:"drew",name:"Drew",accent:"American",gender:"Male",useCase:"Product Expert"},{id:"clyde",name:"Clyde",accent:"British",gender:"Male",useCase:"Luxury Concierge"},{id:"bella",name:"Bella",accent:"American",gender:"Female",useCase:"Friendly Helper"},{id:"antoni",name:"Antoni",accent:"American",gender:"Male",useCase:"Tech Specialist"}],sK=[{command:"Search for [product]",description:"Find products by name or category"},{command:"Add to cart",description:"Add the current product to your cart"},{command:"What's in my cart?",description:"Review cart contents"},{command:"Checkout",description:"Proceed to checkout"},{command:"Tell me more",description:"Get product details"},{command:"Compare prices",description:"Compare similar products"},{command:"Find deals",description:"Show current promotions"},{command:"Help",description:"Get assistance"}];function iK({autoStart:e=!1}){const{toast:t}=Nn(),[n,r]=hn.useState({isListening:!1,isSpeaking:!1,currentTranscript:"",conversation:[],context:{cart:[],totalPrice:0,stage:"browsing"},voice:rK[0]}),[s,i]=hn.useState({speed:1,pitch:1,volume:.8,autoListen:!0}),[a,o]=hn.useState(!1),l=hn.useRef(null),c=hn.useRef(null),d=hn.useRef(null);hn.useEffect(()=>{if("undefined"!=typeof window&&"webkitSpeechRecognition"in window){const e=new(0,window.webkitSpeechRecognition);e.continuous=!0,e.interimResults=!0,e.lang="en-US",e.onresult=e=>{let t="",n="";for(let r=e.resultIndex;r<e.results.length;r++){const s=e.results[r][0].transcript;e.results[r].isFinal?t+=s:n+=s}t?p(t):r(e=>({...e,currentTranscript:n}))},e.onerror=e=>{r(e=>({...e,isListening:!1}))},e.onend=()=>{r(e=>({...e,isListening:!1}))},c.current=e}return()=>{c.current&&c.current.stop()}},[]),hn.useEffect(()=>{if(e&&c.current&&!n.isListening){const e=setTimeout(()=>{g()},500);return()=>clearTimeout(e)}},[e]);const u=Fa({mutationFn:async e=>await qn("POST","/api/elevenlabs/speak",{text:e,voice:n.voice.id,modelId:"eleven_multilingual_v2"}),onSuccess:e=>{e.audioUrl&&y(e.audioUrl)},onError:()=>{v(n.conversation[n.conversation.length-1]?.content||"")}}),h=Fa({mutationFn:async e=>await qn("POST","/api/ai/voice-commerce/process",{command:e,context:n.context}),onSuccess:e=>{const t=e.response||m(e.action);r(n=>({...n,conversation:[...n.conversation,{role:"assistant",content:t,timestamp:new Date,action:e.action}],context:e.context||n.context})),x(t),e.action&&f(e.action)}}),p=e=>{r(t=>({...t,currentTranscript:"",conversation:[...t.conversation,{role:"user",content:e,timestamp:new Date}]})),h.mutate(e)},m=e=>{if(!e)return"I'm here to help you shop. You can ask me to search for products, add items to your cart, or help you checkout.";switch(e.type){case"search":return`I found ${e.data?.results||"several"} products matching your search. Would you like to hear about them?`;case"add_to_cart":return`I've added ${e.data?.productName||"the item"} to your cart. Your cart now has ${n.context.cart.length+1} items.`;case"checkout":return`Your cart has ${n.context.cart.length} items totaling $${n.context.totalPrice.toFixed(2)}. Would you like to proceed to checkout?`;case"product_info":return`${e.data?.productName||"This product"} costs $${e.data?.price||"0"} and has a ${e.data?.rating||"0"} star rating.`;default:return"How can I help you with your shopping today?"}},f=e=>{switch(e.type){case"add_to_cart":if(e.data?.product){const n={productId:e.data.product.id,productName:e.data.product.name,price:e.data.product.price,quantity:1};r(e=>({...e,context:{...e.context,cart:[...e.context.cart,n],totalPrice:e.context.totalPrice+n.price}})),t({title:"Added to Cart",description:`${n.productName} has been added to your cart`})}break;case"checkout":t({title:"Proceeding to Checkout",description:"Redirecting to checkout page..."}),setTimeout(()=>{window.location.href="/checkout"},2e3)}},g=()=>{if(n.isListening)c.current?.stop(),r(e=>({...e,isListening:!1}));else if(c.current?.start(),r(e=>({...e,isListening:!0})),0===n.conversation.length){const e="Hello! I'm your voice shopping assistant. How can I help you today?";r(t=>({...t,conversation:[{role:"assistant",content:e,timestamp:new Date}]})),x(e)}},x=e=>{nK.ELEVENLABS_API_KEY?u.mutate(e):v(e)},v=e=>{if("speechSynthesis"in window){const t=new SpeechSynthesisUtterance(e);t.rate=s.speed,t.pitch=s.pitch,t.volume=s.volume,t.onstart=()=>{r(e=>({...e,isSpeaking:!0}))},t.onend=()=>{r(e=>({...e,isSpeaking:!1})),s.autoListen&&setTimeout(()=>{n.isListening||g()},500)},speechSynthesis.speak(t),d.current=t}},y=e=>{l.current&&(l.current.src=e,l.current.play())};return Ot.jsxs("div",{className:"space-y-6",children:[Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{children:[Ot.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Voice Commerce Assistant"}),Ot.jsx("p",{className:"text-muted-foreground",children:"Shop hands-free with AI voice assistant"})]}),Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx(Ln,{variant:"outline",size:"sm",onClick:()=>o(!0),children:Ot.jsx(yi,{className:"w-4 h-4"})}),Ot.jsxs(Tn,{variant:"secondary",children:[n.voice.name," Voice"]}),Ot.jsx(bi,{className:"w-5 h-5 text-blue-600"}),Ot.jsx(An,{className:"w-5 h-5 text-purple-600 animate-pulse"})]})]}),Ot.jsxs(Sn,{className:`bg-gradient-to-br from-slate-800 via-slate-900 to-slate-950 border-2 ${n.isListening?"border-cyan-400/80 shadow-[0_0_50px_rgba(0,255,255,0.4)]":"border-slate-700/50 hover:border-cyan-400/80"} transition-all duration-500 hover:shadow-[0_0_40px_rgba(0,255,255,0.2)] cyber-3d-lift relative overflow-hidden group`,children:[Ot.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-500 cyber-metallic-shine z-0"}),Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-cyan-500/10 via-purple-500/10 to-pink-500/10 opacity-0 group-hover:opacity-100 transition-all duration-500 mix-blend-overlay pointer-events-none z-0"}),Ot.jsx("div",{className:"absolute inset-0 cyber-scan-line pointer-events-none z-0"}),Ot.jsxs(Lr,{className:"relative z-10",children:[Ot.jsx(zr,{children:"Voice Shopping"}),Ot.jsx(Ur,{children:"Press the microphone to start shopping with voice commands"})]}),Ot.jsxs(Mn,{className:"space-y-6 relative z-10",children:[Ot.jsx(tX,{isListening:n.isListening,isSpeaking:n.isSpeaking,transcript:n.conversation.length>0?n.conversation[n.conversation.length-1]?.content:void 0,interimTranscript:n.currentTranscript,onToggleListening:g,statusText:"Click to start voice shopping",size:"lg",hue:200,showControls:!0}),n.conversation.length>0&&Ot.jsxs(Sn,{className:"bg-gradient-to-br from-slate-800 via-slate-900 to-slate-950 border-2 border-slate-700/50 hover:border-cyan-400/80 transition-all duration-500 hover:shadow-[0_0_40px_rgba(0,255,255,0.2)] cyber-3d-lift relative overflow-hidden group",children:[Ot.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-500 cyber-metallic-shine z-0"}),Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-cyan-500/10 via-purple-500/10 to-pink-500/10 opacity-0 group-hover:opacity-100 transition-all duration-500 mix-blend-overlay pointer-events-none z-0"}),Ot.jsx("div",{className:"absolute inset-0 cyber-scan-line pointer-events-none z-0"}),Ot.jsx(Lr,{className:"pb-3 relative z-10",children:Ot.jsx(zr,{className:"text-base",children:"Conversation"})}),Ot.jsx(Mn,{className:"relative z-10",children:Ot.jsx(eC,{className:"h-64",children:Ot.jsx("div",{className:"space-y-3",children:n.conversation.map((e,t)=>Ot.jsx(wo.div,{initial:{opacity:0,x:"user"===e.role?20:-20},animate:{opacity:1,x:0},className:"flex "+("user"===e.role?"justify-end":"justify-start"),children:Ot.jsx("div",{className:"max-w-[80%] rounded-lg p-3 "+("user"===e.role?"bg-blue-500 text-white":"bg-white dark:bg-gray-800 border"),children:Ot.jsxs("div",{className:"flex items-start gap-2",children:["assistant"===e.role&&Ot.jsx(ei,{className:"w-4 h-4 mt-0.5 text-purple-600"}),Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-sm",children:e.content}),e.action&&Ot.jsx(Tn,{variant:"secondary",className:"mt-2 text-xs",children:e.action.type.replace("_"," ")})]})]})})},t))})})})]}),n.context.cart.length>0&&Ot.jsxs(Sn,{className:"bg-gradient-to-br from-slate-800 via-slate-900 to-slate-950 border-2 border-green-400/30 hover:border-cyan-400/50 transition-all duration-500 hover:shadow-[0_0_40px_rgba(0,255,255,0.2)] cyber-3d-lift relative overflow-hidden group",children:[Ot.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-500 cyber-metallic-shine z-0"}),Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-cyan-500/10 via-purple-500/10 to-pink-500/10 opacity-0 group-hover:opacity-100 transition-all duration-500 mix-blend-overlay pointer-events-none z-0"}),Ot.jsx("div",{className:"absolute inset-0 cyber-scan-line pointer-events-none z-0"}),Ot.jsx(Lr,{className:"pb-3 relative z-10",children:Ot.jsxs(zr,{className:"text-base flex items-center gap-2",children:[Ot.jsx(Ir,{className:"w-4 h-4"}),"Shopping Cart"]})}),Ot.jsx(Mn,{className:"relative z-10",children:Ot.jsxs("div",{className:"space-y-2",children:[n.context.cart.map((e,t)=>Ot.jsxs("div",{className:"flex items-center justify-between text-sm",children:[Ot.jsx("span",{children:e.productName}),Ot.jsxs("span",{className:"font-medium",children:["$",e.price.toFixed(2)]})]},t)),Ot.jsx("div",{className:"pt-2 border-t",children:Ot.jsxs("div",{className:"flex items-center justify-between font-medium",children:[Ot.jsx("span",{children:"Total"}),Ot.jsxs("span",{className:"text-green-600",children:["$",n.context.totalPrice.toFixed(2)]})]})})]})})]}),Ot.jsxs(Sn,{className:"bg-gradient-to-br from-slate-800 via-slate-900 to-slate-950 border-2 border-slate-700/50 hover:border-cyan-400/80 transition-all duration-500 hover:shadow-[0_0_40px_rgba(0,255,255,0.2)] cyber-3d-lift relative overflow-hidden group",children:[Ot.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-500 cyber-metallic-shine z-0"}),Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-cyan-500/10 via-purple-500/10 to-pink-500/10 opacity-0 group-hover:opacity-100 transition-all duration-500 mix-blend-overlay pointer-events-none z-0"}),Ot.jsx("div",{className:"absolute inset-0 cyber-scan-line pointer-events-none z-0"}),Ot.jsx(Lr,{className:"pb-3 relative z-10",children:Ot.jsxs(zr,{className:"text-base flex items-center gap-2",children:[Ot.jsx(wi,{className:"w-4 h-4"}),"Voice Commands"]})}),Ot.jsx(Mn,{className:"relative z-10",children:Ot.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:sK.map((e,t)=>Ot.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[Ot.jsx(Ps,{className:"w-3 h-3 mt-0.5 text-muted-foreground"}),Ot.jsxs("div",{children:[Ot.jsx("p",{className:"font-medium",children:e.command}),Ot.jsx("p",{className:"text-xs text-muted-foreground",children:e.description})]})]},t))})})]})]})]}),Ot.jsx(yr,{open:a,onOpenChange:o,children:Ot.jsxs(jr,{children:[Ot.jsxs(Nr,{children:[Ot.jsx(_r,{children:"Voice Settings"}),Ot.jsx(ji,{children:"Customize your voice shopping experience"})]}),Ot.jsxs("div",{className:"space-y-4",children:[Ot.jsxs("div",{children:[Ot.jsx(ws,{children:"Assistant Voice"}),Ot.jsxs(Un,{value:n.voice.id,onValueChange:e=>{const t=rK.find(t=>t.id===e);t&&r(e=>({...e,voice:t}))},children:[Ot.jsx(Vn,{className:"mt-1",children:Ot.jsx(Hn,{})}),Ot.jsx(Wn,{children:rK.map(e=>Ot.jsx($n,{value:e.id,children:Ot.jsxs("div",{className:"flex items-center justify-between w-full",children:[Ot.jsx("span",{children:e.name}),Ot.jsxs("div",{className:"flex gap-2",children:[Ot.jsx(Tn,{variant:"outline",className:"text-xs",children:e.accent}),Ot.jsx(Tn,{variant:"outline",className:"text-xs",children:e.gender})]})]})},e.id))})]})]}),Ot.jsxs("div",{children:[Ot.jsxs("div",{className:"flex items-center justify-between mb-2",children:[Ot.jsx(ws,{children:"Speaking Speed"}),Ot.jsxs("span",{className:"text-sm text-muted-foreground",children:[s.speed,"x"]})]}),Ot.jsx(OX,{value:[s.speed],onValueChange:([e])=>i(t=>({...t,speed:e})),min:.5,max:2,step:.1})]}),Ot.jsxs("div",{children:[Ot.jsxs("div",{className:"flex items-center justify-between mb-2",children:[Ot.jsx(ws,{children:"Volume"}),Ot.jsxs("span",{className:"text-sm text-muted-foreground",children:[Math.round(100*s.volume),"%"]})]}),Ot.jsx(OX,{value:[s.volume],onValueChange:([e])=>i(t=>({...t,volume:e})),min:0,max:1,step:.1})]}),Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsx(ws,{htmlFor:"auto-listen",children:"Auto-listen after response"}),Ot.jsx($X,{id:"auto-listen",checked:s.autoListen,onCheckedChange:e=>i(t=>({...t,autoListen:e}))})]}),Ot.jsxs(Ln,{onClick:()=>x("Hello! This is how I sound with your current settings."),className:"w-full",children:[Ot.jsx(ci,{className:"w-4 h-4 mr-2"}),"Test Voice"]})]})]})}),Ot.jsx("audio",{ref:l,className:"hidden"})]})}var aK={exports:{}},oK={
/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
ConcurrentRoot:1,ContinuousEventPriority:4,DefaultEventPriority:16,DiscreteEventPriority:1,IdleEventPriority:536870912,LegacyRoot:0};aK.exports=oK;var lK=aK.exports;function cK(e){let t;const n=new Set,r=(e,r)=>{const s="function"==typeof e?e(t):e;if(s!==t){const e=t;t=r?s:Object.assign({},t,s),n.forEach(n=>n(t,e))}},s=()=>t,i={setState:r,getState:s,subscribe:(e,r,i)=>r||i?((e,r=s,i=Object.is)=>{let a=r(t);function o(){const n=r(t);if(!i(a,n)){const t=a;e(a=n,t)}}return n.add(o),()=>n.delete(o)})(e,r,i):(n.add(e),()=>n.delete(e)),destroy:()=>n.clear()};return t=e(r,s,i),i}const dK="undefined"==typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent)?hn.useEffect:hn.useLayoutEffect;var uK,hK,pK={exports:{}},mK={exports:{}},fK={};function gK(){return hK||(hK=1,mK.exports=(uK||(uK=1,function(e){function t(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function n(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var o=2*(r+1)-1,l=e[o],c=o+1,d=e[c];if(0>s(l,n))c<i&&0>s(d,l)?(e[r]=d,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<i&&0>s(d,n)))break e;e[r]=d,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var i=performance;e.unstable_now=function(){return i.now()}}else{var a=Date,o=a.now();e.unstable_now=function(){return a.now()-o}}var l=[],c=[],d=1,u=null,h=3,p=!1,m=!1,f=!1,g="function"==typeof setTimeout?setTimeout:null,x="function"==typeof clearTimeout?clearTimeout:null,v="undefined"!=typeof setImmediate?setImmediate:null;function y(e){for(var s=n(c);null!==s;){if(null===s.callback)r(c);else{if(!(s.startTime<=e))break;r(c),s.sortIndex=s.expirationTime,t(l,s)}s=n(c)}}function b(e){if(f=!1,y(e),!m)if(null!==n(l))m=!0,P(w);else{var t=n(c);null!==t&&O(b,t.startTime-e)}}function w(t,s){m=!1,f&&(f=!1,x(S),S=-1),p=!0;var i=h;try{for(y(s),u=n(l);null!==u&&(!(u.expirationTime>s)||t&&!E());){var a=u.callback;if("function"==typeof a){u.callback=null,h=u.priorityLevel;var o=a(u.expirationTime<=s);s=e.unstable_now(),"function"==typeof o?u.callback=o:u===n(l)&&r(l),y(s)}else r(l);u=n(l)}if(null!==u)var d=!0;else{var g=n(c);null!==g&&O(b,g.startTime-s),d=!1}return d}finally{u=null,h=i,p=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var j,N=!1,_=null,S=-1,M=5,C=-1;function E(){return!(e.unstable_now()-C<M)}function k(){if(null!==_){var t=e.unstable_now();C=t;var n=!0;try{n=_(!0,t)}finally{n?j():(N=!1,_=null)}}else N=!1}if("function"==typeof v)j=function(){v(k)};else if("undefined"!=typeof MessageChannel){var A=new MessageChannel,T=A.port2;A.port1.onmessage=k,j=function(){T.postMessage(null)}}else j=function(){g(k,0)};function P(e){_=e,N||(N=!0,j())}function O(t,n){S=g(function(){t(e.unstable_now())},n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_continueExecution=function(){m||p||(m=!0,P(w))},e.unstable_forceFrameRate=function(e){0>e||125<e||(M=0<e?Math.floor(1e3/e):5)},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},e.unstable_scheduleCallback=function(r,s,i){var a=e.unstable_now();switch(i="object"==typeof i&&null!==i&&"number"==typeof(i=i.delay)&&0<i?a+i:a,r){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return r={id:d++,callback:s,priorityLevel:r,startTime:i,expirationTime:o=i+o,sortIndex:-1},i>a?(r.sortIndex=i,t(c,r),null===n(l)&&r===n(c)&&(f?(x(S),S=-1):f=!0,O(b,i-a))):(r.sortIndex=o,t(l,r),m||p||(m=!0,P(w))),r},e.unstable_shouldYield=E,e.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}}(fK)),fK)),mK.exports}
/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */pK.exports=function(e){var t={},n=hn,r=gK(),s=Object.assign;function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,o=Symbol.for("react.element"),l=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),h=Symbol.for("react.provider"),p=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),g=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),y=Symbol.for("react.offscreen"),b=Symbol.iterator;function w(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=b&&e[b]||e["@@iterator"])?e:null}function j(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case c:return"Fragment";case l:return"Portal";case u:return"Profiler";case d:return"StrictMode";case f:return"Suspense";case g:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case p:return(e.displayName||"Context")+".Consumer";case h:return(e._context.displayName||"Context")+".Provider";case m:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case x:return null!==(t=e.displayName||null)?t:j(e.type)||"Memo";case v:t=e._payload,e=e._init;try{return j(e(t))}catch(WDe){}}return null}function N(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return j(t);case 8:return t===d?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}function _(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function S(e){if(_(e)!==e)throw Error(i(188))}function M(e){var t=e.alternate;if(!t){if(null===(t=_(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(null===s)break;var a=s.alternate;if(null===a){if(null!==(r=s.return)){n=r;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return S(s),e;if(a===r)return S(s),t;a=a.sibling}throw Error(i(188))}if(n.return!==r.return)n=s,r=a;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=a;break}if(l===r){o=!0,r=s,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=s;break}if(l===r){o=!0,r=a,n=s;break}l=l.sibling}if(!o)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}function C(e){return null!==(e=M(e))?E(e):null}function E(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=E(e);if(null!==t)return t;e=e.sibling}return null}function k(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){if(4!==e.tag){var t=k(e);if(null!==t)return t}e=e.sibling}return null}var A,T=Array.isArray,P=e.getPublicInstance,O=e.getRootHostContext,R=e.getChildHostContext,I=e.prepareForCommit,D=e.resetAfterCommit,L=e.createInstance,F=e.appendInitialChild,z=e.finalizeInitialChildren,B=e.prepareUpdate,U=e.shouldSetTextContent,V=e.createTextInstance,H=e.scheduleTimeout,W=e.cancelTimeout,$=e.noTimeout,G=e.isPrimaryRenderer,q=e.supportsMutation,X=e.supportsPersistence,K=e.supportsHydration,Y=e.getInstanceFromNode,Z=e.preparePortalMount,J=e.getCurrentEventPriority,Q=e.detachDeletedInstance,ee=e.supportsMicrotasks,te=e.scheduleMicrotask,ne=e.supportsTestSelectors,re=e.findFiberRoot,se=e.getBoundingRect,ie=e.getTextContent,ae=e.isHiddenSubtree,oe=e.matchAccessibilityRole,le=e.setFocusIfFocusable,ce=e.setupIntersectionObserver,de=e.appendChild,ue=e.appendChildToContainer,he=e.commitTextUpdate,pe=e.commitMount,me=e.commitUpdate,fe=e.insertBefore,ge=e.insertInContainerBefore,xe=e.removeChild,ve=e.removeChildFromContainer,ye=e.resetTextContent,be=e.hideInstance,we=e.hideTextInstance,je=e.unhideInstance,Ne=e.unhideTextInstance,_e=e.clearContainer,Se=e.cloneInstance,Me=e.createContainerChildSet,Ce=e.appendChildToContainerChildSet,Ee=e.finalizeContainerChildren,ke=e.replaceContainerChildren,Ae=e.cloneHiddenInstance,Te=e.cloneHiddenTextInstance,Pe=e.canHydrateInstance,Oe=e.canHydrateTextInstance,Re=e.canHydrateSuspenseInstance,Ie=e.isSuspenseInstancePending,De=e.isSuspenseInstanceFallback,Le=e.registerSuspenseInstanceRetry,Fe=e.getNextHydratableSibling,ze=e.getFirstHydratableChild,Be=e.getFirstHydratableChildWithinContainer,Ue=e.getFirstHydratableChildWithinSuspenseInstance,Ve=e.hydrateInstance,He=e.hydrateTextInstance,We=e.hydrateSuspenseInstance,$e=e.getNextHydratableInstanceAfterSuspenseInstance,Ge=e.commitHydratedContainer,qe=e.commitHydratedSuspenseInstance,Xe=e.clearSuspenseBoundary,Ke=e.clearSuspenseBoundaryFromContainer,Ye=e.shouldDeleteUnhydratedTailInstances,Ze=e.didNotMatchHydratedContainerTextInstance,Je=e.didNotMatchHydratedTextInstance;function Qe(e){if(void 0===A)try{throw Error()}catch(WDe){var t=WDe.stack.trim().match(/\n( *(at )?)/);A=t&&t[1]||""}return"\n"+A+e}var et=!1;function tt(e,t){if(!e||et)return"";et=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"==typeof c.stack){for(var s=c.stack.split("\n"),i=r.stack.split("\n"),a=s.length-1,o=i.length-1;1<=a&&0<=o&&s[a]!==i[o];)o--;for(;1<=a&&0<=o;a--,o--)if(s[a]!==i[o]){if(1!==a||1!==o)do{if(a--,0>--o||s[a]!==i[o]){var l="\n"+s[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=o);break}}}finally{et=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Qe(e):""}var nt=Object.prototype.hasOwnProperty,rt=[],st=-1;function it(e){return{current:e}}function at(e){0>st||(e.current=rt[st],rt[st]=null,st--)}function ot(e,t){st++,rt[st]=e.current,e.current=t}var lt={},ct=it(lt),dt=it(!1),ut=lt;function ht(e,t){var n=e.type.contextTypes;if(!n)return lt;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s,i={};for(s in n)i[s]=t[s];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function pt(e){return null!=e.childContextTypes}function mt(){at(dt),at(ct)}function ft(e,t,n){if(ct.current!==lt)throw Error(i(168));ot(ct,t),ot(dt,n)}function gt(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in t))throw Error(i(108,N(e)||"Unknown",a));return s({},n,r)}function xt(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||lt,ut=ct.current,ot(ct,e),ot(dt,dt.current),!0}function vt(e,t,n){var r=e.stateNode;if(!r)throw Error(i(169));n?(e=gt(e,t,ut),r.__reactInternalMemoizedMergedChildContext=e,at(dt),at(ct),ot(ct,e)):at(dt),ot(dt,n)}var yt=Math.clz32?Math.clz32:function(e){return 0==(e>>>=0)?32:31-(bt(e)/wt|0)|0},bt=Math.log,wt=Math.LN2,jt=64,Nt=4194304;function _t(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function St(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,a=268435455&n;if(0!==a){var o=a&~s;0!==o?r=_t(o):0!==(i&=a)&&(r=_t(i))}else 0!==(a=n&~s)?r=_t(a):0!==i&&(r=_t(i));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&s)&&((s=r&-r)>=(i=t&-t)||16===s&&4194240&i))return t;if(4&r&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)s=1<<(n=31-yt(t)),r|=e[n],t&=~s;return r}function Mt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Ct(e){return 0!=(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Et(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function kt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-yt(t)]=n}function At(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-yt(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var Tt=0;function Pt(e){return 1<(e&=-e)?4<e?268435455&e?16:536870912:4:1}var Ot=r.unstable_scheduleCallback,Rt=r.unstable_cancelCallback,It=r.unstable_shouldYield,Dt=r.unstable_requestPaint,Lt=r.unstable_now,Ft=r.unstable_ImmediatePriority,zt=r.unstable_UserBlockingPriority,Bt=r.unstable_NormalPriority,Ut=r.unstable_IdlePriority,Vt=null,Ht=null,Wt="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},$t=null,Gt=!1,qt=!1;function Xt(e){null===$t?$t=[e]:$t.push(e)}function Kt(){if(!qt&&null!==$t){qt=!0;var e=0,t=Tt;try{var n=$t;for(Tt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}$t=null,Gt=!1}catch(s){throw null!==$t&&($t=$t.slice(e+1)),Ot(Ft,Kt),s}finally{Tt=t,qt=!1}}return null}var Yt=a.ReactCurrentBatchConfig;function Zt(e,t){if(Wt(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!nt.call(t,s)||!Wt(e[s],t[s]))return!1}return!0}function Jt(e){switch(e.tag){case 5:return Qe(e.type);case 16:return Qe("Lazy");case 13:return Qe("Suspense");case 19:return Qe("SuspenseList");case 0:case 2:case 15:return tt(e.type,!1);case 11:return tt(e.type.render,!1);case 1:return tt(e.type,!0);default:return""}}function Qt(e,t){if(e&&e.defaultProps){for(var n in t=s({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var en=it(null),tn=null,nn=null,rn=null;function sn(){rn=nn=tn=null}function an(e,t,n){G?(ot(en,t._currentValue),t._currentValue=n):(ot(en,t._currentValue2),t._currentValue2=n)}function on(e){var t=en.current;at(en),G?e._currentValue=t:e._currentValue2=t}function ln(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function cn(e,t){tn=e,rn=nn=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Is=!0),e.firstContext=null)}function dn(e){var t=G?e._currentValue:e._currentValue2;if(rn!==e)if(e={context:e,memoizedValue:t,next:null},null===nn){if(null===tn)throw Error(i(308));nn=e,tn.dependencies={lanes:0,firstContext:e}}else nn=nn.next=e;return t}var un=null,pn=!1;function mn(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function fn(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function gn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function xn(e,t){var n=e.updateQueue;null!==n&&(n=n.shared,null!==qi&&1&e.mode&&!(2&Gi)?(null===(e=n.interleaved)?(t.next=t,null===un?un=[n]:un.push(n)):(t.next=e.next,e.next=t),n.interleaved=t):(null===(e=n.pending)?t.next=t:(t.next=e.next,e.next=t),n.pending=t))}function vn(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,At(e,n)}}function yn(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var s=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?s=i=a:i=i.next=a,n=n.next}while(null!==n);null===i?s=i=t:i=i.next=t}else s=i=t;return n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function bn(e,t,n,r){var i=e.updateQueue;pn=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(null!==l){i.shared.pending=null;var c=l,d=c.next;c.next=null,null===o?a=d:o.next=d,o=c;var u=e.alternate;null!==u&&(l=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===l?u.firstBaseUpdate=d:l.next=d,u.lastBaseUpdate=c)}if(null!==a){var h=i.baseState;for(o=0,u=d=c=null,l=a;;){var p=l.lane,m=l.eventTime;if((r&p)===p){null!==u&&(u=u.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var f=e,g=l;switch(p=t,m=n,g.tag){case 1:if("function"==typeof(f=g.payload)){h=f.call(m,h,p);break e}h=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null==(p="function"==typeof(f=g.payload)?f.call(m,h,p):f))break e;h=s({},h,p);break e;case 2:pn=!0}}null!==l.callback&&0!==l.lane&&(e.flags|=64,null===(p=i.effects)?i.effects=[l]:p.push(l))}else m={eventTime:m,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},null===u?(d=u=m,c=h):u=u.next=m,o|=p;if(null===(l=l.next)){if(null===(l=i.shared.pending))break;l=(p=l).next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}if(null===u&&(c=h),i.baseState=c,i.firstBaseUpdate=d,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);ea|=o,e.lanes=o,e.memoizedState=h}}function wn(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(null!==s){if(r.callback=null,r=n,"function"!=typeof s)throw Error(i(191,s));s.call(r)}}}var jn=(new n.Component).refs;function Nn(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:s({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var _n={isMounted:function(e){return!!(e=e._reactInternals)&&_(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ya(),s=ba(e),i=gn(r,s);i.payload=t,null!=n&&(i.callback=n),xn(e,i),null!==(t=wa(e,s,r))&&vn(t,e,s)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ya(),s=ba(e),i=gn(r,s);i.tag=1,i.payload=t,null!=n&&(i.callback=n),xn(e,i),null!==(t=wa(e,s,r))&&vn(t,e,s)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ya(),r=ba(e),s=gn(n,r);s.tag=2,null!=t&&(s.callback=t),xn(e,s),null!==(t=wa(e,r,n))&&vn(t,e,r)}};function Sn(e,t,n,r,s,i,a){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,a):!(t.prototype&&t.prototype.isPureReactComponent&&Zt(n,r)&&Zt(s,i))}function Mn(e,t,n){var r=!1,s=lt,i=t.contextType;return"object"==typeof i&&null!==i?i=dn(i):(s=pt(t)?ut:ct.current,i=(r=null!=(r=t.contextTypes))?ht(e,s):lt),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=_n,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function Cn(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&_n.enqueueReplaceState(t,t.state,null)}function En(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs=jn,mn(e);var i=t.contextType;"object"==typeof i&&null!==i?s.context=dn(i):(i=pt(t)?ut:ct.current,s.context=ht(e,i)),s.state=e.memoizedState,"function"==typeof(i=t.getDerivedStateFromProps)&&(Nn(e,t,i,n),s.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof s.getSnapshotBeforeUpdate||"function"!=typeof s.UNSAFE_componentWillMount&&"function"!=typeof s.componentWillMount||(t=s.state,"function"==typeof s.componentWillMount&&s.componentWillMount(),"function"==typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),t!==s.state&&_n.enqueueReplaceState(s,s.state,null),bn(e,n,s,r),s.state=e.memoizedState),"function"==typeof s.componentDidMount&&(e.flags|=4194308)}var kn=[],An=0,Tn=null,Pn=0,On=[],Rn=0,In=null,Dn=1,Ln="";function Fn(e,t){kn[An++]=Pn,kn[An++]=Tn,Tn=e,Pn=t}function zn(e,t,n){On[Rn++]=Dn,On[Rn++]=Ln,On[Rn++]=In,In=e;var r=Dn;e=Ln;var s=32-yt(r)-1;r&=~(1<<s),n+=1;var i=32-yt(t)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,Dn=1<<32-yt(t)+s|n<<s|r,Ln=i+e}else Dn=1<<i|n<<s|r,Ln=e}function Bn(e){null!==e.return&&(Fn(e,1),zn(e,1,0))}function Un(e){for(;e===Tn;)Tn=kn[--An],kn[An]=null,Pn=kn[--An],kn[An]=null;for(;e===In;)In=On[--Rn],On[Rn]=null,Ln=On[--Rn],On[Rn]=null,Dn=On[--Rn],On[Rn]=null}var Vn=null,Hn=null,Wn=!1,$n=!1,Gn=null;function qn(e,t){var n=Ya(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function Xn(e,t){switch(e.tag){case 5:return null!==(t=Pe(t,e.type,e.pendingProps))&&(e.stateNode=t,Vn=e,Hn=ze(t),!0);case 6:return null!==(t=Oe(t,e.pendingProps))&&(e.stateNode=t,Vn=e,Hn=null,!0);case 13:if(null!==(t=Re(t))){var n=null!==In?{id:Dn,overflow:Ln}:null;return e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ya(18,null,null,0)).stateNode=t,n.return=e,e.child=n,Vn=e,Hn=null,!0}return!1;default:return!1}}function Kn(e){return!(!(1&e.mode)||128&e.flags)}function Yn(e){if(Wn){var t=Hn;if(t){var n=t;if(!Xn(e,t)){if(Kn(e))throw Error(i(418));t=Fe(n);var r=Vn;t&&Xn(e,t)?qn(r,n):(e.flags=-4097&e.flags|2,Wn=!1,Vn=e)}}else{if(Kn(e))throw Error(i(418));e.flags=-4097&e.flags|2,Wn=!1,Vn=e}}}function Zn(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Vn=e}function Jn(e){if(!K||e!==Vn)return!1;if(!Wn)return Zn(e),Wn=!0,!1;if(3!==e.tag&&(5!==e.tag||Ye(e.type)&&!U(e.type,e.memoizedProps))){var t=Hn;if(t){if(Kn(e)){for(e=Hn;e;)e=Fe(e);throw Error(i(418))}for(;t;)qn(e,t),t=Fe(t)}}if(Zn(e),13===e.tag){if(!K)throw Error(i(316));if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));Hn=$e(e)}else Hn=Vn?Fe(e.stateNode):null;return!0}function Qn(){K&&(Hn=Vn=null,$n=Wn=!1)}function er(e){null===Gn?Gn=[e]:Gn.push(e)}function tr(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var r=n.stateNode}if(!r)throw Error(i(147,e));var s=r,a=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===a?t.ref:((t=function(e){var t=s.refs;t===jn&&(t=s.refs={}),null===e?delete t[a]:t[a]=e})._stringRef=a,t)}if("string"!=typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function nr(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function rr(e){return(0,e._init)(e._payload)}function sr(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function s(e,t){return(e=Ja(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function d(t){return e&&null===t.alternate&&(t.flags|=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=no(n,e.mode,r)).return=e,t):((t=s(t,n)).return=e,t)}function h(e,t,n,r){var i=n.type;return i===c?m(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"==typeof i&&null!==i&&i.$$typeof===v&&rr(i)===t.type)?((r=s(t,n.props)).ref=tr(e,t,n),r.return=e,r):((r=Qa(n.type,n.key,n.props,null,e.mode,r)).ref=tr(e,t,n),r.return=e,r)}function p(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=ro(n,e.mode,r)).return=e,t):((t=s(t,n.children||[])).return=e,t)}function m(e,t,n,r,i){return null===t||7!==t.tag?((t=eo(n,e.mode,r,i)).return=e,t):((t=s(t,n)).return=e,t)}function f(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=no(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case o:return(n=Qa(t.type,t.key,t.props,null,e.mode,n)).ref=tr(e,null,t),n.return=e,n;case l:return(t=ro(t,e.mode,n)).return=e,t;case v:return f(e,(0,t._init)(t._payload),n)}if(T(t)||w(t))return(t=eo(t,e.mode,n,null)).return=e,t;nr(e,t)}return null}function g(e,t,n,r){var s=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n)return null!==s?null:u(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case o:return n.key===s?h(e,t,n,r):null;case l:return n.key===s?p(e,t,n,r):null;case v:return g(e,t,(s=n._init)(n._payload),r)}if(T(n)||w(n))return null!==s?null:m(e,t,n,r,null);nr(e,n)}return null}function x(e,t,n,r,s){if("string"==typeof r&&""!==r||"number"==typeof r)return u(t,e=e.get(n)||null,""+r,s);if("object"==typeof r&&null!==r){switch(r.$$typeof){case o:return h(t,e=e.get(null===r.key?n:r.key)||null,r,s);case l:return p(t,e=e.get(null===r.key?n:r.key)||null,r,s);case v:return x(e,t,n,(0,r._init)(r._payload),s)}if(T(r)||w(r))return m(t,e=e.get(n)||null,r,s,null);nr(t,r)}return null}return function u(h,p,m,y){if("object"==typeof m&&null!==m&&m.type===c&&null===m.key&&(m=m.props.children),"object"==typeof m&&null!==m){switch(m.$$typeof){case o:e:{for(var b=m.key,j=p;null!==j;){if(j.key===b){if((b=m.type)===c){if(7===j.tag){n(h,j.sibling),(p=s(j,m.props.children)).return=h,h=p;break e}}else if(j.elementType===b||"object"==typeof b&&null!==b&&b.$$typeof===v&&rr(b)===j.type){n(h,j.sibling),(p=s(j,m.props)).ref=tr(h,j,m),p.return=h,h=p;break e}n(h,j);break}t(h,j),j=j.sibling}m.type===c?((p=eo(m.props.children,h.mode,y,m.key)).return=h,h=p):((y=Qa(m.type,m.key,m.props,null,h.mode,y)).ref=tr(h,p,m),y.return=h,h=y)}return d(h);case l:e:{for(j=m.key;null!==p;){if(p.key===j){if(4===p.tag&&p.stateNode.containerInfo===m.containerInfo&&p.stateNode.implementation===m.implementation){n(h,p.sibling),(p=s(p,m.children||[])).return=h,h=p;break e}n(h,p);break}t(h,p),p=p.sibling}(p=ro(m,h.mode,y)).return=h,h=p}return d(h);case v:return u(h,p,(j=m._init)(m._payload),y)}if(T(m))return function(s,i,o,l){for(var c=null,d=null,u=i,h=i=0,p=null;null!==u&&h<o.length;h++){u.index>h?(p=u,u=null):p=u.sibling;var m=g(s,u,o[h],l);if(null===m){null===u&&(u=p);break}e&&u&&null===m.alternate&&t(s,u),i=a(m,i,h),null===d?c=m:d.sibling=m,d=m,u=p}if(h===o.length)return n(s,u),Wn&&Fn(s,h),c;if(null===u){for(;h<o.length;h++)null!==(u=f(s,o[h],l))&&(i=a(u,i,h),null===d?c=u:d.sibling=u,d=u);return Wn&&Fn(s,h),c}for(u=r(s,u);h<o.length;h++)null!==(p=x(u,s,h,o[h],l))&&(e&&null!==p.alternate&&u.delete(null===p.key?h:p.key),i=a(p,i,h),null===d?c=p:d.sibling=p,d=p);return e&&u.forEach(function(e){return t(s,e)}),Wn&&Fn(s,h),c}(h,p,m,y);if(w(m))return function(s,o,l,c){var d=w(l);if("function"!=typeof d)throw Error(i(150));if(null==(l=d.call(l)))throw Error(i(151));for(var u=d=null,h=o,p=o=0,m=null,v=l.next();null!==h&&!v.done;p++,v=l.next()){h.index>p?(m=h,h=null):m=h.sibling;var y=g(s,h,v.value,c);if(null===y){null===h&&(h=m);break}e&&h&&null===y.alternate&&t(s,h),o=a(y,o,p),null===u?d=y:u.sibling=y,u=y,h=m}if(v.done)return n(s,h),Wn&&Fn(s,p),d;if(null===h){for(;!v.done;p++,v=l.next())null!==(v=f(s,v.value,c))&&(o=a(v,o,p),null===u?d=v:u.sibling=v,u=v);return Wn&&Fn(s,p),d}for(h=r(s,h);!v.done;p++,v=l.next())null!==(v=x(h,s,p,v.value,c))&&(e&&null!==v.alternate&&h.delete(null===v.key?p:v.key),o=a(v,o,p),null===u?d=v:u.sibling=v,u=v);return e&&h.forEach(function(e){return t(s,e)}),Wn&&Fn(s,p),d}(h,p,m,y);nr(h,m)}return"string"==typeof m&&""!==m||"number"==typeof m?(m=""+m,null!==p&&6===p.tag?(n(h,p.sibling),(p=s(p,m)).return=h,h=p):(n(h,p),(p=no(m,h.mode,y)).return=h,h=p),d(h)):n(h,p)}}var ir=sr(!0),ar=sr(!1),or={},lr=it(or),cr=it(or),dr=it(or);function ur(e){if(e===or)throw Error(i(174));return e}function hr(e,t){ot(dr,t),ot(cr,e),ot(lr,or),e=O(t),at(lr),ot(lr,e)}function pr(){at(lr),at(cr),at(dr)}function mr(e){var t=ur(dr.current),n=ur(lr.current);n!==(t=R(n,e.type,t))&&(ot(cr,e),ot(lr,t))}function fr(e){cr.current===e&&(at(lr),at(cr))}var gr=it(0);function xr(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||Ie(n)||De(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(128&t.flags)return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var vr=[];function yr(){for(var e=0;e<vr.length;e++){var t=vr[e];G?t._workInProgressVersionPrimary=null:t._workInProgressVersionSecondary=null}vr.length=0}var br=a.ReactCurrentDispatcher,wr=a.ReactCurrentBatchConfig,jr=0,Nr=null,_r=null,Sr=null,Mr=!1,Cr=!1,Er=0,kr=0;function Ar(){throw Error(i(321))}function Tr(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Wt(e[n],t[n]))return!1;return!0}function Pr(e,t,n,r,s,a){if(jr=a,Nr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,br.current=null===e||null===e.memoizedState?ms:fs,e=n(r,s),Cr){a=0;do{if(Cr=!1,Er=0,25<=a)throw Error(i(301));a+=1,Sr=_r=null,t.updateQueue=null,br.current=gs,e=n(r,s)}while(Cr)}if(br.current=ps,t=null!==_r&&null!==_r.next,jr=0,Sr=_r=Nr=null,Mr=!1,t)throw Error(i(300));return e}function Or(){var e=0!==Er;return Er=0,e}function Rr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Sr?Nr.memoizedState=Sr=e:Sr=Sr.next=e,Sr}function Ir(){if(null===_r){var e=Nr.alternate;e=null!==e?e.memoizedState:null}else e=_r.next;var t=null===Sr?Nr.memoizedState:Sr.next;if(null!==t)Sr=t,_r=e;else{if(null===e)throw Error(i(310));e={memoizedState:(_r=e).memoizedState,baseState:_r.baseState,baseQueue:_r.baseQueue,queue:_r.queue,next:null},null===Sr?Nr.memoizedState=Sr=e:Sr=Sr.next=e}return Sr}function Dr(e,t){return"function"==typeof t?t(e):t}function Lr(e){var t=Ir(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=_r,s=r.baseQueue,a=n.pending;if(null!==a){if(null!==s){var o=s.next;s.next=a.next,a.next=o}r.baseQueue=s=a,n.pending=null}if(null!==s){a=s.next,r=r.baseState;var l=o=null,c=null,d=a;do{var u=d.lane;if((jr&u)===u)null!==c&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};null===c?(l=c=h,o=r):c=c.next=h,Nr.lanes|=u,ea|=u}d=d.next}while(null!==d&&d!==a);null===c?o=r:c.next=l,Wt(r,t.memoizedState)||(Is=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){s=e;do{a=s.lane,Nr.lanes|=a,ea|=a,s=s.next}while(s!==e)}else null===s&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Fr(e){var t=Ir(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,a=t.memoizedState;if(null!==s){n.pending=null;var o=s=s.next;do{a=e(a,o.action),o=o.next}while(o!==s);Wt(a,t.memoizedState)||(Is=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function zr(){}function Br(e,t){var n=Nr,r=Ir(),s=t(),a=!Wt(r.memoizedState,s);if(a&&(r.memoizedState=s,Is=!0),r=r.queue,Zr(Hr.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==Sr&&1&Sr.memoizedState.tag){if(n.flags|=2048,Gr(9,Vr.bind(null,n,r,s,t),void 0,null),null===qi)throw Error(i(349));30&jr||Ur(n,t,s)}return s}function Ur(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=Nr.updateQueue)?(t={lastEffect:null,stores:null},Nr.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Vr(e,t,n,r){t.value=n,t.getSnapshot=r,Wr(t)&&wa(e,1,-1)}function Hr(e,t,n){return n(function(){Wr(t)&&wa(e,1,-1)})}function Wr(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Wt(e,n)}catch(r){return!0}}function $r(e){var t=Rr();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Dr,lastRenderedState:e},t.queue=e,e=e.dispatch=ls.bind(null,Nr,e),[t.memoizedState,e]}function Gr(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Nr.updateQueue)?(t={lastEffect:null,stores:null},Nr.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function qr(){return Ir().memoizedState}function Xr(e,t,n,r){var s=Rr();Nr.flags|=e,s.memoizedState=Gr(1|t,n,void 0,void 0===r?null:r)}function Kr(e,t,n,r){var s=Ir();r=void 0===r?null:r;var i=void 0;if(null!==_r){var a=_r.memoizedState;if(i=a.destroy,null!==r&&Tr(r,a.deps))return void(s.memoizedState=Gr(t,n,i,r))}Nr.flags|=e,s.memoizedState=Gr(1|t,n,i,r)}function Yr(e,t){return Xr(8390656,8,e,t)}function Zr(e,t){return Kr(2048,8,e,t)}function Jr(e,t){return Kr(4,2,e,t)}function Qr(e,t){return Kr(4,4,e,t)}function es(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function ts(e,t,n){return n=null!=n?n.concat([e]):null,Kr(4,4,es.bind(null,t,e),n)}function ns(){}function rs(e,t){var n=Ir();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Tr(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function ss(e,t){var n=Ir();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Tr(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function is(e,t){var n=Tt;Tt=0!==n&&4>n?n:4,e(!0);var r=wr.transition;wr.transition={};try{e(!1),t()}finally{Tt=n,wr.transition=r}}function as(){return Ir().memoizedState}function os(e,t,n){var r=ba(e);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},cs(e)?ds(t,n):(us(e,t,n),null!==(e=wa(e,r,n=ya()))&&hs(e,t,r))}function ls(e,t,n){var r=ba(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(cs(e))ds(t,s);else{us(e,t,s);var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=i(a,n);if(s.hasEagerState=!0,s.eagerState=o,Wt(o,a))return}catch(l){}null!==(e=wa(e,r,n=ya()))&&hs(e,t,r)}}function cs(e){var t=e.alternate;return e===Nr||null!==t&&t===Nr}function ds(e,t){Cr=Mr=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function us(e,t,n){null!==qi&&1&e.mode&&!(2&Gi)?(null===(e=t.interleaved)?(n.next=n,null===un?un=[t]:un.push(t)):(n.next=e.next,e.next=n),t.interleaved=n):(null===(e=t.pending)?n.next=n:(n.next=e.next,e.next=n),t.pending=n)}function hs(e,t,n){if(4194240&n){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,At(e,n)}}var ps={readContext:dn,useCallback:Ar,useContext:Ar,useEffect:Ar,useImperativeHandle:Ar,useInsertionEffect:Ar,useLayoutEffect:Ar,useMemo:Ar,useReducer:Ar,useRef:Ar,useState:Ar,useDebugValue:Ar,useDeferredValue:Ar,useTransition:Ar,useMutableSource:Ar,useSyncExternalStore:Ar,useId:Ar,unstable_isNewReconciler:!1},ms={readContext:dn,useCallback:function(e,t){return Rr().memoizedState=[e,void 0===t?null:t],e},useContext:dn,useEffect:Yr,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,Xr(4194308,4,es.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Xr(4194308,4,e,t)},useInsertionEffect:function(e,t){return Xr(4,2,e,t)},useMemo:function(e,t){var n=Rr();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Rr();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=os.bind(null,Nr,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Rr().memoizedState=e},useState:$r,useDebugValue:ns,useDeferredValue:function(e){var t=$r(e),n=t[0],r=t[1];return Yr(function(){var t=wr.transition;wr.transition={};try{r(e)}finally{wr.transition=t}},[e]),n},useTransition:function(){var e=$r(!1),t=e[0];return e=is.bind(null,e[1]),Rr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Nr,s=Rr();if(Wn){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===qi)throw Error(i(349));30&jr||Ur(r,t,n)}s.memoizedState=n;var a={value:n,getSnapshot:t};return s.queue=a,Yr(Hr.bind(null,r,a,e),[e]),r.flags|=2048,Gr(9,Vr.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=Rr(),t=qi.identifierPrefix;if(Wn){var n=Ln;t=":"+t+"R"+(n=(Dn&~(1<<32-yt(Dn)-1)).toString(32)+n),0<(n=Er++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=kr++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},fs={readContext:dn,useCallback:rs,useContext:dn,useEffect:Zr,useImperativeHandle:ts,useInsertionEffect:Jr,useLayoutEffect:Qr,useMemo:ss,useReducer:Lr,useRef:qr,useState:function(){return Lr(Dr)},useDebugValue:ns,useDeferredValue:function(e){var t=Lr(Dr),n=t[0],r=t[1];return Zr(function(){var t=wr.transition;wr.transition={};try{r(e)}finally{wr.transition=t}},[e]),n},useTransition:function(){return[Lr(Dr)[0],Ir().memoizedState]},useMutableSource:zr,useSyncExternalStore:Br,useId:as,unstable_isNewReconciler:!1},gs={readContext:dn,useCallback:rs,useContext:dn,useEffect:Zr,useImperativeHandle:ts,useInsertionEffect:Jr,useLayoutEffect:Qr,useMemo:ss,useReducer:Fr,useRef:qr,useState:function(){return Fr(Dr)},useDebugValue:ns,useDeferredValue:function(e){var t=Fr(Dr),n=t[0],r=t[1];return Zr(function(){var t=wr.transition;wr.transition={};try{r(e)}finally{wr.transition=t}},[e]),n},useTransition:function(){return[Fr(Dr)[0],Ir().memoizedState]},useMutableSource:zr,useSyncExternalStore:Br,useId:as,unstable_isNewReconciler:!1};function xs(e,t){try{var n="",r=t;do{n+=Jt(r),r=r.return}while(r);var s=n}catch(i){s="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:s}}var vs,ys,bs,ws,js="function"==typeof WeakMap?WeakMap:Map;function Ns(e,t,n){(n=gn(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){ca||(ca=!0,da=r)},n}function _s(e,t,n){(n=gn(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){}}var i=e.stateNode;return null!==i&&"function"==typeof i.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===ua?ua=new Set([this]):ua.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function Ss(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new js;var s=new Set;r.set(t,s)}else void 0===(s=r.get(t))&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=Wa.bind(null,e,t,n),t.then(e,e))}function Ms(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function Cs(e,t,n,r,s){return 1&e.mode?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=gn(-1,1)).tag=2,xn(n,t))),n.lanes|=1),e)}function Es(e){e.flags|=4}function ks(e,t){if(null!==e&&e.child===t.child)return!0;if(16&t.flags)return!1;for(e=t.child;null!==e;){if(12854&e.flags||12854&e.subtreeFlags)return!1;e=e.sibling}return!0}if(q)vs=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)F(e,n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},ys=function(){},bs=function(e,t,n,r,s){if((e=e.memoizedProps)!==r){var i=t.stateNode,a=ur(lr.current);n=B(i,n,e,r,s,a),(t.updateQueue=n)&&Es(t)}},ws=function(e,t,n,r){n!==r&&Es(t)};else if(X){vs=function(e,t,n,r){for(var s=t.child;null!==s;){if(5===s.tag){var i=s.stateNode;n&&r&&(i=Ae(i,s.type,s.memoizedProps,s)),F(e,i)}else if(6===s.tag)i=s.stateNode,n&&r&&(i=Te(i,s.memoizedProps,s)),F(e,i);else if(4!==s.tag)if(22===s.tag&&null!==s.memoizedState)null!==(i=s.child)&&(i.return=s),vs(e,s,!0,!0);else if(null!==s.child){s.child.return=s,s=s.child;continue}if(s===t)break;for(;null===s.sibling;){if(null===s.return||s.return===t)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};var As=function(e,t,n,r){for(var s=t.child;null!==s;){if(5===s.tag){var i=s.stateNode;n&&r&&(i=Ae(i,s.type,s.memoizedProps,s)),Ce(e,i)}else if(6===s.tag)i=s.stateNode,n&&r&&(i=Te(i,s.memoizedProps,s)),Ce(e,i);else if(4!==s.tag)if(22===s.tag&&null!==s.memoizedState)null!==(i=s.child)&&(i.return=s),As(e,s,!0,!0);else if(null!==s.child){s.child.return=s,s=s.child;continue}if(s===t)break;for(;null===s.sibling;){if(null===s.return||s.return===t)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};ys=function(e,t){var n=t.stateNode;if(!ks(e,t)){e=n.containerInfo;var r=Me(e);As(r,t,!1,!1),n.pendingChildren=r,Es(t),Ee(e,r)}},bs=function(e,t,n,r,s){var i=e.stateNode,a=e.memoizedProps;if((e=ks(e,t))&&a===r)t.stateNode=i;else{var o=t.stateNode,l=ur(lr.current),c=null;a!==r&&(c=B(o,n,a,r,s,l)),e&&null===c?t.stateNode=i:(i=Se(i,c,n,a,r,t,e,o),z(i,n,r,s,l)&&Es(t),t.stateNode=i,e?Es(t):vs(i,t,!1,!1))}},ws=function(e,t,n,r){n!==r?(e=ur(dr.current),n=ur(lr.current),t.stateNode=V(r,e,n,t),Es(t)):t.stateNode=e.stateNode}}else ys=function(){},bs=function(){},ws=function(){};function Ts(e,t){if(!Wn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ps(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=14680064&s.subtreeFlags,r|=14680064&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Os(e,t,n){var r=t.pendingProps;switch(Un(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ps(t),null;case 1:case 17:return pt(t.type)&&mt(),Ps(t),null;case 3:return r=t.stateNode,pr(),at(dt),at(ct),yr(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Jn(t)?Es(t):null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,null!==Gn&&(Ma(Gn),Gn=null))),ys(e,t),Ps(t),null;case 5:fr(t),n=ur(dr.current);var s=t.type;if(null!==e&&null!=t.stateNode)bs(e,t,s,r,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(i(166));return Ps(t),null}if(e=ur(lr.current),Jn(t)){if(!K)throw Error(i(175));e=Ve(t.stateNode,t.type,t.memoizedProps,n,e,t,!$n),t.updateQueue=e,null!==e&&Es(t)}else{var a=L(s,r,n,e,t);vs(a,t,!1,!1),t.stateNode=a,z(a,s,r,n,e)&&Es(t)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ps(t),null;case 6:if(e&&null!=t.stateNode)ws(e,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(i(166));if(e=ur(dr.current),n=ur(lr.current),Jn(t)){if(!K)throw Error(i(176));if(e=t.stateNode,r=t.memoizedProps,(n=He(e,r,t,!$n))&&null!==(s=Vn))switch(a=!!(1&s.mode),s.tag){case 3:Ze(s.stateNode.containerInfo,e,r,a);break;case 5:Je(s.type,s.memoizedProps,s.stateNode,e,r,a)}n&&Es(t)}else t.stateNode=V(r,e,n,t)}return Ps(t),null;case 13:if(at(gr),r=t.memoizedState,Wn&&null!==Hn&&1&t.mode&&!(128&t.flags)){for(e=Hn;e;)e=Fe(e);return Qn(),t.flags|=98560,t}if(null!==r&&null!==r.dehydrated){if(r=Jn(t),null===e){if(!r)throw Error(i(318));if(!K)throw Error(i(344));if(!(e=null!==(e=t.memoizedState)?e.dehydrated:null))throw Error(i(317));We(e,t)}else Qn(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;return Ps(t),null}return null!==Gn&&(Ma(Gn),Gn=null),128&t.flags?(t.lanes=n,t):(r=null!==r,n=!1,null===e?Jn(t):n=null!==e.memoizedState,r&&!n&&(t.child.flags|=8192,1&t.mode&&(null===e||1&gr.current?0===Ji&&(Ji=3):Ra())),null!==t.updateQueue&&(t.flags|=4),Ps(t),null);case 4:return pr(),ys(e,t),null===e&&Z(t.stateNode.containerInfo),Ps(t),null;case 10:return on(t.type._context),Ps(t),null;case 19:if(at(gr),null===(s=t.memoizedState))return Ps(t),null;if(r=!!(128&t.flags),null===(a=s.rendering))if(r)Ts(s,!1);else{if(0!==Ji||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(a=xr(e))){for(t.flags|=128,Ts(s,!1),null!==(e=a.updateQueue)&&(t.updateQueue=e,t.flags|=4),t.subtreeFlags=0,e=n,r=t.child;null!==r;)s=e,(n=r).flags&=14680066,null===(a=n.alternate)?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,s=a.dependencies,n.dependencies=null===s?null:{lanes:s.lanes,firstContext:s.firstContext}),r=r.sibling;return ot(gr,1&gr.current|2),t.child}e=e.sibling}null!==s.tail&&Lt()>aa&&(t.flags|=128,r=!0,Ts(s,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=xr(a))){if(t.flags|=128,r=!0,null!==(e=e.updateQueue)&&(t.updateQueue=e,t.flags|=4),Ts(s,!0),null===s.tail&&"hidden"===s.tailMode&&!a.alternate&&!Wn)return Ps(t),null}else 2*Lt()-s.renderingStartTime>aa&&1073741824!==n&&(t.flags|=128,r=!0,Ts(s,!1),t.lanes=4194304);s.isBackwards?(a.sibling=t.child,t.child=a):(null!==(e=s.last)?e.sibling=a:t.child=a,s.last=a)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Lt(),t.sibling=null,e=gr.current,ot(gr,r?1&e|2:1&e),t):(Ps(t),null);case 22:case 23:return Aa(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&1&t.mode?!!(1073741824&Yi)&&(Ps(t),q&&6&t.subtreeFlags&&(t.flags|=8192)):Ps(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}var Rs=a.ReactCurrentOwner,Is=!1;function Ds(e,t,n,r){t.child=null===e?ar(t,null,n,r):ir(t,e.child,n,r)}function Ls(e,t,n,r,s){n=n.render;var i=t.ref;return cn(t,s),r=Pr(e,t,n,r,i,s),n=Or(),null===e||Is?(Wn&&n&&Bn(t),t.flags|=1,Ds(e,t,r,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,ri(e,t,s))}function Fs(e,t,n,r,s){if(null===e){var i=n.type;return"function"!=typeof i||Za(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Qa(n.type,null,r,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,zs(e,t,i,r,s))}if(i=e.child,0===(e.lanes&s)){var a=i.memoizedProps;if((n=null!==(n=n.compare)?n:Zt)(a,r)&&e.ref===t.ref)return ri(e,t,s)}return t.flags|=1,(e=Ja(i,r)).ref=t.ref,e.return=t,t.child=e}function zs(e,t,n,r,s){if(null!==e&&Zt(e.memoizedProps,r)&&e.ref===t.ref){if(Is=!1,0===(e.lanes&s))return t.lanes=e.lanes,ri(e,t,s);131072&e.flags&&(Is=!0)}return Vs(e,t,n,r,s)}function Bs(e,t,n){var r=t.pendingProps,s=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(1&t.mode){if(!(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null},t.updateQueue=null,ot(Zi,Yi),Yi|=e,null;t.memoizedState={baseLanes:0,cachePool:null},r=null!==i?i.baseLanes:n,ot(Zi,Yi),Yi|=r}else t.memoizedState={baseLanes:0,cachePool:null},ot(Zi,Yi),Yi|=n;else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,ot(Zi,Yi),Yi|=r;return Ds(e,t,s,n),t.child}function Us(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Vs(e,t,n,r,s){var i=pt(n)?ut:ct.current;return i=ht(t,i),cn(t,s),n=Pr(e,t,n,r,i,s),r=Or(),null===e||Is?(Wn&&r&&Bn(t),t.flags|=1,Ds(e,t,n,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,ri(e,t,s))}function Hs(e,t,n,r,s){if(pt(n)){var i=!0;xt(t)}else i=!1;if(cn(t,s),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),Mn(t,n,r),En(t,n,r,s),r=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,c=n.contextType;c="object"==typeof c&&null!==c?dn(c):ht(t,c=pt(n)?ut:ct.current);var d=n.getDerivedStateFromProps,u="function"==typeof d||"function"==typeof a.getSnapshotBeforeUpdate;u||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(o!==r||l!==c)&&Cn(t,a,r,c),pn=!1;var h=t.memoizedState;a.state=h,bn(t,r,a,s),l=t.memoizedState,o!==r||h!==l||dt.current||pn?("function"==typeof d&&(Nn(t,n,d,r),l=t.memoizedState),(o=pn||Sn(t,n,o,r,h,l,c))?(u||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(t.flags|=4194308)):("function"==typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=o):("function"==typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,fn(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:Qt(t.type,o),a.props=c,u=t.pendingProps,h=a.context,l="object"==typeof(l=n.contextType)&&null!==l?dn(l):ht(t,l=pt(n)?ut:ct.current);var p=n.getDerivedStateFromProps;(d="function"==typeof p||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(o!==u||h!==l)&&Cn(t,a,r,l),pn=!1,h=t.memoizedState,a.state=h,bn(t,r,a,s);var m=t.memoizedState;o!==u||h!==m||dt.current||pn?("function"==typeof p&&(Nn(t,n,p,r),m=t.memoizedState),(c=pn||Sn(t,n,c,r,h,m,l)||!1)?(d||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(r,m,l),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,m,l)),"function"==typeof a.componentDidUpdate&&(t.flags|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=m),a.props=r,a.state=m,a.context=l,r=c):("function"!=typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Ws(e,t,n,r,i,s)}function Ws(e,t,n,r,s,i){Us(e,t);var a=!!(128&t.flags);if(!r&&!a)return s&&vt(t,n,!1),ri(e,t,i);r=t.stateNode,Rs.current=t;var o=a&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=ir(t,e.child,null,i),t.child=ir(t,null,o,i)):Ds(e,t,o,i),t.memoizedState=r.state,s&&vt(t,n,!0),t.child}function $s(e){var t=e.stateNode;t.pendingContext?ft(0,t.pendingContext,t.pendingContext!==t.context):t.context&&ft(0,t.context,!1),hr(e,t.containerInfo)}function Gs(e,t,n,r,s){return Qn(),er(s),t.flags|=256,Ds(e,t,n,r),t.child}var qs={dehydrated:null,treeContext:null,retryLane:0};function Xs(e){return{baseLanes:e,cachePool:null}}function Ks(e,t,n){var r,s=t.pendingProps,a=gr.current,o=!1,l=!!(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&!!(2&a)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),ot(gr,1&a),null===e)return Yn(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(1&t.mode?De(e)?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=s.children,e=s.fallback,o?(s=t.mode,o=t.child,a={mode:"hidden",children:a},1&s||null===o?o=to(a,s,0,null):(o.childLanes=0,o.pendingProps=a),e=eo(e,s,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Xs(n),t.memoizedState=qs,e):Ys(t,a));if(null!==(a=e.memoizedState)){if(null!==(r=a.dehydrated)){if(l)return 256&t.flags?(t.flags&=-257,Qs(e,t,n,Error(i(422)))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=s.fallback,a=t.mode,s=to({mode:"visible",children:s.children},a,0,null),(o=eo(o,a,n,null)).flags|=2,s.return=t,o.return=t,s.sibling=o,t.child=s,1&t.mode&&ir(t,e.child,null,n),t.child.memoizedState=Xs(n),t.memoizedState=qs,o);if(1&t.mode)if(De(r))t=Qs(e,t,n,Error(i(419)));else if(s=0!==(n&e.childLanes),Is||s){if(null!==(s=qi)){switch(n&-n){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}0!==(s=0!==(o&(s.suspendedLanes|n))?0:o)&&s!==a.retryLane&&(a.retryLane=s,wa(e,s,-1))}Ra(),t=Qs(e,t,n,Error(i(421)))}else Ie(r)?(t.flags|=128,t.child=e.child,t=Ga.bind(null,e),Le(r,t),t=null):(n=a.treeContext,K&&(Hn=Ue(r),Vn=t,Wn=!0,Gn=null,$n=!1,null!==n&&(On[Rn++]=Dn,On[Rn++]=Ln,On[Rn++]=In,Dn=n.id,Ln=n.overflow,In=t)),(t=Ys(t,t.pendingProps.children)).flags|=4096);else t=Qs(e,t,n,null);return t}return o?(s=Js(e,t,s.children,s.fallback,n),o=t.child,a=e.child.memoizedState,o.memoizedState=null===a?Xs(n):{baseLanes:a.baseLanes|n,cachePool:null},o.childLanes=e.childLanes&~n,t.memoizedState=qs,s):(n=Zs(e,t,s.children,n),t.memoizedState=null,n)}return o?(s=Js(e,t,s.children,s.fallback,n),o=t.child,a=e.child.memoizedState,o.memoizedState=null===a?Xs(n):{baseLanes:a.baseLanes|n,cachePool:null},o.childLanes=e.childLanes&~n,t.memoizedState=qs,s):(n=Zs(e,t,s.children,n),t.memoizedState=null,n)}function Ys(e,t){return(t=to({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Zs(e,t,n,r){var s=e.child;return e=s.sibling,n=Ja(s,{mode:"visible",children:n}),!(1&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n}function Js(e,t,n,r,s){var i=t.mode,a=(e=e.child).sibling,o={mode:"hidden",children:n};return 1&i||t.child===e?(n=Ja(e,o)).subtreeFlags=14680064&e.subtreeFlags:((n=t.child).childLanes=0,n.pendingProps=o,t.deletions=null),null!==a?r=Ja(a,r):(r=eo(r,i,s,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function Qs(e,t,n,r){return null!==r&&er(r),ir(t,e.child,null,n),(e=Ys(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function ei(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),ln(e.return,t,n)}function ti(e,t,n,r,s){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function ni(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(Ds(e,t,r.children,n),2&(r=gr.current))r=1&r|2,t.flags|=128;else{if(null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ei(e,n,t);else if(19===e.tag)ei(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ot(gr,r),1&t.mode)switch(s){case"forwards":for(n=t.child,s=null;null!==n;)null!==(e=n.alternate)&&null===xr(e)&&(s=n),n=n.sibling;null===(n=s)?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),ti(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===xr(e)){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}ti(t,!0,n,null,i);break;case"together":ti(t,!1,null,null,void 0);break;default:t.memoizedState=null}else t.memoizedState=null;return t.child}function ri(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),ea|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Ja(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ja(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function si(e,t){switch(Un(t),t.tag){case 1:return pt(t.type)&&mt(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return pr(),at(dt),at(ct),yr(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 5:return fr(t),null;case 13:if(at(gr),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));Qn()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return at(gr),null;case 4:return pr(),null;case 10:return on(t.type._context),null;case 22:case 23:return Aa(),null;default:return null}}var ii=!1,ai=!1,oi="function"==typeof WeakSet?WeakSet:Set,li=null;function ci(e,t){var n=e.ref;if(null!==n)if("function"==typeof n)try{n(null)}catch(r){Ha(e,t,r)}else n.current=null}function di(e,t,n){try{n()}catch(r){Ha(e,t,r)}}var ui=!1;function hi(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,void 0!==i&&di(t,n,i)}s=s.next}while(s!==r)}}function pi(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function mi(e){var t=e.ref;if(null!==t){var n=e.stateNode;e=5===e.tag?P(n):n,"function"==typeof t?t(e):t.current=e}}function fi(e,t,n){if(Ht&&"function"==typeof Ht.onCommitFiberUnmount)try{Ht.onCommitFiberUnmount(Vt,t)}catch(a){}switch(t.tag){case 0:case 11:case 14:case 15:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var r=e=e.next;do{var s=r,i=s.destroy;s=s.tag,void 0!==i&&(2&s||4&s)&&di(t,n,i),r=r.next}while(r!==e)}break;case 1:if(ci(t,n),"function"==typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(a){Ha(t,n,a)}break;case 5:ci(t,n);break;case 4:q?Ni(e,t,n):X&&X&&(t=t.stateNode.containerInfo,n=Me(t),ke(t,n))}}function gi(e,t,n){for(var r=t;;)if(fi(e,r,n),null===r.child||q&&4===r.tag){if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}else r.child.return=r,r=r.child}function xi(e){var t=e.alternate;null!==t&&(e.alternate=null,xi(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&null!==(t=e.stateNode)&&Q(t),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function vi(e){return 5===e.tag||3===e.tag||4===e.tag}function yi(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||vi(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function bi(e){if(q){e:{for(var t=e.return;null!==t;){if(vi(t))break e;t=t.return}throw Error(i(160))}var n=t;switch(n.tag){case 5:t=n.stateNode,32&n.flags&&(ye(t),n.flags&=-33),ji(e,n=yi(e),t);break;case 3:case 4:t=n.stateNode.containerInfo,wi(e,n=yi(e),t);break;default:throw Error(i(161))}}}function wi(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?ge(n,e,t):ue(n,e);else if(4!==r&&null!==(e=e.child))for(wi(e,t,n),e=e.sibling;null!==e;)wi(e,t,n),e=e.sibling}function ji(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?fe(n,e,t):de(n,e);else if(4!==r&&null!==(e=e.child))for(ji(e,t,n),e=e.sibling;null!==e;)ji(e,t,n),e=e.sibling}function Ni(e,t,n){for(var r,s,a=t,o=!1;;){if(!o){o=a.return;e:for(;;){if(null===o)throw Error(i(160));switch(r=o.stateNode,o.tag){case 5:s=!1;break e;case 3:case 4:r=r.containerInfo,s=!0;break e}o=o.return}o=!0}if(5===a.tag||6===a.tag)gi(e,a,n),s?ve(r,a.stateNode):xe(r,a.stateNode);else if(18===a.tag)s?Ke(r,a.stateNode):Xe(r,a.stateNode);else if(4===a.tag){if(null!==a.child){r=a.stateNode.containerInfo,s=!0,a.child.return=a,a=a.child;continue}}else if(fi(e,a,n),null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)break;for(;null===a.sibling;){if(null===a.return||a.return===t)return;4===(a=a.return).tag&&(o=!1)}a.sibling.return=a.return,a=a.sibling}}function _i(e,t){if(q){switch(t.tag){case 0:case 11:case 14:case 15:return hi(3,t,t.return),pi(3,t),void hi(5,t,t.return);case 1:case 12:case 17:return;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps;e=null!==e?e.memoizedProps:r;var s=t.type,a=t.updateQueue;t.updateQueue=null,null!==a&&me(n,a,s,e,r,t)}return;case 6:if(null===t.stateNode)throw Error(i(162));return n=t.memoizedProps,void he(t.stateNode,null!==e?e.memoizedProps:n,n);case 3:return void(K&&null!==e&&e.memoizedState.isDehydrated&&Ge(t.stateNode.containerInfo));case 13:case 19:return void Si(t)}throw Error(i(163))}switch(t.tag){case 0:case 11:case 14:case 15:return hi(3,t,t.return),pi(3,t),void hi(5,t,t.return);case 12:case 22:case 23:return;case 13:case 19:return void Si(t);case 3:K&&null!==e&&e.memoizedState.isDehydrated&&Ge(t.stateNode.containerInfo)}e:if(X){switch(t.tag){case 1:case 5:case 6:break e;case 3:case 4:t=t.stateNode,ke(t.containerInfo,t.pendingChildren);break e}throw Error(i(163))}}function Si(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new oi),t.forEach(function(t){var r=qa.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function Mi(e,t,n){li=e,Ci(e)}function Ci(e,t,n){for(var r=!!(1&e.mode);null!==li;){var s=li,i=s.child;if(22===s.tag&&r){var a=null!==s.memoizedState||ii;if(!a){var o=s.alternate,l=null!==o&&null!==o.memoizedState||ai;o=ii;var c=ai;if(ii=a,(ai=l)&&!c)for(li=s;null!==li;)l=(a=li).child,22===a.tag&&null!==a.memoizedState?Ai(s):null!==l?(l.return=a,li=l):Ai(s);for(;null!==i;)li=i,Ci(i),i=i.sibling;li=s,ii=o,ai=c}Ei(e)}else 8772&s.subtreeFlags&&null!==i?(i.return=s,li=i):Ei(e)}}function Ei(e){for(;null!==li;){var t=li;if(8772&t.flags){var n=t.alternate;try{if(8772&t.flags)switch(t.tag){case 0:case 11:case 15:ai||pi(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!ai)if(null===n)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:Qt(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&wn(t,a,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:n=P(t.child.stateNode);break;case 1:n=t.child.stateNode}wn(t,o,n)}break;case 5:var l=t.stateNode;null===n&&4&t.flags&&pe(l,t.type,t.memoizedProps,t);break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:break;case 13:if(K&&null===t.memoizedState){var c=t.alternate;if(null!==c){var d=c.memoizedState;if(null!==d){var u=d.dehydrated;null!==u&&qe(u)}}}break;default:throw Error(i(163))}ai||512&t.flags&&mi(t)}catch(h){Ha(t,t.return,h)}}if(t===e){li=null;break}if(null!==(n=t.sibling)){n.return=t.return,li=n;break}li=t.return}}function ki(e){for(;null!==li;){var t=li;if(t===e){li=null;break}var n=t.sibling;if(null!==n){n.return=t.return,li=n;break}li=t.return}}function Ai(e){for(;null!==li;){var t=li;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{pi(4,t)}catch(l){Ha(t,n,l)}break;case 1:var r=t.stateNode;if("function"==typeof r.componentDidMount){var s=t.return;try{r.componentDidMount()}catch(l){Ha(t,s,l)}}var i=t.return;try{mi(t)}catch(l){Ha(t,i,l)}break;case 5:var a=t.return;try{mi(t)}catch(l){Ha(t,a,l)}}}catch(l){Ha(t,t.return,l)}if(t===e){li=null;break}var o=t.sibling;if(null!==o){o.return=t.return,li=o;break}li=t.return}}var Ti=0,Pi=1,Oi=2,Ri=3,Ii=4;if("function"==typeof Symbol&&Symbol.for){var Di=Symbol.for;Ti=Di("selector.component"),Pi=Di("selector.has_pseudo_class"),Oi=Di("selector.role"),Ri=Di("selector.test_id"),Ii=Di("selector.text")}function Li(e){var t=Y(e);if(null!=t){if("string"!=typeof t.memoizedProps["data-testname"])throw Error(i(364));return t}if(null===(e=re(e)))throw Error(i(362));return e.stateNode.current}function Fi(e,t){switch(t.$$typeof){case Ti:if(e.type===t.value)return!0;break;case Pi:e:{t=t.value,e=[e,0];for(var n=0;n<e.length;){var r=e[n++],s=e[n++],a=t[s];if(5!==r.tag||!ae(r)){for(;null!=a&&Fi(r,a);)a=t[++s];if(s===t.length){t=!0;break e}for(r=r.child;null!==r;)e.push(r,s),r=r.sibling}}t=!1}return t;case Oi:if(5===e.tag&&oe(e.stateNode,t.value))return!0;break;case Ii:if((5===e.tag||6===e.tag)&&null!==(e=ie(e))&&0<=e.indexOf(t.value))return!0;break;case Ri:if(5===e.tag&&"string"==typeof(e=e.memoizedProps["data-testname"])&&e.toLowerCase()===t.value.toLowerCase())return!0;break;default:throw Error(i(365))}return!1}function zi(e){switch(e.$$typeof){case Ti:return"<"+(j(e.value)||"Unknown")+">";case Pi:return":has("+(zi(e)||"")+")";case Oi:return'[role="'+e.value+'"]';case Ii:return'"'+e.value+'"';case Ri:return'[data-testname="'+e.value+'"]';default:throw Error(i(365))}}function Bi(e,t){var n=[];e=[e,0];for(var r=0;r<e.length;){var s=e[r++],i=e[r++],a=t[i];if(5!==s.tag||!ae(s)){for(;null!=a&&Fi(s,a);)a=t[++i];if(i===t.length)n.push(s);else for(s=s.child;null!==s;)e.push(s,i),s=s.sibling}}return n}function Ui(e,t){if(!ne)throw Error(i(363));e=Bi(e=Li(e),t),t=[],e=Array.from(e);for(var n=0;n<e.length;){var r=e[n++];if(5===r.tag)ae(r)||t.push(r.stateNode);else for(r=r.child;null!==r;)e.push(r),r=r.sibling}return t}var Vi=Math.ceil,Hi=a.ReactCurrentDispatcher,Wi=a.ReactCurrentOwner,$i=a.ReactCurrentBatchConfig,Gi=0,qi=null,Xi=null,Ki=0,Yi=0,Zi=it(0),Ji=0,Qi=null,ea=0,ta=0,na=0,ra=null,sa=null,ia=0,aa=1/0;function oa(){aa=Lt()+500}var la,ca=!1,da=null,ua=null,ha=!1,pa=null,ma=0,fa=0,ga=null,xa=-1,va=0;function ya(){return 6&Gi?Lt():-1!==xa?xa:xa=Lt()}function ba(e){return 1&e.mode?2&Gi&&0!==Ki?Ki&-Ki:null!==Yt.transition?(0===va&&(e=jt,!(4194240&(jt<<=1))&&(jt=64),va=e),va):0!==(e=Tt)?e:J():1}function wa(e,t,n){if(50<fa)throw fa=0,ga=null,Error(i(185));var r=ja(e,t);return null===r?null:(kt(r,t,n),2&Gi&&r===qi||(r===qi&&(!(2&Gi)&&(ta|=t),4===Ji&&Ca(r,Ki)),Na(r,n),1===t&&0===Gi&&!(1&e.mode)&&(oa(),Gt&&Kt())),r)}function ja(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function Na(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-yt(i),o=1<<a,l=s[a];-1===l?0!==(o&n)&&0===(o&r)||(s[a]=Mt(o,t)):l<=t&&(e.expiredLanes|=o),i&=~o}}(e,t);var r=St(e,e===qi?Ki:0);if(0===r)null!==n&&Rt(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Rt(n),1===t)0===e.tag?function(e){Gt=!0,Xt(e)}(Ea.bind(null,e)):Xt(Ea.bind(null,e)),ee?te(function(){0===Gi&&Kt()}):Ot(Ft,Kt),n=null;else{switch(Pt(r)){case 1:n=Ft;break;case 4:n=zt;break;case 16:default:n=Bt;break;case 536870912:n=Ut}n=Xa(n,_a.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function _a(e,t){if(xa=-1,va=0,6&Gi)throw Error(i(327));var n=e.callbackNode;if(Ua()&&e.callbackNode!==n)return null;var r=St(e,e===qi?Ki:0);if(0===r)return null;if(30&r||0!==(r&e.expiredLanes)||t)t=Ia(e,r);else{t=r;var s=Gi;Gi|=2;var a=Oa();for(qi===e&&Ki===t||(oa(),Ta(e,t));;)try{La();break}catch(l){Pa(e,l)}sn(),Hi.current=a,Gi=s,null!==Xi?t=0:(qi=null,Ki=0,t=Ji)}if(0!==t){if(2===t&&0!==(s=Ct(e))&&(r=s,t=Sa(e,s)),1===t)throw n=Qi,Ta(e,0),Ca(e,r),Na(e,Lt()),n;if(6===t)Ca(e,r);else{if(s=e.current.alternate,!(30&r||function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Wt(i(),s))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(s)||(t=Ia(e,r),2===t&&(a=Ct(e),0!==a&&(r=a,t=Sa(e,a))),1!==t)))throw n=Qi,Ta(e,0),Ca(e,r),Na(e,Lt()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(i(345));case 2:case 5:Ba(e,sa);break;case 3:if(Ca(e,r),(130023424&r)===r&&10<(t=ia+500-Lt())){if(0!==St(e,0))break;if(((s=e.suspendedLanes)&r)!==r){ya(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=H(Ba.bind(null,e,sa),t);break}Ba(e,sa);break;case 4:if(Ca(e,r),(4194240&r)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-yt(r);a=1<<o,(o=t[o])>s&&(s=o),r&=~a}if(r=s,10<(r=(120>(r=Lt()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Vi(r/1960))-r)){e.timeoutHandle=H(Ba.bind(null,e,sa),r);break}Ba(e,sa);break;default:throw Error(i(329))}}}return Na(e,Lt()),e.callbackNode===n?_a.bind(null,e):null}function Sa(e,t){var n=ra;return e.current.memoizedState.isDehydrated&&(Ta(e,t).flags|=256),2!==(e=Ia(e,t))&&(t=sa,sa=n,null!==t&&Ma(t)),e}function Ma(e){null===sa?sa=e:sa.push.apply(sa,e)}function Ca(e,t){for(t&=~na,t&=~ta,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-yt(t),r=1<<n;e[n]=-1,t&=~r}}function Ea(e){if(6&Gi)throw Error(i(327));Ua();var t=St(e,0);if(!(1&t))return Na(e,Lt()),null;var n=Ia(e,t);if(0!==e.tag&&2===n){var r=Ct(e);0!==r&&(t=r,n=Sa(e,r))}if(1===n)throw n=Qi,Ta(e,0),Ca(e,t),Na(e,Lt()),n;if(6===n)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ba(e,sa),Na(e,Lt()),null}function ka(e){null!==pa&&0===pa.tag&&!(6&Gi)&&Ua();var t=Gi;Gi|=1;var n=$i.transition,r=Tt;try{if($i.transition=null,Tt=1,e)return e()}finally{Tt=r,$i.transition=n,!(6&(Gi=t))&&Kt()}}function Aa(){Yi=Zi.current,at(Zi)}function Ta(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==$&&(e.timeoutHandle=$,W(n)),null!==Xi)for(n=Xi.return;null!==n;){var r=n;switch(Un(r),r.tag){case 1:null!=(r=r.type.childContextTypes)&&mt();break;case 3:pr(),at(dt),at(ct),yr();break;case 5:fr(r);break;case 4:pr();break;case 13:case 19:at(gr);break;case 10:on(r.type._context);break;case 22:case 23:Aa()}n=n.return}if(qi=e,Xi=e=Ja(e.current,null),Ki=Yi=t,Ji=0,Qi=null,na=ta=ea=0,sa=ra=null,null!==un){for(t=0;t<un.length;t++)if(null!==(r=(n=un[t]).interleaved)){n.interleaved=null;var s=r.next,i=n.pending;if(null!==i){var a=i.next;i.next=s,r.next=a}n.pending=r}un=null}return e}function Pa(e,t){for(;;){var n=Xi;try{if(sn(),br.current=ps,Mr){for(var r=Nr.memoizedState;null!==r;){var s=r.queue;null!==s&&(s.pending=null),r=r.next}Mr=!1}if(jr=0,Sr=_r=Nr=null,Cr=!1,Er=0,Wi.current=null,null===n||null===n.return){Ji=1,Qi=t,Xi=null;break}e:{var a=e,o=n.return,l=n,c=t;if(t=Ki,l.flags|=32768,null!==c&&"object"==typeof c&&"function"==typeof c.then){var d=c,u=l,h=u.tag;if(!(1&u.mode||0!==h&&11!==h&&15!==h)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=Ms(o);if(null!==m){m.flags&=-257,Cs(m,o,l,0,t),1&m.mode&&Ss(a,d,t),c=d;var f=(t=m).updateQueue;if(null===f){var g=new Set;g.add(c),t.updateQueue=g}else f.add(c);break e}if(!(1&t)){Ss(a,d,t),Ra();break e}c=Error(i(426))}else if(Wn&&1&l.mode){var x=Ms(o);if(null!==x){!(65536&x.flags)&&(x.flags|=256),Cs(x,o,l,0,t),er(c);break e}}a=c,4!==Ji&&(Ji=2),null===ra?ra=[a]:ra.push(a),c=xs(c,l),l=o;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t,yn(l,Ns(0,c,t));break e;case 1:a=c;var v=l.type,y=l.stateNode;if(!(128&l.flags||"function"!=typeof v.getDerivedStateFromError&&(null===y||"function"!=typeof y.componentDidCatch||null!==ua&&ua.has(y)))){l.flags|=65536,t&=-t,l.lanes|=t,yn(l,_s(l,a,t));break e}}l=l.return}while(null!==l)}za(n)}catch(b){t=b,Xi===n&&null!==n&&(Xi=n=n.return);continue}break}}function Oa(){var e=Hi.current;return Hi.current=ps,null===e?ps:e}function Ra(){0!==Ji&&3!==Ji&&2!==Ji||(Ji=4),null===qi||!(268435455&ea)&&!(268435455&ta)||Ca(qi,Ki)}function Ia(e,t){var n=Gi;Gi|=2;var r=Oa();for(qi===e&&Ki===t||Ta(e,t);;)try{Da();break}catch(s){Pa(e,s)}if(sn(),Gi=n,Hi.current=r,null!==Xi)throw Error(i(261));return qi=null,Ki=0,Ji}function Da(){for(;null!==Xi;)Fa(Xi)}function La(){for(;null!==Xi&&!It();)Fa(Xi)}function Fa(e){var t=la(e.alternate,e,Yi);e.memoizedProps=e.pendingProps,null===t?za(e):Xi=t,Wi.current=null}function za(e){var t=e;do{var n=t.alternate;if(e=t.return,32768&t.flags){if(null!==(n=si(n,t)))return n.flags&=32767,void(Xi=n);if(null===e)return Ji=6,void(Xi=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}else if(null!==(n=Os(n,t,Yi)))return void(Xi=n);if(null!==(t=t.sibling))return void(Xi=t);Xi=t=e}while(null!==t);0===Ji&&(Ji=5)}function Ba(e,t){var n=Tt,r=$i.transition;try{$i.transition=null,Tt=1,function(e,t,n){do{Ua()}while(null!==pa);if(6&Gi)throw Error(i(327));var r=e.finishedWork,s=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var a=r.lanes|r.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-yt(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}(e,a),e===qi&&(Xi=qi=null,Ki=0),!(2064&r.subtreeFlags)&&!(2064&r.flags)||ha||(ha=!0,Xa(Bt,function(){return Ua(),null})),a=!!(15990&r.flags),15990&r.subtreeFlags||a){a=$i.transition,$i.transition=null;var o=Tt;Tt=1;var l=Gi;Gi|=4,Wi.current=null,function(e,t){for(I(e.containerInfo),li=t;null!==li;)if(t=(e=li).child,1028&e.subtreeFlags&&null!==t)t.return=e,li=t;else for(;null!==li;){e=li;try{var n=e.alternate;if(1024&e.flags)switch(e.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==n){var r=n.memoizedProps,s=n.memoizedState,a=e.stateNode,o=a.getSnapshotBeforeUpdate(e.elementType===e.type?r:Qt(e.type,r),s);a.__reactInternalSnapshotBeforeUpdate=o}break;case 3:q&&_e(e.stateNode.containerInfo);break;default:throw Error(i(163))}}catch(l){Ha(e,e.return,l)}if(null!==(t=e.sibling)){t.return=e.return,li=t;break}li=e.return}n=ui,ui=!1}(e,r),function(e,t){for(li=t;null!==li;){var n=(t=li).deletions;if(null!==n)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e;q?Ni(i,s,t):gi(i,s,t);var a=s.alternate;null!==a&&(a.return=null),s.return=null}catch(w){Ha(s,t,w)}}if(n=t.child,12854&t.subtreeFlags&&null!==n)n.return=t,li=n;else for(;null!==li;){t=li;try{var o=t.flags;if(32&o&&q&&ye(t.stateNode),512&o){var l=t.alternate;if(null!==l){var c=l.ref;null!==c&&("function"==typeof c?c(null):c.current=null)}}if(8192&o)switch(t.tag){case 13:if(null!==t.memoizedState){var d=t.alternate;null!==d&&null!==d.memoizedState||(ia=Lt())}break;case 22:var u=null!==t.memoizedState,h=t.alternate,p=null!==h&&null!==h.memoizedState;if(n=t,q)e:if(r=n,s=u,i=null,q)for(var m=r;;){if(5===m.tag){if(null===i){i=m;var f=m.stateNode;s?be(f):je(m.stateNode,m.memoizedProps)}}else if(6===m.tag){if(null===i){var g=m.stateNode;s?we(g):Ne(g,m.memoizedProps)}}else if((22!==m.tag&&23!==m.tag||null===m.memoizedState||m===r)&&null!==m.child){m.child.return=m,m=m.child;continue}if(m===r)break;for(;null===m.sibling;){if(null===m.return||m.return===r)break e;i===m&&(i=null),m=m.return}i===m&&(i=null),m.sibling.return=m.return,m=m.sibling}if(u&&!p&&1&n.mode){li=n;for(var x=n.child;null!==x;){for(n=li=x;null!==li;){var v=(r=li).child;switch(r.tag){case 0:case 11:case 14:case 15:hi(4,r,r.return);break;case 1:ci(r,r.return);var y=r.stateNode;if("function"==typeof y.componentWillUnmount){var b=r.return;try{y.props=r.memoizedProps,y.state=r.memoizedState,y.componentWillUnmount()}catch(w){Ha(r,b,w)}}break;case 5:ci(r,r.return);break;case 22:if(null!==r.memoizedState){ki(n);continue}}null!==v?(v.return=r,li=v):ki(n)}x=x.sibling}}}switch(4102&o){case 2:bi(t),t.flags&=-3;break;case 6:bi(t),t.flags&=-3,_i(t.alternate,t);break;case 4096:t.flags&=-4097;break;case 4100:t.flags&=-4097,_i(t.alternate,t);break;case 4:_i(t.alternate,t)}}catch(w){Ha(t,t.return,w)}if(null!==(n=t.sibling)){n.return=t.return,li=n;break}li=t.return}}}(e,r),D(e.containerInfo),e.current=r,Mi(r),Dt(),Gi=l,Tt=o,$i.transition=a}else e.current=r;if(ha&&(ha=!1,pa=e,ma=s),0===(a=e.pendingLanes)&&(ua=null),function(e){if(Ht&&"function"==typeof Ht.onCommitFiberRoot)try{Ht.onCommitFiberRoot(Vt,e,void 0,!(128&~e.current.flags))}catch(t){}}(r.stateNode),Na(e,Lt()),null!==t)for(n=e.onRecoverableError,r=0;r<t.length;r++)n(t[r]);if(ca)throw ca=!1,e=da,da=null,e;!!(1&ma)&&0!==e.tag&&Ua(),1&(a=e.pendingLanes)?e===ga?fa++:(fa=0,ga=e):fa=0,Kt()}(e,t,n)}finally{$i.transition=r,Tt=n}return null}function Ua(){if(null!==pa){var e=Pt(ma),t=$i.transition,n=Tt;try{if($i.transition=null,Tt=16>e?16:e,null===pa)var r=!1;else{if(e=pa,pa=null,ma=0,6&Gi)throw Error(i(331));var s=Gi;for(Gi|=4,li=e.current;null!==li;){var a=li,o=a.child;if(16&li.flags){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var d=l[c];for(li=d;null!==li;){var u=li;switch(u.tag){case 0:case 11:case 15:hi(8,u,a)}var h=u.child;if(null!==h)h.return=u,li=h;else for(;null!==li;){var p=(u=li).sibling,m=u.return;if(xi(u),u===d){li=null;break}if(null!==p){p.return=m,li=p;break}li=m}}}var f=a.alternate;if(null!==f){var g=f.child;if(null!==g){f.child=null;do{var x=g.sibling;g.sibling=null,g=x}while(null!==g)}}li=a}}if(2064&a.subtreeFlags&&null!==o)o.return=a,li=o;else e:for(;null!==li;){if(2048&(a=li).flags)switch(a.tag){case 0:case 11:case 15:hi(9,a,a.return)}var v=a.sibling;if(null!==v){v.return=a.return,li=v;break e}li=a.return}}var y=e.current;for(li=y;null!==li;){var b=(o=li).child;if(2064&o.subtreeFlags&&null!==b)b.return=o,li=b;else e:for(o=y;null!==li;){if(2048&(l=li).flags)try{switch(l.tag){case 0:case 11:case 15:pi(9,l)}}catch(j){Ha(l,l.return,j)}if(l===o){li=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,li=w;break e}li=l.return}}if(Gi=s,Kt(),Ht&&"function"==typeof Ht.onPostCommitFiberRoot)try{Ht.onPostCommitFiberRoot(Vt,e)}catch(j){}r=!0}return r}finally{Tt=n,$i.transition=t}}return!1}function Va(e,t,n){xn(e,t=Ns(0,t=xs(n,t),1)),t=ya(),null!==(e=ja(e,1))&&(kt(e,1,t),Na(e,t))}function Ha(e,t,n){if(3===e.tag)Va(e,e,n);else for(;null!==t;){if(3===t.tag){Va(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===ua||!ua.has(r))){xn(t,e=_s(t,e=xs(n,e),1)),e=ya(),null!==(t=ja(t,1))&&(kt(t,1,e),Na(t,e));break}}t=t.return}}function Wa(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ya(),e.pingedLanes|=e.suspendedLanes&n,qi===e&&(Ki&n)===n&&(4===Ji||3===Ji&&(130023424&Ki)===Ki&&500>Lt()-ia?Ta(e,0):na|=n),Na(e,t)}function $a(e,t){0===t&&(1&e.mode?(t=Nt,!(130023424&(Nt<<=1))&&(Nt=4194304)):t=1);var n=ya();null!==(e=ja(e,t))&&(kt(e,t,n),Na(e,n))}function Ga(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),$a(e,n)}function qa(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;null!==s&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(i(314))}null!==r&&r.delete(t),$a(e,n)}function Xa(e,t){return Ot(e,t)}function Ka(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ya(e,t,n,r){return new Ka(e,t,n,r)}function Za(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ja(e,t){var n=e.alternate;return null===n?((n=Ya(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Qa(e,t,n,r,s,a){var o=2;if(r=e,"function"==typeof e)Za(e)&&(o=1);else if("string"==typeof e)o=5;else e:switch(e){case c:return eo(n.children,s,a,t);case d:o=8,s|=8;break;case u:return(e=Ya(12,n,t,2|s)).elementType=u,e.lanes=a,e;case f:return(e=Ya(13,n,t,s)).elementType=f,e.lanes=a,e;case g:return(e=Ya(19,n,t,s)).elementType=g,e.lanes=a,e;case y:return to(n,s,a,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case h:o=10;break e;case p:o=9;break e;case m:o=11;break e;case x:o=14;break e;case v:o=16,r=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=Ya(o,n,t,s)).elementType=e,t.type=r,t.lanes=a,t}function eo(e,t,n,r){return(e=Ya(7,e,r,t)).lanes=n,e}function to(e,t,n,r){return(e=Ya(22,e,r,t)).elementType=y,e.lanes=n,e.stateNode={},e}function no(e,t,n){return(e=Ya(6,e,null,t)).lanes=n,e}function ro(e,t,n){return(t=Ya(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function so(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=$,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Et(0),this.expirationTimes=Et(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Et(0),this.identifierPrefix=r,this.onRecoverableError=s,K&&(this.mutableSourceEagerHydrationData=null)}function io(e,t,n,r,s,i,a,o,l){return e=new so(e,t,n,o,l),1===t?(t=1,!0===i&&(t|=8)):t=0,i=Ya(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null},mn(i),e}function ao(e){if(!e)return lt;e:{if(_(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(pt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var n=e.type;if(pt(n))return gt(e,n,t)}return t}function oo(e){var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return null===(e=C(t))?null:e.stateNode}function lo(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function co(e,t){lo(e,t),(e=e.alternate)&&lo(e,t)}function uo(e){return null===(e=C(e))?null:e.stateNode}function ho(){return null}return la=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||dt.current)Is=!0;else{if(0===(e.lanes&n)&&!(128&t.flags))return Is=!1,function(e,t,n){switch(t.tag){case 3:$s(t),Qn();break;case 5:mr(t);break;case 1:pt(t.type)&&xt(t);break;case 4:hr(t,t.stateNode.containerInfo);break;case 10:an(0,t.type._context,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(ot(gr,1&gr.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ks(e,t,n):(ot(gr,1&gr.current),null!==(e=ri(e,t,n))?e.sibling:null);ot(gr,1&gr.current);break;case 19:if(r=0!==(n&t.childLanes),128&e.flags){if(r)return ni(e,t,n);t.flags|=128}var s=t.memoizedState;if(null!==s&&(s.rendering=null,s.tail=null,s.lastEffect=null),ot(gr,gr.current),r)break;return null;case 22:case 23:return t.lanes=0,Bs(e,t,n)}return ri(e,t,n)}(e,t,n);Is=!!(131072&e.flags)}else Is=!1,Wn&&1048576&t.flags&&zn(t,Pn,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps;var s=ht(t,ct.current);cn(t,n),s=Pr(null,t,r,e,s,n);var a=Or();return t.flags|=1,"object"==typeof s&&null!==s&&"function"==typeof s.render&&void 0===s.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,pt(r)?(a=!0,xt(t)):a=!1,t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,mn(t),s.updater=_n,t.stateNode=s,s._reactInternals=t,En(t,r,e,n),t=Ws(null,t,r,!0,a,n)):(t.tag=0,Wn&&a&&Bn(t),Ds(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,r=(s=r._init)(r._payload),t.type=r,s=t.tag=function(e){if("function"==typeof e)return Za(e)?1:0;if(null!=e){if((e=e.$$typeof)===m)return 11;if(e===x)return 14}return 2}(r),e=Qt(r,e),s){case 0:t=Vs(null,t,r,e,n);break e;case 1:t=Hs(null,t,r,e,n);break e;case 11:t=Ls(null,t,r,e,n);break e;case 14:t=Fs(null,t,r,Qt(r.type,e),n);break e}throw Error(i(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,Vs(e,t,r,s=t.elementType===r?s:Qt(r,s),n);case 1:return r=t.type,s=t.pendingProps,Hs(e,t,r,s=t.elementType===r?s:Qt(r,s),n);case 3:e:{if($s(t),null===e)throw Error(i(387));r=t.pendingProps,s=(a=t.memoizedState).element,fn(e,t),bn(t,r,null,n);var o=t.memoizedState;if(r=o.element,K&&a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:o.cache,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Gs(e,t,r,n,s=Error(i(423)));break e}if(r!==s){t=Gs(e,t,r,n,s=Error(i(424)));break e}for(K&&(Hn=Be(t.stateNode.containerInfo),Vn=t,Wn=!0,Gn=null,$n=!1),n=ar(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(Qn(),r===s){t=ri(e,t,n);break e}Ds(e,t,r,n)}t=t.child}return t;case 5:return mr(t),null===e&&Yn(t),r=t.type,s=t.pendingProps,a=null!==e?e.memoizedProps:null,o=s.children,U(r,s)?o=null:null!==a&&U(r,a)&&(t.flags|=32),Us(e,t),Ds(e,t,o,n),t.child;case 6:return null===e&&Yn(t),null;case 13:return Ks(e,t,n);case 4:return hr(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ir(t,null,r,n):Ds(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,Ls(e,t,r,s=t.elementType===r?s:Qt(r,s),n);case 7:return Ds(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ds(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,a=t.memoizedProps,an(0,r,o=s.value),null!==a)if(Wt(a.value,o)){if(a.children===s.children&&!dt.current){t=ri(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=gn(-1,n&-n)).tag=2;var d=a.updateQueue;if(null!==d){var u=(d=d.shared).pending;null===u?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),ln(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)o=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(i(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),ln(o,n,t),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===t){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}Ds(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,cn(t,n),r=r(s=dn(s)),t.flags|=1,Ds(e,t,r,n),t.child;case 14:return s=Qt(r=t.type,t.pendingProps),Fs(e,t,r,s=Qt(r.type,s),n);case 15:return zs(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Qt(r,s),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,pt(r)?(e=!0,xt(t)):e=!1,cn(t,n),Mn(t,r,s),En(t,r,s,n),Ws(null,t,r,!0,e,n);case 19:return ni(e,t,n);case 22:return Bs(e,t,n)}throw Error(i(156,t.tag))},t.attemptContinuousHydration=function(e){13===e.tag&&(wa(e,134217728,ya()),co(e,134217728))},t.attemptHydrationAtCurrentPriority=function(e){if(13===e.tag){var t=ya(),n=ba(e);wa(e,n,t),co(e,n)}},t.attemptSynchronousHydration=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=_t(t.pendingLanes);0!==n&&(At(t,1|n),Na(t,Lt()),!(6&Gi)&&(oa(),Kt()))}break;case 13:var r=ya();ka(function(){return wa(e,1,r)}),co(e,1)}},t.batchedUpdates=function(e,t){var n=Gi;Gi|=1;try{return e(t)}finally{0===(Gi=n)&&(oa(),Gt&&Kt())}},t.createComponentSelector=function(e){return{$$typeof:Ti,value:e}},t.createContainer=function(e,t,n,r,s,i,a){return io(e,t,!1,null,0,r,0,i,a)},t.createHasPseudoClassSelector=function(e){return{$$typeof:Pi,value:e}},t.createHydrationContainer=function(e,t,n,r,s,i,a,o,l){return(e=io(n,r,!0,e,0,i,0,o,l)).context=ao(null),n=e.current,(i=gn(r=ya(),s=ba(n))).callback=null!=t?t:null,xn(n,i),e.current.lanes=s,kt(e,s,r),Na(e,r),e},t.createPortal=function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:l,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}},t.createRoleSelector=function(e){return{$$typeof:Oi,value:e}},t.createTestNameSelector=function(e){return{$$typeof:Ri,value:e}},t.createTextSelector=function(e){return{$$typeof:Ii,value:e}},t.deferredUpdates=function(e){var t=Tt,n=$i.transition;try{return $i.transition=null,Tt=16,e()}finally{Tt=t,$i.transition=n}},t.discreteUpdates=function(e,t,n,r,s){var i=Tt,a=$i.transition;try{return $i.transition=null,Tt=1,e(t,n,r,s)}finally{Tt=i,$i.transition=a,0===Gi&&oa()}},t.findAllNodes=Ui,t.findBoundingRects=function(e,t){if(!ne)throw Error(i(363));t=Ui(e,t),e=[];for(var n=0;n<t.length;n++)e.push(se(t[n]));for(t=e.length-1;0<t;t--)for(var r=(n=e[t]).x,s=r+n.width,a=n.y,o=a+n.height,l=t-1;0<=l;l--)if(t!==l){var c=e[l],d=c.x,u=d+c.width,h=c.y,p=h+c.height;if(r>=d&&a>=h&&s<=u&&o<=p){e.splice(t,1);break}if(!(r!==d||n.width!==c.width||p<a||h>o)){h>a&&(c.height+=h-a,c.y=a),p<o&&(c.height=o-h),e.splice(t,1);break}if(!(a!==h||n.height!==c.height||u<r||d>s)){d>r&&(c.width+=d-r,c.x=r),u<s&&(c.width=s-d),e.splice(t,1);break}}return e},t.findHostInstance=oo,t.findHostInstanceWithNoPortals=function(e){return null===(e=null!==(e=M(e))?k(e):null)?null:e.stateNode},t.findHostInstanceWithWarning=function(e){return oo(e)},t.flushControlled=function(e){var t=Gi;Gi|=1;var n=$i.transition,r=Tt;try{$i.transition=null,Tt=1,e()}finally{Tt=r,$i.transition=n,0===(Gi=t)&&(oa(),Kt())}},t.flushPassiveEffects=Ua,t.flushSync=ka,t.focusWithin=function(e,t){if(!ne)throw Error(i(363));for(t=Bi(e=Li(e),t),t=Array.from(t),e=0;e<t.length;){var n=t[e++];if(!ae(n)){if(5===n.tag&&le(n.stateNode))return!0;for(n=n.child;null!==n;)t.push(n),n=n.sibling}}return!1},t.getCurrentUpdatePriority=function(){return Tt},t.getFindAllNodesFailureDescription=function(e,t){if(!ne)throw Error(i(363));var n=0,r=[];e=[Li(e),0];for(var s=0;s<e.length;){var a=e[s++],o=e[s++],l=t[o];if((5!==a.tag||!ae(a))&&(Fi(a,l)&&(r.push(zi(l)),++o>n&&(n=o)),o<t.length))for(a=a.child;null!==a;)e.push(a,o),a=a.sibling}if(n<t.length){for(e=[];n<t.length;n++)e.push(zi(t[n]));return"findAllNodes was able to match part of the selector:\n  "+r.join(" > ")+"\n\nNo matching component was found for:\n  "+e.join(" > ")}return null},t.getPublicRootInstance=function(e){return(e=e.current).child?5===e.child.tag?P(e.child.stateNode):e.child.stateNode:null},t.injectIntoDevTools=function(e){if(e={bundleType:e.bundleType,version:e.version,rendererPackageName:e.rendererPackageName,rendererConfig:e.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:uo,findFiberByHostInstance:e.findFiberByHostInstance||ho,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},"undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)e=!1;else{var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)e=!0;else{try{Vt=t.inject(e),Ht=t}catch(WDe){}e=!!t.checkDCE}}return e},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(e,t,n,r){if(!ne)throw Error(i(363));e=Ui(e,t);var s=ce(e,n,r).disconnect;return{disconnect:function(){s()}}},t.registerMutableSourceForHydration=function(e,t){var n=t._getVersion;n=n(t._source),null==e.mutableSourceEagerHydrationData?e.mutableSourceEagerHydrationData=[t,n]:e.mutableSourceEagerHydrationData.push(t,n)},t.runWithPriority=function(e,t){var n=Tt;try{return Tt=e,t()}finally{Tt=n}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(e,t,n,r){var s=t.current,i=ya(),a=ba(s);return n=ao(n),null===t.context?t.context=n:t.pendingContext=n,(t=gn(i,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),xn(s,t),null!==(e=wa(s,a,i))&&vn(e,s,a),a},t};const xK=mn(pK.exports);var vK={exports:{}},yK={};
/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
!function(e){function t(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function n(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var o=2*(r+1)-1,l=e[o],c=o+1,d=e[c];if(0>s(l,n))c<i&&0>s(d,l)?(e[r]=d,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<i&&0>s(d,n)))break e;e[r]=d,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var i=performance;e.unstable_now=function(){return i.now()}}else{var a=Date,o=a.now();e.unstable_now=function(){return a.now()-o}}var l=[],c=[],d=1,u=null,h=3,p=!1,m=!1,f=!1,g="function"==typeof setTimeout?setTimeout:null,x="function"==typeof clearTimeout?clearTimeout:null,v="undefined"!=typeof setImmediate?setImmediate:null;function y(e){for(var s=n(c);null!==s;){if(null===s.callback)r(c);else{if(!(s.startTime<=e))break;r(c),s.sortIndex=s.expirationTime,t(l,s)}s=n(c)}}function b(e){if(f=!1,y(e),!m)if(null!==n(l))m=!0,P(w);else{var t=n(c);null!==t&&O(b,t.startTime-e)}}function w(t,s){m=!1,f&&(f=!1,x(S),S=-1),p=!0;var i=h;try{for(y(s),u=n(l);null!==u&&(!(u.expirationTime>s)||t&&!E());){var a=u.callback;if("function"==typeof a){u.callback=null,h=u.priorityLevel;var o=a(u.expirationTime<=s);s=e.unstable_now(),"function"==typeof o?u.callback=o:u===n(l)&&r(l),y(s)}else r(l);u=n(l)}if(null!==u)var d=!0;else{var g=n(c);null!==g&&O(b,g.startTime-s),d=!1}return d}finally{u=null,h=i,p=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var j,N=!1,_=null,S=-1,M=5,C=-1;function E(){return!(e.unstable_now()-C<M)}function k(){if(null!==_){var t=e.unstable_now();C=t;var n=!0;try{n=_(!0,t)}finally{n?j():(N=!1,_=null)}}else N=!1}if("function"==typeof v)j=function(){v(k)};else if("undefined"!=typeof MessageChannel){var A=new MessageChannel,T=A.port2;A.port1.onmessage=k,j=function(){T.postMessage(null)}}else j=function(){g(k,0)};function P(e){_=e,N||(N=!0,j())}function O(t,n){S=g(function(){t(e.unstable_now())},n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_continueExecution=function(){m||p||(m=!0,P(w))},e.unstable_forceFrameRate=function(e){0>e||125<e||(M=0<e?Math.floor(1e3/e):5)},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},e.unstable_scheduleCallback=function(r,s,i){var a=e.unstable_now();switch("object"==typeof i&&null!==i?i="number"==typeof(i=i.delay)&&0<i?a+i:a:i=a,r){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return r={id:d++,callback:s,priorityLevel:r,startTime:i,expirationTime:o=i+o,sortIndex:-1},i>a?(r.sortIndex=i,t(c,r),null===n(l)&&r===n(c)&&(f?(x(S),S=-1):f=!0,O(b,i-a))):(r.sortIndex=o,t(l,r),m||p||(m=!0,P(w))),r},e.unstable_shouldYield=E,e.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}}(yK),vK.exports=yK;var bK=vK.exports;const wK={};var jK,NK;const _K=e=>"colorSpace"in e||"outputColorSpace"in e,SK=()=>{var e;return null!=(e=wK.ColorManagement)?e:null},MK=e=>e&&e.isOrthographicCamera,CK="undefined"!=typeof window&&(null!=(jK=window.document)&&jK.createElement||"ReactNative"===(null==(NK=window.navigator)?void 0:NK.product))?hn.useLayoutEffect:hn.useEffect;function EK(e){const t=hn.useRef(e);return CK(()=>{t.current=e},[e]),t}function kK({set:e}){return CK(()=>(e(new Promise(()=>null)),()=>e(!1)),[e]),null}class AK extends hn.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}AK.getDerivedStateFromError=()=>({error:!0});const TK="__default",PK=new Map,OK=e=>e&&!!e.memoized&&!!e.changes;function RK(e){var t;const n="undefined"!=typeof window?null!=(t=window.devicePixelRatio)?t:2:1;return Array.isArray(e)?Math.min(Math.max(e[0],n),e[1]):e}const IK=e=>{var t;return null==(t=e.__r3f)?void 0:t.root.getState()};function DK(e){let t=e.__r3f.root;for(;t.getState().previousRoot;)t=t.getState().previousRoot;return t}const LK={obj:e=>e===Object(e)&&!LK.arr(e)&&"function"!=typeof e,fun:e=>"function"==typeof e,str:e=>"string"==typeof e,num:e=>"number"==typeof e,boo:e=>"boolean"==typeof e,und:e=>void 0===e,arr:e=>Array.isArray(e),equ(e,t,{arrays:n="shallow",objects:r="reference",strict:s=!0}={}){if(typeof e!=typeof t||!!e!=!!t)return!1;if(LK.str(e)||LK.num(e)||LK.boo(e))return e===t;const i=LK.obj(e);if(i&&"reference"===r)return e===t;const a=LK.arr(e);if(a&&"reference"===n)return e===t;if((a||i)&&e===t)return!0;let o;for(o in e)if(!(o in t))return!1;if(i&&"shallow"===n&&"shallow"===r){for(o in s?t:e)if(!LK.equ(e[o],t[o],{strict:s,objects:"reference"}))return!1}else for(o in s?t:e)if(e[o]!==t[o])return!1;if(LK.und(o)){if(a&&0===e.length&&0===t.length)return!0;if(i&&0===Object.keys(e).length&&0===Object.keys(t).length)return!0;if(e!==t)return!1}return!0}};function FK(e,t){return e.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...t},e}function zK(e,t){let n=e;if(t.includes("-")){const r=t.split("-"),s=r.pop();return n=r.reduce((e,t)=>e[t],e),{target:n,key:s}}return{target:n,key:t}}const BK=/-\d+$/;function UK(e,t,n){if(LK.str(n)){if(BK.test(n)){const t=n.replace(BK,""),{target:r,key:s}=zK(e,t);Array.isArray(r[s])||(r[s]=[])}const{target:r,key:s}=zK(e,n);t.__r3f.previousAttach=r[s],r[s]=t}else t.__r3f.previousAttach=n(e,t)}function VK(e,t,n){var r,s;if(LK.str(n)){const{target:r,key:s}=zK(e,n),i=t.__r3f.previousAttach;void 0===i?delete r[s]:r[s]=i}else null==(r=t.__r3f)||null==r.previousAttach||r.previousAttach(e,t);null==(s=t.__r3f)||delete s.previousAttach}function HK(e,{children:t,key:n,ref:r,...s},{children:i,key:a,ref:o,...l}={},c=!1){const d=e.__r3f,u=Object.entries(s),h=[];if(c){const e=Object.keys(l);for(let t=0;t<e.length;t++)s.hasOwnProperty(e[t])||u.unshift([e[t],TK+"remove"])}u.forEach(([t,n])=>{var r;if(null!=(r=e.__r3f)&&r.primitive&&"object"===t)return;if(LK.equ(n,l[t]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(t))return h.push([t,n,!0,[]]);let i=[];t.includes("-")&&(i=t.split("-")),h.push([t,n,!1,i]);for(const e in s){const n=s[e];e.startsWith(`${t}-`)&&h.push([e,n,!1,e.split("-")])}});const p={...s};return null!=d&&d.memoizedProps&&null!=d&&d.memoizedProps.args&&(p.args=d.memoizedProps.args),null!=d&&d.memoizedProps&&null!=d&&d.memoizedProps.attach&&(p.attach=d.memoizedProps.attach),{memoized:p,changes:h}}function WK(e,t){var n;const r=e.__r3f,s=null==r?void 0:r.root,i=null==s||null==s.getState?void 0:s.getState(),{memoized:a,changes:o}=OK(t)?t:HK(e,t),l=null==r?void 0:r.eventCount;e.__r3f&&(e.__r3f.memoizedProps=a);for(let u=0;u<o.length;u++){let[t,n,s,a]=o[u];if(_K(e)){const e=3001,r="srgb",s="srgb-linear";"encoding"===t?(t="colorSpace",n=n===e?r:s):"outputEncoding"===t&&(t="outputColorSpace",n=n===e?r:s)}let l=e,h=l[t];if(a.length&&(h=a.reduce((e,t)=>e[t],e),!h||!h.set)){const[n,...r]=a.reverse();l=r.reverse().reduce((e,t)=>e[t],e),t=n}if(n===TK+"remove")if(l.constructor){let e=PK.get(l.constructor);e||(e=new l.constructor,PK.set(l.constructor,e)),n=e[t]}else n=0;if(s&&r)n?r.handlers[t]=n:delete r.handlers[t],r.eventCount=Object.keys(r.handlers).length;else if(h&&h.set&&(h.copy||h instanceof lf)){if(Array.isArray(n))h.fromArray?h.fromArray(n):h.set(...n);else if(h.copy&&n&&n.constructor&&h.constructor===n.constructor)h.copy(n);else if(void 0!==n){var c;const e=null==(c=h)?void 0:c.isColor;!e&&h.setScalar?h.setScalar(n):h instanceof lf&&n instanceof lf?h.mask=n.mask:h.set(n),!SK()&&i&&!i.linear&&e&&h.convertSRGBToLinear()}}else{var d;if(l[t]=n,null!=(d=l[t])&&d.isTexture&&l[t].format===bh&&l[t].type===ih&&i){const e=l[t];_K(e)&&_K(i.gl)?e.colorSpace=i.gl.outputColorSpace:e.encoding=i.gl.outputEncoding}}$K(e)}if(r&&r.parent&&e.raycast&&l!==r.eventCount){const t=DK(e).getState().internal,n=t.interaction.indexOf(e);n>-1&&t.interaction.splice(n,1),r.eventCount&&t.interaction.push(e)}return!(1===o.length&&"onUpdate"===o[0][0])&&o.length&&null!=(n=e.__r3f)&&n.parent&&GK(e),e}function $K(e){var t,n;const r=null==(t=e.__r3f)||null==(n=t.root)||null==n.getState?void 0:n.getState();r&&0===r.internal.frames&&r.invalidate()}function GK(e){null==e.onUpdate||e.onUpdate(e)}function qK(e){return(e.eventObject||e.object).uuid+"/"+e.index+e.instanceId}function XK(e,t,n,r){const s=n.get(t);s&&(n.delete(t),0===n.size&&(e.delete(r),s.target.releasePointerCapture(r)))}function KK(e){function t(e){return e.filter(e=>["Move","Over","Enter","Out","Leave"].some(t=>{var n;return null==(n=e.__r3f)?void 0:n.handlers["onPointer"+t]}))}function n(t){const{internal:n}=e.getState();for(const e of n.hovered.values())if(!t.length||!t.find(t=>t.object===e.object&&t.index===e.index&&t.instanceId===e.instanceId)){const r=e.eventObject.__r3f,s=null==r?void 0:r.handlers;if(n.hovered.delete(qK(e)),null!=r&&r.eventCount){const n={...e,intersections:t};null==s.onPointerOut||s.onPointerOut(n),null==s.onPointerLeave||s.onPointerLeave(n)}}}function r(e,t){for(let n=0;n<t.length;n++){const r=t[n].__r3f;null==r||null==r.handlers.onPointerMissed||r.handlers.onPointerMissed(e)}}return{handlePointer:function(s){switch(s){case"onPointerLeave":case"onPointerCancel":return()=>n([]);case"onLostPointerCapture":return t=>{const{internal:r}=e.getState();"pointerId"in t&&r.capturedMap.has(t.pointerId)&&requestAnimationFrame(()=>{r.capturedMap.has(t.pointerId)&&(r.capturedMap.delete(t.pointerId),n([]))})}}return function(i){const{onPointerMissed:a,internal:o}=e.getState();o.lastEvent.current=i;const l="onPointerMove"===s,c="onClick"===s||"onContextMenu"===s||"onDoubleClick"===s,d=function(t,n){const r=e.getState(),s=new Set,i=[],a=n?n(r.internal.interaction):r.internal.interaction;for(let e=0;e<a.length;e++){const t=IK(a[e]);t&&(t.raycaster.camera=void 0)}r.previousRoot||null==r.events.compute||r.events.compute(t,r);let o=a.flatMap(function(e){const n=IK(e);return n&&n.events.enabled&&null!==n.raycaster.camera?(void 0===n.raycaster.camera&&(null==n.events.compute||n.events.compute(t,n,null==(r=n.previousRoot)?void 0:r.getState()),void 0===n.raycaster.camera&&(n.raycaster.camera=null)),n.raycaster.camera?n.raycaster.intersectObject(e,!0):[]):[];var r}).sort((e,t)=>{const n=IK(e.object),r=IK(t.object);return n&&r&&r.events.priority-n.events.priority||e.distance-t.distance}).filter(e=>{const t=qK(e);return!s.has(t)&&(s.add(t),!0)});r.events.filter&&(o=r.events.filter(o,r));for(const e of o){let t=e.object;for(;t;){var l;null!=(l=t.__r3f)&&l.eventCount&&i.push({...e,eventObject:t}),t=t.parent}}if("pointerId"in t&&r.internal.capturedMap.has(t.pointerId))for(let e of r.internal.capturedMap.get(t.pointerId).values())s.has(qK(e.intersection))||i.push(e.intersection);return i}(i,l?t:void 0),u=c?function(t){const{internal:n}=e.getState(),r=t.offsetX-n.initialClick[0],s=t.offsetY-n.initialClick[1];return Math.round(Math.sqrt(r*r+s*s))}(i):0;"onPointerDown"===s&&(o.initialClick=[i.offsetX,i.offsetY],o.initialHits=d.map(e=>e.eventObject)),c&&!d.length&&u<=2&&(r(i,o.interaction),a&&a(i)),l&&n(d),function(t,r,s,i){const a=e.getState();if(t.length){const e={stopped:!1};for(const o of t){const l=IK(o.object)||a,{raycaster:c,pointer:d,camera:u,internal:h}=l,p=new Gp(d.x,d.y,0).unproject(u),m=e=>{var t,n;return null!=(t=null==(n=h.capturedMap.get(e))?void 0:n.has(o.eventObject))&&t},f=e=>{const t={intersection:o,target:r.target};h.capturedMap.has(e)?h.capturedMap.get(e).set(o.eventObject,t):h.capturedMap.set(e,new Map([[o.eventObject,t]])),r.target.setPointerCapture(e)},g=e=>{const t=h.capturedMap.get(e);t&&XK(h.capturedMap,o.eventObject,t,e)};let x={};for(let e in r){let t=r[e];"function"!=typeof t&&(x[e]=t)}let v={...o,...x,pointer:d,intersections:t,stopped:e.stopped,delta:s,unprojectedPoint:p,ray:c.ray,camera:u,stopPropagation(){const s="pointerId"in r&&h.capturedMap.get(r.pointerId);(!s||s.has(o.eventObject))&&(v.stopped=e.stopped=!0,h.hovered.size&&Array.from(h.hovered.values()).find(e=>e.eventObject===o.eventObject))&&n([...t.slice(0,t.indexOf(o)),o])},target:{hasPointerCapture:m,setPointerCapture:f,releasePointerCapture:g},currentTarget:{hasPointerCapture:m,setPointerCapture:f,releasePointerCapture:g},nativeEvent:r};if(i(v),!0===e.stopped)break}}}(d,i,u,function(e){const t=e.eventObject,n=t.__r3f,a=null==n?void 0:n.handlers;if(null!=n&&n.eventCount)if(l){if(a.onPointerOver||a.onPointerEnter||a.onPointerOut||a.onPointerLeave){const t=qK(e),n=o.hovered.get(t);n?n.stopped&&e.stopPropagation():(o.hovered.set(t,e),null==a.onPointerOver||a.onPointerOver(e),null==a.onPointerEnter||a.onPointerEnter(e))}null==a.onPointerMove||a.onPointerMove(e)}else{const n=a[s];n?c&&!o.initialHits.includes(t)||(r(i,o.interaction.filter(e=>!o.initialHits.includes(e))),n(e)):c&&o.initialHits.includes(t)&&r(i,o.interaction.filter(e=>!o.initialHits.includes(e)))}})}}}}const YK=e=>!(null==e||!e.render),ZK=hn.createContext(null),JK=(e,t)=>{const n=function(e){const t="function"==typeof e?cK(e):e,n=(e=t.getState,n=Object.is)=>{const[,r]=hn.useReducer(e=>e+1,0),s=t.getState(),i=hn.useRef(s),a=hn.useRef(e),o=hn.useRef(n),l=hn.useRef(!1),c=hn.useRef();let d;void 0===c.current&&(c.current=e(s));let u=!1;(i.current!==s||a.current!==e||o.current!==n||l.current)&&(d=e(s),u=!n(c.current,d)),dK(()=>{u&&(c.current=d),i.current=s,a.current=e,o.current=n,l.current=!1});const h=hn.useRef(s);dK(()=>{const e=()=>{try{const e=t.getState(),n=a.current(e);o.current(c.current,n)||(i.current=e,c.current=n,r())}catch(e){l.current=!0,r()}},n=t.subscribe(e);return t.getState()!==h.current&&e(),n},[]);const p=u?d:c.current;return hn.useDebugValue(p),p};return Object.assign(n,t),n[Symbol.iterator]=function(){const e=[n,t];return{next(){const t=e.length<=0;return{value:e.shift(),done:t}}}},n}((n,r)=>{const s=new Gp,i=new Gp,a=new Gp;function o(e=r().camera,t=i,n=r().size){const{width:o,height:l,top:c,left:d}=n,u=o/l;t.isVector3?a.copy(t):a.set(...t);const h=e.getWorldPosition(s).distanceTo(a);if(MK(e))return{width:o/e.zoom,height:l/e.zoom,top:c,left:d,factor:1,distance:h,aspect:u};{const t=e.fov*Math.PI/180,n=2*Math.tan(t/2)*h,r=n*(o/l);return{width:r,height:n,top:c,left:d,factor:o/r,distance:h,aspect:u}}}let l;const c=e=>n(t=>({performance:{...t.performance,current:e}})),d=new Wp;return{set:n,get:r,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(t=1)=>e(r(),t),advance:(e,n)=>t(e,n,r()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new Pw,pointer:d,mouse:d,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const e=r();l&&clearTimeout(l),e.performance.current!==e.performance.min&&c(e.performance.min),l=setTimeout(()=>c(r().performance.max),e.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:o},setEvents:e=>n(t=>({...t,events:{...t.events,...e}})),setSize:(e,t,s,a,l)=>{const c=r().camera,d={width:e,height:t,top:a||0,left:l||0,updateStyle:s};n(e=>({size:d,viewport:{...e.viewport,...o(c,i,d)}}))},setDpr:e=>n(t=>{const n=RK(e);return{viewport:{...t.viewport,dpr:n,initialDpr:t.viewport.initialDpr||n}}}),setFrameloop:(e="always")=>{const t=r().clock;t.stop(),t.elapsedTime=0,"never"!==e&&(t.start(),t.elapsedTime=0),n(()=>({frameloop:e}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:hn.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(e,t,n)=>{const s=r().internal;return s.priority=s.priority+(t>0?1:0),s.subscribers.push({ref:e,priority:t,store:n}),s.subscribers=s.subscribers.sort((e,t)=>e.priority-t.priority),()=>{const n=r().internal;null!=n&&n.subscribers&&(n.priority=n.priority-(t>0?1:0),n.subscribers=n.subscribers.filter(t=>t.ref!==e))}}}}}),r=n.getState();let s=r.size,i=r.viewport.dpr,a=r.camera;return n.subscribe(()=>{const{camera:e,size:t,viewport:r,gl:o,set:l}=n.getState();if(t.width!==s.width||t.height!==s.height||r.dpr!==i){var c;s=t,i=r.dpr,function(e,t){e.manual||(MK(e)?(e.left=t.width/-2,e.right=t.width/2,e.top=t.height/2,e.bottom=t.height/-2):e.aspect=t.width/t.height,e.updateProjectionMatrix(),e.updateMatrixWorld())}(e,t),o.setPixelRatio(r.dpr);const n=null!=(c=t.updateStyle)?c:"undefined"!=typeof HTMLCanvasElement&&o.domElement instanceof HTMLCanvasElement;o.setSize(t.width,t.height,n)}e!==a&&(a=e,l(t=>({viewport:{...t.viewport,...t.viewport.getCurrentViewport(e)}})))}),n.subscribe(t=>e(t)),n};let QK,eY,tY,nY=new Set,rY=new Set,sY=new Set;function iY(e,t){if(e.size)for(const{callback:n}of e.values())n(t)}function aY(e,t){switch(e){case"before":return iY(nY,t);case"after":return iY(rY,t);case"tail":return iY(sY,t)}}function oY(e,t,n){let r=t.clock.getDelta();for("never"===t.frameloop&&"number"==typeof e&&(r=e-t.clock.elapsedTime,t.clock.oldTime=t.clock.elapsedTime,t.clock.elapsedTime=e),eY=t.internal.subscribers,QK=0;QK<eY.length;QK++)tY=eY[QK],tY.ref.current(tY.store.getState(),r,n);return!t.internal.priority&&t.gl.render&&t.gl.render(t.scene,t.camera),t.internal.frames=Math.max(0,t.internal.frames-1),"always"===t.frameloop?1:t.internal.frames}function lY(e,t=0){const n=function(){const e=hn.useContext(ZK);if(!e)throw new Error("R3F: Hooks can only be used within the Canvas component!");return e}(),r=n.getState().internal.subscribe,s=EK(e);return CK(()=>r(s,t,n),[t,r,n]),null}const cY=new Map,{invalidate:dY,advance:uY}=function(e){let t,n,r,s=!1,i=!1;function a(o){n=requestAnimationFrame(a),s=!0,t=0,aY("before",o),i=!0;for(const n of e.values()){var l;r=n.store.getState(),!r.internal.active||!("always"===r.frameloop||r.internal.frames>0)||null!=(l=r.gl.xr)&&l.isPresenting||(t+=oY(o,r))}if(i=!1,aY("after",o),0===t)return aY("tail",o),s=!1,cancelAnimationFrame(n)}return{loop:a,invalidate:function t(n,r=1){var o;if(!n)return e.forEach(e=>t(e.store.getState(),r));null!=(o=n.gl.xr)&&o.isPresenting||!n.internal.active||"never"===n.frameloop||(n.internal.frames=r>1?Math.min(60,n.internal.frames+r):i?2:1,s||(s=!0,requestAnimationFrame(a)))},advance:function(t,n=!0,r,s){if(n&&aY("before",t),r)oY(t,r,s);else for(const i of e.values())oY(t,i.store.getState());n&&aY("after",t)}}}(cY),{reconciler:hY,applyProps:pY}=function(e,t){function n(e,{args:t=[],attach:n,...r},s){let i,a=`${e[0].toUpperCase()}${e.slice(1)}`;if("primitive"===e){if(void 0===r.object)throw new Error("R3F: Primitives without 'object' are invalid!");i=FK(r.object,{type:e,root:s,attach:n,primitive:!0})}else{const r=wK[a];if(!r)throw new Error(`R3F: ${a} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(t))throw new Error("R3F: The args prop must be an array!");i=FK(new r(...t),{type:e,root:s,attach:n,memoizedProps:{args:t}})}return void 0===i.__r3f.attach&&(i.isBufferGeometry?i.__r3f.attach="geometry":i.isMaterial&&(i.__r3f.attach="material")),"inject"!==a&&WK(i,r),i}function r(e,t){let n=!1;var r,s;t&&(null!=(r=t.__r3f)&&r.attach?UK(e,t,t.__r3f.attach):t.isObject3D&&e.isObject3D&&(e.add(t),n=!0),n||null==(s=e.__r3f)||s.objects.push(t),t.__r3f||FK(t,{}),t.__r3f.parent=e,GK(t),$K(t))}function s(e,t,n){let r=!1;if(t){var s,i;if(null!=(s=t.__r3f)&&s.attach)UK(e,t,t.__r3f.attach);else if(t.isObject3D&&e.isObject3D){t.parent=e,t.dispatchEvent({type:"added"}),e.dispatchEvent({type:"childadded",child:t});const s=e.children.filter(e=>e!==t),i=s.indexOf(n);e.children=[...s.slice(0,i),t,...s.slice(i)],r=!0}r||null==(i=e.__r3f)||i.objects.push(t),t.__r3f||FK(t,{}),t.__r3f.parent=e,GK(t),$K(t)}}function i(e,t,n=!1){e&&[...e].forEach(e=>a(t,e,n))}function a(e,t,n){if(t){var r,s,a;if(t.__r3f&&(t.__r3f.parent=null),null!=(r=e.__r3f)&&r.objects&&(e.__r3f.objects=e.__r3f.objects.filter(e=>e!==t)),null!=(s=t.__r3f)&&s.attach)VK(e,t,t.__r3f.attach);else if(t.isObject3D&&e.isObject3D){var o;e.remove(t),null!=(o=t.__r3f)&&o.root&&function(e,t){const{internal:n}=e.getState();n.interaction=n.interaction.filter(e=>e!==t),n.initialHits=n.initialHits.filter(e=>e!==t),n.hovered.forEach((e,r)=>{e.eventObject!==t&&e.object!==t||n.hovered.delete(r)}),n.capturedMap.forEach((e,r)=>{XK(n.capturedMap,t,e,r)})}(DK(t),t)}const c=null==(a=t.__r3f)?void 0:a.primitive,d=!c&&(void 0===n?null!==t.dispose:n);var l;if(!c)i(null==(l=t.__r3f)?void 0:l.objects,t,d),i(t.children,t,d);if(delete t.__r3f,d&&t.dispose&&"Scene"!==t.type){const e=()=>{try{t.dispose()}catch(e){}};"undefined"==typeof IS_REACT_ACT_ENVIRONMENT?bK.unstable_scheduleCallback(bK.unstable_IdlePriority,e):e()}$K(e)}}const o=()=>{};return{reconciler:xK({createInstance:n,removeChild:a,appendChild:r,appendInitialChild:r,insertBefore:s,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(e,t)=>{if(!t)return;const n=e.getState().scene;n.__r3f&&(n.__r3f.root=e,r(n,t))},removeChildFromContainer:(e,t)=>{t&&a(e.getState().scene,t)},insertInContainerBefore:(e,t,n)=>{if(!t||!n)return;const r=e.getState().scene;r.__r3f&&s(r,t,n)},getRootHostContext:()=>null,getChildHostContext:e=>e,finalizeInitialChildren(e){var t;const n=null!=(t=null==e?void 0:e.__r3f)?t:{};return Boolean(n.handlers)},prepareUpdate(e,t,n,r){var s;if((null!=(s=null==e?void 0:e.__r3f)?s:{}).primitive&&r.object&&r.object!==e)return[!0];{const{args:t=[],children:s,...i}=r,{args:a=[],children:o,...l}=n;if(!Array.isArray(t))throw new Error("R3F: the args prop must be an array!");if(t.some((e,t)=>e!==a[t]))return[!0];const c=HK(e,i,l,!0);return c.changes.length?[!1,c]:null}},commitUpdate(e,[t,s],i,o,l,c){t?function(e,t,s,i){var o;const l=null==(o=e.__r3f)?void 0:o.parent;if(!l)return;const c=n(t,s,e.__r3f.root);if(e.children){for(const t of e.children)t.__r3f&&r(c,t);e.children=e.children.filter(e=>!e.__r3f)}e.__r3f.objects.forEach(e=>r(c,e)),e.__r3f.objects=[],e.__r3f.autoRemovedBeforeAppend||a(l,e),c.parent&&(c.__r3f.autoRemovedBeforeAppend=!0),r(l,c),c.raycast&&c.__r3f.eventCount&&DK(c).getState().internal.interaction.push(c);[i,i.alternate].forEach(e=>{null!==e&&(e.stateNode=c,e.ref&&("function"==typeof e.ref?e.ref(c):e.ref.current=c))})}(e,i,l,c):WK(e,s)},commitMount(e,t,n,r){var s;const i=null!=(s=e.__r3f)?s:{};e.raycast&&i.handlers&&i.eventCount&&DK(e).getState().internal.interaction.push(e)},getPublicInstance:e=>e,prepareForCommit:()=>null,preparePortalMount:e=>FK(e.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(e){var t;const{attach:n,parent:r}=null!=(t=e.__r3f)?t:{};n&&r&&VK(r,e,n),e.isObject3D&&(e.visible=!1),$K(e)},unhideInstance(e,t){var n;const{attach:r,parent:s}=null!=(n=e.__r3f)?n:{};r&&s&&UK(s,e,r),(e.isObject3D&&null==t.visible||t.visible)&&(e.visible=!0),$K(e)},createTextInstance:o,hideTextInstance:o,unhideTextInstance:o,getCurrentEventPriority:()=>t?t():lK.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:"undefined"!=typeof performance&&LK.fun(performance.now)?performance.now:LK.fun(Date.now)?Date.now:()=>0,scheduleTimeout:LK.fun(setTimeout)?setTimeout:void 0,cancelTimeout:LK.fun(clearTimeout)?clearTimeout:void 0}),applyProps:WK}}(0,function(){var e;const t="undefined"!=typeof self&&self||"undefined"!=typeof window&&window;if(!t)return lK.DefaultEventPriority;switch(null==(e=t.event)?void 0:e.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return lK.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return lK.ContinuousEventPriority;default:return lK.DefaultEventPriority}}),mY={objects:"shallow",strict:!1},fY=(e,t)=>{const n="function"==typeof e?e(t):e;return YK(n)?n:new gS({powerPreference:"high-performance",canvas:t,antialias:!0,alpha:!0,...e})};function gY(e){const t=cY.get(e),n=null==t?void 0:t.fiber,r=null==t?void 0:t.store,s="function"==typeof reportError?reportError:console.error,i=r||JK(dY,uY),a=n||hY.createContainer(i,lK.ConcurrentRoot,null,!1,null,"",s,null);let o;t||cY.set(e,{fiber:a,store:i});let l,c=!1;return{configure(t={}){let{gl:n,size:r,scene:s,events:a,onCreated:d,shadows:u=!1,linear:h=!1,flat:p=!1,legacy:m=!1,orthographic:f=!1,frameloop:g="always",dpr:x=[1,2],performance:v,raycaster:y,camera:b,onPointerMissed:w}=t,j=i.getState(),N=j.gl;j.gl||j.set({gl:N=fY(n,e)});let _=j.raycaster;_||j.set({raycaster:_=new nj});const{params:S,...M}=y||{};if(LK.equ(M,_,mY)||pY(_,{...M}),LK.equ(S,_.params,mY)||pY(_,{params:{..._.params,...S}}),!j.camera||j.camera===l&&!LK.equ(l,b,mY)){l=b;const e=b instanceof Pg,t=e?b:f?new uw(0,0,0,0,.1,1e3):new Dg(75,0,.1,1e3);e||(t.position.z=5,b&&(pY(t,b),("aspect"in b||"left"in b||"right"in b||"bottom"in b||"top"in b)&&(t.manual=!0,t.updateProjectionMatrix())),j.camera||null!=b&&b.rotation||t.lookAt(0,0,0)),j.set({camera:t}),_.camera=t}if(!j.scene){let e;null!=s&&s.isScene?e=s:(e=new Gg,s&&pY(e,s)),j.set({scene:FK(e)})}if(!j.xr){var C;const e=(e,t)=>{const n=i.getState();"never"!==n.frameloop&&uY(e,!0,n,t)},t=()=>{const t=i.getState();t.gl.xr.enabled=t.gl.xr.isPresenting,t.gl.xr.setAnimationLoop(t.gl.xr.isPresenting?e:null),t.gl.xr.isPresenting||dY(t)},n={connect(){const e=i.getState().gl;e.xr.addEventListener("sessionstart",t),e.xr.addEventListener("sessionend",t)},disconnect(){const e=i.getState().gl;e.xr.removeEventListener("sessionstart",t),e.xr.removeEventListener("sessionend",t)}};"function"==typeof(null==(C=N.xr)?void 0:C.addEventListener)&&n.connect(),j.set({xr:n})}if(N.shadowMap){const e=N.shadowMap.enabled,t=N.shadowMap.type;if(N.shadowMap.enabled=!!u,LK.boo(u))N.shadowMap.type=2;else if(LK.str(u)){var E;const e={basic:0,percentage:1,soft:2,variance:3};N.shadowMap.type=null!=(E=e[u])?E:2}else LK.obj(u)&&Object.assign(N.shadowMap,u);e===N.shadowMap.enabled&&t===N.shadowMap.type||(N.shadowMap.needsUpdate=!0)}const k=SK();if(k&&("enabled"in k?k.enabled=!m:"legacyMode"in k&&(k.legacyMode=m)),!c){pY(N,{outputEncoding:h?3e3:3001,toneMapping:p?0:4})}j.legacy!==m&&j.set(()=>({legacy:m})),j.linear!==h&&j.set(()=>({linear:h})),j.flat!==p&&j.set(()=>({flat:p})),!n||LK.fun(n)||YK(n)||LK.equ(n,N,mY)||pY(N,n),a&&!j.events.handlers&&j.set({events:a(i)});const A=function(e,t){const n="undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement;if(t){const{width:e,height:r,top:s,left:i,updateStyle:a=n}=t;return{width:e,height:r,top:s,left:i,updateStyle:a}}if("undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement&&e.parentElement){const{width:t,height:r,top:s,left:i}=e.parentElement.getBoundingClientRect();return{width:t,height:r,top:s,left:i,updateStyle:n}}return"undefined"!=typeof OffscreenCanvas&&e instanceof OffscreenCanvas?{width:e.width,height:e.height,top:0,left:0,updateStyle:n}:{width:0,height:0,top:0,left:0}}(e,r);return LK.equ(A,j.size,mY)||j.setSize(A.width,A.height,A.updateStyle,A.top,A.left),x&&j.viewport.dpr!==RK(x)&&j.setDpr(x),j.frameloop!==g&&j.setFrameloop(g),j.onPointerMissed||j.set({onPointerMissed:w}),v&&!LK.equ(v,j.performance,mY)&&j.set(e=>({performance:{...e.performance,...v}})),o=d,c=!0,this},render(t){return c||this.configure(),hY.updateContainer(Ot.jsx(xY,{store:i,children:t,onCreated:o,rootElement:e}),a,null,()=>{}),i},unmount(){vY(e)}}}function xY({store:e,children:t,onCreated:n,rootElement:r}){return CK(()=>{const t=e.getState();t.set(e=>({internal:{...e.internal,active:!0}})),n&&n(t),e.getState().events.connected||null==t.events.connect||t.events.connect(r)},[]),Ot.jsx(ZK.Provider,{value:e,children:t})}function vY(e,t){const n=cY.get(e),r=null==n?void 0:n.fiber;if(r){const t=null==n?void 0:n.store.getState();t&&(t.internal.active=!1),hY.updateContainer(null,r,null,()=>{t&&setTimeout(()=>{try{var n,r,s,i;null==t.events.disconnect||t.events.disconnect(),null==(n=t.gl)||null==(r=n.renderLists)||null==r.dispose||r.dispose(),null==(s=t.gl)||null==s.forceContextLoss||s.forceContextLoss(),null!=(i=t.gl)&&i.xr&&t.xr.disconnect(),function(e){e.dispose&&"Scene"!==e.type&&e.dispose();for(const t in e)null==t.dispose||t.dispose(),delete e[t]}(t),cY.delete(e)}catch(a){}},500)})}}hY.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:hn.version});const yY={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function bY(e){const{handlePointer:t}=KK(e);return{priority:1,enabled:!0,compute(e,t,n){t.pointer.set(e.offsetX/t.size.width*2-1,-e.offsetY/t.size.height*2+1),t.raycaster.setFromCamera(t.pointer,t.camera)},connected:void 0,handlers:Object.keys(yY).reduce((e,n)=>({...e,[n]:t(n)}),{}),update:()=>{var t;const{events:n,internal:r}=e.getState();null!=(t=r.lastEvent)&&t.current&&n.handlers&&n.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{var n;const{set:r,events:s}=e.getState();null==s.disconnect||s.disconnect(),r(e=>({events:{...e.events,connected:t}})),Object.entries(null!=(n=s.handlers)?n:[]).forEach(([e,n])=>{const[r,s]=yY[e];t.addEventListener(r,n,{passive:s})})},disconnect:()=>{const{set:t,events:n}=e.getState();var r;n.connected&&(Object.entries(null!=(r=n.handlers)?r:[]).forEach(([e,t])=>{if(n&&n.connected instanceof HTMLElement){const[r]=yY[e];n.connected.removeEventListener(r,t)}}),t(e=>({events:{...e.events,connected:void 0}})))}}}var wY=Object.defineProperty,jY=Object.defineProperties,NY=Object.getOwnPropertyDescriptors,_Y=Object.getOwnPropertySymbols,SY=Object.prototype.hasOwnProperty,MY=Object.prototype.propertyIsEnumerable,CY=(e,t,n)=>t in e?wY(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,EY=(e,t)=>{for(var n in t||(t={}))SY.call(t,n)&&CY(e,n,t[n]);if(_Y)for(var n of _Y(t))MY.call(t,n)&&CY(e,n,t[n]);return e};function kY(e,t,n){if(!e)return;if(!0===n(e))return e;let r=e.child;for(;r;){const e=kY(r,t,n);if(e)return e;r=r.sibling}}function AY(e){try{return Object.defineProperties(e,{_currentRenderer:{get:()=>null,set(){}},_currentRenderer2:{get:()=>null,set(){}}})}catch(t){return e}}const TY=console.error;console.error=function(){const e=[...arguments].join("");if(!(null==e?void 0:e.startsWith("Warning:"))||!e.includes("useContext"))return TY.apply(this,arguments);console.error=TY};const PY=AY(hn.createContext(null));class OY extends hn.Component{render(){return hn.createElement(PY.Provider,{value:this._reactInternals},this.props.children)}}function RY(){const e=function(){const e=hn.useContext(PY);if(null===e)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const t=hn.useId();return hn.useMemo(()=>{for(const n of[e,null==e?void 0:e.alternate]){if(!n)continue;const e=kY(n,!1,e=>{let n=e.memoizedState;for(;n;){if(n.memoizedState===t)return!0;n=n.next}});if(e)return e}},[e,t])}(),[t]=hn.useState(()=>new Map);t.clear();let n=e;for(;n;){if(n.type&&"object"==typeof n.type){const e=void 0===n.type._context&&n.type.Provider===n.type?n.type:n.type._context;e&&e!==PY&&!t.has(e)&&t.set(e,hn.useContext(AY(e)))}n=n.return}return t}function IY(){const e=RY();return hn.useMemo(()=>Array.from(e.keys()).reduce((t,n)=>r=>{return hn.createElement(t,null,hn.createElement(n.Provider,(s=EY({},r),i={value:e.get(n)},jY(s,NY(i)))));var s,i},e=>hn.createElement(OY,EY({},e))),[e])}const DY=hn.forwardRef(function({children:e,fallback:t,resize:n,style:r,gl:s,events:i=bY,eventSource:a,eventPrefix:o,shadows:l,linear:c,flat:d,legacy:u,orthographic:h,frameloop:p,dpr:m,performance:f,raycaster:g,camera:x,scene:v,onPointerMissed:y,onCreated:b,...w},j){hn.useMemo(()=>{return e=xS,void Object.assign(wK,e);var e},[]);const N=IY(),[_,S]=ID({scroll:!0,debounce:{scroll:50,resize:0},...n}),M=hn.useRef(null),C=hn.useRef(null);hn.useImperativeHandle(j,()=>M.current);const E=EK(y),[k,A]=hn.useState(!1),[T,P]=hn.useState(!1);if(k)throw k;if(T)throw T;const O=hn.useRef(null);CK(()=>{const t=M.current;S.width>0&&S.height>0&&t&&(O.current||(O.current=gY(t)),O.current.configure({gl:s,events:i,shadows:l,linear:c,flat:d,legacy:u,orthographic:h,frameloop:p,dpr:m,performance:f,raycaster:g,camera:x,scene:v,size:S,onPointerMissed:(...e)=>null==E.current?void 0:E.current(...e),onCreated:e=>{var t;null==e.events.connect||e.events.connect(a?(t=a)&&t.hasOwnProperty("current")?a.current:a:C.current),o&&e.setEvents({compute:(e,t)=>{const n=e[o+"X"],r=e[o+"Y"];t.pointer.set(n/t.size.width*2-1,-r/t.size.height*2+1),t.raycaster.setFromCamera(t.pointer,t.camera)}}),null==b||b(e)}}),O.current.render(Ot.jsx(N,{children:Ot.jsx(AK,{set:P,children:Ot.jsx(hn.Suspense,{fallback:Ot.jsx(kK,{set:A}),children:null!=e?e:null})})})))}),hn.useEffect(()=>{const e=M.current;if(e)return()=>vY(e)},[]);const R=a?"none":"auto";return Ot.jsx("div",{ref:C,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:R,...r},...w,children:Ot.jsx("div",{ref:_,style:{width:"100%",height:"100%"},children:Ot.jsx("canvas",{ref:M,style:{display:"block"},children:t})})})}),LY=hn.forwardRef(function(e,t){return Ot.jsx(OY,{children:Ot.jsx(DY,{...e,ref:t})})}),FY=hn.memo(({position:e,rotation:t})=>{const n=hn.useMemo(()=>{const e=new yy,t=.5*Math.PI;return e.absarc(2,2,1,0*t,1*t),e.absarc(-2,2,1,1*t,2*t),e.absarc(-2,-2,1,2*t,3*t),e.absarc(2,-2,1,3*t,4*t),e},[]),r=hn.useMemo(()=>{const e=new Yy(n,{depth:.3,bevelEnabled:!0,bevelThickness:.05,bevelSize:.05,bevelSegments:20,curveSegments:20});return e.center(),e},[n]);return Ot.jsx("mesh",{geometry:r,position:e,rotation:t,children:Ot.jsx("meshPhysicalMaterial",{color:"#232323",metalness:1,roughness:.3,reflectivity:.5,ior:1.5,emissive:"#000000",emissiveIntensity:0,transparent:!1,opacity:1,transmission:0,thickness:.5,clearcoat:0,clearcoatRoughness:0,sheen:0,sheenRoughness:1,sheenColor:"#ffffff",specularIntensity:1,specularColor:"#ffffff",iridescence:1,iridescenceIOR:1.3,iridescenceThicknessRange:[100,400],flatShading:!1,side:0,alphaTest:0,depthWrite:!0,depthTest:!0})})});FY.displayName="Box";const zY=hn.memo(()=>{const e=hn.useRef();lY((t,n)=>{e.current&&(e.current.rotation.x+=.15*n)});const t=hn.useMemo(()=>Array.from({length:15},(e,t)=>({position:[1.5*(t-7.5),0,0],rotation:[.2*(t-7.5),Math.PI/2,0],id:t})),[]);return Ot.jsx("group",{ref:e,children:t.map(e=>Ot.jsx(FY,{position:e.position,rotation:e.rotation},e.id))})});zY.displayName="AnimatedBoxes";const BY=hn.memo(()=>hn.useMemo(()=>"undefined"!=typeof window&&window.matchMedia("(prefers-reduced-motion: reduce)").matches,[])?null:Ot.jsx("div",{className:"w-full h-full z-0",children:Ot.jsxs(LY,{camera:{position:[5,5,20],fov:40},gl:{alpha:!0},style:{background:"transparent"},children:[Ot.jsx("ambientLight",{intensity:5}),Ot.jsx("directionalLight",{position:[10,10,5],intensity:5}),Ot.jsx(zY,{})]})}));BY.displayName="Scene";const UY=[{id:"agents",title:"AI Agents Hub",description:"15 specialized AI agents for marketing and business optimization",icon:Ot.jsx(ii,{className:"w-6 h-6"}),badge:"15 Agents",color:"from-purple-500 to-blue-500",features:["Campaign optimization","Content generation","Fraud detection","Customer success prediction"]},{id:"visual",title:"Visual Search",description:"Search products using images with GPT-4 Vision",icon:Ot.jsx($r,{className:"w-6 h-6"}),badge:"GPT-4 Vision",color:"from-blue-500 to-cyan-500",features:["Image analysis","Product matching","Style detection","Color extraction"]},{id:"voice",title:"Voice Search",description:"Hands-free search with Whisper API transcription",icon:Ot.jsx(li,{className:"w-6 h-6"}),badge:"Whisper API",color:"from-green-500 to-emerald-500",features:["Voice commands","Natural language","Multi-language support","Voice feedback"]},{id:"generate",title:"Image Studio",description:"Generate stunning images with PiAPI models",icon:Ot.jsx(ti,{className:"w-6 h-6"}),badge:"8 Models",color:"from-purple-500 to-pink-500",features:["Product photography","Marketing materials","Social media content","Style presets"]},{id:"content",title:"Content Generator",description:"AI-powered content creation for all platforms",icon:Ot.jsx(cs,{className:"w-6 h-6"}),badge:"GPT-4",color:"from-orange-500 to-red-500",features:["Blog posts","Social media","Email campaigns","Product descriptions"]},{id:"visual-commerce",title:"Visual Commerce",description:"Create shoppable images with product tagging and AR",icon:Ot.jsx(nr,{className:"w-6 h-6"}),badge:"NEW",color:"from-purple-500 to-pink-500",features:["Shoppable images","Auto product detection","AR product preview","Visual analytics"]},{id:"voice-commerce",title:"Voice Commerce",description:"Shop hands-free with AI voice assistant",icon:Ot.jsx(bi,{className:"w-6 h-6"}),badge:"ElevenLabs",color:"from-blue-500 to-purple-500",features:["Voice shopping","Natural conversation","Multi-voice support","Cart management"]}];function VY(){_n();const[e,t]=hn.useState("overview");hn.useEffect(()=>{const e=new URLSearchParams(window.location.search).get("tab");e&&t(e)},[]);const n=[{label:"AI Agents",value:"15",icon:Ot.jsx(ii,{className:"w-5 h-5"})},{label:"Models Available",value:"12+",icon:Ot.jsx(ei,{className:"w-5 h-5"})},{label:"Tasks Automated",value:"50+",icon:Ot.jsx(Pn,{className:"w-5 h-5"})},{label:"Time Saved",value:"10h/week",icon:Ot.jsx(Dn,{className:"w-5 h-5"})}];return Ot.jsxs("div",{className:"min-h-screen relative",style:{backgroundImage:"url('/backgrounds/glowing-bubbles-orange-blue.avif')",backgroundSize:"100% auto",backgroundPosition:"center top",backgroundRepeat:"no-repeat",backgroundAttachment:"fixed",backgroundColor:"#000"},children:[Ot.jsxs("div",{className:"min-h-svh w-full text-white flex flex-col items-center justify-center p-8 relative overflow-hidden",children:[Ot.jsx("div",{className:"absolute inset-0 z-0",children:Ot.jsx(BY,{})}),Ot.jsxs("div",{className:"w-full max-w-6xl space-y-12 relative z-10",children:[Ot.jsxs("div",{className:"flex flex-col items-center text-center space-y-8",children:[Ot.jsxs(Tn,{variant:"secondary",className:"bg-white/10 border border-white/20 text-white hover:bg-white/20 hover:backdrop-blur-sm px-4 py-2 rounded-full relative overflow-hidden","data-testid":"badge-hero",children:[Ot.jsx("span",{className:"relative z-10",children:" AI Tools Command Center"}),Ot.jsx("div",{className:"absolute inset-0 opacity-0 hover:opacity-100 cyber-metallic-shine"})]}),Ot.jsxs("div",{className:"space-y-6 flex items-center justify-center flex-col",children:[Ot.jsx("h1",{className:"text-3xl md:text-6xl font-semibold tracking-tight max-w-3xl cyber-chromatic-text","data-testid":"text-hero-title",children:"Harness the power of advanced AI automation"}),Ot.jsx("p",{className:"text-lg text-neutral-300 max-w-2xl","data-testid":"text-hero-description",children:"Transform your business with intelligent automation, content generation, and predictive insights. Experience ultra-fast processing, advanced security, and intuitive design."}),Ot.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center",children:[Ot.jsxs(Ln,{className:"text-sm px-8 py-3 rounded-xl bg-white text-black border border-white/10 shadow-none hover:bg-white/90 transition-all duration-200 relative overflow-hidden group cyber-3d-lift",onClick:()=>t("agents"),"data-testid":"button-get-started",children:[Ot.jsx("span",{className:"relative z-10",children:"Get Started"}),Ot.jsx("div",{className:"absolute inset-0 cyber-metallic-shine opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),Ot.jsxs(Ln,{className:"text-sm px-8 py-3 rounded-xl bg-transparent text-white border border-white/20 shadow-none hover:bg-white/10 transition-all duration-200 relative overflow-hidden group cyber-3d-lift cyber-energy-border",onClick:()=>t("overview"),"data-testid":"button-learn-more",children:[Ot.jsx("span",{className:"relative z-10",children:"Learn More"}),Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-cyan-500/20 to-purple-500/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]})]})]})]}),Ot.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 md:gap-6 max-w-5xl mx-auto",children:n.map((e,t)=>Ot.jsxs("div",{className:"backdrop-blur-sm bg-white/5 border-2 border-white/10 rounded-xl p-4 md:p-6 h-40 md:h-48 flex flex-col justify-start items-start space-y-2 md:space-y-3 hover:bg-white/10 transition-all duration-200 relative overflow-hidden group cyber-3d-lift","data-testid":`card-stat-${t}`,children:[Ot.jsx("div",{className:"absolute inset-0 cyber-circuit-pattern opacity-5 group-hover:opacity-10 transition-opacity"}),Ot.jsx("div",{className:"absolute inset-0 cyber-energy-border opacity-0 group-hover:opacity-100 transition-opacity"}),Ot.jsx("div",{className:"text-white/80 md:w-5 md:h-5 relative z-10 group-hover:cyber-text-glow",children:e.icon}),Ot.jsx("h3",{className:"text-2xl font-bold relative z-10 group-hover:cyber-chromatic-text",children:e.value}),Ot.jsx("p",{className:"text-xs md:text-sm text-neutral-400 relative z-10",children:e.label})]},t))})]})]}),Ot.jsx("div",{className:"container mx-auto px-4 py-8 relative",children:Ot.jsxs(qs,{value:e,onValueChange:t,className:"space-y-6 relative z-10",children:[Ot.jsxs(Xs,{className:"grid w-full grid-cols-7 h-auto p-1 bg-black backdrop-blur-sm border border-gray-800 rounded-2xl shadow-[0_8px_32px_rgba(0,0,0,0.8)] relative overflow-hidden",children:[Ot.jsxs(Ks,{value:"overview",className:"flex flex-col py-3 data-[state=active]:bg-gray-900 data-[state=active]:border-gray-700 data-[state=active]:border data-[state=active]:shadow-none rounded-xl transition-all duration-300 text-gray-400 data-[state=active]:text-gray-200","data-testid":"tab-overview",children:[Ot.jsx(An,{className:"w-4 h-4 mb-1"}),Ot.jsx("span",{className:"text-xs",children:"Overview"})]}),Ot.jsxs(Ks,{value:"agents",className:"flex flex-col py-3 data-[state=active]:bg-gray-900 data-[state=active]:border-gray-700 data-[state=active]:border data-[state=active]:shadow-none rounded-xl transition-all duration-300 text-gray-400 data-[state=active]:text-gray-200","data-testid":"tab-agents",children:[Ot.jsx(ii,{className:"w-4 h-4 mb-1"}),Ot.jsx("span",{className:"text-xs",children:"Agents"})]}),Ot.jsxs(Ks,{value:"visual",className:"flex flex-col py-3 data-[state=active]:bg-gray-900 data-[state=active]:border-gray-700 data-[state=active]:border data-[state=active]:shadow-none rounded-xl transition-all duration-300 text-gray-400 data-[state=active]:text-gray-200","data-testid":"tab-visual",children:[Ot.jsx($r,{className:"w-4 h-4 mb-1"}),Ot.jsx("span",{className:"text-xs",children:"Visual"})]}),Ot.jsxs(Ks,{value:"voice",className:"flex flex-col py-3 data-[state=active]:bg-gray-900 data-[state=active]:border-gray-700 data-[state=active]:border data-[state=active]:shadow-none rounded-xl transition-all duration-300 text-gray-400 data-[state=active]:text-gray-200","data-testid":"tab-voice",children:[Ot.jsx(li,{className:"w-4 h-4 mb-1"}),Ot.jsx("span",{className:"text-xs",children:"Voice"})]}),Ot.jsxs(Ks,{value:"generate",className:"flex flex-col py-3 data-[state=active]:bg-gray-900 data-[state=active]:border-gray-700 data-[state=active]:border data-[state=active]:shadow-none rounded-xl transition-all duration-300 text-gray-400 data-[state=active]:text-gray-200","data-testid":"tab-generate",children:[Ot.jsx(ti,{className:"w-4 h-4 mb-1"}),Ot.jsx("span",{className:"text-xs",children:"Images"})]}),Ot.jsxs(Ks,{value:"content",className:"flex flex-col py-3 data-[state=active]:bg-gray-900 data-[state=active]:border-gray-700 data-[state=active]:border data-[state=active]:shadow-none rounded-xl transition-all duration-300 text-gray-400 data-[state=active]:text-gray-200","data-testid":"tab-content",children:[Ot.jsx(cs,{className:"w-4 h-4 mb-1"}),Ot.jsx("span",{className:"text-xs",children:"Content"})]}),Ot.jsxs(Ks,{value:"visual-commerce",className:"flex flex-col py-3 data-[state=active]:bg-gray-900 data-[state=active]:border-gray-700 data-[state=active]:border data-[state=active]:shadow-none rounded-xl transition-all duration-300 text-gray-400 data-[state=active]:text-gray-200","data-testid":"tab-visual-commerce",children:[Ot.jsx(nr,{className:"w-4 h-4 mb-1"}),Ot.jsx("span",{className:"text-xs",children:"Shop Visual"})]})]}),Ot.jsxs(Ys,{value:"overview",className:"space-y-6",children:[Ot.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:UY.map((e,n)=>Ot.jsx(wo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*n},children:Ot.jsx(qr,{className:"cursor-pointer h-full "+(n%3==0?"holo-teal":n%3==1?"holo-gold":"holo-bronze"),intensity:"medium",children:Ot.jsxs("div",{className:"holo-content h-full flex flex-col",onClick:()=>t(e.id),"data-testid":`card-tool-${e.id}`,children:[Ot.jsxs(Lr,{children:[Ot.jsxs("div",{className:"flex items-start justify-between mb-4",children:[Ot.jsxs("div",{className:`p-3 rounded-xl bg-gradient-to-br ${e.color} text-white shadow-[0_0_20px_rgba(168,85,247,0.4)] group-hover:shadow-[0_0_30px_rgba(168,85,247,0.6)] transition-all duration-300 relative`,children:[Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/20 to-transparent rounded-xl"}),Ot.jsx("div",{className:"relative",children:e.icon})]}),e.badge&&Ot.jsx(Tn,{variant:"secondary",className:"bg-cyan-500/20 text-cyan-900 border-cyan-600/50",children:e.badge})]}),Ot.jsx(zr,{className:"text-xl text-gray-900",children:e.title}),Ot.jsx(Ur,{className:"text-gray-700",children:e.description})]}),Ot.jsxs(Mn,{className:"relative z-10",children:[Ot.jsx("ul",{className:"space-y-2",children:e.features.map((e,t)=>Ot.jsxs("li",{className:"flex items-center text-sm text-gray-800",children:[Ot.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-cyan-600 mr-2 shadow-[0_0_8px_rgba(8,145,178,0.6)]"}),e]},t))}),Ot.jsxs(Ln,{className:"w-full mt-4 bg-gradient-to-r from-cyan-500/20 to-blue-500/20 border border-cyan-600/50 hover:from-cyan-500/30 hover:to-blue-500/30 hover:shadow-[0_0_20px_rgba(0,255,255,0.3)] transition-all duration-300 text-gray-900 font-semibold",variant:"outline","data-testid":`button-explore-${e.id}`,children:["Explore Tool",Ot.jsx(mr,{className:"w-4 h-4 ml-2 group-hover:translate-x-1 transition-transform"})]})]})]})})},e.id))}),Ot.jsxs(Sn,{className:"bg-gradient-to-br from-slate-800 via-slate-900 to-slate-950 border-2 border-slate-700/50 hover:border-cyan-400/80 transition-all duration-500 hover:shadow-[0_0_40px_rgba(0,255,255,0.4)] cyber-3d-lift relative overflow-hidden group",children:[Ot.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-500 cyber-metallic-shine z-0"}),Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-cyan-500/10 via-purple-500/10 to-pink-500/10 opacity-0 group-hover:opacity-100 transition-all duration-500 mix-blend-overlay pointer-events-none z-0"}),Ot.jsx("div",{className:"absolute inset-0 cyber-scan-line pointer-events-none z-0"}),Ot.jsxs(Lr,{className:"relative z-10",children:[Ot.jsx(zr,{className:"text-white",children:"Quick AI Actions"}),Ot.jsx(Ur,{className:"text-gray-400",children:"Get started with common AI tasks"})]}),Ot.jsx(Mn,{className:"relative z-10",children:Ot.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[Ot.jsxs(Ln,{variant:"outline",className:"h-auto flex flex-col py-4 bg-gradient-to-br from-slate-700 via-slate-800 to-slate-900 border-2 border-slate-600/50 hover:border-blue-400/80 hover:shadow-[0_0_30px_rgba(59,130,246,0.5)] transition-all duration-300 text-white cyber-3d-lift relative overflow-hidden group",onClick:()=>t("agents"),"data-testid":"button-quick-optimize",children:[Ot.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-500 cyber-metallic-shine z-0"}),Ot.jsx(Dn,{className:"w-6 h-6 mb-2 text-blue-400 relative z-10"}),Ot.jsx("span",{className:"text-xs relative z-10",children:"Optimize Campaign"})]}),Ot.jsxs(Ln,{variant:"outline",className:"h-auto flex flex-col py-4 bg-gradient-to-br from-slate-700 via-slate-800 to-slate-900 border-2 border-slate-600/50 hover:border-purple-400/80 hover:shadow-[0_0_30px_rgba(168,85,247,0.5)] transition-all duration-300 text-white cyber-3d-lift relative overflow-hidden group",onClick:()=>t("generate"),"data-testid":"button-quick-images",children:[Ot.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-500 cyber-metallic-shine z-0"}),Ot.jsx(as,{className:"w-6 h-6 mb-2 text-purple-400 relative z-10"}),Ot.jsx("span",{className:"text-xs relative z-10",children:"Product Images"})]}),Ot.jsxs(Ln,{variant:"outline",className:"h-auto flex flex-col py-4 bg-gradient-to-br from-slate-700 via-slate-800 to-slate-900 border-2 border-slate-600/50 hover:border-green-400/80 hover:shadow-[0_0_30px_rgba(34,197,94,0.5)] transition-all duration-300 text-white cyber-3d-lift relative overflow-hidden group",onClick:()=>t("content"),"data-testid":"button-quick-content",children:[Ot.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-500 cyber-metallic-shine z-0"}),Ot.jsx(cs,{className:"w-6 h-6 mb-2 text-green-400 relative z-10"}),Ot.jsx("span",{className:"text-xs relative z-10",children:"Write Content"})]}),Ot.jsxs(Ln,{variant:"outline",className:"h-auto flex flex-col py-4 bg-gradient-to-br from-slate-700 via-slate-800 to-slate-900 border-2 border-slate-600/50 hover:border-red-400/80 hover:shadow-[0_0_30px_rgba(239,68,68,0.5)] transition-all duration-300 text-white cyber-3d-lift relative overflow-hidden group",onClick:()=>t("voice"),"data-testid":"button-quick-voice",children:[Ot.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-500 cyber-metallic-shine z-0"}),Ot.jsx(Rn,{className:"w-6 h-6 mb-2 text-red-400 relative z-10"}),Ot.jsx("span",{className:"text-xs relative z-10",children:"Voice Search"})]})]})})]}),Ot.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[Ot.jsxs(Sn,{className:"bg-gradient-to-br from-slate-800 via-slate-900 to-slate-950 border-2 border-slate-700/50 hover:border-purple-400/80 transition-all duration-500 hover:shadow-[0_0_40px_rgba(168,85,247,0.4)] cyber-3d-lift relative overflow-hidden group",children:[Ot.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-500 cyber-metallic-shine z-0"}),Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-500/10 via-pink-500/10 to-purple-500/10 opacity-0 group-hover:opacity-100 transition-all duration-500 mix-blend-overlay pointer-events-none z-0"}),Ot.jsx("div",{className:"absolute inset-0 cyber-scan-line pointer-events-none z-0"}),Ot.jsx("div",{className:"absolute inset-0 cyber-circuit-pattern opacity-5 group-hover:opacity-10 transition-opacity z-0"}),Ot.jsxs(Lr,{className:"relative z-10",children:[Ot.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-purple-500 to-pink-600 text-white w-fit shadow-[0_0_20px_rgba(168,85,247,0.4)] group-hover:shadow-[0_0_30px_rgba(168,85,247,0.6)] transition-all duration-300 mb-2",children:Ot.jsx(Vs,{className:"w-6 h-6"})}),Ot.jsx(zr,{className:"text-white",children:"Accelerate Growth"})]}),Ot.jsx(Mn,{className:"relative z-10",children:Ot.jsx("p",{className:"text-sm text-gray-400",children:"Automate repetitive tasks and focus on strategic growth with AI-powered tools"})})]}),Ot.jsxs(Sn,{className:"bg-gradient-to-br from-slate-800 via-slate-900 to-slate-950 border-2 border-slate-700/50 hover:border-cyan-400/80 transition-all duration-500 hover:shadow-[0_0_40px_rgba(0,255,255,0.4)] cyber-3d-lift relative overflow-hidden group",children:[Ot.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-500 cyber-metallic-shine z-0"}),Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-cyan-500/10 via-blue-500/10 to-cyan-500/10 opacity-0 group-hover:opacity-100 transition-all duration-500 mix-blend-overlay pointer-events-none z-0"}),Ot.jsx("div",{className:"absolute inset-0 cyber-scan-line pointer-events-none z-0"}),Ot.jsx("div",{className:"absolute inset-0 cyber-circuit-pattern opacity-5 group-hover:opacity-10 transition-opacity z-0"}),Ot.jsxs(Lr,{className:"relative z-10",children:[Ot.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-cyan-500 to-blue-600 text-white w-fit shadow-[0_0_20px_rgba(6,182,212,0.4)] group-hover:shadow-[0_0_30px_rgba(6,182,212,0.6)] transition-all duration-300 mb-2",children:Ot.jsx(Ni,{className:"w-6 h-6"})}),Ot.jsx(zr,{className:"text-white",children:"Data-Driven Insights"})]}),Ot.jsx(Mn,{className:"relative z-10",children:Ot.jsx("p",{className:"text-sm text-gray-400",children:"Make informed decisions with predictive analytics and intelligent recommendations"})})]}),Ot.jsxs(Sn,{className:"bg-gradient-to-br from-slate-800 via-slate-900 to-slate-950 border-2 border-slate-700/50 hover:border-green-400/80 transition-all duration-500 hover:shadow-[0_0_40px_rgba(34,197,94,0.4)] cyber-3d-lift relative overflow-hidden group",children:[Ot.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-500 cyber-metallic-shine z-0"}),Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-green-500/10 via-emerald-500/10 to-green-500/10 opacity-0 group-hover:opacity-100 transition-all duration-500 mix-blend-overlay pointer-events-none z-0"}),Ot.jsx("div",{className:"absolute inset-0 cyber-scan-line pointer-events-none z-0"}),Ot.jsx("div",{className:"absolute inset-0 cyber-circuit-pattern opacity-5 group-hover:opacity-10 transition-opacity z-0"}),Ot.jsxs(Lr,{className:"relative z-10",children:[Ot.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-green-500 to-emerald-600 text-white w-fit shadow-[0_0_20px_rgba(34,197,94,0.4)] group-hover:shadow-[0_0_30px_rgba(34,197,94,0.6)] transition-all duration-300 mb-2",children:Ot.jsx(On,{className:"w-6 h-6"})}),Ot.jsx(zr,{className:"text-white",children:"Enhanced Experience"})]}),Ot.jsx(Mn,{className:"relative z-10",children:Ot.jsx("p",{className:"text-sm text-gray-400",children:"Deliver personalized customer experiences with AI-driven content and interactions"})})]})]})]}),Ot.jsx(Ys,{value:"agents",children:Ot.jsx(iq,{})}),Ot.jsx(Ys,{value:"visual",children:Ot.jsx(oq,{})}),Ot.jsx(Ys,{value:"voice",className:"bg-black rounded-xl p-6",children:Ot.jsx(nX,{})}),Ot.jsx(Ys,{value:"generate",children:Ot.jsx(ZX,{})}),Ot.jsx(Ys,{value:"content",children:Ot.jsx(eK,{businessId:"demo"})}),Ot.jsx(Ys,{value:"visual-commerce",children:Ot.jsx(tK,{})}),Ot.jsx(Ys,{value:"voice-commerce",className:"bg-black rounded-xl p-6",children:Ot.jsx(iK,{})})]})})]})}function HY(){const{isAuthenticated:e}=Ua(),{toast:t}=Nn(),[n,r]=hn.useState("overview"),{data:s,isLoading:i}=za({queryKey:["/api/gmb/status"],enabled:e}),{data:a,isLoading:o}=za({queryKey:["/api/gmb/metrics"],enabled:e&&s?.connected}),{data:l=[],isLoading:c}=za({queryKey:["/api/gmb/reviews"],enabled:e&&s?.connected});za({queryKey:["/api/gmb/posts"],enabled:e&&s?.connected});const d=Fa({mutationFn:async()=>await qn("POST","/api/gmb/connect"),onSuccess:e=>{e.authUrl&&(window.location.href=e.authUrl)},onError:e=>{t({title:"Connection Failed",description:e.message||"Failed to initiate GMB connection",variant:"destructive"})}}),u=Fa({mutationFn:async()=>await qn("POST","/api/gmb/sync"),onSuccess:()=>{t({title:"Sync Started",description:"GMB data sync has been initiated"}),vr.invalidateQueries({queryKey:["/api/gmb/status"]}),vr.invalidateQueries({queryKey:["/api/gmb/metrics"]}),vr.invalidateQueries({queryKey:["/api/gmb/reviews"]})},onError:e=>{t({title:"Sync Failed",description:e.message||"Failed to sync GMB data",variant:"destructive"})}}),h=Fa({mutationFn:async()=>await qn("POST","/api/gmb/disconnect"),onSuccess:()=>{t({title:"Disconnected",description:"GMB account has been disconnected"}),vr.invalidateQueries({queryKey:["/api/gmb/status"]})},onError:e=>{t({title:"Disconnection Failed",description:e.message||"Failed to disconnect GMB",variant:"destructive"})}});if(!e)return Ot.jsx("div",{className:"premium-page-wrapper premium-surface min-h-screen marble-texture abstract-overlay-light",children:Ot.jsxs("div",{className:"container mx-auto px-4 py-20 text-center",children:[Ot.jsx(Bn,{className:"h-16 w-16 mx-auto mb-6 text-blue-500"}),Ot.jsx("h1",{className:"text-4xl font-bold mb-4",children:"GMB Integration Hub"}),Ot.jsx("p",{className:"text-xl text-muted-foreground mb-8",children:"Please sign in to manage your Google My Business integration."}),Ot.jsx(Ln,{size:"lg",onClick:()=>window.location.href="/api/login",children:"Sign In"})]})});return Ot.jsxs("div",{className:"min-h-screen",children:[Ot.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-r from-blue-600 via-cyan-600 to-teal-600 text-white",children:[Ot.jsx("div",{className:"absolute inset-0 opacity-20",children:Ot.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_50%_50%,rgba(255,255,255,0.1),transparent_70%)]"})}),Ot.jsx("div",{className:"container mx-auto px-4 py-16 relative z-10",children:Ot.jsxs(wo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center",children:[Ot.jsxs("div",{className:"flex items-center justify-center gap-3 mb-6",children:[Ot.jsx(Bn,{className:"h-12 w-12"}),Ot.jsx("h1",{className:"text-5xl font-bold",children:"GMB Integration Hub"})]}),Ot.jsx("p",{className:"text-xl opacity-90 max-w-2xl mx-auto",children:"Manage your Google My Business integration, sync data, and track performance metrics"})]})})]}),Ot.jsxs("div",{className:"container mx-auto px-4 py-12 space-y-8",children:[i?Ot.jsx(er,{className:"h-48 w-full"}):s?.connected?Ot.jsxs(Sn,{className:"border-2 border-green-200 bg-gradient-to-r from-green-50 to-emerald-50",children:[Ot.jsx(Lr,{children:Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsx("div",{className:"p-3 rounded-full bg-green-500",children:Ot.jsx(us,{className:"h-6 w-6 text-white"})}),Ot.jsxs("div",{children:[Ot.jsx(zr,{className:"text-2xl",children:"Connected to GMB"}),Ot.jsx(Ur,{className:"text-lg",children:s.businessName||"Your Business"})]})]}),Ot.jsxs("div",{className:"flex gap-2",children:[Ot.jsxs(Ln,{variant:"outline",size:"sm",onClick:()=>u.mutate(),disabled:u.isPending,children:[Ot.jsx(Fs,{className:"h-4 w-4 mr-2 "+(u.isPending?"animate-spin":"")}),"Sync Now"]}),Ot.jsx(Ln,{variant:"outline",size:"sm",onClick:()=>{confirm("Are you sure you want to disconnect your GMB account?")&&h.mutate()},children:"Disconnect"})]})]})}),Ot.jsxs(Mn,{children:[Ot.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[Ot.jsxs("div",{children:[Ot.jsx("h4",{className:"text-sm font-semibold text-muted-foreground mb-2",children:"Sync Status"}),Ot.jsxs("div",{className:"flex items-center gap-2",children:["success"===s.syncStatus&&Ot.jsxs(Tn,{className:"bg-green-500",children:[Ot.jsx(us,{className:"h-3 w-3 mr-1"}),"Up to date"]}),"pending"===s.syncStatus&&Ot.jsxs(Tn,{className:"bg-blue-500",children:[Ot.jsx(Fs,{className:"h-3 w-3 mr-1 animate-spin"}),"Syncing..."]}),"error"===s.syncStatus&&Ot.jsxs(Tn,{variant:"destructive",children:[Ot.jsx(Cn,{className:"h-3 w-3 mr-1"}),"Error"]})]})]}),Ot.jsxs("div",{children:[Ot.jsx("h4",{className:"text-sm font-semibold text-muted-foreground mb-2",children:"Last Sync"}),Ot.jsxs("p",{className:"text-sm flex items-center gap-2",children:[Ot.jsx(xr,{className:"h-4 w-4"}),s.lastSync?Fo(new Date(s.lastSync),"PPp"):"Never"]})]}),Ot.jsxs("div",{children:[Ot.jsx("h4",{className:"text-sm font-semibold text-muted-foreground mb-2",children:"Next Sync"}),Ot.jsxs("p",{className:"text-sm flex items-center gap-2",children:[Ot.jsx(Qn,{className:"h-4 w-4"}),s.nextSync?Fo(new Date(s.nextSync),"PPp"):"Not scheduled"]})]}),Ot.jsxs("div",{children:[Ot.jsx("h4",{className:"text-sm font-semibold text-muted-foreground mb-2",children:"Account ID"}),Ot.jsx("p",{className:"text-sm font-mono",children:s.accountId||"N/A"})]})]}),s.errorMessage&&Ot.jsx("div",{className:"mt-4 p-4 rounded-lg bg-red-50 border border-red-200",children:Ot.jsxs("div",{className:"flex items-start gap-2",children:[Ot.jsx(Cn,{className:"h-5 w-5 text-red-600 mt-0.5"}),Ot.jsxs("div",{children:[Ot.jsx("h5",{className:"font-semibold text-red-900 mb-1",children:"Sync Error"}),Ot.jsx("p",{className:"text-sm text-red-700",children:s.errorMessage})]})]})})]})]}):Ot.jsx(Sn,{className:"border-2 border-dashed",children:Ot.jsx(Mn,{className:"p-12 text-center",children:Ot.jsxs(wo.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.3},children:[Ot.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-full bg-gradient-to-r from-blue-500 to-cyan-500 mb-6",children:Ot.jsx(Bn,{className:"h-10 w-10 text-white"})}),Ot.jsx("h3",{className:"text-2xl font-bold mb-3",children:"Connect Your Google My Business"}),Ot.jsx("p",{className:"text-muted-foreground mb-8 max-w-2xl mx-auto",children:"Sync your Google My Business data to Florida Local Elite. Get automatic review syncing, performance metrics, and improved local SEO visibility."}),Ot.jsxs("div",{className:"grid md:grid-cols-3 gap-4 mb-8 text-left max-w-3xl mx-auto",children:[Ot.jsxs("div",{className:"flex items-start gap-3 p-4 rounded-lg bg-blue-50",children:[Ot.jsx(In,{className:"h-5 w-5 text-blue-600 mt-0.5"}),Ot.jsxs("div",{children:[Ot.jsx("h4",{className:"font-semibold text-sm mb-1",children:"Auto-Sync Reviews"}),Ot.jsx("p",{className:"text-xs text-muted-foreground",children:"Reviews sync automatically every hour"})]})]}),Ot.jsxs("div",{className:"flex items-start gap-3 p-4 rounded-lg bg-green-50",children:[Ot.jsx(Hs,{className:"h-5 w-5 text-green-600 mt-0.5"}),Ot.jsxs("div",{children:[Ot.jsx("h4",{className:"font-semibold text-sm mb-1",children:"Performance Insights"}),Ot.jsx("p",{className:"text-xs text-muted-foreground",children:"Track views, searches, and engagement"})]})]}),Ot.jsxs("div",{className:"flex items-start gap-3 p-4 rounded-lg bg-purple-50",children:[Ot.jsx(Pn,{className:"h-5 w-5 text-purple-600 mt-0.5"}),Ot.jsxs("div",{children:[Ot.jsx("h4",{className:"font-semibold text-sm mb-1",children:"Enhanced Visibility"}),Ot.jsx("p",{className:"text-xs text-muted-foreground",children:"Boost your local search rankings"})]})]})]}),Ot.jsx(Ln,{size:"lg",onClick:()=>d.mutate(),disabled:d.isPending,className:"bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700",children:d.isPending?Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(Fr,{className:"h-5 w-5 mr-2 animate-spin"}),"Connecting..."]}):Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(Si,{className:"h-5 w-5 mr-2"}),"Connect GMB Account"]})})]})})}),s?.connected&&Ot.jsxs(qs,{value:n,onValueChange:r,className:"space-y-6",children:[Ot.jsxs(Xs,{className:"grid w-full grid-cols-3 max-w-2xl mx-auto",children:[Ot.jsxs(Ks,{value:"overview",children:[Ot.jsx(Hs,{className:"h-4 w-4 mr-2"}),"Overview"]}),Ot.jsxs(Ks,{value:"reviews",children:[Ot.jsx(In,{className:"h-4 w-4 mr-2"}),"Reviews"]}),Ot.jsxs(Ks,{value:"posts",children:[Ot.jsx(_i,{className:"h-4 w-4 mr-2"}),"Posts"]})]}),Ot.jsx(Ys,{value:"overview",className:"space-y-6",children:Ot.jsxs("div",{children:[Ot.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Performance Metrics"}),(()=>{if(!s?.connected)return null;if(o)return Ot.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6",children:[...Array(8)].map((e,t)=>Ot.jsx(er,{className:"h-32"},t))});if(!a)return null;const e=[{label:"Total Reviews",value:a.totalReviews,icon:Ot.jsx(In,{className:"h-6 w-6"}),color:"from-yellow-500 to-orange-500",bgColor:"from-yellow-50 to-orange-50"},{label:"Average Rating",value:a.averageRating.toFixed(1),icon:Ot.jsx(Mi,{className:"h-6 w-6"}),color:"from-green-500 to-emerald-500",bgColor:"from-green-50 to-emerald-50"},{label:"Profile Views",value:a.profileViews.toLocaleString(),icon:Ot.jsx($r,{className:"h-6 w-6"}),color:"from-blue-500 to-cyan-500",bgColor:"from-blue-50 to-cyan-50",trend:a.weeklyChange.views},{label:"Search Appearances",value:a.searchAppearances.toLocaleString(),icon:Ot.jsx(Dn,{className:"h-6 w-6"}),color:"from-purple-500 to-pink-500",bgColor:"from-purple-50 to-pink-50",trend:a.weeklyChange.searches},{label:"Website Clicks",value:a.websiteClicks.toLocaleString(),icon:Ot.jsx(Yr,{className:"h-6 w-6"}),color:"from-indigo-500 to-blue-500",bgColor:"from-indigo-50 to-blue-50"},{label:"Phone Calls",value:a.phoneCallClicks.toLocaleString(),icon:Ot.jsx(Qr,{className:"h-6 w-6"}),color:"from-green-500 to-teal-500",bgColor:"from-green-50 to-teal-50"},{label:"Direction Requests",value:a.directionRequests.toLocaleString(),icon:Ot.jsx(Bn,{className:"h-6 w-6"}),color:"from-red-500 to-pink-500",bgColor:"from-red-50 to-pink-50"},{label:"Photo Views",value:a.photoViews.toLocaleString(),icon:Ot.jsx(Pr,{className:"h-6 w-6"}),color:"from-orange-500 to-amber-500",bgColor:"from-orange-50 to-amber-50"}];return Ot.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6",children:e.map((e,t)=>Ot.jsx(wo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*t},children:Ot.jsx(Sn,{className:"hover:shadow-lg transition-shadow",children:Ot.jsxs(Mn,{className:"p-6",children:[Ot.jsx("div",{className:`inline-flex p-3 rounded-lg bg-gradient-to-r ${e.bgColor} mb-4`,children:Ot.jsx("div",{className:`text-transparent bg-clip-text bg-gradient-to-r ${e.color}`,children:e.icon})}),Ot.jsx("div",{className:"text-3xl font-bold mb-1",children:e.value}),Ot.jsxs("div",{className:"text-sm text-muted-foreground flex items-center justify-between",children:[Ot.jsx("span",{children:e.label}),void 0!==e.trend&&Ot.jsxs(Tn,{variant:e.trend>=0?"default":"destructive",className:"text-xs",children:[e.trend>=0?"+":"",e.trend,"%"]})]})]})})},e.label))})})()]})}),Ot.jsx(Ys,{value:"reviews",className:"space-y-6",children:Ot.jsxs("div",{children:[Ot.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Customer Reviews"}),c?Ot.jsx("div",{className:"space-y-4",children:[...Array(3)].map((e,t)=>Ot.jsx(er,{className:"h-32"},t))}):0===l.length?Ot.jsx(Sn,{children:Ot.jsxs(Mn,{className:"p-12 text-center",children:[Ot.jsx(_i,{className:"h-16 w-16 mx-auto mb-4 text-muted-foreground"}),Ot.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No Reviews Yet"}),Ot.jsx("p",{className:"text-muted-foreground",children:"Your GMB reviews will appear here once they're synced"})]})}):Ot.jsx("div",{className:"space-y-4",children:l.map(e=>Ot.jsx(Sn,{children:Ot.jsxs(Mn,{className:"p-6",children:[Ot.jsxs("div",{className:"flex items-start justify-between mb-4",children:[Ot.jsxs("div",{children:[Ot.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[Ot.jsx("h4",{className:"font-semibold",children:e.author}),Ot.jsx("div",{className:"flex",children:[...Array(5)].map((t,n)=>Ot.jsx(In,{className:"h-4 w-4 "+(n<e.rating?"fill-yellow-400 text-yellow-400":"text-gray-300")},n))})]}),Ot.jsx("p",{className:"text-sm text-muted-foreground",children:Fo(new Date(e.createdAt),"PPP")})]}),e.sentiment&&Ot.jsxs(Tn,{variant:"positive"===e.sentiment?"default":"negative"===e.sentiment?"destructive":"secondary",children:["positive"===e.sentiment?Ot.jsx(Mi,{className:"h-3 w-3 mr-1"}):"negative"===e.sentiment?Ot.jsx(Ci,{className:"h-3 w-3 mr-1"}):null,e.sentiment]})]}),Ot.jsx("p",{className:"text-sm mb-4",children:e.text}),e.reply&&Ot.jsxs("div",{className:"bg-muted p-4 rounded-lg",children:[Ot.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[Ot.jsx(_i,{className:"h-4 w-4"}),Ot.jsx("span",{className:"text-sm font-semibold",children:"Business Response"}),e.repliedAt&&Ot.jsx("span",{className:"text-xs text-muted-foreground",children:Fo(new Date(e.repliedAt),"PP")})]}),Ot.jsx("p",{className:"text-sm",children:e.reply})]})]})},e.id))})]})}),Ot.jsx(Ys,{value:"posts",className:"space-y-6",children:Ot.jsxs("div",{children:[Ot.jsx("h2",{className:"text-2xl font-bold mb-6",children:"GMB Posts"}),Ot.jsx(Sn,{children:Ot.jsxs(Mn,{className:"p-12 text-center",children:[Ot.jsx(_i,{className:"h-16 w-16 mx-auto mb-4 text-muted-foreground"}),Ot.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Post Management Coming Soon"}),Ot.jsx("p",{className:"text-muted-foreground",children:"GMB post management and scheduling will be available soon"})]})})]})})]})]})]})}var WY,$Y,GY,qY,XY={linear:function(e,t,n,r){return(n-t)*e/r+t},easeInQuad:function(e,t,n,r){return(n-t)*(e/=r)*e+t},easeOutQuad:function(e,t,n,r){return-(n-t)*(e/=r)*(e-2)+t},easeInOutQuad:function(e,t,n,r){var s=n-t;return(e/=r/2)<1?s/2*e*e+t:-s/2*(--e*(e-2)-1)+t},easeInCubic:function(e,t,n,r){return(n-t)*(e/=r)*e*e+t},easeOutCubic:function(e,t,n,r){return(n-t)*((e=e/r-1)*e*e+1)+t},easeInOutCubic:function(e,t,n,r){var s=n-t;return(e/=r/2)<1?s/2*e*e*e+t:s/2*((e-=2)*e*e+2)+t},easeInQuart:function(e,t,n,r){return(n-t)*(e/=r)*e*e*e+t},easeOutQuart:function(e,t,n,r){return-(n-t)*((e=e/r-1)*e*e*e-1)+t},easeInOutQuart:function(e,t,n,r){var s=n-t;return(e/=r/2)<1?s/2*e*e*e*e+t:-s/2*((e-=2)*e*e*e-2)+t},easeInQuint:function(e,t,n,r){return(n-t)*(e/=r)*e*e*e*e+t},easeOutQuint:function(e,t,n,r){return(n-t)*((e=e/r-1)*e*e*e*e+1)+t},easeInOutQuint:function(e,t,n,r){var s=n-t;return(e/=r/2)<1?s/2*e*e*e*e*e+t:s/2*((e-=2)*e*e*e*e+2)+t},easeInSine:function(e,t,n,r){var s=n-t;return-s*Math.cos(e/r*(Math.PI/2))+s+t},easeOutSine:function(e,t,n,r){return(n-t)*Math.sin(e/r*(Math.PI/2))+t},easeInOutSine:function(e,t,n,r){return-(n-t)/2*(Math.cos(Math.PI*e/r)-1)+t},easeInExpo:function(e,t,n,r){return 0==e?t:(n-t)*Math.pow(2,10*(e/r-1))+t},easeOutExpo:function(e,t,n,r){var s=n-t;return e==r?t+s:s*(1-Math.pow(2,-10*e/r))+t},easeInOutExpo:function(e,t,n,r){var s=n-t;return 0===e?t:e===r?t+s:(e/=r/2)<1?s/2*Math.pow(2,10*(e-1))+t:s/2*(2-Math.pow(2,-10*--e))+t},easeInCirc:function(e,t,n,r){return-(n-t)*(Math.sqrt(1-(e/=r)*e)-1)+t},easeOutCirc:function(e,t,n,r){return(n-t)*Math.sqrt(1-(e=e/r-1)*e)+t},easeInOutCirc:function(e,t,n,r){var s=n-t;return(e/=r/2)<1?-s/2*(Math.sqrt(1-e*e)-1)+t:s/2*(Math.sqrt(1-(e-=2)*e)+1)+t},easeInElastic:function(e,t,n,r){var s,i,a,o=n-t;return a=1.70158,0===e?t:1===(e/=r)?t+o:((i=0)||(i=.3*r),(s=o)<Math.abs(o)?(s=o,a=i/4):a=i/(2*Math.PI)*Math.asin(o/s),-s*Math.pow(2,10*(e-=1))*Math.sin((e*r-a)*(2*Math.PI)/i)+t)},easeOutElastic:function(e,t,n,r){var s,i,a,o=n-t;return a=1.70158,0===e?t:1===(e/=r)?t+o:((i=0)||(i=.3*r),(s=o)<Math.abs(o)?(s=o,a=i/4):a=i/(2*Math.PI)*Math.asin(o/s),s*Math.pow(2,-10*e)*Math.sin((e*r-a)*(2*Math.PI)/i)+o+t)},easeInOutElastic:function(e,t,n,r){var s,i,a,o=n-t;return a=1.70158,0===e?t:2==(e/=r/2)?t+o:((i=0)||(i=r*(.3*1.5)),(s=o)<Math.abs(o)?(s=o,a=i/4):a=i/(2*Math.PI)*Math.asin(o/s),e<1?s*Math.pow(2,10*(e-=1))*Math.sin((e*r-a)*(2*Math.PI)/i)*-.5+t:s*Math.pow(2,-10*(e-=1))*Math.sin((e*r-a)*(2*Math.PI)/i)*.5+o+t)},easeInBack:function(e,t,n,r,s){return void 0===s&&(s=1.70158),(n-t)*(e/=r)*e*((s+1)*e-s)+t},easeOutBack:function(e,t,n,r,s){return void 0===s&&(s=1.70158),(n-t)*((e=e/r-1)*e*((s+1)*e+s)+1)+t},easeInOutBack:function(e,t,n,r,s){var i=n-t;return void 0===s&&(s=1.70158),(e/=r/2)<1?i/2*(e*e*((1+(s*=1.525))*e-s))+t:i/2*((e-=2)*e*((1+(s*=1.525))*e+s)+2)+t},easeInBounce:function(e,t,n,r){var s=n-t;return s-XY.easeOutBounce(r-e,0,s,r)+t},easeOutBounce:function(e,t,n,r){var s=n-t;return(e/=r)<1/2.75?s*(7.5625*e*e)+t:e<2/2.75?s*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?s*(7.5625*(e-=2.25/2.75)*e+.9375)+t:s*(7.5625*(e-=2.625/2.75)*e+.984375)+t},easeInOutBounce:function(e,t,n,r){var s=n-t;return e<r/2?.5*XY.easeInBounce(2*e,0,s,r)+t:.5*XY.easeOutBounce(2*e-r,0,s,r)+.5*s+t}},KY=XY;function YY(e,t){return e+Math.random()*(t-e)}($Y=WY||(WY={}))[$Y.Circle=0]="Circle",$Y[$Y.Square=1]="Square",$Y[$Y.Strip=2]="Strip",(qY=GY||(GY={}))[qY.Positive=1]="Positive",qY[qY.Negative=-1]="Negative";const ZY=1e3/60;class JY{constructor(e,t,n,r){this.getOptions=t;const{colors:s,initialVelocityX:i,initialVelocityY:a}=this.getOptions();var o,l;this.context=e,this.x=n,this.y=r,this.w=YY(5,20),this.h=YY(5,20),this.radius=YY(5,10),this.vx="number"==typeof i?YY(-i,i):YY(i.min,i.max),this.vy="number"==typeof a?YY(-a,0):YY(a.min,a.max),this.shape=(o=0,l=2,Math.floor(o+Math.random()*(l-o+1))),this.angle=YY(0,360)*Math.PI/180,this.angularSpin=YY(-.2,.2),this.color=s[Math.floor(Math.random()*s.length)],this.rotateY=YY(0,1),this.rotationDirection=YY(0,1)?GY.Positive:GY.Negative}update(e){const{gravity:t,wind:n,friction:r,opacity:s,drawShape:i}=this.getOptions(),a=e/ZY;this.x+=this.vx*a,this.y+=this.vy*a,this.vy+=t*a,this.vx+=n*a,this.vx*=r**a,this.vy*=r**a,this.rotateY>=1&&this.rotationDirection===GY.Positive?this.rotationDirection=GY.Negative:this.rotateY<=-1&&this.rotationDirection===GY.Negative&&(this.rotationDirection=GY.Positive);const o=.1*this.rotationDirection*a;if(this.rotateY+=o,this.angle+=this.angularSpin,this.context.save(),this.context.translate(this.x,this.y),this.context.rotate(this.angle),this.context.scale(1,this.rotateY),this.context.rotate(this.angle),this.context.beginPath(),this.context.fillStyle=this.color,this.context.strokeStyle=this.color,this.context.globalAlpha=s,this.context.lineCap="round",this.context.lineWidth=2,i&&"function"==typeof i)i.call(this,this.context);else switch(this.shape){case WY.Circle:this.context.beginPath(),this.context.arc(0,0,this.radius,0,2*Math.PI),this.context.fill();break;case WY.Square:this.context.fillRect(-this.w/2,-this.h/2,this.w,this.h);break;case WY.Strip:this.context.fillRect(-this.w/6,-this.h/2,this.w/3,this.h)}this.context.closePath(),this.context.restore()}}class QY{constructor(e,t){this.x=0,this.y=0,this.w=0,this.h=0,this.lastNumberOfPieces=0,this.tweenProgress=0,this.tweenFrom=0,this.particles=[],this.particlesGenerated=0,this.removeParticleAt=e=>{this.particles.splice(e,1)},this.getParticle=()=>{const e=YY(this.x,this.w+this.x),t=YY(this.y,this.h+this.y);return new JY(this.context,this.getOptions,e,t)},this.animate=e=>{const{canvas:t,context:n,particlesGenerated:r,lastNumberOfPieces:s}=this,{run:i,recycle:a,numberOfPieces:o,debug:l,tweenFunction:c,tweenDuration:d}=this.getOptions();if(!i)return!1;const u=this.particles.length,h=a?u:r;if(h<o){s!==o&&(this.tweenProgress=0,this.tweenFrom=h,this.lastNumberOfPieces=o),this.tweenProgress=Math.min(d,Math.max(0,this.tweenProgress+e));const t=c(this.tweenProgress,this.tweenFrom,o,d),n=Math.round(t-h);for(let e=0;e<n;e++)this.particles.push(this.getParticle());this.particlesGenerated+=n}l&&(n.font="12px sans-serif",n.fillStyle="#333",n.textAlign="right",n.fillText(`Particles: ${u}`,t.width-10,t.height-20));for(let p=this.particles.length-1;p>=0;p--){const n=this.particles[p];n.update(e),(n.y>t.height||n.y<-100||n.x>t.width+100||n.x<-100)&&(a&&h<=o?this.particles[p]=this.getParticle():this.removeParticleAt(p))}return u>0||h<o},this.canvas=e;const n=this.canvas.getContext("2d");if(!n)throw new Error("Could not get canvas context");this.context=n,this.getOptions=t}}const eZ={width:"undefined"!=typeof window?window.innerWidth:300,height:"undefined"!=typeof window?window.innerHeight:200,numberOfPieces:200,friction:.99,wind:0,gravity:.1,initialVelocityX:4,initialVelocityY:10,colors:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722","#795548"],opacity:1,debug:!1,tweenFunction:KY.easeInOutQuad,tweenDuration:5e3,recycle:!0,run:!0};class tZ{constructor(e,t){this.lastFrameTime=0,this.setOptionsWithDefaults=e=>{const t={confettiSource:{x:0,y:0,w:this.canvas.width,h:0}};this._options={...t,...eZ,...e},Object.assign(this,e.confettiSource)},this.update=(e=0)=>{const{options:{run:t,onConfettiComplete:n,frameRate:r},canvas:s,context:i}=this,a=Math.min(e-this.lastFrameTime,50);r&&a<1e3/r?this.rafId=requestAnimationFrame(this.update):(this.lastFrameTime=e-(r?a%r:0),t&&(i.fillStyle="white",i.clearRect(0,0,s.width,s.height)),this.generator.animate(a)?this.rafId=requestAnimationFrame(this.update):(n&&"function"==typeof n&&this.generator.particlesGenerated>0&&n.call(this,this),this._options.run=!1))},this.reset=()=>{this.generator&&this.generator.particlesGenerated>0&&(this.generator.particlesGenerated=0,this.generator.particles=[],this.generator.lastNumberOfPieces=0)},this.stop=()=>{this.options={run:!1},this.rafId&&(cancelAnimationFrame(this.rafId),this.rafId=void 0)},this.canvas=e;const n=this.canvas.getContext("2d");if(!n)throw new Error("Could not get canvas context");this.context=n,this.generator=new QY(this.canvas,()=>this.options),this.options=t,this.update()}get options(){return this._options}set options(e){const t=this._options?.run,n=this._options?.recycle;this.setOptionsWithDefaults(e),this.generator&&(Object.assign(this.generator,this.options.confettiSource),"boolean"==typeof e.recycle&&e.recycle&&!1===n&&(this.generator.lastNumberOfPieces=this.generator.particles.length)),"boolean"==typeof e.run&&e.run&&!1===t&&this.update()}}const nZ=fn.createRef();class rZ extends fn.Component{constructor(e){super(e),this.canvas=fn.createRef(),this.canvas=e.canvasRef||nZ}componentDidMount(){if(this.canvas.current){const e=sZ(this.props)[0];this.confetti=new tZ(this.canvas.current,e)}}componentDidUpdate(){const e=sZ(this.props)[0];this.confetti&&(this.confetti.options=e)}componentWillUnmount(){this.confetti&&this.confetti.stop(),this.confetti=void 0}render(){const[e,t]=sZ(this.props),n={zIndex:2,position:"absolute",pointerEvents:"none",top:0,left:0,bottom:0,right:0,...t.style};return Ot.jsx("canvas",{width:e.width,height:e.height,ref:this.canvas,...t,style:n})}}function sZ(e){const t={},n={},r=[...Object.keys(eZ),"confettiSource","drawShape","onConfettiComplete","frameRate"],s=["canvasRef"];for(const i in e){const a=e[i];r.includes(i)?t[i]=a:s.includes(i)?s[i]=a:n[i]=a}return[t,n,{}]}rZ.defaultProps={...eZ},rZ.displayName="ReactConfetti";const iZ=fn.forwardRef((e,t)=>Ot.jsx(rZ,{canvasRef:t,...e}));function aZ({winner:e}){return Ot.jsx(Yn,{href:`/business/${e.id}`,children:Ot.jsx(Sn,{className:"border-2 border-yellow-400 hover:shadow-lg transition-all duration-300 cursor-pointer group overflow-hidden",children:Ot.jsxs("div",{className:"relative",children:[Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-yellow-400 via-orange-400 to-red-400 opacity-10 group-hover:opacity-20 transition-opacity"}),Ot.jsx(Mn,{className:"p-4 relative",children:Ot.jsxs("div",{className:"flex items-center gap-4",children:[Ot.jsxs("div",{className:"flex-shrink-0 relative",children:[Ot.jsx("div",{className:"absolute inset-0 bg-yellow-300 rounded-full blur-md animate-pulse"}),Ot.jsx("div",{className:"relative p-3 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full",children:Ot.jsx(Wr,{className:"h-6 w-6 text-white"})})]}),Ot.jsxs(ou,{className:"h-16 w-16 border-3 border-yellow-400 shadow-lg",children:[Ot.jsx(lu,{src:e.logoUrl}),Ot.jsx(cu,{className:"bg-gradient-to-br from-purple-500 to-pink-500 text-white text-xl font-bold",children:e.name.charAt(0)})]}),Ot.jsxs("div",{className:"flex-1 min-w-0",children:[Ot.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[Ot.jsx(Tn,{className:"bg-gradient-to-r from-yellow-400 to-orange-500 text-white",children:"Winner"}),Ot.jsx("span",{className:"text-sm text-muted-foreground",children:Fo(new Date(e.winnerMonth),"MMMM yyyy")})]}),Ot.jsx("h4",{className:"font-bold text-lg group-hover:text-purple-600 transition-colors truncate",children:e.name}),Ot.jsx("p",{className:"text-sm text-muted-foreground truncate",children:e.category})]}),Ot.jsxs("div",{className:"flex-shrink-0 text-right",children:[Ot.jsxs("div",{className:"flex items-center gap-1 text-purple-600",children:[Ot.jsx(Zn,{className:"h-4 w-4 fill-current"}),Ot.jsx("span",{className:"text-lg font-bold",children:e.voteCount.toLocaleString()})]}),Ot.jsx("p",{className:"text-xs text-muted-foreground",children:"votes"})]})]})})]})})})}function oZ(){const{data:e=[]}=za({queryKey:["/api/spotlight/past-winners"]});return Ot.jsxs("div",{className:"premium-page-wrapper premium-surface min-h-screen relative",style:{backgroundImage:"url('/backgrounds/colorful-painting-with-black-background-white-blue-background_380557-143.avif')",backgroundSize:"cover",backgroundPosition:"center",backgroundAttachment:"fixed"},children:[Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/88 via-purple-50/85 to-pink-50/85 backdrop-blur-sm"}),Ot.jsxs("div",{className:"relative z-10",children:[Ot.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-r from-purple-600 via-pink-600 to-red-600 text-white",children:[Ot.jsx("div",{className:"absolute inset-0 opacity-20",children:[...Array(50)].map((e,t)=>Ot.jsx(wo.div,{className:"absolute w-2 h-2 bg-white rounded-full",style:{left:100*Math.random()+"%",top:100*Math.random()+"%"},animate:{opacity:[.3,1,.3],scale:[1,1.5,1]},transition:{duration:3+2*Math.random(),repeat:1/0,delay:2*Math.random()}},t))}),Ot.jsx("div",{className:"container mx-auto px-4 py-20 relative z-10",children:Ot.jsxs(wo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center",children:[Ot.jsxs("div",{className:"flex items-center justify-center gap-4 mb-6",children:[Ot.jsx(Jn,{className:"h-16 w-16"}),Ot.jsx("h1",{className:"text-6xl font-bold",children:"Monthly Spotlight"}),Ot.jsx(Wr,{className:"h-16 w-16"})]}),Ot.jsx("p",{className:"text-2xl opacity-90 max-w-3xl mx-auto mb-8",children:"Vote for your favorite Florida businesses and help them win the spotlight!"}),Ot.jsxs("div",{className:"flex flex-wrap justify-center gap-6 max-w-4xl mx-auto",children:[Ot.jsx(Sn,{className:"bg-white/10 backdrop-blur-sm border-white/20",children:Ot.jsxs(Mn,{className:"p-6 flex items-center gap-3",children:[Ot.jsx(Zn,{className:"h-8 w-8"}),Ot.jsxs("div",{className:"text-left",children:[Ot.jsx("div",{className:"text-3xl font-bold",children:"5 Votes"}),Ot.jsx("div",{className:"text-sm opacity-80",children:"per user/month"})]})]})}),Ot.jsx(Sn,{className:"bg-white/10 backdrop-blur-sm border-white/20",children:Ot.jsxs(Mn,{className:"p-6 flex items-center gap-3",children:[Ot.jsx(Wr,{className:"h-8 w-8"}),Ot.jsxs("div",{className:"text-left",children:[Ot.jsx("div",{className:"text-3xl font-bold",children:"1 Winner"}),Ot.jsx("div",{className:"text-sm opacity-80",children:"every month"})]})]})}),Ot.jsx(Sn,{className:"bg-white/10 backdrop-blur-sm border-white/20",children:Ot.jsxs(Mn,{className:"p-6 flex items-center gap-3",children:[Ot.jsx(An,{className:"h-8 w-8"}),Ot.jsxs("div",{className:"text-left",children:[Ot.jsx("div",{className:"text-3xl font-bold",children:"Featured"}),Ot.jsx("div",{className:"text-sm opacity-80",children:"on homepage"})]})]})})]})]})})]}),Ot.jsxs("div",{className:"container mx-auto px-4 py-12 space-y-12",children:[Ot.jsxs("section",{children:[Ot.jsxs("h2",{className:"text-3xl font-bold mb-8 flex items-center gap-3 text-white",style:{textShadow:"0 2px 8px rgba(0,0,0,0.4)"},children:[Ot.jsx(Jn,{className:"h-8 w-8 text-white"}),"Cast Your Votes"]}),Ot.jsx(du,{variant:"dedicated"})]}),Ot.jsxs("section",{children:[Ot.jsxs("h2",{className:"text-3xl font-bold mb-8 flex items-center gap-3 text-white",style:{textShadow:"0 2px 8px rgba(0,0,0,0.4)"},children:[Ot.jsx(Dn,{className:"h-8 w-8 text-white"}),"Trending This Week"]}),Ot.jsx(uu,{limit:6,variant:"full"})]}),e.length>0&&Ot.jsxs("section",{children:[Ot.jsxs("h2",{className:"text-3xl font-bold mb-8 flex items-center gap-3 text-white",style:{textShadow:"0 2px 8px rgba(0,0,0,0.4)"},children:[Ot.jsx(Wr,{className:"h-8 w-8 text-white"}),"Past Winners"]}),Ot.jsx("div",{className:"space-y-4",children:e.map(e=>Ot.jsx(aZ,{winner:e},e.id))})]})]})]})]})}function lZ({variant:e="full"}){const{data:t=[],isLoading:n}=za({queryKey:["/api/leaderboard/businesses"]}),{data:r=[],isLoading:s}=za({queryKey:["/api/leaderboard/voters"]}),{data:i=[],isLoading:a}=za({queryKey:["/api/leaderboard/reviewers"]}),{data:o=[],isLoading:l}=za({queryKey:["/api/leaderboard/buyers"]}),c=e=>{const t={1:{icon:Wr,color:"from-yellow-400 to-orange-500",text:"1st Place"},2:{icon:Jn,color:"from-gray-300 to-gray-400",text:"2nd Place"},3:{icon:sr,color:"from-orange-600 to-orange-700",text:"3rd Place"}}[e];if(!t)return null;const n=t.icon;return Ot.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-1 rounded-full bg-gradient-to-r ${t.color} text-white text-xs font-bold shadow-lg`,children:[Ot.jsx(n,{className:"h-4 w-4"}),t.text]})},d=e=>{if(!e.previousRank)return null;const t=e.previousRank-e.rank;return 0===t?Ot.jsx(Tn,{variant:"secondary",className:"ml-2",children:""}):Ot.jsxs(Tn,{variant:t>0?"default":"destructive",className:"ml-2",children:[t>0?"":""," ",Math.abs(t)]})},u=(e,t,n,r,s)=>t?Ot.jsx("div",{className:"space-y-3",children:[...Array(5)].map((e,t)=>Ot.jsx("div",{className:"h-20 bg-muted animate-pulse rounded-lg"},t))}):0===e.length?Ot.jsx("div",{className:"text-center py-8 text-muted-foreground",children:Ot.jsx("p",{children:"No data available yet"})}):Ot.jsx("div",{className:"space-y-3",children:e.map((e,t)=>Ot.jsx(wo.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.05*t},children:Ot.jsx(Sn,{className:"overflow-hidden transition-all duration-300 hover:shadow-lg "+(e.rank<=3?"border-2 border-yellow-200 bg-gradient-to-r from-yellow-50 to-orange-50":""),children:Ot.jsxs(Mn,{className:"p-4",children:[Ot.jsxs("div",{className:"flex items-center gap-4",children:[Ot.jsx("div",{className:"flex-shrink-0 w-12 text-center",children:e.rank<=3?Ot.jsxs("div",{className:"text-3xl font-bold "+(1===e.rank?"text-yellow-500":2===e.rank?"text-gray-400":"text-orange-600"),children:["#",e.rank]}):Ot.jsxs("div",{className:"text-2xl font-bold text-muted-foreground",children:["#",e.rank]})}),Ot.jsxs(ou,{className:"h-14 w-14 border-2 border-white shadow-md",children:[Ot.jsx(lu,{src:e.avatarUrl}),Ot.jsx(cu,{className:"bg-gradient-to-br from-purple-500 to-pink-500 text-white font-bold text-lg",children:e.name.charAt(0)})]}),Ot.jsxs("div",{className:"flex-1 min-w-0",children:[Ot.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[Ot.jsx("h4",{className:"font-bold truncate",children:e.name}),d(e)]}),e.badge&&Ot.jsx(Tn,{variant:"outline",className:"text-xs",children:e.badge}),Ot.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm text-muted-foreground",children:[Ot.jsxs("span",{className:"flex items-center gap-1",children:[n,Ot.jsx("span",{className:"font-semibold",children:e.stats.primary}),Ot.jsx("span",{children:r})]}),void 0!==e.stats.secondary&&s&&Ot.jsxs("span",{className:"flex items-center gap-1",children:[Ot.jsx(In,{className:"h-3 w-3 fill-yellow-400 text-yellow-400"}),Ot.jsx("span",{className:"font-semibold",children:e.stats.secondary}),Ot.jsx("span",{children:s})]})]})]}),Ot.jsx("div",{className:"flex-shrink-0",children:Ot.jsxs("div",{className:"flex flex-col items-end",children:[Ot.jsx("div",{className:"text-2xl font-bold text-purple-600",children:e.score.toLocaleString()}),Ot.jsx("div",{className:"text-xs text-muted-foreground",children:"points"})]})})]}),e.rank<=3&&Ot.jsx("div",{className:"mt-3 pt-3 border-t",children:c(e.rank)})]})})},e.id))});return"compact"===e?Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{children:[Ot.jsxs(zr,{className:"flex items-center gap-2",children:[Ot.jsx(Jn,{className:"h-5 w-5 text-yellow-500"}),"Top Businesses"]}),Ot.jsx(Ur,{children:"Leading the community this month"})]}),Ot.jsx(Mn,{children:u(t.slice(0,5),n,Ot.jsx(Dn,{className:"h-3 w-3"}),"engagement")})]}):Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{children:[Ot.jsxs(zr,{className:"flex items-center gap-3 text-2xl",children:[Ot.jsx(Jn,{className:"h-7 w-7 text-yellow-500"}),"Community Leaderboards"]}),Ot.jsx(Ur,{className:"text-base",children:"Celebrating our most engaged community members and businesses"})]}),Ot.jsx(Mn,{children:Ot.jsxs(qs,{defaultValue:"businesses",className:"space-y-6",children:[Ot.jsxs(Xs,{className:"grid w-full grid-cols-4",children:[Ot.jsxs(Ks,{value:"businesses",className:"flex items-center gap-2",children:[Ot.jsx(Dn,{className:"h-4 w-4"}),Ot.jsx("span",{className:"hidden sm:inline",children:"Businesses"})]}),Ot.jsxs(Ks,{value:"voters",className:"flex items-center gap-2",children:[Ot.jsx(Zn,{className:"h-4 w-4"}),Ot.jsx("span",{className:"hidden sm:inline",children:"Voters"})]}),Ot.jsxs(Ks,{value:"reviewers",className:"flex items-center gap-2",children:[Ot.jsx(_i,{className:"h-4 w-4"}),Ot.jsx("span",{className:"hidden sm:inline",children:"Reviewers"})]}),Ot.jsxs(Ks,{value:"buyers",className:"flex items-center gap-2",children:[Ot.jsx(tr,{className:"h-4 w-4"}),Ot.jsx("span",{className:"hidden sm:inline",children:"Buyers"})]})]}),Ot.jsxs(Ys,{value:"businesses",className:"space-y-4",children:[Ot.jsx("div",{className:"p-4 rounded-lg bg-gradient-to-r from-purple-50 to-pink-50 border border-purple-200",children:Ot.jsxs("div",{className:"flex items-center gap-2 text-purple-900",children:[Ot.jsx(Pn,{className:"h-5 w-5"}),Ot.jsx("p",{className:"text-sm font-semibold",children:"Based on total engagement, reviews, followers, and community activity"})]})}),u(t,n,Ot.jsx(Dn,{className:"h-3 w-3"}),"engagement","avg rating")]}),Ot.jsxs(Ys,{value:"voters",className:"space-y-4",children:[Ot.jsx("div",{className:"p-4 rounded-lg bg-gradient-to-r from-red-50 to-pink-50 border border-red-200",children:Ot.jsxs("div",{className:"flex items-center gap-2 text-red-900",children:[Ot.jsx(Zn,{className:"h-5 w-5"}),Ot.jsx("p",{className:"text-sm font-semibold",children:"Most active voters in spotlight competitions"})]})}),u(r,s,Ot.jsx(Zn,{className:"h-3 w-3 fill-current"}),"votes cast")]}),Ot.jsxs(Ys,{value:"reviewers",className:"space-y-4",children:[Ot.jsx("div",{className:"p-4 rounded-lg bg-gradient-to-r from-blue-50 to-cyan-50 border border-blue-200",children:Ot.jsxs("div",{className:"flex items-center gap-2 text-blue-900",children:[Ot.jsx(_i,{className:"h-5 w-5"}),Ot.jsx("p",{className:"text-sm font-semibold",children:"Most helpful and detailed reviewers"})]})}),u(i,a,Ot.jsx(_i,{className:"h-3 w-3"}),"reviews","helpful votes")]}),Ot.jsxs(Ys,{value:"buyers",className:"space-y-4",children:[Ot.jsx("div",{className:"p-4 rounded-lg bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200",children:Ot.jsxs("div",{className:"flex items-center gap-2 text-green-900",children:[Ot.jsx(tr,{className:"h-5 w-5"}),Ot.jsx("p",{className:"text-sm font-semibold",children:"Supporting local businesses through purchases"})]})}),u(o,l,Ot.jsx(tr,{className:"h-3 w-3"}),"orders","total spent")]})]})})]})}const cZ=hn.forwardRef(({className:e,imageSrc:t,title:n,description:r,inputPlaceholder:s="Email address",buttonText:i,onButtonClick:a,...o},l)=>{const[c,d]=hn.useState(""),u={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{type:"spring",stiffness:100,damping:12}}};return Ot.jsxs("div",{ref:l,className:bn("group relative w-full overflow-hidden rounded-2xl border border-white/10 bg-card text-card-foreground shadow-[0_8px_32px_rgba(0,0,0,0.12),0_2px_8px_rgba(0,0,0,0.08)] hover:shadow-[0_12px_48px_rgba(0,0,0,0.18),0_4px_16px_rgba(0,0,0,0.12),0_0_80px_rgba(255,255,255,0.05)] transition-all duration-500 hover:border-white/20",e),...o,children:[Ot.jsx("img",{src:t,alt:"Background",className:"absolute inset-0 h-full w-full object-cover scale-105 group-hover:scale-110 transition-transform duration-700","aria-hidden":"true"}),Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-black/80 via-black/75 to-black/70"}),Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-black/30 to-transparent"}),Ot.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_50%_50%,transparent_0%,rgba(0,0,0,0.5)_100%)]"}),Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/5 to-transparent opacity-0 hover:opacity-100 transition-opacity duration-700"}),Ot.jsxs(wo.div,{className:"relative z-10 grid h-full grid-cols-1 items-center gap-10 p-8 md:grid-cols-2 md:gap-12 md:p-12 lg:gap-16 lg:p-20",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.2,delayChildren:.1}}},initial:"hidden",animate:"visible",children:[Ot.jsxs("div",{className:"flex flex-col items-start text-left text-white",children:[Ot.jsx(wo.h2,{className:"text-4xl font-extrabold tracking-tight md:text-5xl lg:text-6xl leading-[1.1] text-balance text-white drop-shadow-[0_2px_10px_rgba(0,0,0,0.8)]",style:{textShadow:"0 2px 12px rgba(0,0,0,0.9), 0 4px 24px rgba(0,0,0,0.6), 0 1px 3px rgba(0,0,0,1)"},variants:u,children:n}),Ot.jsx(wo.p,{className:"mt-6 max-w-xl text-lg md:text-xl leading-relaxed text-white font-semibold drop-shadow-[0_2px_8px_rgba(0,0,0,0.8)]",style:{textShadow:"0 2px 8px rgba(0,0,0,0.9), 0 1px 3px rgba(0,0,0,1)"},variants:u,children:r})]}),Ot.jsx(wo.div,{className:"flex w-full max-w-md flex-col items-center justify-center md:items-start md:justify-start",variants:u,children:Ot.jsxs("form",{onSubmit:e=>{e.preventDefault(),a&&a(c)},className:"flex w-full flex-col gap-4 sm:flex-row sm:items-center",children:[Ot.jsx(zn,{type:"email",placeholder:s,value:c,onChange:e=>d(e.target.value),className:"h-14 flex-grow border-2 border-white/30 bg-white/15 backdrop-blur-xl text-white placeholder:text-white/70 focus:ring-2 focus:ring-[#d4af37]/60 focus:border-[#d4af37]/50 focus:ring-offset-0 transition-all duration-300 shadow-[0_4px_16px_rgba(0,0,0,0.2),inset_0_1px_0_rgba(255,255,255,0.2)] hover:bg-white/20 hover:border-white/40 text-base font-semibold rounded-xl","aria-label":s,required:!0}),Ot.jsxs(Ln,{type:"submit",size:"lg",className:"h-14 px-8 bg-gradient-to-br from-[#008B8B] via-[#00A8A8] to-[#006B6B] text-white font-bold tracking-wide border-2 border-[#d4af37]/50 shadow-[0_4px_20px_rgba(0,139,139,0.5),0_8px_40px_rgba(0,139,139,0.3),inset_0_1px_0_rgba(255,255,255,0.3)] hover:shadow-[0_6px_30px_rgba(0,139,139,0.6),0_12px_50px_rgba(0,139,139,0.4),0_0_40px_rgba(212,175,55,0.4)] hover:border-[#d4af37]/70 hover:-translate-y-0.5 transition-all duration-300 rounded-xl relative before:absolute before:inset-0 before:bg-gradient-to-r before:from-[#d4af37]/20 before:via-transparent before:to-[#d4af37]/20 before:opacity-0 hover:before:opacity-100 before:transition-opacity before:duration-300 before:rounded-xl",children:[i,Ot.jsx(mr,{className:"ml-2 h-5 w-5"})]})]})})]})]})});cZ.displayName="CtaCard";const dZ="0, 139, 139",uZ="212, 175, 55",hZ="240s",pZ=200,mZ=12;function fZ(){const e="translate3d(0px, 0px, 0)",t=Array.from({length:mZ},(e,t)=>{const n=t*(90/(mZ/2)),r={transform:t%2==0?`rotateY(${n}deg)`:`rotateX(${n}deg)`};return Ot.jsx("div",{className:"wireframe-line",style:r,"aria-hidden":"true"},`ring-${t}`)}),n={width:"400px",height:"400px",backgroundImage:`radial-gradient(circle, rgba(${uZ}, 0.45) 0%, transparent 70%)`,filter:`blur(${pZ}px)`,boxShadow:`0 0 ${pZ/2}px 30px rgba(${uZ}, 0.2), 0 0 ${pZ}px 50px rgba(${dZ}, 0.15)`},r={transform:"translate3d(0px, 0px, 0)",backgroundImage:"repeating-linear-gradient(to right, rgba(10,10,10,0.9) 1px, transparent 1px), repeating-linear-gradient(to bottom, rgba(10,10,10,0.9) 1px, transparent 1px)",backgroundSize:"40px 40px",opacity:.15},s={transform:"translate3d(0px, 0px, 0)",backgroundImage:`radial-gradient(circle at 50% 50%, rgba(${dZ}, 0.15) 0%, transparent 50%)`,filter:"blur(150px)",opacity:.6,mixBlendMode:"screen"},i={transform:e,backgroundImage:`radial-gradient(at 50% 50%, rgba(${dZ}, 0.08) 0%, #030712 90%)`},a={transform:e,backgroundImage:`radial-gradient(circle at 50% 50%, rgba(${dZ}, 0.35) 0%, transparent 50%), radial-gradient(circle at 10% 10%, rgba(${uZ}, 0.25) 0%, transparent 30%)`,mixBlendMode:"screen",filter:"blur(100px)",opacity:.95};return Ot.jsxs("div",{className:"relative h-screen w-full overflow-hidden bg-gray-950 flex items-center justify-center font-sans",children:[Ot.jsx("div",{className:"absolute inset-0 panning-grid",style:r}),Ot.jsx("div",{className:"absolute inset-0",style:s}),Ot.jsx("div",{className:"absolute inset-0",style:i,children:Ot.jsx("div",{className:"core-light absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 rounded-full pointer-events-none",style:n})}),Ot.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 sphere-container z-40 pointer-events-none",children:Ot.jsx("div",{className:"w-[700px] h-[700px] sphere-rotation",style:{transform:"rotateX(0deg) rotateY(0deg)",transformOrigin:"center center",animationDuration:hZ},children:t})}),Ot.jsx("div",{className:"absolute inset-0",style:a}),Ot.jsx("div",{className:"absolute inset-0 pointer-events-none noise-layer",style:{backgroundImage:'url("https://framerusercontent.com/images/g0QcWrxr87K0ufOxIUFBakwYA8.png")',backgroundSize:"200px",opacity:.05,mixBlendMode:"overlay"}}),Ot.jsxs("div",{className:"relative z-20 text-center max-w-5xl mx-auto p-8 backdrop-blur-sm rounded-xl content-foreground",children:[Ot.jsx("h1",{className:"hero-title",children:Ot.jsx("span",{className:"hero-gradient",children:"Where Visionaries Connect"})}),Ot.jsx("p",{className:"hero-sub",children:"Join Florida's most exclusive network of entrepreneurs, content creators, and industry leaders. Build partnerships that scale, share insights that matter, and elevate your brand among the state's top innovators."}),Ot.jsxs("div",{className:"hero-cta",children:[Ot.jsx("button",{className:"btn-primary",children:"Join the Elite"}),Ot.jsx("button",{className:"btn-ghost",children:"Explore the Network"})]})]}),Ot.jsx("div",{className:"absolute inset-0 pointer-events-none vignette-overlay"})]})}function gZ(){return Ot.jsxs("div",{className:"min-h-screen relative",children:[Ot.jsx(Gr,{youtubeUrl:"https://youtu.be/5xnaoI0cXjs",overlayOpacity:.35}),Ot.jsxs("div",{className:"relative z-10",children:[Ot.jsx(fZ,{}),Ot.jsx("div",{className:"container mx-auto px-4 py-8",children:Ot.jsx(cZ,{title:"Florida Local Community",description:"Join Florida's most vibrant community of local businesses and supporters",buttonText:"Join Community",inputPlaceholder:"Enter your email",imageSrc:"https://images.unsplash.com/photo-1505142468610-359e7d316be0?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2574&q=80",onButtonClick:e=>{}})}),Ot.jsxs("section",{className:"relative py-16",children:[Ot.jsx("div",{className:"absolute inset-0 glass-section-overlay"}),Ot.jsxs("div",{className:"container mx-auto px-4 relative z-10",children:[Ot.jsx("h2",{className:"text-3xl md:text-5xl font-bold mb-12 text-center text-white",style:{textShadow:"0 2px 8px rgba(0,0,0,0.4)"},children:"Community Impact"}),Ot.jsxs("div",{className:"grid md:grid-cols-4 gap-6 max-w-7xl mx-auto",children:[Ot.jsx(wo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:Ot.jsx(qr,{className:"holo-teal",intensity:"medium",children:Ot.jsxs("div",{className:"holo-content p-6 text-center",children:[Ot.jsx("div",{className:"inline-flex p-4 rounded-full metallic-teal mb-4 shine-sweep-hover",children:Ot.jsx(On,{className:"h-8 w-8 text-white"})}),Ot.jsx("div",{className:"text-4xl font-bold text-white mb-2",style:{textShadow:"0 2px 4px rgba(0,0,0,0.3)"},children:"2,847"}),Ot.jsx("div",{className:"text-sm text-white",style:{textShadow:"0 1px 2px rgba(0,0,0,0.2)"},children:"Active Businesses"})]})})}),Ot.jsx(wo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:Ot.jsx(qr,{className:"holo-gold",intensity:"medium",children:Ot.jsxs("div",{className:"holo-content p-6 text-center",children:[Ot.jsx("div",{className:"inline-flex p-4 rounded-full metallic-gold mb-4 shine-sweep-hover",children:Ot.jsx(In,{className:"h-8 w-8 text-white"})}),Ot.jsx("div",{className:"text-4xl font-bold text-white mb-2",style:{textShadow:"0 2px 4px rgba(0,0,0,0.3)"},children:"18,392"}),Ot.jsx("div",{className:"text-sm text-white",style:{textShadow:"0 1px 2px rgba(0,0,0,0.2)"},children:"Reviews Posted"})]})})}),Ot.jsx(wo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:Ot.jsx(qr,{className:"holo-bronze",intensity:"medium",children:Ot.jsxs("div",{className:"holo-content p-6 text-center",children:[Ot.jsx("div",{className:"inline-flex p-4 rounded-full metallic-bronze mb-4 shine-sweep-hover",children:Ot.jsx(tr,{className:"h-8 w-8 text-white"})}),Ot.jsx("div",{className:"text-4xl font-bold text-white mb-2",style:{textShadow:"0 2px 4px rgba(0,0,0,0.3)"},children:"45,621"}),Ot.jsx("div",{className:"text-sm text-white",style:{textShadow:"0 1px 2px rgba(0,0,0,0.2)"},children:"Orders Completed"})]})})}),Ot.jsx(wo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:Ot.jsx(qr,{className:"holo-teal",intensity:"medium",children:Ot.jsxs("div",{className:"holo-content p-6 text-center",children:[Ot.jsx("div",{className:"inline-flex p-4 rounded-full metallic-teal mb-4 shine-sweep-hover",children:Ot.jsx(Zn,{className:"h-8 w-8 text-white"})}),Ot.jsx("div",{className:"text-4xl font-bold text-white mb-2",style:{textShadow:"0 2px 4px rgba(0,0,0,0.3)"},children:"156K"}),Ot.jsx("div",{className:"text-sm text-white",style:{textShadow:"0 1px 2px rgba(0,0,0,0.2)"},children:"Community Votes"})]})})})]})]})]}),Ot.jsxs("section",{className:"relative py-16",children:[Ot.jsx("div",{className:"absolute inset-0 glass-tint-light"}),Ot.jsxs("div",{className:"container mx-auto px-4 relative z-10",children:[Ot.jsx("h2",{className:"text-3xl md:text-5xl font-bold mb-12 text-center text-white",style:{textShadow:"0 2px 8px rgba(0,0,0,0.4)"},children:"Get Involved"}),Ot.jsxs("div",{className:"grid md:grid-cols-3 gap-8 max-w-6xl mx-auto",children:[Ot.jsx(qr,{className:"holo-teal",intensity:"medium",children:Ot.jsxs("div",{className:"holo-content p-8",children:[Ot.jsx("div",{className:"inline-flex p-4 rounded-full metallic-teal mb-6 shine-sweep-hover",children:Ot.jsx(Jn,{className:"h-8 w-8 text-white"})}),Ot.jsx("h3",{className:"text-2xl font-bold mb-4 text-white",style:{textShadow:"0 2px 4px rgba(0,0,0,0.3)"},children:"Vote for Businesses"}),Ot.jsx("p",{className:"text-white mb-6 leading-relaxed",style:{textShadow:"0 1px 2px rgba(0,0,0,0.2)"},children:"Cast your vote for the monthly spotlight and support your favorites"}),Ot.jsx(Yn,{href:"/spotlight/voting",children:Ot.jsxs(Ln,{className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white shadow-lg",children:[Ot.jsx(Jn,{className:"h-4 w-4 mr-2"}),"Start Voting"]})})]})}),Ot.jsx(qr,{className:"holo-gold",intensity:"medium",children:Ot.jsxs("div",{className:"holo-content p-8",children:[Ot.jsx("div",{className:"inline-flex p-4 rounded-full metallic-gold mb-6 shine-sweep-hover",children:Ot.jsx(_i,{className:"h-8 w-8 text-white"})}),Ot.jsx("h3",{className:"text-2xl font-bold mb-4 text-white",style:{textShadow:"0 2px 4px rgba(0,0,0,0.3)"},children:"Write Reviews"}),Ot.jsx("p",{className:"text-white mb-6 leading-relaxed",style:{textShadow:"0 1px 2px rgba(0,0,0,0.2)"},children:"Share your experiences and help others discover great businesses"}),Ot.jsx(Yn,{href:"/marketplace",children:Ot.jsxs(Ln,{className:"w-full bg-gradient-to-r from-blue-500 to-cyan-500 hover:from-blue-600 hover:to-cyan-600 text-white shadow-lg",children:[Ot.jsx(In,{className:"h-4 w-4 mr-2"}),"Browse Businesses"]})})]})}),Ot.jsx(qr,{className:"holo-bronze",intensity:"medium",children:Ot.jsxs("div",{className:"holo-content p-8",children:[Ot.jsx("div",{className:"inline-flex p-4 rounded-full metallic-bronze mb-6 shine-sweep-hover",children:Ot.jsx(tr,{className:"h-8 w-8 text-white"})}),Ot.jsx("h3",{className:"text-2xl font-bold mb-4 text-white",style:{textShadow:"0 2px 4px rgba(0,0,0,0.3)"},children:"Shop Local"}),Ot.jsx("p",{className:"text-white mb-6 leading-relaxed",style:{textShadow:"0 1px 2px rgba(0,0,0,0.2)"},children:"Support Florida businesses by shopping in the marketplace"}),Ot.jsx(Yn,{href:"/marketplace",children:Ot.jsxs(Ln,{className:"w-full bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white shadow-lg",children:[Ot.jsx(tr,{className:"h-4 w-4 mr-2"}),"Shop Now"]})})]})})]})]})]}),Ot.jsxs("section",{className:"relative py-16",children:[Ot.jsx("div",{className:"absolute inset-0 backdrop-visible"}),Ot.jsxs("div",{className:"container mx-auto px-4 relative z-10",children:[Ot.jsxs("div",{className:"flex items-center justify-between mb-12 flex-wrap gap-4",children:[Ot.jsxs("h2",{className:"text-3xl md:text-5xl font-bold flex items-center gap-3 text-white",style:{textShadow:"0 2px 8px rgba(0,0,0,0.4)"},children:[Ot.jsx(Dn,{className:"h-8 w-8 text-white"}),"Trending Businesses"]}),Ot.jsxs(Tn,{className:"bg-gradient-to-r from-green-500 to-emerald-500 text-white px-4 py-2 text-sm",children:[Ot.jsx(Pn,{className:"h-4 w-4 mr-1"}),"Live Updates"]})]}),Ot.jsx(uu,{limit:6,variant:"full"})]})]}),Ot.jsxs("section",{className:"relative py-16",children:[Ot.jsx("div",{className:"absolute inset-0 glass-section-overlay"}),Ot.jsx("div",{className:"container mx-auto px-4 relative z-10",children:Ot.jsx(lZ,{variant:"full"})})]})]})]})}const xZ={Bronze:Jn,Silver:sr,Gold:Wr,Platinum:An},vZ={Bronze:"bg-gradient-to-br from-orange-500/20 to-orange-700/20 border-orange-500",Silver:"bg-gradient-to-br from-slate-400/20 to-slate-600/20 border-slate-500",Gold:"bg-gradient-to-br from-yellow-400/20 to-yellow-600/20 border-yellow-500",Platinum:"bg-gradient-to-br from-purple-500/20 to-pink-600/20 border-purple-500"};function yZ(){const[e,t]=hn.useState(!1),[n,r]=hn.useState({width:0,height:0});hn.useEffect(()=>{r({width:window.innerWidth,height:window.innerHeight});const e=()=>{r({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const{data:s,isLoading:i}=za({queryKey:["/api/loyalty/account"]}),{data:a,isLoading:o}=za({queryKey:["/api/loyalty/tier/progress"],enabled:!!s}),{data:l,isLoading:c}=za({queryKey:["/api/loyalty/transactions"],enabled:!!s}),{data:d,isLoading:u}=za({queryKey:["/api/loyalty/transactions/summary"],enabled:!!s});hn.useEffect(()=>{100===a?.progressPercentage&&(t(!0),setTimeout(()=>t(!1),5e3))},[a?.progressPercentage]);if(i||o)return Ot.jsx("div",{className:"space-y-6",children:Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{children:[Ot.jsx("div",{className:"h-8 bg-slate-200 rounded animate-pulse w-1/3"}),Ot.jsx("div",{className:"h-4 bg-slate-200 rounded animate-pulse w-1/2 mt-2"})]}),Ot.jsx(Mn,{children:Ot.jsx("div",{className:"h-32 bg-slate-200 rounded animate-pulse"})})]})});if(!s)return Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{children:[Ot.jsx(zr,{children:"Join Our Loyalty Program"}),Ot.jsx(Ur,{children:"Earn points with every purchase and unlock exclusive rewards"})]}),Ot.jsx(Mn,{children:Ot.jsx(Ln,{children:"Enroll Now"})})]});const h=xZ[s.tierName]||Jn,p=vZ[s.tierName];return Ot.jsxs("div",{className:"space-y-6",children:[e&&Ot.jsx(iZ,{width:n.width,height:n.height,recycle:!1,numberOfPieces:500}),Ot.jsx(wo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:Ot.jsxs(Sn,{className:`${p} border-2 overflow-hidden`,children:[Ot.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 opacity-10",children:Ot.jsx(h,{className:"w-full h-full"})}),Ot.jsx(Lr,{className:"relative z-10",children:Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{children:[Ot.jsxs(zr,{className:"text-3xl font-bold flex items-center gap-3",children:[Ot.jsx(h,{className:"h-8 w-8"}),s.tierName," Member"]}),Ot.jsxs(Ur,{className:"text-base mt-2",children:["Member since ",new Date(s.createdAt).toLocaleDateString()]})]}),Ot.jsxs(Tn,{variant:"secondary",className:"text-lg px-4 py-2",children:["Level ",s.tierLevel]})]})}),Ot.jsxs(Mn,{className:"relative z-10 space-y-6",children:[Ot.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[Ot.jsxs("div",{className:"bg-white/80 dark:bg-slate-900/80 rounded-lg p-4",children:[Ot.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Current Points"}),Ot.jsx("div",{className:"text-3xl font-bold bg-gradient-to-r from-emerald-600 to-teal-600 bg-clip-text text-transparent",children:s.currentPoints.toLocaleString()})]}),Ot.jsxs("div",{className:"bg-white/80 dark:bg-slate-900/80 rounded-lg p-4",children:[Ot.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Lifetime Points"}),Ot.jsx("div",{className:"text-3xl font-bold",children:s.lifetimePoints.toLocaleString()})]}),Ot.jsxs("div",{className:"bg-white/80 dark:bg-slate-900/80 rounded-lg p-4",children:[Ot.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Current Streak"}),Ot.jsxs("div",{className:"text-3xl font-bold flex items-center gap-2",children:[" ",s.streakDays," days"]})]})]}),a&&a.nextTier&&Ot.jsxs("div",{className:"bg-white/80 dark:bg-slate-900/80 rounded-lg p-4",children:[Ot.jsxs("div",{className:"flex items-center justify-between mb-2",children:[Ot.jsxs("div",{className:"text-sm font-medium",children:["Progress to ",a.nextTier.name]}),Ot.jsxs("div",{className:"text-sm text-muted-foreground",children:[a.pointsToNextTier.toLocaleString()," points to go"]})]}),Ot.jsx(Vr,{value:a.progressPercentage,className:"h-3"}),Ot.jsxs("div",{className:"mt-2 text-xs text-muted-foreground",children:[a.progressPercentage.toFixed(1),"% complete"]})]}),a&&!a.nextTier&&Ot.jsxs("div",{className:"bg-white/80 dark:bg-slate-900/80 rounded-lg p-4 text-center",children:[Ot.jsx(Wr,{className:"h-12 w-12 mx-auto mb-2 text-purple-600"}),Ot.jsx("div",{className:"text-lg font-bold",children:"Maximum Tier Achieved!"}),Ot.jsx("div",{className:"text-sm text-muted-foreground",children:"You're at the highest tier. Keep earning points for rewards!"})]})]})]})}),a?.currentTier&&Ot.jsx(wo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},children:Ot.jsxs(Sn,{children:[Ot.jsx(Lr,{children:Ot.jsxs(zr,{className:"flex items-center gap-2",children:[Ot.jsx(In,{className:"h-5 w-5"}),"Your ",s.tierName," Benefits"]})}),Ot.jsx(Mn,{children:Ot.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[Ot.jsxs("div",{className:"flex items-start gap-3 p-3 bg-muted rounded-lg",children:[Ot.jsx(Ei,{className:"h-5 w-5 text-primary mt-0.5"}),Ot.jsxs("div",{children:[Ot.jsxs("div",{className:"font-semibold",children:[a.currentTier.discountPercentage,"% Discount"]}),Ot.jsx("div",{className:"text-sm text-muted-foreground",children:"On all purchases"})]})]}),Ot.jsxs("div",{className:"flex items-start gap-3 p-3 bg-muted rounded-lg",children:[Ot.jsx(Dn,{className:"h-5 w-5 text-primary mt-0.5"}),Ot.jsxs("div",{children:[Ot.jsxs("div",{className:"font-semibold",children:[a.currentTier.multiplier,"x Points Multiplier"]}),Ot.jsx("div",{className:"text-sm text-muted-foreground",children:"Earn points faster"})]})]}),a.currentTier.benefits&&Ot.jsx(Ot.Fragment,{children:Object.entries(a.currentTier.benefits).map(([e,t])=>Ot.jsxs("div",{className:"flex items-start gap-3 p-3 bg-muted rounded-lg",children:[Ot.jsx(An,{className:"h-5 w-5 text-primary mt-0.5"}),Ot.jsxs("div",{children:[Ot.jsx("div",{className:"font-semibold capitalize",children:e.replace(/([A-Z])/g," $1").trim()}),Ot.jsx("div",{className:"text-sm text-muted-foreground",children:"boolean"==typeof t?"Included":t})]})]},e))})]})})]})}),Ot.jsx(wo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:Ot.jsx(Sn,{children:Ot.jsxs(qs,{defaultValue:"recent",className:"w-full",children:[Ot.jsx(Lr,{children:Ot.jsxs(Xs,{className:"grid w-full grid-cols-2",children:[Ot.jsx(Ks,{value:"recent",children:"Recent Activity"}),Ot.jsx(Ks,{value:"summary",children:"Summary"})]})}),Ot.jsxs(Mn,{children:[Ot.jsx(Ys,{value:"recent",className:"space-y-4",children:c?Ot.jsx("div",{className:"space-y-2",children:[1,2,3].map(e=>Ot.jsx("div",{className:"h-16 bg-slate-200 rounded animate-pulse"},e))}):l&&l.length>0?Ot.jsx("div",{className:"space-y-2",children:l.slice(0,10).map(e=>Ot.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg hover:bg-muted/80 transition-colors",children:[Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsx("div",{className:"h-10 w-10 rounded-full flex items-center justify-center "+("earn"===e.type?"bg-green-500/20 text-green-600":"redeem"===e.type?"bg-blue-500/20 text-blue-600":"bg-red-500/20 text-red-600"),children:"earn"===e.type?Ot.jsx(Dn,{className:"h-5 w-5"}):"redeem"===e.type?Ot.jsx(Ei,{className:"h-5 w-5"}):Ot.jsx("span",{className:"text-xs",children:""})}),Ot.jsxs("div",{children:[Ot.jsx("div",{className:"font-medium",children:e.description||e.source}),Ot.jsxs("div",{className:"text-xs text-muted-foreground",children:[new Date(e.createdAt).toLocaleDateString()," at"," ",new Date(e.createdAt).toLocaleTimeString()]})]})]}),Ot.jsxs("div",{className:"text-lg font-bold "+("earn"===e.type?"text-green-600":"redeem"===e.type?"text-blue-600":"text-red-600"),children:["earn"===e.type?"+":"-",e.points.toLocaleString()]})]},e.id))}):Ot.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[Ot.jsx(Jn,{className:"h-12 w-12 mx-auto mb-3 opacity-20"}),Ot.jsx("div",{children:"No activity yet"}),Ot.jsx("div",{className:"text-sm",children:"Start earning points by making purchases and engaging with businesses!"})]})}),Ot.jsx(Ys,{value:"summary",className:"space-y-4",children:u?Ot.jsx("div",{className:"space-y-2",children:[1,2,3].map(e=>Ot.jsx("div",{className:"h-16 bg-slate-200 rounded animate-pulse"},e))}):d?Ot.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[Ot.jsxs("div",{className:"p-4 bg-green-500/10 border border-green-500/20 rounded-lg",children:[Ot.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Total Earned"}),Ot.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["+",d.totalEarned.toLocaleString()]})]}),Ot.jsxs("div",{className:"p-4 bg-blue-500/10 border border-blue-500/20 rounded-lg",children:[Ot.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Total Redeemed"}),Ot.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:["-",d.totalRedeemed.toLocaleString()]})]}),Ot.jsxs("div",{className:"p-4 bg-red-500/10 border border-red-500/20 rounded-lg",children:[Ot.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Expired"}),Ot.jsxs("div",{className:"text-2xl font-bold text-red-600",children:["-",d.totalExpired.toLocaleString()]})]}),Ot.jsxs("div",{className:"p-4 bg-purple-500/10 border border-purple-500/20 rounded-lg",children:[Ot.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Net Points"}),Ot.jsx("div",{className:"text-2xl font-bold text-purple-600",children:d.netPoints.toLocaleString()})]})]}):null})]})]})})})]})}const bZ={discount:"bg-blue-500/10 text-blue-600 border-blue-500/20",gift_card:"bg-purple-500/10 text-purple-600 border-purple-500/20",freebie:"bg-green-500/10 text-green-600 border-green-500/20",experience:"bg-pink-500/10 text-pink-600 border-pink-500/20",benefit:"bg-orange-500/10 text-orange-600 border-orange-500/20"},wZ={discount:" Discount",gift_card:" Gift Card",freebie:" Free Item",experience:" Experience",benefit:" Special Benefit"};function jZ(){const{toast:e}=Nn(),t=La(),[n,r]=hn.useState(null),[s,i]=hn.useState(!1),[a,o]=hn.useState("all"),[l,c]=hn.useState(""),[d,u]=hn.useState("points_asc"),{data:h}=za({queryKey:["/api/loyalty/account"]}),{data:p,isLoading:m}=za({queryKey:["/api/loyalty/rewards"]}),{data:f}=za({queryKey:["/api/loyalty/redemptions"]}),g=Fa({mutationFn:async e=>{const t=await fetch(`/api/loyalty/rewards/${e}/redeem`,{method:"POST",credentials:"include"});if(!t.ok){const e=await t.text();throw new Error(e||"Failed to redeem reward")}return t.json()},onSuccess:n=>{t.invalidateQueries({queryKey:["/api/loyalty/account"]}),t.invalidateQueries({queryKey:["/api/loyalty/redemptions"]}),t.invalidateQueries({queryKey:["/api/loyalty/transactions"]}),e({title:"Reward Redeemed! ",description:`Your redemption code is: ${n.redemptionCode}`}),i(!1),r(null)},onError:t=>{e({title:"Redemption Failed",description:t.message,variant:"destructive"})}}),x=p?.filter(e=>{if(!e.isActive)return!1;if("all"!==a&&e.type!==a)return!1;if(l){const t=l.toLowerCase();return e.name.toLowerCase().includes(t)||e.description?.toLowerCase().includes(t)}return!0}).sort((e,t)=>{switch(d){case"points_asc":return e.pointsCost-t.pointsCost;case"points_desc":return t.pointsCost-e.pointsCost;case"newest":return new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime();default:return 0}});return Ot.jsxs("div",{className:"space-y-6",children:[Ot.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[Ot.jsxs("div",{children:[Ot.jsxs("h2",{className:"text-3xl font-bold flex items-center gap-2",children:[Ot.jsx(Ei,{className:"h-8 w-8 text-primary"}),"Rewards Catalog"]}),Ot.jsx("p",{className:"text-muted-foreground mt-1",children:"Redeem your points for exclusive rewards"})]}),h&&Ot.jsxs("div",{className:"bg-primary/10 border border-primary/20 rounded-lg px-6 py-3",children:[Ot.jsx("div",{className:"text-sm text-muted-foreground",children:"Available Points"}),Ot.jsx("div",{className:"text-2xl font-bold text-primary",children:h.currentPoints.toLocaleString()})]})]}),Ot.jsx(Sn,{children:Ot.jsx(Mn,{className:"pt-6",children:Ot.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[Ot.jsxs("div",{className:"relative",children:[Ot.jsx(Fn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),Ot.jsx(zn,{placeholder:"Search rewards...",value:l,onChange:e=>c(e.target.value),className:"pl-9"})]}),Ot.jsxs(Un,{value:a,onValueChange:o,children:[Ot.jsx(Vn,{children:Ot.jsx(Hn,{placeholder:"Filter by type"})}),Ot.jsxs(Wn,{children:[Ot.jsx($n,{value:"all",children:"All Types"}),Ot.jsx($n,{value:"discount",children:" Discounts"}),Ot.jsx($n,{value:"gift_card",children:" Gift Cards"}),Ot.jsx($n,{value:"freebie",children:" Free Items"}),Ot.jsx($n,{value:"experience",children:" Experiences"}),Ot.jsx($n,{value:"benefit",children:" Benefits"})]})]}),Ot.jsxs(Un,{value:d,onValueChange:e=>u(e),children:[Ot.jsx(Vn,{children:Ot.jsx(Hn,{placeholder:"Sort by"})}),Ot.jsxs(Wn,{children:[Ot.jsx($n,{value:"points_asc",children:"Points: Low to High"}),Ot.jsx($n,{value:"points_desc",children:"Points: High to Low"}),Ot.jsx($n,{value:"newest",children:"Newest First"})]})]})]})})}),m?Ot.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(e=>Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{children:[Ot.jsx("div",{className:"h-6 bg-slate-200 rounded animate-pulse w-2/3"}),Ot.jsx("div",{className:"h-4 bg-slate-200 rounded animate-pulse w-1/2 mt-2"})]}),Ot.jsx(Mn,{children:Ot.jsx("div",{className:"h-24 bg-slate-200 rounded animate-pulse"})}),Ot.jsx(ki,{children:Ot.jsx("div",{className:"h-10 bg-slate-200 rounded animate-pulse w-full"})})]},e))}):x&&x.length>0?Ot.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:x.map((e,t)=>{const n=(s=e.pointsCost,!!h&&h.currentPoints>=s);var s;const a=bZ[e.type]||bZ.benefit,o=wZ[e.type]||" Reward";return Ot.jsx(wo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.05*t},children:Ot.jsxs(Sn,{className:"h-full flex flex-col "+(n?"":"opacity-60"),children:[e.imageUrl&&Ot.jsx("div",{className:"h-48 overflow-hidden rounded-t-lg",children:Ot.jsx("img",{src:e.imageUrl,alt:e.name,className:"w-full h-full object-cover"})}),Ot.jsxs(Lr,{className:"flex-grow",children:[Ot.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[Ot.jsx(Tn,{className:`${a} border`,children:o}),null!==e.stockQuantity&&e.stockQuantity<10&&Ot.jsxs(Tn,{variant:"destructive",className:"text-xs",children:["Only ",e.stockQuantity," left!"]})]}),Ot.jsx(zr,{className:"text-xl",children:e.name}),Ot.jsx(Ur,{className:"line-clamp-2",children:e.description})]}),Ot.jsx(Mn,{children:Ot.jsxs("div",{className:"space-y-3",children:[Ot.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[Ot.jsx("div",{className:"text-sm text-muted-foreground",children:"Points Cost"}),Ot.jsxs("div",{className:"text-xl font-bold flex items-center gap-1",children:[Ot.jsx(An,{className:"h-4 w-4 text-primary"}),e.pointsCost.toLocaleString()]})]}),e.value&&Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsx("span",{className:"text-sm text-muted-foreground",children:"Value"}),Ot.jsx("span",{className:"font-semibold",children:e.value})]}),e.expiryDays&&Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsx("span",{className:"text-sm text-muted-foreground",children:"Expires"}),Ot.jsxs("span",{className:"text-sm",children:[e.expiryDays," days after redemption"]})]})]})}),Ot.jsx(ki,{children:Ot.jsx(Ln,{className:"w-full",onClick:()=>(e=>{r(e),i(!0)})(e),disabled:!n||g.isPending,children:n?Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(rr,{className:"mr-2 h-4 w-4"}),"Redeem Now"]}):Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(jn,{className:"mr-2 h-4 w-4"}),"Insufficient Points"]})})})]})},e.id)})}):Ot.jsx(Sn,{children:Ot.jsxs(Mn,{className:"py-12 text-center",children:[Ot.jsx(Ei,{className:"h-16 w-16 mx-auto mb-4 opacity-20"}),Ot.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No Rewards Found"}),Ot.jsx("p",{className:"text-muted-foreground",children:l||"all"!==a?"Try adjusting your filters or search terms":"Check back soon for new rewards!"})]})}),f&&f.length>0&&Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{children:[Ot.jsxs(zr,{className:"flex items-center gap-2",children:[Ot.jsx($s,{className:"h-5 w-5"}),"Your Active Redemptions"]}),Ot.jsx(Ur,{children:"Use these codes to claim your rewards"})]}),Ot.jsx(Mn,{children:Ot.jsx("div",{className:"space-y-3",children:f.filter(e=>"active"===e.status||"pending"===e.status).map(e=>{const t=p?.find(t=>t.id===e.rewardId);return Ot.jsxs("div",{className:"flex items-center justify-between p-4 bg-muted rounded-lg",children:[Ot.jsxs("div",{children:[Ot.jsx("div",{className:"font-semibold",children:t?.name||"Reward"}),Ot.jsxs("div",{className:"text-sm text-muted-foreground",children:["Code: ",Ot.jsx("span",{className:"font-mono font-bold",children:e.redemptionCode})]}),e.expiresAt&&Ot.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Expires: ",new Date(e.expiresAt).toLocaleDateString()]})]}),Ot.jsx(Tn,{variant:"active"===e.status?"default":"secondary",children:e.status})]},e.id)})})})]}),Ot.jsx(yr,{open:s,onOpenChange:i,children:Ot.jsxs(jr,{children:[Ot.jsxs(Nr,{children:[Ot.jsx(_r,{children:"Confirm Redemption"}),Ot.jsx(ji,{children:"Are you sure you want to redeem this reward?"})]}),n&&Ot.jsxs("div",{className:"space-y-4",children:[Ot.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[Ot.jsx("h4",{className:"font-semibold mb-2",children:n.name}),Ot.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:n.description}),Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsx("span",{className:"text-sm",children:"Points Cost:"}),Ot.jsx("span",{className:"text-xl font-bold text-primary",children:n.pointsCost.toLocaleString()})]})]}),h&&Ot.jsxs("div",{className:"p-3 bg-primary/10 border border-primary/20 rounded-lg",children:[Ot.jsxs("div",{className:"flex items-center justify-between text-sm mb-1",children:[Ot.jsx("span",{children:"Current Points:"}),Ot.jsx("span",{className:"font-semibold",children:h.currentPoints.toLocaleString()})]}),Ot.jsxs("div",{className:"flex items-center justify-between text-sm",children:[Ot.jsx("span",{children:"After Redemption:"}),Ot.jsx("span",{className:"font-semibold",children:(h.currentPoints-n.pointsCost).toLocaleString()})]})]}),n.terms&&Ot.jsxs("div",{className:"text-xs text-muted-foreground p-3 bg-muted rounded",children:[Ot.jsx("strong",{children:"Terms:"})," ",n.terms]})]}),Ot.jsxs(Ai,{children:[Ot.jsx(Ln,{variant:"outline",onClick:()=>i(!1),disabled:g.isPending,children:"Cancel"}),Ot.jsx(Ln,{onClick:()=>{n&&g.mutate(n.id)},disabled:g.isPending,children:g.isPending?"Redeeming...":"Confirm Redemption"})]})]})})]})}function NZ(){const{toast:e}=Nn();La();const[t,n]=hn.useState(!1),[r,s]=hn.useState(""),[i,a]=hn.useState(!1),{data:o,isLoading:l}=za({queryKey:["/api/loyalty/referral/code"]}),{data:c,isLoading:d}=za({queryKey:["/api/loyalty/referral/stats"]}),{data:u,isLoading:h}=za({queryKey:["/api/loyalty/referral/leaderboard"]}),p=Fa({mutationFn:async e=>{const t=await fetch("/api/loyalty/referral/send",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:e})});if(!t.ok)throw new Error("Failed to send referral email");return t.json()},onSuccess:()=>{e({title:"Referral Sent! ",description:"Your referral invitation has been sent."}),s(""),a(!1)},onError:()=>{e({title:"Failed to Send",description:"Could not send the referral email. Please try again.",variant:"destructive"})}}),m=o?.code,f=m?`${window.location.origin}?ref=${m}`:"",g=t=>{navigator.clipboard.writeText(t),n(!0),e({title:"Copied! ",description:"Referral link copied to clipboard"}),setTimeout(()=>n(!1),2e3)};return l||d?Ot.jsx("div",{className:"space-y-6",children:Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{children:[Ot.jsx("div",{className:"h-8 bg-slate-200 rounded animate-pulse w-1/3"}),Ot.jsx("div",{className:"h-4 bg-slate-200 rounded animate-pulse w-1/2 mt-2"})]}),Ot.jsx(Mn,{children:Ot.jsx("div",{className:"h-32 bg-slate-200 rounded animate-pulse"})})]})}):Ot.jsxs("div",{className:"space-y-6",children:[Ot.jsxs("div",{children:[Ot.jsxs("h2",{className:"text-3xl font-bold flex items-center gap-2",children:[Ot.jsx(On,{className:"h-8 w-8 text-primary"}),"Referral Center"]}),Ot.jsx("p",{className:"text-muted-foreground mt-1",children:"Invite friends and earn rewards together"})]}),c&&Ot.jsx(wo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:Ot.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[Ot.jsx(Sn,{className:"bg-gradient-to-br from-blue-500/10 to-blue-600/10 border-blue-500/20",children:Ot.jsx(Mn,{className:"pt-6",children:Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{children:[Ot.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Total Referrals"}),Ot.jsx("div",{className:"text-3xl font-bold",children:c.totalReferrals})]}),Ot.jsx(On,{className:"h-10 w-10 text-blue-600 opacity-20"})]})})}),Ot.jsx(Sn,{className:"bg-gradient-to-br from-yellow-500/10 to-yellow-600/10 border-yellow-500/20",children:Ot.jsx(Mn,{className:"pt-6",children:Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{children:[Ot.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Pending"}),Ot.jsx("div",{className:"text-3xl font-bold",children:c.pendingReferrals})]}),Ot.jsx(Dn,{className:"h-10 w-10 text-yellow-600 opacity-20"})]})})}),Ot.jsx(Sn,{className:"bg-gradient-to-br from-green-500/10 to-green-600/10 border-green-500/20",children:Ot.jsx(Mn,{className:"pt-6",children:Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{children:[Ot.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Completed"}),Ot.jsx("div",{className:"text-3xl font-bold",children:c.completedReferrals})]}),Ot.jsx(rr,{className:"h-10 w-10 text-green-600 opacity-20"})]})})}),Ot.jsx(Sn,{className:"bg-gradient-to-br from-purple-500/10 to-purple-600/10 border-purple-500/20",children:Ot.jsx(Mn,{className:"pt-6",children:Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{children:[Ot.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Points Earned"}),Ot.jsx("div",{className:"text-3xl font-bold",children:c.totalPointsEarned.toLocaleString()})]}),Ot.jsx(Ei,{className:"h-10 w-10 text-purple-600 opacity-20"})]})})})]})}),Ot.jsx(wo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},children:Ot.jsxs(Sn,{className:"bg-gradient-to-br from-primary/5 to-primary/10 border-primary/20",children:[Ot.jsxs(Lr,{children:[Ot.jsx(zr,{children:"Your Referral Code"}),Ot.jsx(Ur,{children:"Share this link with friends to earn 200 points for each signup, plus 500 bonus points when they make their first purchase!"})]}),Ot.jsxs(Mn,{className:"space-y-4",children:[Ot.jsx("div",{className:"flex items-center gap-2",children:Ot.jsxs("div",{className:"flex-1 relative",children:[Ot.jsx(zn,{value:m||"Loading...",readOnly:!0,className:"font-mono text-lg font-bold pr-10"}),Ot.jsx(Ln,{size:"icon",variant:"ghost",className:"absolute right-1 top-1/2 transform -translate-y-1/2",onClick:()=>g(m||""),children:t?Ot.jsx(rr,{className:"h-4 w-4"}):Ot.jsx(ni,{className:"h-4 w-4"})})]})}),Ot.jsx("div",{className:"flex items-center gap-2",children:Ot.jsxs("div",{className:"flex-1 relative",children:[Ot.jsx(zn,{value:f||"Loading...",readOnly:!0,className:"text-sm"}),Ot.jsx(Ln,{size:"icon",variant:"ghost",className:"absolute right-1 top-1/2 transform -translate-y-1/2",onClick:()=>g(f||""),children:t?Ot.jsx(rr,{className:"h-4 w-4"}):Ot.jsx(ni,{className:"h-4 w-4"})})]})}),Ot.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[Ot.jsxs(yr,{open:i,onOpenChange:a,children:[Ot.jsx(br,{asChild:!0,children:Ot.jsxs(Ln,{variant:"outline",className:"w-full",children:[Ot.jsx(Jr,{className:"mr-2 h-4 w-4"}),"Email"]})}),Ot.jsxs(jr,{children:[Ot.jsxs(Nr,{children:[Ot.jsx(_r,{children:"Send Referral via Email"}),Ot.jsx(ji,{children:"Enter your friend's email address to send them an invitation"})]}),Ot.jsxs("div",{className:"space-y-4",children:[Ot.jsx(zn,{type:"email",placeholder:"friend@example.com",value:r,onChange:e=>s(e.target.value)}),Ot.jsx(Ln,{className:"w-full",onClick:()=>{r&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r)?p.mutate(r):e({title:"Invalid Email",description:"Please enter a valid email address",variant:"destructive"})},disabled:p.isPending,children:p.isPending?"Sending...":"Send Invitation"})]})]})]}),Ot.jsxs(Ln,{variant:"outline",onClick:()=>{const e=encodeURIComponent(`Join me on Florida Local Elite and earn rewards! Use my referral code: ${m}\n${f}`);window.open(`https://wa.me/?text=${e}`,"_blank")},children:[Ot.jsx(Or,{className:"mr-2 h-4 w-4"}),"WhatsApp"]}),Ot.jsxs(Ln,{variant:"outline",onClick:()=>{const e=encodeURIComponent(`Join me on @FloridaLocalElite and earn rewards! ${f}`);window.open(`https://twitter.com/intent/tweet?text=${e}`,"_blank")},children:[Ot.jsx(ss,{className:"mr-2 h-4 w-4"}),"Twitter"]}),Ot.jsxs(Ln,{variant:"outline",onClick:()=>{window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(f)}`,"_blank")},children:[Ot.jsx(ss,{className:"mr-2 h-4 w-4"}),"Facebook"]})]})]})]})}),Ot.jsx(wo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:Ot.jsxs(Sn,{children:[Ot.jsx(Lr,{children:Ot.jsx(zr,{children:"How Referrals Work"})}),Ot.jsx(Mn,{children:Ot.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[Ot.jsxs("div",{className:"text-center",children:[Ot.jsx("div",{className:"w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-3",children:Ot.jsx(ss,{className:"h-8 w-8 text-primary"})}),Ot.jsx("h4",{className:"font-semibold mb-2",children:"1. Share Your Link"}),Ot.jsx("p",{className:"text-sm text-muted-foreground",children:"Send your unique referral code to friends via email, social media, or messaging"})]}),Ot.jsxs("div",{className:"text-center",children:[Ot.jsx("div",{className:"w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-3",children:Ot.jsx(On,{className:"h-8 w-8 text-primary"})}),Ot.jsx("h4",{className:"font-semibold mb-2",children:"2. Friend Signs Up"}),Ot.jsx("p",{className:"text-sm text-muted-foreground",children:"Your friend creates an account using your referral code and gets 100 welcome points"})]}),Ot.jsxs("div",{className:"text-center",children:[Ot.jsx("div",{className:"w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-3",children:Ot.jsx(Ei,{className:"h-8 w-8 text-primary"})}),Ot.jsx("h4",{className:"font-semibold mb-2",children:"3. Earn Together"}),Ot.jsx("p",{className:"text-sm text-muted-foreground",children:"You earn 200 points immediately, plus 500 bonus points when they complete their first purchase"})]})]})})]})}),Ot.jsx(wo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},children:Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{children:[Ot.jsxs(zr,{className:"flex items-center gap-2",children:[Ot.jsx(Jn,{className:"h-5 w-5 text-yellow-600"}),"Top Referrers"]}),Ot.jsx(Ur,{children:"See who's sharing the most and earning big rewards"})]}),Ot.jsx(Mn,{children:h?Ot.jsx("div",{className:"space-y-2",children:[1,2,3,4,5].map(e=>Ot.jsx("div",{className:"h-16 bg-slate-200 rounded animate-pulse"},e))}):u&&u.length>0?Ot.jsx("div",{className:"space-y-2",children:u.slice(0,10).map((e,t)=>{const n=["bg-yellow-500 text-white","bg-slate-400 text-white","bg-orange-600 text-white"][t]||"bg-muted";return Ot.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg hover:bg-muted/80 transition-colors",children:[Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold ${n}`,children:e.rank}),Ot.jsxs("div",{children:[Ot.jsx("div",{className:"font-semibold",children:e.username}),Ot.jsxs("div",{className:"text-xs text-muted-foreground",children:[e.completedReferrals," completed referrals"]})]})]}),Ot.jsxs("div",{className:"text-right",children:[Ot.jsxs("div",{className:"font-bold text-primary",children:[e.totalPointsEarned.toLocaleString()," pts"]}),Ot.jsxs("div",{className:"text-xs text-muted-foreground",children:[e.totalReferrals," total"]})]})]},e.userId)})}):Ot.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[Ot.jsx(Jn,{className:"h-12 w-12 mx-auto mb-3 opacity-20"}),Ot.jsx("div",{children:"No leaderboard data yet"}),Ot.jsx("div",{className:"text-sm",children:"Be the first to start referring!"})]})})]})})]})}function _Z(){return Ot.jsx("div",{className:"min-h-screen",children:Ot.jsxs("div",{className:"container mx-auto px-4 py-8",children:[Ot.jsxs(wo.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center mb-8",children:[Ot.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[Ot.jsx(An,{className:"h-12 w-12 text-primary animate-pulse"}),Ot.jsx("h1",{className:"text-4xl md:text-5xl font-bold bg-gradient-to-r from-primary via-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Florida Local Elite Rewards"}),Ot.jsx(An,{className:"h-12 w-12 text-primary animate-pulse"})]}),Ot.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Earn points, unlock exclusive benefits, and get rewarded for supporting local Florida businesses"})]}),Ot.jsxs(qs,{defaultValue:"dashboard",className:"w-full",children:[Ot.jsx(wo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},children:Ot.jsxs(Xs,{className:"grid w-full grid-cols-3 mb-8 h-auto p-2 bg-white dark:bg-slate-900 shadow-lg",children:[Ot.jsxs(Ks,{value:"dashboard",className:"flex items-center gap-2 py-3 text-base data-[state=active]:bg-gradient-to-r data-[state=active]:from-blue-500 data-[state=active]:to-blue-600 data-[state=active]:text-white",children:[Ot.jsx(Jn,{className:"h-5 w-5"}),Ot.jsx("span",{className:"hidden sm:inline",children:"My Dashboard"}),Ot.jsx("span",{className:"sm:hidden",children:"Dashboard"})]}),Ot.jsxs(Ks,{value:"rewards",className:"flex items-center gap-2 py-3 text-base data-[state=active]:bg-gradient-to-r data-[state=active]:from-purple-500 data-[state=active]:to-purple-600 data-[state=active]:text-white",children:[Ot.jsx(Ei,{className:"h-5 w-5"}),Ot.jsx("span",{className:"hidden sm:inline",children:"Rewards Catalog"}),Ot.jsx("span",{className:"sm:hidden",children:"Rewards"})]}),Ot.jsxs(Ks,{value:"referrals",className:"flex items-center gap-2 py-3 text-base data-[state=active]:bg-gradient-to-r data-[state=active]:from-pink-500 data-[state=active]:to-pink-600 data-[state=active]:text-white",children:[Ot.jsx(On,{className:"h-5 w-5"}),Ot.jsx("span",{className:"hidden sm:inline",children:"Refer & Earn"}),Ot.jsx("span",{className:"sm:hidden",children:"Referrals"})]})]})}),Ot.jsx(Ys,{value:"dashboard",className:"mt-0",children:Ot.jsx(yZ,{})}),Ot.jsx(Ys,{value:"rewards",className:"mt-0",children:Ot.jsx(jZ,{})}),Ot.jsx(Ys,{value:"referrals",className:"mt-0",children:Ot.jsx(NZ,{})})]}),Ot.jsx(wo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"mt-12",children:Ot.jsxs(Sn,{className:"p-8 bg-gradient-to-br from-primary/5 to-purple/5 border-primary/20",children:[Ot.jsx("h2",{className:"text-2xl font-bold mb-6 text-center text-white",style:{textShadow:"0 2px 8px rgba(0,0,0,0.4)"},children:"Ways to Earn Points"}),Ot.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[Ot.jsxs("div",{className:"text-center",children:[Ot.jsx("div",{className:"w-16 h-16 bg-green-500/10 rounded-full flex items-center justify-center mx-auto mb-3",children:Ot.jsx("span",{className:"text-3xl",children:""})}),Ot.jsx("h3",{className:"font-semibold mb-2 text-white",style:{textShadow:"0 1px 3px rgba(0,0,0,0.3)"},children:"Make Purchases"}),Ot.jsx("p",{className:"text-sm text-white",style:{textShadow:"0 1px 2px rgba(0,0,0,0.25)"},children:"Earn 1 point per $1 spent (multiplied by your tier level)"})]}),Ot.jsxs("div",{className:"text-center",children:[Ot.jsx("div",{className:"w-16 h-16 bg-blue-500/10 rounded-full flex items-center justify-center mx-auto mb-3",children:Ot.jsx("span",{className:"text-3xl",children:""})}),Ot.jsx("h3",{className:"font-semibold mb-2 text-white",style:{textShadow:"0 1px 3px rgba(0,0,0,0.3)"},children:"Leave Reviews"}),Ot.jsx("p",{className:"text-sm text-white",style:{textShadow:"0 1px 2px rgba(0,0,0,0.25)"},children:"Earn 50 points for reviews, 100 points with photos"})]}),Ot.jsxs("div",{className:"text-center",children:[Ot.jsx("div",{className:"w-16 h-16 bg-purple-500/10 rounded-full flex items-center justify-center mx-auto mb-3",children:Ot.jsx("span",{className:"text-3xl",children:""})}),Ot.jsx("h3",{className:"font-semibold mb-2 text-white",style:{textShadow:"0 1px 3px rgba(0,0,0,0.3)"},children:"Refer Friends"}),Ot.jsx("p",{className:"text-sm text-white",style:{textShadow:"0 1px 2px rgba(0,0,0,0.25)"},children:"Earn 200 points per signup, 500 bonus on first purchase"})]}),Ot.jsxs("div",{className:"text-center",children:[Ot.jsx("div",{className:"w-16 h-16 bg-pink-500/10 rounded-full flex items-center justify-center mx-auto mb-3",children:Ot.jsx("span",{className:"text-3xl",children:""})}),Ot.jsx("h3",{className:"font-semibold mb-2 text-white",style:{textShadow:"0 1px 3px rgba(0,0,0,0.3)"},children:"Share on Social"}),Ot.jsx("p",{className:"text-sm text-white",style:{textShadow:"0 1px 2px rgba(0,0,0,0.25)"},children:"Earn 25 points per share (max 100 points per day)"})]})]})]})}),Ot.jsxs(wo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},className:"mt-12",children:[Ot.jsx("h2",{className:"text-2xl font-bold mb-6 text-center text-white",style:{textShadow:"0 2px 8px rgba(0,0,0,0.4)"},children:"Membership Tiers"}),Ot.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[Ot.jsx(Sn,{className:"bg-gradient-to-br from-orange-500/10 to-orange-700/10 border-2 border-orange-500/20 hover:border-orange-500/40 transition-all",children:Ot.jsxs("div",{className:"p-6 text-center",children:[Ot.jsx("div",{className:"text-4xl mb-3",children:""}),Ot.jsx("h3",{className:"text-xl font-bold mb-2 text-white",style:{textShadow:"0 2px 6px rgba(0,0,0,0.35)"},children:"Bronze"}),Ot.jsx("div",{className:"text-2xl font-bold text-white mb-4",style:{textShadow:"0 2px 6px rgba(0,0,0,0.35)"},children:"0+ Points"}),Ot.jsxs("div",{className:"space-y-2 text-sm",children:[Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx("span",{className:"text-green-600",children:""}),Ot.jsx("span",{children:"0% discount"})]}),Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx("span",{className:"text-green-600",children:""}),Ot.jsx("span",{children:"1x points multiplier"})]}),Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx("span",{className:"text-green-600",children:""}),Ot.jsx("span",{children:"Basic rewards access"})]})]})]})}),Ot.jsx(Sn,{className:"bg-gradient-to-br from-slate-400/10 to-slate-600/10 border-2 border-slate-500/20 hover:border-slate-500/40 transition-all",children:Ot.jsxs("div",{className:"p-6 text-center",children:[Ot.jsx("div",{className:"text-4xl mb-3",children:""}),Ot.jsx("h3",{className:"text-xl font-bold mb-2 text-white",style:{textShadow:"0 2px 6px rgba(0,0,0,0.35)"},children:"Silver"}),Ot.jsx("div",{className:"text-2xl font-bold text-white mb-4",style:{textShadow:"0 2px 6px rgba(0,0,0,0.35)"},children:"500+ Points"}),Ot.jsxs("div",{className:"space-y-2 text-sm",children:[Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx("span",{className:"text-green-600",children:""}),Ot.jsx("span",{children:"5% discount"})]}),Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx("span",{className:"text-green-600",children:""}),Ot.jsx("span",{children:"1.25x points multiplier"})]}),Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx("span",{className:"text-green-600",children:""}),Ot.jsx("span",{children:"Free shipping $50+"})]})]})]})}),Ot.jsx(Sn,{className:"bg-gradient-to-br from-yellow-400/10 to-yellow-600/10 border-2 border-yellow-500/20 hover:border-yellow-500/40 transition-all",children:Ot.jsxs("div",{className:"p-6 text-center",children:[Ot.jsx("div",{className:"text-4xl mb-3",children:""}),Ot.jsx("h3",{className:"text-xl font-bold mb-2 text-white",style:{textShadow:"0 2px 6px rgba(0,0,0,0.35)"},children:"Gold"}),Ot.jsx("div",{className:"text-2xl font-bold text-white mb-4",style:{textShadow:"0 2px 6px rgba(0,0,0,0.35)"},children:"2,000+ Points"}),Ot.jsxs("div",{className:"space-y-2 text-sm",children:[Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx("span",{className:"text-green-600",children:""}),Ot.jsx("span",{children:"10% discount"})]}),Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx("span",{className:"text-green-600",children:""}),Ot.jsx("span",{children:"1.5x points multiplier"})]}),Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx("span",{className:"text-green-600",children:""}),Ot.jsx("span",{children:"Free shipping $25+"})]})]})]})}),Ot.jsx(Sn,{className:"bg-gradient-to-br from-purple-500/10 to-pink-600/10 border-2 border-purple-500/20 hover:border-purple-500/40 transition-all",children:Ot.jsxs("div",{className:"p-6 text-center",children:[Ot.jsx("div",{className:"text-4xl mb-3",children:""}),Ot.jsx("h3",{className:"text-xl font-bold mb-2 text-white",style:{textShadow:"0 2px 6px rgba(0,0,0,0.35)"},children:"Platinum"}),Ot.jsx("div",{className:"text-2xl font-bold text-white mb-4",style:{textShadow:"0 2px 6px rgba(0,0,0,0.35)"},children:"5,000+ Points"}),Ot.jsxs("div",{className:"space-y-2 text-sm",children:[Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx("span",{className:"text-green-600",children:""}),Ot.jsx("span",{children:"15% discount"})]}),Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx("span",{className:"text-green-600",children:""}),Ot.jsx("span",{children:"2x points multiplier"})]}),Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx("span",{className:"text-green-600",children:""}),Ot.jsx("span",{children:"Always free shipping"})]}),Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx("span",{className:"text-green-600",children:""}),Ot.jsx("span",{children:"VIP early access"})]})]})]})})]})]})]})})}var SZ=Array.isArray,MZ=SZ,CZ=Vk,EZ=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,kZ=/^\w*$/;var AZ=function(e,t){if(MZ(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!CZ(e))||(kZ.test(e)||!EZ.test(e)||null!=t&&e in Object(t))},TZ=Fk,PZ=fk;var OZ=function(e){if(!PZ(e))return!1;var t=TZ(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t};const RZ=mn(OZ);var IZ,DZ=bk["__core-js_shared__"],LZ=(IZ=/[^.]+$/.exec(DZ&&DZ.keys&&DZ.keys.IE_PROTO||""))?"Symbol(src)_1."+IZ:"";var FZ=function(e){return!!LZ&&LZ in e},zZ=Function.prototype.toString;var BZ=function(e){if(null!=e){try{return zZ.call(e)}catch(t){}try{return e+""}catch(t){}}return""},UZ=OZ,VZ=FZ,HZ=fk,WZ=BZ,$Z=/^\[object .+?Constructor\]$/,GZ=Function.prototype,qZ=Object.prototype,XZ=GZ.toString,KZ=qZ.hasOwnProperty,YZ=RegExp("^"+XZ.call(KZ).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var ZZ=function(e){return!(!HZ(e)||VZ(e))&&(UZ(e)?YZ:$Z).test(WZ(e))},JZ=function(e,t){return null==e?void 0:e[t]};var QZ=function(e,t){var n=JZ(e,t);return ZZ(n)?n:void 0},eJ=QZ(Object,"create"),tJ=eJ;var nJ=function(){this.__data__=tJ?tJ(null):{},this.size=0};var rJ=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},sJ=eJ,iJ=Object.prototype.hasOwnProperty;var aJ=function(e){var t=this.__data__;if(sJ){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return iJ.call(t,e)?t[e]:void 0},oJ=eJ,lJ=Object.prototype.hasOwnProperty;var cJ=eJ;var dJ=nJ,uJ=rJ,hJ=aJ,pJ=function(e){var t=this.__data__;return oJ?void 0!==t[e]:lJ.call(t,e)},mJ=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=cJ&&void 0===t?"__lodash_hash_undefined__":t,this};function fJ(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}fJ.prototype.clear=dJ,fJ.prototype.delete=uJ,fJ.prototype.get=hJ,fJ.prototype.has=pJ,fJ.prototype.set=mJ;var gJ=fJ;var xJ=function(){this.__data__=[],this.size=0};var vJ=function(e,t){return e===t||e!=e&&t!=t},yJ=vJ;var bJ=function(e,t){for(var n=e.length;n--;)if(yJ(e[n][0],t))return n;return-1},wJ=bJ,jJ=Array.prototype.splice;var NJ=bJ;var _J=bJ;var SJ=bJ;var MJ=xJ,CJ=function(e){var t=this.__data__,n=wJ(t,e);return!(n<0)&&(n==t.length-1?t.pop():jJ.call(t,n,1),--this.size,!0)},EJ=function(e){var t=this.__data__,n=NJ(t,e);return n<0?void 0:t[n][1]},kJ=function(e){return _J(this.__data__,e)>-1},AJ=function(e,t){var n=this.__data__,r=SJ(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};function TJ(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}TJ.prototype.clear=MJ,TJ.prototype.delete=CJ,TJ.prototype.get=EJ,TJ.prototype.has=kJ,TJ.prototype.set=AJ;var PJ=TJ,OJ=QZ(bk,"Map"),RJ=gJ,IJ=PJ,DJ=OJ;var LJ=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var FJ=function(e,t){var n=e.__data__;return LJ(t)?n["string"==typeof t?"string":"hash"]:n.map},zJ=FJ;var BJ=FJ;var UJ=FJ;var VJ=FJ;var HJ=function(){this.size=0,this.__data__={hash:new RJ,map:new(DJ||IJ),string:new RJ}},WJ=function(e){var t=zJ(this,e).delete(e);return this.size-=t?1:0,t},$J=function(e){return BJ(this,e).get(e)},GJ=function(e){return UJ(this,e).has(e)},qJ=function(e,t){var n=VJ(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function XJ(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}XJ.prototype.clear=HJ,XJ.prototype.delete=WJ,XJ.prototype.get=$J,XJ.prototype.has=GJ,XJ.prototype.set=qJ;var KJ=XJ,YJ=KJ;function ZJ(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,s=t?t.apply(this,r):r[0],i=n.cache;if(i.has(s))return i.get(s);var a=e.apply(this,r);return n.cache=i.set(s,a)||i,a};return n.cache=new(ZJ.Cache||YJ),n}ZJ.Cache=YJ;var JJ=ZJ;const QJ=mn(JJ);var eQ=JJ;var tQ=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,nQ=/\\(\\)?/g,rQ=function(e){var t=eQ(e,function(e){return 500===n.size&&n.clear(),e}),n=t.cache;return t}(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(tQ,function(e,n,r,s){t.push(r?s.replace(nQ,"$1"):n||e)}),t});var sQ=function(e,t){for(var n=-1,r=null==e?0:e.length,s=Array(r);++n<r;)s[n]=t(e[n],n,e);return s},iQ=sQ,aQ=SZ,oQ=Vk,lQ=Ck?Ck.prototype:void 0,cQ=lQ?lQ.toString:void 0;var dQ=function e(t){if("string"==typeof t)return t;if(aQ(t))return iQ(t,e)+"";if(oQ(t))return cQ?cQ.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n},uQ=dQ;var hQ=function(e){return null==e?"":uQ(e)},pQ=SZ,mQ=AZ,fQ=rQ,gQ=hQ;var xQ=function(e,t){return pQ(e)?e:mQ(e,t)?[e]:fQ(gQ(e))},vQ=Vk;var yQ=function(e){if("string"==typeof e||vQ(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t},bQ=xQ,wQ=yQ;var jQ=function(e,t){for(var n=0,r=(t=bQ(t,e)).length;null!=e&&n<r;)e=e[wQ(t[n++])];return n&&n==r?e:void 0},NQ=jQ;var _Q=function(e,t,n){var r=null==e?void 0:NQ(e,t);return void 0===r?n:r};const SQ=mn(_Q);const MQ=mn(function(e){return null==e});var CQ=Fk,EQ=SZ,kQ=zk;const AQ=mn(function(e){return"string"==typeof e||!EQ(e)&&kQ(e)&&"[object String]"==CQ(e)});var TQ,PQ={exports:{}},OQ={},RQ=Symbol.for("react.element"),IQ=Symbol.for("react.portal"),DQ=Symbol.for("react.fragment"),LQ=Symbol.for("react.strict_mode"),FQ=Symbol.for("react.profiler"),zQ=Symbol.for("react.provider"),BQ=Symbol.for("react.context"),UQ=Symbol.for("react.server_context"),VQ=Symbol.for("react.forward_ref"),HQ=Symbol.for("react.suspense"),WQ=Symbol.for("react.suspense_list"),$Q=Symbol.for("react.memo"),GQ=Symbol.for("react.lazy"),qQ=Symbol.for("react.offscreen");function XQ(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case RQ:switch(e=e.type){case DQ:case FQ:case LQ:case HQ:case WQ:return e;default:switch(e=e&&e.$$typeof){case UQ:case BQ:case VQ:case GQ:case $Q:case zQ:return e;default:return t}}case IQ:return t}}}TQ=Symbol.for("react.module.reference"),OQ.ContextConsumer=BQ,OQ.ContextProvider=zQ,OQ.Element=RQ,OQ.ForwardRef=VQ,OQ.Fragment=DQ,OQ.Lazy=GQ,OQ.Memo=$Q,OQ.Portal=IQ,OQ.Profiler=FQ,OQ.StrictMode=LQ,OQ.Suspense=HQ,OQ.SuspenseList=WQ,OQ.isAsyncMode=function(){return!1},OQ.isConcurrentMode=function(){return!1},OQ.isContextConsumer=function(e){return XQ(e)===BQ},OQ.isContextProvider=function(e){return XQ(e)===zQ},OQ.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===RQ},OQ.isForwardRef=function(e){return XQ(e)===VQ},OQ.isFragment=function(e){return XQ(e)===DQ},OQ.isLazy=function(e){return XQ(e)===GQ},OQ.isMemo=function(e){return XQ(e)===$Q},OQ.isPortal=function(e){return XQ(e)===IQ},OQ.isProfiler=function(e){return XQ(e)===FQ},OQ.isStrictMode=function(e){return XQ(e)===LQ},OQ.isSuspense=function(e){return XQ(e)===HQ},OQ.isSuspenseList=function(e){return XQ(e)===WQ},OQ.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===DQ||e===FQ||e===LQ||e===HQ||e===WQ||e===qQ||"object"==typeof e&&null!==e&&(e.$$typeof===GQ||e.$$typeof===$Q||e.$$typeof===zQ||e.$$typeof===BQ||e.$$typeof===VQ||e.$$typeof===TQ||void 0!==e.getModuleId)},OQ.typeOf=XQ,PQ.exports=OQ;var KQ=PQ.exports,YQ=Fk,ZQ=zk;var JQ=function(e){return"number"==typeof e||ZQ(e)&&"[object Number]"==YQ(e)};const QQ=mn(JQ);var e0=JQ;const t0=mn(function(e){return e0(e)&&e!=+e});var n0=function(e){return 0===e?0:e>0?1:-1},r0=function(e){return AQ(e)&&e.indexOf("%")===e.length-1},s0=function(e){return QQ(e)&&!t0(e)},i0=function(e){return s0(e)||AQ(e)},a0=0,o0=function(e){var t=++a0;return"".concat(e||"").concat(t)},l0=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!s0(e)&&!AQ(e))return r;if(r0(e)){var i=e.indexOf("%");n=t*parseFloat(e.slice(0,i))/100}else n=+e;return t0(n)&&(n=r),s&&n>t&&(n=t),n},c0=function(e){if(!e)return null;var t=Object.keys(e);return t&&t.length?e[t[0]]:null},d0=function(e,t){return s0(e)&&s0(t)?function(n){return e+n*(t-e)}:function(){return t}};function u0(e,t,n){return e&&e.length?e.find(function(e){return e&&("function"==typeof t?t(e):SQ(e,t))===n}):null}var h0=function(e,t){return s0(e)&&s0(t)?e-t:AQ(e)&&AQ(t)?e.localeCompare(t):e instanceof Date&&t instanceof Date?e.getTime()-t.getTime():String(e).localeCompare(String(t))};function p0(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0}function m0(e){return(m0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var f0=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],g0=["points","pathLength"],x0={svg:["viewBox","children"],polygon:g0,polyline:g0},v0=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],y0=function(e,t){if(!e||"function"==typeof e||"boolean"==typeof e)return null;var n=e;if(hn.isValidElement(e)&&(n=e.props),!gk(n))return null;var r={};return Object.keys(n).forEach(function(e){v0.includes(e)&&(r[e]=t||function(t){return n[e](n,t)})}),r},b0=function(e,t,n){if(!gk(e)||"object"!==m0(e))return null;var r=null;return Object.keys(e).forEach(function(s){var i=e[s];v0.includes(s)&&"function"==typeof i&&(r||(r={}),r[s]=function(e,t,n){return function(r){return e(t,n,r),null}}(i,t,n))}),r},w0=["children"],j0=["children"];function N0(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function _0(e){return(_0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var S0={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},M0=function(e){return"string"==typeof e?e:e?e.displayName||e.name||"Component":""},C0=null,E0=null,k0=function e(t){if(t===C0&&Array.isArray(E0))return E0;var n=[];return hn.Children.forEach(t,function(t){MQ(t)||(KQ.isFragment(t)?n=n.concat(e(t.props.children)):n.push(t))}),E0=n,C0=t,n};function A0(e,t){var n=[],r=[];return r=Array.isArray(t)?t.map(function(e){return M0(e)}):[M0(t)],k0(e).forEach(function(e){var t=SQ(e,"type.displayName")||SQ(e,"type.name");-1!==r.indexOf(t)&&n.push(e)}),n}function T0(e,t){var n=A0(e,t);return n&&n[0]}var P0=function(e){if(!e||!e.props)return!1;var t=e.props,n=t.width,r=t.height;return!(!s0(n)||n<=0||!s0(r)||r<=0)},O0=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],R0=function(e){return e&&"object"===_0(e)&&"clipDot"in e},I0=function(e,t,n){if(!e||"function"==typeof e||"boolean"==typeof e)return null;var r=e;if(hn.isValidElement(e)&&(r=e.props),!gk(r))return null;var s={};return Object.keys(r).forEach(function(e){var i;(function(e,t,n,r){var s,i=null!==(s=null==x0?void 0:x0[r])&&void 0!==s?s:[];return t.startsWith("data-")||!RZ(e)&&(r&&i.includes(t)||f0.includes(t))||n&&v0.includes(t)})(null===(i=r)||void 0===i?void 0:i[e],e,t,n)&&(s[e]=r[e])}),s},D0=function e(t,n){if(t===n)return!0;var r=hn.Children.count(t);if(r!==hn.Children.count(n))return!1;if(0===r)return!0;if(1===r)return L0(Array.isArray(t)?t[0]:t,Array.isArray(n)?n[0]:n);for(var s=0;s<r;s++){var i=t[s],a=n[s];if(Array.isArray(i)||Array.isArray(a)){if(!e(i,a))return!1}else if(!L0(i,a))return!1}return!0},L0=function(e,t){if(MQ(e)&&MQ(t))return!0;if(!MQ(e)&&!MQ(t)){var n=e.props||{},r=n.children,s=N0(n,w0),i=t.props||{},a=i.children,o=N0(i,j0);return r&&a?p0(s,o)&&D0(r,a):!r&&!a&&p0(s,o)}return!1},F0=function(e,t){var n=[],r={};return k0(e).forEach(function(e,s){if(function(e){return e&&e.type&&AQ(e.type)&&O0.indexOf(e.type)>=0}(e))n.push(e);else if(e){var i=M0(e.type),a=t[i]||{},o=a.handler,l=a.once;if(o&&(!l||!r[i])){var c=o(e,i,s);n.push(c),r[i]=!0}}}),n},z0=["children","width","height","viewBox","className","style","title","desc"];function B0(){return B0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},B0.apply(this,arguments)}function U0(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function V0(e){var t=e.children,n=e.width,r=e.height,s=e.viewBox,i=e.className,a=e.style,o=e.title,l=e.desc,c=U0(e,z0),d=s||{width:n,height:r,x:0,y:0},u=Bo("recharts-surface",i);return fn.createElement("svg",B0({},I0(c,!0,"svg"),{className:u,width:n,height:r,style:a,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),fn.createElement("title",null,o),fn.createElement("desc",null,l),t)}var H0=["children","className"];function W0(){return W0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},W0.apply(this,arguments)}function $0(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}var G0=fn.forwardRef(function(e,t){var n=e.children,r=e.className,s=$0(e,H0),i=Bo("recharts-layer",r);return fn.createElement("g",W0({className:i},I0(s,!0),{ref:t}),n)}),q0=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s]};var X0=function(e,t,n){var r=-1,s=e.length;t<0&&(t=-t>s?0:s+t),(n=n>s?s:n)<0&&(n+=s),s=t>n?0:n-t>>>0,t>>>=0;for(var i=Array(s);++r<s;)i[r]=e[r+t];return i};var K0=function(e,t,n){var r=e.length;return n=void 0===n?r:n,!t&&n>=r?e:X0(e,t,n)},Y0=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var Z0=function(e){return Y0.test(e)};var J0=function(e){return e.split("")},Q0="\\ud800-\\udfff",e1="["+Q0+"]",t1="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",n1="\\ud83c[\\udffb-\\udfff]",r1="[^"+Q0+"]",s1="(?:\\ud83c[\\udde6-\\uddff]){2}",i1="[\\ud800-\\udbff][\\udc00-\\udfff]",a1="(?:"+t1+"|"+n1+")"+"?",o1="[\\ufe0e\\ufe0f]?",l1=o1+a1+("(?:\\u200d(?:"+[r1,s1,i1].join("|")+")"+o1+a1+")*"),c1="(?:"+[r1+t1+"?",t1,s1,i1,e1].join("|")+")",d1=RegExp(n1+"(?="+n1+")|"+c1+l1,"g");var u1=J0,h1=Z0,p1=function(e){return e.match(d1)||[]};var m1=K0,f1=Z0,g1=function(e){return h1(e)?p1(e):u1(e)},x1=hQ;const v1=mn(function(e){return function(t){t=x1(t);var n=f1(t)?g1(t):void 0,r=n?n[0]:t.charAt(0),s=n?m1(n,1).join(""):t.slice(1);return r[e]()+s}}("toUpperCase"));function y1(e){return function(){return e}}const b1=Math.cos,w1=Math.sin,j1=Math.sqrt,N1=Math.PI,_1=2*N1,S1=Math.PI,M1=2*S1,C1=1e-6,E1=M1-C1;function k1(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}class A1{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?k1:function(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return k1;const n=10**t;return function(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=Math.round(arguments[t]*n)/n+e[t]}}(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,n,r){this._append`Q${+e},${+t},${this._x1=+n},${this._y1=+r}`}bezierCurveTo(e,t,n,r,s,i){this._append`C${+e},${+t},${+n},${+r},${this._x1=+s},${this._y1=+i}`}arcTo(e,t,n,r,s){if(e=+e,t=+t,n=+n,r=+r,(s=+s)<0)throw new Error(`negative radius: ${s}`);let i=this._x1,a=this._y1,o=n-e,l=r-t,c=i-e,d=a-t,u=c*c+d*d;if(null===this._x1)this._append`M${this._x1=e},${this._y1=t}`;else if(u>C1)if(Math.abs(d*o-l*c)>C1&&s){let h=n-i,p=r-a,m=o*o+l*l,f=h*h+p*p,g=Math.sqrt(m),x=Math.sqrt(u),v=s*Math.tan((S1-Math.acos((m+u-f)/(2*g*x)))/2),y=v/x,b=v/g;Math.abs(y-1)>C1&&this._append`L${e+y*c},${t+y*d}`,this._append`A${s},${s},0,0,${+(d*h>c*p)},${this._x1=e+b*o},${this._y1=t+b*l}`}else this._append`L${this._x1=e},${this._y1=t}`;else;}arc(e,t,n,r,s,i){if(e=+e,t=+t,i=!!i,(n=+n)<0)throw new Error(`negative radius: ${n}`);let a=n*Math.cos(r),o=n*Math.sin(r),l=e+a,c=t+o,d=1^i,u=i?r-s:s-r;null===this._x1?this._append`M${l},${c}`:(Math.abs(this._x1-l)>C1||Math.abs(this._y1-c)>C1)&&this._append`L${l},${c}`,n&&(u<0&&(u=u%M1+M1),u>E1?this._append`A${n},${n},0,1,${d},${e-a},${t-o}A${n},${n},0,1,${d},${this._x1=l},${this._y1=c}`:u>C1&&this._append`A${n},${n},0,${+(u>=S1)},${d},${this._x1=e+n*Math.cos(s)},${this._y1=t+n*Math.sin(s)}`)}rect(e,t,n,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${n=+n}v${+r}h${-n}Z`}toString(){return this._}}function T1(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(null==n)t=null;else{const e=Math.floor(n);if(!(e>=0))throw new RangeError(`invalid digits: ${n}`);t=e}return e},()=>new A1(t)}function P1(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function O1(e){this._context=e}function R1(e){return new O1(e)}function I1(e){return e[0]}function D1(e){return e[1]}function L1(e,t){var n=y1(!0),r=null,s=R1,i=null,a=T1(o);function o(o){var l,c,d,u=(o=P1(o)).length,h=!1;for(null==r&&(i=s(d=a())),l=0;l<=u;++l)!(l<u&&n(c=o[l],l,o))===h&&((h=!h)?i.lineStart():i.lineEnd()),h&&i.point(+e(c,l,o),+t(c,l,o));if(d)return i=null,d+""||null}return e="function"==typeof e?e:void 0===e?I1:y1(e),t="function"==typeof t?t:void 0===t?D1:y1(t),o.x=function(t){return arguments.length?(e="function"==typeof t?t:y1(+t),o):e},o.y=function(e){return arguments.length?(t="function"==typeof e?e:y1(+e),o):t},o.defined=function(e){return arguments.length?(n="function"==typeof e?e:y1(!!e),o):n},o.curve=function(e){return arguments.length?(s=e,null!=r&&(i=s(r)),o):s},o.context=function(e){return arguments.length?(null==e?r=i=null:i=s(r=e),o):r},o}function F1(e,t,n){var r=null,s=y1(!0),i=null,a=R1,o=null,l=T1(c);function c(c){var d,u,h,p,m,f=(c=P1(c)).length,g=!1,x=new Array(f),v=new Array(f);for(null==i&&(o=a(m=l())),d=0;d<=f;++d){if(!(d<f&&s(p=c[d],d,c))===g)if(g=!g)u=d,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),h=d-1;h>=u;--h)o.point(x[h],v[h]);o.lineEnd(),o.areaEnd()}g&&(x[d]=+e(p,d,c),v[d]=+t(p,d,c),o.point(r?+r(p,d,c):x[d],n?+n(p,d,c):v[d]))}if(m)return o=null,m+""||null}function d(){return L1().defined(s).curve(a).context(i)}return e="function"==typeof e?e:void 0===e?I1:y1(+e),t="function"==typeof t?t:y1(void 0===t?0:+t),n="function"==typeof n?n:void 0===n?D1:y1(+n),c.x=function(t){return arguments.length?(e="function"==typeof t?t:y1(+t),r=null,c):e},c.x0=function(t){return arguments.length?(e="function"==typeof t?t:y1(+t),c):e},c.x1=function(e){return arguments.length?(r=null==e?null:"function"==typeof e?e:y1(+e),c):r},c.y=function(e){return arguments.length?(t="function"==typeof e?e:y1(+e),n=null,c):t},c.y0=function(e){return arguments.length?(t="function"==typeof e?e:y1(+e),c):t},c.y1=function(e){return arguments.length?(n=null==e?null:"function"==typeof e?e:y1(+e),c):n},c.lineX0=c.lineY0=function(){return d().x(e).y(t)},c.lineY1=function(){return d().x(e).y(n)},c.lineX1=function(){return d().x(r).y(t)},c.defined=function(e){return arguments.length?(s="function"==typeof e?e:y1(!!e),c):s},c.curve=function(e){return arguments.length?(a=e,null!=i&&(o=a(i)),c):a},c.context=function(e){return arguments.length?(null==e?i=o=null:o=a(i=e),c):i},c}O1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}};class z1{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t)}this._x0=e,this._y0=t}}const B1={draw(e,t){const n=j1(t/N1);e.moveTo(n,0),e.arc(0,0,n,0,_1)}},U1={draw(e,t){const n=j1(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},V1=j1(1/3),H1=2*V1,W1={draw(e,t){const n=j1(t/H1),r=n*V1;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},$1={draw(e,t){const n=j1(t),r=-n/2;e.rect(r,r,n,n)}},G1=w1(N1/10)/w1(7*N1/10),q1=w1(_1/10)*G1,X1=-b1(_1/10)*G1,K1={draw(e,t){const n=j1(.8908130915292852*t),r=q1*n,s=X1*n;e.moveTo(0,-n),e.lineTo(r,s);for(let i=1;i<5;++i){const t=_1*i/5,a=b1(t),o=w1(t);e.lineTo(o*n,-a*n),e.lineTo(a*r-o*s,o*r+a*s)}e.closePath()}},Y1=j1(3),Z1={draw(e,t){const n=-j1(t/(3*Y1));e.moveTo(0,2*n),e.lineTo(-Y1*n,-n),e.lineTo(Y1*n,-n),e.closePath()}},J1=-.5,Q1=j1(3)/2,e2=1/j1(12),t2=3*(e2/2+1),n2={draw(e,t){const n=j1(t/t2),r=n/2,s=n*e2,i=r,a=n*e2+n,o=-i,l=a;e.moveTo(r,s),e.lineTo(i,a),e.lineTo(o,l),e.lineTo(J1*r-Q1*s,Q1*r+J1*s),e.lineTo(J1*i-Q1*a,Q1*i+J1*a),e.lineTo(J1*o-Q1*l,Q1*o+J1*l),e.lineTo(J1*r+Q1*s,J1*s-Q1*r),e.lineTo(J1*i+Q1*a,J1*a-Q1*i),e.lineTo(J1*o+Q1*l,J1*l-Q1*o),e.closePath()}};function r2(){}function s2(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function i2(e){this._context=e}function a2(e){this._context=e}function o2(e){this._context=e}function l2(e){this._context=e}function c2(e){return e<0?-1:1}function d2(e,t,n){var r=e._x1-e._x0,s=t-e._x1,i=(e._y1-e._y0)/(r||s<0&&-0),a=(n-e._y1)/(s||r<0&&-0),o=(i*s+a*r)/(r+s);return(c2(i)+c2(a))*Math.min(Math.abs(i),Math.abs(a),.5*Math.abs(o))||0}function u2(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function h2(e,t,n){var r=e._x0,s=e._y0,i=e._x1,a=e._y1,o=(i-r)/3;e._context.bezierCurveTo(r+o,s+o*t,i-o,a-o*n,i,a)}function p2(e){this._context=e}function m2(e){this._context=new f2(e)}function f2(e){this._context=e}function g2(e){this._context=e}function x2(e){var t,n,r=e.length-1,s=new Array(r),i=new Array(r),a=new Array(r);for(s[0]=0,i[0]=2,a[0]=e[0]+2*e[1],t=1;t<r-1;++t)s[t]=1,i[t]=4,a[t]=4*e[t]+2*e[t+1];for(s[r-1]=2,i[r-1]=7,a[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=s[t]/i[t-1],i[t]-=n,a[t]-=n*a[t-1];for(s[r-1]=a[r-1]/i[r-1],t=r-2;t>=0;--t)s[t]=(a[t]-s[t+1])/i[t];for(i[r-1]=(e[r]+s[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-s[t+1];return[s,i]}function v2(e,t){this._context=e,this._t=t}function y2(e,t){if((s=e.length)>1)for(var n,r,s,i=1,a=e[t[0]],o=a.length;i<s;++i)for(r=a,a=e[t[i]],n=0;n<o;++n)a[n][1]+=a[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]}function b2(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function w2(e,t){return e[t]}function j2(e){const t=[];return t.key=e,t}function N2(e){return(N2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}i2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:s2(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:s2(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},a2.prototype={areaStart:r2,areaEnd:r2,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:s2(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},o2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:s2(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},l2.prototype={areaStart:r2,areaEnd:r2,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}},p2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:h2(this,this._t0,u2(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,h2(this,u2(this,n=d2(this,e,t)),n);break;default:h2(this,this._t0,n=d2(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(m2.prototype=Object.create(p2.prototype)).point=function(e,t){p2.prototype.point.call(this,t,e)},f2.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,s,i){this._context.bezierCurveTo(t,e,r,n,i,s)}},g2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===n)this._context.lineTo(e[1],t[1]);else for(var r=x2(e),s=x2(t),i=0,a=1;a<n;++i,++a)this._context.bezierCurveTo(r[0][i],s[0][i],r[1][i],s[1][i],e[a],t[a]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},v2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}}this._x=e,this._y=t}};var _2=["type","size","sizeType"];function S2(){return S2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},S2.apply(this,arguments)}function M2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function C2(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M2(Object(n),!0).forEach(function(t){E2(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M2(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function E2(e,t,n){return t=function(e){var t=function(e,t){if("object"!=N2(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=N2(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==N2(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k2(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}var A2={symbolCircle:B1,symbolCross:U1,symbolDiamond:W1,symbolSquare:$1,symbolStar:K1,symbolTriangle:Z1,symbolWye:n2},T2=Math.PI/180,P2=function(e){var t,n,r=e.type,s=void 0===r?"circle":r,i=e.size,a=void 0===i?64:i,o=e.sizeType,l=void 0===o?"area":o,c=C2(C2({},k2(e,_2)),{},{type:s,size:a,sizeType:l}),d=c.className,u=c.cx,h=c.cy,p=I0(c,!0);return u===+u&&h===+h&&a===+a?fn.createElement("path",S2({},p,{className:Bo("recharts-symbols",d),transform:"translate(".concat(u,", ").concat(h,")"),d:(t=function(e){var t="symbol".concat(v1(e));return A2[t]||B1}(s),n=function(e,t){let n=null,r=T1(s);function s(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return e="function"==typeof e?e:y1(e||B1),t="function"==typeof t?t:y1(void 0===t?64:+t),s.type=function(t){return arguments.length?(e="function"==typeof t?t:y1(t),s):e},s.size=function(e){return arguments.length?(t="function"==typeof e?e:y1(+e),s):t},s.context=function(e){return arguments.length?(n=null==e?null:e,s):n},s}().type(t).size(function(e,t,n){if("area"===t)return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return.5*e*e/Math.sqrt(3);case"square":return e*e;case"star":var r=18*T2;return 1.25*e*e*(Math.tan(r)-Math.tan(2*r)*Math.pow(Math.tan(r),2));case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}}(a,l,s)),n())})):null};function O2(e){return(O2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R2(){return R2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},R2.apply(this,arguments)}function I2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function D2(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,V2(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function L2(e,t,n){return t=z2(t),function(e,t){if(t&&("object"===O2(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,F2()?Reflect.construct(t,n||[],z2(e).constructor):t.apply(e,n))}function F2(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(F2=function(){return!!e})()}function z2(e){return(z2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function B2(e,t){return(B2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function U2(e,t,n){return(t=V2(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function V2(e){var t=function(e,t){if("object"!=O2(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=O2(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==O2(t)?t:t+""}P2.registerSymbol=function(e,t){A2["symbol".concat(v1(e))]=t};var H2=32,W2=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),L2(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&B2(e,t)}(e,hn.PureComponent),D2(e,[{key:"renderIcon",value:function(e){var t=this.props.inactiveColor,n=16,r=H2/6,s=H2/3,i=e.inactive?t:e.color;if("plainline"===e.type)return fn.createElement("line",{strokeWidth:4,fill:"none",stroke:i,strokeDasharray:e.payload.strokeDasharray,x1:0,y1:n,x2:H2,y2:n,className:"recharts-legend-icon"});if("line"===e.type)return fn.createElement("path",{strokeWidth:4,fill:"none",stroke:i,d:"M0,".concat(n,"h").concat(s,"\n            A").concat(r,",").concat(r,",0,1,1,").concat(2*s,",").concat(n,"\n            H").concat(H2,"M").concat(2*s,",").concat(n,"\n            A").concat(r,",").concat(r,",0,1,1,").concat(s,",").concat(n),className:"recharts-legend-icon"});if("rect"===e.type)return fn.createElement("path",{stroke:"none",fill:i,d:"M0,".concat(4,"h").concat(H2,"v").concat(24,"h").concat(-32,"z"),className:"recharts-legend-icon"});if(fn.isValidElement(e.legendIcon)){var a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I2(Object(n),!0).forEach(function(t){U2(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I2(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e);return delete a.legendIcon,fn.cloneElement(e.legendIcon,a)}return fn.createElement(P2,{fill:i,cx:n,cy:n,size:H2,sizeType:"diameter",type:e.type})}},{key:"renderItems",value:function(){var e=this,t=this.props,n=t.payload,r=t.iconSize,s=t.layout,i=t.formatter,a=t.inactiveColor,o={x:0,y:0,width:H2,height:H2},l={display:"horizontal"===s?"inline-block":"block",marginRight:10},c={display:"inline-block",verticalAlign:"middle",marginRight:4};return n.map(function(t,n){var s=t.formatter||i,d=Bo(U2(U2({"recharts-legend-item":!0},"legend-item-".concat(n),!0),"inactive",t.inactive));if("none"===t.type)return null;var u=RZ(t.value)?null:t.value;q0(!RZ(t.value),'The name property is also required when using a function for the dataKey of a chart\'s cartesian components. Ex: <Bar name="Name of my Data"/>');var h=t.inactive?a:t.color;return fn.createElement("li",R2({className:d,style:l,key:"legend-item-".concat(n)},b0(e.props,t,n)),fn.createElement(V0,{width:r,height:r,viewBox:o,style:c},e.renderIcon(t)),fn.createElement("span",{className:"recharts-legend-item-text",style:{color:h}},s?s(u,t,n):u))})}},{key:"render",value:function(){var e=this.props,t=e.payload,n=e.layout,r=e.align;if(!t||!t.length)return null;var s={padding:0,margin:0,textAlign:"horizontal"===n?r:"left"};return fn.createElement("ul",{className:"recharts-default-legend",style:s},this.renderItems())}}])}();U2(W2,"displayName","Legend"),U2(W2,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var $2=PJ;var G2=PJ,q2=OJ,X2=KJ;var K2=PJ,Y2=function(){this.__data__=new $2,this.size=0},Z2=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},J2=function(e){return this.__data__.get(e)},Q2=function(e){return this.__data__.has(e)},e3=function(e,t){var n=this.__data__;if(n instanceof G2){var r=n.__data__;if(!q2||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new X2(r)}return n.set(e,t),this.size=n.size,this};function t3(e){var t=this.__data__=new K2(e);this.size=t.size}t3.prototype.clear=Y2,t3.prototype.delete=Z2,t3.prototype.get=J2,t3.prototype.has=Q2,t3.prototype.set=e3;var n3=t3;var r3=KJ,s3=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},i3=function(e){return this.__data__.has(e)};function a3(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r3;++t<n;)this.add(e[t])}a3.prototype.add=a3.prototype.push=s3,a3.prototype.has=i3;var o3=a3;var l3=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1};var c3=function(e,t){return e.has(t)},d3=o3,u3=l3,h3=c3;var p3=function(e,t,n,r,s,i){var a=1&n,o=e.length,l=t.length;if(o!=l&&!(a&&l>o))return!1;var c=i.get(e),d=i.get(t);if(c&&d)return c==t&&d==e;var u=-1,h=!0,p=2&n?new d3:void 0;for(i.set(e,t),i.set(t,e);++u<o;){var m=e[u],f=t[u];if(r)var g=a?r(f,m,u,t,e,i):r(m,f,u,e,t,i);if(void 0!==g){if(g)continue;h=!1;break}if(p){if(!u3(t,function(e,t){if(!h3(p,t)&&(m===e||s(m,e,n,r,i)))return p.push(t)})){h=!1;break}}else if(m!==f&&!s(m,f,n,r,i)){h=!1;break}}return i.delete(e),i.delete(t),h};var m3=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n},f3=bk.Uint8Array,g3=vJ,x3=p3,v3=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n},y3=m3,b3=Ck?Ck.prototype:void 0,w3=b3?b3.valueOf:void 0;var j3=function(e,t,n,r,s,i,a){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!i(new f3(e),new f3(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return g3(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var o=v3;case"[object Set]":var l=1&r;if(o||(o=y3),e.size!=t.size&&!l)return!1;var c=a.get(e);if(c)return c==t;r|=2,a.set(e,t);var d=x3(o(e),o(t),r,s,i,a);return a.delete(e),d;case"[object Symbol]":if(w3)return w3.call(e)==w3.call(t)}return!1};var N3=function(e,t){for(var n=-1,r=t.length,s=e.length;++n<r;)e[s+n]=t[n];return e},_3=N3,S3=SZ;var M3=function(e,t,n){var r=t(e);return S3(e)?r:_3(r,n(e))};var C3=function(e,t){for(var n=-1,r=null==e?0:e.length,s=0,i=[];++n<r;){var a=e[n];t(a,n,e)&&(i[s++]=a)}return i},E3=function(){return[]},k3=Object.prototype.propertyIsEnumerable,A3=Object.getOwnPropertySymbols,T3=A3?function(e){return null==e?[]:(e=Object(e),C3(A3(e),function(t){return k3.call(e,t)}))}:E3;var P3=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r},O3=Fk,R3=zk;var I3=function(e){return R3(e)&&"[object Arguments]"==O3(e)},D3=zk,L3=Object.prototype,F3=L3.hasOwnProperty,z3=L3.propertyIsEnumerable,B3=I3(function(){return arguments}())?I3:function(e){return D3(e)&&F3.call(e,"callee")&&!z3.call(e,"callee")},U3={exports:{}};var V3=function(){return!1};!function(e,t){var n=bk,r=V3,s=t&&!t.nodeType&&t,i=s&&e&&!e.nodeType&&e,a=i&&i.exports===s?n.Buffer:void 0,o=(a?a.isBuffer:void 0)||r;e.exports=o}(U3,U3.exports);var H3=U3.exports,W3=/^(?:0|[1-9]\d*)$/;var $3=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&W3.test(e))&&e>-1&&e%1==0&&e<t};var G3=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},q3=Fk,X3=G3,K3=zk,Y3={};Y3["[object Float32Array]"]=Y3["[object Float64Array]"]=Y3["[object Int8Array]"]=Y3["[object Int16Array]"]=Y3["[object Int32Array]"]=Y3["[object Uint8Array]"]=Y3["[object Uint8ClampedArray]"]=Y3["[object Uint16Array]"]=Y3["[object Uint32Array]"]=!0,Y3["[object Arguments]"]=Y3["[object Array]"]=Y3["[object ArrayBuffer]"]=Y3["[object Boolean]"]=Y3["[object DataView]"]=Y3["[object Date]"]=Y3["[object Error]"]=Y3["[object Function]"]=Y3["[object Map]"]=Y3["[object Number]"]=Y3["[object Object]"]=Y3["[object RegExp]"]=Y3["[object Set]"]=Y3["[object String]"]=Y3["[object WeakMap]"]=!1;var Z3=function(e){return K3(e)&&X3(e.length)&&!!Y3[q3(e)]};var J3=function(e){return function(t){return e(t)}},Q3={exports:{}};!function(e,t){var n=xk,r=t&&!t.nodeType&&t,s=r&&e&&!e.nodeType&&e,i=s&&s.exports===r&&n.process,a=function(){try{var e=s&&s.require&&s.require("util").types;return e||i&&i.binding&&i.binding("util")}catch(t){}}();e.exports=a}(Q3,Q3.exports);var e5=Q3.exports,t5=Z3,n5=J3,r5=e5&&e5.isTypedArray,s5=r5?n5(r5):t5,i5=P3,a5=B3,o5=SZ,l5=H3,c5=$3,d5=s5,u5=Object.prototype.hasOwnProperty;var h5=function(e,t){var n=o5(e),r=!n&&a5(e),s=!n&&!r&&l5(e),i=!n&&!r&&!s&&d5(e),a=n||r||s||i,o=a?i5(e.length,String):[],l=o.length;for(var c in e)!t&&!u5.call(e,c)||a&&("length"==c||s&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||c5(c,l))||o.push(c);return o},p5=Object.prototype;var m5=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||p5)};var f5=function(e,t){return function(n){return e(t(n))}},g5=f5(Object.keys,Object),x5=m5,v5=g5,y5=Object.prototype.hasOwnProperty;var b5=OZ,w5=G3;var j5=function(e){return null!=e&&w5(e.length)&&!b5(e)},N5=h5,_5=function(e){if(!x5(e))return v5(e);var t=[];for(var n in Object(e))y5.call(e,n)&&"constructor"!=n&&t.push(n);return t},S5=j5;var M5=function(e){return S5(e)?N5(e):_5(e)},C5=M3,E5=T3,k5=M5;var A5=function(e){return C5(e,k5,E5)},T5=Object.prototype.hasOwnProperty;var P5=function(e,t,n,r,s,i){var a=1&n,o=A5(e),l=o.length;if(l!=A5(t).length&&!a)return!1;for(var c=l;c--;){var d=o[c];if(!(a?d in t:T5.call(t,d)))return!1}var u=i.get(e),h=i.get(t);if(u&&h)return u==t&&h==e;var p=!0;i.set(e,t),i.set(t,e);for(var m=a;++c<l;){var f=e[d=o[c]],g=t[d];if(r)var x=a?r(g,f,d,t,e,i):r(f,g,d,e,t,i);if(!(void 0===x?f===g||s(f,g,n,r,i):x)){p=!1;break}m||(m="constructor"==d)}if(p&&!m){var v=e.constructor,y=t.constructor;v==y||!("constructor"in e)||!("constructor"in t)||"function"==typeof v&&v instanceof v&&"function"==typeof y&&y instanceof y||(p=!1)}return i.delete(e),i.delete(t),p},O5=QZ(bk,"DataView"),R5=QZ(bk,"Promise"),I5=QZ(bk,"Set"),D5=O5,L5=OJ,F5=R5,z5=I5,B5=QZ(bk,"WeakMap"),U5=Fk,V5=BZ,H5="[object Map]",W5="[object Promise]",$5="[object Set]",G5="[object WeakMap]",q5="[object DataView]",X5=V5(D5),K5=V5(L5),Y5=V5(F5),Z5=V5(z5),J5=V5(B5),Q5=U5;(D5&&Q5(new D5(new ArrayBuffer(1)))!=q5||L5&&Q5(new L5)!=H5||F5&&Q5(F5.resolve())!=W5||z5&&Q5(new z5)!=$5||B5&&Q5(new B5)!=G5)&&(Q5=function(e){var t=U5(e),n="[object Object]"==t?e.constructor:void 0,r=n?V5(n):"";if(r)switch(r){case X5:return q5;case K5:return H5;case Y5:return W5;case Z5:return $5;case J5:return G5}return t});var e4=n3,t4=p3,n4=j3,r4=P5,s4=Q5,i4=SZ,a4=H3,o4=s5,l4="[object Arguments]",c4="[object Array]",d4="[object Object]",u4=Object.prototype.hasOwnProperty;var h4=function(e,t,n,r,s,i){var a=i4(e),o=i4(t),l=a?c4:s4(e),c=o?c4:s4(t),d=(l=l==l4?d4:l)==d4,u=(c=c==l4?d4:c)==d4,h=l==c;if(h&&a4(e)){if(!a4(t))return!1;a=!0,d=!1}if(h&&!d)return i||(i=new e4),a||o4(e)?t4(e,t,n,r,s,i):n4(e,t,l,n,r,s,i);if(!(1&n)){var p=d&&u4.call(e,"__wrapped__"),m=u&&u4.call(t,"__wrapped__");if(p||m){var f=p?e.value():e,g=m?t.value():t;return i||(i=new e4),s(f,g,n,r,i)}}return!!h&&(i||(i=new e4),r4(e,t,n,r,s,i))},p4=zk;var m4=function e(t,n,r,s,i){return t===n||(null==t||null==n||!p4(t)&&!p4(n)?t!=t&&n!=n:h4(t,n,r,s,e,i))},f4=n3,g4=m4;var x4=fk;var v4=function(e){return e==e&&!x4(e)},y4=v4,b4=M5;var w4=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}},j4=function(e,t,n,r){var s=n.length,i=s,a=!r;if(null==e)return!i;for(e=Object(e);s--;){var o=n[s];if(a&&o[2]?o[1]!==e[o[0]]:!(o[0]in e))return!1}for(;++s<i;){var l=(o=n[s])[0],c=e[l],d=o[1];if(a&&o[2]){if(void 0===c&&!(l in e))return!1}else{var u=new f4;if(r)var h=r(c,d,l,e,t,u);if(!(void 0===h?g4(d,c,3,r,u):h))return!1}}return!0},N4=function(e){for(var t=b4(e),n=t.length;n--;){var r=t[n],s=e[r];t[n]=[r,s,y4(s)]}return t},_4=w4;var S4=xQ,M4=B3,C4=SZ,E4=$3,k4=G3,A4=yQ;var T4=function(e,t){return null!=e&&t in Object(e)},P4=function(e,t,n){for(var r=-1,s=(t=S4(t,e)).length,i=!1;++r<s;){var a=A4(t[r]);if(!(i=null!=e&&n(e,a)))break;e=e[a]}return i||++r!=s?i:!!(s=null==e?0:e.length)&&k4(s)&&E4(a,s)&&(C4(e)||M4(e))};var O4=m4,R4=_Q,I4=function(e,t){return null!=e&&P4(e,t,T4)},D4=AZ,L4=v4,F4=w4,z4=yQ;var B4=function(e){return e};var U4=jQ;var V4=function(e){return function(t){return null==t?void 0:t[e]}},H4=function(e){return function(t){return U4(t,e)}},W4=AZ,$4=yQ;var G4=function(e){var t=N4(e);return 1==t.length&&t[0][2]?_4(t[0][0],t[0][1]):function(n){return n===e||j4(n,e,t)}},q4=function(e,t){return D4(e)&&L4(t)?F4(z4(e),t):function(n){var r=R4(n,e);return void 0===r&&r===t?I4(n,e):O4(t,r,3)}},X4=B4,K4=SZ,Y4=function(e){return W4(e)?V4($4(e)):H4(e)};var Z4=function(e){return"function"==typeof e?e:null==e?X4:"object"==typeof e?K4(e)?q4(e[0],e[1]):G4(e):Y4(e)};var J4=function(e,t,n,r){for(var s=e.length,i=n+(r?1:-1);r?i--:++i<s;)if(t(e[i],i,e))return i;return-1};var Q4=J4,e6=function(e){return e!=e},t6=function(e,t,n){for(var r=n-1,s=e.length;++r<s;)if(e[r]===t)return r;return-1};var n6=function(e,t,n){return t==t?t6(e,t,n):Q4(e,e6,n)};var r6=function(e,t){return!!(null==e?0:e.length)&&n6(e,t,0)>-1};var s6=function(e,t,n){for(var r=-1,s=null==e?0:e.length;++r<s;)if(n(t,e[r]))return!0;return!1};var i6=I5,a6=function(){},o6=i6&&1/m3(new i6([,-0]))[1]==1/0?function(e){return new i6(e)}:a6,l6=o3,c6=r6,d6=s6,u6=c3,h6=o6,p6=m3;var m6=Z4,f6=function(e,t,n){var r=-1,s=c6,i=e.length,a=!0,o=[],l=o;if(n)a=!1,s=d6;else if(i>=200){var c=t?null:h6(e);if(c)return p6(c);a=!1,s=u6,l=new l6}else l=t?[]:o;e:for(;++r<i;){var d=e[r],u=t?t(d):d;if(d=n||0!==d?d:0,a&&u==u){for(var h=l.length;h--;)if(l[h]===u)continue e;t&&l.push(u),o.push(d)}else s(l,u,n)||(l!==o&&l.push(u),o.push(d))}return o};const g6=mn(function(e,t){return e&&e.length?f6(e,m6(t)):[]});function x6(e,t,n){return!0===t?g6(e,n):RZ(t)?g6(e,t):e}function v6(e){return(v6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var y6=["ref"];function b6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function w6(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b6(Object(n),!0).forEach(function(t){C6(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b6(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function j6(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,E6(r.key),r)}}function N6(e,t,n){return t=S6(t),function(e,t){if(t&&("object"===v6(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,_6()?Reflect.construct(t,n||[],S6(e).constructor):t.apply(e,n))}function _6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(_6=function(){return!!e})()}function S6(e){return(S6=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function M6(e,t){return(M6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function C6(e,t,n){return(t=E6(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E6(e){var t=function(e,t){if("object"!=v6(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=v6(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==v6(t)?t:t+""}function k6(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function A6(e){return e.value}var T6=function(){function e(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return C6(t=N6(this,e,[].concat(r)),"lastBoundingBox",{width:-1,height:-1}),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&M6(e,t)}(e,hn.PureComponent),t=e,r=[{key:"getWithHeight",value:function(e,t){var n=w6(w6({},this.defaultProps),e.props).layout;return"vertical"===n&&s0(e.props.height)?{height:e.props.height}:"horizontal"===n?{width:e.props.width||t}:null}}],(n=[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var e=this.wrapperNode.getBoundingClientRect();return e.height=this.wrapperNode.offsetHeight,e.width=this.wrapperNode.offsetWidth,e}return null}},{key:"updateBBox",value:function(){var e=this.props.onBBoxUpdate,t=this.getBBox();t?(Math.abs(t.width-this.lastBoundingBox.width)>1||Math.abs(t.height-this.lastBoundingBox.height)>1)&&(this.lastBoundingBox.width=t.width,this.lastBoundingBox.height=t.height,e&&e(t)):-1===this.lastBoundingBox.width&&-1===this.lastBoundingBox.height||(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,e&&e(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?w6({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(e){var t,n,r=this.props,s=r.layout,i=r.align,a=r.verticalAlign,o=r.margin,l=r.chartWidth,c=r.chartHeight;return e&&(void 0!==e.left&&null!==e.left||void 0!==e.right&&null!==e.right)||(t="center"===i&&"vertical"===s?{left:((l||0)-this.getBBoxSnapshot().width)/2}:"right"===i?{right:o&&o.right||0}:{left:o&&o.left||0}),e&&(void 0!==e.top&&null!==e.top||void 0!==e.bottom&&null!==e.bottom)||(n="middle"===a?{top:((c||0)-this.getBBoxSnapshot().height)/2}:"bottom"===a?{bottom:o&&o.bottom||0}:{top:o&&o.top||0}),w6(w6({},t),n)}},{key:"render",value:function(){var e=this,t=this.props,n=t.content,r=t.width,s=t.height,i=t.wrapperStyle,a=t.payloadUniqBy,o=t.payload,l=w6(w6({position:"absolute",width:r||"auto",height:s||"auto"},this.getDefaultPosition(i)),i);return fn.createElement("div",{className:"recharts-legend-wrapper",style:l,ref:function(t){e.wrapperNode=t}},function(e,t){if(fn.isValidElement(e))return fn.cloneElement(e,t);if("function"==typeof e)return fn.createElement(e,t);var n=k6(t,y6);return fn.createElement(W2,n)}(n,w6(w6({},this.props),{},{payload:x6(o,a,A6)})))}}])&&j6(t.prototype,n),r&&j6(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();C6(T6,"displayName","Legend"),C6(T6,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var P6=B3,O6=SZ,R6=Ck?Ck.isConcatSpreadable:void 0;var I6=N3,D6=function(e){return O6(e)||P6(e)||!!(R6&&e&&e[R6])};var L6=function e(t,n,r,s,i){var a=-1,o=t.length;for(r||(r=D6),i||(i=[]);++a<o;){var l=t[a];n>0&&r(l)?n>1?e(l,n-1,r,s,i):I6(i,l):s||(i[i.length]=l)}return i};var F6=function(e){return function(t,n,r){for(var s=-1,i=Object(t),a=r(t),o=a.length;o--;){var l=a[e?o:++s];if(!1===n(i[l],l,i))break}return t}}(),z6=M5;var B6=function(e,t){return e&&F6(e,t,z6)},U6=j5;var V6=function(e,t){return function(n,r){if(null==n)return n;if(!U6(n))return e(n,r);for(var s=n.length,i=t?s:-1,a=Object(n);(t?i--:++i<s)&&!1!==r(a[i],i,a););return n}}(B6),H6=V6,W6=j5;var $6=function(e,t){var n=-1,r=W6(e)?Array(e.length):[];return H6(e,function(e,s,i){r[++n]=t(e,s,i)}),r};var G6=Vk;var q6=function(e,t){if(e!==t){var n=void 0!==e,r=null===e,s=e==e,i=G6(e),a=void 0!==t,o=null===t,l=t==t,c=G6(t);if(!o&&!c&&!i&&e>t||i&&a&&l&&!o&&!c||r&&a&&l||!n&&l||!s)return 1;if(!r&&!i&&!c&&e<t||c&&n&&s&&!r&&!i||o&&n&&s||!a&&s||!l)return-1}return 0};var X6=sQ,K6=jQ,Y6=Z4,Z6=$6,J6=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e},Q6=J3,e8=function(e,t,n){for(var r=-1,s=e.criteria,i=t.criteria,a=s.length,o=n.length;++r<a;){var l=q6(s[r],i[r]);if(l)return r>=o?l:l*("desc"==n[r]?-1:1)}return e.index-t.index},t8=B4,n8=SZ;var r8=function(e,t,n){t=t.length?X6(t,function(e){return n8(e)?function(t){return K6(t,1===e.length?e[0]:e)}:e}):[t8];var r=-1;t=X6(t,Q6(Y6));var s=Z6(e,function(e,n,s){return{criteria:X6(t,function(t){return t(e)}),index:++r,value:e}});return J6(s,function(e,t){return e8(e,t,n)})};var s8=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},i8=Math.max;var a8=function(e,t,n){return t=i8(void 0===t?e.length-1:t,0),function(){for(var r=arguments,s=-1,i=i8(r.length-t,0),a=Array(i);++s<i;)a[s]=r[t+s];s=-1;for(var o=Array(t+1);++s<t;)o[s]=r[s];return o[t]=n(a),s8(e,this,o)}};var o8=function(e){return function(){return e}},l8=QZ,c8=function(){try{var e=l8(Object,"defineProperty");return e({},"",{}),e}catch(t){}}(),d8=o8,u8=c8,h8=u8?function(e,t){return u8(e,"toString",{configurable:!0,enumerable:!1,value:d8(t),writable:!0})}:B4,p8=Date.now;var m8=function(e){var t=0,n=0;return function(){var r=p8(),s=16-(r-n);if(n=r,s>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(h8),f8=B4,g8=a8,x8=m8;var v8=vJ,y8=j5,b8=$3,w8=fk;var j8=function(e,t,n){if(!w8(n))return!1;var r=typeof t;return!!("number"==r?y8(n)&&b8(t,n.length):"string"==r&&t in n)&&v8(n[t],e)},N8=L6,_8=r8,S8=j8;const M8=mn(function(e,t){return x8(g8(e,t,f8),e+"")}(function(e,t){if(null==e)return[];var n=t.length;return n>1&&S8(e,t[0],t[1])?t=[]:n>2&&S8(t[0],t[1],t[2])&&(t=[t[0]]),_8(e,N8(t,1),[])}));function C8(e){return(C8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E8(){return E8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},E8.apply(this,arguments)}function k8(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,s,i,a,o=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t);else for(;!(l=(r=i.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(d){c=!0,s=d}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw s}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return A8(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return A8(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A8(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function T8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function P8(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T8(Object(n),!0).forEach(function(t){O8(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T8(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function O8(e,t,n){return t=function(e){var t=function(e,t){if("object"!=C8(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=C8(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==C8(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R8(e){return Array.isArray(e)&&i0(e[0])&&i0(e[1])?e.join(" ~ "):e}var I8=function(e){var t=e.separator,n=void 0===t?" : ":t,r=e.contentStyle,s=void 0===r?{}:r,i=e.itemStyle,a=void 0===i?{}:i,o=e.labelStyle,l=void 0===o?{}:o,c=e.payload,d=e.formatter,u=e.itemSorter,h=e.wrapperClassName,p=e.labelClassName,m=e.label,f=e.labelFormatter,g=e.accessibilityLayer,x=void 0!==g&&g,v=P8({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},s),y=P8({margin:0},l),b=!MQ(m),w=b?m:"",j=Bo("recharts-default-tooltip",h),N=Bo("recharts-tooltip-label",p);b&&f&&null!=c&&(w=f(m,c));var _=x?{role:"status","aria-live":"assertive"}:{};return fn.createElement("div",E8({className:j,style:v},_),fn.createElement("p",{className:N,style:y},fn.isValidElement(w)?w:"".concat(w)),function(){if(c&&c.length){var e=(u?M8(c,u):c).map(function(e,t){if("none"===e.type)return null;var r=P8({display:"block",paddingTop:4,paddingBottom:4,color:e.color||"#000"},a),s=e.formatter||d||R8,i=e.value,o=e.name,l=i,u=o;if(s&&null!=l&&null!=u){var h=s(i,o,e,t,c);if(Array.isArray(h)){var p=k8(h,2);l=p[0],u=p[1]}else l=h}return fn.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(t),style:r},i0(u)?fn.createElement("span",{className:"recharts-tooltip-item-name"},u):null,i0(u)?fn.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,fn.createElement("span",{className:"recharts-tooltip-item-value"},l),fn.createElement("span",{className:"recharts-tooltip-item-unit"},e.unit||""))});return fn.createElement("ul",{className:"recharts-tooltip-item-list",style:{padding:0,margin:0}},e)}return null}())};function D8(e){return(D8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function L8(e,t,n){return t=function(e){var t=function(e,t){if("object"!=D8(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=D8(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==D8(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var F8="recharts-tooltip-wrapper",z8={visibility:"hidden"};function B8(e){var t=e.coordinate,n=e.translateX,r=e.translateY;return Bo(F8,L8(L8(L8(L8({},"".concat(F8,"-right"),s0(n)&&t&&s0(t.x)&&n>=t.x),"".concat(F8,"-left"),s0(n)&&t&&s0(t.x)&&n<t.x),"".concat(F8,"-bottom"),s0(r)&&t&&s0(t.y)&&r>=t.y),"".concat(F8,"-top"),s0(r)&&t&&s0(t.y)&&r<t.y))}function U8(e){var t=e.allowEscapeViewBox,n=e.coordinate,r=e.key,s=e.offsetTopLeft,i=e.position,a=e.reverseDirection,o=e.tooltipDimension,l=e.viewBox,c=e.viewBoxDimension;if(i&&s0(i[r]))return i[r];var d=n[r]-o-s,u=n[r]+s;return t[r]?a[r]?d:u:a[r]?d<l[r]?Math.max(u,l[r]):Math.max(d,l[r]):u+o>l[r]+c?Math.max(d,l[r]):Math.max(u,l[r])}function V8(e){return(V8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function H8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function W8(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H8(Object(n),!0).forEach(function(t){Y8(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H8(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function $8(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Z8(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function G8(e,t,n){return t=X8(t),function(e,t){if(t&&("object"===V8(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,q8()?Reflect.construct(t,n||[],X8(e).constructor):t.apply(e,n))}function q8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(q8=function(){return!!e})()}function X8(e){return(X8=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function K8(e,t){return(K8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Y8(e,t,n){return(t=Z8(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Z8(e){var t=function(e,t){if("object"!=V8(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=V8(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==V8(t)?t:t+""}var J8=function(){function e(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return Y8(t=G8(this,e,[].concat(r)),"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),Y8(t,"handleKeyDown",function(e){var n,r,s,i;"Escape"===e.key&&t.setState({dismissed:!0,dismissedAtCoordinate:{x:null!==(n=null===(r=t.props.coordinate)||void 0===r?void 0:r.x)&&void 0!==n?n:0,y:null!==(s=null===(i=t.props.coordinate)||void 0===i?void 0:i.y)&&void 0!==s?s:0}})}),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&K8(e,t)}(e,hn.PureComponent),$8(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var e=this.wrapperNode.getBoundingClientRect();(Math.abs(e.width-this.state.lastBoundingBox.width)>1||Math.abs(e.height-this.state.lastBoundingBox.height)>1)&&this.setState({lastBoundingBox:{width:e.width,height:e.height}})}else-1===this.state.lastBoundingBox.width&&-1===this.state.lastBoundingBox.height||this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var e,t;this.props.active&&this.updateBBox(),this.state.dismissed&&((null===(e=this.props.coordinate)||void 0===e?void 0:e.x)===this.state.dismissedAtCoordinate.x&&(null===(t=this.props.coordinate)||void 0===t?void 0:t.y)===this.state.dismissedAtCoordinate.y||(this.state.dismissed=!1))}},{key:"render",value:function(){var e=this,t=this.props,n=t.active,r=t.allowEscapeViewBox,s=t.animationDuration,i=t.animationEasing,a=t.children,o=t.coordinate,l=t.hasPayload,c=t.isAnimationActive,d=t.offset,u=t.position,h=t.reverseDirection,p=t.useTranslate3d,m=t.viewBox,f=t.wrapperStyle,g=function(e){var t,n,r=e.allowEscapeViewBox,s=e.coordinate,i=e.offsetTopLeft,a=e.position,o=e.reverseDirection,l=e.tooltipBox,c=e.useTranslate3d,d=e.viewBox;return{cssProperties:l.height>0&&l.width>0&&s?function(e){var t=e.translateX,n=e.translateY;return{transform:e.useTranslate3d?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}({translateX:t=U8({allowEscapeViewBox:r,coordinate:s,key:"x",offsetTopLeft:i,position:a,reverseDirection:o,tooltipDimension:l.width,viewBox:d,viewBoxDimension:d.width}),translateY:n=U8({allowEscapeViewBox:r,coordinate:s,key:"y",offsetTopLeft:i,position:a,reverseDirection:o,tooltipDimension:l.height,viewBox:d,viewBoxDimension:d.height}),useTranslate3d:c}):z8,cssClasses:B8({translateX:t,translateY:n,coordinate:s})}}({allowEscapeViewBox:r,coordinate:o,offsetTopLeft:d,position:u,reverseDirection:h,tooltipBox:this.state.lastBoundingBox,useTranslate3d:p,viewBox:m}),x=g.cssClasses,v=g.cssProperties,y=W8(W8({transition:c&&n?"transform ".concat(s,"ms ").concat(i):void 0},v),{},{pointerEvents:"none",visibility:!this.state.dismissed&&n&&l?"visible":"hidden",position:"absolute",top:0,left:0},f);return fn.createElement("div",{tabIndex:-1,className:x,style:y,ref:function(t){e.wrapperNode=t}},a)}}])}(),Q8=!("undefined"!=typeof window&&window.document&&window.document.createElement&&window.setTimeout);function e9(e){return(e9="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function t9(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function n9(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?t9(Object(n),!0).forEach(function(t){l9(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):t9(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function r9(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,c9(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function s9(e,t,n){return t=a9(t),function(e,t){if(t&&("object"===e9(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,i9()?Reflect.construct(t,n||[],a9(e).constructor):t.apply(e,n))}function i9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(i9=function(){return!!e})()}function a9(e){return(a9=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function o9(e,t){return(o9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function l9(e,t,n){return(t=c9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c9(e){var t=function(e,t){if("object"!=e9(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=e9(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==e9(t)?t:t+""}function d9(e){return e.dataKey}var u9=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),s9(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o9(e,t)}(e,hn.PureComponent),r9(e,[{key:"render",value:function(){var e=this,t=this.props,n=t.active,r=t.allowEscapeViewBox,s=t.animationDuration,i=t.animationEasing,a=t.content,o=t.coordinate,l=t.filterNull,c=t.isAnimationActive,d=t.offset,u=t.payload,h=t.payloadUniqBy,p=t.position,m=t.reverseDirection,f=t.useTranslate3d,g=t.viewBox,x=t.wrapperStyle,v=null!=u?u:[];l&&v.length&&(v=x6(u.filter(function(t){return null!=t.value&&(!0!==t.hide||e.props.includeHidden)}),h,d9));var y=v.length>0;return fn.createElement(J8,{allowEscapeViewBox:r,animationDuration:s,animationEasing:i,isAnimationActive:c,active:n,coordinate:o,hasPayload:y,offset:d,position:p,reverseDirection:m,useTranslate3d:f,viewBox:g,wrapperStyle:x},function(e,t){return fn.isValidElement(e)?fn.cloneElement(e,t):"function"==typeof e?fn.createElement(e,t):fn.createElement(I8,t)}(a,n9(n9({},this.props),{},{payload:v})))}}])}();function h9(e){return(h9="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p9(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function m9(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p9(Object(n),!0).forEach(function(t){f9(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p9(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function f9(e,t,n){return t=function(e){var t=function(e,t){if("object"!=h9(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=h9(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==h9(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g9(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,s,i,a,o=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t);else for(;!(l=(r=i.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(d){c=!0,s=d}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw s}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return x9(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x9(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x9(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}l9(u9,"displayName","Tooltip"),l9(u9,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Q8,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var v9=hn.forwardRef(function(e,t){var n=e.aspect,r=e.initialDimension,s=void 0===r?{width:-1,height:-1}:r,i=e.width,a=void 0===i?"100%":i,o=e.height,l=void 0===o?"100%":o,c=e.minWidth,d=void 0===c?0:c,u=e.minHeight,h=e.maxHeight,p=e.children,m=e.debounce,f=void 0===m?0:m,g=e.id,x=e.className,v=e.onResize,y=e.style,b=void 0===y?{}:y,w=hn.useRef(null),j=hn.useRef();j.current=v,hn.useImperativeHandle(t,function(){return Object.defineProperty(w.current,"current",{get:function(){return w.current},configurable:!0})});var N=g9(hn.useState({containerWidth:s.width,containerHeight:s.height}),2),_=N[0],S=N[1],M=hn.useCallback(function(e,t){S(function(n){var r=Math.round(e),s=Math.round(t);return n.containerWidth===r&&n.containerHeight===s?n:{containerWidth:r,containerHeight:s}})},[]);hn.useEffect(function(){var e=function(e){var t,n=e[0].contentRect,r=n.width,s=n.height;M(r,s),null===(t=j.current)||void 0===t||t.call(j,r,s)};f>0&&(e=aA(e,f,{trailing:!0,leading:!1}));var t=new ResizeObserver(e),n=w.current.getBoundingClientRect(),r=n.width,s=n.height;return M(r,s),t.observe(w.current),function(){t.disconnect()}},[M,f]);var C=hn.useMemo(function(){var e=_.containerWidth,t=_.containerHeight;if(e<0||t<0)return null;q0(r0(a)||r0(l),"The width(%s) and height(%s) are both fixed numbers,\n       maybe you don't need to use a ResponsiveContainer.",a,l),q0(!n||n>0,"The aspect(%s) must be greater than zero.",n);var r=r0(a)?e:a,s=r0(l)?t:l;n&&n>0&&(r?s=r/n:s&&(r=s*n),h&&s>h&&(s=h)),q0(r>0||s>0,"The width(%s) and height(%s) of chart should be greater than 0,\n       please check the style of container, or the props width(%s) and height(%s),\n       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the\n       height and width.",r,s,a,l,d,u,n);var i=!Array.isArray(p)&&M0(p.type).endsWith("Chart");return fn.Children.map(p,function(e){return fn.isValidElement(e)?hn.cloneElement(e,m9({width:r,height:s},i?{style:m9({height:"100%",width:"100%",maxHeight:s,maxWidth:r},e.props.style)}:{})):e})},[n,p,l,h,u,d,_,a]);return fn.createElement("div",{id:g?"".concat(g):void 0,className:Bo("recharts-responsive-container",x),style:m9(m9({},b),{},{width:a,height:l,minWidth:d,minHeight:u,maxHeight:h}),ref:w},C)}),y9=function(e){return null};function b9(e){return(b9="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w9(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function j9(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w9(Object(n),!0).forEach(function(t){N9(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w9(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function N9(e,t,n){return t=function(e){var t=function(e,t){if("object"!=b9(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=b9(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==b9(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}y9.displayName="Cell";var _9={widthCache:{},cacheCount:0},S9={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},M9="recharts_measurement_span";var C9=function(e){if(null==e||Q8)return{width:0,height:0};var t,n=(t=j9({},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),Object.keys(t).forEach(function(e){t[e]||delete t[e]}),t),r=JSON.stringify({text:e,copyStyle:n});if(_9.widthCache[r])return _9.widthCache[r];try{var s=document.getElementById(M9);s||((s=document.createElement("span")).setAttribute("id",M9),s.setAttribute("aria-hidden","true"),document.body.appendChild(s));var i=j9(j9({},S9),n);Object.assign(s.style,i),s.textContent="".concat(e);var a=s.getBoundingClientRect(),o={width:a.width,height:a.height};return _9.widthCache[r]=o,++_9.cacheCount>2e3&&(_9.cacheCount=0,_9.widthCache={}),o}catch(l){return{width:0,height:0}}};function E9(e){return(E9="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k9(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,s,i,a,o=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(d){c=!0,s=d}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw s}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return A9(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return A9(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A9(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function T9(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,P9(r.key),r)}}function P9(e){var t=function(e,t){if("object"!=E9(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=E9(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==E9(t)?t:t+""}var O9=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,R9=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,I9=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,D9=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,L9={cm:96/2.54,mm:96/25.4,pt:96/72,pc:16,in:96,Q:96/101.6,px:1},F9=Object.keys(L9),z9="NaN";var B9=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.num=t,this.unit=n,this.num=t,this.unit=n,Number.isNaN(t)&&(this.unit=""),""===n||I9.test(n)||(this.num=NaN,this.unit=""),F9.includes(n)&&(this.num=function(e,t){return e*L9[t]}(t,n),this.unit="px")}return t=e,r=[{key:"parse",value:function(t){var n,r=k9(null!==(n=D9.exec(t))&&void 0!==n?n:[],3),s=r[1],i=r[2];return new e(parseFloat(s),null!=i?i:"")}}],(n=[{key:"add",value:function(t){return this.unit!==t.unit?new e(NaN,""):new e(this.num+t.num,this.unit)}},{key:"subtract",value:function(t){return this.unit!==t.unit?new e(NaN,""):new e(this.num-t.num,this.unit)}},{key:"multiply",value:function(t){return""!==this.unit&&""!==t.unit&&this.unit!==t.unit?new e(NaN,""):new e(this.num*t.num,this.unit||t.unit)}},{key:"divide",value:function(t){return""!==this.unit&&""!==t.unit&&this.unit!==t.unit?new e(NaN,""):new e(this.num/t.num,this.unit||t.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}])&&T9(t.prototype,n),r&&T9(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();function U9(e){if(e.includes(z9))return z9;for(var t=e;t.includes("*")||t.includes("/");){var n,r=k9(null!==(n=O9.exec(t))&&void 0!==n?n:[],4),s=r[1],i=r[2],a=r[3],o=B9.parse(null!=s?s:""),l=B9.parse(null!=a?a:""),c="*"===i?o.multiply(l):o.divide(l);if(c.isNaN())return z9;t=t.replace(O9,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var d,u=k9(null!==(d=R9.exec(t))&&void 0!==d?d:[],4),h=u[1],p=u[2],m=u[3],f=B9.parse(null!=h?h:""),g=B9.parse(null!=m?m:""),x="+"===p?f.add(g):f.subtract(g);if(x.isNaN())return z9;t=t.replace(R9,x.toString())}return t}var V9=/\(([^()]*)\)/;function H9(e){var t=e.replace(/\s+/g,"");return t=function(e){for(var t=e;t.includes("(");){var n=k9(V9.exec(t),2)[1];t=t.replace(V9,U9(n))}return t}(t),t=U9(t)}function W9(e){var t=function(e){try{return H9(e)}catch(t){return z9}}(e.slice(5,-1));return t===z9?"":t}var $9=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],G9=["dx","dy","angle","className","breakAll"];function q9(){return q9=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},q9.apply(this,arguments)}function X9(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function K9(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,s,i,a,o=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(d){c=!0,s=d}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw s}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Y9(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Y9(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y9(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Z9=/[ \f\n\r\t\v\u2028\u2029]+/,J9=function(e){var t=e.children,n=e.breakAll,r=e.style;try{var s=[];return MQ(t)||(s=n?t.toString().split(""):t.toString().split(Z9)),{wordsWithComputedWidth:s.map(function(e){return{word:e,width:C9(e,r).width}}),spaceWidth:n?0:C9("",r).width}}catch(i){return null}},Q9=function(e){return[{words:MQ(e)?[]:e.toString().split(Z9)}]},e7=function(e){var t=e.width,n=e.scaleToFit,r=e.children,s=e.style,i=e.breakAll,a=e.maxLines;if((t||n)&&!Q8){var o=J9({breakAll:i,children:r,style:s});return o?function(e,t,n,r,s){var i=e.maxLines,a=e.children,o=e.style,l=e.breakAll,c=s0(i),d=a,u=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce(function(e,t){var i=t.word,a=t.width,o=e[e.length-1];if(o&&(null==r||s||o.width+a+n<Number(r)))o.words.push(i),o.width+=a+n;else{var l={words:[i],width:a};e.push(l)}return e},[])},h=u(t);if(!c)return h;for(var p,m=function(e){var t=d.slice(0,e),n=J9({breakAll:l,style:o,children:t+""}).wordsWithComputedWidth,s=u(n),a=s.length>i||function(e){return e.reduce(function(e,t){return e.width>t.width?e:t})}(s).width>Number(r);return[a,s]},f=0,g=d.length-1,x=0;f<=g&&x<=d.length-1;){var v=Math.floor((f+g)/2),y=K9(m(v-1),2),b=y[0],w=y[1],j=K9(m(v),1)[0];if(b||j||(f=v+1),b&&j&&(g=v-1),!b&&j){p=w;break}x++}return p||h}({breakAll:i,children:r,maxLines:a,style:s},o.wordsWithComputedWidth,o.spaceWidth,t,n):Q9(r)}return Q9(r)},t7="#808080",n7=function(e){var t=e.x,n=void 0===t?0:t,r=e.y,s=void 0===r?0:r,i=e.lineHeight,a=void 0===i?"1em":i,o=e.capHeight,l=void 0===o?"0.71em":o,c=e.scaleToFit,d=void 0!==c&&c,u=e.textAnchor,h=void 0===u?"start":u,p=e.verticalAnchor,m=void 0===p?"end":p,f=e.fill,g=void 0===f?t7:f,x=X9(e,$9),v=hn.useMemo(function(){return e7({breakAll:x.breakAll,children:x.children,maxLines:x.maxLines,scaleToFit:d,style:x.style,width:x.width})},[x.breakAll,x.children,x.maxLines,d,x.style,x.width]),y=x.dx,b=x.dy,w=x.angle,j=x.className,N=x.breakAll,_=X9(x,G9);if(!i0(n)||!i0(s))return null;var S,M=n+(s0(y)?y:0),C=s+(s0(b)?b:0);switch(m){case"start":S=W9("calc(".concat(l,")"));break;case"middle":S=W9("calc(".concat((v.length-1)/2," * -").concat(a," + (").concat(l," / 2))"));break;default:S=W9("calc(".concat(v.length-1," * -").concat(a,")"))}var E=[];if(d){var k=v[0].width,A=x.width;E.push("scale(".concat((s0(A)?A/k:1)/k,")"))}return w&&E.push("rotate(".concat(w,", ").concat(M,", ").concat(C,")")),E.length&&(_.transform=E.join(" ")),fn.createElement("text",q9({},I0(_,!0),{x:M,y:C,className:Bo("recharts-text",j),textAnchor:h,fill:g.includes("url")?t7:g}),v.map(function(e,t){var n=e.words.join(N?"":" ");return fn.createElement("tspan",{x:M,dy:0===t?S:a,key:"".concat(n,"-").concat(t)},n)}))};function r7(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function s7(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function i7(e){let t,n,r;function s(e,r,s=0,i=e.length){if(s<i){if(0!==t(r,r))return i;do{const t=s+i>>>1;n(e[t],r)<0?s=t+1:i=t}while(s<i)}return s}return 2!==e.length?(t=r7,n=(t,n)=>r7(e(t),n),r=(t,n)=>e(t)-n):(t=e===r7||e===s7?e:a7,n=e,r=e),{left:s,center:function(e,t,n=0,i=e.length){const a=s(e,t,n,i-1);return a>n&&r(e[a-1],t)>-r(e[a],t)?a-1:a},right:function(e,r,s=0,i=e.length){if(s<i){if(0!==t(r,r))return i;do{const t=s+i>>>1;n(e[t],r)<=0?s=t+1:i=t}while(s<i)}return s}}}function a7(){return 0}function o7(e){return null===e?NaN:+e}const l7=i7(r7).right;i7(o7).center;class c7 extends Map{constructor(e,t=u7){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(const[n,r]of e)this.set(n,r)}get(e){return super.get(d7(this,e))}has(e){return super.has(d7(this,e))}set(e,t){return super.set(function({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}(this,e),t)}delete(e){return super.delete(function({_intern:e,_key:t},n){const r=t(n);e.has(r)&&(n=e.get(r),e.delete(r));return n}(this,e))}}function d7({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function u7(e){return null!==e&&"object"==typeof e?e.valueOf():e}function h7(e,t){return(null==e||!(e>=e))-(null==t||!(t>=t))||(e<t?-1:e>t?1:0)}const p7=Math.sqrt(50),m7=Math.sqrt(10),f7=Math.sqrt(2);function g7(e,t,n){const r=(t-e)/Math.max(0,n),s=Math.floor(Math.log10(r)),i=r/Math.pow(10,s),a=i>=p7?10:i>=m7?5:i>=f7?2:1;let o,l,c;return s<0?(c=Math.pow(10,-s)/a,o=Math.round(e*c),l=Math.round(t*c),o/c<e&&++o,l/c>t&&--l,c=-c):(c=Math.pow(10,s)*a,o=Math.round(e/c),l=Math.round(t/c),o*c<e&&++o,l*c>t&&--l),l<o&&.5<=n&&n<2?g7(e,t,2*n):[o,l,c]}function x7(e,t,n){if(!((n=+n)>0))return[];if((e=+e)===(t=+t))return[e];const r=t<e,[s,i,a]=r?g7(t,e,n):g7(e,t,n);if(!(i>=s))return[];const o=i-s+1,l=new Array(o);if(r)if(a<0)for(let c=0;c<o;++c)l[c]=(i-c)/-a;else for(let c=0;c<o;++c)l[c]=(i-c)*a;else if(a<0)for(let c=0;c<o;++c)l[c]=(s+c)/-a;else for(let c=0;c<o;++c)l[c]=(s+c)*a;return l}function v7(e,t,n){return g7(e=+e,t=+t,n=+n)[2]}function y7(e,t,n){n=+n;const r=(t=+t)<(e=+e),s=r?v7(t,e,n):v7(e,t,n);return(r?-1:1)*(s<0?1/-s:s)}function b7(e,t){let n;for(const r of e)null!=r&&(n<r||void 0===n&&r>=r)&&(n=r);return n}function w7(e,t){let n;for(const r of e)null!=r&&(n>r||void 0===n&&r>=r)&&(n=r);return n}function j7(e,t,n=0,r=1/0,s){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(s=void 0===s?h7:function(e=r7){if(e===r7)return h7;if("function"!=typeof e)throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||0===r?r:(0===e(n,n))-(0===e(t,t))}}(s);r>n;){if(r-n>600){const i=r-n+1,a=t-n+1,o=Math.log(i),l=.5*Math.exp(2*o/3),c=.5*Math.sqrt(o*l*(i-l)/i)*(a-i/2<0?-1:1);j7(e,t,Math.max(n,Math.floor(t-a*l/i+c)),Math.min(r,Math.floor(t+(i-a)*l/i+c)),s)}const i=e[t];let a=n,o=r;for(N7(e,n,t),s(e[r],i)>0&&N7(e,n,r);a<o;){for(N7(e,a,o),++a,--o;s(e[a],i)<0;)++a;for(;s(e[o],i)>0;)--o}0===s(e[n],i)?N7(e,n,o):(++o,N7(e,o,r)),o<=t&&(n=o+1),t<=o&&(r=o-1)}return e}function N7(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function _7(e,t,n=o7){if((r=e.length)&&!isNaN(t=+t)){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,s=(r-1)*t,i=Math.floor(s),a=+n(e[i],i,e);return a+(+n(e[i+1],i+1,e)-a)*(s-i)}}function S7(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function M7(e,t){switch(arguments.length){case 0:break;case 1:"function"==typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"==typeof t?this.interpolator(t):this.range(t)}return this}const C7=Symbol("implicit");function E7(){var e=new c7,t=[],n=[],r=C7;function s(s){let i=e.get(s);if(void 0===i){if(r!==C7)return r;e.set(s,i=t.push(s)-1)}return n[i%n.length]}return s.domain=function(n){if(!arguments.length)return t.slice();t=[],e=new c7;for(const r of n)e.has(r)||e.set(r,t.push(r)-1);return s},s.range=function(e){return arguments.length?(n=Array.from(e),s):n.slice()},s.unknown=function(e){return arguments.length?(r=e,s):r},s.copy=function(){return E7(t,n).unknown(r)},S7.apply(s,arguments),s}function k7(){var e,t,n=E7().unknown(void 0),r=n.domain,s=n.range,i=0,a=1,o=!1,l=0,c=0,d=.5;function u(){var n=r().length,u=a<i,h=u?a:i,p=u?i:a;e=(p-h)/Math.max(1,n-l+2*c),o&&(e=Math.floor(e)),h+=(p-h-e*(n-l))*d,t=e*(1-l),o&&(h=Math.round(h),t=Math.round(t));var m=function(e,t,n){e=+e,t=+t,n=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+n;for(var r=-1,s=0|Math.max(0,Math.ceil((t-e)/n)),i=new Array(s);++r<s;)i[r]=e+r*n;return i}(n).map(function(t){return h+e*t});return s(u?m.reverse():m)}return delete n.unknown,n.domain=function(e){return arguments.length?(r(e),u()):r()},n.range=function(e){return arguments.length?([i,a]=e,i=+i,a=+a,u()):[i,a]},n.rangeRound=function(e){return[i,a]=e,i=+i,a=+a,o=!0,u()},n.bandwidth=function(){return t},n.step=function(){return e},n.round=function(e){return arguments.length?(o=!!e,u()):o},n.padding=function(e){return arguments.length?(l=Math.min(1,c=+e),u()):l},n.paddingInner=function(e){return arguments.length?(l=Math.min(1,e),u()):l},n.paddingOuter=function(e){return arguments.length?(c=+e,u()):c},n.align=function(e){return arguments.length?(d=Math.max(0,Math.min(1,e)),u()):d},n.copy=function(){return k7(r(),[i,a]).round(o).paddingInner(l).paddingOuter(c).align(d)},S7.apply(u(),arguments)}function A7(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return A7(t())},e}function T7(){return A7(k7.apply(null,arguments).paddingInner(1))}function P7(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function O7(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function R7(){}var I7=.7,D7=1/I7,L7="\\s*([+-]?\\d+)\\s*",F7="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",z7="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",B7=/^#([0-9a-f]{3,8})$/,U7=new RegExp(`^rgb\\(${L7},${L7},${L7}\\)$`),V7=new RegExp(`^rgb\\(${z7},${z7},${z7}\\)$`),H7=new RegExp(`^rgba\\(${L7},${L7},${L7},${F7}\\)$`),W7=new RegExp(`^rgba\\(${z7},${z7},${z7},${F7}\\)$`),$7=new RegExp(`^hsl\\(${F7},${z7},${z7}\\)$`),G7=new RegExp(`^hsla\\(${F7},${z7},${z7},${F7}\\)$`),q7={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function X7(){return this.rgb().formatHex()}function K7(){return this.rgb().formatRgb()}function Y7(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=B7.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?Z7(t):3===n?new eee(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?J7(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?J7(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=U7.exec(e))?new eee(t[1],t[2],t[3],1):(t=V7.exec(e))?new eee(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=H7.exec(e))?J7(t[1],t[2],t[3],t[4]):(t=W7.exec(e))?J7(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=$7.exec(e))?aee(t[1],t[2]/100,t[3]/100,1):(t=G7.exec(e))?aee(t[1],t[2]/100,t[3]/100,t[4]):q7.hasOwnProperty(e)?Z7(q7[e]):"transparent"===e?new eee(NaN,NaN,NaN,0):null}function Z7(e){return new eee(e>>16&255,e>>8&255,255&e,1)}function J7(e,t,n,r){return r<=0&&(e=t=n=NaN),new eee(e,t,n,r)}function Q7(e,t,n,r){return 1===arguments.length?((s=e)instanceof R7||(s=Y7(s)),s?new eee((s=s.rgb()).r,s.g,s.b,s.opacity):new eee):new eee(e,t,n,null==r?1:r);var s}function eee(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function tee(){return`#${iee(this.r)}${iee(this.g)}${iee(this.b)}`}function nee(){const e=ree(this.opacity);return`${1===e?"rgb(":"rgba("}${see(this.r)}, ${see(this.g)}, ${see(this.b)}${1===e?")":`, ${e})`}`}function ree(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function see(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function iee(e){return((e=see(e))<16?"0":"")+e.toString(16)}function aee(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new lee(e,t,n,r)}function oee(e){if(e instanceof lee)return new lee(e.h,e.s,e.l,e.opacity);if(e instanceof R7||(e=Y7(e)),!e)return new lee;if(e instanceof lee)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,s=Math.min(t,n,r),i=Math.max(t,n,r),a=NaN,o=i-s,l=(i+s)/2;return o?(a=t===i?(n-r)/o+6*(n<r):n===i?(r-t)/o+2:(t-n)/o+4,o/=l<.5?i+s:2-i-s,a*=60):o=l>0&&l<1?0:a,new lee(a,o,l,e.opacity)}function lee(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function cee(e){return(e=(e||0)%360)<0?e+360:e}function dee(e){return Math.max(0,Math.min(1,e||0))}function uee(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}P7(R7,Y7,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:X7,formatHex:X7,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return oee(this).formatHsl()},formatRgb:K7,toString:K7}),P7(eee,Q7,O7(R7,{brighter(e){return e=null==e?D7:Math.pow(D7,e),new eee(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?I7:Math.pow(I7,e),new eee(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new eee(see(this.r),see(this.g),see(this.b),ree(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:tee,formatHex:tee,formatHex8:function(){return`#${iee(this.r)}${iee(this.g)}${iee(this.b)}${iee(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:nee,toString:nee})),P7(lee,function(e,t,n,r){return 1===arguments.length?oee(e):new lee(e,t,n,null==r?1:r)},O7(R7,{brighter(e){return e=null==e?D7:Math.pow(D7,e),new lee(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?I7:Math.pow(I7,e),new lee(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,s=2*n-r;return new eee(uee(e>=240?e-240:e+120,s,r),uee(e,s,r),uee(e<120?e+240:e-120,s,r),this.opacity)},clamp(){return new lee(cee(this.h),dee(this.s),dee(this.l),ree(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=ree(this.opacity);return`${1===e?"hsl(":"hsla("}${cee(this.h)}, ${100*dee(this.s)}%, ${100*dee(this.l)}%${1===e?")":`, ${e})`}`}}));const hee=e=>()=>e;function pee(e){return 1===(e=+e)?mee:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):hee(isNaN(t)?n:t)}}function mee(e,t){var n=t-e;return n?function(e,t){return function(n){return e+n*t}}(e,n):hee(isNaN(e)?t:e)}const fee=function e(t){var n=pee(t);function r(e,t){var r=n((e=Q7(e)).r,(t=Q7(t)).r),s=n(e.g,t.g),i=n(e.b,t.b),a=mee(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=s(t),e.b=i(t),e.opacity=a(t),e+""}}return r.gamma=e,r}(1);function gee(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,s=t.slice();return function(i){for(n=0;n<r;++n)s[n]=e[n]*(1-i)+t[n]*i;return s}}function xee(e,t){var n,r=t?t.length:0,s=e?Math.min(r,e.length):0,i=new Array(s),a=new Array(r);for(n=0;n<s;++n)i[n]=_ee(e[n],t[n]);for(;n<r;++n)a[n]=t[n];return function(e){for(n=0;n<s;++n)a[n]=i[n](e);return a}}function vee(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function yee(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function bee(e,t){var n,r={},s={};for(n in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)n in e?r[n]=_ee(e[n],t[n]):s[n]=t[n];return function(e){for(n in r)s[n]=r[n](e);return s}}var wee=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,jee=new RegExp(wee.source,"g");function Nee(e,t){var n,r,s,i=wee.lastIndex=jee.lastIndex=0,a=-1,o=[],l=[];for(e+="",t+="";(n=wee.exec(e))&&(r=jee.exec(t));)(s=r.index)>i&&(s=t.slice(i,s),o[a]?o[a]+=s:o[++a]=s),(n=n[0])===(r=r[0])?o[a]?o[a]+=r:o[++a]=r:(o[++a]=null,l.push({i:a,x:yee(n,r)})),i=jee.lastIndex;return i<t.length&&(s=t.slice(i),o[a]?o[a]+=s:o[++a]=s),o.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,r=0;r<t;++r)o[(n=l[r]).i]=n.x(e);return o.join("")})}function _ee(e,t){var n,r,s=typeof t;return null==t||"boolean"===s?hee(t):("number"===s?yee:"string"===s?(n=Y7(t))?(t=n,fee):Nee:t instanceof Y7?fee:t instanceof Date?vee:(r=t,!ArrayBuffer.isView(r)||r instanceof DataView?Array.isArray(t)?xee:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?bee:yee:gee))(e,t)}function See(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function Mee(e){return+e}var Cee=[0,1];function Eee(e){return e}function kee(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:(n=isNaN(t)?NaN:.5,function(){return n});var n}function Aee(e,t,n){var r=e[0],s=e[1],i=t[0],a=t[1];return s<r?(r=kee(s,r),i=n(a,i)):(r=kee(r,s),i=n(i,a)),function(e){return i(r(e))}}function Tee(e,t,n){var r=Math.min(e.length,t.length)-1,s=new Array(r),i=new Array(r),a=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<r;)s[a]=kee(e[a],e[a+1]),i[a]=n(t[a],t[a+1]);return function(t){var n=l7(e,t,1,r)-1;return i[n](s[n](t))}}function Pee(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Oee(){var e,t,n,r,s,i,a=Cee,o=Cee,l=_ee,c=Eee;function d(){var e,t,n,l=Math.min(a.length,o.length);return c!==Eee&&(e=a[0],t=a[l-1],e>t&&(n=e,e=t,t=n),c=function(n){return Math.max(e,Math.min(t,n))}),r=l>2?Tee:Aee,s=i=null,u}function u(t){return null==t||isNaN(t=+t)?n:(s||(s=r(a.map(e),o,l)))(e(c(t)))}return u.invert=function(n){return c(t((i||(i=r(o,a.map(e),yee)))(n)))},u.domain=function(e){return arguments.length?(a=Array.from(e,Mee),d()):a.slice()},u.range=function(e){return arguments.length?(o=Array.from(e),d()):o.slice()},u.rangeRound=function(e){return o=Array.from(e),l=See,d()},u.clamp=function(e){return arguments.length?(c=!!e||Eee,d()):c!==Eee},u.interpolate=function(e){return arguments.length?(l=e,d()):l},u.unknown=function(e){return arguments.length?(n=e,u):n},function(n,r){return e=n,t=r,d()}}function Ree(){return Oee()(Eee,Eee)}function Iee(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Dee(e){return(e=Iee(Math.abs(e)))?e[1]:NaN}var Lee,Fee=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function zee(e){if(!(t=Fee.exec(e)))throw new Error("invalid format: "+e);var t;return new Bee({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function Bee(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function Uee(e,t){var n=Iee(e,t);if(!n)return e+"";var r=n[0],s=n[1];return s<0?"0."+new Array(-s).join("0")+r:r.length>s+1?r.slice(0,s+1)+"."+r.slice(s+1):r+new Array(s-r.length+2).join("0")}zee.prototype=Bee.prototype,Bee.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const Vee={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Uee(100*e,t),r:Uee,s:function(e,t){var n=Iee(e,t);if(!n)return e+"";var r=n[0],s=n[1],i=s-(Lee=3*Math.max(-8,Math.min(8,Math.floor(s/3))))+1,a=r.length;return i===a?r:i>a?r+new Array(i-a+1).join("0"):i>0?r.slice(0,i)+"."+r.slice(i):"0."+new Array(1-i).join("0")+Iee(e,Math.max(0,t+i-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Hee(e){return e}var Wee,$ee,Gee,qee=Array.prototype.map,Xee=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Kee(e){var t,n,r=void 0===e.grouping||void 0===e.thousands?Hee:(t=qee.call(e.grouping,Number),n=e.thousands+"",function(e,r){for(var s=e.length,i=[],a=0,o=t[0],l=0;s>0&&o>0&&(l+o+1>r&&(o=Math.max(1,r-l)),i.push(e.substring(s-=o,s+o)),!((l+=o+1)>r));)o=t[a=(a+1)%t.length];return i.reverse().join(n)}),s=void 0===e.currency?"":e.currency[0]+"",i=void 0===e.currency?"":e.currency[1]+"",a=void 0===e.decimal?".":e.decimal+"",o=void 0===e.numerals?Hee:function(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}}(qee.call(e.numerals,String)),l=void 0===e.percent?"%":e.percent+"",c=void 0===e.minus?"":e.minus+"",d=void 0===e.nan?"NaN":e.nan+"";function u(e){var t=(e=zee(e)).fill,n=e.align,u=e.sign,h=e.symbol,p=e.zero,m=e.width,f=e.comma,g=e.precision,x=e.trim,v=e.type;"n"===v?(f=!0,v="g"):Vee[v]||(void 0===g&&(g=12),x=!0,v="g"),(p||"0"===t&&"="===n)&&(p=!0,t="0",n="=");var y="$"===h?s:"#"===h&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",b="$"===h?i:/[%p]/.test(v)?l:"",w=Vee[v],j=/[defgprs%]/.test(v);function N(e){var s,i,l,h=y,N=b;if("c"===v)N=w(e)+N,e="";else{var _=(e=+e)<0||1/e<0;if(e=isNaN(e)?d:w(Math.abs(e),g),x&&(e=function(e){e:for(var t,n=e.length,r=1,s=-1;r<n;++r)switch(e[r]){case".":s=t=r;break;case"0":0===s&&(s=r),t=r;break;default:if(!+e[r])break e;s>0&&(s=0)}return s>0?e.slice(0,s)+e.slice(t+1):e}(e)),_&&0===+e&&"+"!==u&&(_=!1),h=(_?"("===u?u:c:"-"===u||"("===u?"":u)+h,N=("s"===v?Xee[8+Lee/3]:"")+N+(_&&"("===u?")":""),j)for(s=-1,i=e.length;++s<i;)if(48>(l=e.charCodeAt(s))||l>57){N=(46===l?a+e.slice(s+1):e.slice(s))+N,e=e.slice(0,s);break}}f&&!p&&(e=r(e,1/0));var S=h.length+e.length+N.length,M=S<m?new Array(m-S+1).join(t):"";switch(f&&p&&(e=r(M+e,M.length?m-N.length:1/0),M=""),n){case"<":e=h+e+N+M;break;case"=":e=h+M+e+N;break;case"^":e=M.slice(0,S=M.length>>1)+h+e+N+M.slice(S);break;default:e=M+h+e+N}return o(e)}return g=void 0===g?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),N.toString=function(){return e+""},N}return{format:u,formatPrefix:function(e,t){var n=u(((e=zee(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(Dee(t)/3))),s=Math.pow(10,-r),i=Xee[8+r/3];return function(e){return n(s*e)+i}}}}function Yee(e,t,n,r){var s,i=y7(e,t,n);switch((r=zee(null==r?",f":r)).type){case"s":var a=Math.max(Math.abs(e),Math.abs(t));return null!=r.precision||isNaN(s=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Dee(t)/3)))-Dee(Math.abs(e)))}(i,a))||(r.precision=s),Gee(r,a);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(s=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Dee(t)-Dee(e))+1}(i,Math.max(Math.abs(e),Math.abs(t))))||(r.precision=s-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(s=function(e){return Math.max(0,-Dee(Math.abs(e)))}(i))||(r.precision=s-2*("%"===r.type))}return $ee(r)}function Zee(e){var t=e.domain;return e.ticks=function(e){var n=t();return x7(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var r=t();return Yee(r[0],r[r.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var r,s,i=t(),a=0,o=i.length-1,l=i[a],c=i[o],d=10;for(c<l&&(s=l,l=c,c=s,s=a,a=o,o=s);d-- >0;){if((s=v7(l,c,n))===r)return i[a]=l,i[o]=c,t(i);if(s>0)l=Math.floor(l/s)*s,c=Math.ceil(c/s)*s;else{if(!(s<0))break;l=Math.ceil(l*s)/s,c=Math.floor(c*s)/s}r=s}return e},e}function Jee(){var e=Ree();return e.copy=function(){return Pee(e,Jee())},S7.apply(e,arguments),Zee(e)}function Qee(e,t){var n,r=0,s=(e=e.slice()).length-1,i=e[r],a=e[s];return a<i&&(n=r,r=s,s=n,n=i,i=a,a=n),e[r]=t.floor(i),e[s]=t.ceil(a),e}function ete(e){return Math.log(e)}function tte(e){return Math.exp(e)}function nte(e){return-Math.log(-e)}function rte(e){return-Math.exp(-e)}function ste(e){return isFinite(e)?+("1e"+e):e<0?0:e}function ite(e){return(t,n)=>-e(-t,n)}function ate(e){const t=e(ete,tte),n=t.domain;let r,s,i=10;function a(){return r=function(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}(i),s=function(e){return 10===e?ste:e===Math.E?Math.exp:t=>Math.pow(e,t)}(i),n()[0]<0?(r=ite(r),s=ite(s),e(nte,rte)):e(ete,tte),t}return t.base=function(e){return arguments.length?(i=+e,a()):i},t.domain=function(e){return arguments.length?(n(e),a()):n()},t.ticks=e=>{const t=n();let a=t[0],o=t[t.length-1];const l=o<a;l&&([a,o]=[o,a]);let c,d,u=r(a),h=r(o);const p=null==e?10:+e;let m=[];if(!(i%1)&&h-u<p){if(u=Math.floor(u),h=Math.ceil(h),a>0){for(;u<=h;++u)for(c=1;c<i;++c)if(d=u<0?c/s(-u):c*s(u),!(d<a)){if(d>o)break;m.push(d)}}else for(;u<=h;++u)for(c=i-1;c>=1;--c)if(d=u>0?c/s(-u):c*s(u),!(d<a)){if(d>o)break;m.push(d)}2*m.length<p&&(m=x7(a,o,p))}else m=x7(u,h,Math.min(h-u,p)).map(s);return l?m.reverse():m},t.tickFormat=(e,n)=>{if(null==e&&(e=10),null==n&&(n=10===i?"s":","),"function"!=typeof n&&(i%1||null!=(n=zee(n)).precision||(n.trim=!0),n=$ee(n)),e===1/0)return n;const a=Math.max(1,i*e/t.ticks().length);return e=>{let t=e/s(Math.round(r(e)));return t*i<i-.5&&(t*=i),t<=a?n(e):""}},t.nice=()=>n(Qee(n(),{floor:e=>s(Math.floor(r(e))),ceil:e=>s(Math.ceil(r(e)))})),t}function ote(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function lte(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function cte(e){var t=1,n=e(ote(t),lte(t));return n.constant=function(n){return arguments.length?e(ote(t=+n),lte(t)):t},Zee(n)}function dte(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function ute(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function hte(e){return e<0?-e*e:e*e}function pte(e){var t=e(Eee,Eee),n=1;return t.exponent=function(t){return arguments.length?1===(n=+t)?e(Eee,Eee):.5===n?e(ute,hte):e(dte(n),dte(1/n)):n},Zee(t)}function mte(){var e=pte(Oee());return e.copy=function(){return Pee(e,mte()).exponent(e.exponent())},S7.apply(e,arguments),e}function fte(e){return Math.sign(e)*e*e}Wee=Kee({thousands:",",grouping:[3],currency:["$",""]}),$ee=Wee.format,Gee=Wee.formatPrefix;const gte=new Date,xte=new Date;function vte(e,t,n,r){function s(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return s.floor=t=>(e(t=new Date(+t)),t),s.ceil=n=>(e(n=new Date(n-1)),t(n,1),e(n),n),s.round=e=>{const t=s(e),n=s.ceil(e);return e-t<n-e?t:n},s.offset=(e,n)=>(t(e=new Date(+e),null==n?1:Math.floor(n)),e),s.range=(n,r,i)=>{const a=[];if(n=s.ceil(n),i=null==i?1:Math.floor(i),!(n<r&&i>0))return a;let o;do{a.push(o=new Date(+n)),t(n,i),e(n)}while(o<n&&n<r);return a},s.filter=n=>vte(t=>{if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)},(e,r)=>{if(e>=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!n(e););else for(;--r>=0;)for(;t(e,1),!n(e););}),n&&(s.count=(t,r)=>(gte.setTime(+t),xte.setTime(+r),e(gte),e(xte),Math.floor(n(gte,xte))),s.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?s.filter(r?t=>r(t)%e===0:t=>s.count(0,t)%e===0):s:null)),s}const yte=vte(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);yte.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?vte(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):yte:null);const bte=1e3,wte=6e4,jte=36e5,Nte=864e5,_te=6048e5,Ste=2592e6,Mte=31536e6,Cte=vte(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*bte)},(e,t)=>(t-e)/bte,e=>e.getUTCSeconds()),Ete=vte(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*bte)},(e,t)=>{e.setTime(+e+t*wte)},(e,t)=>(t-e)/wte,e=>e.getMinutes()),kte=vte(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*wte)},(e,t)=>(t-e)/wte,e=>e.getUTCMinutes()),Ate=vte(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*bte-e.getMinutes()*wte)},(e,t)=>{e.setTime(+e+t*jte)},(e,t)=>(t-e)/jte,e=>e.getHours()),Tte=vte(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*jte)},(e,t)=>(t-e)/jte,e=>e.getUTCHours()),Pte=vte(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*wte)/Nte,e=>e.getDate()-1),Ote=vte(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Nte,e=>e.getUTCDate()-1),Rte=vte(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Nte,e=>Math.floor(e/Nte));function Ite(e){return vte(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(e,t)=>{e.setDate(e.getDate()+7*t)},(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*wte)/_te)}const Dte=Ite(0),Lte=Ite(1);Ite(2),Ite(3);const Fte=Ite(4);function zte(e){return vte(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+7*t)},(e,t)=>(t-e)/_te)}Ite(5),Ite(6);const Bte=zte(0),Ute=zte(1);zte(2),zte(3);const Vte=zte(4);zte(5),zte(6);const Hte=vte(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear()),e=>e.getMonth()),Wte=vte(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear()),e=>e.getUTCMonth()),$te=vte(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());$te.every=e=>isFinite(e=Math.floor(e))&&e>0?vte(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)}):null;const Gte=vte(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());function qte(e,t,n,r,s,i){const a=[[Cte,1,bte],[Cte,5,5e3],[Cte,15,15e3],[Cte,30,3e4],[i,1,wte],[i,5,3e5],[i,15,9e5],[i,30,18e5],[s,1,jte],[s,3,108e5],[s,6,216e5],[s,12,432e5],[r,1,Nte],[r,2,1728e5],[n,1,_te],[t,1,Ste],[t,3,7776e6],[e,1,Mte]];function o(t,n,r){const s=Math.abs(n-t)/r,i=i7(([,,e])=>e).right(a,s);if(i===a.length)return e.every(y7(t/Mte,n/Mte,r));if(0===i)return yte.every(Math.max(y7(t,n,r),1));const[o,l]=a[s/a[i-1][2]<a[i][2]/s?i-1:i];return o.every(l)}return[function(e,t,n){const r=t<e;r&&([e,t]=[t,e]);const s=n&&"function"==typeof n.range?n:o(e,t,n),i=s?s.range(e,+t+1):[];return r?i.reverse():i},o]}Gte.every=e=>isFinite(e=Math.floor(e))&&e>0?vte(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)}):null;const[Xte,Kte]=qte(Gte,Wte,Bte,Rte,Tte,kte),[Yte,Zte]=qte($te,Hte,Dte,Pte,Ate,Ete);function Jte(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Qte(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function ene(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}var tne,nne,rne,sne={"-":"",_:" ",0:"0"},ine=/^\s*\d+/,ane=/^%/,one=/[\\^$*+?|[\]().{}]/g;function lne(e,t,n){var r=e<0?"-":"",s=(r?-e:e)+"",i=s.length;return r+(i<n?new Array(n-i+1).join(t)+s:s)}function cne(e){return e.replace(one,"\\$&")}function dne(e){return new RegExp("^(?:"+e.map(cne).join("|")+")","i")}function une(e){return new Map(e.map((e,t)=>[e.toLowerCase(),t]))}function hne(e,t,n){var r=ine.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function pne(e,t,n){var r=ine.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function mne(e,t,n){var r=ine.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function fne(e,t,n){var r=ine.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function gne(e,t,n){var r=ine.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function xne(e,t,n){var r=ine.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function vne(e,t,n){var r=ine.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function yne(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function bne(e,t,n){var r=ine.exec(t.slice(n,n+1));return r?(e.q=3*r[0]-3,n+r[0].length):-1}function wne(e,t,n){var r=ine.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function jne(e,t,n){var r=ine.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function Nne(e,t,n){var r=ine.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function _ne(e,t,n){var r=ine.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function Sne(e,t,n){var r=ine.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function Mne(e,t,n){var r=ine.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function Cne(e,t,n){var r=ine.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function Ene(e,t,n){var r=ine.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function kne(e,t,n){var r=ane.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function Ane(e,t,n){var r=ine.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function Tne(e,t,n){var r=ine.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function Pne(e,t){return lne(e.getDate(),t,2)}function One(e,t){return lne(e.getHours(),t,2)}function Rne(e,t){return lne(e.getHours()%12||12,t,2)}function Ine(e,t){return lne(1+Pte.count($te(e),e),t,3)}function Dne(e,t){return lne(e.getMilliseconds(),t,3)}function Lne(e,t){return Dne(e,t)+"000"}function Fne(e,t){return lne(e.getMonth()+1,t,2)}function zne(e,t){return lne(e.getMinutes(),t,2)}function Bne(e,t){return lne(e.getSeconds(),t,2)}function Une(e){var t=e.getDay();return 0===t?7:t}function Vne(e,t){return lne(Dte.count($te(e)-1,e),t,2)}function Hne(e){var t=e.getDay();return t>=4||0===t?Fte(e):Fte.ceil(e)}function Wne(e,t){return e=Hne(e),lne(Fte.count($te(e),e)+(4===$te(e).getDay()),t,2)}function $ne(e){return e.getDay()}function Gne(e,t){return lne(Lte.count($te(e)-1,e),t,2)}function qne(e,t){return lne(e.getFullYear()%100,t,2)}function Xne(e,t){return lne((e=Hne(e)).getFullYear()%100,t,2)}function Kne(e,t){return lne(e.getFullYear()%1e4,t,4)}function Yne(e,t){var n=e.getDay();return lne((e=n>=4||0===n?Fte(e):Fte.ceil(e)).getFullYear()%1e4,t,4)}function Zne(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+lne(t/60|0,"0",2)+lne(t%60,"0",2)}function Jne(e,t){return lne(e.getUTCDate(),t,2)}function Qne(e,t){return lne(e.getUTCHours(),t,2)}function ere(e,t){return lne(e.getUTCHours()%12||12,t,2)}function tre(e,t){return lne(1+Ote.count(Gte(e),e),t,3)}function nre(e,t){return lne(e.getUTCMilliseconds(),t,3)}function rre(e,t){return nre(e,t)+"000"}function sre(e,t){return lne(e.getUTCMonth()+1,t,2)}function ire(e,t){return lne(e.getUTCMinutes(),t,2)}function are(e,t){return lne(e.getUTCSeconds(),t,2)}function ore(e){var t=e.getUTCDay();return 0===t?7:t}function lre(e,t){return lne(Bte.count(Gte(e)-1,e),t,2)}function cre(e){var t=e.getUTCDay();return t>=4||0===t?Vte(e):Vte.ceil(e)}function dre(e,t){return e=cre(e),lne(Vte.count(Gte(e),e)+(4===Gte(e).getUTCDay()),t,2)}function ure(e){return e.getUTCDay()}function hre(e,t){return lne(Ute.count(Gte(e)-1,e),t,2)}function pre(e,t){return lne(e.getUTCFullYear()%100,t,2)}function mre(e,t){return lne((e=cre(e)).getUTCFullYear()%100,t,2)}function fre(e,t){return lne(e.getUTCFullYear()%1e4,t,4)}function gre(e,t){var n=e.getUTCDay();return lne((e=n>=4||0===n?Vte(e):Vte.ceil(e)).getUTCFullYear()%1e4,t,4)}function xre(){return"+0000"}function vre(){return"%"}function yre(e){return+e}function bre(e){return Math.floor(+e/1e3)}function wre(e){return new Date(e)}function jre(e){return e instanceof Date?+e:+new Date(+e)}function Nre(e,t,n,r,s,i,a,o,l,c){var d=Ree(),u=d.invert,h=d.domain,p=c(".%L"),m=c(":%S"),f=c("%I:%M"),g=c("%I %p"),x=c("%a %d"),v=c("%b %d"),y=c("%B"),b=c("%Y");function w(e){return(l(e)<e?p:o(e)<e?m:a(e)<e?f:i(e)<e?g:r(e)<e?s(e)<e?x:v:n(e)<e?y:b)(e)}return d.invert=function(e){return new Date(u(e))},d.domain=function(e){return arguments.length?h(Array.from(e,jre)):h().map(wre)},d.ticks=function(t){var n=h();return e(n[0],n[n.length-1],null==t?10:t)},d.tickFormat=function(e,t){return null==t?w:c(t)},d.nice=function(e){var n=h();return e&&"function"==typeof e.range||(e=t(n[0],n[n.length-1],null==e?10:e)),e?h(Qee(n,e)):d},d.copy=function(){return Pee(d,Nre(e,t,n,r,s,i,a,o,l,c))},d}function _re(){var e,t,n,r,s,i=0,a=1,o=Eee,l=!1;function c(t){return null==t||isNaN(t=+t)?s:o(0===n?.5:(t=(r(t)-e)*n,l?Math.max(0,Math.min(1,t)):t))}function d(e){return function(t){var n,r;return arguments.length?([n,r]=t,o=e(n,r),c):[o(0),o(1)]}}return c.domain=function(s){return arguments.length?([i,a]=s,e=r(i=+i),t=r(a=+a),n=e===t?0:1/(t-e),c):[i,a]},c.clamp=function(e){return arguments.length?(l=!!e,c):l},c.interpolator=function(e){return arguments.length?(o=e,c):o},c.range=d(_ee),c.rangeRound=d(See),c.unknown=function(e){return arguments.length?(s=e,c):s},function(s){return r=s,e=s(i),t=s(a),n=e===t?0:1/(t-e),c}}function Sre(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Mre(){var e=pte(_re());return e.copy=function(){return Sre(e,Mre()).exponent(e.exponent())},M7.apply(e,arguments)}function Cre(){var e,t,n,r,s,i,a,o=0,l=.5,c=1,d=1,u=Eee,h=!1;function p(e){return isNaN(e=+e)?a:(e=.5+((e=+i(e))-t)*(d*e<d*t?r:s),u(h?Math.max(0,Math.min(1,e)):e))}function m(e){return function(t){var n,r,s;return arguments.length?([n,r,s]=t,u=function(e,t){void 0===t&&(t=e,e=_ee);for(var n=0,r=t.length-1,s=t[0],i=new Array(r<0?0:r);n<r;)i[n]=e(s,s=t[++n]);return function(e){var t=Math.max(0,Math.min(r-1,Math.floor(e*=r)));return i[t](e-t)}}(e,[n,r,s]),p):[u(0),u(.5),u(1)]}}return p.domain=function(a){return arguments.length?([o,l,c]=a,e=i(o=+o),t=i(l=+l),n=i(c=+c),r=e===t?0:.5/(t-e),s=t===n?0:.5/(n-t),d=t<e?-1:1,p):[o,l,c]},p.clamp=function(e){return arguments.length?(h=!!e,p):h},p.interpolator=function(e){return arguments.length?(u=e,p):u},p.range=m(_ee),p.rangeRound=m(See),p.unknown=function(e){return arguments.length?(a=e,p):a},function(a){return i=a,e=a(o),t=a(l),n=a(c),r=e===t?0:.5/(t-e),s=t===n?0:.5/(n-t),d=t<e?-1:1,p}}function Ere(){var e=pte(Cre());return e.copy=function(){return Sre(e,Ere()).exponent(e.exponent())},M7.apply(e,arguments)}!function(e){tne=function(e){var t=e.dateTime,n=e.date,r=e.time,s=e.periods,i=e.days,a=e.shortDays,o=e.months,l=e.shortMonths,c=dne(s),d=une(s),u=dne(i),h=une(i),p=dne(a),m=une(a),f=dne(o),g=une(o),x=dne(l),v=une(l),y={a:function(e){return a[e.getDay()]},A:function(e){return i[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return o[e.getMonth()]},c:null,d:Pne,e:Pne,f:Lne,g:Xne,G:Yne,H:One,I:Rne,j:Ine,L:Dne,m:Fne,M:zne,p:function(e){return s[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:yre,s:bre,S:Bne,u:Une,U:Vne,V:Wne,w:$ne,W:Gne,x:null,X:null,y:qne,Y:Kne,Z:Zne,"%":vre},b={a:function(e){return a[e.getUTCDay()]},A:function(e){return i[e.getUTCDay()]},b:function(e){return l[e.getUTCMonth()]},B:function(e){return o[e.getUTCMonth()]},c:null,d:Jne,e:Jne,f:rre,g:mre,G:gre,H:Qne,I:ere,j:tre,L:nre,m:sre,M:ire,p:function(e){return s[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:yre,s:bre,S:are,u:ore,U:lre,V:dre,w:ure,W:hre,x:null,X:null,y:pre,Y:fre,Z:xre,"%":vre},w={a:function(e,t,n){var r=p.exec(t.slice(n));return r?(e.w=m.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(e,t,n){var r=u.exec(t.slice(n));return r?(e.w=h.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(e,t,n){var r=x.exec(t.slice(n));return r?(e.m=v.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(e,t,n){var r=f.exec(t.slice(n));return r?(e.m=g.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(e,n,r){return _(e,t,n,r)},d:jne,e:jne,f:Ene,g:vne,G:xne,H:_ne,I:_ne,j:Nne,L:Cne,m:wne,M:Sne,p:function(e,t,n){var r=c.exec(t.slice(n));return r?(e.p=d.get(r[0].toLowerCase()),n+r[0].length):-1},q:bne,Q:Ane,s:Tne,S:Mne,u:pne,U:mne,V:fne,w:hne,W:gne,x:function(e,t,r){return _(e,n,t,r)},X:function(e,t,n){return _(e,r,t,n)},y:vne,Y:xne,Z:yne,"%":kne};function j(e,t){return function(n){var r,s,i,a=[],o=-1,l=0,c=e.length;for(n instanceof Date||(n=new Date(+n));++o<c;)37===e.charCodeAt(o)&&(a.push(e.slice(l,o)),null!=(s=sne[r=e.charAt(++o)])?r=e.charAt(++o):s="e"===r?" ":"0",(i=t[r])&&(r=i(n,s)),a.push(r),l=o+1);return a.push(e.slice(l,o)),a.join("")}}function N(e,t){return function(n){var r,s,i=ene(1900,void 0,1);if(_(i,e,n+="",0)!=n.length)return null;if("Q"in i)return new Date(i.Q);if("s"in i)return new Date(1e3*i.s+("L"in i?i.L:0));if(t&&!("Z"in i)&&(i.Z=0),"p"in i&&(i.H=i.H%12+12*i.p),void 0===i.m&&(i.m="q"in i?i.q:0),"V"in i){if(i.V<1||i.V>53)return null;"w"in i||(i.w=1),"Z"in i?(s=(r=Qte(ene(i.y,0,1))).getUTCDay(),r=s>4||0===s?Ute.ceil(r):Ute(r),r=Ote.offset(r,7*(i.V-1)),i.y=r.getUTCFullYear(),i.m=r.getUTCMonth(),i.d=r.getUTCDate()+(i.w+6)%7):(s=(r=Jte(ene(i.y,0,1))).getDay(),r=s>4||0===s?Lte.ceil(r):Lte(r),r=Pte.offset(r,7*(i.V-1)),i.y=r.getFullYear(),i.m=r.getMonth(),i.d=r.getDate()+(i.w+6)%7)}else("W"in i||"U"in i)&&("w"in i||(i.w="u"in i?i.u%7:"W"in i?1:0),s="Z"in i?Qte(ene(i.y,0,1)).getUTCDay():Jte(ene(i.y,0,1)).getDay(),i.m=0,i.d="W"in i?(i.w+6)%7+7*i.W-(s+5)%7:i.w+7*i.U-(s+6)%7);return"Z"in i?(i.H+=i.Z/100|0,i.M+=i.Z%100,Qte(i)):Jte(i)}}function _(e,t,n,r){for(var s,i,a=0,o=t.length,l=n.length;a<o;){if(r>=l)return-1;if(37===(s=t.charCodeAt(a++))){if(s=t.charAt(a++),!(i=w[s in sne?t.charAt(a++):s])||(r=i(e,n,r))<0)return-1}else if(s!=n.charCodeAt(r++))return-1}return r}return y.x=j(n,y),y.X=j(r,y),y.c=j(t,y),b.x=j(n,b),b.X=j(r,b),b.c=j(t,b),{format:function(e){var t=j(e+="",y);return t.toString=function(){return e},t},parse:function(e){var t=N(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=j(e+="",b);return t.toString=function(){return e},t},utcParse:function(e){var t=N(e+="",!0);return t.toString=function(){return e},t}}}(e),nne=tne.format,rne=tne.utcFormat}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});const kre=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:k7,scaleDiverging:function e(){var t=Zee(Cre()(Eee));return t.copy=function(){return Sre(t,e())},M7.apply(t,arguments)},scaleDivergingLog:function e(){var t=ate(Cre()).domain([.1,1,10]);return t.copy=function(){return Sre(t,e()).base(t.base())},M7.apply(t,arguments)},scaleDivergingPow:Ere,scaleDivergingSqrt:function(){return Ere.apply(null,arguments).exponent(.5)},scaleDivergingSymlog:function e(){var t=cte(Cre());return t.copy=function(){return Sre(t,e()).constant(t.constant())},M7.apply(t,arguments)},scaleIdentity:function e(t){var n;function r(e){return null==e||isNaN(e=+e)?n:e}return r.invert=r,r.domain=r.range=function(e){return arguments.length?(t=Array.from(e,Mee),r):t.slice()},r.unknown=function(e){return arguments.length?(n=e,r):n},r.copy=function(){return e(t).unknown(n)},t=arguments.length?Array.from(t,Mee):[0,1],Zee(r)},scaleImplicit:C7,scaleLinear:Jee,scaleLog:function e(){const t=ate(Oee()).domain([1,10]);return t.copy=()=>Pee(t,e()).base(t.base()),S7.apply(t,arguments),t},scaleOrdinal:E7,scalePoint:T7,scalePow:mte,scaleQuantile:function e(){var t,n=[],r=[],s=[];function i(){var e=0,t=Math.max(1,r.length);for(s=new Array(t-1);++e<t;)s[e-1]=_7(n,e/t);return a}function a(e){return null==e||isNaN(e=+e)?t:r[l7(s,e)]}return a.invertExtent=function(e){var t=r.indexOf(e);return t<0?[NaN,NaN]:[t>0?s[t-1]:n[0],t<s.length?s[t]:n[n.length-1]]},a.domain=function(e){if(!arguments.length)return n.slice();n=[];for(let t of e)null==t||isNaN(t=+t)||n.push(t);return n.sort(r7),i()},a.range=function(e){return arguments.length?(r=Array.from(e),i()):r.slice()},a.unknown=function(e){return arguments.length?(t=e,a):t},a.quantiles=function(){return s.slice()},a.copy=function(){return e().domain(n).range(r).unknown(t)},S7.apply(a,arguments)},scaleQuantize:function e(){var t,n=0,r=1,s=1,i=[.5],a=[0,1];function o(e){return null!=e&&e<=e?a[l7(i,e,0,s)]:t}function l(){var e=-1;for(i=new Array(s);++e<s;)i[e]=((e+1)*r-(e-s)*n)/(s+1);return o}return o.domain=function(e){return arguments.length?([n,r]=e,n=+n,r=+r,l()):[n,r]},o.range=function(e){return arguments.length?(s=(a=Array.from(e)).length-1,l()):a.slice()},o.invertExtent=function(e){var t=a.indexOf(e);return t<0?[NaN,NaN]:t<1?[n,i[0]]:t>=s?[i[s-1],r]:[i[t-1],i[t]]},o.unknown=function(e){return arguments.length?(t=e,o):o},o.thresholds=function(){return i.slice()},o.copy=function(){return e().domain([n,r]).range(a).unknown(t)},S7.apply(Zee(o),arguments)},scaleRadial:function e(){var t,n=Ree(),r=[0,1],s=!1;function i(e){var r=function(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}(n(e));return isNaN(r)?t:s?Math.round(r):r}return i.invert=function(e){return n.invert(fte(e))},i.domain=function(e){return arguments.length?(n.domain(e),i):n.domain()},i.range=function(e){return arguments.length?(n.range((r=Array.from(e,Mee)).map(fte)),i):r.slice()},i.rangeRound=function(e){return i.range(e).round(!0)},i.round=function(e){return arguments.length?(s=!!e,i):s},i.clamp=function(e){return arguments.length?(n.clamp(e),i):n.clamp()},i.unknown=function(e){return arguments.length?(t=e,i):t},i.copy=function(){return e(n.domain(),r).round(s).clamp(n.clamp()).unknown(t)},S7.apply(i,arguments),Zee(i)},scaleSequential:function e(){var t=Zee(_re()(Eee));return t.copy=function(){return Sre(t,e())},M7.apply(t,arguments)},scaleSequentialLog:function e(){var t=ate(_re()).domain([1,10]);return t.copy=function(){return Sre(t,e()).base(t.base())},M7.apply(t,arguments)},scaleSequentialPow:Mre,scaleSequentialQuantile:function e(){var t=[],n=Eee;function r(e){if(null!=e&&!isNaN(e=+e))return n((l7(t,e,1)-1)/(t.length-1))}return r.domain=function(e){if(!arguments.length)return t.slice();t=[];for(let n of e)null==n||isNaN(n=+n)||t.push(n);return t.sort(r7),r},r.interpolator=function(e){return arguments.length?(n=e,r):n},r.range=function(){return t.map((e,r)=>n(r/(t.length-1)))},r.quantiles=function(e){return Array.from({length:e+1},(n,r)=>function(e,t){if((n=(e=Float64Array.from(function*(e){for(let t of e)null!=t&&(t=+t)>=t&&(yield t)}(e))).length)&&!isNaN(t=+t)){if(t<=0||n<2)return w7(e);if(t>=1)return b7(e);var n,r=(n-1)*t,s=Math.floor(r),i=b7(j7(e,s).subarray(0,s+1));return i+(w7(e.subarray(s+1))-i)*(r-s)}}(t,r/e))},r.copy=function(){return e(n).domain(t)},M7.apply(r,arguments)},scaleSequentialSqrt:function(){return Mre.apply(null,arguments).exponent(.5)},scaleSequentialSymlog:function e(){var t=cte(_re());return t.copy=function(){return Sre(t,e()).constant(t.constant())},M7.apply(t,arguments)},scaleSqrt:function(){return mte.apply(null,arguments).exponent(.5)},scaleSymlog:function e(){var t=cte(Oee());return t.copy=function(){return Pee(t,e()).constant(t.constant())},S7.apply(t,arguments)},scaleThreshold:function e(){var t,n=[.5],r=[0,1],s=1;function i(e){return null!=e&&e<=e?r[l7(n,e,0,s)]:t}return i.domain=function(e){return arguments.length?(n=Array.from(e),s=Math.min(n.length,r.length-1),i):n.slice()},i.range=function(e){return arguments.length?(r=Array.from(e),s=Math.min(n.length,r.length-1),i):r.slice()},i.invertExtent=function(e){var t=r.indexOf(e);return[n[t-1],n[t]]},i.unknown=function(e){return arguments.length?(t=e,i):t},i.copy=function(){return e().domain(n).range(r).unknown(t)},S7.apply(i,arguments)},scaleTime:function(){return S7.apply(Nre(Yte,Zte,$te,Hte,Dte,Pte,Ate,Ete,Cte,nne).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)},scaleUtc:function(){return S7.apply(Nre(Xte,Kte,Gte,Wte,Bte,Ote,Tte,kte,Cte,rne).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)},tickFormat:Yee},Symbol.toStringTag,{value:"Module"}));var Are=Vk;var Tre=function(e,t,n){for(var r=-1,s=e.length;++r<s;){var i=e[r],a=t(i);if(null!=a&&(void 0===o?a==a&&!Are(a):n(a,o)))var o=a,l=i}return l};var Pre=function(e,t){return e>t},Ore=Tre,Rre=Pre,Ire=B4;const Dre=mn(function(e){return e&&e.length?Ore(e,Ire,Rre):void 0});var Lre=function(e,t){return e<t},Fre=Tre,zre=Lre,Bre=B4;const Ure=mn(function(e){return e&&e.length?Fre(e,Bre,zre):void 0});var Vre=sQ,Hre=Z4,Wre=$6,$re=SZ;var Gre=L6,qre=function(e,t){return($re(e)?Vre:Wre)(e,Hre(t))};const Xre=mn(function(e,t){return Gre(qre(e,t),1)});var Kre=m4;const Yre=mn(function(e,t){return Kre(e,t)});var Zre,Jre=1e9,Qre=!0,ese="[DecimalError] ",tse=ese+"Invalid argument: ",nse=ese+"Exponent out of range: ",rse=Math.floor,sse=Math.pow,ise=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ase=1e7,ose=9007199254740991,lse=rse(1286742750677284.5),cse={};function dse(e,t){var n,r,s,i,a,o,l,c,d=e.constructor,u=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),Qre?bse(t,u):t;if(l=e.d,c=t.d,a=e.e,s=t.e,l=l.slice(),i=a-s){for(i<0?(r=l,i=-i,o=c.length):(r=c,s=a,o=l.length),i>(o=(a=Math.ceil(u/7))>o?a+1:o+1)&&(i=o,r.length=1),r.reverse();i--;)r.push(0);r.reverse()}for((o=l.length)-(i=c.length)<0&&(i=o,r=c,c=l,l=r),n=0;i;)n=(l[--i]=l[i]+c[i]+n)/ase|0,l[i]%=ase;for(n&&(l.unshift(n),++s),o=l.length;0==l[--o];)l.pop();return t.d=l,t.e=s,Qre?bse(t,u):t}function use(e,t,n){if(e!==~~e||e<t||e>n)throw Error(tse+e)}function hse(e){var t,n,r,s=e.length-1,i="",a=e[0];if(s>0){for(i+=a,t=1;t<s;t++)(n=7-(r=e[t]+"").length)&&(i+=xse(n)),i+=r;(n=7-(r=(a=e[t])+"").length)&&(i+=xse(n))}else if(0===a)return"0";for(;a%10==0;)a/=10;return i+a}cse.absoluteValue=cse.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e},cse.comparedTo=cse.cmp=function(e){var t,n,r,s,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(t=0,n=(r=i.d.length)<(s=e.d.length)?r:s;t<n;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return r===s?0:r>s^i.s<0?1:-1},cse.decimalPlaces=cse.dp=function(){var e=this,t=e.d.length-1,n=7*(t-e.e);if(t=e.d[t])for(;t%10==0;t/=10)n--;return n<0?0:n},cse.dividedBy=cse.div=function(e){return pse(this,new this.constructor(e))},cse.dividedToIntegerBy=cse.idiv=function(e){var t=this.constructor;return bse(pse(this,new t(e),0,1),t.precision)},cse.equals=cse.eq=function(e){return!this.cmp(e)},cse.exponent=function(){return fse(this)},cse.greaterThan=cse.gt=function(e){return this.cmp(e)>0},cse.greaterThanOrEqualTo=cse.gte=function(e){return this.cmp(e)>=0},cse.isInteger=cse.isint=function(){return this.e>this.d.length-2},cse.isNegative=cse.isneg=function(){return this.s<0},cse.isPositive=cse.ispos=function(){return this.s>0},cse.isZero=function(){return 0===this.s},cse.lessThan=cse.lt=function(e){return this.cmp(e)<0},cse.lessThanOrEqualTo=cse.lte=function(e){return this.cmp(e)<1},cse.logarithm=cse.log=function(e){var t,n=this,r=n.constructor,s=r.precision,i=s+5;if(void 0===e)e=new r(10);else if((e=new r(e)).s<1||e.eq(Zre))throw Error(ese+"NaN");if(n.s<1)throw Error(ese+(n.s?"NaN":"-Infinity"));return n.eq(Zre)?new r(0):(Qre=!1,t=pse(vse(n,i),vse(e,i),i),Qre=!0,bse(t,s))},cse.minus=cse.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?wse(t,e):dse(t,(e.s=-e.s,e))},cse.modulo=cse.mod=function(e){var t,n=this,r=n.constructor,s=r.precision;if(!(e=new r(e)).s)throw Error(ese+"NaN");return n.s?(Qre=!1,t=pse(n,e,0,1).times(e),Qre=!0,n.minus(t)):bse(new r(n),s)},cse.naturalExponential=cse.exp=function(){return mse(this)},cse.naturalLogarithm=cse.ln=function(){return vse(this)},cse.negated=cse.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e},cse.plus=cse.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?dse(t,e):wse(t,(e.s=-e.s,e))},cse.precision=cse.sd=function(e){var t,n,r,s=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(tse+e);if(t=fse(s)+1,n=7*(r=s.d.length-1)+1,r=s.d[r]){for(;r%10==0;r/=10)n--;for(r=s.d[0];r>=10;r/=10)n++}return e&&t>n?t:n},cse.squareRoot=cse.sqrt=function(){var e,t,n,r,s,i,a,o=this,l=o.constructor;if(o.s<1){if(!o.s)return new l(0);throw Error(ese+"NaN")}for(e=fse(o),Qre=!1,0==(s=Math.sqrt(+o))||s==1/0?(((t=hse(o.d)).length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=rse((e+1)/2)-(e<0||e%2),r=new l(t=s==1/0?"5e"+e:(t=s.toExponential()).slice(0,t.indexOf("e")+1)+e)):r=new l(s.toString()),s=a=(n=l.precision)+3;;)if(r=(i=r).plus(pse(o,i,a+2)).times(.5),hse(i.d).slice(0,a)===(t=hse(r.d)).slice(0,a)){if(t=t.slice(a-3,a+1),s==a&&"4999"==t){if(bse(i,n+1,0),i.times(i).eq(o)){r=i;break}}else if("9999"!=t)break;a+=4}return Qre=!0,bse(r,n)},cse.times=cse.mul=function(e){var t,n,r,s,i,a,o,l,c,d=this,u=d.constructor,h=d.d,p=(e=new u(e)).d;if(!d.s||!e.s)return new u(0);for(e.s*=d.s,n=d.e+e.e,(l=h.length)<(c=p.length)&&(i=h,h=p,p=i,a=l,l=c,c=a),i=[],r=a=l+c;r--;)i.push(0);for(r=c;--r>=0;){for(t=0,s=l+r;s>r;)o=i[s]+p[r]*h[s-r-1]+t,i[s--]=o%ase|0,t=o/ase|0;i[s]=(i[s]+t)%ase|0}for(;!i[--a];)i.pop();return t?++n:i.shift(),e.d=i,e.e=n,Qre?bse(e,u.precision):e},cse.toDecimalPlaces=cse.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),void 0===e?n:(use(e,0,Jre),void 0===t?t=r.rounding:use(t,0,8),bse(n,e+fse(n)+1,t))},cse.toExponential=function(e,t){var n,r=this,s=r.constructor;return void 0===e?n=jse(r,!0):(use(e,0,Jre),void 0===t?t=s.rounding:use(t,0,8),n=jse(r=bse(new s(r),e+1,t),!0,e+1)),n},cse.toFixed=function(e,t){var n,r,s=this,i=s.constructor;return void 0===e?jse(s):(use(e,0,Jre),void 0===t?t=i.rounding:use(t,0,8),n=jse((r=bse(new i(s),e+fse(s)+1,t)).abs(),!1,e+fse(r)+1),s.isneg()&&!s.isZero()?"-"+n:n)},cse.toInteger=cse.toint=function(){var e=this,t=e.constructor;return bse(new t(e),fse(e)+1,t.rounding)},cse.toNumber=function(){return+this},cse.toPower=cse.pow=function(e){var t,n,r,s,i,a,o=this,l=o.constructor,c=+(e=new l(e));if(!e.s)return new l(Zre);if(!(o=new l(o)).s){if(e.s<1)throw Error(ese+"Infinity");return o}if(o.eq(Zre))return o;if(r=l.precision,e.eq(Zre))return bse(o,r);if(a=(t=e.e)>=(n=e.d.length-1),i=o.s,a){if((n=c<0?-c:c)<=ose){for(s=new l(Zre),t=Math.ceil(r/7+4),Qre=!1;n%2&&Nse((s=s.times(o)).d,t),0!==(n=rse(n/2));)Nse((o=o.times(o)).d,t);return Qre=!0,e.s<0?new l(Zre).div(s):bse(s,r)}}else if(i<0)throw Error(ese+"NaN");return i=i<0&&1&e.d[Math.max(t,n)]?-1:1,o.s=1,Qre=!1,s=e.times(vse(o,r+12)),Qre=!0,(s=mse(s)).s=i,s},cse.toPrecision=function(e,t){var n,r,s=this,i=s.constructor;return void 0===e?r=jse(s,(n=fse(s))<=i.toExpNeg||n>=i.toExpPos):(use(e,1,Jre),void 0===t?t=i.rounding:use(t,0,8),r=jse(s=bse(new i(s),e,t),e<=(n=fse(s))||n<=i.toExpNeg,e)),r},cse.toSignificantDigits=cse.tosd=function(e,t){var n=this.constructor;return void 0===e?(e=n.precision,t=n.rounding):(use(e,1,Jre),void 0===t?t=n.rounding:use(t,0,8)),bse(new n(this),e,t)},cse.toString=cse.valueOf=cse.val=cse.toJSON=cse[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=fse(e),n=e.constructor;return jse(e,t<=n.toExpNeg||t>=n.toExpPos)};var pse=function(){function e(e,t){var n,r=0,s=e.length;for(e=e.slice();s--;)n=e[s]*t+r,e[s]=n%ase|0,r=n/ase|0;return r&&e.unshift(r),e}function t(e,t,n,r){var s,i;if(n!=r)i=n>r?1:-1;else for(s=i=0;s<n;s++)if(e[s]!=t[s]){i=e[s]>t[s]?1:-1;break}return i}function n(e,t,n){for(var r=0;n--;)e[n]-=r,r=e[n]<t[n]?1:0,e[n]=r*ase+e[n]-t[n];for(;!e[0]&&e.length>1;)e.shift()}return function(r,s,i,a){var o,l,c,d,u,h,p,m,f,g,x,v,y,b,w,j,N,_,S=r.constructor,M=r.s==s.s?1:-1,C=r.d,E=s.d;if(!r.s)return new S(r);if(!s.s)throw Error(ese+"Division by zero");for(l=r.e-s.e,N=E.length,w=C.length,m=(p=new S(M)).d=[],c=0;E[c]==(C[c]||0);)++c;if(E[c]>(C[c]||0)&&--l,(v=null==i?i=S.precision:a?i+(fse(r)-fse(s))+1:i)<0)return new S(0);if(v=v/7+2|0,c=0,1==N)for(d=0,E=E[0],v++;(c<w||d)&&v--;c++)y=d*ase+(C[c]||0),m[c]=y/E|0,d=y%E|0;else{for((d=ase/(E[0]+1)|0)>1&&(E=e(E,d),C=e(C,d),N=E.length,w=C.length),b=N,g=(f=C.slice(0,N)).length;g<N;)f[g++]=0;(_=E.slice()).unshift(0),j=E[0],E[1]>=ase/2&&++j;do{d=0,(o=t(E,f,N,g))<0?(x=f[0],N!=g&&(x=x*ase+(f[1]||0)),(d=x/j|0)>1?(d>=ase&&(d=ase-1),1==(o=t(u=e(E,d),f,h=u.length,g=f.length))&&(d--,n(u,N<h?_:E,h))):(0==d&&(o=d=1),u=E.slice()),(h=u.length)<g&&u.unshift(0),n(f,u,g),-1==o&&(o=t(E,f,N,g=f.length))<1&&(d++,n(f,N<g?_:E,g)),g=f.length):0===o&&(d++,f=[0]),m[c++]=d,o&&f[0]?f[g++]=C[b]||0:(f=[C[b]],g=1)}while((b++<w||void 0!==f[0])&&v--)}return m[0]||m.shift(),p.e=l,bse(p,a?i+fse(p)+1:i)}}();function mse(e,t){var n,r,s,i,a,o=0,l=0,c=e.constructor,d=c.precision;if(fse(e)>16)throw Error(nse+fse(e));if(!e.s)return new c(Zre);for(Qre=!1,a=d,i=new c(.03125);e.abs().gte(.1);)e=e.times(i),l+=5;for(a+=Math.log(sse(2,l))/Math.LN10*2+5|0,n=r=s=new c(Zre),c.precision=a;;){if(r=bse(r.times(e),a),n=n.times(++o),hse((i=s.plus(pse(r,n,a))).d).slice(0,a)===hse(s.d).slice(0,a)){for(;l--;)s=bse(s.times(s),a);return c.precision=d,null==t?(Qre=!0,bse(s,d)):s}s=i}}function fse(e){for(var t=7*e.e,n=e.d[0];n>=10;n/=10)t++;return t}function gse(e,t,n){if(t>e.LN10.sd())throw Qre=!0,n&&(e.precision=n),Error(ese+"LN10 precision limit exceeded");return bse(new e(e.LN10),t)}function xse(e){for(var t="";e--;)t+="0";return t}function vse(e,t){var n,r,s,i,a,o,l,c,d,u=1,h=e,p=h.d,m=h.constructor,f=m.precision;if(h.s<1)throw Error(ese+(h.s?"NaN":"-Infinity"));if(h.eq(Zre))return new m(0);if(null==t?(Qre=!1,c=f):c=t,h.eq(10))return null==t&&(Qre=!0),gse(m,c);if(c+=10,m.precision=c,r=(n=hse(p)).charAt(0),i=fse(h),!(Math.abs(i)<15e14))return l=gse(m,c+2,f).times(i+""),h=vse(new m(r+"."+n.slice(1)),c-10).plus(l),m.precision=f,null==t?(Qre=!0,bse(h,f)):h;for(;r<7&&1!=r||1==r&&n.charAt(1)>3;)r=(n=hse((h=h.times(e)).d)).charAt(0),u++;for(i=fse(h),r>1?(h=new m("0."+n),i++):h=new m(r+"."+n.slice(1)),o=a=h=pse(h.minus(Zre),h.plus(Zre),c),d=bse(h.times(h),c),s=3;;){if(a=bse(a.times(d),c),hse((l=o.plus(pse(a,new m(s),c))).d).slice(0,c)===hse(o.d).slice(0,c))return o=o.times(2),0!==i&&(o=o.plus(gse(m,c+2,f).times(i+""))),o=pse(o,new m(u),c),m.precision=f,null==t?(Qre=!0,bse(o,f)):o;o=l,s+=2}}function yse(e,t){var n,r,s;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;48===t.charCodeAt(r);)++r;for(s=t.length;48===t.charCodeAt(s-1);)--s;if(t=t.slice(r,s)){if(s-=r,n=n-r-1,e.e=rse(n/7),e.d=[],r=(n+1)%7,n<0&&(r+=7),r<s){for(r&&e.d.push(+t.slice(0,r)),s-=7;r<s;)e.d.push(+t.slice(r,r+=7));r=7-(t=t.slice(r)).length}else r-=s;for(;r--;)t+="0";if(e.d.push(+t),Qre&&(e.e>lse||e.e<-lse))throw Error(nse+n)}else e.s=0,e.e=0,e.d=[0];return e}function bse(e,t,n){var r,s,i,a,o,l,c,d,u=e.d;for(a=1,i=u[0];i>=10;i/=10)a++;if((r=t-a)<0)r+=7,s=t,c=u[d=0];else{if((d=Math.ceil((r+1)/7))>=(i=u.length))return e;for(c=i=u[d],a=1;i>=10;i/=10)a++;s=(r%=7)-7+a}if(void 0!==n&&(o=c/(i=sse(10,a-s-1))%10|0,l=t<0||void 0!==u[d+1]||c%i,l=n<4?(o||l)&&(0==n||n==(e.s<0?3:2)):o>5||5==o&&(4==n||l||6==n&&(r>0?s>0?c/sse(10,a-s):0:u[d-1])%10&1||n==(e.s<0?8:7))),t<1||!u[0])return l?(i=fse(e),u.length=1,t=t-i-1,u[0]=sse(10,(7-t%7)%7),e.e=rse(-t/7)||0):(u.length=1,u[0]=e.e=e.s=0),e;if(0==r?(u.length=d,i=1,d--):(u.length=d+1,i=sse(10,7-r),u[d]=s>0?(c/sse(10,a-s)%sse(10,s)|0)*i:0),l)for(;;){if(0==d){(u[0]+=i)==ase&&(u[0]=1,++e.e);break}if(u[d]+=i,u[d]!=ase)break;u[d--]=0,i=1}for(r=u.length;0===u[--r];)u.pop();if(Qre&&(e.e>lse||e.e<-lse))throw Error(nse+fse(e));return e}function wse(e,t){var n,r,s,i,a,o,l,c,d,u,h=e.constructor,p=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),Qre?bse(t,p):t;if(l=e.d,u=t.d,r=t.e,c=e.e,l=l.slice(),a=c-r){for((d=a<0)?(n=l,a=-a,o=u.length):(n=u,r=c,o=l.length),a>(s=Math.max(Math.ceil(p/7),o)+2)&&(a=s,n.length=1),n.reverse(),s=a;s--;)n.push(0);n.reverse()}else{for((d=(s=l.length)<(o=u.length))&&(o=s),s=0;s<o;s++)if(l[s]!=u[s]){d=l[s]<u[s];break}a=0}for(d&&(n=l,l=u,u=n,t.s=-t.s),o=l.length,s=u.length-o;s>0;--s)l[o++]=0;for(s=u.length;s>a;){if(l[--s]<u[s]){for(i=s;i&&0===l[--i];)l[i]=ase-1;--l[i],l[s]+=ase}l[s]-=u[s]}for(;0===l[--o];)l.pop();for(;0===l[0];l.shift())--r;return l[0]?(t.d=l,t.e=r,Qre?bse(t,p):t):new h(0)}function jse(e,t,n){var r,s=fse(e),i=hse(e.d),a=i.length;return t?(n&&(r=n-a)>0?i=i.charAt(0)+"."+i.slice(1)+xse(r):a>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(s<0?"e":"e+")+s):s<0?(i="0."+xse(-s-1)+i,n&&(r=n-a)>0&&(i+=xse(r))):s>=a?(i+=xse(s+1-a),n&&(r=n-s-1)>0&&(i=i+"."+xse(r))):((r=s+1)<a&&(i=i.slice(0,r)+"."+i.slice(r)),n&&(r=n-a)>0&&(s+1===a&&(i+="."),i+=xse(r))),e.s<0?"-"+i:i}function Nse(e,t){if(e.length>t)return e.length=t,!0}function _se(e){if(!e||"object"!=typeof e)throw Error(ese+"Object expected");var t,n,r,s=["precision",1,Jre,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if(void 0!==(r=e[n=s[t]])){if(!(rse(r)===r&&r>=s[t+1]&&r<=s[t+2]))throw Error(tse+n+": "+r);this[n]=r}if(void 0!==(r=e[n="LN10"])){if(r!=Math.LN10)throw Error(tse+n+": "+r);this[n]=new this(r)}return this}var Sse=function e(t){var n,r,s;function i(e){var t=this;if(!(t instanceof i))return new i(e);if(t.constructor=i,e instanceof i)return t.s=e.s,t.e=e.e,void(t.d=(e=e.d)?e.slice():e);if("number"==typeof e){if(0*e!=0)throw Error(tse+e);if(e>0)t.s=1;else{if(!(e<0))return t.s=0,t.e=0,void(t.d=[0]);e=-e,t.s=-1}return e===~~e&&e<1e7?(t.e=0,void(t.d=[e])):yse(t,e.toString())}if("string"!=typeof e)throw Error(tse+e);if(45===e.charCodeAt(0)?(e=e.slice(1),t.s=-1):t.s=1,!ise.test(e))throw Error(tse+e);yse(t,e)}if(i.prototype=cse,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=e,i.config=i.set=_se,void 0===t&&(t={}),t)for(s=["precision","rounding","toExpNeg","toExpPos","LN10"],n=0;n<s.length;)t.hasOwnProperty(r=s[n++])||(t[r]=this[r]);return i.config(t),i}({precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"});Zre=new Sse(1);const Mse=Sse;function Cse(e){return function(e){if(Array.isArray(e))return Ese(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Ese(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ese(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ese(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var kse=function(e){return e},Ase={},Tse=function(e){return e===Ase},Pse=function(e){return function t(){return 0===arguments.length||1===arguments.length&&Tse(arguments.length<=0?void 0:arguments[0])?t:e.apply(void 0,arguments)}},Ose=function e(t,n){return 1===t?n:Pse(function(){for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];var a=s.filter(function(e){return e!==Ase}).length;return a>=t?n.apply(void 0,s):e(t-a,Pse(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=s.map(function(e){return Tse(e)?t.shift():e});return n.apply(void 0,Cse(i).concat(t))}))})},Rse=function(e){return Ose(e.length,e)},Ise=function(e,t){for(var n=[],r=e;r<t;++r)n[r-e]=r;return n},Dse=Rse(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(e){return t[e]}).map(e)}),Lse=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},Fse=function(e){var t=null,n=null;return function(){for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return t&&s.every(function(e,n){return e===t[n]})?n:(t=s,n=e.apply(void 0,s))}};const zse={rangeStep:function(e,t,n){for(var r=new Mse(e),s=0,i=[];r.lt(t)&&s<1e5;)i.push(r.toNumber()),r=r.add(n),s++;return i},getDigitCount:function(e){return 0===e?1:Math.floor(new Mse(e).abs().log(10).toNumber())+1},interpolateNumber:Rse(function(e,t,n){var r=+e;return r+n*(+t-r)}),uninterpolateNumber:Rse(function(e,t,n){var r=t-+e;return(n-e)/(r=r||1/0)}),uninterpolateTruncation:Rse(function(e,t,n){var r=t-+e;return r=r||1/0,Math.max(0,Math.min(1,(n-e)/r))})};function Bse(e){return function(e){if(Array.isArray(e))return Hse(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Vse(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Use(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,s=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(r=(a=o.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(PUe){s=!0,i=PUe}finally{try{r||null==o.return||o.return()}finally{if(s)throw i}}return n}(e,t)||Vse(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vse(e,t){if(e){if("string"==typeof e)return Hse(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Hse(e,t):void 0}}function Hse(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Wse(e){var t=Use(e,2),n=t[0],r=t[1],s=n,i=r;return n>r&&(s=r,i=n),[s,i]}function $se(e,t,n){if(e.lte(0))return new Mse(0);var r=zse.getDigitCount(e.toNumber()),s=new Mse(10).pow(r),i=e.div(s),a=1!==r?.05:.1,o=new Mse(Math.ceil(i.div(a).toNumber())).add(n).mul(a).mul(s);return t?o:new Mse(Math.ceil(o))}function Gse(e,t,n){var r=1,s=new Mse(e);if(!s.isint()&&n){var i=Math.abs(e);i<1?(r=new Mse(10).pow(zse.getDigitCount(e)-1),s=new Mse(Math.floor(s.div(r).toNumber())).mul(r)):i>1&&(s=new Mse(Math.floor(e)))}else 0===e?s=new Mse(Math.floor((t-1)/2)):n||(s=new Mse(Math.floor(e)));var a=Math.floor((t-1)/2),o=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!t.length)return kse;var r=t.reverse(),s=r[0],i=r.slice(1);return function(){return i.reduce(function(e,t){return t(e)},s.apply(void 0,arguments))}}(Dse(function(e){return s.add(new Mse(e-a).mul(r)).toNumber()}),Ise);return o(0,t)}function qse(e,t,n,r){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!Number.isFinite((t-e)/(n-1)))return{step:new Mse(0),tickMin:new Mse(0),tickMax:new Mse(0)};var i,a=$se(new Mse(t).sub(e).div(n-1),r,s);i=e<=0&&t>=0?new Mse(0):(i=new Mse(e).add(t).div(2)).sub(new Mse(i).mod(a));var o=Math.ceil(i.sub(e).div(a).toNumber()),l=Math.ceil(new Mse(t).sub(i).div(a).toNumber()),c=o+l+1;return c>n?qse(e,t,n,r,s+1):(c<n&&(l=t>0?l+(n-c):l,o=t>0?o:o+(n-c)),{step:a,tickMin:i.sub(new Mse(o).mul(a)),tickMax:i.add(new Mse(l).mul(a))})}var Xse=Fse(function(e){var t=Use(e,2),n=t[0],r=t[1],s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=Math.max(s,2),o=Use(Wse([n,r]),2),l=o[0],c=o[1];if(l===-1/0||c===1/0){var d=c===1/0?[l].concat(Bse(Ise(0,s-1).map(function(){return 1/0}))):[].concat(Bse(Ise(0,s-1).map(function(){return-1/0})),[c]);return n>r?Lse(d):d}if(l===c)return Gse(l,s,i);var u=qse(l,c,a,i),h=u.step,p=u.tickMin,m=u.tickMax,f=zse.rangeStep(p,m.add(new Mse(.1).mul(h)),h);return n>r?Lse(f):f}),Kse=Fse(function(e,t){var n=Use(e,2),r=n[0],s=n[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=Use(Wse([r,s]),2),o=a[0],l=a[1];if(o===-1/0||l===1/0)return[r,s];if(o===l)return[o];var c=Math.max(t,2),d=$se(new Mse(l).sub(o).div(c-1),i,0),u=[].concat(Bse(zse.rangeStep(new Mse(o),new Mse(l).sub(new Mse(.99).mul(d)),d)),[l]);return r>s?Lse(u):u});function Yse(e,t){throw new Error("Invariant failed")}var Zse=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Jse(e){return(Jse="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qse(){return Qse=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qse.apply(this,arguments)}function eie(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,s,i,a,o=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t);else for(;!(l=(r=i.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(d){c=!0,s=d}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw s}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return tie(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tie(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tie(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function nie(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function rie(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,cie(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function sie(e,t,n){return t=aie(t),function(e,t){if(t&&("object"===Jse(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,iie()?Reflect.construct(t,n||[],aie(e).constructor):t.apply(e,n))}function iie(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(iie=function(){return!!e})()}function aie(e){return(aie=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oie(e,t){return(oie=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function lie(e,t,n){return(t=cie(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cie(e){var t=function(e,t){if("object"!=Jse(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=Jse(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==Jse(t)?t:t+""}var die=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),sie(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&oie(e,t)}(e,fn.Component),rie(e,[{key:"render",value:function(){var e=this.props,t=e.offset,n=e.layout,r=e.width,s=e.dataKey,i=e.data,a=e.dataPointFormatter,o=e.xAxis,l=e.yAxis,c=nie(e,Zse),d=I0(c,!1);"x"===this.props.direction&&"number"!==o.type&&Yse();var u=i.map(function(e){var i=a(e,s),c=i.x,u=i.y,h=i.value,p=i.errorVal;if(!p)return null;var m,f,g=[];if(Array.isArray(p)){var x=eie(p,2);m=x[0],f=x[1]}else m=f=p;if("vertical"===n){var v=o.scale,y=u+t,b=y+r,w=y-r,j=v(h-m),N=v(h+f);g.push({x1:N,y1:b,x2:N,y2:w}),g.push({x1:j,y1:y,x2:N,y2:y}),g.push({x1:j,y1:b,x2:j,y2:w})}else if("horizontal"===n){var _=l.scale,S=c+t,M=S-r,C=S+r,E=_(h-m),k=_(h+f);g.push({x1:M,y1:k,x2:C,y2:k}),g.push({x1:S,y1:E,x2:S,y2:k}),g.push({x1:M,y1:E,x2:C,y2:E})}return fn.createElement(G0,Qse({className:"recharts-errorBar",key:"bar-".concat(g.map(function(e){return"".concat(e.x1,"-").concat(e.x2,"-").concat(e.y1,"-").concat(e.y2)}))},d),g.map(function(e){return fn.createElement("line",Qse({},e,{key:"line-".concat(e.x1,"-").concat(e.x2,"-").concat(e.y1,"-").concat(e.y2)}))}))});return fn.createElement(G0,{className:"recharts-errorBars"},u)}}])}();function uie(e){return(uie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function pie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hie(Object(n),!0).forEach(function(t){mie(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hie(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function mie(e,t,n){return t=function(e){var t=function(e,t){if("object"!=uie(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=uie(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==uie(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}lie(die,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"}),lie(die,"displayName","ErrorBar");var fie=function(e){var t=e.children,n=e.formattedGraphicalItems,r=e.legendWidth,s=e.legendContent,i=T0(t,T6);if(!i)return null;var a,o=T6.defaultProps,l=void 0!==o?pie(pie({},o),i.props):{};return a=i.props&&i.props.payload?i.props&&i.props.payload:"children"===s?(n||[]).reduce(function(e,t){var n=t.item,r=t.props,s=r.sectors||r.data||[];return e.concat(s.map(function(e){return{type:i.props.iconType||n.props.legendType,value:e.name,color:e.fill,payload:e}}))},[]):(n||[]).map(function(e){var t=e.item,n=t.type.defaultProps,r=void 0!==n?pie(pie({},n),t.props):{},s=r.dataKey,i=r.name,a=r.legendType;return{inactive:r.hide,dataKey:s,type:l.iconType||a||"square",color:_ie(t),value:i||s,payload:r}}),pie(pie(pie({},l),T6.getWithHeight(i,r)),{},{payload:a,item:i})};function gie(e){return(gie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xie(e){return function(e){if(Array.isArray(e))return vie(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return vie(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vie(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vie(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function yie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function bie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yie(Object(n),!0).forEach(function(t){wie(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yie(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function wie(e,t,n){return t=function(e){var t=function(e,t){if("object"!=gie(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=gie(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==gie(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jie(e,t,n){return MQ(e)||MQ(t)?n:i0(t)?SQ(e,t,n):RZ(t)?t(e):n}function Nie(e,t,n,r){var s=Xre(e,function(e){return jie(e,t)});if("number"===n){var i=s.filter(function(e){return s0(e)||parseFloat(e)});return i.length?[Ure(i),Dre(i)]:[1/0,-1/0]}return(r?s.filter(function(e){return!MQ(e)}):s).map(function(e){return i0(e)||e instanceof Date?e:""})}var _ie=function(e){var t,n,r=e.type.displayName,s=null!==(t=e.type)&&void 0!==t&&t.defaultProps?bie(bie({},e.type.defaultProps),e.props):e.props,i=s.stroke,a=s.fill;switch(r){case"Line":n=i;break;case"Area":case"Radar":n=i&&"none"!==i?i:a;break;default:n=a}return n},Sie=function(e,t,n,r,s){var i=A0(t.props.children,die).filter(function(e){return function(e,t,n){return!!MQ(t)||("horizontal"===e?"yAxis"===t:"vertical"===e||"x"===n?"xAxis"===t:"y"!==n||"yAxis"===t)}(r,s,e.props.direction)});if(i&&i.length){var a=i.map(function(e){return e.props.dataKey});return e.reduce(function(e,t){var r=jie(t,n);if(MQ(r))return e;var s=Array.isArray(r)?[Ure(r),Dre(r)]:[r,r],i=a.reduce(function(e,n){var r=jie(t,n,0),i=s[0]-Math.abs(Array.isArray(r)?r[0]:r),a=s[1]+Math.abs(Array.isArray(r)?r[1]:r);return[Math.min(i,e[0]),Math.max(a,e[1])]},[1/0,-1/0]);return[Math.min(i[0],e[0]),Math.max(i[1],e[1])]},[1/0,-1/0])}return null},Mie=function(e,t,n,r,s){var i=t.map(function(t){var i=t.props.dataKey;return"number"===n&&i&&Sie(e,t,i,r)||Nie(e,i,n,s)});if("number"===n)return i.reduce(function(e,t){return[Math.min(e[0],t[0]),Math.max(e[1],t[1])]},[1/0,-1/0]);var a={};return i.reduce(function(e,t){for(var n=0,r=t.length;n<r;n++)a[t[n]]||(a[t[n]]=!0,e.push(t[n]));return e},[])},Cie=function(e,t){return"horizontal"===e&&"xAxis"===t||"vertical"===e&&"yAxis"===t||"centric"===e&&"angleAxis"===t||"radial"===e&&"radiusAxis"===t},Eie=function(e,t,n,r){if(r)return e.map(function(e){return e.coordinate});var s,i,a=e.map(function(e){return e.coordinate===t&&(s=!0),e.coordinate===n&&(i=!0),e.coordinate});return s||a.push(t),i||a.push(n),a},kie=function(e,t,n){if(!e)return null;var r=e.scale,s=e.duplicateDomain,i=e.type,a=e.range,o="scaleBand"===e.realScaleType?r.bandwidth()/2:2,l=(t||n)&&"category"===i&&r.bandwidth?r.bandwidth()/o:0;return l="angleAxis"===e.axisType&&(null==a?void 0:a.length)>=2?2*n0(a[0]-a[1])*l:l,t&&(e.ticks||e.niceTicks)?(e.ticks||e.niceTicks).map(function(e){var t=s?s.indexOf(e):e;return{coordinate:r(t)+l,value:e,offset:l}}).filter(function(e){return!t0(e.coordinate)}):e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(e,t){return{coordinate:r(e)+l,value:e,index:t,offset:l}}):r.ticks&&!n?r.ticks(e.tickCount).map(function(e){return{coordinate:r(e)+l,value:e,offset:l}}):r.domain().map(function(e,t){return{coordinate:r(e)+l,value:s?s[e]:e,index:t,offset:l}})},Aie=new WeakMap,Tie=function(e,t){if("function"!=typeof t)return e;Aie.has(e)||Aie.set(e,new WeakMap);var n=Aie.get(e);if(n.has(t))return n.get(t);var r=function(){e.apply(void 0,arguments),t.apply(void 0,arguments)};return n.set(t,r),r},Pie=function(e,t,n){var r=e.scale,s=e.type,i=e.layout,a=e.axisType;if("auto"===r)return"radial"===i&&"radiusAxis"===a?{scale:k7(),realScaleType:"band"}:"radial"===i&&"angleAxis"===a?{scale:Jee(),realScaleType:"linear"}:"category"===s&&t&&(t.indexOf("LineChart")>=0||t.indexOf("AreaChart")>=0||t.indexOf("ComposedChart")>=0&&!n)?{scale:T7(),realScaleType:"point"}:"category"===s?{scale:k7(),realScaleType:"band"}:{scale:Jee(),realScaleType:"linear"};if(AQ(r)){var o="scale".concat(v1(r));return{scale:(kre[o]||T7)(),realScaleType:kre[o]?o:"point"}}return RZ(r)?{scale:r}:{scale:T7(),realScaleType:"point"}},Oie=1e-4,Rie=function(e){var t=e.domain();if(t&&!(t.length<=2)){var n=t.length,r=e.range(),s=Math.min(r[0],r[1])-Oie,i=Math.max(r[0],r[1])+Oie,a=e(t[0]),o=e(t[n-1]);(a<s||a>i||o<s||o>i)&&e.domain([t[0],t[n-1]])}},Iie={sign:function(e){var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var s=0,i=0,a=0;a<t;++a){var o=t0(e[a][n][1])?e[a][n][0]:e[a][n][1];o>=0?(e[a][n][0]=s,e[a][n][1]=s+o,s=e[a][n][1]):(e[a][n][0]=i,e[a][n][1]=i+o,i=e[a][n][1])}},expand:function(e,t){if((r=e.length)>0){for(var n,r,s,i=0,a=e[0].length;i<a;++i){for(s=n=0;n<r;++n)s+=e[n][i][1]||0;if(s)for(n=0;n<r;++n)e[n][i][1]/=s}y2(e,t)}},none:y2,silhouette:function(e,t){if((n=e.length)>0){for(var n,r=0,s=e[t[0]],i=s.length;r<i;++r){for(var a=0,o=0;a<n;++a)o+=e[a][r][1]||0;s[r][1]+=s[r][0]=-o/2}y2(e,t)}},wiggle:function(e,t){if((s=e.length)>0&&(r=(n=e[t[0]]).length)>0){for(var n,r,s,i=0,a=1;a<r;++a){for(var o=0,l=0,c=0;o<s;++o){for(var d=e[t[o]],u=d[a][1]||0,h=(u-(d[a-1][1]||0))/2,p=0;p<o;++p){var m=e[t[p]];h+=(m[a][1]||0)-(m[a-1][1]||0)}l+=u,c+=h*u}n[a-1][1]+=n[a-1][0]=i,l&&(i-=c/l)}n[a-1][1]+=n[a-1][0]=i,y2(e,t)}},positive:function(e){var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var s=0,i=0;i<t;++i){var a=t0(e[i][n][1])?e[i][n][0]:e[i][n][1];a>=0?(e[i][n][0]=s,e[i][n][1]=s+a,s=e[i][n][1]):(e[i][n][0]=0,e[i][n][1]=0)}}},Die=function(e,t,n){var r=t.map(function(e){return e.props.dataKey}),s=Iie[n],i=function(){var e=y1([]),t=b2,n=y2,r=w2;function s(s){var i,a,o=Array.from(e.apply(this,arguments),j2),l=o.length,c=-1;for(const e of s)for(i=0,++c;i<l;++i)(o[i][c]=[0,+r(e,o[i].key,c,s)]).data=e;for(i=0,a=P1(t(o));i<l;++i)o[a[i]].index=i;return n(o,a),o}return s.keys=function(t){return arguments.length?(e="function"==typeof t?t:y1(Array.from(t)),s):e},s.value=function(e){return arguments.length?(r="function"==typeof e?e:y1(+e),s):r},s.order=function(e){return arguments.length?(t=null==e?b2:"function"==typeof e?e:y1(Array.from(e)),s):t},s.offset=function(e){return arguments.length?(n=null==e?y2:e,s):n},s}().keys(r).value(function(e,t){return+jie(e,t,0)}).order(b2).offset(s);return i(e)},Lie=function(e,t){var n=t.realScaleType,r=t.type,s=t.tickCount,i=t.originalDomain,a=t.allowDecimals,o=n||t.scale;if("auto"!==o&&"linear"!==o)return null;if(s&&"number"===r&&i&&("auto"===i[0]||"auto"===i[1])){var l=e.domain();if(!l.length)return null;var c=Xse(l,s,a);return e.domain([Ure(c),Dre(c)]),{niceTicks:c}}if(s&&"number"===r){var d=e.domain();return{niceTicks:Kse(d,s,a)}}return null};function Fie(e){var t=e.axis,n=e.ticks,r=e.bandSize,s=e.entry,i=e.index,a=e.dataKey;if("category"===t.type){if(!t.allowDuplicatedCategory&&t.dataKey&&!MQ(s[t.dataKey])){var o=u0(n,"value",s[t.dataKey]);if(o)return o.coordinate+r/2}return n[i]?n[i].coordinate+r/2:null}var l=jie(s,MQ(a)?t.dataKey:a);return MQ(l)?null:t.scale(l)}var zie=function(e){var t=e.axis,n=e.ticks,r=e.offset,s=e.bandSize,i=e.entry,a=e.index;if("category"===t.type)return n[a]?n[a].coordinate+r:null;var o=jie(i,t.dataKey,t.domain[a]);return MQ(o)?null:t.scale(o)-s/2+r},Bie=function(e,t,n){return Object.keys(e).reduce(function(r,s){var i=e[s].stackedData.reduce(function(e,r){var s=r.slice(t,n+1).reduce(function(e,t){return[Ure(t.concat([e[0]]).filter(s0)),Dre(t.concat([e[1]]).filter(s0))]},[1/0,-1/0]);return[Math.min(e[0],s[0]),Math.max(e[1],s[1])]},[1/0,-1/0]);return[Math.min(i[0],r[0]),Math.max(i[1],r[1])]},[1/0,-1/0]).map(function(e){return e===1/0||e===-1/0?0:e})},Uie=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Vie=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Hie=function(e,t,n){if(RZ(e))return e(t,n);if(!Array.isArray(e))return t;var r=[];if(s0(e[0]))r[0]=n?e[0]:Math.min(e[0],t[0]);else if(Uie.test(e[0])){var s=+Uie.exec(e[0])[1];r[0]=t[0]-s}else RZ(e[0])?r[0]=e[0](t[0]):r[0]=t[0];if(s0(e[1]))r[1]=n?e[1]:Math.max(e[1],t[1]);else if(Vie.test(e[1])){var i=+Vie.exec(e[1])[1];r[1]=t[1]+i}else RZ(e[1])?r[1]=e[1](t[1]):r[1]=t[1];return r},Wie=function(e,t,n){if(e&&e.scale&&e.scale.bandwidth){var r=e.scale.bandwidth();if(!n||r>0)return r}if(e&&t&&t.length>=2){for(var s=M8(t,function(e){return e.coordinate}),i=1/0,a=1,o=s.length;a<o;a++){var l=s[a],c=s[a-1];i=Math.min((l.coordinate||0)-(c.coordinate||0),i)}return i===1/0?0:i}return n?void 0:0},$ie=function(e,t,n){return e&&e.length?Yre(e,SQ(n,"type.defaultProps.domain"))?t:e:t},Gie=function(e,t){var n=e.type.defaultProps?bie(bie({},e.type.defaultProps),e.props):e.props,r=n.dataKey,s=n.name,i=n.unit,a=n.formatter,o=n.tooltipType,l=n.chartType,c=n.hide;return bie(bie({},I0(e,!1)),{},{dataKey:r,unit:i,formatter:a,name:s||r,color:_ie(e),value:jie(t,r),type:o,payload:t,chartType:l,hide:c})};function qie(e){return(qie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Kie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xie(Object(n),!0).forEach(function(t){Yie(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xie(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Yie(e,t,n){return t=function(e){var t=function(e,t){if("object"!=qie(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=qie(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==qie(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zie(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,s,i,a,o=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t);else for(;!(l=(r=i.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(d){c=!0,s=d}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw s}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Jie(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Jie(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jie(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Qie=Math.PI/180,eae=function(e){return 180*e/Math.PI},tae=function(e,t,n,r){return{x:e+Math.cos(-Qie*r)*n,y:t+Math.sin(-Qie*r)*n}},nae=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(n.left||0)-(n.right||0)),Math.abs(t-(n.top||0)-(n.bottom||0)))/2},rae=function(e,t){var n=e.x,r=e.y,s=t.cx,i=t.cy,a=function(e,t){var n=e.x,r=e.y,s=t.x,i=t.y;return Math.sqrt(Math.pow(n-s,2)+Math.pow(r-i,2))}({x:n,y:r},{x:s,y:i});if(a<=0)return{radius:a};var o=(n-s)/a,l=Math.acos(o);return r>i&&(l=2*Math.PI-l),{radius:a,angle:eae(l),angleInRadian:l}},sae=function(e,t){var n=t.startAngle,r=t.endAngle,s=Math.floor(n/360),i=Math.floor(r/360);return e+360*Math.min(s,i)},iae=function(e,t){var n=e.x,r=e.y,s=rae({x:n,y:r},t),i=s.radius,a=s.angle,o=t.innerRadius,l=t.outerRadius;if(i<o||i>l)return!1;if(0===i)return!0;var c,d=function(e){var t=e.startAngle,n=e.endAngle,r=Math.floor(t/360),s=Math.floor(n/360),i=Math.min(r,s);return{startAngle:t-360*i,endAngle:n-360*i}}(t),u=d.startAngle,h=d.endAngle,p=a;if(u<=h){for(;p>h;)p-=360;for(;p<u;)p+=360;c=p>=u&&p<=h}else{for(;p>u;)p-=360;for(;p<h;)p+=360;c=p>=h&&p<=u}return c?Kie(Kie({},t),{},{radius:i,angle:sae(p,t)}):null},aae=function(e){return hn.isValidElement(e)||RZ(e)||"boolean"==typeof e?"":e.className};function oae(e){return(oae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var lae=["offset"];function cae(e){return function(e){if(Array.isArray(e))return dae(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return dae(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dae(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dae(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function uae(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function hae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function pae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hae(Object(n),!0).forEach(function(t){mae(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hae(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function mae(e,t,n){return t=function(e){var t=function(e,t){if("object"!=oae(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=oae(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==oae(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fae(){return fae=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fae.apply(this,arguments)}var gae=function(e,t,n){var r,s,i=e.position,a=e.viewBox,o=e.offset,l=e.className,c=a,d=c.cx,u=c.cy,h=c.innerRadius,p=c.outerRadius,m=c.startAngle,f=c.endAngle,g=c.clockWise,x=(h+p)/2,v=function(e,t){return n0(t-e)*Math.min(Math.abs(t-e),360)}(m,f),y=v>=0?1:-1;"insideStart"===i?(r=m+y*o,s=g):"insideEnd"===i?(r=f-y*o,s=!g):"end"===i&&(r=f+y*o,s=g),s=v<=0?s:!s;var b=tae(d,u,x,r),w=tae(d,u,x,r+359*(s?1:-1)),j="M".concat(b.x,",").concat(b.y,"\n    A").concat(x,",").concat(x,",0,1,").concat(s?0:1,",\n    ").concat(w.x,",").concat(w.y),N=MQ(e.id)?o0("recharts-radial-line-"):e.id;return fn.createElement("text",fae({},n,{dominantBaseline:"central",className:Bo("recharts-radial-bar-label",l)}),fn.createElement("defs",null,fn.createElement("path",{id:N,d:j})),fn.createElement("textPath",{xlinkHref:"#".concat(N)},t))};function xae(e){var t,n=e.offset,r=pae({offset:void 0===n?5:n},uae(e,lae)),s=r.viewBox,i=r.position,a=r.value,o=r.children,l=r.content,c=r.className,d=void 0===c?"":c,u=r.textBreakAll;if(!s||MQ(a)&&MQ(o)&&!hn.isValidElement(l)&&!RZ(l))return null;if(hn.isValidElement(l))return hn.cloneElement(l,r);if(RZ(l)){if(t=hn.createElement(l,r),hn.isValidElement(t))return t}else t=function(e){var t=e.value,n=e.formatter,r=MQ(e.children)?t:e.children;return RZ(n)?n(r):r}(r);var h=function(e){return"cx"in e&&s0(e.cx)}(s),p=I0(r,!0);if(h&&("insideStart"===i||"insideEnd"===i||"end"===i))return gae(r,t,p);var m=h?function(e){var t=e.viewBox,n=e.offset,r=e.position,s=t,i=s.cx,a=s.cy,o=s.innerRadius,l=s.outerRadius,c=(s.startAngle+s.endAngle)/2;if("outside"===r){var d=tae(i,a,l+n,c),u=d.x;return{x:u,y:d.y,textAnchor:u>=i?"start":"end",verticalAnchor:"middle"}}if("center"===r)return{x:i,y:a,textAnchor:"middle",verticalAnchor:"middle"};if("centerTop"===r)return{x:i,y:a,textAnchor:"middle",verticalAnchor:"start"};if("centerBottom"===r)return{x:i,y:a,textAnchor:"middle",verticalAnchor:"end"};var h=tae(i,a,(o+l)/2,c);return{x:h.x,y:h.y,textAnchor:"middle",verticalAnchor:"middle"}}(r):function(e){var t=e.viewBox,n=e.parentViewBox,r=e.offset,s=e.position,i=t,a=i.x,o=i.y,l=i.width,c=i.height,d=c>=0?1:-1,u=d*r,h=d>0?"end":"start",p=d>0?"start":"end",m=l>=0?1:-1,f=m*r,g=m>0?"end":"start",x=m>0?"start":"end";if("top"===s)return pae(pae({},{x:a+l/2,y:o-d*r,textAnchor:"middle",verticalAnchor:h}),n?{height:Math.max(o-n.y,0),width:l}:{});if("bottom"===s)return pae(pae({},{x:a+l/2,y:o+c+u,textAnchor:"middle",verticalAnchor:p}),n?{height:Math.max(n.y+n.height-(o+c),0),width:l}:{});if("left"===s){var v={x:a-f,y:o+c/2,textAnchor:g,verticalAnchor:"middle"};return pae(pae({},v),n?{width:Math.max(v.x-n.x,0),height:c}:{})}if("right"===s){var y={x:a+l+f,y:o+c/2,textAnchor:x,verticalAnchor:"middle"};return pae(pae({},y),n?{width:Math.max(n.x+n.width-y.x,0),height:c}:{})}var b=n?{width:l,height:c}:{};return"insideLeft"===s?pae({x:a+f,y:o+c/2,textAnchor:x,verticalAnchor:"middle"},b):"insideRight"===s?pae({x:a+l-f,y:o+c/2,textAnchor:g,verticalAnchor:"middle"},b):"insideTop"===s?pae({x:a+l/2,y:o+u,textAnchor:"middle",verticalAnchor:p},b):"insideBottom"===s?pae({x:a+l/2,y:o+c-u,textAnchor:"middle",verticalAnchor:h},b):"insideTopLeft"===s?pae({x:a+f,y:o+u,textAnchor:x,verticalAnchor:p},b):"insideTopRight"===s?pae({x:a+l-f,y:o+u,textAnchor:g,verticalAnchor:p},b):"insideBottomLeft"===s?pae({x:a+f,y:o+c-u,textAnchor:x,verticalAnchor:h},b):"insideBottomRight"===s?pae({x:a+l-f,y:o+c-u,textAnchor:g,verticalAnchor:h},b):gk(s)&&(s0(s.x)||r0(s.x))&&(s0(s.y)||r0(s.y))?pae({x:a+l0(s.x,l),y:o+l0(s.y,c),textAnchor:"end",verticalAnchor:"end"},b):pae({x:a+l/2,y:o+c/2,textAnchor:"middle",verticalAnchor:"middle"},b)}(r);return fn.createElement(n7,fae({className:Bo("recharts-label",d)},p,m,{breakAll:u}),t)}xae.displayName="Label";var vae=function(e){var t=e.cx,n=e.cy,r=e.angle,s=e.startAngle,i=e.endAngle,a=e.r,o=e.radius,l=e.innerRadius,c=e.outerRadius,d=e.x,u=e.y,h=e.top,p=e.left,m=e.width,f=e.height,g=e.clockWise,x=e.labelViewBox;if(x)return x;if(s0(m)&&s0(f)){if(s0(d)&&s0(u))return{x:d,y:u,width:m,height:f};if(s0(h)&&s0(p))return{x:h,y:p,width:m,height:f}}return s0(d)&&s0(u)?{x:d,y:u,width:0,height:0}:s0(t)&&s0(n)?{cx:t,cy:n,startAngle:s||r||0,endAngle:i||r||0,innerRadius:l||0,outerRadius:c||o||a||0,clockWise:g}:e.viewBox?e.viewBox:{}};xae.parseViewBox=vae,xae.renderCallByParent=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||!e.children&&n&&!e.label)return null;var r=e.children,s=vae(e),i=A0(r,xae).map(function(e,n){return hn.cloneElement(e,{viewBox:t||s,key:"label-".concat(n)})});if(!n)return i;var a=function(e,t){return e?!0===e?fn.createElement(xae,{key:"label-implicit",viewBox:t}):i0(e)?fn.createElement(xae,{key:"label-implicit",viewBox:t,value:e}):hn.isValidElement(e)?e.type===xae?hn.cloneElement(e,{key:"label-implicit",viewBox:t}):fn.createElement(xae,{key:"label-implicit",content:e,viewBox:t}):RZ(e)?fn.createElement(xae,{key:"label-implicit",content:e,viewBox:t}):gk(e)?fn.createElement(xae,fae({viewBox:t},e,{key:"label-implicit"})):null:null}(e.label,t||s);return[a].concat(cae(i))};const yae=mn(function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0});function bae(e){return(bae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var wae=["valueAccessor"],jae=["data","dataKey","clockWise","id","textBreakAll"];function Nae(e){return function(e){if(Array.isArray(e))return _ae(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return _ae(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _ae(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Sae(){return Sae=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Sae.apply(this,arguments)}function Mae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Cae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mae(Object(n),!0).forEach(function(t){Eae(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mae(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Eae(e,t,n){return t=function(e){var t=function(e,t){if("object"!=bae(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=bae(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==bae(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kae(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}var Aae=function(e){return Array.isArray(e.value)?yae(e.value):e.value};function Tae(e){var t=e.valueAccessor,n=void 0===t?Aae:t,r=kae(e,wae),s=r.data,i=r.dataKey,a=r.clockWise,o=r.id,l=r.textBreakAll,c=kae(r,jae);return s&&s.length?fn.createElement(G0,{className:"recharts-label-list"},s.map(function(e,t){var r=MQ(i)?n(e,t):jie(e&&e.payload,i),s=MQ(o)?{}:{id:"".concat(o,"-").concat(t)};return fn.createElement(xae,Sae({},I0(e,!0),c,s,{parentViewBox:e.parentViewBox,value:r,textBreakAll:l,viewBox:xae.parseViewBox(MQ(a)?e:Cae(Cae({},e),{},{clockWise:a})),key:"label-".concat(t),index:t}))})):null}function Pae(e){return(Pae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Oae(){return Oae=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Oae.apply(this,arguments)}function Rae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Iae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rae(Object(n),!0).forEach(function(t){Dae(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rae(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Dae(e,t,n){return t=function(e){var t=function(e,t){if("object"!=Pae(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=Pae(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Pae(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Tae.displayName="LabelList",Tae.renderCallByParent=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||!e.children&&n&&!e.label)return null;var r=A0(e.children,Tae).map(function(e,n){return hn.cloneElement(e,{data:t,key:"labelList-".concat(n)})});return n?[function(e,t){return e?!0===e?fn.createElement(Tae,{key:"labelList-implicit",data:t}):fn.isValidElement(e)||RZ(e)?fn.createElement(Tae,{key:"labelList-implicit",data:t,content:e}):gk(e)?fn.createElement(Tae,Sae({data:t},e,{key:"labelList-implicit"})):null:null}(e.label,t)].concat(Nae(r)):r};var Lae=function(e){var t=e.cx,n=e.cy,r=e.radius,s=e.angle,i=e.sign,a=e.isExternal,o=e.cornerRadius,l=e.cornerIsExternal,c=o*(a?1:-1)+r,d=Math.asin(o/c)/Qie,u=l?s:s+i*d,h=l?s-i*d:s;return{center:tae(t,n,c,u),circleTangency:tae(t,n,r,u),lineTangency:tae(t,n,c*Math.cos(d*Qie),h),theta:d}},Fae=function(e){var t=e.cx,n=e.cy,r=e.innerRadius,s=e.outerRadius,i=e.startAngle,a=function(e,t){return n0(t-e)*Math.min(Math.abs(t-e),359.999)}(i,e.endAngle),o=i+a,l=tae(t,n,s,i),c=tae(t,n,s,o),d="M ".concat(l.x,",").concat(l.y,"\n    A ").concat(s,",").concat(s,",0,\n    ").concat(+(Math.abs(a)>180),",").concat(+(i>o),",\n    ").concat(c.x,",").concat(c.y,"\n  ");if(r>0){var u=tae(t,n,r,i),h=tae(t,n,r,o);d+="L ".concat(h.x,",").concat(h.y,"\n            A ").concat(r,",").concat(r,",0,\n            ").concat(+(Math.abs(a)>180),",").concat(+(i<=o),",\n            ").concat(u.x,",").concat(u.y," Z")}else d+="L ".concat(t,",").concat(n," Z");return d},zae={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Bae=function(e){var t=Iae(Iae({},zae),e),n=t.cx,r=t.cy,s=t.innerRadius,i=t.outerRadius,a=t.cornerRadius,o=t.forceCornerRadius,l=t.cornerIsExternal,c=t.startAngle,d=t.endAngle,u=t.className;if(i<s||c===d)return null;var h,p=Bo("recharts-sector",u),m=i-s,f=l0(a,m,0,!0);return h=f>0&&Math.abs(c-d)<360?function(e){var t=e.cx,n=e.cy,r=e.innerRadius,s=e.outerRadius,i=e.cornerRadius,a=e.forceCornerRadius,o=e.cornerIsExternal,l=e.startAngle,c=e.endAngle,d=n0(c-l),u=Lae({cx:t,cy:n,radius:s,angle:l,sign:d,cornerRadius:i,cornerIsExternal:o}),h=u.circleTangency,p=u.lineTangency,m=u.theta,f=Lae({cx:t,cy:n,radius:s,angle:c,sign:-d,cornerRadius:i,cornerIsExternal:o}),g=f.circleTangency,x=f.lineTangency,v=f.theta,y=o?Math.abs(l-c):Math.abs(l-c)-m-v;if(y<0)return a?"M ".concat(p.x,",").concat(p.y,"\n        a").concat(i,",").concat(i,",0,0,1,").concat(2*i,",0\n        a").concat(i,",").concat(i,",0,0,1,").concat(2*-i,",0\n      "):Fae({cx:t,cy:n,innerRadius:r,outerRadius:s,startAngle:l,endAngle:c});var b="M ".concat(p.x,",").concat(p.y,"\n    A").concat(i,",").concat(i,",0,0,").concat(+(d<0),",").concat(h.x,",").concat(h.y,"\n    A").concat(s,",").concat(s,",0,").concat(+(y>180),",").concat(+(d<0),",").concat(g.x,",").concat(g.y,"\n    A").concat(i,",").concat(i,",0,0,").concat(+(d<0),",").concat(x.x,",").concat(x.y,"\n  ");if(r>0){var w=Lae({cx:t,cy:n,radius:r,angle:l,sign:d,isExternal:!0,cornerRadius:i,cornerIsExternal:o}),j=w.circleTangency,N=w.lineTangency,_=w.theta,S=Lae({cx:t,cy:n,radius:r,angle:c,sign:-d,isExternal:!0,cornerRadius:i,cornerIsExternal:o}),M=S.circleTangency,C=S.lineTangency,E=S.theta,k=o?Math.abs(l-c):Math.abs(l-c)-_-E;if(k<0&&0===i)return"".concat(b,"L").concat(t,",").concat(n,"Z");b+="L".concat(C.x,",").concat(C.y,"\n      A").concat(i,",").concat(i,",0,0,").concat(+(d<0),",").concat(M.x,",").concat(M.y,"\n      A").concat(r,",").concat(r,",0,").concat(+(k>180),",").concat(+(d>0),",").concat(j.x,",").concat(j.y,"\n      A").concat(i,",").concat(i,",0,0,").concat(+(d<0),",").concat(N.x,",").concat(N.y,"Z")}else b+="L".concat(t,",").concat(n,"Z");return b}({cx:n,cy:r,innerRadius:s,outerRadius:i,cornerRadius:Math.min(f,m/2),forceCornerRadius:o,cornerIsExternal:l,startAngle:c,endAngle:d}):Fae({cx:n,cy:r,innerRadius:s,outerRadius:i,startAngle:c,endAngle:d}),fn.createElement("path",Oae({},I0(t,!0),{className:p,d:h,role:"img"}))};function Uae(e){return(Uae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vae(){return Vae=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vae.apply(this,arguments)}function Hae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Wae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hae(Object(n),!0).forEach(function(t){$ae(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hae(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function $ae(e,t,n){return t=function(e){var t=function(e,t){if("object"!=Uae(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=Uae(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Uae(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Gae={curveBasisClosed:function(e){return new a2(e)},curveBasisOpen:function(e){return new o2(e)},curveBasis:function(e){return new i2(e)},curveBumpX:function(e){return new z1(e,!0)},curveBumpY:function(e){return new z1(e,!1)},curveLinearClosed:function(e){return new l2(e)},curveLinear:R1,curveMonotoneX:function(e){return new p2(e)},curveMonotoneY:function(e){return new m2(e)},curveNatural:function(e){return new g2(e)},curveStep:function(e){return new v2(e,.5)},curveStepAfter:function(e){return new v2(e,1)},curveStepBefore:function(e){return new v2(e,0)}},qae=function(e){return e.x===+e.x&&e.y===+e.y},Xae=function(e){return e.x},Kae=function(e){return e.y},Yae=function(e){var t,n=e.type,r=void 0===n?"linear":n,s=e.points,i=void 0===s?[]:s,a=e.baseLine,o=e.layout,l=e.connectNulls,c=void 0!==l&&l,d=function(e,t){if(RZ(e))return e;var n="curve".concat(v1(e));return"curveMonotone"!==n&&"curveBump"!==n||!t?Gae[n]||R1:Gae["".concat(n).concat("vertical"===t?"Y":"X")]}(r,o),u=c?i.filter(function(e){return qae(e)}):i;if(Array.isArray(a)){var h=c?a.filter(function(e){return qae(e)}):a,p=u.map(function(e,t){return Wae(Wae({},e),{},{base:h[t]})});return(t="vertical"===o?F1().y(Kae).x1(Xae).x0(function(e){return e.base.x}):F1().x(Xae).y1(Kae).y0(function(e){return e.base.y})).defined(qae).curve(d),t(p)}return(t="vertical"===o&&s0(a)?F1().y(Kae).x1(Xae).x0(a):s0(a)?F1().x(Xae).y1(Kae).y0(a):L1().x(Xae).y(Kae)).defined(qae).curve(d),t(u)},Zae=function(e){var t=e.className,n=e.points,r=e.path,s=e.pathRef;if(!(n&&n.length||r))return null;var i=n&&n.length?Yae(e):r;return hn.createElement("path",Vae({},I0(e,!1),y0(e),{className:Bo("recharts-curve",t),d:i,ref:s}))},Jae={exports:{}};function Qae(){}function eoe(){}eoe.resetWarningCache=Qae;Jae.exports=function(){function e(e,t,n,r,s,i){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==i){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:eoe,resetWarningCache:Qae};return n.PropTypes=n,n}();const toe=mn(Jae.exports);var noe=Object.getOwnPropertyNames,roe=Object.getOwnPropertySymbols,soe=Object.prototype.hasOwnProperty;function ioe(e,t){return function(n,r,s){return e(n,r,s)&&t(n,r,s)}}function aoe(e){return function(t,n,r){if(!t||!n||"object"!=typeof t||"object"!=typeof n)return e(t,n,r);var s=r.cache,i=s.get(t),a=s.get(n);if(i&&a)return i===n&&a===t;s.set(t,n),s.set(n,t);var o=e(t,n,r);return s.delete(t),s.delete(n),o}}function ooe(e){return noe(e).concat(roe(e))}var loe=Object.hasOwn||function(e,t){return soe.call(e,t)};function coe(e,t){return e===t||!e&&!t&&e!=e&&t!=t}var doe=Object.getOwnPropertyDescriptor,uoe=Object.keys;function hoe(e,t,n){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(!n.equals(e[r],t[r],r,r,e,t,n))return!1;return!0}function poe(e,t){return coe(e.getTime(),t.getTime())}function moe(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function foe(e,t){return e===t}function goe(e,t,n){var r=e.size;if(r!==t.size)return!1;if(!r)return!0;for(var s,i,a=new Array(r),o=e.entries(),l=0;(s=o.next())&&!s.done;){for(var c=t.entries(),d=!1,u=0;(i=c.next())&&!i.done;)if(a[u])u++;else{var h=s.value,p=i.value;if(n.equals(h[0],p[0],l,u,e,t,n)&&n.equals(h[1],p[1],h[0],p[0],e,t,n)){d=a[u]=!0;break}u++}if(!d)return!1;l++}return!0}var xoe=coe;function voe(e,t,n){var r=uoe(e),s=r.length;if(uoe(t).length!==s)return!1;for(;s-- >0;)if(!Soe(e,t,n,r[s]))return!1;return!0}function yoe(e,t,n){var r,s,i,a=ooe(e),o=a.length;if(ooe(t).length!==o)return!1;for(;o-- >0;){if(!Soe(e,t,n,r=a[o]))return!1;if(s=doe(e,r),i=doe(t,r),(s||i)&&(!s||!i||s.configurable!==i.configurable||s.enumerable!==i.enumerable||s.writable!==i.writable))return!1}return!0}function boe(e,t){return coe(e.valueOf(),t.valueOf())}function woe(e,t){return e.source===t.source&&e.flags===t.flags}function joe(e,t,n){var r=e.size;if(r!==t.size)return!1;if(!r)return!0;for(var s,i,a=new Array(r),o=e.values();(s=o.next())&&!s.done;){for(var l=t.values(),c=!1,d=0;(i=l.next())&&!i.done;){if(!a[d]&&n.equals(s.value,i.value,s.value,i.value,e,t,n)){c=a[d]=!0;break}d++}if(!c)return!1}return!0}function Noe(e,t){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(e[n]!==t[n])return!1;return!0}function _oe(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function Soe(e,t,n,r){return!("_owner"!==r&&"__o"!==r&&"__v"!==r||!e.$$typeof&&!t.$$typeof)||loe(t,r)&&n.equals(e[r],t[r],r,r,e,t,n)}var Moe=Array.isArray,Coe="function"==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView:null,Eoe=Object.assign,koe=Object.prototype.toString.call.bind(Object.prototype.toString);var Aoe=Toe();function Toe(e){void 0===e&&(e={});var t,n=e.circular,r=void 0!==n&&n,s=e.createInternalComparator,i=e.createState,a=e.strict,o=void 0!==a&&a,l=function(e){var t=e.circular,n=e.createCustomConfig,r=e.strict,s={areArraysEqual:r?yoe:hoe,areDatesEqual:poe,areErrorsEqual:moe,areFunctionsEqual:foe,areMapsEqual:r?ioe(goe,yoe):goe,areNumbersEqual:xoe,areObjectsEqual:r?yoe:voe,arePrimitiveWrappersEqual:boe,areRegExpsEqual:woe,areSetsEqual:r?ioe(joe,yoe):joe,areTypedArraysEqual:r?yoe:Noe,areUrlsEqual:_oe};if(n&&(s=Eoe({},s,n(s))),t){var i=aoe(s.areArraysEqual),a=aoe(s.areMapsEqual),o=aoe(s.areObjectsEqual),l=aoe(s.areSetsEqual);s=Eoe({},s,{areArraysEqual:i,areMapsEqual:a,areObjectsEqual:o,areSetsEqual:l})}return s}(e),c=function(e){var t=e.areArraysEqual,n=e.areDatesEqual,r=e.areErrorsEqual,s=e.areFunctionsEqual,i=e.areMapsEqual,a=e.areNumbersEqual,o=e.areObjectsEqual,l=e.arePrimitiveWrappersEqual,c=e.areRegExpsEqual,d=e.areSetsEqual,u=e.areTypedArraysEqual,h=e.areUrlsEqual;return function(e,p,m){if(e===p)return!0;if(null==e||null==p)return!1;var f=typeof e;if(f!==typeof p)return!1;if("object"!==f)return"number"===f?a(e,p,m):"function"===f&&s(e,p,m);var g=e.constructor;if(g!==p.constructor)return!1;if(g===Object)return o(e,p,m);if(Moe(e))return t(e,p,m);if(null!=Coe&&Coe(e))return u(e,p,m);if(g===Date)return n(e,p,m);if(g===RegExp)return c(e,p,m);if(g===Map)return i(e,p,m);if(g===Set)return d(e,p,m);var x=koe(e);return"[object Date]"===x?n(e,p,m):"[object RegExp]"===x?c(e,p,m):"[object Map]"===x?i(e,p,m):"[object Set]"===x?d(e,p,m):"[object Object]"===x?"function"!=typeof e.then&&"function"!=typeof p.then&&o(e,p,m):"[object URL]"===x?h(e,p,m):"[object Error]"===x?r(e,p,m):"[object Arguments]"===x?o(e,p,m):("[object Boolean]"===x||"[object Number]"===x||"[object String]"===x)&&l(e,p,m)}}(l);return function(e){var t=e.circular,n=e.comparator,r=e.createState,s=e.equals,i=e.strict;if(r)return function(e,a){var o=r(),l=o.cache,c=void 0===l?t?new WeakMap:void 0:l,d=o.meta;return n(e,a,{cache:c,equals:s,meta:d,strict:i})};if(t)return function(e,t){return n(e,t,{cache:new WeakMap,equals:s,meta:void 0,strict:i})};var a={cache:void 0,equals:s,meta:void 0,strict:i};return function(e,t){return n(e,t,a)}}({circular:r,comparator:c,createState:i,equals:s?s(c):(t=c,function(e,n,r,s,i,a,o){return t(e,n,o)}),strict:o})}function Poe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=-1;requestAnimationFrame(function r(s){n<0&&(n=s),s-n>t?(e(s),n=-1):function(e){"undefined"!=typeof requestAnimationFrame&&requestAnimationFrame(e)}(r)})}function Ooe(e){return(Ooe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Roe(e){return function(e){if(Array.isArray(e))return e}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Ioe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ioe(e,t)}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ioe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Doe(){var e=function(){return null},t=!1,n=function n(r){if(!t){if(Array.isArray(r)){if(!r.length)return;var s=Roe(r),i=s[0],a=s.slice(1);return"number"==typeof i?void Poe(n.bind(null,a),i):(n(i),void Poe(n.bind(null,a)))}"object"===Ooe(r)&&e(r),"function"==typeof r&&r()}};return{stop:function(){t=!0},start:function(e){t=!1,n(e)},subscribe:function(t){return e=t,function(){e=function(){return null}}}}}function Loe(e){return(Loe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Foe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function zoe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Foe(Object(n),!0).forEach(function(t){Boe(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Foe(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Boe(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==Loe(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!==Loe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Loe(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Toe({strict:!0}),Toe({circular:!0}),Toe({circular:!0,strict:!0}),Toe({createInternalComparator:function(){return coe}}),Toe({strict:!0,createInternalComparator:function(){return coe}}),Toe({circular:!0,createInternalComparator:function(){return coe}}),Toe({circular:!0,createInternalComparator:function(){return coe},strict:!0});var Uoe=function(e){return e},Voe=function(e,t){return Object.keys(t).reduce(function(n,r){return zoe(zoe({},n),{},Boe({},r,e(r,t[r])))},{})},Hoe=function(e,t,n){return e.map(function(e){return"".concat((r=e,r.replace(/([A-Z])/g,function(e){return"-".concat(e.toLowerCase())}))," ").concat(t,"ms ").concat(n);var r}).join(",")};function Woe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,s,i,a,o=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t);else for(;!(l=(r=i.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(d){c=!0,s=d}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw s}}return o}}(e,t)||Goe(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $oe(e){return function(e){if(Array.isArray(e))return qoe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Goe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Goe(e,t){if(e){if("string"==typeof e)return qoe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qoe(e,t):void 0}}function qoe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Xoe=1e-4,Koe=function(e,t){return[0,3*e,3*t-6*e,3*e-3*t+1]},Yoe=function(e,t){return e.map(function(e,n){return e*Math.pow(t,n)}).reduce(function(e,t){return e+t})},Zoe=function(e,t){return function(n){var r=Koe(e,t);return Yoe(r,n)}},Joe=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],s=t[1],i=t[2],a=t[3];if(1===t.length)switch(t[0]){case"linear":r=0,s=0,i=1,a=1;break;case"ease":r=.25,s=.1,i=.25,a=1;break;case"ease-in":r=.42,s=0,i=1,a=1;break;case"ease-out":r=.42,s=0,i=.58,a=1;break;case"ease-in-out":r=0,s=0,i=.58,a=1;break;default:var o=t[0].split("(");if("cubic-bezier"===o[0]&&4===o[1].split(")")[0].split(",").length){var l=Woe(o[1].split(")")[0].split(",").map(function(e){return parseFloat(e)}),4);r=l[0],s=l[1],i=l[2],a=l[3]}}var c,d,u=Zoe(r,i),h=Zoe(s,a),p=(c=r,d=i,function(e){var t=Koe(c,d),n=[].concat($oe(t.map(function(e,t){return e*t}).slice(1)),[0]);return Yoe(n,e)}),m=function(e){return e>1?1:e<0?0:e},f=function(e){for(var t=e>1?1:e,n=t,r=0;r<8;++r){var s=u(n)-t,i=p(n);if(Math.abs(s-t)<Xoe||i<Xoe)return h(n);n=m(n-s/i)}return h(n)};return f.isStepper=!1,f},Qoe=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0];if("string"==typeof r)switch(r){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return Joe(r);case"spring":return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.stiff,n=void 0===t?100:t,r=e.damping,s=void 0===r?8:r,i=e.dt,a=void 0===i?17:i,o=function(e,t,r){var i=r+(-(e-t)*n-r*s)*a/1e3,o=r*a/1e3+e;return Math.abs(o-t)<Xoe&&Math.abs(i)<Xoe?[t,0]:[o,i]};return o.isStepper=!0,o.dt=a,o}();default:if("cubic-bezier"===r.split("(")[0])return Joe(r)}return"function"==typeof r?r:null};function ele(e){return(ele="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tle(e){return function(e){if(Array.isArray(e))return ole(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ale(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nle(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function rle(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nle(Object(n),!0).forEach(function(t){sle(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nle(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function sle(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==ele(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!==ele(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ele(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ile(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,s,i,a,o=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t);else for(;!(l=(r=i.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(d){c=!0,s=d}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw s}}return o}}(e,t)||ale(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ale(e,t){if(e){if("string"==typeof e)return ole(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ole(e,t):void 0}}function ole(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var lle=function(e,t,n){return e+(t-e)*n},cle=function(e){return e.from!==e.to},dle=function e(t,n,r){var s=Voe(function(e,n){if(cle(n)){var r=ile(t(n.from,n.to,n.velocity),2),s=r[0],i=r[1];return rle(rle({},n),{},{from:s,velocity:i})}return n},n);return r<1?Voe(function(e,t){return cle(t)?rle(rle({},t),{},{velocity:lle(t.velocity,s[e].velocity,r),from:lle(t.from,s[e].from,r)}):t},n):e(t,s,r-1)};const ule=function(e,t,n,r,s){var i,a,o,l,c=(i=e,a=t,[Object.keys(i),Object.keys(a)].reduce(function(e,t){return e.filter(function(e){return t.includes(e)})})),d=c.reduce(function(n,r){return rle(rle({},n),{},sle({},r,[e[r],t[r]]))},{}),u=c.reduce(function(n,r){return rle(rle({},n),{},sle({},r,{from:e[r],velocity:0,to:t[r]}))},{}),h=-1,p=function(){return null};return p=n.isStepper?function(r){o||(o=r);var i=(r-o)/n.dt;u=dle(n,u,i),s(rle(rle(rle({},e),t),Voe(function(e,t){return t.from},u))),o=r,Object.values(u).filter(cle).length&&(h=requestAnimationFrame(p))}:function(i){l||(l=i);var a=(i-l)/r,o=Voe(function(e,t){return lle.apply(void 0,tle(t).concat([n(a)]))},d);if(s(rle(rle(rle({},e),t),o)),a<1)h=requestAnimationFrame(p);else{var c=Voe(function(e,t){return lle.apply(void 0,tle(t).concat([n(1)]))},d);s(rle(rle(rle({},e),t),c))}},function(){return requestAnimationFrame(p),function(){cancelAnimationFrame(h)}}};function hle(e){return(hle="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ple=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function mle(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n,r,s={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function fle(e){return function(e){if(Array.isArray(e))return gle(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return gle(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gle(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gle(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function xle(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function vle(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xle(Object(n),!0).forEach(function(t){yle(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xle(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function yle(e,t,n){return(t=wle(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ble(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,wle(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function wle(e){var t=function(e,t){if("object"!==hle(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!==hle(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===hle(t)?t:String(t)}function jle(e,t){return(jle=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Nle(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Mle(e);if(t){var s=Mle(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return _le(this,n)}}function _le(e,t){if(t&&("object"===hle(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Sle(e)}function Sle(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mle(e){return(Mle=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Cle=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jle(e,t)}(t,hn.PureComponent);var e=Nle(t);function t(n,r){var s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=(s=e.call(this,n,r)).props,a=i.isActive,o=i.attributeName,l=i.from,c=i.to,d=i.steps,u=i.children,h=i.duration;if(s.handleStyleChange=s.handleStyleChange.bind(Sle(s)),s.changeStyle=s.changeStyle.bind(Sle(s)),!a||h<=0)return s.state={style:{}},"function"==typeof u&&(s.state={style:c}),_le(s);if(d&&d.length)s.state={style:d[0].style};else if(l){if("function"==typeof u)return s.state={style:l},_le(s);s.state={style:o?yle({},o,l):l}}else s.state={style:{}};return s}return ble(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.isActive,n=e.canBegin;this.mounted=!0,t&&n&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.isActive,r=t.canBegin,s=t.attributeName,i=t.shouldReAnimate,a=t.to,o=t.from,l=this.state.style;if(r)if(n){if(!(Aoe(e.to,a)&&e.canBegin&&e.isActive)){var c=!e.canBegin||!e.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var d=c||i?o:e.to;if(this.state&&l){var u={style:s?yle({},s,d):d};(s&&l[s]!==d||!s&&l!==d)&&this.setState(u)}this.runAnimation(vle(vle({},this.props),{},{from:d,begin:0}))}}else{var h={style:s?yle({},s,a):a};this.state&&l&&(s&&l[s]!==a||!s&&l!==a)&&this.setState(h)}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var e=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),e&&e()}},{key:"handleStyleChange",value:function(e){this.changeStyle(e)}},{key:"changeStyle",value:function(e){this.mounted&&this.setState({style:e})}},{key:"runJSAnimation",value:function(e){var t=this,n=e.from,r=e.to,s=e.duration,i=e.easing,a=e.begin,o=e.onAnimationEnd,l=e.onAnimationStart,c=ule(n,r,Qoe(i),s,this.changeStyle);this.manager.start([l,a,function(){t.stopJSAnimation=c()},s,o])}},{key:"runStepAnimation",value:function(e){var t=this,n=e.steps,r=e.begin,s=e.onAnimationStart,i=n[0],a=i.style,o=i.duration,l=void 0===o?0:o;return this.manager.start([s].concat(fle(n.reduce(function(e,r,s){if(0===s)return e;var i=r.duration,a=r.easing,o=void 0===a?"ease":a,l=r.style,c=r.properties,d=r.onAnimationEnd,u=s>0?n[s-1]:r,h=c||Object.keys(l);if("function"==typeof o||"spring"===o)return[].concat(fle(e),[t.runJSAnimation.bind(t,{from:u.style,to:l,duration:i,easing:o}),i]);var p=Hoe(h,i,o),m=vle(vle(vle({},u.style),l),{},{transition:p});return[].concat(fle(e),[m,i,d]).filter(Uoe)},[a,Math.max(l,r)])),[e.onAnimationEnd]))}},{key:"runAnimation",value:function(e){this.manager||(this.manager=Doe());var t=e.begin,n=e.duration,r=e.attributeName,s=e.to,i=e.easing,a=e.onAnimationStart,o=e.onAnimationEnd,l=e.steps,c=e.children,d=this.manager;if(this.unSubscribe=d.subscribe(this.handleStyleChange),"function"!=typeof i&&"function"!=typeof c&&"spring"!==i)if(l.length>1)this.runStepAnimation(e);else{var u=r?yle({},r,s):s,h=Hoe(Object.keys(u),n,i);d.start([a,t,vle(vle({},u),{},{transition:h}),n,o])}else this.runJSAnimation(e)}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.duration,r=e.isActive,s=mle(e,ple),i=hn.Children.count(t),a=this.state.style;if("function"==typeof t)return t(a);if(!r||0===i||n<=0)return t;var o=function(e){var t=e.props,n=t.style,r=void 0===n?{}:n,i=t.className;return hn.cloneElement(e,vle(vle({},s),{},{style:vle(vle({},r),a),className:i}))};return 1===i?o(hn.Children.only(t)):fn.createElement("div",null,hn.Children.map(t,function(e){return o(e)}))}}]),t}();function Ele(e){return(Ele="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kle(){return kle=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kle.apply(this,arguments)}function Ale(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,s,i,a,o=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t);else for(;!(l=(r=i.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(d){c=!0,s=d}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw s}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Tle(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Tle(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tle(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ple(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ole(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ple(Object(n),!0).forEach(function(t){Rle(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ple(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Rle(e,t,n){return t=function(e){var t=function(e,t){if("object"!=Ele(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=Ele(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ele(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Cle.displayName="Animate",Cle.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}},Cle.propTypes={from:toe.oneOfType([toe.object,toe.string]),to:toe.oneOfType([toe.object,toe.string]),attributeName:toe.string,duration:toe.number,begin:toe.number,easing:toe.oneOfType([toe.string,toe.func]),steps:toe.arrayOf(toe.shape({duration:toe.number.isRequired,style:toe.object.isRequired,easing:toe.oneOfType([toe.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),toe.func]),properties:toe.arrayOf("string"),onAnimationEnd:toe.func})),children:toe.oneOfType([toe.node,toe.func]),isActive:toe.bool,canBegin:toe.bool,onAnimationEnd:toe.func,shouldReAnimate:toe.bool,onAnimationStart:toe.func,onAnimationReStart:toe.func};var Ile=function(e,t,n,r,s){var i,a=Math.min(Math.abs(n)/2,Math.abs(r)/2),o=r>=0?1:-1,l=n>=0?1:-1,c=r>=0&&n>=0||r<0&&n<0?1:0;if(a>0&&s instanceof Array){for(var d=[0,0,0,0],u=0;u<4;u++)d[u]=s[u]>a?a:s[u];i="M".concat(e,",").concat(t+o*d[0]),d[0]>0&&(i+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(c,",").concat(e+l*d[0],",").concat(t)),i+="L ".concat(e+n-l*d[1],",").concat(t),d[1]>0&&(i+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(c,",\n        ").concat(e+n,",").concat(t+o*d[1])),i+="L ".concat(e+n,",").concat(t+r-o*d[2]),d[2]>0&&(i+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(c,",\n        ").concat(e+n-l*d[2],",").concat(t+r)),i+="L ".concat(e+l*d[3],",").concat(t+r),d[3]>0&&(i+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(c,",\n        ").concat(e,",").concat(t+r-o*d[3])),i+="Z"}else if(a>0&&s===+s&&s>0){var h=Math.min(a,s);i="M ".concat(e,",").concat(t+o*h,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+l*h,",").concat(t,"\n            L ").concat(e+n-l*h,",").concat(t,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+n,",").concat(t+o*h,"\n            L ").concat(e+n,",").concat(t+r-o*h,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+n-l*h,",").concat(t+r,"\n            L ").concat(e+l*h,",").concat(t+r,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e,",").concat(t+r-o*h," Z")}else i="M ".concat(e,",").concat(t," h ").concat(n," v ").concat(r," h ").concat(-n," Z");return i},Dle=function(e,t){if(!e||!t)return!1;var n=e.x,r=e.y,s=t.x,i=t.y,a=t.width,o=t.height;if(Math.abs(a)>0&&Math.abs(o)>0){var l=Math.min(s,s+a),c=Math.max(s,s+a),d=Math.min(i,i+o),u=Math.max(i,i+o);return n>=l&&n<=c&&r>=d&&r<=u}return!1},Lle={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Fle=function(e){var t=Ole(Ole({},Lle),e),n=hn.useRef(),r=Ale(hn.useState(-1),2),s=r[0],i=r[1];hn.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var e=n.current.getTotalLength();e&&i(e)}catch(PUe){}},[]);var a=t.x,o=t.y,l=t.width,c=t.height,d=t.radius,u=t.className,h=t.animationEasing,p=t.animationDuration,m=t.animationBegin,f=t.isAnimationActive,g=t.isUpdateAnimationActive;if(a!==+a||o!==+o||l!==+l||c!==+c||0===l||0===c)return null;var x=Bo("recharts-rectangle",u);return g?fn.createElement(Cle,{canBegin:s>0,from:{width:l,height:c,x:a,y:o},to:{width:l,height:c,x:a,y:o},duration:p,animationEasing:h,isActive:g},function(e){var r=e.width,i=e.height,a=e.x,o=e.y;return fn.createElement(Cle,{canBegin:s>0,from:"0px ".concat(-1===s?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:p,isActive:f,easing:h},fn.createElement("path",kle({},I0(t,!0),{className:x,d:Ile(a,o,r,i,d),ref:n})))}):fn.createElement("path",kle({},I0(t,!0),{className:x,d:Ile(a,o,l,c,d)}))},zle=["points","className","baseLinePoints","connectNulls"];function Ble(){return Ble=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ble.apply(this,arguments)}function Ule(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function Vle(e){return function(e){if(Array.isArray(e))return Hle(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Hle(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Hle(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Hle(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Wle=function(e){return e&&e.x===+e.x&&e.y===+e.y},$le=function(e,t){var n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[[]];return e.forEach(function(e){Wle(e)?t[t.length-1].push(e):t[t.length-1].length>0&&t.push([])}),Wle(e[0])&&t[t.length-1].push(e[0]),t[t.length-1].length<=0&&(t=t.slice(0,-1)),t}(e);t&&(n=[n.reduce(function(e,t){return[].concat(Vle(e),Vle(t))},[])]);var r=n.map(function(e){return e.reduce(function(e,t,n){return"".concat(e).concat(0===n?"M":"L").concat(t.x,",").concat(t.y)},"")}).join("");return 1===n.length?"".concat(r,"Z"):r},Gle=function(e){var t=e.points,n=e.className,r=e.baseLinePoints,s=e.connectNulls,i=Ule(e,zle);if(!t||!t.length)return null;var a=Bo("recharts-polygon",n);if(r&&r.length){var o=i.stroke&&"none"!==i.stroke,l=function(e,t,n){var r=$le(e,n);return"".concat("Z"===r.slice(-1)?r.slice(0,-1):r,"L").concat($le(t.reverse(),n).slice(1))}(t,r,s);return fn.createElement("g",{className:a},fn.createElement("path",Ble({},I0(i,!0),{fill:"Z"===l.slice(-1)?i.fill:"none",stroke:"none",d:l})),o?fn.createElement("path",Ble({},I0(i,!0),{fill:"none",d:$le(t,s)})):null,o?fn.createElement("path",Ble({},I0(i,!0),{fill:"none",d:$le(r,s)})):null)}var c=$le(t,s);return fn.createElement("path",Ble({},I0(i,!0),{fill:"Z"===c.slice(-1)?i.fill:"none",className:a,d:c}))};function qle(){return qle=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qle.apply(this,arguments)}var Xle=function(e){var t=e.cx,n=e.cy,r=e.r,s=e.className,i=Bo("recharts-dot",s);return t===+t&&n===+n&&r===+r?hn.createElement("circle",qle({},I0(e,!1),y0(e),{className:i,cx:t,cy:n,r:r})):null};function Kle(e){return(Kle="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Yle=["x","y","top","left","width","height","className"];function Zle(){return Zle=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zle.apply(this,arguments)}function Jle(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Qle(e,t,n){return t=function(e){var t=function(e,t){if("object"!=Kle(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=Kle(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Kle(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ece(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}var tce=function(e,t,n,r,s,i){return"M".concat(e,",").concat(s,"v").concat(r,"M").concat(i,",").concat(t,"h").concat(n)},nce=function(e){var t=e.x,n=void 0===t?0:t,r=e.y,s=void 0===r?0:r,i=e.top,a=void 0===i?0:i,o=e.left,l=void 0===o?0:o,c=e.width,d=void 0===c?0:c,u=e.height,h=void 0===u?0:u,p=e.className,m=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jle(Object(n),!0).forEach(function(t){Qle(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jle(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({x:n,y:s,top:a,left:l,width:d,height:h},ece(e,Yle));return s0(n)&&s0(s)&&s0(d)&&s0(h)&&s0(a)&&s0(l)?fn.createElement("path",Zle({},I0(m,!0),{className:Bo("recharts-cross",p),d:tce(n,s,d,h,a,l)})):null},rce=Tre,sce=Pre,ice=Z4;const ace=mn(function(e,t){return e&&e.length?rce(e,ice(t),sce):void 0});var oce=Tre,lce=Z4,cce=Lre;const dce=mn(function(e,t){return e&&e.length?oce(e,lce(t),cce):void 0});var uce=["cx","cy","angle","ticks","axisLine"],hce=["ticks","tick","angle","tickFormatter","stroke"];function pce(e){return(pce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mce(){return mce=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mce.apply(this,arguments)}function fce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function gce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fce(Object(n),!0).forEach(function(t){Nce(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fce(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function xce(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function vce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_ce(r.key),r)}}function yce(e,t,n){return t=wce(t),function(e,t){if(t&&("object"===pce(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,bce()?Reflect.construct(t,n||[],wce(e).constructor):t.apply(e,n))}function bce(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(bce=function(){return!!e})()}function wce(e){return(wce=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jce(e,t){return(jce=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Nce(e,t,n){return(t=_ce(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _ce(e){var t=function(e,t){if("object"!=pce(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=pce(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==pce(t)?t:t+""}var Sce=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),yce(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jce(e,t)}(e,hn.PureComponent),t=e,n=[{key:"getTickValueCoord",value:function(e){var t=e.coordinate,n=this.props,r=n.angle,s=n.cx,i=n.cy;return tae(s,i,t,r)}},{key:"getTickTextAnchor",value:function(){var e;switch(this.props.orientation){case"left":e="end";break;case"right":e="start";break;default:e="middle"}return e}},{key:"getViewBox",value:function(){var e=this.props,t=e.cx,n=e.cy,r=e.angle,s=e.ticks,i=ace(s,function(e){return e.coordinate||0});return{cx:t,cy:n,startAngle:r,endAngle:r,innerRadius:dce(s,function(e){return e.coordinate||0}).coordinate||0,outerRadius:i.coordinate||0}}},{key:"renderAxisLine",value:function(){var e=this.props,t=e.cx,n=e.cy,r=e.angle,s=e.ticks,i=e.axisLine,a=xce(e,uce),o=s.reduce(function(e,t){return[Math.min(e[0],t.coordinate),Math.max(e[1],t.coordinate)]},[1/0,-1/0]),l=tae(t,n,o[0],r),c=tae(t,n,o[1],r),d=gce(gce(gce({},I0(a,!1)),{},{fill:"none"},I0(i,!1)),{},{x1:l.x,y1:l.y,x2:c.x,y2:c.y});return fn.createElement("line",mce({className:"recharts-polar-radius-axis-line"},d))}},{key:"renderTicks",value:function(){var t=this,n=this.props,r=n.ticks,s=n.tick,i=n.angle,a=n.tickFormatter,o=n.stroke,l=xce(n,hce),c=this.getTickTextAnchor(),d=I0(l,!1),u=I0(s,!1),h=r.map(function(n,r){var l=t.getTickValueCoord(n),h=gce(gce(gce(gce({textAnchor:c,transform:"rotate(".concat(90-i,", ").concat(l.x,", ").concat(l.y,")")},d),{},{stroke:"none",fill:o},u),{},{index:r},l),{},{payload:n});return fn.createElement(G0,mce({className:Bo("recharts-polar-radius-axis-tick",aae(s)),key:"tick-".concat(n.coordinate)},b0(t.props,n,r)),e.renderTickItem(s,h,a?a(n.value,r):n.value))});return fn.createElement(G0,{className:"recharts-polar-radius-axis-ticks"},h)}},{key:"render",value:function(){var e=this.props,t=e.ticks,n=e.axisLine,r=e.tick;return t&&t.length?fn.createElement(G0,{className:Bo("recharts-polar-radius-axis",this.props.className)},n&&this.renderAxisLine(),r&&this.renderTicks(),xae.renderCallByParent(this.props,this.getViewBox())):null}}],r=[{key:"renderTickItem",value:function(e,t,n){return fn.isValidElement(e)?fn.cloneElement(e,t):RZ(e)?e(t):fn.createElement(n7,mce({},t,{className:"recharts-polar-radius-axis-tick-value"}),n)}}],n&&vce(t.prototype,n),r&&vce(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();function Mce(e){return(Mce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Cce(){return Cce=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Cce.apply(this,arguments)}function Ece(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function kce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ece(Object(n),!0).forEach(function(t){Ice(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ece(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Ace(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Dce(r.key),r)}}function Tce(e,t,n){return t=Oce(t),function(e,t){if(t&&("object"===Mce(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Pce()?Reflect.construct(t,n||[],Oce(e).constructor):t.apply(e,n))}function Pce(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Pce=function(){return!!e})()}function Oce(e){return(Oce=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Rce(e,t){return(Rce=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Ice(e,t,n){return(t=Dce(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dce(e){var t=function(e,t){if("object"!=Mce(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=Mce(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Mce(t)?t:t+""}Nce(Sce,"displayName","PolarRadiusAxis"),Nce(Sce,"axisType","radiusAxis"),Nce(Sce,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});var Lce=Math.PI/180,Fce=1e-5,zce=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Tce(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Rce(e,t)}(e,hn.PureComponent),t=e,n=[{key:"getTickLineCoord",value:function(e){var t=this.props,n=t.cx,r=t.cy,s=t.radius,i=t.orientation,a=t.tickSize||8,o=tae(n,r,s,e.coordinate),l=tae(n,r,s+("inner"===i?-1:1)*a,e.coordinate);return{x1:o.x,y1:o.y,x2:l.x,y2:l.y}}},{key:"getTickTextAnchor",value:function(e){var t=this.props.orientation,n=Math.cos(-e.coordinate*Lce);return n>Fce?"outer"===t?"start":"end":n<-Fce?"outer"===t?"end":"start":"middle"}},{key:"renderAxisLine",value:function(){var e=this.props,t=e.cx,n=e.cy,r=e.radius,s=e.axisLine,i=e.axisLineType,a=kce(kce({},I0(this.props,!1)),{},{fill:"none"},I0(s,!1));if("circle"===i)return fn.createElement(Xle,Cce({className:"recharts-polar-angle-axis-line"},a,{cx:t,cy:n,r:r}));var o=this.props.ticks.map(function(e){return tae(t,n,r,e.coordinate)});return fn.createElement(Gle,Cce({className:"recharts-polar-angle-axis-line"},a,{points:o}))}},{key:"renderTicks",value:function(){var t=this,n=this.props,r=n.ticks,s=n.tick,i=n.tickLine,a=n.tickFormatter,o=n.stroke,l=I0(this.props,!1),c=I0(s,!1),d=kce(kce({},l),{},{fill:"none"},I0(i,!1)),u=r.map(function(n,r){var u=t.getTickLineCoord(n),h=kce(kce(kce({textAnchor:t.getTickTextAnchor(n)},l),{},{stroke:"none",fill:o},c),{},{index:r,payload:n,x:u.x2,y:u.y2});return fn.createElement(G0,Cce({className:Bo("recharts-polar-angle-axis-tick",aae(s)),key:"tick-".concat(n.coordinate)},b0(t.props,n,r)),i&&fn.createElement("line",Cce({className:"recharts-polar-angle-axis-tick-line"},d,u)),s&&e.renderTickItem(s,h,a?a(n.value,r):n.value))});return fn.createElement(G0,{className:"recharts-polar-angle-axis-ticks"},u)}},{key:"render",value:function(){var e=this.props,t=e.ticks,n=e.radius,r=e.axisLine;return n<=0||!t||!t.length?null:fn.createElement(G0,{className:Bo("recharts-polar-angle-axis",this.props.className)},r&&this.renderAxisLine(),this.renderTicks())}}],r=[{key:"renderTickItem",value:function(e,t,n){return fn.isValidElement(e)?fn.cloneElement(e,t):RZ(e)?e(t):fn.createElement(n7,Cce({},t,{className:"recharts-polar-angle-axis-tick-value"}),n)}}],n&&Ace(t.prototype,n),r&&Ace(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();Ice(zce,"displayName","PolarAngleAxis"),Ice(zce,"axisType","angleAxis"),Ice(zce,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var Bce=f5(Object.getPrototypeOf,Object),Uce=Fk,Vce=Bce,Hce=zk,Wce=Function.prototype,$ce=Object.prototype,Gce=Wce.toString,qce=$ce.hasOwnProperty,Xce=Gce.call(Object);const Kce=mn(function(e){if(!Hce(e)||"[object Object]"!=Uce(e))return!1;var t=Vce(e);if(null===t)return!0;var n=qce.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Gce.call(n)==Xce});var Yce=Fk,Zce=zk;const Jce=mn(function(e){return!0===e||!1===e||Zce(e)&&"[object Boolean]"==Yce(e)});function Qce(e){return(Qce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ede(){return ede=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ede.apply(this,arguments)}function tde(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,s,i,a,o=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t);else for(;!(l=(r=i.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(d){c=!0,s=d}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw s}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return nde(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nde(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nde(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function rde(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function sde(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rde(Object(n),!0).forEach(function(t){ide(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rde(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ide(e,t,n){return t=function(e){var t=function(e,t){if("object"!=Qce(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=Qce(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Qce(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ade,ode=function(e,t,n,r,s){var i,a=n-r;return i="M ".concat(e,",").concat(t),i+="L ".concat(e+n,",").concat(t),i+="L ".concat(e+n-a/2,",").concat(t+s),i+="L ".concat(e+n-a/2-r,",").concat(t+s),i+="L ".concat(e,",").concat(t," Z")},lde={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},cde=function(e){var t=sde(sde({},lde),e),n=hn.useRef(),r=tde(hn.useState(-1),2),s=r[0],i=r[1];hn.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var e=n.current.getTotalLength();e&&i(e)}catch(PUe){}},[]);var a=t.x,o=t.y,l=t.upperWidth,c=t.lowerWidth,d=t.height,u=t.className,h=t.animationEasing,p=t.animationDuration,m=t.animationBegin,f=t.isUpdateAnimationActive;if(a!==+a||o!==+o||l!==+l||c!==+c||d!==+d||0===l&&0===c||0===d)return null;var g=Bo("recharts-trapezoid",u);return f?fn.createElement(Cle,{canBegin:s>0,from:{upperWidth:0,lowerWidth:0,height:d,x:a,y:o},to:{upperWidth:l,lowerWidth:c,height:d,x:a,y:o},duration:p,animationEasing:h,isActive:f},function(e){var r=e.upperWidth,i=e.lowerWidth,a=e.height,o=e.x,l=e.y;return fn.createElement(Cle,{canBegin:s>0,from:"0px ".concat(-1===s?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:p,easing:h},fn.createElement("path",ede({},I0(t,!0),{className:g,d:ode(o,l,r,i,a),ref:n})))}):fn.createElement("g",null,fn.createElement("path",ede({},I0(t,!0),{className:g,d:ode(a,o,l,c,d)})))},dde=["option","shapeType","propTransformer","activeClassName","isActive"];function ude(e){return(ude="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hde(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function pde(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function mde(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pde(Object(n),!0).forEach(function(t){fde(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pde(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function fde(e,t,n){return t=function(e){var t=function(e,t){if("object"!=ude(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=ude(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ude(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gde(e,t){return mde(mde({},t),e)}function xde(e){var t=e.shapeType,n=e.elementProps;switch(t){case"rectangle":return fn.createElement(Fle,n);case"trapezoid":return fn.createElement(cde,n);case"sector":return fn.createElement(Bae,n);case"symbols":if(function(e){return"symbols"===e}(t))return fn.createElement(P2,n);break;default:return null}}function vde(e){var t,n=e.option,r=e.shapeType,s=e.propTransformer,i=void 0===s?gde:s,a=e.activeClassName,o=void 0===a?"recharts-active-shape":a,l=e.isActive,c=hde(e,dde);if(hn.isValidElement(n))t=hn.cloneElement(n,mde(mde({},c),function(e){return hn.isValidElement(e)?e.props:e}(n)));else if(RZ(n))t=n(c);else if(Kce(n)&&!Jce(n)){var d=i(n,c);t=fn.createElement(xde,{shapeType:r,elementProps:d})}else{var u=c;t=fn.createElement(xde,{shapeType:r,elementProps:u})}return l?fn.createElement(G0,{className:o},t):t}function yde(e,t){return null!=t&&"trapezoids"in e.props}function bde(e,t){return null!=t&&"sectors"in e.props}function wde(e,t){return null!=t&&"points"in e.props}function jde(e,t){var n,r,s=e.x===(null==t||null===(n=t.labelViewBox)||void 0===n?void 0:n.x)||e.x===t.x,i=e.y===(null==t||null===(r=t.labelViewBox)||void 0===r?void 0:r.y)||e.y===t.y;return s&&i}function Nde(e,t){var n=e.endAngle===t.endAngle,r=e.startAngle===t.startAngle;return n&&r}function _de(e,t){var n=e.x===t.x,r=e.y===t.y,s=e.z===t.z;return n&&r&&s}function Sde(e){var t=e.activeTooltipItem,n=e.graphicalItem,r=e.itemData,s=function(e,t){var n;return yde(e,t)?n="trapezoids":bde(e,t)?n="sectors":wde(e,t)&&(n="points"),n}(n,t),i=function(e,t){var n,r;return yde(e,t)?null===(n=t.tooltipPayload)||void 0===n||null===(n=n[0])||void 0===n||null===(n=n.payload)||void 0===n?void 0:n.payload:bde(e,t)?null===(r=t.tooltipPayload)||void 0===r||null===(r=r[0])||void 0===r||null===(r=r.payload)||void 0===r?void 0:r.payload:wde(e,t)?t.payload:{}}(n,t),a=r.filter(function(e,r){var a=Yre(i,e),o=n.props[s].filter(function(e){var r=function(e,t){var n;return yde(e,t)?n=jde:bde(e,t)?n=Nde:wde(e,t)&&(n=_de),n}(n,t);return r(e,t)}),l=n.props[s].indexOf(o[o.length-1]);return a&&r===l});return r.indexOf(a[a.length-1])}function Mde(e){return(Mde="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Cde(){return Cde=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Cde.apply(this,arguments)}function Ede(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function kde(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ede(Object(n),!0).forEach(function(t){Ide(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ede(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Ade(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Dde(r.key),r)}}function Tde(e,t,n){return t=Ode(t),function(e,t){if(t&&("object"===Mde(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Pde()?Reflect.construct(t,n||[],Ode(e).constructor):t.apply(e,n))}function Pde(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Pde=function(){return!!e})()}function Ode(e){return(Ode=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Rde(e,t){return(Rde=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Ide(e,t,n){return(t=Dde(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dde(e){var t=function(e,t){if("object"!=Mde(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=Mde(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==Mde(t)?t:t+""}var Lde=function(){function e(t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Ide(n=Tde(this,e,[t]),"pieRef",null),Ide(n,"sectorRefs",[]),Ide(n,"id",o0("recharts-pie-")),Ide(n,"handleAnimationEnd",function(){var e=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),RZ(e)&&e()}),Ide(n,"handleAnimationStart",function(){var e=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),RZ(e)&&e()}),n.state={isAnimationFinished:!t.isAnimationActive,prevIsAnimationActive:t.isAnimationActive,prevAnimationId:t.animationId,sectorToFocus:0},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Rde(e,t)}(e,hn.PureComponent),t=e,n=[{key:"isActiveIndex",value:function(e){var t=this.props.activeIndex;return Array.isArray(t)?-1!==t.indexOf(e):e===t}},{key:"hasActiveIndex",value:function(){var e=this.props.activeIndex;return Array.isArray(e)?0!==e.length:e||0===e}},{key:"renderLabels",value:function(t){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var n=this.props,r=n.label,s=n.labelLine,i=n.dataKey,a=n.valueKey,o=I0(this.props,!1),l=I0(r,!1),c=I0(s,!1),d=r&&r.offsetRadius||20,u=t.map(function(t,n){var u=(t.startAngle+t.endAngle)/2,h=tae(t.cx,t.cy,t.outerRadius+d,u),p=kde(kde(kde(kde({},o),t),{},{stroke:"none"},l),{},{index:n,textAnchor:e.getTextAnchor(h.x,t.cx)},h),m=kde(kde(kde(kde({},o),t),{},{fill:"none",stroke:t.fill},c),{},{index:n,points:[tae(t.cx,t.cy,t.outerRadius,u),h]}),f=i;return MQ(i)&&MQ(a)?f="value":MQ(i)&&(f=a),fn.createElement(G0,{key:"label-".concat(t.startAngle,"-").concat(t.endAngle,"-").concat(t.midAngle,"-").concat(n)},s&&e.renderLabelLineItem(s,m,"line"),e.renderLabelItem(r,p,jie(t,f)))});return fn.createElement(G0,{className:"recharts-pie-labels"},u)}},{key:"renderSectorsStatically",value:function(e){var t=this,n=this.props,r=n.activeShape,s=n.blendStroke,i=n.inactiveShape;return e.map(function(n,a){if(0===(null==n?void 0:n.startAngle)&&0===(null==n?void 0:n.endAngle)&&1!==e.length)return null;var o=t.isActiveIndex(a),l=i&&t.hasActiveIndex()?i:null,c=o?r:l,d=kde(kde({},n),{},{stroke:s?n.fill:n.stroke,tabIndex:-1});return fn.createElement(G0,Cde({ref:function(e){e&&!t.sectorRefs.includes(e)&&t.sectorRefs.push(e)},tabIndex:-1,className:"recharts-pie-sector"},b0(t.props,n,a),{key:"sector-".concat(null==n?void 0:n.startAngle,"-").concat(null==n?void 0:n.endAngle,"-").concat(n.midAngle,"-").concat(a)}),fn.createElement(vde,Cde({option:c,isActive:o,shapeType:"sector"},d)))})}},{key:"renderSectorsWithAnimation",value:function(){var e=this,t=this.props,n=t.sectors,r=t.isAnimationActive,s=t.animationBegin,i=t.animationDuration,a=t.animationEasing,o=t.animationId,l=this.state,c=l.prevSectors,d=l.prevIsAnimationActive;return fn.createElement(Cle,{begin:s,duration:i,isActive:r,easing:a,from:{t:0},to:{t:1},key:"pie-".concat(o,"-").concat(d),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(t){var r=t.t,s=[],i=(n&&n[0]).startAngle;return n.forEach(function(e,t){var n=c&&c[t],a=t>0?SQ(e,"paddingAngle",0):0;if(n){var o=d0(n.endAngle-n.startAngle,e.endAngle-e.startAngle),l=kde(kde({},e),{},{startAngle:i+a,endAngle:i+o(r)+a});s.push(l),i=l.endAngle}else{var d=e.endAngle,u=e.startAngle,h=d0(0,d-u)(r),p=kde(kde({},e),{},{startAngle:i+a,endAngle:i+h+a});s.push(p),i=p.endAngle}}),fn.createElement(G0,null,e.renderSectorsStatically(s))})}},{key:"attachKeyboardHandlers",value:function(e){var t=this;e.onkeydown=function(e){if(!e.altKey)switch(e.key){case"ArrowLeft":var n=++t.state.sectorToFocus%t.sectorRefs.length;t.sectorRefs[n].focus(),t.setState({sectorToFocus:n});break;case"ArrowRight":var r=--t.state.sectorToFocus<0?t.sectorRefs.length-1:t.state.sectorToFocus%t.sectorRefs.length;t.sectorRefs[r].focus(),t.setState({sectorToFocus:r});break;case"Escape":t.sectorRefs[t.state.sectorToFocus].blur(),t.setState({sectorToFocus:0})}}}},{key:"renderSectors",value:function(){var e=this.props,t=e.sectors,n=e.isAnimationActive,r=this.state.prevSectors;return!(n&&t&&t.length)||r&&Yre(r,t)?this.renderSectorsStatically(t):this.renderSectorsWithAnimation()}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var e=this,t=this.props,n=t.hide,r=t.sectors,s=t.className,i=t.label,a=t.cx,o=t.cy,l=t.innerRadius,c=t.outerRadius,d=t.isAnimationActive,u=this.state.isAnimationFinished;if(n||!r||!r.length||!s0(a)||!s0(o)||!s0(l)||!s0(c))return null;var h=Bo("recharts-pie",s);return fn.createElement(G0,{tabIndex:this.props.rootTabIndex,className:h,ref:function(t){e.pieRef=t}},this.renderSectors(),i&&this.renderLabels(r),xae.renderCallByParent(this.props,null,!1),(!d||u)&&Tae.renderCallByParent(this.props,r,!1))}}],r=[{key:"getDerivedStateFromProps",value:function(e,t){return t.prevIsAnimationActive!==e.isAnimationActive?{prevIsAnimationActive:e.isAnimationActive,prevAnimationId:e.animationId,curSectors:e.sectors,prevSectors:[],isAnimationFinished:!0}:e.isAnimationActive&&e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curSectors:e.sectors,prevSectors:t.curSectors,isAnimationFinished:!0}:e.sectors!==t.curSectors?{curSectors:e.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(e,t){return e>t?"start":e<t?"end":"middle"}},{key:"renderLabelLineItem",value:function(e,t,n){if(fn.isValidElement(e))return fn.cloneElement(e,t);if(RZ(e))return e(t);var r=Bo("recharts-pie-label-line","boolean"!=typeof e?e.className:"");return fn.createElement(Zae,Cde({},t,{key:n,type:"linear",className:r}))}},{key:"renderLabelItem",value:function(e,t,n){if(fn.isValidElement(e))return fn.cloneElement(e,t);var r=n;if(RZ(e)&&(r=e(t),fn.isValidElement(r)))return r;var s=Bo("recharts-pie-label-text","boolean"==typeof e||RZ(e)?"":e.className);return fn.createElement(n7,Cde({},t,{alignmentBaseline:"middle",className:s}),r)}}],n&&Ade(t.prototype,n),r&&Ade(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();ade=Lde,Ide(Lde,"displayName","Pie"),Ide(Lde,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Q8,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0}),Ide(Lde,"parseDeltaAngle",function(e,t){return n0(t-e)*Math.min(Math.abs(t-e),360)}),Ide(Lde,"getRealPieData",function(e){var t=e.data,n=e.children,r=I0(e,!1),s=A0(n,y9);return t&&t.length?t.map(function(e,t){return kde(kde(kde({payload:e},r),e),s&&s[t]&&s[t].props)}):s&&s.length?s.map(function(e){return kde(kde({},r),e.props)}):[]}),Ide(Lde,"parseCoordinateOfPie",function(e,t){var n=t.top,r=t.left,s=t.width,i=t.height,a=nae(s,i);return{cx:r+l0(e.cx,s,s/2),cy:n+l0(e.cy,i,i/2),innerRadius:l0(e.innerRadius,a,0),outerRadius:l0(e.outerRadius,a,.8*a),maxRadius:e.maxRadius||Math.sqrt(s*s+i*i)/2}}),Ide(Lde,"getComposedData",function(e){var t=e.item,n=e.offset,r=void 0!==t.type.defaultProps?kde(kde({},t.type.defaultProps),t.props):t.props,s=ade.getRealPieData(r);if(!s||!s.length)return null;var i=r.cornerRadius,a=r.startAngle,o=r.endAngle,l=r.paddingAngle,c=r.dataKey,d=r.nameKey,u=r.valueKey,h=r.tooltipType,p=Math.abs(r.minAngle),m=ade.parseCoordinateOfPie(r,n),f=ade.parseDeltaAngle(a,o),g=Math.abs(f),x=c;MQ(c)&&MQ(u)?(q0(!1,'Use "dataKey" to specify the value of pie,\n      the props "valueKey" will be deprecated in 1.1.0'),x="value"):MQ(c)&&(q0(!1,'Use "dataKey" to specify the value of pie,\n      the props "valueKey" will be deprecated in 1.1.0'),x=u);var v,y,b=s.filter(function(e){return 0!==jie(e,x,0)}).length,w=g-b*p-(g>=360?b:b-1)*l,j=s.reduce(function(e,t){var n=jie(t,x,0);return e+(s0(n)?n:0)},0);j>0&&(v=s.map(function(e,t){var n,r=jie(e,x,0),s=jie(e,d,t),o=(s0(r)?r:0)/j,c=(n=t?y.endAngle+n0(f)*l*(0!==r?1:0):a)+n0(f)*((0!==r?p:0)+o*w),u=(n+c)/2,g=(m.innerRadius+m.outerRadius)/2,v=[{name:s,value:r,payload:e,dataKey:x,type:h}],b=tae(m.cx,m.cy,g,u);return y=kde(kde(kde({percent:o,cornerRadius:i,name:s,tooltipPayload:v,midAngle:u,middleRadius:g,tooltipPosition:b},e),m),{},{value:jie(e,x),startAngle:n,endAngle:c,payload:e,paddingAngle:n0(f)*l})}));return kde(kde({},m),{},{sectors:v,data:s})});var Fde=Math.ceil,zde=Math.max;var Bde=Yk,Ude=1/0;var Vde=function(e){return e?(e=Bde(e))===Ude||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0},Hde=function(e,t,n,r){for(var s=-1,i=zde(Fde((t-e)/(n||1)),0),a=Array(i);i--;)a[r?i:++s]=e,e+=n;return a},Wde=j8,$de=Vde;const Gde=mn(function(e){return function(t,n,r){return r&&"number"!=typeof r&&Wde(t,n,r)&&(n=r=void 0),t=$de(t),void 0===n?(n=t,t=0):n=$de(n),r=void 0===r?t<n?1:-1:$de(r),Hde(t,n,r,e)}}());function qde(e){return(qde="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xde(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Kde(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xde(Object(n),!0).forEach(function(t){Yde(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xde(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Yde(e,t,n){return t=function(e){var t=function(e,t){if("object"!=qde(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=qde(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==qde(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Zde=["Webkit","Moz","O","ms"];function Jde(e){return(Jde="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qde(){return Qde=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qde.apply(this,arguments)}function eue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function tue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eue(Object(n),!0).forEach(function(t){oue(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eue(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function nue(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,lue(r.key),r)}}function rue(e,t,n){return t=iue(t),function(e,t){if(t&&("object"===Jde(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,sue()?Reflect.construct(t,n||[],iue(e).constructor):t.apply(e,n))}function sue(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(sue=function(){return!!e})()}function iue(e){return(iue=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function aue(e,t){return(aue=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function oue(e,t,n){return(t=lue(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lue(e){var t=function(e,t){if("object"!=Jde(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=Jde(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==Jde(t)?t:t+""}var cue=function(e){return e.changedTouches&&!!e.changedTouches.length},due=function(){function e(t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),oue(n=rue(this,e,[t]),"handleDrag",function(e){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(e):n.state.isSlideMoving&&n.handleSlideDrag(e)}),oue(n,"handleTouchMove",function(e){null!=e.changedTouches&&e.changedTouches.length>0&&n.handleDrag(e.changedTouches[0])}),oue(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var e=n.props,t=e.endIndex,r=e.onDragEnd,s=e.startIndex;null==r||r({endIndex:t,startIndex:s})}),n.detachDragEndListener()}),oue(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),oue(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),oue(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),oue(n,"handleSlideDragStart",function(e){var t=cue(e)?e.changedTouches[0]:e;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:t.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&aue(e,t)}(e,hn.PureComponent),t=e,r=[{key:"renderDefaultTraveller",value:function(e){var t=e.x,n=e.y,r=e.width,s=e.height,i=e.stroke,a=Math.floor(n+s/2)-1;return fn.createElement(fn.Fragment,null,fn.createElement("rect",{x:t,y:n,width:r,height:s,fill:i,stroke:"none"}),fn.createElement("line",{x1:t+1,y1:a,x2:t+r-1,y2:a,fill:"none",stroke:"#fff"}),fn.createElement("line",{x1:t+1,y1:a+2,x2:t+r-1,y2:a+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(t,n){return fn.isValidElement(t)?fn.cloneElement(t,n):RZ(t)?t(n):e.renderDefaultTraveller(n)}},{key:"getDerivedStateFromProps",value:function(e,t){var n=e.data,r=e.width,s=e.x,i=e.travellerWidth,a=e.updateId,o=e.startIndex,l=e.endIndex;if(n!==t.prevData||a!==t.prevUpdateId)return tue({prevData:n,prevTravellerWidth:i,prevUpdateId:a,prevX:s,prevWidth:r},n&&n.length?function(e){var t=e.data,n=e.startIndex,r=e.endIndex,s=e.x,i=e.width,a=e.travellerWidth;if(!t||!t.length)return{};var o=t.length,l=T7().domain(Gde(0,o)).range([s,s+i-a]),c=l.domain().map(function(e){return l(e)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:l(n),endX:l(r),scale:l,scaleValues:c}}({data:n,width:r,x:s,travellerWidth:i,startIndex:o,endIndex:l}):{scale:null,scaleValues:null});if(t.scale&&(r!==t.prevWidth||s!==t.prevX||i!==t.prevTravellerWidth)){t.scale.range([s,s+r-i]);var c=t.scale.domain().map(function(e){return t.scale(e)});return{prevData:n,prevTravellerWidth:i,prevUpdateId:a,prevX:s,prevWidth:r,startX:t.scale(e.startIndex),endX:t.scale(e.endIndex),scaleValues:c}}return null}},{key:"getIndexInRange",value:function(e,t){for(var n=0,r=e.length-1;r-n>1;){var s=Math.floor((n+r)/2);e[s]>t?r=s:n=s}return t>=e[r]?r:n}}],(n=[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(t){var n=t.startX,r=t.endX,s=this.state.scaleValues,i=this.props,a=i.gap,o=i.data.length-1,l=Math.min(n,r),c=Math.max(n,r),d=e.getIndexInRange(s,l),u=e.getIndexInRange(s,c);return{startIndex:d-d%a,endIndex:u===o?o:u-u%a}}},{key:"getTextOfTick",value:function(e){var t=this.props,n=t.data,r=t.tickFormatter,s=t.dataKey,i=jie(n[e],s,e);return RZ(r)?r(i,e):i}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(e){var t=this.state,n=t.slideMoveStartX,r=t.startX,s=t.endX,i=this.props,a=i.x,o=i.width,l=i.travellerWidth,c=i.startIndex,d=i.endIndex,u=i.onChange,h=e.pageX-n;h>0?h=Math.min(h,a+o-l-s,a+o-l-r):h<0&&(h=Math.max(h,a-r,a-s));var p=this.getIndex({startX:r+h,endX:s+h});p.startIndex===c&&p.endIndex===d||!u||u(p),this.setState({startX:r+h,endX:s+h,slideMoveStartX:e.pageX})}},{key:"handleTravellerDragStart",value:function(e,t){var n=cue(t)?t.changedTouches[0]:t;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:e,brushMoveStartX:n.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(e){var t=this.state,n=t.brushMoveStartX,r=t.movingTravellerId,s=t.endX,i=t.startX,a=this.state[r],o=this.props,l=o.x,c=o.width,d=o.travellerWidth,u=o.onChange,h=o.gap,p=o.data,m={startX:this.state.startX,endX:this.state.endX},f=e.pageX-n;f>0?f=Math.min(f,l+c-d-a):f<0&&(f=Math.max(f,l-a)),m[r]=a+f;var g=this.getIndex(m),x=g.startIndex,v=g.endIndex;this.setState(oue(oue({},r,a+f),"brushMoveStartX",e.pageX),function(){var e;u&&(e=p.length-1,("startX"===r&&(s>i?x%h===0:v%h===0)||s<i&&v===e||"endX"===r&&(s>i?v%h===0:x%h===0)||s>i&&v===e)&&u(g))})}},{key:"handleTravellerMoveKeyboard",value:function(e,t){var n=this,r=this.state,s=r.scaleValues,i=r.startX,a=r.endX,o=this.state[t],l=s.indexOf(o);if(-1!==l){var c=l+e;if(!(-1===c||c>=s.length)){var d=s[c];"startX"===t&&d>=a||"endX"===t&&d<=i||this.setState(oue({},t,d),function(){n.props.onChange(n.getIndex({startX:n.state.startX,endX:n.state.endX}))})}}}},{key:"renderBackground",value:function(){var e=this.props,t=e.x,n=e.y,r=e.width,s=e.height,i=e.fill,a=e.stroke;return fn.createElement("rect",{stroke:a,fill:i,x:t,y:n,width:r,height:s})}},{key:"renderPanorama",value:function(){var e=this.props,t=e.x,n=e.y,r=e.width,s=e.height,i=e.data,a=e.children,o=e.padding,l=hn.Children.only(a);return l?fn.cloneElement(l,{x:t,y:n,width:r,height:s,margin:o,compact:!0,data:i}):null}},{key:"renderTravellerLayer",value:function(t,n){var r,s,i=this,a=this.props,o=a.y,l=a.travellerWidth,c=a.height,d=a.traveller,u=a.ariaLabel,h=a.data,p=a.startIndex,m=a.endIndex,f=Math.max(t,this.props.x),g=tue(tue({},I0(this.props,!1)),{},{x:f,y:o,width:l,height:c}),x=u||"Min value: ".concat(null===(r=h[p])||void 0===r?void 0:r.name,", Max value: ").concat(null===(s=h[m])||void 0===s?void 0:s.name);return fn.createElement(G0,{tabIndex:0,role:"slider","aria-label":x,"aria-valuenow":t,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[n],onTouchStart:this.travellerDragStartHandlers[n],onKeyDown:function(e){["ArrowLeft","ArrowRight"].includes(e.key)&&(e.preventDefault(),e.stopPropagation(),i.handleTravellerMoveKeyboard("ArrowRight"===e.key?1:-1,n))},onFocus:function(){i.setState({isTravellerFocused:!0})},onBlur:function(){i.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(d,g))}},{key:"renderSlide",value:function(e,t){var n=this.props,r=n.y,s=n.height,i=n.stroke,a=n.travellerWidth,o=Math.min(e,t)+a,l=Math.max(Math.abs(t-e)-a,0);return fn.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:i,fillOpacity:.2,x:o,y:r,width:l,height:s})}},{key:"renderText",value:function(){var e=this.props,t=e.startIndex,n=e.endIndex,r=e.y,s=e.height,i=e.travellerWidth,a=e.stroke,o=this.state,l=o.startX,c=o.endX,d={pointerEvents:"none",fill:a};return fn.createElement(G0,{className:"recharts-brush-texts"},fn.createElement(n7,Qde({textAnchor:"end",verticalAnchor:"middle",x:Math.min(l,c)-5,y:r+s/2},d),this.getTextOfTick(t)),fn.createElement(n7,Qde({textAnchor:"start",verticalAnchor:"middle",x:Math.max(l,c)+i+5,y:r+s/2},d),this.getTextOfTick(n)))}},{key:"render",value:function(){var e=this.props,t=e.data,n=e.className,r=e.children,s=e.x,i=e.y,a=e.width,o=e.height,l=e.alwaysShowText,c=this.state,d=c.startX,u=c.endX,h=c.isTextActive,p=c.isSlideMoving,m=c.isTravellerMoving,f=c.isTravellerFocused;if(!t||!t.length||!s0(s)||!s0(i)||!s0(a)||!s0(o)||a<=0||o<=0)return null;var g,x,v,y,b=Bo("recharts-brush",n),w=1===fn.Children.count(r),j=(x="none",v=(g="userSelect").replace(/(\w)/,function(e){return e.toUpperCase()}),(y=Zde.reduce(function(e,t){return Kde(Kde({},e),{},Yde({},t+v,x))},{}))[g]=x,y);return fn.createElement(G0,{className:b,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:j},this.renderBackground(),w&&this.renderPanorama(),this.renderSlide(d,u),this.renderTravellerLayer(d,"startX"),this.renderTravellerLayer(u,"endX"),(h||p||m||f||l)&&this.renderText())}}])&&nue(t.prototype,n),r&&nue(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();oue(due,"displayName","Brush"),oue(due,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var uue=V6;var hue=l3,pue=Z4,mue=function(e,t){var n;return uue(e,function(e,r,s){return!(n=t(e,r,s))}),!!n},fue=SZ,gue=j8;const xue=mn(function(e,t,n){var r=fue(e)?hue:mue;return n&&gue(e,t,n)&&(t=void 0),r(e,pue(t))});var vue=function(e,t){var n=e.alwaysShow,r=e.ifOverflow;return n&&(r="extendDomain"),r===t},yue=c8;var bue=function(e,t,n){"__proto__"==t&&yue?yue(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},wue=B6,jue=Z4;const Nue=mn(function(e,t){var n={};return t=jue(t),wue(e,function(e,r,s){bue(n,r,t(e,r,s))}),n});var _ue=V6;var Sue=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0},Mue=function(e,t){var n=!0;return _ue(e,function(e,r,s){return n=!!t(e,r,s)}),n},Cue=Z4,Eue=SZ,kue=j8;const Aue=mn(function(e,t,n){var r=Eue(e)?Sue:Mue;return n&&kue(e,t,n)&&(t=void 0),r(e,Cue(t))});var Tue=["x","y"];function Pue(e){return(Pue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Oue(){return Oue=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Oue.apply(this,arguments)}function Rue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Iue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rue(Object(n),!0).forEach(function(t){Due(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rue(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Due(e,t,n){return t=function(e){var t=function(e,t){if("object"!=Pue(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=Pue(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Pue(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Lue(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function Fue(e,t){var n=e.x,r=e.y,s=Lue(e,Tue),i="".concat(n),a=parseInt(i,10),o="".concat(r),l=parseInt(o,10),c="".concat(t.height||s.height),d=parseInt(c,10),u="".concat(t.width||s.width),h=parseInt(u,10);return Iue(Iue(Iue(Iue(Iue({},t),s),a?{x:a}:{}),l?{y:l}:{}),{},{height:d,width:h,name:t.name,radius:t.radius})}function zue(e){return fn.createElement(vde,Oue({shapeType:"rectangle",propTransformer:Fue,activeClassName:"recharts-active-bar"},e))}var Bue,Uue=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(n,r){if("number"==typeof e)return e;var s=s0(n)||function(e){return MQ(e)}(n);return s?e(n,r):(s||Yse(),t)}},Vue=["value","background"];function Hue(e){return(Hue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wue(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function $ue(){return $ue=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$ue.apply(this,arguments)}function Gue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function que(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gue(Object(n),!0).forEach(function(t){Que(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gue(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Xue(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ehe(r.key),r)}}function Kue(e,t,n){return t=Zue(t),function(e,t){if(t&&("object"===Hue(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Yue()?Reflect.construct(t,n||[],Zue(e).constructor):t.apply(e,n))}function Yue(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Yue=function(){return!!e})()}function Zue(e){return(Zue=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Jue(e,t){return(Jue=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Que(e,t,n){return(t=ehe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ehe(e){var t=function(e,t){if("object"!=Hue(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=Hue(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==Hue(t)?t:t+""}var the=function(){function e(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return Que(t=Kue(this,e,[].concat(r)),"state",{isAnimationFinished:!1}),Que(t,"id",o0("recharts-bar-")),Que(t,"handleAnimationEnd",function(){var e=t.props.onAnimationEnd;t.setState({isAnimationFinished:!0}),e&&e()}),Que(t,"handleAnimationStart",function(){var e=t.props.onAnimationStart;t.setState({isAnimationFinished:!1}),e&&e()}),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Jue(e,t)}(e,hn.PureComponent),t=e,n=[{key:"renderRectanglesStatically",value:function(e){var t=this,n=this.props,r=n.shape,s=n.dataKey,i=n.activeIndex,a=n.activeBar,o=I0(this.props,!1);return e&&e.map(function(e,n){var l=n===i,c=l?a:r,d=que(que(que({},o),e),{},{isActive:l,option:c,index:n,dataKey:s,onAnimationStart:t.handleAnimationStart,onAnimationEnd:t.handleAnimationEnd});return fn.createElement(G0,$ue({className:"recharts-bar-rectangle"},b0(t.props,e,n),{key:"rectangle-".concat(null==e?void 0:e.x,"-").concat(null==e?void 0:e.y,"-").concat(null==e?void 0:e.value,"-").concat(n)}),fn.createElement(zue,d))})}},{key:"renderRectanglesWithAnimation",value:function(){var e=this,t=this.props,n=t.data,r=t.layout,s=t.isAnimationActive,i=t.animationBegin,a=t.animationDuration,o=t.animationEasing,l=t.animationId,c=this.state.prevData;return fn.createElement(Cle,{begin:i,duration:a,isActive:s,easing:o,from:{t:0},to:{t:1},key:"bar-".concat(l),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(t){var s=t.t,i=n.map(function(e,t){var n=c&&c[t];if(n){var i=d0(n.x,e.x),a=d0(n.y,e.y),o=d0(n.width,e.width),l=d0(n.height,e.height);return que(que({},e),{},{x:i(s),y:a(s),width:o(s),height:l(s)})}if("horizontal"===r){var d=d0(0,e.height)(s);return que(que({},e),{},{y:e.y+e.height-d,height:d})}var u=d0(0,e.width)(s);return que(que({},e),{},{width:u})});return fn.createElement(G0,null,e.renderRectanglesStatically(i))})}},{key:"renderRectangles",value:function(){var e=this.props,t=e.data,n=e.isAnimationActive,r=this.state.prevData;return!(n&&t&&t.length)||r&&Yre(r,t)?this.renderRectanglesStatically(t):this.renderRectanglesWithAnimation()}},{key:"renderBackground",value:function(){var e=this,t=this.props,n=t.data,r=t.dataKey,s=t.activeIndex,i=I0(this.props.background,!1);return n.map(function(t,n){var a=t.background,o=Wue(t,Vue);if(!a)return null;var l=que(que(que(que(que({},o),{},{fill:"#eee"},a),i),b0(e.props,t,n)),{},{onAnimationStart:e.handleAnimationStart,onAnimationEnd:e.handleAnimationEnd,dataKey:r,index:n,className:"recharts-bar-background-rectangle"});return fn.createElement(zue,$ue({key:"background-bar-".concat(n),option:e.props.background,isActive:n===s},l))})}},{key:"renderErrorBar",value:function(e,t){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var n=this.props,r=n.data,s=n.xAxis,i=n.yAxis,a=n.layout,o=A0(n.children,die);if(!o)return null;var l="vertical"===a?r[0].height/2:r[0].width/2,c=function(e,t){var n=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:n,errorVal:jie(e,t)}},d={clipPath:e?"url(#clipPath-".concat(t,")"):null};return fn.createElement(G0,d,o.map(function(e){return fn.cloneElement(e,{key:"error-bar-".concat(t,"-").concat(e.props.dataKey),data:r,xAxis:s,yAxis:i,layout:a,offset:l,dataPointFormatter:c})}))}},{key:"render",value:function(){var e=this.props,t=e.hide,n=e.data,r=e.className,s=e.xAxis,i=e.yAxis,a=e.left,o=e.top,l=e.width,c=e.height,d=e.isAnimationActive,u=e.background,h=e.id;if(t||!n||!n.length)return null;var p=this.state.isAnimationFinished,m=Bo("recharts-bar",r),f=s&&s.allowDataOverflow,g=i&&i.allowDataOverflow,x=f||g,v=MQ(h)?this.id:h;return fn.createElement(G0,{className:m},f||g?fn.createElement("defs",null,fn.createElement("clipPath",{id:"clipPath-".concat(v)},fn.createElement("rect",{x:f?a:a-l/2,y:g?o:o-c/2,width:f?l:2*l,height:g?c:2*c}))):null,fn.createElement(G0,{className:"recharts-bar-rectangles",clipPath:x?"url(#clipPath-".concat(v,")"):null},u?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(x,v),(!d||p)&&Tae.renderCallByParent(this.props,n))}}],r=[{key:"getDerivedStateFromProps",value:function(e,t){return e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curData:e.data,prevData:t.curData}:e.data!==t.curData?{curData:e.data}:null}}],n&&Xue(t.prototype,n),r&&Xue(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();function nhe(e){return(nhe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rhe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ohe(r.key),r)}}function she(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ihe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?she(Object(n),!0).forEach(function(t){ahe(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):she(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ahe(e,t,n){return(t=ohe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ohe(e){var t=function(e,t){if("object"!=nhe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=nhe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==nhe(t)?t:t+""}Bue=the,Que(the,"displayName","Bar"),Que(the,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Q8,animationBegin:0,animationDuration:400,animationEasing:"ease"}),Que(the,"getComposedData",function(e){var t=e.props,n=e.item,r=e.barPosition,s=e.bandSize,i=e.xAxis,a=e.yAxis,o=e.xAxisTicks,l=e.yAxisTicks,c=e.stackedData,d=e.dataStartIndex,u=e.displayedData,h=e.offset,p=function(e,t){if(!e)return null;for(var n=0,r=e.length;n<r;n++)if(e[n].item===t)return e[n].position;return null}(r,n);if(!p)return null;var m=t.layout,f=n.type.defaultProps,g=void 0!==f?que(que({},f),n.props):n.props,x=g.dataKey,v=g.children,y=g.minPointSize,b="horizontal"===m?a:i,w=c?b.scale.domain():null,j=function(e){var t=e.numericAxis,n=t.scale.domain();if("number"===t.type){var r=Math.min(n[0],n[1]),s=Math.max(n[0],n[1]);return r<=0&&s>=0?0:s<0?s:r}return n[0]}({numericAxis:b}),N=A0(v,y9),_=u.map(function(e,t){var r,u,h,f,g,v;c?r=function(e,t){if(!t||2!==t.length||!s0(t[0])||!s0(t[1]))return e;var n=Math.min(t[0],t[1]),r=Math.max(t[0],t[1]),s=[e[0],e[1]];return(!s0(e[0])||e[0]<n)&&(s[0]=n),(!s0(e[1])||e[1]>r)&&(s[1]=r),s[0]>r&&(s[0]=r),s[1]<n&&(s[1]=n),s}(c[d+t],w):(r=jie(e,x),Array.isArray(r)||(r=[j,r]));var b=Uue(y,Bue.defaultProps.minPointSize)(r[1],t);if("horizontal"===m){var _,S=[a.scale(r[0]),a.scale(r[1])],M=S[0],C=S[1];u=zie({axis:i,ticks:o,bandSize:s,offset:p.offset,entry:e,index:t}),h=null!==(_=null!=C?C:M)&&void 0!==_?_:void 0,f=p.size;var E=M-C;if(g=Number.isNaN(E)?0:E,v={x:u,y:a.y,width:f,height:a.height},Math.abs(b)>0&&Math.abs(g)<Math.abs(b)){var k=n0(g||b)*(Math.abs(b)-Math.abs(g));h-=k,g+=k}}else{var A=[i.scale(r[0]),i.scale(r[1])],T=A[0],P=A[1];if(u=T,h=zie({axis:a,ticks:l,bandSize:s,offset:p.offset,entry:e,index:t}),f=P-T,g=p.size,v={x:i.x,y:h,width:i.width,height:g},Math.abs(b)>0&&Math.abs(f)<Math.abs(b))f+=n0(f||b)*(Math.abs(b)-Math.abs(f))}return que(que(que({},e),{},{x:u,y:h,width:f,height:g,value:c?r:r[1],payload:e,background:v},N&&N[t]&&N[t].props),{},{tooltipPayload:[Gie(n,e)],tooltipPosition:{x:u+f/2,y:h+g/2}})});return que({data:_,layout:m},h)});var lhe=function(e,t,n,r,s){var i=e.width,a=e.height,o=e.layout,l=e.children,c=Object.keys(t),d={left:n.left,leftMirror:n.left,right:i-n.right,rightMirror:i-n.right,top:n.top,topMirror:n.top,bottom:a-n.bottom,bottomMirror:a-n.bottom},u=!!T0(l,the);return c.reduce(function(i,a){var l,c,h,p,m,f=t[a],g=f.orientation,x=f.domain,v=f.padding,y=void 0===v?{}:v,b=f.mirror,w=f.reversed,j="".concat(g).concat(b?"Mirror":"");if("number"===f.type&&("gap"===f.padding||"no-gap"===f.padding)){var N=x[1]-x[0],_=1/0,S=f.categoricalDomain.sort(h0);if(S.forEach(function(e,t){t>0&&(_=Math.min((e||0)-(S[t-1]||0),_))}),Number.isFinite(_)){var M=_/N,C="vertical"===f.layout?n.height:n.width;if("gap"===f.padding&&(l=M*C/2),"no-gap"===f.padding){var E=l0(e.barCategoryGap,M*C),k=M*C/2;l=k-E-(k-E)/C*E}}}c="xAxis"===r?[n.left+(y.left||0)+(l||0),n.left+n.width-(y.right||0)-(l||0)]:"yAxis"===r?"horizontal"===o?[n.top+n.height-(y.bottom||0),n.top+(y.top||0)]:[n.top+(y.top||0)+(l||0),n.top+n.height-(y.bottom||0)-(l||0)]:f.range,w&&(c=[c[1],c[0]]);var A=Pie(f,s,u),T=A.scale,P=A.realScaleType;T.domain(x).range(c),Rie(T);var O=Lie(T,ihe(ihe({},f),{},{realScaleType:P}));"xAxis"===r?(m="top"===g&&!b||"bottom"===g&&b,h=n.left,p=d[j]-m*f.height):"yAxis"===r&&(m="left"===g&&!b||"right"===g&&b,h=d[j]-m*f.width,p=n.top);var R=ihe(ihe(ihe({},f),O),{},{realScaleType:P,x:h,y:p,scale:T,width:"xAxis"===r?n.width:f.width,height:"yAxis"===r?n.height:f.height});return R.bandSize=Wie(R,O),f.hide||"xAxis"!==r?f.hide||(d[j]+=(m?-1:1)*R.width):d[j]+=(m?-1:1)*R.height,ihe(ihe({},i),{},ahe({},a,R))},{})},che=function(e,t){var n=e.x,r=e.y,s=t.x,i=t.y;return{x:Math.min(n,s),y:Math.min(r,i),width:Math.abs(s-n),height:Math.abs(i-r)}},dhe=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scale=t}return t=e,n=[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.bandAware,r=t.position;if(void 0!==e){if(r)switch(r){case"start":default:return this.scale(e);case"middle":var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+s;case"end":var i=this.bandwidth?this.bandwidth():0;return this.scale(e)+i}if(n){var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+a}return this.scale(e)}}},{key:"isInRange",value:function(e){var t=this.range(),n=t[0],r=t[t.length-1];return n<=r?e>=n&&e<=r:e>=r&&e<=n}}],r=[{key:"create",value:function(t){return new e(t)}}],n&&rhe(t.prototype,n),r&&rhe(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();ahe(dhe,"EPS",1e-4);var uhe=function(e){var t=Object.keys(e).reduce(function(t,n){return ihe(ihe({},t),{},ahe({},n,dhe.create(e[n])))},{});return ihe(ihe({},t),{},{apply:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.bandAware,s=n.position;return Nue(e,function(e,n){return t[n].apply(e,{bandAware:r,position:s})})},isInRange:function(e){return Aue(e,function(e,n){return t[n].isInRange(e)})}})};var hhe=Z4,phe=j5,mhe=M5;var fhe=function(e){return function(t,n,r){var s=Object(t);if(!phe(t)){var i=hhe(n);t=mhe(t),n=function(e){return i(s[e],e,s)}}var a=e(t,n,r);return a>-1?s[i?t[a]:a]:void 0}},ghe=Vde;var xhe=J4,vhe=Z4,yhe=function(e){var t=ghe(e),n=t%1;return t==t?n?t-n:t:0},bhe=Math.max;const whe=mn(fhe(function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var s=null==n?0:yhe(n);return s<0&&(s=bhe(r+s,0)),xhe(e,vhe(t),s)}));var jhe=QJ(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),Nhe=hn.createContext(void 0),_he=hn.createContext(void 0),She=hn.createContext(void 0),Mhe=hn.createContext({}),Che=hn.createContext(void 0),Ehe=hn.createContext(0),khe=hn.createContext(0),Ahe=function(e){var t=e.state,n=t.xAxisMap,r=t.yAxisMap,s=t.offset,i=e.clipPathId,a=e.children,o=e.width,l=e.height,c=jhe(s);return fn.createElement(Nhe.Provider,{value:n},fn.createElement(_he.Provider,{value:r},fn.createElement(Mhe.Provider,{value:s},fn.createElement(She.Provider,{value:c},fn.createElement(Che.Provider,{value:i},fn.createElement(Ehe.Provider,{value:l},fn.createElement(khe.Provider,{value:o},a)))))))},The=function(e){var t=hn.useContext(Nhe);null==t&&Yse();var n=t[e];return null==n&&Yse(),n},Phe=function(e){var t=hn.useContext(_he);null==t&&Yse();var n=t[e];return null==n&&Yse(),n},Ohe=function(){return hn.useContext(khe)},Rhe=function(){return hn.useContext(Ehe)};function Ihe(e){return(Ihe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Dhe(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Whe(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Lhe(e,t,n){return t=zhe(t),function(e,t){if(t&&("object"===Ihe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Fhe()?Reflect.construct(t,n||[],zhe(e).constructor):t.apply(e,n))}function Fhe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Fhe=function(){return!!e})()}function zhe(e){return(zhe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Bhe(e,t){return(Bhe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Uhe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Vhe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Uhe(Object(n),!0).forEach(function(t){Hhe(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Uhe(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Hhe(e,t,n){return(t=Whe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Whe(e){var t=function(e,t){if("object"!=Ihe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=Ihe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==Ihe(t)?t:t+""}function $he(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,s,i,a,o=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t);else for(;!(l=(r=i.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(d){c=!0,s=d}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw s}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ghe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ghe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ghe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function qhe(){return qhe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qhe.apply(this,arguments)}function Xhe(e){var t=e.x,n=e.y,r=e.segment,s=e.xAxisId,i=e.yAxisId,a=e.shape,o=e.className,l=e.alwaysShow,c=hn.useContext(Che),d=The(s),u=Phe(i),h=hn.useContext(She);if(!c||!h)return null;q0(void 0===l,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=function(e,t,n,r,s,i,a,o,l){var c=s.x,d=s.y,u=s.width,h=s.height;if(n){var p=l.y,m=e.y.apply(p,{position:i});if(vue(l,"discard")&&!e.y.isInRange(m))return null;var f=[{x:c+u,y:m},{x:c,y:m}];return"left"===o?f.reverse():f}if(t){var g=l.x,x=e.x.apply(g,{position:i});if(vue(l,"discard")&&!e.x.isInRange(x))return null;var v=[{x:x,y:d+h},{x:x,y:d}];return"top"===a?v.reverse():v}if(r){var y=l.segment.map(function(t){return e.apply(t,{position:i})});return vue(l,"discard")&&xue(y,function(t){return!e.isInRange(t)})?null:y}return null}(uhe({x:d.scale,y:u.scale}),i0(t),i0(n),r&&2===r.length,h,e.position,d.orientation,u.orientation,e);if(!p)return null;var m=$he(p,2),f=m[0],g=f.x,x=f.y,v=m[1],y=v.x,b=v.y,w=Vhe(Vhe({clipPath:vue(e,"hidden")?"url(#".concat(c,")"):void 0},I0(e,!0)),{},{x1:g,y1:x,x2:y,y2:b});return fn.createElement(G0,{className:Bo("recharts-reference-line",o)},function(e,t){return fn.isValidElement(e)?fn.cloneElement(e,t):RZ(e)?e(t):fn.createElement("line",qhe({},t,{className:"recharts-reference-line-line"}))}(a,w),xae.renderCallByParent(e,function(e){var t=e.x1,n=e.y1,r=e.x2,s=e.y2;return che({x:t,y:n},{x:r,y:s})}({x1:g,y1:x,x2:y,y2:b})))}var Khe=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Lhe(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Bhe(e,t)}(e,fn.Component),Dhe(e,[{key:"render",value:function(){return fn.createElement(Xhe,this.props)}}])}();function Yhe(){return Yhe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Yhe.apply(this,arguments)}function Zhe(e){return(Zhe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jhe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Qhe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jhe(Object(n),!0).forEach(function(t){ipe(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jhe(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function epe(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ape(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function tpe(e,t,n){return t=rpe(t),function(e,t){if(t&&("object"===Zhe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,npe()?Reflect.construct(t,n||[],rpe(e).constructor):t.apply(e,n))}function npe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(npe=function(){return!!e})()}function rpe(e){return(rpe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function spe(e,t){return(spe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ipe(e,t,n){return(t=ape(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ape(e){var t=function(e,t){if("object"!=Zhe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=Zhe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==Zhe(t)?t:t+""}Hhe(Khe,"displayName","ReferenceLine"),Hhe(Khe,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});var ope=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),tpe(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&spe(e,t)}(e,fn.Component),epe(e,[{key:"render",value:function(){var t=this.props,n=t.x,r=t.y,s=t.r,i=t.alwaysShow,a=t.clipPathId,o=i0(n),l=i0(r);if(q0(void 0===i,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!o||!l)return null;var c=function(e){var t=e.x,n=e.y,r=e.xAxis,s=e.yAxis,i=uhe({x:r.scale,y:s.scale}),a=i.apply({x:t,y:n},{bandAware:!0});return vue(e,"discard")&&!i.isInRange(a)?null:a}(this.props);if(!c)return null;var d=c.x,u=c.y,h=this.props,p=h.shape,m=h.className,f=Qhe(Qhe({clipPath:vue(this.props,"hidden")?"url(#".concat(a,")"):void 0},I0(this.props,!0)),{},{cx:d,cy:u});return fn.createElement(G0,{className:Bo("recharts-reference-dot",m)},e.renderDot(p,f),xae.renderCallByParent(this.props,{x:d-s,y:u-s,width:2*s,height:2*s}))}}])}();function lpe(){return lpe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lpe.apply(this,arguments)}function cpe(e){return(cpe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dpe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function upe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dpe(Object(n),!0).forEach(function(t){xpe(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dpe(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function hpe(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,vpe(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function ppe(e,t,n){return t=fpe(t),function(e,t){if(t&&("object"===cpe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,mpe()?Reflect.construct(t,n||[],fpe(e).constructor):t.apply(e,n))}function mpe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(mpe=function(){return!!e})()}function fpe(e){return(fpe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gpe(e,t){return(gpe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function xpe(e,t,n){return(t=vpe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vpe(e){var t=function(e,t){if("object"!=cpe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=cpe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==cpe(t)?t:t+""}ipe(ope,"displayName","ReferenceDot"),ipe(ope,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1}),ipe(ope,"renderDot",function(e,t){return fn.isValidElement(e)?fn.cloneElement(e,t):RZ(e)?e(t):fn.createElement(Xle,Yhe({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"}))});var ype=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ppe(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gpe(e,t)}(e,fn.Component),hpe(e,[{key:"render",value:function(){var t=this.props,n=t.x1,r=t.x2,s=t.y1,i=t.y2,a=t.className,o=t.alwaysShow,l=t.clipPathId;q0(void 0===o,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var c=i0(n),d=i0(r),u=i0(s),h=i0(i),p=this.props.shape;if(!(c||d||u||h||p))return null;var m=function(e,t,n,r,s){var i=s.x1,a=s.x2,o=s.y1,l=s.y2,c=s.xAxis,d=s.yAxis;if(!c||!d)return null;var u=uhe({x:c.scale,y:d.scale}),h={x:e?u.x.apply(i,{position:"start"}):u.x.rangeMin,y:n?u.y.apply(o,{position:"start"}):u.y.rangeMin},p={x:t?u.x.apply(a,{position:"end"}):u.x.rangeMax,y:r?u.y.apply(l,{position:"end"}):u.y.rangeMax};return!vue(s,"discard")||u.isInRange(h)&&u.isInRange(p)?che(h,p):null}(c,d,u,h,this.props);if(!m&&!p)return null;var f=vue(this.props,"hidden")?"url(#".concat(l,")"):void 0;return fn.createElement(G0,{className:Bo("recharts-reference-area",a)},e.renderRect(p,upe(upe({clipPath:f},I0(this.props,!0)),m)),xae.renderCallByParent(this.props,m))}}])}();function bpe(e,t,n){if(t<1)return[];if(1===t&&void 0===n)return e;for(var r=[],s=0;s<e.length;s+=t)r.push(e[s]);return r}function wpe(e,t,n){return function(e){var t=e.width,n=e.height,r=function(e){return(e%180+180)%180}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0),s=r*Math.PI/180,i=Math.atan(n/t),a=s>i&&s<Math.PI-i?n/Math.sin(s):t/Math.cos(s);return Math.abs(a)}({width:e.width+t.width,height:e.height+t.height},n)}function jpe(e,t,n,r,s){if(e*t<e*r||e*t>e*s)return!1;var i=n();return e*(t-e*i/2-r)>=0&&e*(t+e*i/2-s)<=0}function Npe(e){return(Npe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Spe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_pe(Object(n),!0).forEach(function(t){Mpe(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_pe(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Mpe(e,t,n){return t=function(e){var t=function(e,t){if("object"!=Npe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=Npe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Npe(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Cpe(e,t,n){var r=e.tick,s=e.ticks,i=e.viewBox,a=e.minTickGap,o=e.orientation,l=e.interval,c=e.tickFormatter,d=e.unit,u=e.angle;if(!s||!s.length||!r)return[];if(s0(l)||Q8)return function(e,t){return bpe(e,t+1)}(s,"number"==typeof l&&s0(l)?l:0);var h=[],p="top"===o||"bottom"===o?"width":"height",m=d&&"width"===p?C9(d,{fontSize:t,letterSpacing:n}):{width:0,height:0},f=function(e,r){var s=RZ(c)?c(e.value,r):e.value;return"width"===p?wpe(C9(s,{fontSize:t,letterSpacing:n}),m,u):C9(s,{fontSize:t,letterSpacing:n})[p]},g=s.length>=2?n0(s[1].coordinate-s[0].coordinate):1,x=function(e,t,n){var r="width"===n,s=e.x,i=e.y,a=e.width,o=e.height;return 1===t?{start:r?s:i,end:r?s+a:i+o}:{start:r?s+a:i+o,end:r?s:i}}(i,g,p);return"equidistantPreserveStart"===l?function(e,t,n,r,s){for(var i,a=(r||[]).slice(),o=t.start,l=t.end,c=0,d=1,u=o,h=function(){var t=null==r?void 0:r[c];if(void 0===t)return{v:bpe(r,d)};var i,a=c,h=function(){return void 0===i&&(i=n(t,a)),i},p=t.coordinate,m=0===c||jpe(e,p,h,u,l);m||(c=0,u=o,d+=1),m&&(u=p+e*(h()/2+s),c+=d)};d<=a.length;)if(i=h())return i.v;return[]}(g,x,f,s,a):(h="preserveStart"===l||"preserveStartEnd"===l?function(e,t,n,r,s,i){var a=(r||[]).slice(),o=a.length,l=t.start,c=t.end;if(i){var d=r[o-1],u=n(d,o-1),h=e*(d.coordinate+e*u/2-c);a[o-1]=d=Spe(Spe({},d),{},{tickCoord:h>0?d.coordinate-h*e:d.coordinate}),jpe(e,d.tickCoord,function(){return u},l,c)&&(c=d.tickCoord-e*(u/2+s),a[o-1]=Spe(Spe({},d),{},{isShow:!0}))}for(var p=i?o-1:o,m=function(t){var r,i=a[t],o=function(){return void 0===r&&(r=n(i,t)),r};if(0===t){var d=e*(i.coordinate-e*o()/2-l);a[t]=i=Spe(Spe({},i),{},{tickCoord:d<0?i.coordinate-d*e:i.coordinate})}else a[t]=i=Spe(Spe({},i),{},{tickCoord:i.coordinate});jpe(e,i.tickCoord,o,l,c)&&(l=i.tickCoord+e*(o()/2+s),a[t]=Spe(Spe({},i),{},{isShow:!0}))},f=0;f<p;f++)m(f);return a}(g,x,f,s,a,"preserveStartEnd"===l):function(e,t,n,r,s){for(var i=(r||[]).slice(),a=i.length,o=t.start,l=t.end,c=function(t){var r,c=i[t],d=function(){return void 0===r&&(r=n(c,t)),r};if(t===a-1){var u=e*(c.coordinate+e*d()/2-l);i[t]=c=Spe(Spe({},c),{},{tickCoord:u>0?c.coordinate-u*e:c.coordinate})}else i[t]=c=Spe(Spe({},c),{},{tickCoord:c.coordinate});jpe(e,c.tickCoord,d,o,l)&&(l=c.tickCoord-e*(d()/2+s),i[t]=Spe(Spe({},c),{},{isShow:!0}))},d=a-1;d>=0;d--)c(d);return i}(g,x,f,s,a),h.filter(function(e){return e.isShow}))}xpe(ype,"displayName","ReferenceArea"),xpe(ype,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1}),xpe(ype,"renderRect",function(e,t){return fn.isValidElement(e)?fn.cloneElement(e,t):RZ(e)?e(t):fn.createElement(Fle,lpe({},t,{className:"recharts-reference-area-rect"}))});var Epe=["viewBox"],kpe=["viewBox"],Ape=["ticks"];function Tpe(e){return(Tpe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ppe(){return Ppe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ppe.apply(this,arguments)}function Ope(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Rpe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ope(Object(n),!0).forEach(function(t){Upe(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ope(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Ipe(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function Dpe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Vpe(r.key),r)}}function Lpe(e,t,n){return t=zpe(t),function(e,t){if(t&&("object"===Tpe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Fpe()?Reflect.construct(t,n||[],zpe(e).constructor):t.apply(e,n))}function Fpe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Fpe=function(){return!!e})()}function zpe(e){return(zpe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Bpe(e,t){return(Bpe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Upe(e,t,n){return(t=Vpe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vpe(e){var t=function(e,t){if("object"!=Tpe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=Tpe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==Tpe(t)?t:t+""}var Hpe=function(){function e(t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Lpe(this,e,[t])).state={fontSize:"",letterSpacing:""},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Bpe(e,t)}(e,hn.Component),t=e,n=[{key:"shouldComponentUpdate",value:function(e,t){var n=e.viewBox,r=Ipe(e,Epe),s=this.props,i=s.viewBox,a=Ipe(s,kpe);return!p0(n,i)||!p0(r,a)||!p0(t,this.state)}},{key:"componentDidMount",value:function(){var e=this.layerReference;if(e){var t=e.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];t&&this.setState({fontSize:window.getComputedStyle(t).fontSize,letterSpacing:window.getComputedStyle(t).letterSpacing})}}},{key:"getTickLineCoord",value:function(e){var t,n,r,s,i,a,o=this.props,l=o.x,c=o.y,d=o.width,u=o.height,h=o.orientation,p=o.tickSize,m=o.mirror,f=o.tickMargin,g=m?-1:1,x=e.tickSize||p,v=s0(e.tickCoord)?e.tickCoord:e.coordinate;switch(h){case"top":t=n=e.coordinate,a=(r=(s=c+ +!m*u)-g*x)-g*f,i=v;break;case"left":r=s=e.coordinate,i=(t=(n=l+ +!m*d)-g*x)-g*f,a=v;break;case"right":r=s=e.coordinate,i=(t=(n=l+ +m*d)+g*x)+g*f,a=v;break;default:t=n=e.coordinate,a=(r=(s=c+ +m*u)+g*x)+g*f,i=v}return{line:{x1:t,y1:r,x2:n,y2:s},tick:{x:i,y:a}}}},{key:"getTickTextAnchor",value:function(){var e,t=this.props,n=t.orientation,r=t.mirror;switch(n){case"left":e=r?"start":"end";break;case"right":e=r?"end":"start";break;default:e="middle"}return e}},{key:"getTickVerticalAnchor",value:function(){var e=this.props,t=e.orientation,n=e.mirror,r="end";switch(t){case"left":case"right":r="middle";break;case"top":r=n?"start":"end";break;default:r=n?"end":"start"}return r}},{key:"renderAxisLine",value:function(){var e=this.props,t=e.x,n=e.y,r=e.width,s=e.height,i=e.orientation,a=e.mirror,o=e.axisLine,l=Rpe(Rpe(Rpe({},I0(this.props,!1)),I0(o,!1)),{},{fill:"none"});if("top"===i||"bottom"===i){var c=+("top"===i&&!a||"bottom"===i&&a);l=Rpe(Rpe({},l),{},{x1:t,y1:n+c*s,x2:t+r,y2:n+c*s})}else{var d=+("left"===i&&!a||"right"===i&&a);l=Rpe(Rpe({},l),{},{x1:t+d*r,y1:n,x2:t+d*r,y2:n+s})}return fn.createElement("line",Ppe({},l,{className:Bo("recharts-cartesian-axis-line",SQ(o,"className"))}))}},{key:"renderTicks",value:function(t,n,r){var s=this,i=this.props,a=i.tickLine,o=i.stroke,l=i.tick,c=i.tickFormatter,d=i.unit,u=Cpe(Rpe(Rpe({},this.props),{},{ticks:t}),n,r),h=this.getTickTextAnchor(),p=this.getTickVerticalAnchor(),m=I0(this.props,!1),f=I0(l,!1),g=Rpe(Rpe({},m),{},{fill:"none"},I0(a,!1)),x=u.map(function(t,n){var r=s.getTickLineCoord(t),i=r.line,x=r.tick,v=Rpe(Rpe(Rpe(Rpe({textAnchor:h,verticalAnchor:p},m),{},{stroke:"none",fill:o},f),x),{},{index:n,payload:t,visibleTicksCount:u.length,tickFormatter:c});return fn.createElement(G0,Ppe({className:"recharts-cartesian-axis-tick",key:"tick-".concat(t.value,"-").concat(t.coordinate,"-").concat(t.tickCoord)},b0(s.props,t,n)),a&&fn.createElement("line",Ppe({},g,i,{className:Bo("recharts-cartesian-axis-tick-line",SQ(a,"className"))})),l&&e.renderTickItem(l,v,"".concat(RZ(c)?c(t.value,n):t.value).concat(d||"")))});return fn.createElement("g",{className:"recharts-cartesian-axis-ticks"},x)}},{key:"render",value:function(){var e=this,t=this.props,n=t.axisLine,r=t.width,s=t.height,i=t.ticksGenerator,a=t.className;if(t.hide)return null;var o=this.props,l=o.ticks,c=Ipe(o,Ape),d=l;return RZ(i)&&(d=l&&l.length>0?i(this.props):i(c)),r<=0||s<=0||!d||!d.length?null:fn.createElement(G0,{className:Bo("recharts-cartesian-axis",a),ref:function(t){e.layerReference=t}},n&&this.renderAxisLine(),this.renderTicks(d,this.state.fontSize,this.state.letterSpacing),xae.renderCallByParent(this.props))}}],r=[{key:"renderTickItem",value:function(e,t,n){var r=Bo(t.className,"recharts-cartesian-axis-tick-value");return fn.isValidElement(e)?fn.cloneElement(e,Rpe(Rpe({},t),{},{className:r})):RZ(e)?e(Rpe(Rpe({},t),{},{className:r})):fn.createElement(n7,Ppe({},t,{className:"recharts-cartesian-axis-tick-value"}),n)}}],n&&Dpe(t.prototype,n),r&&Dpe(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();Upe(Hpe,"displayName","CartesianAxis"),Upe(Hpe,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var Wpe=["x1","y1","x2","y2","key"],$pe=["offset"];function Gpe(e){return(Gpe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qpe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Xpe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qpe(Object(n),!0).forEach(function(t){Kpe(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qpe(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Kpe(e,t,n){return t=function(e){var t=function(e,t){if("object"!=Gpe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=Gpe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Gpe(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ype(){return Ype=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ype.apply(this,arguments)}function Zpe(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}var Jpe=function(e){var t=e.fill;if(!t||"none"===t)return null;var n=e.fillOpacity,r=e.x,s=e.y,i=e.width,a=e.height,o=e.ry;return fn.createElement("rect",{x:r,y:s,ry:o,width:i,height:a,stroke:"none",fill:t,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function Qpe(e,t){var n;if(fn.isValidElement(e))n=fn.cloneElement(e,t);else if(RZ(e))n=e(t);else{var r=t.x1,s=t.y1,i=t.x2,a=t.y2,o=t.key,l=Zpe(t,Wpe),c=Zpe(I0(l,!1),$pe);n=fn.createElement("line",Ype({},c,{x1:r,y1:s,x2:i,y2:a,fill:"none",key:o}))}return n}function eme(e){var t=e.x,n=e.width,r=e.horizontal,s=void 0===r||r,i=e.horizontalPoints;if(!s||!i||!i.length)return null;var a=i.map(function(r,i){var a=Xpe(Xpe({},e),{},{x1:t,y1:r,x2:t+n,y2:r,key:"line-".concat(i),index:i});return Qpe(s,a)});return fn.createElement("g",{className:"recharts-cartesian-grid-horizontal"},a)}function tme(e){var t=e.y,n=e.height,r=e.vertical,s=void 0===r||r,i=e.verticalPoints;if(!s||!i||!i.length)return null;var a=i.map(function(r,i){var a=Xpe(Xpe({},e),{},{x1:r,y1:t,x2:r,y2:t+n,key:"line-".concat(i),index:i});return Qpe(s,a)});return fn.createElement("g",{className:"recharts-cartesian-grid-vertical"},a)}function nme(e){var t=e.horizontalFill,n=e.fillOpacity,r=e.x,s=e.y,i=e.width,a=e.height,o=e.horizontalPoints,l=e.horizontal;if(!(void 0===l||l)||!t||!t.length)return null;var c=o.map(function(e){return Math.round(e+s-s)}).sort(function(e,t){return e-t});s!==c[0]&&c.unshift(0);var d=c.map(function(e,o){var l=!c[o+1]?s+a-e:c[o+1]-e;if(l<=0)return null;var d=o%t.length;return fn.createElement("rect",{key:"react-".concat(o),y:e,x:r,height:l,width:i,stroke:"none",fill:t[d],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return fn.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function rme(e){var t=e.vertical,n=void 0===t||t,r=e.verticalFill,s=e.fillOpacity,i=e.x,a=e.y,o=e.width,l=e.height,c=e.verticalPoints;if(!n||!r||!r.length)return null;var d=c.map(function(e){return Math.round(e+i-i)}).sort(function(e,t){return e-t});i!==d[0]&&d.unshift(0);var u=d.map(function(e,t){var n=!d[t+1]?i+o-e:d[t+1]-e;if(n<=0)return null;var c=t%r.length;return fn.createElement("rect",{key:"react-".concat(t),x:e,y:a,width:n,height:l,stroke:"none",fill:r[c],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return fn.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},u)}var sme=function(e,t){var n=e.xAxis,r=e.width,s=e.height,i=e.offset;return Eie(Cpe(Xpe(Xpe(Xpe({},Hpe.defaultProps),n),{},{ticks:kie(n,!0),viewBox:{x:0,y:0,width:r,height:s}})),i.left,i.left+i.width,t)},ime=function(e,t){var n=e.yAxis,r=e.width,s=e.height,i=e.offset;return Eie(Cpe(Xpe(Xpe(Xpe({},Hpe.defaultProps),n),{},{ticks:kie(n,!0),viewBox:{x:0,y:0,width:r,height:s}})),i.top,i.top+i.height,t)},ame={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function ome(e){var t,n,r,s,i,a,o,l,c=Ohe(),d=Rhe(),u=hn.useContext(Mhe),h=Xpe(Xpe({},e),{},{stroke:null!==(t=e.stroke)&&void 0!==t?t:ame.stroke,fill:null!==(n=e.fill)&&void 0!==n?n:ame.fill,horizontal:null!==(r=e.horizontal)&&void 0!==r?r:ame.horizontal,horizontalFill:null!==(s=e.horizontalFill)&&void 0!==s?s:ame.horizontalFill,vertical:null!==(i=e.vertical)&&void 0!==i?i:ame.vertical,verticalFill:null!==(a=e.verticalFill)&&void 0!==a?a:ame.verticalFill,x:s0(e.x)?e.x:u.left,y:s0(e.y)?e.y:u.top,width:s0(e.width)?e.width:u.width,height:s0(e.height)?e.height:u.height}),p=h.x,m=h.y,f=h.width,g=h.height,x=h.syncWithTicks,v=h.horizontalValues,y=h.verticalValues,b=(o=hn.useContext(Nhe),c0(o)),w=(l=hn.useContext(_he),whe(l,function(e){return Aue(e.domain,Number.isFinite)})||c0(l));if(!s0(f)||f<=0||!s0(g)||g<=0||!s0(p)||p!==+p||!s0(m)||m!==+m)return null;var j=h.verticalCoordinatesGenerator||sme,N=h.horizontalCoordinatesGenerator||ime,_=h.horizontalPoints,S=h.verticalPoints;if((!_||!_.length)&&RZ(N)){var M=v&&v.length,C=N({yAxis:w?Xpe(Xpe({},w),{},{ticks:M?v:w.ticks}):void 0,width:c,height:d,offset:u},!!M||x);q0(Array.isArray(C),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Gpe(C),"]")),Array.isArray(C)&&(_=C)}if((!S||!S.length)&&RZ(j)){var E=y&&y.length,k=j({xAxis:b?Xpe(Xpe({},b),{},{ticks:E?y:b.ticks}):void 0,width:c,height:d,offset:u},!!E||x);q0(Array.isArray(k),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Gpe(k),"]")),Array.isArray(k)&&(S=k)}return fn.createElement("g",{className:"recharts-cartesian-grid"},fn.createElement(Jpe,{fill:h.fill,fillOpacity:h.fillOpacity,x:h.x,y:h.y,width:h.width,height:h.height,ry:h.ry}),fn.createElement(eme,Ype({},h,{offset:u,horizontalPoints:_,xAxis:b,yAxis:w})),fn.createElement(tme,Ype({},h,{offset:u,verticalPoints:S,xAxis:b,yAxis:w})),fn.createElement(nme,Ype({},h,{horizontalPoints:_})),fn.createElement(rme,Ype({},h,{verticalPoints:S})))}ome.displayName="CartesianGrid";var lme=["type","layout","connectNulls","ref"],cme=["key"];function dme(e){return(dme="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ume(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function hme(){return hme=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hme.apply(this,arguments)}function pme(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function mme(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pme(Object(n),!0).forEach(function(t){jme(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pme(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function fme(e){return function(e){if(Array.isArray(e))return gme(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return gme(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gme(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gme(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function xme(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Nme(r.key),r)}}function vme(e,t,n){return t=bme(t),function(e,t){if(t&&("object"===dme(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,yme()?Reflect.construct(t,n||[],bme(e).constructor):t.apply(e,n))}function yme(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(yme=function(){return!!e})()}function bme(e){return(bme=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wme(e,t){return(wme=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function jme(e,t,n){return(t=Nme(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Nme(e){var t=function(e,t){if("object"!=dme(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=dme(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==dme(t)?t:t+""}var _me=function(){function e(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return jme(t=vme(this,e,[].concat(r)),"state",{isAnimationFinished:!0,totalLength:0}),jme(t,"generateSimpleStrokeDasharray",function(e,t){return"".concat(t,"px ").concat(e-t,"px")}),jme(t,"getStrokeDasharray",function(n,r,s){var i=s.reduce(function(e,t){return e+t});if(!i)return t.generateSimpleStrokeDasharray(r,n);for(var a=Math.floor(n/i),o=n%i,l=r-n,c=[],d=0,u=0;d<s.length;u+=s[d],++d)if(u+s[d]>o){c=[].concat(fme(s.slice(0,d)),[o-u]);break}var h=c.length%2==0?[0,l]:[l];return[].concat(fme(e.repeat(s,a)),fme(c),h).map(function(e){return"".concat(e,"px")}).join(", ")}),jme(t,"id",o0("recharts-line-")),jme(t,"pathRef",function(e){t.mainCurve=e}),jme(t,"handleAnimationEnd",function(){t.setState({isAnimationFinished:!0}),t.props.onAnimationEnd&&t.props.onAnimationEnd()}),jme(t,"handleAnimationStart",function(){t.setState({isAnimationFinished:!1}),t.props.onAnimationStart&&t.props.onAnimationStart()}),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wme(e,t)}(e,hn.PureComponent),t=e,n=[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var e=this.getTotalLength();this.setState({totalLength:e})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var e=this.getTotalLength();e!==this.state.totalLength&&this.setState({totalLength:e})}}},{key:"getTotalLength",value:function(){var e=this.mainCurve;try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch(PUe){return 0}}},{key:"renderErrorBar",value:function(e,t){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var n=this.props,r=n.points,s=n.xAxis,i=n.yAxis,a=n.layout,o=A0(n.children,die);if(!o)return null;var l=function(e,t){return{x:e.x,y:e.y,value:e.value,errorVal:jie(e.payload,t)}},c={clipPath:e?"url(#clipPath-".concat(t,")"):null};return fn.createElement(G0,c,o.map(function(e){return fn.cloneElement(e,{key:"bar-".concat(e.props.dataKey),data:r,xAxis:s,yAxis:i,layout:a,dataPointFormatter:l})}))}},{key:"renderDots",value:function(t,n,r){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,i=s.dot,a=s.points,o=s.dataKey,l=I0(this.props,!1),c=I0(i,!0),d=a.map(function(t,n){var r=mme(mme(mme({key:"dot-".concat(n),r:3},l),c),{},{index:n,cx:t.x,cy:t.y,value:t.value,dataKey:o,payload:t.payload,points:a});return e.renderDotItem(i,r)}),u={clipPath:t?"url(#clipPath-".concat(n?"":"dots-").concat(r,")"):null};return fn.createElement(G0,hme({className:"recharts-line-dots",key:"dots"},u),d)}},{key:"renderCurveStatically",value:function(e,t,n,r){var s=this.props,i=s.type,a=s.layout,o=s.connectNulls,l=ume(s,lme),c=mme(mme(mme({},I0(l,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:t?"url(#clipPath-".concat(n,")"):null,points:e},r),{},{type:i,layout:a,connectNulls:o});return fn.createElement(Zae,hme({},c,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(e,t){var n=this,r=this.props,s=r.points,i=r.strokeDasharray,a=r.isAnimationActive,o=r.animationBegin,l=r.animationDuration,c=r.animationEasing,d=r.animationId,u=r.animateNewValues,h=r.width,p=r.height,m=this.state,f=m.prevPoints,g=m.totalLength;return fn.createElement(Cle,{begin:o,duration:l,isActive:a,easing:c,from:{t:0},to:{t:1},key:"line-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(r){var a=r.t;if(f){var o=f.length/s.length,l=s.map(function(e,t){var n=Math.floor(t*o);if(f[n]){var r=f[n],s=d0(r.x,e.x),i=d0(r.y,e.y);return mme(mme({},e),{},{x:s(a),y:i(a)})}if(u){var l=d0(2*h,e.x),c=d0(p/2,e.y);return mme(mme({},e),{},{x:l(a),y:c(a)})}return mme(mme({},e),{},{x:e.x,y:e.y})});return n.renderCurveStatically(l,e,t)}var c,d=d0(0,g)(a);if(i){var m="".concat(i).split(/[,\s]+/gim).map(function(e){return parseFloat(e)});c=n.getStrokeDasharray(d,g,m)}else c=n.generateSimpleStrokeDasharray(g,d);return n.renderCurveStatically(s,e,t,{strokeDasharray:c})})}},{key:"renderCurve",value:function(e,t){var n=this.props,r=n.points,s=n.isAnimationActive,i=this.state,a=i.prevPoints,o=i.totalLength;return s&&r&&r.length&&(!a&&o>0||!Yre(a,r))?this.renderCurveWithAnimation(e,t):this.renderCurveStatically(r,e,t)}},{key:"render",value:function(){var e,t=this.props,n=t.hide,r=t.dot,s=t.points,i=t.className,a=t.xAxis,o=t.yAxis,l=t.top,c=t.left,d=t.width,u=t.height,h=t.isAnimationActive,p=t.id;if(n||!s||!s.length)return null;var m=this.state.isAnimationFinished,f=1===s.length,g=Bo("recharts-line",i),x=a&&a.allowDataOverflow,v=o&&o.allowDataOverflow,y=x||v,b=MQ(p)?this.id:p,w=null!==(e=I0(r,!1))&&void 0!==e?e:{r:3,strokeWidth:2},j=w.r,N=void 0===j?3:j,_=w.strokeWidth,S=void 0===_?2:_,M=(R0(r)?r:{}).clipDot,C=void 0===M||M,E=2*N+S;return fn.createElement(G0,{className:g},x||v?fn.createElement("defs",null,fn.createElement("clipPath",{id:"clipPath-".concat(b)},fn.createElement("rect",{x:x?c:c-d/2,y:v?l:l-u/2,width:x?d:2*d,height:v?u:2*u})),!C&&fn.createElement("clipPath",{id:"clipPath-dots-".concat(b)},fn.createElement("rect",{x:c-E/2,y:l-E/2,width:d+E,height:u+E}))):null,!f&&this.renderCurve(y,b),this.renderErrorBar(y,b),(f||r)&&this.renderDots(y,C,b),(!h||m)&&Tae.renderCallByParent(this.props,s))}}],r=[{key:"getDerivedStateFromProps",value:function(e,t){return e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curPoints:e.points,prevPoints:t.curPoints}:e.points!==t.curPoints?{curPoints:e.points}:null}},{key:"repeat",value:function(e,t){for(var n=e.length%2!=0?[].concat(fme(e),[0]):e,r=[],s=0;s<t;++s)r=[].concat(fme(r),fme(n));return r}},{key:"renderDotItem",value:function(e,t){var n;if(fn.isValidElement(e))n=fn.cloneElement(e,t);else if(RZ(e))n=e(t);else{var r=t.key,s=ume(t,cme),i=Bo("recharts-line-dot","boolean"!=typeof e?e.className:"");n=fn.createElement(Xle,hme({key:r},s,{className:i}))}return n}}],n&&xme(t.prototype,n),r&&xme(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();jme(_me,"displayName","Line"),jme(_me,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Q8,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1}),jme(_me,"getComposedData",function(e){var t=e.props,n=e.xAxis,r=e.yAxis,s=e.xAxisTicks,i=e.yAxisTicks,a=e.dataKey,o=e.bandSize,l=e.displayedData,c=e.offset,d=t.layout;return mme({points:l.map(function(e,t){var l=jie(e,a);return"horizontal"===d?{x:Fie({axis:n,ticks:s,bandSize:o,entry:e,index:t}),y:MQ(l)?null:r.scale(l),value:l,payload:e}:{x:MQ(l)?null:n.scale(l),y:Fie({axis:r,ticks:i,bandSize:o,entry:e,index:t}),value:l,payload:e}}),layout:d},c)});var Sme,Mme=["layout","type","stroke","connectNulls","isRange","ref"],Cme=["key"];function Eme(e){return(Eme="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kme(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function Ame(){return Ame=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ame.apply(this,arguments)}function Tme(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Pme(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tme(Object(n),!0).forEach(function(t){Fme(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tme(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Ome(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,zme(r.key),r)}}function Rme(e,t,n){return t=Dme(t),function(e,t){if(t&&("object"===Eme(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ime()?Reflect.construct(t,n||[],Dme(e).constructor):t.apply(e,n))}function Ime(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Ime=function(){return!!e})()}function Dme(e){return(Dme=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Lme(e,t){return(Lme=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Fme(e,t,n){return(t=zme(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zme(e){var t=function(e,t){if("object"!=Eme(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=Eme(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==Eme(t)?t:t+""}var Bme=function(){function e(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return Fme(t=Rme(this,e,[].concat(r)),"state",{isAnimationFinished:!0}),Fme(t,"id",o0("recharts-area-")),Fme(t,"handleAnimationEnd",function(){var e=t.props.onAnimationEnd;t.setState({isAnimationFinished:!0}),RZ(e)&&e()}),Fme(t,"handleAnimationStart",function(){var e=t.props.onAnimationStart;t.setState({isAnimationFinished:!1}),RZ(e)&&e()}),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Lme(e,t)}(e,hn.PureComponent),t=e,n=[{key:"renderDots",value:function(t,n,r){var s=this.props.isAnimationActive,i=this.state.isAnimationFinished;if(s&&!i)return null;var a=this.props,o=a.dot,l=a.points,c=a.dataKey,d=I0(this.props,!1),u=I0(o,!0),h=l.map(function(t,n){var r=Pme(Pme(Pme({key:"dot-".concat(n),r:3},d),u),{},{index:n,cx:t.x,cy:t.y,dataKey:c,value:t.value,payload:t.payload,points:l});return e.renderDotItem(o,r)}),p={clipPath:t?"url(#clipPath-".concat(n?"":"dots-").concat(r,")"):null};return fn.createElement(G0,Ame({className:"recharts-area-dots"},p),h)}},{key:"renderHorizontalRect",value:function(e){var t=this.props,n=t.baseLine,r=t.points,s=t.strokeWidth,i=r[0].x,a=r[r.length-1].x,o=e*Math.abs(i-a),l=Dre(r.map(function(e){return e.y||0}));return s0(n)&&"number"==typeof n?l=Math.max(n,l):n&&Array.isArray(n)&&n.length&&(l=Math.max(Dre(n.map(function(e){return e.y||0})),l)),s0(l)?fn.createElement("rect",{x:i<a?i:i-o,y:0,width:o,height:Math.floor(l+(s?parseInt("".concat(s),10):1))}):null}},{key:"renderVerticalRect",value:function(e){var t=this.props,n=t.baseLine,r=t.points,s=t.strokeWidth,i=r[0].y,a=r[r.length-1].y,o=e*Math.abs(i-a),l=Dre(r.map(function(e){return e.x||0}));return s0(n)&&"number"==typeof n?l=Math.max(n,l):n&&Array.isArray(n)&&n.length&&(l=Math.max(Dre(n.map(function(e){return e.x||0})),l)),s0(l)?fn.createElement("rect",{x:0,y:i<a?i:i-o,width:l+(s?parseInt("".concat(s),10):1),height:Math.floor(o)}):null}},{key:"renderClipRect",value:function(e){return"vertical"===this.props.layout?this.renderVerticalRect(e):this.renderHorizontalRect(e)}},{key:"renderAreaStatically",value:function(e,t,n,r){var s=this.props,i=s.layout,a=s.type,o=s.stroke,l=s.connectNulls,c=s.isRange,d=kme(s,Mme);return fn.createElement(G0,{clipPath:n?"url(#clipPath-".concat(r,")"):null},fn.createElement(Zae,Ame({},I0(d,!0),{points:e,connectNulls:l,type:a,baseLine:t,layout:i,stroke:"none",className:"recharts-area-area"})),"none"!==o&&fn.createElement(Zae,Ame({},I0(this.props,!1),{className:"recharts-area-curve",layout:i,type:a,connectNulls:l,fill:"none",points:e})),"none"!==o&&c&&fn.createElement(Zae,Ame({},I0(this.props,!1),{className:"recharts-area-curve",layout:i,type:a,connectNulls:l,fill:"none",points:t})))}},{key:"renderAreaWithAnimation",value:function(e,t){var n=this,r=this.props,s=r.points,i=r.baseLine,a=r.isAnimationActive,o=r.animationBegin,l=r.animationDuration,c=r.animationEasing,d=r.animationId,u=this.state,h=u.prevPoints,p=u.prevBaseLine;return fn.createElement(Cle,{begin:o,duration:l,isActive:a,easing:c,from:{t:0},to:{t:1},key:"area-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(r){var a=r.t;if(h){var o,l=h.length/s.length,c=s.map(function(e,t){var n=Math.floor(t*l);if(h[n]){var r=h[n],s=d0(r.x,e.x),i=d0(r.y,e.y);return Pme(Pme({},e),{},{x:s(a),y:i(a)})}return e});return o=s0(i)&&"number"==typeof i?d0(p,i)(a):MQ(i)||t0(i)?d0(p,0)(a):i.map(function(e,t){var n=Math.floor(t*l);if(p[n]){var r=p[n],s=d0(r.x,e.x),i=d0(r.y,e.y);return Pme(Pme({},e),{},{x:s(a),y:i(a)})}return e}),n.renderAreaStatically(c,o,e,t)}return fn.createElement(G0,null,fn.createElement("defs",null,fn.createElement("clipPath",{id:"animationClipPath-".concat(t)},n.renderClipRect(a))),fn.createElement(G0,{clipPath:"url(#animationClipPath-".concat(t,")")},n.renderAreaStatically(s,i,e,t)))})}},{key:"renderArea",value:function(e,t){var n=this.props,r=n.points,s=n.baseLine,i=n.isAnimationActive,a=this.state,o=a.prevPoints,l=a.prevBaseLine,c=a.totalLength;return i&&r&&r.length&&(!o&&c>0||!Yre(o,r)||!Yre(l,s))?this.renderAreaWithAnimation(e,t):this.renderAreaStatically(r,s,e,t)}},{key:"render",value:function(){var e,t=this.props,n=t.hide,r=t.dot,s=t.points,i=t.className,a=t.top,o=t.left,l=t.xAxis,c=t.yAxis,d=t.width,u=t.height,h=t.isAnimationActive,p=t.id;if(n||!s||!s.length)return null;var m=this.state.isAnimationFinished,f=1===s.length,g=Bo("recharts-area",i),x=l&&l.allowDataOverflow,v=c&&c.allowDataOverflow,y=x||v,b=MQ(p)?this.id:p,w=null!==(e=I0(r,!1))&&void 0!==e?e:{r:3,strokeWidth:2},j=w.r,N=void 0===j?3:j,_=w.strokeWidth,S=void 0===_?2:_,M=(R0(r)?r:{}).clipDot,C=void 0===M||M,E=2*N+S;return fn.createElement(G0,{className:g},x||v?fn.createElement("defs",null,fn.createElement("clipPath",{id:"clipPath-".concat(b)},fn.createElement("rect",{x:x?o:o-d/2,y:v?a:a-u/2,width:x?d:2*d,height:v?u:2*u})),!C&&fn.createElement("clipPath",{id:"clipPath-dots-".concat(b)},fn.createElement("rect",{x:o-E/2,y:a-E/2,width:d+E,height:u+E}))):null,f?null:this.renderArea(y,b),(r||f)&&this.renderDots(y,C,b),(!h||m)&&Tae.renderCallByParent(this.props,s))}}],r=[{key:"getDerivedStateFromProps",value:function(e,t){return e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curPoints:e.points,curBaseLine:e.baseLine,prevPoints:t.curPoints,prevBaseLine:t.curBaseLine}:e.points!==t.curPoints||e.baseLine!==t.curBaseLine?{curPoints:e.points,curBaseLine:e.baseLine}:null}}],n&&Ome(t.prototype,n),r&&Ome(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();function Ume(e){return(Ume="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vme(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Xme(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Hme(e,t,n){return t=$me(t),function(e,t){if(t&&("object"===Ume(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Wme()?Reflect.construct(t,n||[],$me(e).constructor):t.apply(e,n))}function Wme(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Wme=function(){return!!e})()}function $me(e){return($me=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Gme(e,t){return(Gme=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function qme(e,t,n){return(t=Xme(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xme(e){var t=function(e,t){if("object"!=Ume(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=Ume(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==Ume(t)?t:t+""}function Kme(){return Kme=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Kme.apply(this,arguments)}function Yme(e){var t=e.xAxisId,n=Ohe(),r=Rhe(),s=The(t);return null==s?null:hn.createElement(Hpe,Kme({},s,{className:Bo("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(e){return kie(e,!0)}}))}Sme=Bme,Fme(Bme,"displayName","Area"),Fme(Bme,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!Q8,animationBegin:0,animationDuration:1500,animationEasing:"ease"}),Fme(Bme,"getBaseValue",function(e,t,n,r){var s=e.layout,i=e.baseValue,a=t.props.baseValue,o=null!=a?a:i;if(s0(o)&&"number"==typeof o)return o;var l="horizontal"===s?r:n,c=l.scale.domain();if("number"===l.type){var d=Math.max(c[0],c[1]),u=Math.min(c[0],c[1]);return"dataMin"===o?u:"dataMax"===o||d<0?d:Math.max(Math.min(c[0],c[1]),0)}return"dataMin"===o?c[0]:"dataMax"===o?c[1]:c[0]}),Fme(Bme,"getComposedData",function(e){var t,n=e.props,r=e.item,s=e.xAxis,i=e.yAxis,a=e.xAxisTicks,o=e.yAxisTicks,l=e.bandSize,c=e.dataKey,d=e.stackedData,u=e.dataStartIndex,h=e.displayedData,p=e.offset,m=n.layout,f=d&&d.length,g=Sme.getBaseValue(n,r,s,i),x="horizontal"===m,v=!1,y=h.map(function(e,t){var n;f?n=d[u+t]:(n=jie(e,c),Array.isArray(n)?v=!0:n=[g,n]);var r=null==n[1]||f&&null==jie(e,c);return x?{x:Fie({axis:s,ticks:a,bandSize:l,entry:e,index:t}),y:r?null:i.scale(n[1]),value:n,payload:e}:{x:r?null:s.scale(n[1]),y:Fie({axis:i,ticks:o,bandSize:l,entry:e,index:t}),value:n,payload:e}});return t=f||v?y.map(function(e){var t=Array.isArray(e.value)?e.value[0]:null;return x?{x:e.x,y:null!=t&&null!=e.y?i.scale(t):null}:{x:null!=t?s.scale(t):null,y:e.y}}):x?i.scale(g):s.scale(g),Pme({points:y,baseLine:t,layout:m,isRange:v},p)}),Fme(Bme,"renderDotItem",function(e,t){var n;if(fn.isValidElement(e))n=fn.cloneElement(e,t);else if(RZ(e))n=e(t);else{var r=Bo("recharts-area-dot","boolean"!=typeof e?e.className:""),s=t.key,i=kme(t,Cme);n=fn.createElement(Xle,Ame({},i,{key:s,className:r}))}return n});var Zme=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Hme(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Gme(e,t)}(e,hn.Component),Vme(e,[{key:"render",value:function(){return hn.createElement(Yme,this.props)}}])}();function Jme(e){return(Jme="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qme(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ife(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function efe(e,t,n){return t=nfe(t),function(e,t){if(t&&("object"===Jme(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,tfe()?Reflect.construct(t,n||[],nfe(e).constructor):t.apply(e,n))}function tfe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(tfe=function(){return!!e})()}function nfe(e){return(nfe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rfe(e,t){return(rfe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function sfe(e,t,n){return(t=ife(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ife(e){var t=function(e,t){if("object"!=Jme(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=Jme(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==Jme(t)?t:t+""}function afe(){return afe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},afe.apply(this,arguments)}qme(Zme,"displayName","XAxis"),qme(Zme,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});var ofe=function(e){var t=e.yAxisId,n=Ohe(),r=Rhe(),s=Phe(t);return null==s?null:hn.createElement(Hpe,afe({},s,{className:Bo("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(e){return kie(e,!0)}}))},lfe=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),efe(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rfe(e,t)}(e,hn.Component),Qme(e,[{key:"render",value:function(){return hn.createElement(ofe,this.props)}}])}();function cfe(e){return function(e){if(Array.isArray(e))return dfe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return dfe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dfe(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dfe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}sfe(lfe,"displayName","YAxis"),sfe(lfe,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});var ufe=function(e,t,n,r,s){var i=A0(e,Khe),a=A0(e,ope),o=[].concat(cfe(i),cfe(a)),l=A0(e,ype),c="".concat(r,"Id"),d=r[0],u=t;if(o.length&&(u=o.reduce(function(e,t){if(t.props[c]===n&&vue(t.props,"extendDomain")&&s0(t.props[d])){var r=t.props[d];return[Math.min(e[0],r),Math.max(e[1],r)]}return e},u)),l.length){var h="".concat(d,"1"),p="".concat(d,"2");u=l.reduce(function(e,t){if(t.props[c]===n&&vue(t.props,"extendDomain")&&s0(t.props[h])&&s0(t.props[p])){var r=t.props[h],s=t.props[p];return[Math.min(e[0],r,s),Math.max(e[1],r,s)]}return e},u)}return s&&s.length&&(u=s.reduce(function(e,t){return s0(t)?[Math.min(e[0],t),Math.max(e[1],t)]:e},u)),u},hfe={exports:{}};!function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}function s(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function i(e,t,r,i,a){if("function"!=typeof r)throw new TypeError("The listener must be a function");var o=new s(r,i||e,a),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],o]:e._events[l].push(o):(e._events[l]=o,e._eventsCount++),e}function a(e,t){0===--e._eventsCount?e._events=new r:delete e._events[t]}function o(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),o.prototype.eventNames=function(){var e,r,s=[];if(0===this._eventsCount)return s;for(r in e=this._events)t.call(e,r)&&s.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?s.concat(Object.getOwnPropertySymbols(e)):s},o.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var s=0,i=r.length,a=new Array(i);s<i;s++)a[s]=r[s].fn;return a},o.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},o.prototype.emit=function(e,t,r,s,i,a){var o=n?n+e:e;if(!this._events[o])return!1;var l,c,d=this._events[o],u=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,!0),u){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,t),!0;case 3:return d.fn.call(d.context,t,r),!0;case 4:return d.fn.call(d.context,t,r,s),!0;case 5:return d.fn.call(d.context,t,r,s,i),!0;case 6:return d.fn.call(d.context,t,r,s,i,a),!0}for(c=1,l=new Array(u-1);c<u;c++)l[c-1]=arguments[c];d.fn.apply(d.context,l)}else{var h,p=d.length;for(c=0;c<p;c++)switch(d[c].once&&this.removeListener(e,d[c].fn,void 0,!0),u){case 1:d[c].fn.call(d[c].context);break;case 2:d[c].fn.call(d[c].context,t);break;case 3:d[c].fn.call(d[c].context,t,r);break;case 4:d[c].fn.call(d[c].context,t,r,s);break;default:if(!l)for(h=1,l=new Array(u-1);h<u;h++)l[h-1]=arguments[h];d[c].fn.apply(d[c].context,l)}}return!0},o.prototype.on=function(e,t,n){return i(this,e,t,n,!1)},o.prototype.once=function(e,t,n){return i(this,e,t,n,!0)},o.prototype.removeListener=function(e,t,r,s){var i=n?n+e:e;if(!this._events[i])return this;if(!t)return a(this,i),this;var o=this._events[i];if(o.fn)o.fn!==t||s&&!o.once||r&&o.context!==r||a(this,i);else{for(var l=0,c=[],d=o.length;l<d;l++)(o[l].fn!==t||s&&!o[l].once||r&&o[l].context!==r)&&c.push(o[l]);c.length?this._events[i]=1===c.length?c[0]:c:a(this,i)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&a(this,t)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,e.exports=o}(hfe);var pfe=new(mn(hfe.exports)),mfe="recharts.syncMouseEvents";function ffe(e){return(ffe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gfe(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,vfe(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function xfe(e,t,n){return(t=vfe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vfe(e){var t=function(e,t){if("object"!=ffe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=ffe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==ffe(t)?t:t+""}var yfe=function(){return gfe(function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),xfe(this,"activeIndex",0),xfe(this,"coordinateList",[]),xfe(this,"layout","horizontal")},[{key:"setDetails",value:function(e){var t,n=e.coordinateList,r=void 0===n?null:n,s=e.container,i=void 0===s?null:s,a=e.layout,o=void 0===a?null:a,l=e.offset,c=void 0===l?null:l,d=e.mouseHandlerCallback,u=void 0===d?null:d;this.coordinateList=null!==(t=null!=r?r:this.coordinateList)&&void 0!==t?t:[],this.container=null!=i?i:this.container,this.layout=null!=o?o:this.layout,this.offset=null!=c?c:this.offset,this.mouseHandlerCallback=null!=u?u:this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(e){if(0!==this.coordinateList.length)switch(e.key){case"ArrowRight":if("horizontal"!==this.layout)return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break;case"ArrowLeft":if("horizontal"!==this.layout)return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse()}}},{key:"setIndex",value:function(e){this.activeIndex=e}},{key:"spoofMouse",value:function(){var e,t;if("horizontal"===this.layout&&0!==this.coordinateList.length){var n=this.container.getBoundingClientRect(),r=n.x,s=n.y,i=n.height,a=this.coordinateList[this.activeIndex].coordinate,o=(null===(e=window)||void 0===e?void 0:e.scrollX)||0,l=(null===(t=window)||void 0===t?void 0:t.scrollY)||0,c=r+a+o,d=s+this.offset.top+i/2+l;this.mouseHandlerCallback({pageX:c,pageY:d})}}}])}();function bfe(e){var t=e.cx,n=e.cy,r=e.radius,s=e.startAngle,i=e.endAngle;return{points:[tae(t,n,r,s),tae(t,n,r,i)],cx:t,cy:n,radius:r,startAngle:s,endAngle:i}}function wfe(e,t,n){var r,s,i,a;if("horizontal"===e)i=r=t.x,s=n.top,a=n.top+n.height;else if("vertical"===e)a=s=t.y,r=n.left,i=n.left+n.width;else if(null!=t.cx&&null!=t.cy){if("centric"!==e)return bfe(t);var o=t.cx,l=t.cy,c=t.innerRadius,d=t.outerRadius,u=t.angle,h=tae(o,l,c,u),p=tae(o,l,d,u);r=h.x,s=h.y,i=p.x,a=p.y}return[{x:r,y:s},{x:i,y:a}]}function jfe(e){return(jfe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nfe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nfe(Object(n),!0).forEach(function(t){Sfe(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nfe(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Sfe(e,t,n){return t=function(e){var t=function(e,t){if("object"!=jfe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=jfe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==jfe(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Mfe(e){var t,n,r,s=e.element,i=e.tooltipEventType,a=e.isActive,o=e.activeCoordinate,l=e.activePayload,c=e.offset,d=e.activeTooltipIndex,u=e.tooltipAxisBandSize,h=e.layout,p=e.chartName,m=null!==(t=s.props.cursor)&&void 0!==t?t:null===(n=s.type.defaultProps)||void 0===n?void 0:n.cursor;if(!s||!m||!a||!o||"ScatterChart"!==p&&"axis"!==i)return null;var f=Zae;if("ScatterChart"===p)r=o,f=nce;else if("BarChart"===p)r=function(e,t,n,r){var s=r/2;return{stroke:"none",fill:"#ccc",x:"horizontal"===e?t.x-s:n.left+.5,y:"horizontal"===e?n.top+.5:t.y-s,width:"horizontal"===e?r:n.width-1,height:"horizontal"===e?n.height-1:r}}(h,o,c,u),f=Fle;else if("radial"===h){var g=bfe(o),x=g.cx,v=g.cy,y=g.radius;r={cx:x,cy:v,startAngle:g.startAngle,endAngle:g.endAngle,innerRadius:y,outerRadius:y},f=Bae}else r={points:wfe(h,o,c)},f=Zae;var b=_fe(_fe(_fe(_fe({stroke:"#ccc",pointerEvents:"none"},c),r),I0(m,!1)),{},{payload:l,payloadIndex:d,className:Bo("recharts-tooltip-cursor",m.className)});return hn.isValidElement(m)?hn.cloneElement(m,b):hn.createElement(f,b)}var Cfe=["item"],Efe=["children","className","width","height","style","compact","title","desc"];function kfe(e){return(kfe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Afe(){return Afe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Afe.apply(this,arguments)}function Tfe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,s,i,a,o=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t);else for(;!(l=(r=i.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(d){c=!0,s=d}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw s}}return o}}(e,t)||zfe(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pfe(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function Ofe(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Wfe(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Rfe(e,t,n){return t=Dfe(t),function(e,t){if(t&&("object"===kfe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ife()?Reflect.construct(t,n||[],Dfe(e).constructor):t.apply(e,n))}function Ife(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Ife=function(){return!!e})()}function Dfe(e){return(Dfe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Lfe(e,t){return(Lfe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Ffe(e){return function(e){if(Array.isArray(e))return Bfe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||zfe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zfe(e,t){if(e){if("string"==typeof e)return Bfe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Bfe(e,t):void 0}}function Bfe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ufe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Vfe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ufe(Object(n),!0).forEach(function(t){Hfe(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ufe(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Hfe(e,t,n){return(t=Wfe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wfe(e){var t=function(e,t){if("object"!=kfe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=kfe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==kfe(t)?t:t+""}var $fe={xAxis:["bottom","top"],yAxis:["left","right"]},Gfe={width:"100%",height:"100%"},qfe={x:0,y:0};function Xfe(e){return e}var Kfe=function(e,t){var n=t.graphicalItems,r=t.dataStartIndex,s=t.dataEndIndex,i=(null!=n?n:[]).reduce(function(e,t){var n=t.props.data;return n&&n.length?[].concat(Ffe(e),Ffe(n)):e},[]);return i.length>0?i:e&&e.length&&s0(r)&&s0(s)?e.slice(r,s+1):[]};function Yfe(e){return"number"===e?[0,"auto"]:void 0}var Zfe=function(e,t,n,r){var s=e.graphicalItems,i=e.tooltipAxis,a=Kfe(t,e);return n<0||!s||!s.length||n>=a.length?null:s.reduce(function(s,o){var l,c,d=null!==(l=o.props.data)&&void 0!==l?l:t;(d&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=n&&(d=d.slice(e.dataStartIndex,e.dataEndIndex+1)),i.dataKey&&!i.allowDuplicatedCategory)?c=u0(void 0===d?a:d,i.dataKey,r):c=d&&d[n]||a[n];return c?[].concat(Ffe(s),[Gie(o,c)]):s},[])},Jfe=function(e,t,n,r){var s=r||{x:e.chartX,y:e.chartY},i=function(e,t){return"horizontal"===t?e.x:"vertical"===t?e.y:"centric"===t?e.angle:e.radius}(s,n),a=e.orderedTooltipTicks,o=e.tooltipAxis,l=e.tooltipTicks,c=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,i=-1,a=null!==(t=null==n?void 0:n.length)&&void 0!==t?t:0;if(a<=1)return 0;if(s&&"angleAxis"===s.axisType&&Math.abs(Math.abs(s.range[1]-s.range[0])-360)<=1e-6)for(var o=s.range,l=0;l<a;l++){var c=l>0?r[l-1].coordinate:r[a-1].coordinate,d=r[l].coordinate,u=l>=a-1?r[0].coordinate:r[l+1].coordinate,h=void 0;if(n0(d-c)!==n0(u-d)){var p=[];if(n0(u-d)===n0(o[1]-o[0])){h=u;var m=d+o[1]-o[0];p[0]=Math.min(m,(m+c)/2),p[1]=Math.max(m,(m+c)/2)}else{h=c;var f=u+o[1]-o[0];p[0]=Math.min(d,(f+d)/2),p[1]=Math.max(d,(f+d)/2)}var g=[Math.min(d,(h+d)/2),Math.max(d,(h+d)/2)];if(e>g[0]&&e<=g[1]||e>=p[0]&&e<=p[1]){i=r[l].index;break}}else{var x=Math.min(c,u),v=Math.max(c,u);if(e>(x+d)/2&&e<=(v+d)/2){i=r[l].index;break}}}else for(var y=0;y<a;y++)if(0===y&&e<=(n[y].coordinate+n[y+1].coordinate)/2||y>0&&y<a-1&&e>(n[y].coordinate+n[y-1].coordinate)/2&&e<=(n[y].coordinate+n[y+1].coordinate)/2||y===a-1&&e>(n[y].coordinate+n[y-1].coordinate)/2){i=n[y].index;break}return i}(i,a,l,o);if(c>=0&&l){var d=l[c]&&l[c].value,u=Zfe(e,t,c,d),h=function(e,t,n,r){var s=t.find(function(e){return e&&e.index===n});if(s){if("horizontal"===e)return{x:s.coordinate,y:r.y};if("vertical"===e)return{x:r.x,y:s.coordinate};if("centric"===e){var i=s.coordinate,a=r.radius;return Vfe(Vfe(Vfe({},r),tae(r.cx,r.cy,a,i)),{},{angle:i,radius:a})}var o=s.coordinate,l=r.angle;return Vfe(Vfe(Vfe({},r),tae(r.cx,r.cy,o,l)),{},{angle:l,radius:o})}return qfe}(n,a,c,s);return{activeTooltipIndex:c,activeLabel:d,activePayload:u,activeCoordinate:h}}return null},Qfe=function(e,t){var n=t.axes,r=t.graphicalItems,s=t.axisType,i=t.axisIdKey,a=t.stackGroups,o=t.dataStartIndex,l=t.dataEndIndex,c=e.layout,d=e.children,u=e.stackOffset,h=Cie(c,s);return n.reduce(function(t,n){var p,m=void 0!==n.type.defaultProps?Vfe(Vfe({},n.type.defaultProps),n.props):n.props,f=m.type,g=m.dataKey,x=m.allowDataOverflow,v=m.allowDuplicatedCategory,y=m.scale,b=m.ticks,w=m.includeHidden,j=m[i];if(t[j])return t;var N,_,S,M=Kfe(e.data,{graphicalItems:r.filter(function(e){var t;return(i in e.props?e.props[i]:null===(t=e.type.defaultProps)||void 0===t?void 0:t[i])===j}),dataStartIndex:o,dataEndIndex:l}),C=M.length;(function(e,t,n){if("number"===n&&!0===t&&Array.isArray(e)){var r=null==e?void 0:e[0],s=null==e?void 0:e[1];if(r&&s&&s0(r)&&s0(s))return!0}return!1})(m.domain,x,f)&&(N=Hie(m.domain,null,x),!h||"number"!==f&&"auto"===y||(S=Nie(M,g,"category")));var E=Yfe(f);if(!N||0===N.length){var k,A=null!==(k=m.domain)&&void 0!==k?k:E;if(g){if(N=Nie(M,g,f),"category"===f&&h){var T=function(e){if(!Array.isArray(e))return!1;for(var t=e.length,n={},r=0;r<t;r++){if(n[e[r]])return!0;n[e[r]]=!0}return!1}(N);v&&T?(_=N,N=Gde(0,C)):v||(N=$ie(A,N,n).reduce(function(e,t){return e.indexOf(t)>=0?e:[].concat(Ffe(e),[t])},[]))}else if("category"===f)N=v?N.filter(function(e){return""!==e&&!MQ(e)}):$ie(A,N,n).reduce(function(e,t){return e.indexOf(t)>=0||""===t||MQ(t)?e:[].concat(Ffe(e),[t])},[]);else if("number"===f){var P=function(e,t,n,r,s){var i=t.map(function(t){return Sie(e,t,n,s,r)}).filter(function(e){return!MQ(e)});return i&&i.length?i.reduce(function(e,t){return[Math.min(e[0],t[0]),Math.max(e[1],t[1])]},[1/0,-1/0]):null}(M,r.filter(function(e){var t,n,r=i in e.props?e.props[i]:null===(t=e.type.defaultProps)||void 0===t?void 0:t[i],s="hide"in e.props?e.props.hide:null===(n=e.type.defaultProps)||void 0===n?void 0:n.hide;return r===j&&(w||!s)}),g,s,c);P&&(N=P)}!h||"number"!==f&&"auto"===y||(S=Nie(M,g,"category"))}else N=h?Gde(0,C):a&&a[j]&&a[j].hasStack&&"number"===f?"expand"===u?[0,1]:Bie(a[j].stackGroups,o,l):Mie(M,r.filter(function(e){var t=i in e.props?e.props[i]:e.type.defaultProps[i],n="hide"in e.props?e.props.hide:e.type.defaultProps.hide;return t===j&&(w||!n)}),f,c,!0);if("number"===f)N=ufe(d,N,j,s,b),A&&(N=Hie(A,N,x));else if("category"===f&&A){var O=A;N.every(function(e){return O.indexOf(e)>=0})&&(N=O)}}return Vfe(Vfe({},t),{},Hfe({},j,Vfe(Vfe({},m),{},{axisType:s,domain:N,categoricalDomain:S,duplicateDomain:_,originalDomain:null!==(p=m.domain)&&void 0!==p?p:E,isCategorical:h,layout:c})))},{})},ege=function(e,t){var n=t.axisType,r=void 0===n?"xAxis":n,s=t.AxisComp,i=t.graphicalItems,a=t.stackGroups,o=t.dataStartIndex,l=t.dataEndIndex,c=e.children,d="".concat(r,"Id"),u=A0(c,s),h={};return u&&u.length?h=Qfe(e,{axes:u,graphicalItems:i,axisType:r,axisIdKey:d,stackGroups:a,dataStartIndex:o,dataEndIndex:l}):i&&i.length&&(h=function(e,t){var n=t.graphicalItems,r=t.Axis,s=t.axisType,i=t.axisIdKey,a=t.stackGroups,o=t.dataStartIndex,l=t.dataEndIndex,c=e.layout,d=e.children,u=Kfe(e.data,{graphicalItems:n,dataStartIndex:o,dataEndIndex:l}),h=u.length,p=Cie(c,s),m=-1;return n.reduce(function(e,t){var f,g=(void 0!==t.type.defaultProps?Vfe(Vfe({},t.type.defaultProps),t.props):t.props)[i],x=Yfe("number");return e[g]?e:(m++,p?f=Gde(0,h):a&&a[g]&&a[g].hasStack?(f=Bie(a[g].stackGroups,o,l),f=ufe(d,f,g,s)):(f=Hie(x,Mie(u,n.filter(function(e){var t,n,r=i in e.props?e.props[i]:null===(t=e.type.defaultProps)||void 0===t?void 0:t[i],s="hide"in e.props?e.props.hide:null===(n=e.type.defaultProps)||void 0===n?void 0:n.hide;return r===g&&!s}),"number",c),r.defaultProps.allowDataOverflow),f=ufe(d,f,g,s)),Vfe(Vfe({},e),{},Hfe({},g,Vfe(Vfe({axisType:s},r.defaultProps),{},{hide:!0,orientation:SQ($fe,"".concat(s,".").concat(m%2),null),domain:f,originalDomain:x,isCategorical:p,layout:c}))))},{})}(e,{Axis:s,graphicalItems:i,axisType:r,axisIdKey:d,stackGroups:a,dataStartIndex:o,dataEndIndex:l})),h},tge=function(e){var t=e.children,n=e.defaultShowTooltip,r=T0(t,due),s=0,i=0;return e.data&&0!==e.data.length&&(i=e.data.length-1),r&&r.props&&(r.props.startIndex>=0&&(s=r.props.startIndex),r.props.endIndex>=0&&(i=r.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:s,dataEndIndex:i,activeTooltipIndex:-1,isTooltipActive:Boolean(n)}},nge=function(e){return"horizontal"===e?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:"vertical"===e?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:"centric"===e?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},rge=function(e,t){var n=e.props,r=(e.graphicalItems,e.xAxisMap),s=void 0===r?{}:r,i=e.yAxisMap,a=void 0===i?{}:i,o=n.width,l=n.height,c=n.children,d=n.margin||{},u=T0(c,due),h=T0(c,T6),p=Object.keys(a).reduce(function(e,t){var n=a[t],r=n.orientation;return n.mirror||n.hide?e:Vfe(Vfe({},e),{},Hfe({},r,e[r]+n.width))},{left:d.left||0,right:d.right||0}),m=Object.keys(s).reduce(function(e,t){var n=s[t],r=n.orientation;return n.mirror||n.hide?e:Vfe(Vfe({},e),{},Hfe({},r,SQ(e,"".concat(r))+n.height))},{top:d.top||0,bottom:d.bottom||0}),f=Vfe(Vfe({},m),p),g=f.bottom;u&&(f.bottom+=u.props.height||due.defaultProps.height),h&&t&&(f=function(e,t,n,r){var s=n.children,i=n.width,a=n.margin,o=i-(a.left||0)-(a.right||0),l=fie({children:s,legendWidth:o});if(l){var c=r||{},d=c.width,u=c.height,h=l.align,p=l.verticalAlign,m=l.layout;if(("vertical"===m||"horizontal"===m&&"middle"===p)&&"center"!==h&&s0(e[h]))return bie(bie({},e),{},wie({},h,e[h]+(d||0)));if(("horizontal"===m||"vertical"===m&&"center"===h)&&"middle"!==p&&s0(e[p]))return bie(bie({},e),{},wie({},p,e[p]+(u||0)))}return e}(f,0,n,t));var x=o-f.left-f.right,v=l-f.top-f.bottom;return Vfe(Vfe({brushBottom:g},f),{},{width:Math.max(x,0),height:Math.max(v,0)})},sge=function(e,t){return"xAxis"===t?e[t].width:"yAxis"===t?e[t].height:void 0},ige=function(e){var t=e.chartName,n=e.GraphicalChild,r=e.defaultTooltipEventType,s=void 0===r?"axis":r,i=e.validateTooltipEventTypes,a=void 0===i?["axis"]:i,o=e.axisComponents,l=e.legendContent,c=e.formatAxisMap,d=e.defaultProps,u=function(e,t){var n=t.graphicalItems,r=t.stackGroups,s=t.offset,i=t.updateId,a=t.dataStartIndex,l=t.dataEndIndex,c=e.barSize,d=e.layout,u=e.barGap,h=e.barCategoryGap,p=e.maxBarSize,m=nge(d),f=m.numericAxisName,g=m.cateAxisName,x=function(e){return!(!e||!e.length)&&e.some(function(e){var t=M0(e&&e.type);return t&&t.indexOf("Bar")>=0})}(n),v=[];return n.forEach(function(n,m){var y=Kfe(e.data,{graphicalItems:[n],dataStartIndex:a,dataEndIndex:l}),b=void 0!==n.type.defaultProps?Vfe(Vfe({},n.type.defaultProps),n.props):n.props,w=b.dataKey,j=b.maxBarSize,N=b["".concat(f,"Id")],_=b["".concat(g,"Id")],S=o.reduce(function(e,n){var r=t["".concat(n.axisType,"Map")],s=b["".concat(n.axisType,"Id")];r&&r[s]||"zAxis"===n.axisType||Yse();var i=r[s];return Vfe(Vfe({},e),{},Hfe(Hfe({},n.axisType,i),"".concat(n.axisType,"Ticks"),kie(i)))},{}),M=S[g],C=S["".concat(g,"Ticks")],E=r&&r[N]&&r[N].hasStack&&function(e,t){var n,r=(null!==(n=e.type)&&void 0!==n&&n.defaultProps?bie(bie({},e.type.defaultProps),e.props):e.props).stackId;if(i0(r)){var s=t[r];if(s){var i=s.items.indexOf(e);return i>=0?s.stackedData[i]:null}}return null}(n,r[N].stackGroups),k=M0(n.type).indexOf("Bar")>=0,A=Wie(M,C),T=[],P=x&&function(e){var t=e.barSize,n=e.totalSize,r=e.stackGroups,s=void 0===r?{}:r;if(!s)return{};for(var i={},a=Object.keys(s),o=0,l=a.length;o<l;o++)for(var c=s[a[o]].stackGroups,d=Object.keys(c),u=0,h=d.length;u<h;u++){var p=c[d[u]],m=p.items,f=p.cateAxisId,g=m.filter(function(e){return M0(e.type).indexOf("Bar")>=0});if(g&&g.length){var x=g[0].type.defaultProps,v=void 0!==x?bie(bie({},x),g[0].props):g[0].props,y=v.barSize,b=v[f];i[b]||(i[b]=[]);var w=MQ(y)?t:y;i[b].push({item:g[0],stackList:g.slice(1),barSize:MQ(w)?void 0:l0(w,n,0)})}}return i}({barSize:c,stackGroups:r,totalSize:sge(S,g)});if(k){var O,R,I=MQ(j)?p:j,D=null!==(O=null!==(R=Wie(M,C,!0))&&void 0!==R?R:I)&&void 0!==O?O:0;T=function(e){var t=e.barGap,n=e.barCategoryGap,r=e.bandSize,s=e.sizeList,i=void 0===s?[]:s,a=e.maxBarSize,o=i.length;if(o<1)return null;var l,c=l0(t,r,0,!0),d=[];if(i[0].barSize===+i[0].barSize){var u=!1,h=r/o,p=i.reduce(function(e,t){return e+t.barSize||0},0);(p+=(o-1)*c)>=r&&(p-=(o-1)*c,c=0),p>=r&&h>0&&(u=!0,p=o*(h*=.9));var m={offset:((r-p)/2|0)-c,size:0};l=i.reduce(function(e,t){var n={item:t.item,position:{offset:m.offset+m.size+c,size:u?h:t.barSize}},r=[].concat(xie(e),[n]);return m=r[r.length-1].position,t.stackList&&t.stackList.length&&t.stackList.forEach(function(e){r.push({item:e,position:m})}),r},d)}else{var f=l0(n,r,0,!0);r-2*f-(o-1)*c<=0&&(c=0);var g=(r-2*f-(o-1)*c)/o;g>1&&(g>>=0);var x=a===+a?Math.min(g,a):g;l=i.reduce(function(e,t,n){var r=[].concat(xie(e),[{item:t.item,position:{offset:f+(g+c)*n+(g-x)/2,size:x}}]);return t.stackList&&t.stackList.length&&t.stackList.forEach(function(e){r.push({item:e,position:r[r.length-1].position})}),r},d)}return l}({barGap:u,barCategoryGap:h,bandSize:D!==A?D:A,sizeList:P[_],maxBarSize:I}),D!==A&&(T=T.map(function(e){return Vfe(Vfe({},e),{},{position:Vfe(Vfe({},e.position),{},{offset:e.position.offset-D/2})})}))}var L,F,z=n&&n.type&&n.type.getComposedData;z&&v.push({props:Vfe(Vfe({},z(Vfe(Vfe({},S),{},{displayedData:y,props:e,dataKey:w,item:n,bandSize:A,barPosition:T,offset:s,stackedData:E,layout:d,dataStartIndex:a,dataEndIndex:l}))),{},Hfe(Hfe(Hfe({key:n.key||"item-".concat(m)},f,S[f]),g,S[g]),"animationId",i)),childIndex:(L=n,F=e.children,k0(F).indexOf(L)),item:n})}),v},h=function(e,r){var s=e.props,i=e.dataStartIndex,a=e.dataEndIndex,l=e.updateId;if(!P0({props:s}))return null;var d=s.children,h=s.layout,p=s.stackOffset,m=s.data,f=s.reverseStackOrder,g=nge(h),x=g.numericAxisName,v=g.cateAxisName,y=A0(d,n),b=function(e,t,n,r,s,i){if(!e)return null;var a=(i?t.reverse():t).reduce(function(e,t){var s,i=null!==(s=t.type)&&void 0!==s&&s.defaultProps?bie(bie({},t.type.defaultProps),t.props):t.props,a=i.stackId;if(i.hide)return e;var o=i[n],l=e[o]||{hasStack:!1,stackGroups:{}};if(i0(a)){var c=l.stackGroups[a]||{numericAxisId:n,cateAxisId:r,items:[]};c.items.push(t),l.hasStack=!0,l.stackGroups[a]=c}else l.stackGroups[o0("_stackId_")]={numericAxisId:n,cateAxisId:r,items:[t]};return bie(bie({},e),{},wie({},o,l))},{});return Object.keys(a).reduce(function(t,i){var o=a[i];return o.hasStack&&(o.stackGroups=Object.keys(o.stackGroups).reduce(function(t,i){var a=o.stackGroups[i];return bie(bie({},t),{},wie({},i,{numericAxisId:n,cateAxisId:r,items:a.items,stackedData:Die(e,a.items,s)}))},{})),bie(bie({},t),{},wie({},i,o))},{})}(m,y,"".concat(x,"Id"),"".concat(v,"Id"),p,f),w=o.reduce(function(e,t){var n="".concat(t.axisType,"Map");return Vfe(Vfe({},e),{},Hfe({},n,ege(s,Vfe(Vfe({},t),{},{graphicalItems:y,stackGroups:t.axisType===x&&b,dataStartIndex:i,dataEndIndex:a}))))},{}),j=rge(Vfe(Vfe({},w),{},{props:s,graphicalItems:y}),null==r?void 0:r.legendBBox);Object.keys(w).forEach(function(e){w[e]=c(s,w[e],j,e.replace("Map",""),t)});var N,_,S=w["".concat(v,"Map")],M=(N=c0(S),{tooltipTicks:_=kie(N,!1,!0),orderedTooltipTicks:M8(_,function(e){return e.coordinate}),tooltipAxis:N,tooltipAxisBandSize:Wie(N,_)}),C=u(s,Vfe(Vfe({},w),{},{dataStartIndex:i,dataEndIndex:a,updateId:l,graphicalItems:y,stackGroups:b,offset:j}));return Vfe(Vfe({formattedGraphicalItems:C,graphicalItems:y,offset:j,stackGroups:b},M),w)},p=function(){function e(n){var r,s,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Hfe(i=Rfe(this,e,[n]),"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Hfe(i,"accessibilityManager",new yfe),Hfe(i,"handleLegendBBoxUpdate",function(e){if(e){var t=i.state,n=t.dataStartIndex,r=t.dataEndIndex,s=t.updateId;i.setState(Vfe({legendBBox:e},h({props:i.props,dataStartIndex:n,dataEndIndex:r,updateId:s},Vfe(Vfe({},i.state),{},{legendBBox:e}))))}}),Hfe(i,"handleReceiveSyncEvent",function(e,t,n){if(i.props.syncId===e){if(n===i.eventEmitterSymbol&&"function"!=typeof i.props.syncMethod)return;i.applySyncEvent(t)}}),Hfe(i,"handleBrushChange",function(e){var t=e.startIndex,n=e.endIndex;if(t!==i.state.dataStartIndex||n!==i.state.dataEndIndex){var r=i.state.updateId;i.setState(function(){return Vfe({dataStartIndex:t,dataEndIndex:n},h({props:i.props,dataStartIndex:t,dataEndIndex:n,updateId:r},i.state))}),i.triggerSyncEvent({dataStartIndex:t,dataEndIndex:n})}}),Hfe(i,"handleMouseEnter",function(e){var t=i.getMouseInfo(e);if(t){var n=Vfe(Vfe({},t),{},{isTooltipActive:!0});i.setState(n),i.triggerSyncEvent(n);var r=i.props.onMouseEnter;RZ(r)&&r(n,e)}}),Hfe(i,"triggeredAfterMouseMove",function(e){var t=i.getMouseInfo(e),n=t?Vfe(Vfe({},t),{},{isTooltipActive:!0}):{isTooltipActive:!1};i.setState(n),i.triggerSyncEvent(n);var r=i.props.onMouseMove;RZ(r)&&r(n,e)}),Hfe(i,"handleItemMouseEnter",function(e){i.setState(function(){return{isTooltipActive:!0,activeItem:e,activePayload:e.tooltipPayload,activeCoordinate:e.tooltipPosition||{x:e.cx,y:e.cy}}})}),Hfe(i,"handleItemMouseLeave",function(){i.setState(function(){return{isTooltipActive:!1}})}),Hfe(i,"handleMouseMove",function(e){e.persist(),i.throttleTriggeredAfterMouseMove(e)}),Hfe(i,"handleMouseLeave",function(e){i.throttleTriggeredAfterMouseMove.cancel();var t={isTooltipActive:!1};i.setState(t),i.triggerSyncEvent(t);var n=i.props.onMouseLeave;RZ(n)&&n(t,e)}),Hfe(i,"handleOuterEvent",function(e){var t,n=function(e){var t=e&&e.type;return t&&S0[t]?S0[t]:null}(e),r=SQ(i.props,"".concat(n));n&&RZ(r)&&r(null!==(t=/.*touch.*/i.test(n)?i.getMouseInfo(e.changedTouches[0]):i.getMouseInfo(e))&&void 0!==t?t:{},e)}),Hfe(i,"handleClick",function(e){var t=i.getMouseInfo(e);if(t){var n=Vfe(Vfe({},t),{},{isTooltipActive:!0});i.setState(n),i.triggerSyncEvent(n);var r=i.props.onClick;RZ(r)&&r(n,e)}}),Hfe(i,"handleMouseDown",function(e){var t=i.props.onMouseDown;RZ(t)&&t(i.getMouseInfo(e),e)}),Hfe(i,"handleMouseUp",function(e){var t=i.props.onMouseUp;RZ(t)&&t(i.getMouseInfo(e),e)}),Hfe(i,"handleTouchMove",function(e){null!=e.changedTouches&&e.changedTouches.length>0&&i.throttleTriggeredAfterMouseMove(e.changedTouches[0])}),Hfe(i,"handleTouchStart",function(e){null!=e.changedTouches&&e.changedTouches.length>0&&i.handleMouseDown(e.changedTouches[0])}),Hfe(i,"handleTouchEnd",function(e){null!=e.changedTouches&&e.changedTouches.length>0&&i.handleMouseUp(e.changedTouches[0])}),Hfe(i,"handleDoubleClick",function(e){var t=i.props.onDoubleClick;RZ(t)&&t(i.getMouseInfo(e),e)}),Hfe(i,"handleContextMenu",function(e){var t=i.props.onContextMenu;RZ(t)&&t(i.getMouseInfo(e),e)}),Hfe(i,"triggerSyncEvent",function(e){void 0!==i.props.syncId&&pfe.emit(mfe,i.props.syncId,e,i.eventEmitterSymbol)}),Hfe(i,"applySyncEvent",function(e){var t=i.props,n=t.layout,r=t.syncMethod,s=i.state.updateId,a=e.dataStartIndex,o=e.dataEndIndex;if(void 0!==e.dataStartIndex||void 0!==e.dataEndIndex)i.setState(Vfe({dataStartIndex:a,dataEndIndex:o},h({props:i.props,dataStartIndex:a,dataEndIndex:o,updateId:s},i.state)));else if(void 0!==e.activeTooltipIndex){var l=e.chartX,c=e.chartY,d=e.activeTooltipIndex,u=i.state,p=u.offset,m=u.tooltipTicks;if(!p)return;if("function"==typeof r)d=r(m,e);else if("value"===r){d=-1;for(var f=0;f<m.length;f++)if(m[f].value===e.activeLabel){d=f;break}}var g=Vfe(Vfe({},p),{},{x:p.left,y:p.top}),x=Math.min(l,g.x+g.width),v=Math.min(c,g.y+g.height),y=m[d]&&m[d].value,b=Zfe(i.state,i.props.data,d),w=m[d]?{x:"horizontal"===n?m[d].coordinate:x,y:"horizontal"===n?v:m[d].coordinate}:qfe;i.setState(Vfe(Vfe({},e),{},{activeLabel:y,activeCoordinate:w,activePayload:b,activeTooltipIndex:d}))}else i.setState(e)}),Hfe(i,"renderCursor",function(e){var n,r=i.state,s=r.isTooltipActive,a=r.activeCoordinate,o=r.activePayload,l=r.offset,c=r.activeTooltipIndex,d=r.tooltipAxisBandSize,u=i.getTooltipEventType(),h=null!==(n=e.props.active)&&void 0!==n?n:s,p=i.props.layout,m=e.key||"_recharts-cursor";return fn.createElement(Mfe,{key:m,activeCoordinate:a,activePayload:o,activeTooltipIndex:c,chartName:t,element:e,isActive:h,layout:p,offset:l,tooltipAxisBandSize:d,tooltipEventType:u})}),Hfe(i,"renderPolarAxis",function(e,t,n){var r=SQ(e,"type.axisType"),s=SQ(i.state,"".concat(r,"Map")),a=e.type.defaultProps,o=void 0!==a?Vfe(Vfe({},a),e.props):e.props,l=s&&s[o["".concat(r,"Id")]];return hn.cloneElement(e,Vfe(Vfe({},l),{},{className:Bo(r,l.className),key:e.key||"".concat(t,"-").concat(n),ticks:kie(l,!0)}))}),Hfe(i,"renderPolarGrid",function(e){var t=e.props,n=t.radialLines,r=t.polarAngles,s=t.polarRadius,a=i.state,o=a.radiusAxisMap,l=a.angleAxisMap,c=c0(o),d=c0(l),u=d.cx,h=d.cy,p=d.innerRadius,m=d.outerRadius;return hn.cloneElement(e,{polarAngles:Array.isArray(r)?r:kie(d,!0).map(function(e){return e.coordinate}),polarRadius:Array.isArray(s)?s:kie(c,!0).map(function(e){return e.coordinate}),cx:u,cy:h,innerRadius:p,outerRadius:m,key:e.key||"polar-grid",radialLines:n})}),Hfe(i,"renderLegend",function(){var e=i.state.formattedGraphicalItems,t=i.props,n=t.children,r=t.width,s=t.height,a=i.props.margin||{},o=r-(a.left||0)-(a.right||0),c=fie({children:n,formattedGraphicalItems:e,legendWidth:o,legendContent:l});if(!c)return null;var d=c.item,u=Pfe(c,Cfe);return hn.cloneElement(d,Vfe(Vfe({},u),{},{chartWidth:r,chartHeight:s,margin:a,onBBoxUpdate:i.handleLegendBBoxUpdate}))}),Hfe(i,"renderTooltip",function(){var e,t=i.props,n=t.children,r=t.accessibilityLayer,s=T0(n,u9);if(!s)return null;var a=i.state,o=a.isTooltipActive,l=a.activeCoordinate,c=a.activePayload,d=a.activeLabel,u=a.offset,h=null!==(e=s.props.active)&&void 0!==e?e:o;return hn.cloneElement(s,{viewBox:Vfe(Vfe({},u),{},{x:u.left,y:u.top}),active:h,label:d,payload:h?c:[],coordinate:l,accessibilityLayer:r})}),Hfe(i,"renderBrush",function(e){var t=i.props,n=t.margin,r=t.data,s=i.state,a=s.offset,o=s.dataStartIndex,l=s.dataEndIndex,c=s.updateId;return hn.cloneElement(e,{key:e.key||"_recharts-brush",onChange:Tie(i.handleBrushChange,e.props.onChange),data:r,x:s0(e.props.x)?e.props.x:a.left,y:s0(e.props.y)?e.props.y:a.top+a.height+a.brushBottom-(n.bottom||0),width:s0(e.props.width)?e.props.width:a.width,startIndex:o,endIndex:l,updateId:"brush-".concat(c)})}),Hfe(i,"renderReferenceElement",function(e,t,n){if(!e)return null;var r=i.clipPathId,s=i.state,a=s.xAxisMap,o=s.yAxisMap,l=s.offset,c=e.type.defaultProps||{},d=e.props,u=d.xAxisId,h=void 0===u?c.xAxisId:u,p=d.yAxisId,m=void 0===p?c.yAxisId:p;return hn.cloneElement(e,{key:e.key||"".concat(t,"-").concat(n),xAxis:a[h],yAxis:o[m],viewBox:{x:l.left,y:l.top,width:l.width,height:l.height},clipPathId:r})}),Hfe(i,"renderActivePoints",function(t){var n=t.item,r=t.activePoint,s=t.basePoint,i=t.childIndex,a=t.isRange,o=[],l=n.props.key,c=void 0!==n.item.type.defaultProps?Vfe(Vfe({},n.item.type.defaultProps),n.item.props):n.item.props,d=c.activeDot,u=Vfe(Vfe({index:i,dataKey:c.dataKey,cx:r.x,cy:r.y,r:4,fill:_ie(n.item),strokeWidth:2,stroke:"#fff",payload:r.payload,value:r.value},I0(d,!1)),y0(d));return o.push(e.renderActiveDot(d,u,"".concat(l,"-activePoint-").concat(i))),s?o.push(e.renderActiveDot(d,Vfe(Vfe({},u),{},{cx:s.x,cy:s.y}),"".concat(l,"-basePoint-").concat(i))):a&&o.push(null),o}),Hfe(i,"renderGraphicChild",function(e,t,n){var r=i.filterFormatItem(e,t,n);if(!r)return null;var s=i.getTooltipEventType(),a=i.state,o=a.isTooltipActive,l=a.tooltipAxis,c=a.activeTooltipIndex,d=a.activeLabel,u=T0(i.props.children,u9),h=r.props,p=h.points,m=h.isRange,f=h.baseLine,g=void 0!==r.item.type.defaultProps?Vfe(Vfe({},r.item.type.defaultProps),r.item.props):r.item.props,x=g.activeDot,v=g.hide,y=g.activeBar,b=g.activeShape,w=Boolean(!v&&o&&u&&(x||y||b)),j={};"axis"!==s&&u&&"click"===u.props.trigger?j={onClick:Tie(i.handleItemMouseEnter,e.props.onClick)}:"axis"!==s&&(j={onMouseLeave:Tie(i.handleItemMouseLeave,e.props.onMouseLeave),onMouseEnter:Tie(i.handleItemMouseEnter,e.props.onMouseEnter)});var N=hn.cloneElement(e,Vfe(Vfe({},r.props),j));if(w){if(!(c>=0)){var _,S=(null!==(_=i.getItemByXY(i.state.activeCoordinate))&&void 0!==_?_:{graphicalItem:N}).graphicalItem,M=S.item,C=void 0===M?e:M,E=S.childIndex,k=Vfe(Vfe(Vfe({},r.props),j),{},{activeIndex:E});return[hn.cloneElement(C,k),null,null]}var A,T;if(l.dataKey&&!l.allowDuplicatedCategory){var P="function"==typeof l.dataKey?function(e){return"function"==typeof l.dataKey?l.dataKey(e.payload):null}:"payload.".concat(l.dataKey.toString());A=u0(p,P,d),T=m&&f&&u0(f,P,d)}else A=null==p?void 0:p[c],T=m&&f&&f[c];if(b||y){var O=void 0!==e.props.activeIndex?e.props.activeIndex:c;return[hn.cloneElement(e,Vfe(Vfe(Vfe({},r.props),j),{},{activeIndex:O})),null,null]}if(!MQ(A))return[N].concat(Ffe(i.renderActivePoints({item:r,activePoint:A,basePoint:T,childIndex:c,isRange:m})))}return m?[N,null,null]:[N,null]}),Hfe(i,"renderCustomized",function(e,t,n){return hn.cloneElement(e,Vfe(Vfe({key:"recharts-customized-".concat(n)},i.props),i.state))}),Hfe(i,"renderMap",{CartesianGrid:{handler:Xfe,once:!0},ReferenceArea:{handler:i.renderReferenceElement},ReferenceLine:{handler:Xfe},ReferenceDot:{handler:i.renderReferenceElement},XAxis:{handler:Xfe},YAxis:{handler:Xfe},Brush:{handler:i.renderBrush,once:!0},Bar:{handler:i.renderGraphicChild},Line:{handler:i.renderGraphicChild},Area:{handler:i.renderGraphicChild},Radar:{handler:i.renderGraphicChild},RadialBar:{handler:i.renderGraphicChild},Scatter:{handler:i.renderGraphicChild},Pie:{handler:i.renderGraphicChild},Funnel:{handler:i.renderGraphicChild},Tooltip:{handler:i.renderCursor,once:!0},PolarGrid:{handler:i.renderPolarGrid,once:!0},PolarAngleAxis:{handler:i.renderPolarAxis},PolarRadiusAxis:{handler:i.renderPolarAxis},Customized:{handler:i.renderCustomized}}),i.clipPathId="".concat(null!==(r=n.id)&&void 0!==r?r:o0("recharts"),"-clip"),i.throttleTriggeredAfterMouseMove=aA(i.triggeredAfterMouseMove,null!==(s=n.throttleDelay)&&void 0!==s?s:1e3/60),i.state={},i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Lfe(e,t)}(e,hn.Component),Ofe(e,[{key:"componentDidMount",value:function(){var e,t;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:null!==(e=this.props.margin.left)&&void 0!==e?e:0,top:null!==(t=this.props.margin.top)&&void 0!==t?t:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var e=this.props,t=e.children,n=e.data,r=e.height,s=e.layout,i=T0(t,u9);if(i){var a=i.props.defaultIndex;if(!("number"!=typeof a||a<0||a>this.state.tooltipTicks.length-1)){var o=this.state.tooltipTicks[a]&&this.state.tooltipTicks[a].value,l=Zfe(this.state,n,a,o),c=this.state.tooltipTicks[a].coordinate,d=(this.state.offset.top+r)/2,u="horizontal"===s?{x:c,y:d}:{y:c,x:d},h=this.state.formattedGraphicalItems.find(function(e){return"Scatter"===e.item.type.name});h&&(u=Vfe(Vfe({},u),h.props.points[a].tooltipPosition),l=h.props.points[a].tooltipPayload);var p={activeTooltipIndex:a,isTooltipActive:!0,activeLabel:o,activePayload:l,activeCoordinate:u};this.setState(p),this.renderCursor(i),this.accessibilityManager.setIndex(a)}}}},{key:"getSnapshotBeforeUpdate",value:function(e,t){if(!this.props.accessibilityLayer)return null;var n,r;(this.state.tooltipTicks!==t.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==e.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==e.margin)&&this.accessibilityManager.setDetails({offset:{left:null!==(n=this.props.margin.left)&&void 0!==n?n:0,top:null!==(r=this.props.margin.top)&&void 0!==r?r:0}});return null}},{key:"componentDidUpdate",value:function(e){D0([T0(e.children,u9)],[T0(this.props.children,u9)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var e=T0(this.props.children,u9);if(e&&"boolean"==typeof e.props.shared){var t=e.props.shared?"axis":"item";return a.indexOf(t)>=0?t:s}return s}},{key:"getMouseInfo",value:function(e){if(!this.container)return null;var t,n=this.container,r=n.getBoundingClientRect(),s={top:(t=r).top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft},i={chartX:Math.round(e.pageX-s.left),chartY:Math.round(e.pageY-s.top)},a=r.width/n.offsetWidth||1,o=this.inRange(i.chartX,i.chartY,a);if(!o)return null;var l=this.state,c=l.xAxisMap,d=l.yAxisMap,u=this.getTooltipEventType(),h=Jfe(this.state,this.props.data,this.props.layout,o);if("axis"!==u&&c&&d){var p=c0(c).scale,m=c0(d).scale,f=p&&p.invert?p.invert(i.chartX):null,g=m&&m.invert?m.invert(i.chartY):null;return Vfe(Vfe({},i),{},{xValue:f,yValue:g},h)}return h?Vfe(Vfe({},i),h):null}},{key:"inRange",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=this.props.layout,s=e/n,i=t/n;if("horizontal"===r||"vertical"===r){var a=this.state.offset;return s>=a.left&&s<=a.left+a.width&&i>=a.top&&i<=a.top+a.height?{x:s,y:i}:null}var o=this.state,l=o.angleAxisMap,c=o.radiusAxisMap;if(l&&c){var d=c0(l);return iae({x:s,y:i},d)}return null}},{key:"parseEventsOfWrapper",value:function(){var e=this.props.children,t=this.getTooltipEventType(),n=T0(e,u9),r={};return n&&"axis"===t&&(r="click"===n.props.trigger?{onClick:this.handleClick}:{onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu}),Vfe(Vfe({},y0(this.props,this.handleOuterEvent)),r)}},{key:"addListener",value:function(){pfe.on(mfe,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){pfe.removeListener(mfe,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(e,t,n){for(var r=this.state.formattedGraphicalItems,s=0,i=r.length;s<i;s++){var a=r[s];if(a.item===e||a.props.key===e.key||t===M0(a.item.type)&&n===a.childIndex)return a}return null}},{key:"renderClipPath",value:function(){var e=this.clipPathId,t=this.state.offset,n=t.left,r=t.top,s=t.height,i=t.width;return fn.createElement("defs",null,fn.createElement("clipPath",{id:e},fn.createElement("rect",{x:n,y:r,height:s,width:i})))}},{key:"getXScales",value:function(){var e=this.state.xAxisMap;return e?Object.entries(e).reduce(function(e,t){var n=Tfe(t,2),r=n[0],s=n[1];return Vfe(Vfe({},e),{},Hfe({},r,s.scale))},{}):null}},{key:"getYScales",value:function(){var e=this.state.yAxisMap;return e?Object.entries(e).reduce(function(e,t){var n=Tfe(t,2),r=n[0],s=n[1];return Vfe(Vfe({},e),{},Hfe({},r,s.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(e){var t;return null===(t=this.state.xAxisMap)||void 0===t||null===(t=t[e])||void 0===t?void 0:t.scale}},{key:"getYScaleByAxisId",value:function(e){var t;return null===(t=this.state.yAxisMap)||void 0===t||null===(t=t[e])||void 0===t?void 0:t.scale}},{key:"getItemByXY",value:function(e){var t=this.state,n=t.formattedGraphicalItems,r=t.activeItem;if(n&&n.length)for(var s=0,i=n.length;s<i;s++){var a=n[s],o=a.props,l=a.item,c=void 0!==l.type.defaultProps?Vfe(Vfe({},l.type.defaultProps),l.props):l.props,d=M0(l.type);if("Bar"===d){var u=(o.data||[]).find(function(t){return Dle(e,t)});if(u)return{graphicalItem:a,payload:u}}else if("RadialBar"===d){var h=(o.data||[]).find(function(t){return iae(e,t)});if(h)return{graphicalItem:a,payload:h}}else if(yde(a,r)||bde(a,r)||wde(a,r)){var p=Sde({graphicalItem:a,activeTooltipItem:r,itemData:c.data}),m=void 0===c.activeIndex?p:c.activeIndex;return{graphicalItem:Vfe(Vfe({},a),{},{childIndex:m}),payload:wde(a,r)?c.data[p]:a.props.data[p]}}}return null}},{key:"render",value:function(){var e=this;if(!P0(this))return null;var t,n,r=this.props,s=r.children,i=r.className,a=r.width,o=r.height,l=r.style,c=r.compact,d=r.title,u=r.desc,h=Pfe(r,Efe),p=I0(h,!1);if(c)return fn.createElement(Ahe,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},fn.createElement(V0,Afe({},p,{width:a,height:o,title:d,desc:u}),this.renderClipPath(),F0(s,this.renderMap)));this.props.accessibilityLayer&&(p.tabIndex=null!==(t=this.props.tabIndex)&&void 0!==t?t:0,p.role=null!==(n=this.props.role)&&void 0!==n?n:"application",p.onKeyDown=function(t){e.accessibilityManager.keyboardEvent(t)},p.onFocus=function(){e.accessibilityManager.focus()});var m=this.parseEventsOfWrapper();return fn.createElement(Ahe,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},fn.createElement("div",Afe({className:Bo("recharts-wrapper",i),style:Vfe({position:"relative",cursor:"default",width:a,height:o},l)},m,{ref:function(t){e.container=t}}),fn.createElement(V0,Afe({},p,{width:a,height:o,title:d,desc:u,style:Gfe}),this.renderClipPath(),F0(s,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}();Hfe(p,"displayName",t),Hfe(p,"defaultProps",Vfe({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},d)),Hfe(p,"getDerivedStateFromProps",function(e,t){var n=e.dataKey,r=e.data,s=e.children,i=e.width,a=e.height,o=e.layout,l=e.stackOffset,c=e.margin,d=t.dataStartIndex,u=t.dataEndIndex;if(void 0===t.updateId){var p=tge(e);return Vfe(Vfe(Vfe({},p),{},{updateId:0},h(Vfe(Vfe({props:e},p),{},{updateId:0}),t)),{},{prevDataKey:n,prevData:r,prevWidth:i,prevHeight:a,prevLayout:o,prevStackOffset:l,prevMargin:c,prevChildren:s})}if(n!==t.prevDataKey||r!==t.prevData||i!==t.prevWidth||a!==t.prevHeight||o!==t.prevLayout||l!==t.prevStackOffset||!p0(c,t.prevMargin)){var m=tge(e),f={chartX:t.chartX,chartY:t.chartY,isTooltipActive:t.isTooltipActive},g=Vfe(Vfe({},Jfe(t,r,o)),{},{updateId:t.updateId+1}),x=Vfe(Vfe(Vfe({},m),f),g);return Vfe(Vfe(Vfe({},x),h(Vfe({props:e},x),t)),{},{prevDataKey:n,prevData:r,prevWidth:i,prevHeight:a,prevLayout:o,prevStackOffset:l,prevMargin:c,prevChildren:s})}if(!D0(s,t.prevChildren)){var v,y,b,w,j=T0(s,due),N=j&&null!==(v=null===(y=j.props)||void 0===y?void 0:y.startIndex)&&void 0!==v?v:d,_=j&&null!==(b=null===(w=j.props)||void 0===w?void 0:w.endIndex)&&void 0!==b?b:u,S=N!==d||_!==u,M=!MQ(r)&&!S?t.updateId:t.updateId+1;return Vfe(Vfe({updateId:M},h(Vfe(Vfe({props:e},t),{},{updateId:M,dataStartIndex:N,dataEndIndex:_}),t)),{},{prevChildren:s,dataStartIndex:N,dataEndIndex:_})}return null}),Hfe(p,"renderActiveDot",function(e,t,n){var r;return r=hn.isValidElement(e)?hn.cloneElement(e,t):RZ(e)?e(t):fn.createElement(Xle,t),fn.createElement(G0,{className:"recharts-active-dot",key:n},r)});var m=hn.forwardRef(function(e,t){return fn.createElement(p,Afe({},e,{ref:t}))});return m.displayName=p.displayName,m},age=ige({chartName:"LineChart",GraphicalChild:_me,axisComponents:[{axisType:"xAxis",AxisComp:Zme},{axisType:"yAxis",AxisComp:lfe}],formatAxisMap:lhe}),oge=ige({chartName:"BarChart",GraphicalChild:the,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Zme},{axisType:"yAxis",AxisComp:lfe}],formatAxisMap:lhe}),lge=ige({chartName:"PieChart",GraphicalChild:Lde,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:zce},{axisType:"radiusAxis",AxisComp:Sce}],formatAxisMap:function(e,t,n,r,s){var i=e.width,a=e.height,o=e.startAngle,l=e.endAngle,c=l0(e.cx,i,i/2),d=l0(e.cy,a,a/2),u=nae(i,a,n),h=l0(e.innerRadius,u,0),p=l0(e.outerRadius,u,.8*u);return Object.keys(t).reduce(function(e,n){var i,a=t[n],u=a.domain,m=a.reversed;if(MQ(a.range))"angleAxis"===r?i=[o,l]:"radiusAxis"===r&&(i=[h,p]),m&&(i=[i[1],i[0]]);else{var f=Zie(i=a.range,2);o=f[0],l=f[1]}var g=Pie(a,s),x=g.realScaleType,v=g.scale;v.domain(u).range(i),Rie(v);var y=Lie(v,Kie(Kie({},a),{},{realScaleType:x})),b=Kie(Kie(Kie({},a),y),{},{range:i,radius:p,realScaleType:x,scale:v,cx:c,cy:d,innerRadius:h,outerRadius:p,startAngle:o,endAngle:l});return Kie(Kie({},e),{},Yie({},n,b))},{})},defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),cge=ige({chartName:"AreaChart",GraphicalChild:Bme,axisComponents:[{axisType:"xAxis",AxisComp:Zme},{axisType:"yAxis",AxisComp:lfe}],formatAxisMap:lhe});function dge({title:e,value:t,change:n,changeLabel:r="vs last period",icon:s,trend:i="neutral",colorClass:a="text-blue-600"}){const o="up"===i?"text-green-600":"down"===i?"text-red-600":"text-gray-600",l="up"===i?Ti:"down"===i?Pi:Oi;return Ot.jsx(wo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ot.jsx(zr,{className:"text-sm font-medium",children:e}),Ot.jsx(s,{className:`h-4 w-4 ${a}`})]}),Ot.jsxs(Mn,{children:[Ot.jsx("div",{className:"text-2xl font-bold",children:t}),void 0!==n&&Ot.jsxs("div",{className:"flex items-center text-xs text-muted-foreground mt-1",children:[Ot.jsx(l,{className:`h-3 w-3 mr-1 ${o}`}),Ot.jsxs("span",{className:o,children:[n>0?"+":"",n,"%"]}),Ot.jsx("span",{className:"ml-1",children:r})]})]})]})})}function uge({data:e}){const t=e.map(e=>({...e,date:new Date(e.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})}));return Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{children:[Ot.jsx(zr,{children:"Revenue Trend"}),Ot.jsx(Ur,{children:"Daily revenue over time"})]}),Ot.jsx(Mn,{children:Ot.jsx(v9,{width:"100%",height:300,children:Ot.jsxs(cge,{data:t,children:[Ot.jsx("defs",{children:Ot.jsxs("linearGradient",{id:"colorRevenue",x1:"0",y1:"0",x2:"0",y2:"1",children:[Ot.jsx("stop",{offset:"5%",stopColor:"#3b82f6",stopOpacity:.8}),Ot.jsx("stop",{offset:"95%",stopColor:"#3b82f6",stopOpacity:0})]})}),Ot.jsx(ome,{strokeDasharray:"3 3"}),Ot.jsx(Zme,{dataKey:"date"}),Ot.jsx(lfe,{}),Ot.jsx(u9,{formatter:e=>[`$${e.toFixed(2)}`,"Revenue"]}),Ot.jsx(Bme,{type:"monotone",dataKey:"revenue",stroke:"#3b82f6",fillOpacity:1,fill:"url(#colorRevenue)"})]})})})]})}function hge({data:e}){const t=e.map(e=>({...e,date:new Date(e.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})}));return Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{children:[Ot.jsx(zr,{children:"Orders Volume"}),Ot.jsx(Ur,{children:"Daily orders count"})]}),Ot.jsx(Mn,{children:Ot.jsx(v9,{width:"100%",height:300,children:Ot.jsxs(oge,{data:t,children:[Ot.jsx(ome,{strokeDasharray:"3 3"}),Ot.jsx(Zme,{dataKey:"date"}),Ot.jsx(lfe,{}),Ot.jsx(u9,{}),Ot.jsx(the,{dataKey:"orders",fill:"#8b5cf6",radius:[8,8,0,0]})]})})})]})}function pge({data:e}){const t=e.map(e=>({...e,date:new Date(e.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})}));return Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{children:[Ot.jsx(zr,{children:"User Growth"}),Ot.jsx(Ur,{children:"New vs Active Users"})]}),Ot.jsx(Mn,{children:Ot.jsx(v9,{width:"100%",height:300,children:Ot.jsxs(age,{data:t,children:[Ot.jsx(ome,{strokeDasharray:"3 3"}),Ot.jsx(Zme,{dataKey:"date"}),Ot.jsx(lfe,{}),Ot.jsx(u9,{}),Ot.jsx(T6,{}),Ot.jsx(_me,{type:"monotone",dataKey:"newUsers",stroke:"#10b981",strokeWidth:2,name:"New Users"}),Ot.jsx(_me,{type:"monotone",dataKey:"activeUsers",stroke:"#3b82f6",strokeWidth:2,name:"Active Users"})]})})})]})}const mge=["#3b82f6","#8b5cf6","#10b981","#f59e0b","#ef4444","#ec4899"];function fge({data:e}){return Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{children:[Ot.jsx(zr,{children:"Revenue by Category"}),Ot.jsx(Ur,{children:"Distribution across product categories"})]}),Ot.jsxs(Mn,{children:[Ot.jsx(v9,{width:"100%",height:300,children:Ot.jsxs(lge,{children:[Ot.jsx(Lde,{data:e,cx:"50%",cy:"50%",labelLine:!1,label:({category:e,percentage:t})=>`${e}: ${t}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:e.map((e,t)=>Ot.jsx(y9,{fill:mge[t%mge.length]},`cell-${t}`))}),Ot.jsx(u9,{formatter:e=>`$${e.toFixed(2)}`})]})}),Ot.jsx("div",{className:"mt-4 space-y-2",children:e.map((e,t)=>Ot.jsxs("div",{className:"flex items-center justify-between text-sm",children:[Ot.jsxs("div",{className:"flex items-center",children:[Ot.jsx("div",{className:"w-3 h-3 rounded-full mr-2",style:{backgroundColor:mge[t%mge.length]}}),Ot.jsx("span",{children:e.category})]}),Ot.jsxs("span",{className:"font-semibold",children:["$",e.value.toFixed(2)]})]},e.category))})]})]})}function gge({data:e}){const t=e.steps.map(e=>({name:e.stepName,users:e.userCount,rate:e.conversionRate}));return Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{children:[Ot.jsx(zr,{children:e.funnelName}),Ot.jsx(Ur,{children:"Step-by-step conversion analysis"})]}),Ot.jsxs(Mn,{children:[Ot.jsx(v9,{width:"100%",height:300,children:Ot.jsxs(oge,{data:t,layout:"vertical",children:[Ot.jsx(ome,{strokeDasharray:"3 3"}),Ot.jsx(Zme,{type:"number"}),Ot.jsx(lfe,{dataKey:"name",type:"category",width:100}),Ot.jsx(u9,{formatter:(e,t)=>"users"===t?[e,"Users"]:[`${e.toFixed(2)}%`,"Conversion Rate"]}),Ot.jsx(T6,{}),Ot.jsx(the,{dataKey:"users",fill:"#3b82f6",name:"Users"}),Ot.jsx(the,{dataKey:"rate",fill:"#10b981",name:"Rate %"})]})}),Ot.jsx("div",{className:"mt-4 space-y-2",children:e.steps.map((e,t)=>Ot.jsxs("div",{className:"flex items-center justify-between text-sm border-b pb-2",children:[Ot.jsx("span",{className:"font-medium",children:e.stepName}),Ot.jsxs("div",{className:"flex items-center gap-4",children:[Ot.jsxs("span",{className:"text-muted-foreground",children:[e.userCount," users"]}),Ot.jsxs(Tn,{variant:e.conversionRate>50?"default":"secondary",children:[e.conversionRate.toFixed(1),"%"]})]})]},t))})]})]})}function xge({cohorts:e}){const t=e.map(e=>({name:e.cohortName,retention:e.retentionRate,ltv:parseFloat(e.averageLifetimeValue.toFixed(2))}));return Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{children:[Ot.jsx(zr,{children:"Cohort Analysis"}),Ot.jsx(Ur,{children:"User retention and lifetime value by cohort"})]}),Ot.jsxs(Mn,{children:[Ot.jsx(v9,{width:"100%",height:300,children:Ot.jsxs(age,{data:t,children:[Ot.jsx(ome,{strokeDasharray:"3 3"}),Ot.jsx(Zme,{dataKey:"name"}),Ot.jsx(lfe,{yAxisId:"left"}),Ot.jsx(lfe,{yAxisId:"right",orientation:"right"}),Ot.jsx(u9,{}),Ot.jsx(T6,{}),Ot.jsx(_me,{yAxisId:"left",type:"monotone",dataKey:"retention",stroke:"#3b82f6",strokeWidth:2,name:"Retention Rate %"}),Ot.jsx(_me,{yAxisId:"right",type:"monotone",dataKey:"ltv",stroke:"#10b981",strokeWidth:2,name:"Avg LTV $"})]})}),Ot.jsx("div",{className:"mt-4",children:Ot.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map((e,t)=>Ot.jsxs("div",{className:"border rounded-lg p-3",children:[Ot.jsx("div",{className:"font-semibold text-sm",children:e.cohortName}),Ot.jsx("div",{className:"text-xs text-muted-foreground mb-2",children:new Date(e.cohortDate).toLocaleDateString()}),Ot.jsxs("div",{className:"space-y-1",children:[Ot.jsxs("div",{className:"flex justify-between text-xs",children:[Ot.jsx("span",{children:"Total Users:"}),Ot.jsx("span",{className:"font-medium",children:e.totalUsers})]}),Ot.jsxs("div",{className:"flex justify-between text-xs",children:[Ot.jsx("span",{children:"Active:"}),Ot.jsx("span",{className:"font-medium",children:e.activeUsers})]}),Ot.jsxs("div",{className:"flex justify-between text-xs",children:[Ot.jsx("span",{children:"Retention:"}),Ot.jsxs("span",{className:"font-medium text-blue-600",children:[e.retentionRate.toFixed(1),"%"]})]}),Ot.jsxs("div",{className:"flex justify-between text-xs",children:[Ot.jsx("span",{children:"Avg LTV:"}),Ot.jsxs("span",{className:"font-medium text-green-600",children:["$",e.averageLifetimeValue.toFixed(2)]})]})]})]},t))})})]})]})}function vge({events:e}){return Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{children:[Ot.jsxs(zr,{className:"flex items-center gap-2",children:[Ot.jsx(Ri,{className:"h-5 w-5 text-green-600 animate-pulse"}),"Real-time Activity"]}),Ot.jsx(Ur,{children:"Live user events (last 5 minutes)"})]}),Ot.jsx(Mn,{children:Ot.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:0===e.length?Ot.jsx("div",{className:"text-center text-muted-foreground py-8",children:"No recent activity"}):e.map(e=>{const t=(e=>{switch(e){case"page_view":return $r;case"order_created":return Ir;case"user_signup":return On;case"purchase_completed":return ar;default:return Ri}})(e.eventType),n=(e=>{switch(e){case"page_view":return"text-blue-600";case"order_created":return"text-purple-600";case"user_signup":return"text-green-600";case"purchase_completed":return"text-yellow-600";default:return"text-gray-600"}})(e.eventType);return Ot.jsxs(wo.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"flex items-start gap-3 border-b pb-3",children:[Ot.jsx(t,{className:`h-4 w-4 mt-1 ${n}`}),Ot.jsxs("div",{className:"flex-1",children:[Ot.jsx("div",{className:"text-sm font-medium",children:e.eventType.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase())}),Ot.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(e.timestamp).toLocaleTimeString()})]})]},e.id)})})})]})}function yge(){const[e,t]=hn.useState("30"),{data:n,isLoading:r}=za({queryKey:["/api/analytics/platform/overview",{days:e}]}),{data:s}=za({queryKey:["/api/analytics/realtime"],refetchInterval:1e4}),{data:i}=za({queryKey:["/api/analytics/funnels/purchase"]}),{data:a}=za({queryKey:["/api/analytics/cohorts",{type:"monthly",limit:6}]});if(r)return Ot.jsx("div",{className:"flex items-center justify-center min-h-screen",children:Ot.jsxs("div",{className:"text-center",children:[Ot.jsx(Ri,{className:"h-12 w-12 animate-spin text-blue-600 mx-auto mb-4"}),Ot.jsx("p",{className:"text-muted-foreground",children:"Loading analytics..."})]})});if(!n)return Ot.jsx("div",{className:"text-center py-12",children:Ot.jsx("p",{className:"text-muted-foreground",children:"No analytics data available"})});const o=n.dailyMetrics.slice(-7).reduce((e,t)=>e+parseFloat(t.totalRevenue),0),l=n.dailyMetrics.slice(-14,-7).reduce((e,t)=>e+parseFloat(t.totalRevenue),0),c=l>0?(o-l)/l*100:0,d=n.dailyMetrics.slice(-7).reduce((e,t)=>e+t.orderCount,0),u=n.dailyMetrics.slice(-14,-7).reduce((e,t)=>e+t.orderCount,0),h=u>0?(d-u)/u*100:0,p=n.dailyMetrics.slice(-7).reduce((e,t)=>e+t.newUsers,0),m=n.dailyMetrics.slice(-14,-7).reduce((e,t)=>e+t.newUsers,0),f=m>0?(p-m)/m*100:0,g=n.dailyMetrics.map(e=>({date:e.date,revenue:parseFloat(e.totalRevenue),orders:e.orderCount})),x=n.dailyMetrics.map(e=>({date:e.date,newUsers:e.newUsers,activeUsers:e.activeUsers}));return Ot.jsxs("div",{className:"container mx-auto py-8 space-y-8",children:[Ot.jsxs("div",{className:"flex justify-between items-center",children:[Ot.jsxs("div",{children:[Ot.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Platform Analytics"}),Ot.jsx("p",{className:"text-muted-foreground mt-1",children:"Comprehensive insights into your platform performance"})]}),Ot.jsxs(Un,{value:e,onValueChange:t,children:[Ot.jsx(Vn,{className:"w-[180px]",children:Ot.jsx(Hn,{placeholder:"Select time range"})}),Ot.jsxs(Wn,{children:[Ot.jsx($n,{value:"7",children:"Last 7 days"}),Ot.jsx($n,{value:"30",children:"Last 30 days"}),Ot.jsx($n,{value:"90",children:"Last 90 days"})]})]})]}),s&&Ot.jsx(wo.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:Ot.jsxs(Sn,{className:"bg-gradient-to-r from-green-50 to-blue-50 border-green-200",children:[Ot.jsx(Lr,{className:"pb-3",children:Ot.jsxs(zr,{className:"text-lg flex items-center gap-2",children:[Ot.jsx(Ri,{className:"h-5 w-5 text-green-600 animate-pulse"}),"Live Activity"]})}),Ot.jsx(Mn,{children:Ot.jsxs("div",{className:"flex items-center gap-6",children:[Ot.jsxs("div",{children:[Ot.jsx("div",{className:"text-2xl font-bold text-green-600",children:s.activeUsers}),Ot.jsx("div",{className:"text-sm text-muted-foreground",children:"Active Users"})]}),Ot.jsxs("div",{children:[Ot.jsx("div",{className:"text-2xl font-bold text-blue-600",children:s.totalEvents}),Ot.jsx("div",{className:"text-sm text-muted-foreground",children:"Events (5 min)"})]}),Ot.jsxs(Tn,{variant:"outline",className:"ml-auto",children:[Ot.jsx("span",{className:"w-2 h-2 bg-green-600 rounded-full mr-2 animate-pulse"}),"Live"]})]})})]})}),Ot.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[Ot.jsx(dge,{title:"Total Revenue",value:`$${n.totalRevenue.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,change:c,icon:ar,trend:c>0?"up":c<0?"down":"neutral",colorClass:"text-green-600"}),Ot.jsx(dge,{title:"Total Orders",value:n.totalOrders.toLocaleString(),change:h,icon:Ir,trend:h>0?"up":h<0?"down":"neutral",colorClass:"text-blue-600"}),Ot.jsx(dge,{title:"Total Users",value:n.totalUsers.toLocaleString(),change:f,icon:On,trend:f>0?"up":f<0?"down":"neutral",colorClass:"text-purple-600"}),Ot.jsx(dge,{title:"Avg Order Value",value:`$${n.averageOrderValue.toFixed(2)}`,icon:Dn,colorClass:"text-orange-600"})]}),Ot.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[Ot.jsx(dge,{title:"Active Users",value:n.activeUsers.toLocaleString(),icon:Ri,colorClass:"text-blue-600"}),Ot.jsx(dge,{title:"Total Businesses",value:n.totalBusinesses.toLocaleString(),icon:fr,colorClass:"text-purple-600"}),Ot.jsx(dge,{title:"Total Products",value:n.totalProducts.toLocaleString(),icon:as,colorClass:"text-green-600"}),Ot.jsx(dge,{title:"Conversion Rate",value:`${n.conversionRate.toFixed(2)}%`,icon:Dn,colorClass:"text-orange-600"})]}),Ot.jsxs(qs,{defaultValue:"revenue",className:"space-y-6",children:[Ot.jsxs(Xs,{className:"grid w-full grid-cols-4",children:[Ot.jsx(Ks,{value:"revenue",children:"Revenue"}),Ot.jsx(Ks,{value:"orders",children:"Orders"}),Ot.jsx(Ks,{value:"users",children:"Users"}),Ot.jsx(Ks,{value:"advanced",children:"Advanced"})]}),Ot.jsx(Ys,{value:"revenue",className:"space-y-6",children:Ot.jsx(uge,{data:g})}),Ot.jsx(Ys,{value:"orders",className:"space-y-6",children:Ot.jsx(hge,{data:g})}),Ot.jsx(Ys,{value:"users",className:"space-y-6",children:Ot.jsx(pge,{data:x})}),Ot.jsxs(Ys,{value:"advanced",className:"space-y-6",children:[Ot.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i&&Ot.jsx(gge,{data:i}),s&&Ot.jsx(vge,{events:s.recentEvents})]}),a&&a.length>0&&Ot.jsx(xge,{cohorts:a})]})]}),Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{children:[Ot.jsx(zr,{children:"Export Data"}),Ot.jsx(Ur,{children:"Download analytics reports"})]}),Ot.jsxs(Mn,{className:"flex gap-4",children:[Ot.jsx(Ln,{variant:"outline",children:"Export as CSV"}),Ot.jsx(Ln,{variant:"outline",children:"Export as PDF"}),Ot.jsx(Ln,{variant:"outline",children:"Schedule Report"})]})]})]})}function bge(){const{user:e}=Ua(),[,t]=_n();return"1"===e?.id||"admin"===e?.username?Ot.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-purple-50",children:[Ot.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white py-6 shadow-lg",children:Ot.jsx("div",{className:"container mx-auto px-4",children:Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsx(Rn,{className:"h-8 w-8"}),Ot.jsxs("div",{children:[Ot.jsx("h1",{className:"text-2xl font-bold",children:"Admin Dashboard"}),Ot.jsx("p",{className:"text-blue-100",children:"Platform Analytics & Insights"})]})]}),Ot.jsx(Yn,{href:"/",children:Ot.jsx(Ln,{variant:"secondary",children:"Back to Home"})})]})})}),Ot.jsx("div",{className:"container mx-auto px-4 py-8",children:Ot.jsx(yge,{})})]}):Ot.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:Ot.jsxs(Sn,{className:"max-w-md w-full",children:[Ot.jsxs(Lr,{children:[Ot.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[Ot.jsx(Rn,{className:"h-8 w-8 text-red-600"}),Ot.jsx(zr,{children:"Access Denied"})]}),Ot.jsx(Ur,{children:"You need administrator privileges to access this page."})]}),Ot.jsx(Mn,{children:Ot.jsx(Ln,{onClick:()=>t("/"),className:"w-full",children:"Return to Home"})})]})})}function wge({businessId:e}){const[t,n]=hn.useState("30"),{data:r,isLoading:s}=za({queryKey:[`/api/analytics/business/${e}/dashboard`,{days:t}]});if(s)return Ot.jsx("div",{className:"flex items-center justify-center py-12",children:Ot.jsxs("div",{className:"text-center",children:[Ot.jsx(Dn,{className:"h-12 w-12 animate-spin text-blue-600 mx-auto mb-4"}),Ot.jsx("p",{className:"text-muted-foreground",children:"Loading business analytics..."})]})});if(!r)return Ot.jsx("div",{className:"text-center py-12",children:Ot.jsx("p",{className:"text-muted-foreground",children:"No analytics data available for this business"})});const i=r.dailyMetrics.slice(-7).reduce((e,t)=>e+parseFloat(t.revenue),0),a=r.dailyMetrics.slice(-14,-7).reduce((e,t)=>e+parseFloat(t.revenue),0),o=a>0?(i-a)/a*100:0,l=r.dailyMetrics.slice(-7).reduce((e,t)=>e+t.orders,0),c=r.dailyMetrics.slice(-14,-7).reduce((e,t)=>e+t.orders,0),d=c>0?(l-c)/c*100:0,u=r.dailyMetrics.slice(-7).reduce((e,t)=>e+t.views,0),h=r.dailyMetrics.slice(-14,-7).reduce((e,t)=>e+t.views,0),p=h>0?(u-h)/h*100:0,m=r.dailyMetrics.map(e=>({date:e.date,revenue:parseFloat(e.revenue),orders:e.orders})),f=r.categoryBreakdown.map(e=>({category:e.category,value:e.revenue,percentage:(e.revenue/r.totalRevenue*100).toFixed(1)}));return Ot.jsxs("div",{className:"space-y-8",children:[Ot.jsxs("div",{className:"flex justify-between items-center",children:[Ot.jsxs("div",{children:[Ot.jsxs("h2",{className:"text-2xl font-bold",children:[r.businessName," - Analytics"]}),Ot.jsx("p",{className:"text-muted-foreground mt-1",children:"Business performance insights"})]}),Ot.jsxs(Un,{value:t,onValueChange:n,children:[Ot.jsx(Vn,{className:"w-[180px]",children:Ot.jsx(Hn,{placeholder:"Select time range"})}),Ot.jsxs(Wn,{children:[Ot.jsx($n,{value:"7",children:"Last 7 days"}),Ot.jsx($n,{value:"30",children:"Last 30 days"}),Ot.jsx($n,{value:"90",children:"Last 90 days"})]})]})]}),Ot.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[Ot.jsx(dge,{title:"Total Revenue",value:`$${r.totalRevenue.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,change:o,icon:ar,trend:o>0?"up":o<0?"down":"neutral",colorClass:"text-green-600"}),Ot.jsx(dge,{title:"Total Orders",value:r.orderCount.toLocaleString(),change:d,icon:Ir,trend:d>0?"up":d<0?"down":"neutral",colorClass:"text-blue-600"}),Ot.jsx(dge,{title:"Product Views",value:r.productViews.toLocaleString(),change:p,icon:$r,trend:p>0?"up":p<0?"down":"neutral",colorClass:"text-purple-600"}),Ot.jsx(dge,{title:"Avg Order Value",value:`$${r.averageOrderValue.toFixed(2)}`,icon:Dn,colorClass:"text-orange-600"})]}),Ot.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[Ot.jsx(dge,{title:"Unique Visitors",value:r.uniqueVisitors.toLocaleString(),icon:On,colorClass:"text-blue-600"}),Ot.jsx(dge,{title:"Conversion Rate",value:`${r.conversionRate.toFixed(2)}%`,icon:Dn,colorClass:"text-green-600"}),Ot.jsx(dge,{title:"Average Rating",value:r.averageRating.toFixed(1),icon:In,colorClass:"text-yellow-600"}),Ot.jsx(dge,{title:"Total Reviews",value:r.totalReviews.toLocaleString(),icon:Or,colorClass:"text-purple-600"})]}),Ot.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[Ot.jsx(dge,{title:"Favorites",value:r.favoriteCount.toLocaleString(),icon:Zn,colorClass:"text-red-600"}),Ot.jsx(dge,{title:"Shares",value:r.shareCount.toLocaleString(),icon:ss,colorClass:"text-blue-600"})]}),Ot.jsxs(qs,{defaultValue:"revenue",className:"space-y-6",children:[Ot.jsxs(Xs,{className:"grid w-full grid-cols-3",children:[Ot.jsx(Ks,{value:"revenue",children:"Revenue"}),Ot.jsx(Ks,{value:"orders",children:"Orders"}),Ot.jsx(Ks,{value:"products",children:"Top Products"})]}),Ot.jsx(Ys,{value:"revenue",className:"space-y-6",children:Ot.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[Ot.jsx(uge,{data:m}),f.length>0&&Ot.jsx(fge,{data:f})]})}),Ot.jsx(Ys,{value:"orders",className:"space-y-6",children:Ot.jsx(hge,{data:m})}),Ot.jsx(Ys,{value:"products",className:"space-y-6",children:Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{children:[Ot.jsx(zr,{children:"Top Performing Products"}),Ot.jsx(Ur,{children:"Best sellers by revenue"})]}),Ot.jsx(Mn,{children:Ot.jsxs("div",{className:"space-y-4",children:[r.topProducts.map((e,t)=>Ot.jsxs(wo.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*t},className:"flex items-center justify-between p-4 border rounded-lg hover:bg-accent transition-colors",children:[Ot.jsxs("div",{className:"flex items-center gap-4",children:[Ot.jsxs("div",{className:"flex items-center justify-center w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 text-white font-bold",children:["#",t+1]}),Ot.jsxs("div",{children:[Ot.jsx("div",{className:"font-semibold",children:e.productName}),Ot.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.orderCount," orders  ",e.views," views"]})]})]}),Ot.jsxs("div",{className:"text-right",children:[Ot.jsxs("div",{className:"text-lg font-bold text-green-600",children:["$",e.revenue.toFixed(2)]}),Ot.jsxs("div",{className:"text-xs text-muted-foreground",children:["$",(e.revenue/e.orderCount).toFixed(2)," avg"]})]})]},e.productId)),0===r.topProducts.length&&Ot.jsx("div",{className:"text-center text-muted-foreground py-8",children:"No product sales data available"})]})})]})})]}),Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{children:[Ot.jsx(zr,{children:"Performance Insights"}),Ot.jsx(Ur,{children:"AI-powered recommendations to improve your business"})]}),Ot.jsxs(Mn,{className:"space-y-4",children:[r.conversionRate<2&&Ot.jsxs("div",{className:"flex items-start gap-3 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[Ot.jsx(Dn,{className:"h-5 w-5 text-yellow-600 mt-0.5"}),Ot.jsxs("div",{children:[Ot.jsx("div",{className:"font-semibold text-yellow-900",children:"Low Conversion Rate"}),Ot.jsxs("div",{className:"text-sm text-yellow-800",children:["Your conversion rate is ",r.conversionRate.toFixed(2),"%. Consider improving product images, descriptions, and pricing."]})]})]}),r.averageRating<4&&r.totalReviews>0&&Ot.jsxs("div",{className:"flex items-start gap-3 p-4 bg-orange-50 border border-orange-200 rounded-lg",children:[Ot.jsx(In,{className:"h-5 w-5 text-orange-600 mt-0.5"}),Ot.jsxs("div",{children:[Ot.jsx("div",{className:"font-semibold text-orange-900",children:"Improve Customer Satisfaction"}),Ot.jsxs("div",{className:"text-sm text-orange-800",children:["Your average rating is ",r.averageRating.toFixed(1)," stars. Focus on customer service and product quality."]})]})]}),r.totalReviews<10&&Ot.jsxs("div",{className:"flex items-start gap-3 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[Ot.jsx(Or,{className:"h-5 w-5 text-blue-600 mt-0.5"}),Ot.jsxs("div",{children:[Ot.jsx("div",{className:"font-semibold text-blue-900",children:"Get More Reviews"}),Ot.jsxs("div",{className:"text-sm text-blue-800",children:["You have ",r.totalReviews," reviews. Encourage customers to leave reviews to build trust."]})]})]}),o>20&&Ot.jsxs("div",{className:"flex items-start gap-3 p-4 bg-green-50 border border-green-200 rounded-lg",children:[Ot.jsx(Dn,{className:"h-5 w-5 text-green-600 mt-0.5"}),Ot.jsxs("div",{children:[Ot.jsx("div",{className:"font-semibold text-green-900",children:"Strong Growth!"}),Ot.jsxs("div",{className:"text-sm text-green-800",children:["Your revenue is up ",o.toFixed(1),"% from last period. Keep up the great work!"]})]})]})]})]}),Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{children:[Ot.jsx(zr,{children:"Export Reports"}),Ot.jsx(Ur,{children:"Download your business analytics"})]}),Ot.jsxs(Mn,{className:"flex gap-4",children:[Ot.jsxs(Ln,{variant:"outline",children:[Ot.jsx(as,{className:"h-4 w-4 mr-2"}),"Export as CSV"]}),Ot.jsxs(Ln,{variant:"outline",children:[Ot.jsx(as,{className:"h-4 w-4 mr-2"}),"Export as PDF"]})]})]})]})}function jge(){Ua(),_n();const[e,t]=hn.useState(null),{data:n,isLoading:r}=za({queryKey:["/api/businesses/my-businesses"]});return!e&&n&&n.length>0&&t(n[0].id),r?Ot.jsx("div",{className:"min-h-screen",children:Ot.jsx("div",{className:"flex items-center justify-center min-h-[80vh]",children:Ot.jsxs("div",{className:"text-center",children:[Ot.jsx(Dn,{className:"h-12 w-12 animate-spin text-blue-600 mx-auto mb-4"}),Ot.jsx("p",{className:"text-muted-foreground",children:"Loading your businesses..."})]})})}):n&&0!==n.length?Ot.jsxs("div",{className:"min-h-screen",children:[Ot.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white py-6 shadow-lg",children:Ot.jsx("div",{className:"container mx-auto px-4",children:Ot.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsx(fr,{className:"h-8 w-8"}),Ot.jsxs("div",{children:[Ot.jsx("h1",{className:"text-2xl font-bold",children:"Business Analytics"}),Ot.jsx("p",{className:"text-blue-100",children:"Track your business performance"})]})]}),Ot.jsxs("div",{className:"flex items-center gap-4",children:[n.length>1&&Ot.jsxs(Un,{value:e||"",onValueChange:t,children:[Ot.jsx(Vn,{className:"w-[250px] bg-white text-gray-900",children:Ot.jsx(Hn,{placeholder:"Select a business"})}),Ot.jsx(Wn,{children:n.map(e=>Ot.jsx($n,{value:e.id,children:e.name},e.id))})]}),Ot.jsx(Yn,{href:"/",children:Ot.jsx(Ln,{variant:"secondary",children:"Back to Home"})})]})]})})}),Ot.jsx("div",{className:"container mx-auto px-4 py-8",children:e?Ot.jsx(wge,{businessId:e}):Ot.jsx("div",{className:"text-center py-12",children:Ot.jsx("p",{className:"text-muted-foreground",children:"Select a business to view analytics"})})})]}):Ot.jsx("div",{className:"min-h-screen",children:Ot.jsx("div",{className:"flex items-center justify-center p-4 min-h-[80vh]",children:Ot.jsxs(Sn,{className:"max-w-md w-full bg-white/90 backdrop-blur-md",children:[Ot.jsxs(Lr,{children:[Ot.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[Ot.jsx(fr,{className:"h-8 w-8 text-blue-600"}),Ot.jsx(zr,{children:"No Businesses Found"})]}),Ot.jsx(Ur,{children:"You need to create a business first to view analytics."})]}),Ot.jsxs(Mn,{className:"space-y-4",children:[Ot.jsx(Yn,{href:"/create-business",children:Ot.jsxs(Ln,{className:"w-full",children:[Ot.jsx(wr,{className:"h-4 w-4 mr-2"}),"Create Your First Business"]})}),Ot.jsx(Yn,{href:"/",children:Ot.jsx(Ln,{variant:"outline",className:"w-full",children:"Return to Home"})})]})]})})})}
/**
   * table-core
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function Nge(e,t){return"function"==typeof e?e(t):e}function _ge(e,t){return n=>{t.setState(t=>({...t,[e]:Nge(n,t[e])}))}}function Sge(e){return e instanceof Function}function Mge(e,t,n){let r,s=[];return i=>{let a;n.key&&n.debug&&(a=Date.now());const o=e(i);if(!(o.length!==s.length||o.some((e,t)=>s[t]!==e)))return r;let l;if(s=o,n.key&&n.debug&&(l=Date.now()),r=t(...o),null==n||null==n.onChange||n.onChange(r),n.key&&n.debug&&null!=n&&n.debug()){Math.round(100*(Date.now()-a)),Math.round(100*(Date.now()-l))}return r}}function Cge(e,t,n,r){return{debug:()=>{var n;return null!=(n=null==e?void 0:e.debugAll)?n:e[t]},key:!1,onChange:r}}const Ege="debugHeaders";function kge(e,t,n){var r;let s={id:null!=(r=n.id)?r:t.id,column:t,index:n.index,isPlaceholder:!!n.isPlaceholder,placeholderId:n.placeholderId,depth:n.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{const e=[],t=n=>{n.subHeaders&&n.subHeaders.length&&n.subHeaders.map(t),e.push(n)};return t(s),e},getContext:()=>({table:e,header:s,column:t})};return e._features.forEach(t=>{null==t.createHeader||t.createHeader(s,e)}),s}const Age={createTable:e=>{e.getHeaderGroups=Mge(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,r,s)=>{var i,a;const o=null!=(i=null==r?void 0:r.map(e=>n.find(t=>t.id===e)).filter(Boolean))?i:[],l=null!=(a=null==s?void 0:s.map(e=>n.find(t=>t.id===e)).filter(Boolean))?a:[];return Tge(t,[...o,...n.filter(e=>!(null!=r&&r.includes(e.id)||null!=s&&s.includes(e.id))),...l],e)},Cge(e.options,Ege)),e.getCenterHeaderGroups=Mge(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,r,s)=>Tge(t,n=n.filter(e=>!(null!=r&&r.includes(e.id)||null!=s&&s.includes(e.id))),e,"center"),Cge(e.options,Ege)),e.getLeftHeaderGroups=Mge(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left],(t,n,r)=>{var s;return Tge(t,null!=(s=null==r?void 0:r.map(e=>n.find(t=>t.id===e)).filter(Boolean))?s:[],e,"left")},Cge(e.options,Ege)),e.getRightHeaderGroups=Mge(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.right],(t,n,r)=>{var s;return Tge(t,null!=(s=null==r?void 0:r.map(e=>n.find(t=>t.id===e)).filter(Boolean))?s:[],e,"right")},Cge(e.options,Ege)),e.getFooterGroups=Mge(()=>[e.getHeaderGroups()],e=>[...e].reverse(),Cge(e.options,Ege)),e.getLeftFooterGroups=Mge(()=>[e.getLeftHeaderGroups()],e=>[...e].reverse(),Cge(e.options,Ege)),e.getCenterFooterGroups=Mge(()=>[e.getCenterHeaderGroups()],e=>[...e].reverse(),Cge(e.options,Ege)),e.getRightFooterGroups=Mge(()=>[e.getRightHeaderGroups()],e=>[...e].reverse(),Cge(e.options,Ege)),e.getFlatHeaders=Mge(()=>[e.getHeaderGroups()],e=>e.map(e=>e.headers).flat(),Cge(e.options,Ege)),e.getLeftFlatHeaders=Mge(()=>[e.getLeftHeaderGroups()],e=>e.map(e=>e.headers).flat(),Cge(e.options,Ege)),e.getCenterFlatHeaders=Mge(()=>[e.getCenterHeaderGroups()],e=>e.map(e=>e.headers).flat(),Cge(e.options,Ege)),e.getRightFlatHeaders=Mge(()=>[e.getRightHeaderGroups()],e=>e.map(e=>e.headers).flat(),Cge(e.options,Ege)),e.getCenterLeafHeaders=Mge(()=>[e.getCenterFlatHeaders()],e=>e.filter(e=>{var t;return!(null!=(t=e.subHeaders)&&t.length)}),Cge(e.options,Ege)),e.getLeftLeafHeaders=Mge(()=>[e.getLeftFlatHeaders()],e=>e.filter(e=>{var t;return!(null!=(t=e.subHeaders)&&t.length)}),Cge(e.options,Ege)),e.getRightLeafHeaders=Mge(()=>[e.getRightFlatHeaders()],e=>e.filter(e=>{var t;return!(null!=(t=e.subHeaders)&&t.length)}),Cge(e.options,Ege)),e.getLeafHeaders=Mge(()=>[e.getLeftHeaderGroups(),e.getCenterHeaderGroups(),e.getRightHeaderGroups()],(e,t,n)=>{var r,s,i,a,o,l;return[...null!=(r=null==(s=e[0])?void 0:s.headers)?r:[],...null!=(i=null==(a=t[0])?void 0:a.headers)?i:[],...null!=(o=null==(l=n[0])?void 0:l.headers)?o:[]].map(e=>e.getLeafHeaders()).flat()},Cge(e.options,Ege))}};function Tge(e,t,n,r){var s,i;let a=0;const o=function(e,t){void 0===t&&(t=1),a=Math.max(a,t),e.filter(e=>e.getIsVisible()).forEach(e=>{var n;null!=(n=e.columns)&&n.length&&o(e.columns,t+1)},0)};o(e);let l=[];const c=(e,t)=>{const s={depth:t,id:[r,`${t}`].filter(Boolean).join("_"),headers:[]},i=[];e.forEach(e=>{const a=[...i].reverse()[0];let o,l=!1;if(e.column.depth===s.depth&&e.column.parent?o=e.column.parent:(o=e.column,l=!0),a&&(null==a?void 0:a.column)===o)a.subHeaders.push(e);else{const s=kge(n,o,{id:[r,t,o.id,null==e?void 0:e.id].filter(Boolean).join("_"),isPlaceholder:l,placeholderId:l?`${i.filter(e=>e.column===o).length}`:void 0,depth:t,index:i.length});s.subHeaders.push(e),i.push(s)}s.headers.push(e),e.headerGroup=s}),l.push(s),t>0&&c(i,t-1)},d=t.map((e,t)=>kge(n,e,{depth:a,index:t}));c(d,a-1),l.reverse();const u=e=>e.filter(e=>e.column.getIsVisible()).map(e=>{let t=0,n=0,r=[0];e.subHeaders&&e.subHeaders.length?(r=[],u(e.subHeaders).forEach(e=>{let{colSpan:n,rowSpan:s}=e;t+=n,r.push(s)})):t=1;return n+=Math.min(...r),e.colSpan=t,e.rowSpan=n,{colSpan:t,rowSpan:n}});return u(null!=(s=null==(i=l[0])?void 0:i.headers)?s:[]),l}const Pge=(e,t,n,r,s,i,a)=>{let o={id:t,index:r,original:n,depth:s,parentId:a,_valuesCache:{},_uniqueValuesCache:{},getValue:t=>{if(o._valuesCache.hasOwnProperty(t))return o._valuesCache[t];const n=e.getColumn(t);return null!=n&&n.accessorFn?(o._valuesCache[t]=n.accessorFn(o.original,r),o._valuesCache[t]):void 0},getUniqueValues:t=>{if(o._uniqueValuesCache.hasOwnProperty(t))return o._uniqueValuesCache[t];const n=e.getColumn(t);return null!=n&&n.accessorFn?n.columnDef.getUniqueValues?(o._uniqueValuesCache[t]=n.columnDef.getUniqueValues(o.original,r),o._uniqueValuesCache[t]):(o._uniqueValuesCache[t]=[o.getValue(t)],o._uniqueValuesCache[t]):void 0},renderValue:t=>{var n;return null!=(n=o.getValue(t))?n:e.options.renderFallbackValue},subRows:[],getLeafRows:()=>function(e,t){const n=[],r=e=>{e.forEach(e=>{n.push(e);const s=t(e);null!=s&&s.length&&r(s)})};return r(e),n}(o.subRows,e=>e.subRows),getParentRow:()=>o.parentId?e.getRow(o.parentId,!0):void 0,getParentRows:()=>{let e=[],t=o;for(;;){const n=t.getParentRow();if(!n)break;e.push(n),t=n}return e.reverse()},getAllCells:Mge(()=>[e.getAllLeafColumns()],t=>t.map(t=>function(e,t,n,r){const s={id:`${t.id}_${n.id}`,row:t,column:n,getValue:()=>t.getValue(r),renderValue:()=>{var t;return null!=(t=s.getValue())?t:e.options.renderFallbackValue},getContext:Mge(()=>[e,n,t,s],(e,t,n,r)=>({table:e,column:t,row:n,cell:r,getValue:r.getValue,renderValue:r.renderValue}),Cge(e.options,"debugCells"))};return e._features.forEach(r=>{null==r.createCell||r.createCell(s,n,t,e)},{}),s}(e,o,t,t.id)),Cge(e.options,"debugRows")),_getAllCellsByColumnId:Mge(()=>[o.getAllCells()],e=>e.reduce((e,t)=>(e[t.column.id]=t,e),{}),Cge(e.options,"debugRows"))};for(let l=0;l<e._features.length;l++){const t=e._features[l];null==t||null==t.createRow||t.createRow(o,e)}return o},Oge={createColumn:(e,t)=>{e._getFacetedRowModel=t.options.getFacetedRowModel&&t.options.getFacetedRowModel(t,e.id),e.getFacetedRowModel=()=>e._getFacetedRowModel?e._getFacetedRowModel():t.getPreFilteredRowModel(),e._getFacetedUniqueValues=t.options.getFacetedUniqueValues&&t.options.getFacetedUniqueValues(t,e.id),e.getFacetedUniqueValues=()=>e._getFacetedUniqueValues?e._getFacetedUniqueValues():new Map,e._getFacetedMinMaxValues=t.options.getFacetedMinMaxValues&&t.options.getFacetedMinMaxValues(t,e.id),e.getFacetedMinMaxValues=()=>{if(e._getFacetedMinMaxValues)return e._getFacetedMinMaxValues()}}},Rge=(e,t,n)=>{var r,s;const i=null==n||null==(r=n.toString())?void 0:r.toLowerCase();return Boolean(null==(s=e.getValue(t))||null==(s=s.toString())||null==(s=s.toLowerCase())?void 0:s.includes(i))};Rge.autoRemove=e=>Wge(e);const Ige=(e,t,n)=>{var r;return Boolean(null==(r=e.getValue(t))||null==(r=r.toString())?void 0:r.includes(n))};Ige.autoRemove=e=>Wge(e);const Dge=(e,t,n)=>{var r;return(null==(r=e.getValue(t))||null==(r=r.toString())?void 0:r.toLowerCase())===(null==n?void 0:n.toLowerCase())};Dge.autoRemove=e=>Wge(e);const Lge=(e,t,n)=>{var r;return null==(r=e.getValue(t))?void 0:r.includes(n)};Lge.autoRemove=e=>Wge(e);const Fge=(e,t,n)=>!n.some(n=>{var r;return!(null!=(r=e.getValue(t))&&r.includes(n))});Fge.autoRemove=e=>Wge(e)||!(null!=e&&e.length);const zge=(e,t,n)=>n.some(n=>{var r;return null==(r=e.getValue(t))?void 0:r.includes(n)});zge.autoRemove=e=>Wge(e)||!(null!=e&&e.length);const Bge=(e,t,n)=>e.getValue(t)===n;Bge.autoRemove=e=>Wge(e);const Uge=(e,t,n)=>e.getValue(t)==n;Uge.autoRemove=e=>Wge(e);const Vge=(e,t,n)=>{let[r,s]=n;const i=e.getValue(t);return i>=r&&i<=s};Vge.resolveFilterValue=e=>{let[t,n]=e,r="number"!=typeof t?parseFloat(t):t,s="number"!=typeof n?parseFloat(n):n,i=null===t||Number.isNaN(r)?-1/0:r,a=null===n||Number.isNaN(s)?1/0:s;if(i>a){const e=i;i=a,a=e}return[i,a]},Vge.autoRemove=e=>Wge(e)||Wge(e[0])&&Wge(e[1]);const Hge={includesString:Rge,includesStringSensitive:Ige,equalsString:Dge,arrIncludes:Lge,arrIncludesAll:Fge,arrIncludesSome:zge,equals:Bge,weakEquals:Uge,inNumberRange:Vge};function Wge(e){return null==e||""===e}const $ge={getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:e=>({columnFilters:[],...e}),getDefaultOptions:e=>({onColumnFiltersChange:_ge("columnFilters",e),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(e,t)=>{e.getAutoFilterFn=()=>{const n=t.getCoreRowModel().flatRows[0],r=null==n?void 0:n.getValue(e.id);return"string"==typeof r?Hge.includesString:"number"==typeof r?Hge.inNumberRange:"boolean"==typeof r||null!==r&&"object"==typeof r?Hge.equals:Array.isArray(r)?Hge.arrIncludes:Hge.weakEquals},e.getFilterFn=()=>{var n,r;return Sge(e.columnDef.filterFn)?e.columnDef.filterFn:"auto"===e.columnDef.filterFn?e.getAutoFilterFn():null!=(n=null==(r=t.options.filterFns)?void 0:r[e.columnDef.filterFn])?n:Hge[e.columnDef.filterFn]},e.getCanFilter=()=>{var n,r,s;return(null==(n=e.columnDef.enableColumnFilter)||n)&&(null==(r=t.options.enableColumnFilters)||r)&&(null==(s=t.options.enableFilters)||s)&&!!e.accessorFn},e.getIsFiltered=()=>e.getFilterIndex()>-1,e.getFilterValue=()=>{var n;return null==(n=t.getState().columnFilters)||null==(n=n.find(t=>t.id===e.id))?void 0:n.value},e.getFilterIndex=()=>{var n,r;return null!=(n=null==(r=t.getState().columnFilters)?void 0:r.findIndex(t=>t.id===e.id))?n:-1},e.setFilterValue=n=>{t.setColumnFilters(t=>{const r=e.getFilterFn(),s=null==t?void 0:t.find(t=>t.id===e.id),i=Nge(n,s?s.value:void 0);var a;if(Gge(r,i,e))return null!=(a=null==t?void 0:t.filter(t=>t.id!==e.id))?a:[];const o={id:e.id,value:i};var l;return s?null!=(l=null==t?void 0:t.map(t=>t.id===e.id?o:t))?l:[]:null!=t&&t.length?[...t,o]:[o]})}},createRow:(e,t)=>{e.columnFilters={},e.columnFiltersMeta={}},createTable:e=>{e.setColumnFilters=t=>{const n=e.getAllLeafColumns();null==e.options.onColumnFiltersChange||e.options.onColumnFiltersChange(e=>{var r;return null==(r=Nge(t,e))?void 0:r.filter(e=>{const t=n.find(t=>t.id===e.id);if(t){if(Gge(t.getFilterFn(),e.value,t))return!1}return!0})})},e.resetColumnFilters=t=>{var n,r;e.setColumnFilters(t?[]:null!=(n=null==(r=e.initialState)?void 0:r.columnFilters)?n:[])},e.getPreFilteredRowModel=()=>e.getCoreRowModel(),e.getFilteredRowModel=()=>(!e._getFilteredRowModel&&e.options.getFilteredRowModel&&(e._getFilteredRowModel=e.options.getFilteredRowModel(e)),e.options.manualFiltering||!e._getFilteredRowModel?e.getPreFilteredRowModel():e._getFilteredRowModel())}};function Gge(e,t,n){return!(!e||!e.autoRemove)&&e.autoRemove(t,n)||void 0===t||"string"==typeof t&&!t}const qge={sum:(e,t,n)=>n.reduce((t,n)=>{const r=n.getValue(e);return t+("number"==typeof r?r:0)},0),min:(e,t,n)=>{let r;return n.forEach(t=>{const n=t.getValue(e);null!=n&&(r>n||void 0===r&&n>=n)&&(r=n)}),r},max:(e,t,n)=>{let r;return n.forEach(t=>{const n=t.getValue(e);null!=n&&(r<n||void 0===r&&n>=n)&&(r=n)}),r},extent:(e,t,n)=>{let r,s;return n.forEach(t=>{const n=t.getValue(e);null!=n&&(void 0===r?n>=n&&(r=s=n):(r>n&&(r=n),s<n&&(s=n)))}),[r,s]},mean:(e,t)=>{let n=0,r=0;if(t.forEach(t=>{let s=t.getValue(e);null!=s&&(s=+s)>=s&&(++n,r+=s)}),n)return r/n},median:(e,t)=>{if(!t.length)return;const n=t.map(t=>t.getValue(e));if(r=n,!Array.isArray(r)||!r.every(e=>"number"==typeof e))return;var r;if(1===n.length)return n[0];const s=Math.floor(n.length/2),i=n.sort((e,t)=>e-t);return n.length%2!=0?i[s]:(i[s-1]+i[s])/2},unique:(e,t)=>Array.from(new Set(t.map(t=>t.getValue(e))).values()),uniqueCount:(e,t)=>new Set(t.map(t=>t.getValue(e))).size,count:(e,t)=>t.length},Xge={getDefaultColumnDef:()=>({aggregatedCell:e=>{var t,n;return null!=(t=null==(n=e.getValue())||null==n.toString?void 0:n.toString())?t:null},aggregationFn:"auto"}),getInitialState:e=>({grouping:[],...e}),getDefaultOptions:e=>({onGroupingChange:_ge("grouping",e),groupedColumnMode:"reorder"}),createColumn:(e,t)=>{e.toggleGrouping=()=>{t.setGrouping(t=>null!=t&&t.includes(e.id)?t.filter(t=>t!==e.id):[...null!=t?t:[],e.id])},e.getCanGroup=()=>{var n,r;return(null==(n=e.columnDef.enableGrouping)||n)&&(null==(r=t.options.enableGrouping)||r)&&(!!e.accessorFn||!!e.columnDef.getGroupingValue)},e.getIsGrouped=()=>{var n;return null==(n=t.getState().grouping)?void 0:n.includes(e.id)},e.getGroupedIndex=()=>{var n;return null==(n=t.getState().grouping)?void 0:n.indexOf(e.id)},e.getToggleGroupingHandler=()=>{const t=e.getCanGroup();return()=>{t&&e.toggleGrouping()}},e.getAutoAggregationFn=()=>{const n=t.getCoreRowModel().flatRows[0],r=null==n?void 0:n.getValue(e.id);return"number"==typeof r?qge.sum:"[object Date]"===Object.prototype.toString.call(r)?qge.extent:void 0},e.getAggregationFn=()=>{var n,r;if(!e)throw new Error;return Sge(e.columnDef.aggregationFn)?e.columnDef.aggregationFn:"auto"===e.columnDef.aggregationFn?e.getAutoAggregationFn():null!=(n=null==(r=t.options.aggregationFns)?void 0:r[e.columnDef.aggregationFn])?n:qge[e.columnDef.aggregationFn]}},createTable:e=>{e.setGrouping=t=>null==e.options.onGroupingChange?void 0:e.options.onGroupingChange(t),e.resetGrouping=t=>{var n,r;e.setGrouping(t?[]:null!=(n=null==(r=e.initialState)?void 0:r.grouping)?n:[])},e.getPreGroupedRowModel=()=>e.getFilteredRowModel(),e.getGroupedRowModel=()=>(!e._getGroupedRowModel&&e.options.getGroupedRowModel&&(e._getGroupedRowModel=e.options.getGroupedRowModel(e)),e.options.manualGrouping||!e._getGroupedRowModel?e.getPreGroupedRowModel():e._getGroupedRowModel())},createRow:(e,t)=>{e.getIsGrouped=()=>!!e.groupingColumnId,e.getGroupingValue=n=>{if(e._groupingValuesCache.hasOwnProperty(n))return e._groupingValuesCache[n];const r=t.getColumn(n);return null!=r&&r.columnDef.getGroupingValue?(e._groupingValuesCache[n]=r.columnDef.getGroupingValue(e.original),e._groupingValuesCache[n]):e.getValue(n)},e._groupingValuesCache={}},createCell:(e,t,n,r)=>{e.getIsGrouped=()=>t.getIsGrouped()&&t.id===n.groupingColumnId,e.getIsPlaceholder=()=>!e.getIsGrouped()&&t.getIsGrouped(),e.getIsAggregated=()=>{var t;return!e.getIsGrouped()&&!e.getIsPlaceholder()&&!(null==(t=n.subRows)||!t.length)}}};const Kge={getInitialState:e=>({columnOrder:[],...e}),getDefaultOptions:e=>({onColumnOrderChange:_ge("columnOrder",e)}),createColumn:(e,t)=>{e.getIndex=Mge(e=>[nxe(t,e)],t=>t.findIndex(t=>t.id===e.id),Cge(t.options,"debugColumns")),e.getIsFirstColumn=n=>{var r;return(null==(r=nxe(t,n)[0])?void 0:r.id)===e.id},e.getIsLastColumn=n=>{var r;const s=nxe(t,n);return(null==(r=s[s.length-1])?void 0:r.id)===e.id}},createTable:e=>{e.setColumnOrder=t=>null==e.options.onColumnOrderChange?void 0:e.options.onColumnOrderChange(t),e.resetColumnOrder=t=>{var n;e.setColumnOrder(t?[]:null!=(n=e.initialState.columnOrder)?n:[])},e._getOrderColumnsFn=Mge(()=>[e.getState().columnOrder,e.getState().grouping,e.options.groupedColumnMode],(e,t,n)=>r=>{let s=[];if(null!=e&&e.length){const t=[...e],n=[...r];for(;n.length&&t.length;){const e=t.shift(),r=n.findIndex(t=>t.id===e);r>-1&&s.push(n.splice(r,1)[0])}s=[...s,...n]}else s=r;return function(e,t,n){if(null==t||!t.length||!n)return e;const r=e.filter(e=>!t.includes(e.id));return"remove"===n?r:[...t.map(t=>e.find(e=>e.id===t)).filter(Boolean),...r]}(s,t,n)},Cge(e.options,"debugTable"))}},Yge={getInitialState:e=>({columnPinning:{left:[],right:[]},...e}),getDefaultOptions:e=>({onColumnPinningChange:_ge("columnPinning",e)}),createColumn:(e,t)=>{e.pin=n=>{const r=e.getLeafColumns().map(e=>e.id).filter(Boolean);t.setColumnPinning(e=>{var t,s,i,a,o,l;return"right"===n?{left:(null!=(i=null==e?void 0:e.left)?i:[]).filter(e=>!(null!=r&&r.includes(e))),right:[...(null!=(a=null==e?void 0:e.right)?a:[]).filter(e=>!(null!=r&&r.includes(e))),...r]}:"left"===n?{left:[...(null!=(o=null==e?void 0:e.left)?o:[]).filter(e=>!(null!=r&&r.includes(e))),...r],right:(null!=(l=null==e?void 0:e.right)?l:[]).filter(e=>!(null!=r&&r.includes(e)))}:{left:(null!=(t=null==e?void 0:e.left)?t:[]).filter(e=>!(null!=r&&r.includes(e))),right:(null!=(s=null==e?void 0:e.right)?s:[]).filter(e=>!(null!=r&&r.includes(e)))}})},e.getCanPin=()=>e.getLeafColumns().some(e=>{var n,r,s;return(null==(n=e.columnDef.enablePinning)||n)&&(null==(r=null!=(s=t.options.enableColumnPinning)?s:t.options.enablePinning)||r)}),e.getIsPinned=()=>{const n=e.getLeafColumns().map(e=>e.id),{left:r,right:s}=t.getState().columnPinning,i=n.some(e=>null==r?void 0:r.includes(e)),a=n.some(e=>null==s?void 0:s.includes(e));return i?"left":!!a&&"right"},e.getPinnedIndex=()=>{var n,r;const s=e.getIsPinned();return s?null!=(n=null==(r=t.getState().columnPinning)||null==(r=r[s])?void 0:r.indexOf(e.id))?n:-1:0}},createRow:(e,t)=>{e.getCenterVisibleCells=Mge(()=>[e._getAllVisibleCells(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,t,n)=>{const r=[...null!=t?t:[],...null!=n?n:[]];return e.filter(e=>!r.includes(e.column.id))},Cge(t.options,"debugRows")),e.getLeftVisibleCells=Mge(()=>[e._getAllVisibleCells(),t.getState().columnPinning.left],(e,t)=>(null!=t?t:[]).map(t=>e.find(e=>e.column.id===t)).filter(Boolean).map(e=>({...e,position:"left"})),Cge(t.options,"debugRows")),e.getRightVisibleCells=Mge(()=>[e._getAllVisibleCells(),t.getState().columnPinning.right],(e,t)=>(null!=t?t:[]).map(t=>e.find(e=>e.column.id===t)).filter(Boolean).map(e=>({...e,position:"right"})),Cge(t.options,"debugRows"))},createTable:e=>{e.setColumnPinning=t=>null==e.options.onColumnPinningChange?void 0:e.options.onColumnPinningChange(t),e.resetColumnPinning=t=>{var n,r;return e.setColumnPinning(t?{left:[],right:[]}:null!=(n=null==(r=e.initialState)?void 0:r.columnPinning)?n:{left:[],right:[]})},e.getIsSomeColumnsPinned=t=>{var n;const r=e.getState().columnPinning;var s,i;return t?Boolean(null==(n=r[t])?void 0:n.length):Boolean((null==(s=r.left)?void 0:s.length)||(null==(i=r.right)?void 0:i.length))},e.getLeftLeafColumns=Mge(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left],(e,t)=>(null!=t?t:[]).map(t=>e.find(e=>e.id===t)).filter(Boolean),Cge(e.options,"debugColumns")),e.getRightLeafColumns=Mge(()=>[e.getAllLeafColumns(),e.getState().columnPinning.right],(e,t)=>(null!=t?t:[]).map(t=>e.find(e=>e.id===t)).filter(Boolean),Cge(e.options,"debugColumns")),e.getCenterLeafColumns=Mge(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(e,t,n)=>{const r=[...null!=t?t:[],...null!=n?n:[]];return e.filter(e=>!r.includes(e.id))},Cge(e.options,"debugColumns"))}};const Zge={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},Jge={getDefaultColumnDef:()=>Zge,getInitialState:e=>({columnSizing:{},columnSizingInfo:{startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]},...e}),getDefaultOptions:e=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:_ge("columnSizing",e),onColumnSizingInfoChange:_ge("columnSizingInfo",e)}),createColumn:(e,t)=>{e.getSize=()=>{var n,r,s;const i=t.getState().columnSizing[e.id];return Math.min(Math.max(null!=(n=e.columnDef.minSize)?n:Zge.minSize,null!=(r=null!=i?i:e.columnDef.size)?r:Zge.size),null!=(s=e.columnDef.maxSize)?s:Zge.maxSize)},e.getStart=Mge(e=>[e,nxe(t,e),t.getState().columnSizing],(t,n)=>n.slice(0,e.getIndex(t)).reduce((e,t)=>e+t.getSize(),0),Cge(t.options,"debugColumns")),e.getAfter=Mge(e=>[e,nxe(t,e),t.getState().columnSizing],(t,n)=>n.slice(e.getIndex(t)+1).reduce((e,t)=>e+t.getSize(),0),Cge(t.options,"debugColumns")),e.resetSize=()=>{t.setColumnSizing(t=>{let{[e.id]:n,...r}=t;return r})},e.getCanResize=()=>{var n,r;return(null==(n=e.columnDef.enableResizing)||n)&&(null==(r=t.options.enableColumnResizing)||r)},e.getIsResizing=()=>t.getState().columnSizingInfo.isResizingColumn===e.id},createHeader:(e,t)=>{e.getSize=()=>{let t=0;const n=e=>{var r;e.subHeaders.length?e.subHeaders.forEach(n):t+=null!=(r=e.column.getSize())?r:0};return n(e),t},e.getStart=()=>{if(e.index>0){const t=e.headerGroup.headers[e.index-1];return t.getStart()+t.getSize()}return 0},e.getResizeHandler=n=>{const r=t.getColumn(e.column.id),s=null==r?void 0:r.getCanResize();return i=>{if(!r||!s)return;if(null==i.persist||i.persist(),exe(i)&&i.touches&&i.touches.length>1)return;const a=e.getSize(),o=e?e.getLeafHeaders().map(e=>[e.column.id,e.column.getSize()]):[[r.id,r.getSize()]],l=exe(i)?Math.round(i.touches[0].clientX):i.clientX,c={},d=(e,n)=>{"number"==typeof n&&(t.setColumnSizingInfo(e=>{var r,s;const i="rtl"===t.options.columnResizeDirection?-1:1,a=(n-(null!=(r=null==e?void 0:e.startOffset)?r:0))*i,o=Math.max(a/(null!=(s=null==e?void 0:e.startSize)?s:0),-.999999);return e.columnSizingStart.forEach(e=>{let[t,n]=e;c[t]=Math.round(100*Math.max(n+n*o,0))/100}),{...e,deltaOffset:a,deltaPercentage:o}}),"onChange"!==t.options.columnResizeMode&&"end"!==e||t.setColumnSizing(e=>({...e,...c})))},u=e=>d("move",e),h=e=>{d("end",e),t.setColumnSizingInfo(e=>({...e,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},p=n||("undefined"!=typeof document?document:null);const m={moveHandler:e=>u(e.clientX),upHandler:e=>{null==p||p.removeEventListener("mousemove",m.moveHandler),null==p||p.removeEventListener("mouseup",m.upHandler),h(e.clientX)}},f={moveHandler:e=>(e.cancelable&&(e.preventDefault(),e.stopPropagation()),u(e.touches[0].clientX),!1),upHandler:e=>{var t;null==p||p.removeEventListener("touchmove",f.moveHandler),null==p||p.removeEventListener("touchend",f.upHandler),e.cancelable&&(e.preventDefault(),e.stopPropagation()),h(null==(t=e.touches[0])?void 0:t.clientX)}},g=!!function(){if("boolean"==typeof Qge)return Qge;let e=!1;try{const t={get passive(){return e=!0,!1}},n=()=>{};window.addEventListener("test",n,t),window.removeEventListener("test",n)}catch(PUe){e=!1}return Qge=e,Qge}()&&{passive:!1};exe(i)?(null==p||p.addEventListener("touchmove",f.moveHandler,g),null==p||p.addEventListener("touchend",f.upHandler,g)):(null==p||p.addEventListener("mousemove",m.moveHandler,g),null==p||p.addEventListener("mouseup",m.upHandler,g)),t.setColumnSizingInfo(e=>({...e,startOffset:l,startSize:a,deltaOffset:0,deltaPercentage:0,columnSizingStart:o,isResizingColumn:r.id}))}}},createTable:e=>{e.setColumnSizing=t=>null==e.options.onColumnSizingChange?void 0:e.options.onColumnSizingChange(t),e.setColumnSizingInfo=t=>null==e.options.onColumnSizingInfoChange?void 0:e.options.onColumnSizingInfoChange(t),e.resetColumnSizing=t=>{var n;e.setColumnSizing(t?{}:null!=(n=e.initialState.columnSizing)?n:{})},e.resetHeaderSizeInfo=t=>{var n;e.setColumnSizingInfo(t?{startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}:null!=(n=e.initialState.columnSizingInfo)?n:{startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]})},e.getTotalSize=()=>{var t,n;return null!=(t=null==(n=e.getHeaderGroups()[0])?void 0:n.headers.reduce((e,t)=>e+t.getSize(),0))?t:0},e.getLeftTotalSize=()=>{var t,n;return null!=(t=null==(n=e.getLeftHeaderGroups()[0])?void 0:n.headers.reduce((e,t)=>e+t.getSize(),0))?t:0},e.getCenterTotalSize=()=>{var t,n;return null!=(t=null==(n=e.getCenterHeaderGroups()[0])?void 0:n.headers.reduce((e,t)=>e+t.getSize(),0))?t:0},e.getRightTotalSize=()=>{var t,n;return null!=(t=null==(n=e.getRightHeaderGroups()[0])?void 0:n.headers.reduce((e,t)=>e+t.getSize(),0))?t:0}}};let Qge=null;function exe(e){return"touchstart"===e.type}const txe={getInitialState:e=>({columnVisibility:{},...e}),getDefaultOptions:e=>({onColumnVisibilityChange:_ge("columnVisibility",e)}),createColumn:(e,t)=>{e.toggleVisibility=n=>{e.getCanHide()&&t.setColumnVisibility(t=>({...t,[e.id]:null!=n?n:!e.getIsVisible()}))},e.getIsVisible=()=>{var n,r;const s=e.columns;return null==(n=s.length?s.some(e=>e.getIsVisible()):null==(r=t.getState().columnVisibility)?void 0:r[e.id])||n},e.getCanHide=()=>{var n,r;return(null==(n=e.columnDef.enableHiding)||n)&&(null==(r=t.options.enableHiding)||r)},e.getToggleVisibilityHandler=()=>t=>{null==e.toggleVisibility||e.toggleVisibility(t.target.checked)}},createRow:(e,t)=>{e._getAllVisibleCells=Mge(()=>[e.getAllCells(),t.getState().columnVisibility],e=>e.filter(e=>e.column.getIsVisible()),Cge(t.options,"debugRows")),e.getVisibleCells=Mge(()=>[e.getLeftVisibleCells(),e.getCenterVisibleCells(),e.getRightVisibleCells()],(e,t,n)=>[...e,...t,...n],Cge(t.options,"debugRows"))},createTable:e=>{const t=(t,n)=>Mge(()=>[n(),n().filter(e=>e.getIsVisible()).map(e=>e.id).join("_")],e=>e.filter(e=>null==e.getIsVisible?void 0:e.getIsVisible()),Cge(e.options,"debugColumns"));e.getVisibleFlatColumns=t(0,()=>e.getAllFlatColumns()),e.getVisibleLeafColumns=t(0,()=>e.getAllLeafColumns()),e.getLeftVisibleLeafColumns=t(0,()=>e.getLeftLeafColumns()),e.getRightVisibleLeafColumns=t(0,()=>e.getRightLeafColumns()),e.getCenterVisibleLeafColumns=t(0,()=>e.getCenterLeafColumns()),e.setColumnVisibility=t=>null==e.options.onColumnVisibilityChange?void 0:e.options.onColumnVisibilityChange(t),e.resetColumnVisibility=t=>{var n;e.setColumnVisibility(t?{}:null!=(n=e.initialState.columnVisibility)?n:{})},e.toggleAllColumnsVisible=t=>{var n;t=null!=(n=t)?n:!e.getIsAllColumnsVisible(),e.setColumnVisibility(e.getAllLeafColumns().reduce((e,n)=>({...e,[n.id]:t||!(null!=n.getCanHide&&n.getCanHide())}),{}))},e.getIsAllColumnsVisible=()=>!e.getAllLeafColumns().some(e=>!(null!=e.getIsVisible&&e.getIsVisible())),e.getIsSomeColumnsVisible=()=>e.getAllLeafColumns().some(e=>null==e.getIsVisible?void 0:e.getIsVisible()),e.getToggleAllColumnsVisibilityHandler=()=>t=>{var n;e.toggleAllColumnsVisible(null==(n=t.target)?void 0:n.checked)}}};function nxe(e,t){return t?"center"===t?e.getCenterVisibleLeafColumns():"left"===t?e.getLeftVisibleLeafColumns():e.getRightVisibleLeafColumns():e.getVisibleLeafColumns()}const rxe={getInitialState:e=>({...e,pagination:{pageIndex:0,pageSize:10,...null==e?void 0:e.pagination}}),getDefaultOptions:e=>({onPaginationChange:_ge("pagination",e)}),createTable:e=>{let t=!1,n=!1;e._autoResetPageIndex=()=>{var r,s;if(t){if(null!=(r=null!=(s=e.options.autoResetAll)?s:e.options.autoResetPageIndex)?r:!e.options.manualPagination){if(n)return;n=!0,e._queue(()=>{e.resetPageIndex(),n=!1})}}else e._queue(()=>{t=!0})},e.setPagination=t=>null==e.options.onPaginationChange?void 0:e.options.onPaginationChange(e=>Nge(t,e)),e.resetPagination=t=>{var n;e.setPagination(t?{pageIndex:0,pageSize:10}:null!=(n=e.initialState.pagination)?n:{pageIndex:0,pageSize:10})},e.setPageIndex=t=>{e.setPagination(n=>{let r=Nge(t,n.pageIndex);const s=void 0===e.options.pageCount||-1===e.options.pageCount?Number.MAX_SAFE_INTEGER:e.options.pageCount-1;return r=Math.max(0,Math.min(r,s)),{...n,pageIndex:r}})},e.resetPageIndex=t=>{var n,r;e.setPageIndex(t?0:null!=(n=null==(r=e.initialState)||null==(r=r.pagination)?void 0:r.pageIndex)?n:0)},e.resetPageSize=t=>{var n,r;e.setPageSize(t?10:null!=(n=null==(r=e.initialState)||null==(r=r.pagination)?void 0:r.pageSize)?n:10)},e.setPageSize=t=>{e.setPagination(e=>{const n=Math.max(1,Nge(t,e.pageSize)),r=e.pageSize*e.pageIndex,s=Math.floor(r/n);return{...e,pageIndex:s,pageSize:n}})},e.setPageCount=t=>e.setPagination(n=>{var r;let s=Nge(t,null!=(r=e.options.pageCount)?r:-1);return"number"==typeof s&&(s=Math.max(-1,s)),{...n,pageCount:s}}),e.getPageOptions=Mge(()=>[e.getPageCount()],e=>{let t=[];return e&&e>0&&(t=[...new Array(e)].fill(null).map((e,t)=>t)),t},Cge(e.options,"debugTable")),e.getCanPreviousPage=()=>e.getState().pagination.pageIndex>0,e.getCanNextPage=()=>{const{pageIndex:t}=e.getState().pagination,n=e.getPageCount();return-1===n||0!==n&&t<n-1},e.previousPage=()=>e.setPageIndex(e=>e-1),e.nextPage=()=>e.setPageIndex(e=>e+1),e.firstPage=()=>e.setPageIndex(0),e.lastPage=()=>e.setPageIndex(e.getPageCount()-1),e.getPrePaginationRowModel=()=>e.getExpandedRowModel(),e.getPaginationRowModel=()=>(!e._getPaginationRowModel&&e.options.getPaginationRowModel&&(e._getPaginationRowModel=e.options.getPaginationRowModel(e)),e.options.manualPagination||!e._getPaginationRowModel?e.getPrePaginationRowModel():e._getPaginationRowModel()),e.getPageCount=()=>{var t;return null!=(t=e.options.pageCount)?t:Math.ceil(e.getRowCount()/e.getState().pagination.pageSize)},e.getRowCount=()=>{var t;return null!=(t=e.options.rowCount)?t:e.getPrePaginationRowModel().rows.length}}},sxe={getInitialState:e=>({rowSelection:{},...e}),getDefaultOptions:e=>({onRowSelectionChange:_ge("rowSelection",e),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:e=>{e.setRowSelection=t=>null==e.options.onRowSelectionChange?void 0:e.options.onRowSelectionChange(t),e.resetRowSelection=t=>{var n;return e.setRowSelection(t?{}:null!=(n=e.initialState.rowSelection)?n:{})},e.toggleAllRowsSelected=t=>{e.setRowSelection(n=>{t=void 0!==t?t:!e.getIsAllRowsSelected();const r={...n},s=e.getPreGroupedRowModel().flatRows;return t?s.forEach(e=>{e.getCanSelect()&&(r[e.id]=!0)}):s.forEach(e=>{delete r[e.id]}),r})},e.toggleAllPageRowsSelected=t=>e.setRowSelection(n=>{const r=void 0!==t?t:!e.getIsAllPageRowsSelected(),s={...n};return e.getRowModel().rows.forEach(t=>{ixe(s,t.id,r,!0,e)}),s}),e.getPreSelectedRowModel=()=>e.getCoreRowModel(),e.getSelectedRowModel=Mge(()=>[e.getState().rowSelection,e.getCoreRowModel()],(t,n)=>Object.keys(t).length?axe(e,n):{rows:[],flatRows:[],rowsById:{}},Cge(e.options,"debugTable")),e.getFilteredSelectedRowModel=Mge(()=>[e.getState().rowSelection,e.getFilteredRowModel()],(t,n)=>Object.keys(t).length?axe(e,n):{rows:[],flatRows:[],rowsById:{}},Cge(e.options,"debugTable")),e.getGroupedSelectedRowModel=Mge(()=>[e.getState().rowSelection,e.getSortedRowModel()],(t,n)=>Object.keys(t).length?axe(e,n):{rows:[],flatRows:[],rowsById:{}},Cge(e.options,"debugTable")),e.getIsAllRowsSelected=()=>{const t=e.getFilteredRowModel().flatRows,{rowSelection:n}=e.getState();let r=Boolean(t.length&&Object.keys(n).length);return r&&t.some(e=>e.getCanSelect()&&!n[e.id])&&(r=!1),r},e.getIsAllPageRowsSelected=()=>{const t=e.getPaginationRowModel().flatRows.filter(e=>e.getCanSelect()),{rowSelection:n}=e.getState();let r=!!t.length;return r&&t.some(e=>!n[e.id])&&(r=!1),r},e.getIsSomeRowsSelected=()=>{var t;const n=Object.keys(null!=(t=e.getState().rowSelection)?t:{}).length;return n>0&&n<e.getFilteredRowModel().flatRows.length},e.getIsSomePageRowsSelected=()=>{const t=e.getPaginationRowModel().flatRows;return!e.getIsAllPageRowsSelected()&&t.filter(e=>e.getCanSelect()).some(e=>e.getIsSelected()||e.getIsSomeSelected())},e.getToggleAllRowsSelectedHandler=()=>t=>{e.toggleAllRowsSelected(t.target.checked)},e.getToggleAllPageRowsSelectedHandler=()=>t=>{e.toggleAllPageRowsSelected(t.target.checked)}},createRow:(e,t)=>{e.toggleSelected=(n,r)=>{const s=e.getIsSelected();t.setRowSelection(i=>{var a;if(n=void 0!==n?n:!s,e.getCanSelect()&&s===n)return i;const o={...i};return ixe(o,e.id,n,null==(a=null==r?void 0:r.selectChildren)||a,t),o})},e.getIsSelected=()=>{const{rowSelection:n}=t.getState();return oxe(e,n)},e.getIsSomeSelected=()=>{const{rowSelection:n}=t.getState();return"some"===lxe(e,n)},e.getIsAllSubRowsSelected=()=>{const{rowSelection:n}=t.getState();return"all"===lxe(e,n)},e.getCanSelect=()=>{var n;return"function"==typeof t.options.enableRowSelection?t.options.enableRowSelection(e):null==(n=t.options.enableRowSelection)||n},e.getCanSelectSubRows=()=>{var n;return"function"==typeof t.options.enableSubRowSelection?t.options.enableSubRowSelection(e):null==(n=t.options.enableSubRowSelection)||n},e.getCanMultiSelect=()=>{var n;return"function"==typeof t.options.enableMultiRowSelection?t.options.enableMultiRowSelection(e):null==(n=t.options.enableMultiRowSelection)||n},e.getToggleSelectedHandler=()=>{const t=e.getCanSelect();return n=>{var r;t&&e.toggleSelected(null==(r=n.target)?void 0:r.checked)}}}},ixe=(e,t,n,r,s)=>{var i;const a=s.getRow(t,!0);n?(a.getCanMultiSelect()||Object.keys(e).forEach(t=>delete e[t]),a.getCanSelect()&&(e[t]=!0)):delete e[t],r&&null!=(i=a.subRows)&&i.length&&a.getCanSelectSubRows()&&a.subRows.forEach(t=>ixe(e,t.id,n,r,s))};function axe(e,t){const n=e.getState().rowSelection,r=[],s={},i=function(e,t){return e.map(e=>{var t;const a=oxe(e,n);if(a&&(r.push(e),s[e.id]=e),null!=(t=e.subRows)&&t.length&&(e={...e,subRows:i(e.subRows)}),a)return e}).filter(Boolean)};return{rows:i(t.rows),flatRows:r,rowsById:s}}function oxe(e,t){var n;return null!=(n=t[e.id])&&n}function lxe(e,t,n){var r;if(null==(r=e.subRows)||!r.length)return!1;let s=!0,i=!1;return e.subRows.forEach(e=>{if((!i||s)&&(e.getCanSelect()&&(oxe(e,t)?i=!0:s=!1),e.subRows&&e.subRows.length)){const n=lxe(e,t);"all"===n?i=!0:"some"===n?(i=!0,s=!1):s=!1}}),s?"all":!!i&&"some"}const cxe=/([0-9]+)/gm;function dxe(e,t){return e===t?0:e>t?1:-1}function uxe(e){return"number"==typeof e?isNaN(e)||e===1/0||e===-1/0?"":String(e):"string"==typeof e?e:""}function hxe(e,t){const n=e.split(cxe).filter(Boolean),r=t.split(cxe).filter(Boolean);for(;n.length&&r.length;){const e=n.shift(),t=r.shift(),s=parseInt(e,10),i=parseInt(t,10),a=[s,i].sort();if(isNaN(a[0])){if(e>t)return 1;if(t>e)return-1}else{if(isNaN(a[1]))return isNaN(s)?-1:1;if(s>i)return 1;if(i>s)return-1}}return n.length-r.length}const pxe={alphanumeric:(e,t,n)=>hxe(uxe(e.getValue(n)).toLowerCase(),uxe(t.getValue(n)).toLowerCase()),alphanumericCaseSensitive:(e,t,n)=>hxe(uxe(e.getValue(n)),uxe(t.getValue(n))),text:(e,t,n)=>dxe(uxe(e.getValue(n)).toLowerCase(),uxe(t.getValue(n)).toLowerCase()),textCaseSensitive:(e,t,n)=>dxe(uxe(e.getValue(n)),uxe(t.getValue(n))),datetime:(e,t,n)=>{const r=e.getValue(n),s=t.getValue(n);return r>s?1:r<s?-1:0},basic:(e,t,n)=>dxe(e.getValue(n),t.getValue(n))},mxe=[Age,txe,Kge,Yge,Oge,$ge,{createTable:e=>{e._getGlobalFacetedRowModel=e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,"__global__"),e.getGlobalFacetedRowModel=()=>e.options.manualFiltering||!e._getGlobalFacetedRowModel?e.getPreFilteredRowModel():e._getGlobalFacetedRowModel(),e._getGlobalFacetedUniqueValues=e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,"__global__"),e.getGlobalFacetedUniqueValues=()=>e._getGlobalFacetedUniqueValues?e._getGlobalFacetedUniqueValues():new Map,e._getGlobalFacetedMinMaxValues=e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,"__global__"),e.getGlobalFacetedMinMaxValues=()=>{if(e._getGlobalFacetedMinMaxValues)return e._getGlobalFacetedMinMaxValues()}}},{getInitialState:e=>({globalFilter:void 0,...e}),getDefaultOptions:e=>({onGlobalFilterChange:_ge("globalFilter",e),globalFilterFn:"auto",getColumnCanGlobalFilter:t=>{var n;const r=null==(n=e.getCoreRowModel().flatRows[0])||null==(n=n._getAllCellsByColumnId()[t.id])?void 0:n.getValue();return"string"==typeof r||"number"==typeof r}}),createColumn:(e,t)=>{e.getCanGlobalFilter=()=>{var n,r,s,i;return(null==(n=e.columnDef.enableGlobalFilter)||n)&&(null==(r=t.options.enableGlobalFilter)||r)&&(null==(s=t.options.enableFilters)||s)&&(null==(i=null==t.options.getColumnCanGlobalFilter?void 0:t.options.getColumnCanGlobalFilter(e))||i)&&!!e.accessorFn}},createTable:e=>{e.getGlobalAutoFilterFn=()=>Hge.includesString,e.getGlobalFilterFn=()=>{var t,n;const{globalFilterFn:r}=e.options;return Sge(r)?r:"auto"===r?e.getGlobalAutoFilterFn():null!=(t=null==(n=e.options.filterFns)?void 0:n[r])?t:Hge[r]},e.setGlobalFilter=t=>{null==e.options.onGlobalFilterChange||e.options.onGlobalFilterChange(t)},e.resetGlobalFilter=t=>{e.setGlobalFilter(t?void 0:e.initialState.globalFilter)}}},{getInitialState:e=>({sorting:[],...e}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:e=>({onSortingChange:_ge("sorting",e),isMultiSortEvent:e=>e.shiftKey}),createColumn:(e,t)=>{e.getAutoSortingFn=()=>{const n=t.getFilteredRowModel().flatRows.slice(10);let r=!1;for(const t of n){const n=null==t?void 0:t.getValue(e.id);if("[object Date]"===Object.prototype.toString.call(n))return pxe.datetime;if("string"==typeof n&&(r=!0,n.split(cxe).length>1))return pxe.alphanumeric}return r?pxe.text:pxe.basic},e.getAutoSortDir=()=>{const n=t.getFilteredRowModel().flatRows[0];return"string"==typeof(null==n?void 0:n.getValue(e.id))?"asc":"desc"},e.getSortingFn=()=>{var n,r;if(!e)throw new Error;return Sge(e.columnDef.sortingFn)?e.columnDef.sortingFn:"auto"===e.columnDef.sortingFn?e.getAutoSortingFn():null!=(n=null==(r=t.options.sortingFns)?void 0:r[e.columnDef.sortingFn])?n:pxe[e.columnDef.sortingFn]},e.toggleSorting=(n,r)=>{const s=e.getNextSortingOrder(),i=null!=n;t.setSorting(a=>{const o=null==a?void 0:a.find(t=>t.id===e.id),l=null==a?void 0:a.findIndex(t=>t.id===e.id);let c,d=[],u=i?n:"desc"===s;var h;(c=null!=a&&a.length&&e.getCanMultiSort()&&r?o?"toggle":"add":null!=a&&a.length&&l!==a.length-1?"replace":o?"toggle":"replace","toggle"===c&&(i||s||(c="remove")),"add"===c)?(d=[...a,{id:e.id,desc:u}],d.splice(0,d.length-(null!=(h=t.options.maxMultiSortColCount)?h:Number.MAX_SAFE_INTEGER))):d="toggle"===c?a.map(t=>t.id===e.id?{...t,desc:u}:t):"remove"===c?a.filter(t=>t.id!==e.id):[{id:e.id,desc:u}];return d})},e.getFirstSortDir=()=>{var n,r;return(null!=(n=null!=(r=e.columnDef.sortDescFirst)?r:t.options.sortDescFirst)?n:"desc"===e.getAutoSortDir())?"desc":"asc"},e.getNextSortingOrder=n=>{var r,s;const i=e.getFirstSortDir(),a=e.getIsSorted();return a?!!(a===i||null!=(r=t.options.enableSortingRemoval)&&!r||n&&null!=(s=t.options.enableMultiRemove)&&!s)&&("desc"===a?"asc":"desc"):i},e.getCanSort=()=>{var n,r;return(null==(n=e.columnDef.enableSorting)||n)&&(null==(r=t.options.enableSorting)||r)&&!!e.accessorFn},e.getCanMultiSort=()=>{var n,r;return null!=(n=null!=(r=e.columnDef.enableMultiSort)?r:t.options.enableMultiSort)?n:!!e.accessorFn},e.getIsSorted=()=>{var n;const r=null==(n=t.getState().sorting)?void 0:n.find(t=>t.id===e.id);return!!r&&(r.desc?"desc":"asc")},e.getSortIndex=()=>{var n,r;return null!=(n=null==(r=t.getState().sorting)?void 0:r.findIndex(t=>t.id===e.id))?n:-1},e.clearSorting=()=>{t.setSorting(t=>null!=t&&t.length?t.filter(t=>t.id!==e.id):[])},e.getToggleSortingHandler=()=>{const n=e.getCanSort();return r=>{n&&(null==r.persist||r.persist(),null==e.toggleSorting||e.toggleSorting(void 0,!!e.getCanMultiSort()&&(null==t.options.isMultiSortEvent?void 0:t.options.isMultiSortEvent(r))))}}},createTable:e=>{e.setSorting=t=>null==e.options.onSortingChange?void 0:e.options.onSortingChange(t),e.resetSorting=t=>{var n,r;e.setSorting(t?[]:null!=(n=null==(r=e.initialState)?void 0:r.sorting)?n:[])},e.getPreSortedRowModel=()=>e.getGroupedRowModel(),e.getSortedRowModel=()=>(!e._getSortedRowModel&&e.options.getSortedRowModel&&(e._getSortedRowModel=e.options.getSortedRowModel(e)),e.options.manualSorting||!e._getSortedRowModel?e.getPreSortedRowModel():e._getSortedRowModel())}},Xge,{getInitialState:e=>({expanded:{},...e}),getDefaultOptions:e=>({onExpandedChange:_ge("expanded",e),paginateExpandedRows:!0}),createTable:e=>{let t=!1,n=!1;e._autoResetExpanded=()=>{var r,s;if(t){if(null!=(r=null!=(s=e.options.autoResetAll)?s:e.options.autoResetExpanded)?r:!e.options.manualExpanding){if(n)return;n=!0,e._queue(()=>{e.resetExpanded(),n=!1})}}else e._queue(()=>{t=!0})},e.setExpanded=t=>null==e.options.onExpandedChange?void 0:e.options.onExpandedChange(t),e.toggleAllRowsExpanded=t=>{(null!=t?t:!e.getIsAllRowsExpanded())?e.setExpanded(!0):e.setExpanded({})},e.resetExpanded=t=>{var n,r;e.setExpanded(t?{}:null!=(n=null==(r=e.initialState)?void 0:r.expanded)?n:{})},e.getCanSomeRowsExpand=()=>e.getPrePaginationRowModel().flatRows.some(e=>e.getCanExpand()),e.getToggleAllRowsExpandedHandler=()=>t=>{null==t.persist||t.persist(),e.toggleAllRowsExpanded()},e.getIsSomeRowsExpanded=()=>{const t=e.getState().expanded;return!0===t||Object.values(t).some(Boolean)},e.getIsAllRowsExpanded=()=>{const t=e.getState().expanded;return"boolean"==typeof t?!0===t:!!Object.keys(t).length&&!e.getRowModel().flatRows.some(e=>!e.getIsExpanded())},e.getExpandedDepth=()=>{let t=0;return(!0===e.getState().expanded?Object.keys(e.getRowModel().rowsById):Object.keys(e.getState().expanded)).forEach(e=>{const n=e.split(".");t=Math.max(t,n.length)}),t},e.getPreExpandedRowModel=()=>e.getSortedRowModel(),e.getExpandedRowModel=()=>(!e._getExpandedRowModel&&e.options.getExpandedRowModel&&(e._getExpandedRowModel=e.options.getExpandedRowModel(e)),e.options.manualExpanding||!e._getExpandedRowModel?e.getPreExpandedRowModel():e._getExpandedRowModel())},createRow:(e,t)=>{e.toggleExpanded=n=>{t.setExpanded(r=>{var s;const i=!0===r||!(null==r||!r[e.id]);let a={};if(!0===r?Object.keys(t.getRowModel().rowsById).forEach(e=>{a[e]=!0}):a=r,n=null!=(s=n)?s:!i,!i&&n)return{...a,[e.id]:!0};if(i&&!n){const{[e.id]:t,...n}=a;return n}return r})},e.getIsExpanded=()=>{var n;const r=t.getState().expanded;return!!(null!=(n=null==t.options.getIsRowExpanded?void 0:t.options.getIsRowExpanded(e))?n:!0===r||(null==r?void 0:r[e.id]))},e.getCanExpand=()=>{var n,r,s;return null!=(n=null==t.options.getRowCanExpand?void 0:t.options.getRowCanExpand(e))?n:(null==(r=t.options.enableExpanding)||r)&&!(null==(s=e.subRows)||!s.length)},e.getIsAllParentsExpanded=()=>{let n=!0,r=e;for(;n&&r.parentId;)r=t.getRow(r.parentId,!0),n=r.getIsExpanded();return n},e.getToggleExpandedHandler=()=>{const t=e.getCanExpand();return()=>{t&&e.toggleExpanded()}}}},rxe,{getInitialState:e=>({rowPinning:{top:[],bottom:[]},...e}),getDefaultOptions:e=>({onRowPinningChange:_ge("rowPinning",e)}),createRow:(e,t)=>{e.pin=(n,r,s)=>{const i=r?e.getLeafRows().map(e=>{let{id:t}=e;return t}):[],a=s?e.getParentRows().map(e=>{let{id:t}=e;return t}):[],o=new Set([...a,e.id,...i]);t.setRowPinning(e=>{var t,r,s,i,a,l;return"bottom"===n?{top:(null!=(s=null==e?void 0:e.top)?s:[]).filter(e=>!(null!=o&&o.has(e))),bottom:[...(null!=(i=null==e?void 0:e.bottom)?i:[]).filter(e=>!(null!=o&&o.has(e))),...Array.from(o)]}:"top"===n?{top:[...(null!=(a=null==e?void 0:e.top)?a:[]).filter(e=>!(null!=o&&o.has(e))),...Array.from(o)],bottom:(null!=(l=null==e?void 0:e.bottom)?l:[]).filter(e=>!(null!=o&&o.has(e)))}:{top:(null!=(t=null==e?void 0:e.top)?t:[]).filter(e=>!(null!=o&&o.has(e))),bottom:(null!=(r=null==e?void 0:e.bottom)?r:[]).filter(e=>!(null!=o&&o.has(e)))}})},e.getCanPin=()=>{var n;const{enableRowPinning:r,enablePinning:s}=t.options;return"function"==typeof r?r(e):null==(n=null!=r?r:s)||n},e.getIsPinned=()=>{const n=[e.id],{top:r,bottom:s}=t.getState().rowPinning,i=n.some(e=>null==r?void 0:r.includes(e)),a=n.some(e=>null==s?void 0:s.includes(e));return i?"top":!!a&&"bottom"},e.getPinnedIndex=()=>{var n,r;const s=e.getIsPinned();if(!s)return-1;const i=null==(n="top"===s?t.getTopRows():t.getBottomRows())?void 0:n.map(e=>{let{id:t}=e;return t});return null!=(r=null==i?void 0:i.indexOf(e.id))?r:-1}},createTable:e=>{e.setRowPinning=t=>null==e.options.onRowPinningChange?void 0:e.options.onRowPinningChange(t),e.resetRowPinning=t=>{var n,r;return e.setRowPinning(t?{top:[],bottom:[]}:null!=(n=null==(r=e.initialState)?void 0:r.rowPinning)?n:{top:[],bottom:[]})},e.getIsSomeRowsPinned=t=>{var n;const r=e.getState().rowPinning;var s,i;return t?Boolean(null==(n=r[t])?void 0:n.length):Boolean((null==(s=r.top)?void 0:s.length)||(null==(i=r.bottom)?void 0:i.length))},e._getPinnedRows=(t,n,r)=>{var s;return(null==(s=e.options.keepPinnedRows)||s?(null!=n?n:[]).map(t=>{const n=e.getRow(t,!0);return n.getIsAllParentsExpanded()?n:null}):(null!=n?n:[]).map(e=>t.find(t=>t.id===e))).filter(Boolean).map(e=>({...e,position:r}))},e.getTopRows=Mge(()=>[e.getRowModel().rows,e.getState().rowPinning.top],(t,n)=>e._getPinnedRows(t,n,"top"),Cge(e.options,"debugRows")),e.getBottomRows=Mge(()=>[e.getRowModel().rows,e.getState().rowPinning.bottom],(t,n)=>e._getPinnedRows(t,n,"bottom"),Cge(e.options,"debugRows")),e.getCenterRows=Mge(()=>[e.getRowModel().rows,e.getState().rowPinning.top,e.getState().rowPinning.bottom],(e,t,n)=>{const r=new Set([...null!=t?t:[],...null!=n?n:[]]);return e.filter(e=>!r.has(e.id))},Cge(e.options,"debugRows"))}},sxe,Jge];function fxe(e){var t,n;const r=[...mxe,...null!=(t=e._features)?t:[]];let s={_features:r};const i=s._features.reduce((e,t)=>Object.assign(e,null==t.getDefaultOptions?void 0:t.getDefaultOptions(s)),{});let a={...null!=(n=e.initialState)?n:{}};s._features.forEach(e=>{var t;a=null!=(t=null==e.getInitialState?void 0:e.getInitialState(a))?t:a});const o=[];let l=!1;const c={_features:r,options:{...i,...e},initialState:a,_queue:e=>{o.push(e),l||(l=!0,Promise.resolve().then(()=>{for(;o.length;)o.shift()();l=!1}).catch(e=>setTimeout(()=>{throw e})))},reset:()=>{s.setState(s.initialState)},setOptions:e=>{const t=Nge(e,s.options);var n;s.options=(n=t,s.options.mergeOptions?s.options.mergeOptions(i,n):{...i,...n})},getState:()=>s.options.state,setState:e=>{null==s.options.onStateChange||s.options.onStateChange(e)},_getRowId:(e,t,n)=>{var r;return null!=(r=null==s.options.getRowId?void 0:s.options.getRowId(e,t,n))?r:`${n?[n.id,t].join("."):t}`},getCoreRowModel:()=>(s._getCoreRowModel||(s._getCoreRowModel=s.options.getCoreRowModel(s)),s._getCoreRowModel()),getRowModel:()=>s.getPaginationRowModel(),getRow:(e,t)=>{let n=(t?s.getPrePaginationRowModel():s.getRowModel()).rowsById[e];if(!n&&(n=s.getCoreRowModel().rowsById[e],!n))throw new Error;return n},_getDefaultColumnDef:Mge(()=>[s.options.defaultColumn],e=>{var t;return e=null!=(t=e)?t:{},{header:e=>{const t=e.header.column.columnDef;return t.accessorKey?t.accessorKey:t.accessorFn?t.id:null},cell:e=>{var t,n;return null!=(t=null==(n=e.renderValue())||null==n.toString?void 0:n.toString())?t:null},...s._features.reduce((e,t)=>Object.assign(e,null==t.getDefaultColumnDef?void 0:t.getDefaultColumnDef()),{}),...e}},Cge(e,"debugColumns")),_getColumnDefs:()=>s.options.columns,getAllColumns:Mge(()=>[s._getColumnDefs()],e=>{const t=function(e,n,r){return void 0===r&&(r=0),e.map(e=>{const i=function(e,t,n,r){var s,i;const a={...e._getDefaultColumnDef(),...t},o=a.accessorKey;let l,c=null!=(s=null!=(i=a.id)?i:o?"function"==typeof String.prototype.replaceAll?o.replaceAll(".","_"):o.replace(/\./g,"_"):void 0)?s:"string"==typeof a.header?a.header:void 0;if(a.accessorFn?l=a.accessorFn:o&&(l=o.includes(".")?e=>{let t=e;for(const r of o.split(".")){var n;t=null==(n=t)?void 0:n[r]}return t}:e=>e[a.accessorKey]),!c)throw new Error;let d={id:`${String(c)}`,accessorFn:l,parent:r,depth:n,columnDef:a,columns:[],getFlatColumns:Mge(()=>[!0],()=>{var e;return[d,...null==(e=d.columns)?void 0:e.flatMap(e=>e.getFlatColumns())]},Cge(e.options,"debugColumns")),getLeafColumns:Mge(()=>[e._getOrderColumnsFn()],e=>{var t;return null!=(t=d.columns)&&t.length?e(d.columns.flatMap(e=>e.getLeafColumns())):[d]},Cge(e.options,"debugColumns"))};for(const u of e._features)null==u.createColumn||u.createColumn(d,e);return d}(s,e,r,n),a=e;return i.columns=a.columns?t(a.columns,i,r+1):[],i})};return t(e)},Cge(e,"debugColumns")),getAllFlatColumns:Mge(()=>[s.getAllColumns()],e=>e.flatMap(e=>e.getFlatColumns()),Cge(e,"debugColumns")),_getAllFlatColumnsById:Mge(()=>[s.getAllFlatColumns()],e=>e.reduce((e,t)=>(e[t.id]=t,e),{}),Cge(e,"debugColumns")),getAllLeafColumns:Mge(()=>[s.getAllColumns(),s._getOrderColumnsFn()],(e,t)=>t(e.flatMap(e=>e.getLeafColumns())),Cge(e,"debugColumns")),getColumn:e=>s._getAllFlatColumnsById()[e]};Object.assign(s,c);for(let d=0;d<s._features.length;d++){const e=s._features[d];null==e||null==e.createTable||e.createTable(s)}return s}function gxe(e,t,n){return n.options.filterFromLeafRows?function(e,t,n){var r;const s=[],i={},a=null!=(r=n.options.maxLeafRowFilterDepth)?r:100,o=function(e,r){void 0===r&&(r=0);const l=[];for(let d=0;d<e.length;d++){var c;let u=e[d];const h=Pge(n,u.id,u.original,u.index,u.depth,0,u.parentId);if(h.columnFilters=u.columnFilters,null!=(c=u.subRows)&&c.length&&r<a){if(h.subRows=o(u.subRows,r+1),u=h,t(u)&&!h.subRows.length){l.push(u),i[u.id]=u,s.push(u);continue}if(t(u)||h.subRows.length){l.push(u),i[u.id]=u,s.push(u);continue}}else u=h,t(u)&&(l.push(u),i[u.id]=u,s.push(u))}return l};return{rows:o(e),flatRows:s,rowsById:i}}(e,t,n):function(e,t,n){var r;const s=[],i={},a=null!=(r=n.options.maxLeafRowFilterDepth)?r:100,o=function(e,r){void 0===r&&(r=0);const l=[];for(let d=0;d<e.length;d++){let u=e[d];if(t(u)){var c;if(null!=(c=u.subRows)&&c.length&&r<a){const e=Pge(n,u.id,u.original,u.index,u.depth,0,u.parentId);e.subRows=o(u.subRows,r+1),u=e}l.push(u),s.push(u),i[u.id]=u}}return l};return{rows:o(e),flatRows:s,rowsById:i}}(e,t,n)}
/**
   * react-table
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */
function xxe(e,t){return e?function(e){return"function"==typeof e&&(()=>{const t=Object.getPrototypeOf(e);return t.prototype&&t.prototype.isReactComponent})()}(n=e)||"function"==typeof n||function(e){return"object"==typeof e&&"symbol"==typeof e.$$typeof&&["react.memo","react.forward_ref"].includes(e.$$typeof.description)}(n)?hn.createElement(e,t):e:null;var n}const vxe=hn.forwardRef(({className:e,...t},n)=>Ot.jsx("div",{className:"relative w-full overflow-auto",children:Ot.jsx("table",{ref:n,className:bn("w-full caption-bottom text-sm",e),...t})}));vxe.displayName="Table";const yxe=hn.forwardRef(({className:e,...t},n)=>Ot.jsx("thead",{ref:n,className:bn("[&_tr]:border-b",e),...t}));yxe.displayName="TableHeader";const bxe=hn.forwardRef(({className:e,...t},n)=>Ot.jsx("tbody",{ref:n,className:bn("[&_tr:last-child]:border-0",e),...t}));bxe.displayName="TableBody";hn.forwardRef(({className:e,...t},n)=>Ot.jsx("tfoot",{ref:n,className:bn("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t})).displayName="TableFooter";const wxe=hn.forwardRef(({className:e,...t},n)=>Ot.jsx("tr",{ref:n,className:bn("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));wxe.displayName="TableRow";const jxe=hn.forwardRef(({className:e,...t},n)=>Ot.jsx("th",{ref:n,className:bn("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));jxe.displayName="TableHead";const Nxe=hn.forwardRef(({className:e,...t},n)=>Ot.jsx("td",{ref:n,className:bn("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));Nxe.displayName="TableCell";function _xe({userId:e,open:t,onOpenChange:n}){const{data:r,isLoading:s}=za({queryKey:[`/api/admin/users/${e}/details`],enabled:t&&!!e});if(!r&&s)return Ot.jsx(yr,{open:t,onOpenChange:n,children:Ot.jsxs(jr,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[Ot.jsx(Nr,{children:Ot.jsx(_r,{children:"Loading User Details..."})}),Ot.jsxs("div",{className:"space-y-4",children:[Ot.jsx(er,{className:"h-32 w-full"}),Ot.jsx(er,{className:"h-64 w-full"})]})]})});if(!r)return null;const{user:i,businesses:a,orders:o,loyaltyAccount:l,loyaltyTransactions:c,referrals:d,stats:u}=r;return Ot.jsx(yr,{open:t,onOpenChange:n,children:Ot.jsxs(jr,{className:"max-w-5xl max-h-[90vh] overflow-y-auto",children:[Ot.jsxs(Nr,{children:[Ot.jsxs(_r,{className:"flex items-center gap-3",children:[Ot.jsxs("div",{className:"relative",children:[i.profileImageUrl?Ot.jsx("img",{src:i.profileImageUrl,alt:i.firstName||"User",className:"w-12 h-12 rounded-full object-cover"}):Ot.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-cyan-500 to-blue-500 flex items-center justify-center",children:Ot.jsx(Ii,{className:"h-6 w-6 text-white"})}),i.isAdmin&&Ot.jsx("div",{className:"absolute -top-1 -right-1 bg-yellow-500 rounded-full p-1",children:Ot.jsx(Wr,{className:"h-3 w-3 text-white"})})]}),Ot.jsxs("div",{children:[Ot.jsxs("div",{className:"text-xl font-bold",children:[i.firstName," ",i.lastName]}),Ot.jsx("div",{className:"text-sm text-muted-foreground font-normal",children:i.email})]})]}),Ot.jsx(ji,{children:"Complete user profile and activity"})]}),Ot.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mt-4",children:[Ot.jsx(Sn,{children:Ot.jsxs(Mn,{className:"pt-4",children:[Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsx(Zr,{className:"h-5 w-5 text-green-600"}),Ot.jsx("span",{className:"text-2xl font-bold",children:u.totalBusinesses})]}),Ot.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Businesses"})]})}),Ot.jsx(Sn,{children:Ot.jsxs(Mn,{className:"pt-4",children:[Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsx(Ir,{className:"h-5 w-5 text-blue-600"}),Ot.jsx("span",{className:"text-2xl font-bold",children:u.totalOrders})]}),Ot.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Orders"})]})}),Ot.jsx(Sn,{children:Ot.jsxs(Mn,{className:"pt-4",children:[Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsx(ar,{className:"h-5 w-5 text-yellow-600"}),Ot.jsxs("span",{className:"text-2xl font-bold",children:["$",u.totalSpent.toFixed(2)]})]}),Ot.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Spent"})]})}),Ot.jsx(Sn,{children:Ot.jsxs(Mn,{className:"pt-4",children:[Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsx(sr,{className:"h-5 w-5 text-purple-600"}),Ot.jsx("span",{className:"text-2xl font-bold",children:u.loyaltyPoints})]}),Ot.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Points"})]})}),Ot.jsx(Sn,{children:Ot.jsxs(Mn,{className:"pt-4",children:[Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsx(On,{className:"h-5 w-5 text-pink-600"}),Ot.jsx("span",{className:"text-2xl font-bold",children:u.referralCount})]}),Ot.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Referrals"})]})})]}),Ot.jsxs(qs,{defaultValue:"overview",className:"mt-6",children:[Ot.jsxs(Xs,{className:"grid w-full grid-cols-5",children:[Ot.jsx(Ks,{value:"overview",children:"Overview"}),Ot.jsx(Ks,{value:"businesses",children:"Businesses"}),Ot.jsx(Ks,{value:"orders",children:"Orders"}),Ot.jsx(Ks,{value:"loyalty",children:"Loyalty"}),Ot.jsx(Ks,{value:"referrals",children:"Referrals"})]}),Ot.jsxs(Ys,{value:"overview",className:"space-y-4",children:[Ot.jsxs(Sn,{children:[Ot.jsx(Lr,{children:Ot.jsxs(zr,{className:"flex items-center gap-2",children:[Ot.jsx(Ii,{className:"h-5 w-5"}),"Account Information"]})}),Ot.jsx(Mn,{className:"space-y-3",children:Ot.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-sm text-muted-foreground",children:"Email"}),Ot.jsxs("p",{className:"font-medium flex items-center gap-2",children:[Ot.jsx(Jr,{className:"h-4 w-4"}),i.email]})]}),Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-sm text-muted-foreground",children:"Role"}),Ot.jsx(Tn,{variant:i.isAdmin?"default":"secondary",children:i.isAdmin?"Admin":"User"})]}),Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-sm text-muted-foreground",children:"Joined"}),Ot.jsxs("p",{className:"font-medium flex items-center gap-2",children:[Ot.jsx(Qn,{className:"h-4 w-4"}),i.createdAt?new Date(i.createdAt).toLocaleDateString():"N/A"]})]}),Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-sm text-muted-foreground",children:"Last Seen"}),Ot.jsx("p",{className:"font-medium",children:i.lastSeenAt?new Date(i.lastSeenAt).toLocaleString():"Never"})]})]})})]}),l&&Ot.jsxs(Sn,{children:[Ot.jsx(Lr,{children:Ot.jsxs(zr,{className:"flex items-center gap-2",children:[Ot.jsx(sr,{className:"h-5 w-5"}),"Loyalty Status"]})}),Ot.jsxs(Mn,{children:[Ot.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-sm text-muted-foreground",children:"Current Tier"}),Ot.jsx("p",{className:"text-2xl font-bold",children:l.tierName})]}),Ot.jsxs(Tn,{variant:"outline",className:"text-lg px-4 py-2",children:["Level ",l.tierLevel]})]}),Ot.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-sm text-muted-foreground",children:"Current Points"}),Ot.jsx("p",{className:"text-xl font-bold text-green-600",children:l.currentPoints})]}),Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-sm text-muted-foreground",children:"Lifetime Points"}),Ot.jsx("p",{className:"text-xl font-bold",children:l.lifetimePoints})]})]})]})]})]}),Ot.jsx(Ys,{value:"businesses",className:"space-y-3",children:0===a.length?Ot.jsx(Sn,{children:Ot.jsx(Mn,{className:"py-8 text-center text-muted-foreground",children:"No businesses registered"})}):a.map(e=>Ot.jsx(Sn,{children:Ot.jsx(Mn,{className:"pt-4",children:Ot.jsxs("div",{className:"flex items-start gap-4",children:[e.logoUrl&&Ot.jsx("img",{src:e.logoUrl,alt:e.name,className:"w-12 h-12 rounded-lg object-cover"}),Ot.jsxs("div",{className:"flex-1",children:[Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx("h4",{className:"font-semibold",children:e.name}),e.isVerified&&Ot.jsx(Tn,{variant:"default",className:"text-xs",children:"Verified"})]}),Ot.jsx("p",{className:"text-sm text-muted-foreground",children:e.category}),Ot.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:e.location})]})]})})},e.id))}),Ot.jsx(Ys,{value:"orders",className:"space-y-3",children:0===o.length?Ot.jsx(Sn,{children:Ot.jsx(Mn,{className:"py-8 text-center text-muted-foreground",children:"No orders placed"})}):o.slice(0,10).map(e=>Ot.jsx(Sn,{children:Ot.jsx(Mn,{className:"pt-4",children:Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{children:[Ot.jsxs("p",{className:"font-medium",children:["Order #",e.id.slice(0,8)]}),Ot.jsx("p",{className:"text-sm text-muted-foreground",children:new Date(e.createdAt).toLocaleDateString()})]}),Ot.jsxs("div",{className:"text-right",children:[Ot.jsxs("p",{className:"font-bold",children:["$",e.total]}),Ot.jsx(Tn,{variant:"delivered"===e.status?"default":"secondary",children:e.status})]})]})})},e.id))}),Ot.jsx(Ys,{value:"loyalty",className:"space-y-3",children:0===c.length?Ot.jsx(Sn,{children:Ot.jsx(Mn,{className:"py-8 text-center text-muted-foreground",children:"No loyalty transactions"})}):c.map(e=>Ot.jsx(Sn,{children:Ot.jsx(Mn,{className:"pt-4",children:Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{children:[Ot.jsx("p",{className:"font-medium",children:e.description}),Ot.jsx("p",{className:"text-sm text-muted-foreground",children:new Date(e.createdAt).toLocaleString()})]}),Ot.jsxs("div",{className:"text-right font-bold text-lg "+(e.points>=0?"text-green-600":"text-red-600"),children:[e.points>=0?"+":"",e.points," pts"]})]})})},e.id))}),Ot.jsx(Ys,{value:"referrals",className:"space-y-3",children:0===d.length?Ot.jsx(Sn,{children:Ot.jsx(Mn,{className:"py-8 text-center text-muted-foreground",children:"No referrals made"})}):d.map(e=>Ot.jsx(Sn,{children:Ot.jsx(Mn,{className:"pt-4",children:Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{children:[Ot.jsxs("p",{className:"font-medium",children:["Referral Code: ",e.code]}),Ot.jsx("p",{className:"text-sm text-muted-foreground",children:new Date(e.createdAt).toLocaleDateString()})]}),Ot.jsx(Tn,{variant:"completed"===e.status?"default":"secondary",children:e.status})]})})},e.id))})]})]})})}function Sxe({businessId:e,open:t,onOpenChange:n}){const{data:r,isLoading:s}=za({queryKey:[`/api/admin/businesses/${e}/details`],enabled:t&&!!e});if(!r&&s)return Ot.jsx(yr,{open:t,onOpenChange:n,children:Ot.jsxs(jr,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[Ot.jsx(Nr,{children:Ot.jsx(_r,{children:"Loading Business Details..."})}),Ot.jsxs("div",{className:"space-y-4",children:[Ot.jsx(er,{className:"h-32 w-full"}),Ot.jsx(er,{className:"h-64 w-full"})]})]})});if(!r)return null;const{business:i,owner:a,products:o,posts:l,orders:c,gmbStatus:d,stripeStatus:u,stats:h}=r;return Ot.jsx(yr,{open:t,onOpenChange:n,children:Ot.jsxs(jr,{className:"max-w-6xl max-h-[90vh] overflow-y-auto",children:[Ot.jsxs(Nr,{children:[Ot.jsxs(_r,{className:"flex items-center gap-3",children:[Ot.jsxs("div",{className:"relative",children:[i.logoUrl?Ot.jsx("img",{src:i.logoUrl,alt:i.name,className:"w-16 h-16 rounded-xl object-cover"}):Ot.jsx("div",{className:"w-16 h-16 rounded-xl bg-gradient-to-br from-green-500 to-emerald-500 flex items-center justify-center",children:Ot.jsx(Zr,{className:"h-8 w-8 text-white"})}),i.isVerified&&Ot.jsx("div",{className:"absolute -top-1 -right-1 bg-blue-500 rounded-full p-1",children:Ot.jsx(us,{className:"h-4 w-4 text-white"})})]}),Ot.jsxs("div",{children:[Ot.jsx("div",{className:"text-xl font-bold",children:i.name}),Ot.jsx("div",{className:"text-sm text-muted-foreground font-normal",children:i.tagline})]})]}),Ot.jsx(ji,{children:"Complete business profile and performance metrics"})]}),Ot.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-4",children:[Ot.jsx(Sn,{children:Ot.jsxs(Mn,{className:"pt-4",children:[Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsx(as,{className:"h-5 w-5 text-green-600"}),Ot.jsx("span",{className:"text-2xl font-bold",children:h.totalProducts})]}),Ot.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Products"})]})}),Ot.jsx(Sn,{children:Ot.jsxs(Mn,{className:"pt-4",children:[Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsx(cs,{className:"h-5 w-5 text-blue-600"}),Ot.jsx("span",{className:"text-2xl font-bold",children:h.totalPosts})]}),Ot.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Posts"})]})}),Ot.jsx(Sn,{children:Ot.jsxs(Mn,{className:"pt-4",children:[Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsx(Ir,{className:"h-5 w-5 text-purple-600"}),Ot.jsx("span",{className:"text-2xl font-bold",children:h.totalOrders})]}),Ot.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Orders"})]})}),Ot.jsx(Sn,{children:Ot.jsxs(Mn,{className:"pt-4",children:[Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsx(ar,{className:"h-5 w-5 text-yellow-600"}),Ot.jsxs("span",{className:"text-2xl font-bold",children:["$",h.totalRevenue.toFixed(2)]})]}),Ot.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Revenue"})]})})]}),Ot.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[Ot.jsx(Sn,{children:Ot.jsxs(Mn,{className:"pt-4",children:[Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsx(In,{className:"h-4 w-4 text-yellow-500"}),Ot.jsx("span",{className:"text-lg font-bold",children:h.avgRating.toFixed(1)})]}),Ot.jsxs("p",{className:"text-xs text-muted-foreground",children:[h.reviewCount," reviews"]})]})}),Ot.jsx(Sn,{children:Ot.jsxs(Mn,{className:"pt-4",children:[Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsx(On,{className:"h-4 w-4 text-blue-500"}),Ot.jsx("span",{className:"text-lg font-bold",children:h.followerCount})]}),Ot.jsx("p",{className:"text-xs text-muted-foreground",children:"Followers"})]})}),Ot.jsx(Sn,{children:Ot.jsx(Mn,{className:"pt-4",children:Ot.jsx(Tn,{variant:i.isActive?"default":"secondary",children:i.isActive?"Active":"Inactive"})})})]}),Ot.jsxs(qs,{defaultValue:"overview",className:"mt-6",children:[Ot.jsxs(Xs,{className:"grid w-full grid-cols-6",children:[Ot.jsx(Ks,{value:"overview",children:"Overview"}),Ot.jsx(Ks,{value:"owner",children:"Owner"}),Ot.jsx(Ks,{value:"products",children:"Products"}),Ot.jsx(Ks,{value:"posts",children:"Posts"}),Ot.jsx(Ks,{value:"integrations",children:"Integrations"}),Ot.jsx(Ks,{value:"orders",children:"Orders"})]}),Ot.jsx(Ys,{value:"overview",className:"space-y-4",children:Ot.jsxs(Sn,{children:[Ot.jsx(Lr,{children:Ot.jsxs(zr,{className:"flex items-center gap-2",children:[Ot.jsx(Zr,{className:"h-5 w-5"}),"Business Information"]})}),Ot.jsxs(Mn,{className:"space-y-3",children:[Ot.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-sm text-muted-foreground",children:"Category"}),Ot.jsx(Tn,{variant:"outline",children:i.category})]}),Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-sm text-muted-foreground",children:"Location"}),Ot.jsxs("p",{className:"font-medium flex items-center gap-2",children:[Ot.jsx(Bn,{className:"h-4 w-4"}),i.location]})]}),i.phone&&Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-sm text-muted-foreground",children:"Phone"}),Ot.jsxs("p",{className:"font-medium flex items-center gap-2",children:[Ot.jsx(Qr,{className:"h-4 w-4"}),i.phone]})]}),i.website&&Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-sm text-muted-foreground",children:"Website"}),Ot.jsxs("a",{href:i.website,target:"_blank",rel:"noopener noreferrer",className:"font-medium flex items-center gap-2 text-blue-600 hover:underline",children:[Ot.jsx(Yr,{className:"h-4 w-4"}),"Visit Site"]})]})]}),i.description&&Ot.jsxs("div",{className:"mt-4",children:[Ot.jsx("p",{className:"text-sm text-muted-foreground",children:"Description"}),Ot.jsx("p",{className:"text-sm mt-1",children:i.description})]})]})]})}),Ot.jsx(Ys,{value:"owner",className:"space-y-4",children:Ot.jsxs(Sn,{children:[Ot.jsx(Lr,{children:Ot.jsxs(zr,{className:"flex items-center gap-2",children:[Ot.jsx(Ii,{className:"h-5 w-5"}),"Business Owner"]})}),Ot.jsx(Mn,{children:a?Ot.jsxs("div",{className:"flex items-center gap-4",children:[a.profileImageUrl?Ot.jsx("img",{src:a.profileImageUrl,alt:a.firstName,className:"w-12 h-12 rounded-full object-cover"}):Ot.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-200 flex items-center justify-center",children:Ot.jsx(Ii,{className:"h-6 w-6 text-gray-500"})}),Ot.jsxs("div",{children:[Ot.jsxs("p",{className:"font-semibold",children:[a.firstName," ",a.lastName]}),Ot.jsx("p",{className:"text-sm text-muted-foreground",children:a.email}),a.isAdmin&&Ot.jsx(Tn,{variant:"default",className:"mt-1",children:"Admin"})]})]}):Ot.jsx("p",{className:"text-muted-foreground",children:"Owner information not available"})})]})}),Ot.jsx(Ys,{value:"products",className:"space-y-3",children:0===o.length?Ot.jsx(Sn,{children:Ot.jsx(Mn,{className:"py-8 text-center text-muted-foreground",children:"No products listed"})}):o.slice(0,10).map(e=>Ot.jsx(Sn,{children:Ot.jsx(Mn,{className:"pt-4",children:Ot.jsxs("div",{className:"flex items-start gap-4",children:[e.imageUrl&&Ot.jsx("img",{src:e.imageUrl,alt:e.name,className:"w-16 h-16 rounded-lg object-cover"}),Ot.jsxs("div",{className:"flex-1",children:[Ot.jsx("h4",{className:"font-semibold",children:e.name}),Ot.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:e.description}),Ot.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[Ot.jsxs("span",{className:"font-bold text-green-600",children:["$",e.price]}),e.category&&Ot.jsx(Tn,{variant:"outline",children:e.category}),!e.isActive&&Ot.jsx(Tn,{variant:"secondary",children:"Inactive"})]})]})]})})},e.id))}),Ot.jsx(Ys,{value:"posts",className:"space-y-3",children:0===l.length?Ot.jsx(Sn,{children:Ot.jsx(Mn,{className:"py-8 text-center text-muted-foreground",children:"No posts created"})}):l.slice(0,10).map(e=>Ot.jsx(Sn,{children:Ot.jsxs(Mn,{className:"pt-4",children:[Ot.jsx("p",{className:"text-sm",children:e.content}),Ot.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-muted-foreground",children:[Ot.jsxs("span",{children:[e.likeCount||0," likes"]}),Ot.jsxs("span",{children:[e.commentCount||0," comments"]}),Ot.jsx("span",{children:new Date(e.createdAt).toLocaleDateString()})]})]})},e.id))}),Ot.jsxs(Ys,{value:"integrations",className:"space-y-4",children:[Ot.jsxs(Sn,{children:[Ot.jsx(Lr,{children:Ot.jsx(zr,{className:"text-base",children:"Google My Business"})}),Ot.jsx(Mn,{children:d?Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsx("span",{className:"text-sm",children:"Connected"}),d.connected?Ot.jsx(us,{className:"h-5 w-5 text-green-600"}):Ot.jsx(Bs,{className:"h-5 w-5 text-red-600"})]}),Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsx("span",{className:"text-sm",children:"Verified"}),d.verified?Ot.jsx(us,{className:"h-5 w-5 text-green-600"}):Ot.jsx(Bs,{className:"h-5 w-5 text-red-600"})]}),d.syncStatus&&Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-sm text-muted-foreground",children:"Sync Status"}),Ot.jsx(Tn,{variant:"outline",children:d.syncStatus})]}),d.lastSyncAt&&Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-sm text-muted-foreground",children:"Last Sync"}),Ot.jsx("p",{className:"text-sm",children:new Date(d.lastSyncAt).toLocaleString()})]}),d.lastError&&Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-sm text-muted-foreground text-red-600",children:"Last Error"}),Ot.jsx("p",{className:"text-xs text-red-600",children:d.lastError})]})]}):Ot.jsx("p",{className:"text-sm text-muted-foreground",children:"Not connected"})})]}),Ot.jsxs(Sn,{children:[Ot.jsx(Lr,{children:Ot.jsxs(zr,{className:"text-base flex items-center gap-2",children:[Ot.jsx(Di,{className:"h-5 w-5"}),"Stripe Connect"]})}),Ot.jsx(Mn,{children:u?Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-sm text-muted-foreground",children:"Account ID"}),Ot.jsx("p",{className:"text-sm font-mono",children:u.accountId})]}),Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-sm text-muted-foreground",children:"Onboarding Status"}),Ot.jsx(Tn,{variant:"outline",children:u.onboardingStatus||"pending"})]}),Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsx("span",{className:"text-sm",children:"Charges Enabled"}),u.chargesEnabled?Ot.jsx(us,{className:"h-5 w-5 text-green-600"}):Ot.jsx(Bs,{className:"h-5 w-5 text-red-600"})]}),Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsx("span",{className:"text-sm",children:"Payouts Enabled"}),u.payoutsEnabled?Ot.jsx(us,{className:"h-5 w-5 text-green-600"}):Ot.jsx(Bs,{className:"h-5 w-5 text-red-600"})]})]}):Ot.jsx("p",{className:"text-sm text-muted-foreground",children:"Not connected"})})]})]}),Ot.jsx(Ys,{value:"orders",className:"space-y-3",children:0===c.length?Ot.jsx(Sn,{children:Ot.jsx(Mn,{className:"py-8 text-center text-muted-foreground",children:"No orders received"})}):c.slice(0,10).map(e=>Ot.jsx(Sn,{children:Ot.jsx(Mn,{className:"pt-4",children:Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{children:[Ot.jsxs("p",{className:"font-medium",children:["Order #",e.id.slice(0,8)]}),Ot.jsx("p",{className:"text-sm text-muted-foreground",children:new Date(e.createdAt).toLocaleDateString()}),Ot.jsx("p",{className:"text-xs text-muted-foreground",children:e.customerEmail})]}),Ot.jsxs("div",{className:"text-right",children:[Ot.jsxs("p",{className:"font-bold",children:["$",e.total]}),Ot.jsx(Tn,{variant:"delivered"===e.status?"default":"secondary",children:e.status})]})]})})},e.id))})]})]})})}function Mxe(){const[e,t]=hn.useState("");hn.useState("all");const{data:n,isLoading:r}=za({queryKey:["/api/admin/content"]});return r?Ot.jsx(Sn,{children:Ot.jsx(Mn,{className:"py-12",children:Ot.jsx("div",{className:"text-center text-muted-foreground",children:"Loading content..."})})}):n?Ot.jsxs("div",{className:"space-y-6",children:[Ot.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ot.jsx(zr,{className:"text-sm font-medium",children:"Blog Posts"}),Ot.jsx(cs,{className:"h-5 w-5 text-blue-600"})]}),Ot.jsxs(Mn,{children:[Ot.jsx("div",{className:"text-3xl font-bold",children:n.blogPosts.total}),Ot.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Total posts"})]})]}),Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ot.jsx(zr,{className:"text-sm font-medium",children:"Business Posts"}),Ot.jsx(Or,{className:"h-5 w-5 text-green-600"})]}),Ot.jsxs(Mn,{children:[Ot.jsx("div",{className:"text-3xl font-bold",children:n.posts.total}),Ot.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Total posts"})]})]}),Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ot.jsx(zr,{className:"text-sm font-medium",children:"Products"}),Ot.jsx(as,{className:"h-5 w-5 text-purple-600"})]}),Ot.jsxs(Mn,{children:[Ot.jsx("div",{className:"text-3xl font-bold",children:n.products.total}),Ot.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Total products"})]})]})]}),Ot.jsxs(Sn,{children:[Ot.jsx(Lr,{children:Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{children:[Ot.jsx(zr,{children:"Content Moderation"}),Ot.jsx(Ur,{children:"Review and moderate platform content"})]}),Ot.jsxs("div",{className:"relative w-64",children:[Ot.jsx(Fn,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),Ot.jsx(zn,{placeholder:"Search content...",value:e,onChange:e=>t(e.target.value),className:"pl-8"})]})]})}),Ot.jsx(Mn,{children:Ot.jsxs(qs,{defaultValue:"blog-posts",children:[Ot.jsxs(Xs,{className:"grid w-full grid-cols-3",children:[Ot.jsx(Ks,{value:"blog-posts",children:"Blog Posts"}),Ot.jsx(Ks,{value:"business-posts",children:"Business Posts"}),Ot.jsx(Ks,{value:"products",children:"Products"})]}),Ot.jsx(Ys,{value:"blog-posts",className:"space-y-4",children:0===n.blogPosts.items.length?Ot.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No blog posts found"}):n.blogPosts.items.slice(0,20).map(e=>Ot.jsx(Sn,{children:Ot.jsx(Mn,{className:"pt-4",children:Ot.jsxs("div",{className:"flex items-start justify-between",children:[Ot.jsxs("div",{className:"flex-1",children:[Ot.jsx("h4",{className:"font-semibold text-lg",children:e.title}),Ot.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mt-1",children:e.excerpt||e.content?.substring(0,150)}),Ot.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[Ot.jsx(Tn,{variant:"published"===e.status?"default":"secondary",children:e.status}),e.featured&&Ot.jsx(Tn,{variant:"outline",children:"Featured"}),Ot.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(e.createdAt).toLocaleDateString()})]})]}),Ot.jsxs("div",{className:"flex gap-2",children:[Ot.jsx(Ln,{variant:"ghost",size:"sm",children:Ot.jsx($r,{className:"h-4 w-4"})}),Ot.jsx(Ln,{variant:"ghost",size:"sm",className:"text-red-600",children:Ot.jsx(vs,{className:"h-4 w-4"})})]})]})})},e.id))}),Ot.jsx(Ys,{value:"business-posts",className:"space-y-4",children:0===n.posts.items.length?Ot.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No business posts found"}):n.posts.items.slice(0,20).map(e=>Ot.jsx(Sn,{children:Ot.jsx(Mn,{className:"pt-4",children:Ot.jsxs("div",{className:"flex items-start justify-between",children:[Ot.jsxs("div",{className:"flex-1",children:[Ot.jsx("p",{className:"text-sm",children:e.content}),Ot.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[Ot.jsx(Tn,{variant:e.isVisible?"default":"secondary",children:e.isVisible?"Visible":"Hidden"}),Ot.jsxs("span",{className:"text-xs text-muted-foreground",children:[e.likeCount||0," likes  ",e.commentCount||0," comments"]}),Ot.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(e.createdAt).toLocaleDateString()})]})]}),Ot.jsxs("div",{className:"flex gap-2",children:[Ot.jsx(Ln,{variant:"ghost",size:"sm",children:Ot.jsx($r,{className:"h-4 w-4"})}),Ot.jsx(Ln,{variant:"ghost",size:"sm",className:"text-red-600",children:Ot.jsx(vs,{className:"h-4 w-4"})})]})]})})},e.id))}),Ot.jsx(Ys,{value:"products",className:"space-y-4",children:0===n.products.items.length?Ot.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No products found"}):n.products.items.slice(0,20).map(e=>Ot.jsx(Sn,{children:Ot.jsx(Mn,{className:"pt-4",children:Ot.jsxs("div",{className:"flex items-start gap-4",children:[e.imageUrl&&Ot.jsx("img",{src:e.imageUrl,alt:e.name,className:"w-20 h-20 rounded-lg object-cover"}),Ot.jsx("div",{className:"flex-1",children:Ot.jsxs("div",{className:"flex items-start justify-between",children:[Ot.jsxs("div",{className:"flex-1",children:[Ot.jsx("h4",{className:"font-semibold",children:e.name}),Ot.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mt-1",children:e.description}),Ot.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[Ot.jsxs("span",{className:"font-bold text-green-600",children:["$",e.price]}),e.category&&Ot.jsx(Tn,{variant:"outline",children:e.category}),Ot.jsx(Tn,{variant:e.isActive?"default":"secondary",children:e.isActive?"Active":"Inactive"}),Ot.jsxs("span",{className:"text-xs text-muted-foreground",children:["Stock: ",e.stockQuantity||0]})]})]}),Ot.jsxs("div",{className:"flex gap-2",children:[Ot.jsx(Ln,{variant:"ghost",size:"sm",children:Ot.jsx($r,{className:"h-4 w-4"})}),Ot.jsx(Ln,{variant:"ghost",size:"sm",className:"text-red-600",children:Ot.jsx(vs,{className:"h-4 w-4"})})]})]})})]})})},e.id))})]})})]})]}):Ot.jsx(Sn,{children:Ot.jsx(Mn,{className:"py-12",children:Ot.jsx("div",{className:"text-center text-muted-foreground",children:"No content available"})})})}function Cxe(){const{data:e,isLoading:t}=za({queryKey:["/api/admin/marketing"]});return t?Ot.jsx(Sn,{children:Ot.jsx(Mn,{className:"py-12",children:Ot.jsx("div",{className:"text-center text-muted-foreground",children:"Loading marketing data..."})})}):e?Ot.jsxs("div",{className:"space-y-6",children:[Ot.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ot.jsx(zr,{className:"text-sm font-medium",children:"Total Campaigns"}),Ot.jsx(ns,{className:"h-5 w-5 text-blue-600"})]}),Ot.jsxs(Mn,{children:[Ot.jsx("div",{className:"text-3xl font-bold",children:e.campaigns.stats.total}),Ot.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"All time"})]})]}),Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ot.jsx(zr,{className:"text-sm font-medium",children:"Active Campaigns"}),Ot.jsx(Dn,{className:"h-5 w-5 text-green-600"})]}),Ot.jsxs(Mn,{children:[Ot.jsx("div",{className:"text-3xl font-bold",children:e.campaigns.stats.active}),Ot.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Currently running"})]})]}),Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ot.jsx(zr,{className:"text-sm font-medium",children:"Customer Segments"}),Ot.jsx(On,{className:"h-5 w-5 text-purple-600"})]}),Ot.jsxs(Mn,{children:[Ot.jsx("div",{className:"text-3xl font-bold",children:e.segments.stats.total}),Ot.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Total segments"})]})]}),Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ot.jsx(zr,{className:"text-sm font-medium",children:"Avg Segment Size"}),Ot.jsx(On,{className:"h-5 w-5 text-orange-600"})]}),Ot.jsxs(Mn,{children:[Ot.jsx("div",{className:"text-3xl font-bold",children:Math.round(e.segments.stats.avgSize)}),Ot.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Members per segment"})]})]})]}),Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{children:[Ot.jsxs(zr,{className:"flex items-center gap-2",children:[Ot.jsx(Jr,{className:"h-5 w-5"}),"Recent Campaigns"]}),Ot.jsx(Ur,{children:"Latest marketing campaigns across all businesses"})]}),Ot.jsx(Mn,{className:"space-y-3",children:0===e.campaigns.items.length?Ot.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No campaigns found"}):e.campaigns.items.map(e=>Ot.jsx(Sn,{children:Ot.jsx(Mn,{className:"pt-4",children:Ot.jsx("div",{className:"flex items-start justify-between",children:Ot.jsxs("div",{className:"flex-1",children:[Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx("h4",{className:"font-semibold",children:e.name}),Ot.jsx(Tn,{variant:"active"===e.status?"default":"completed"===e.status?"outline":"secondary",children:e.status}),Ot.jsx(Tn,{variant:"outline",children:e.type})]}),e.description&&Ot.jsx("p",{className:"text-sm text-muted-foreground mt-1 line-clamp-2",children:e.description}),Ot.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-muted-foreground",children:[e.scheduledAt&&Ot.jsxs("span",{children:[Ot.jsx(xr,{className:"h-3 w-3 inline mr-1"}),new Date(e.scheduledAt).toLocaleDateString()]}),void 0!==e.sentCount&&Ot.jsxs("span",{children:[Ot.jsx(ns,{className:"h-3 w-3 inline mr-1"}),e.sentCount," sent"]}),void 0!==e.openRate&&Ot.jsxs("span",{children:[Ot.jsx(Jr,{className:"h-3 w-3 inline mr-1"}),(100*e.openRate).toFixed(1),"% open rate"]})]})]})})})},e.id))})]}),Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{children:[Ot.jsxs(zr,{className:"flex items-center gap-2",children:[Ot.jsx(On,{className:"h-5 w-5"}),"Customer Segments"]}),Ot.jsx(Ur,{children:"Audience segmentation for targeted campaigns"})]}),Ot.jsx(Mn,{className:"space-y-3",children:0===e.segments.items.length?Ot.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No segments found"}):e.segments.items.map(e=>Ot.jsx(Sn,{children:Ot.jsx(Mn,{className:"pt-4",children:Ot.jsx("div",{className:"flex items-start justify-between",children:Ot.jsxs("div",{className:"flex-1",children:[Ot.jsx("h4",{className:"font-semibold",children:e.name}),e.description&&Ot.jsx("p",{className:"text-sm text-muted-foreground mt-1 line-clamp-2",children:e.description}),Ot.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[Ot.jsxs(Tn,{variant:"outline",children:[e.memberCount||0," members"]}),Ot.jsx("span",{className:"text-xs text-muted-foreground",children:e.type||"Custom"}),Ot.jsxs("span",{className:"text-xs text-muted-foreground",children:["Created ",new Date(e.createdAt).toLocaleDateString()]})]})]})})})},e.id))})]})]}):Ot.jsx(Sn,{children:Ot.jsx(Mn,{className:"py-12",children:Ot.jsx("div",{className:"text-center text-muted-foreground",children:"No marketing data available"})})})}function Exe(){const{data:e,isLoading:t}=za({queryKey:["/api/admin/loyalty"]});return t?Ot.jsx(Sn,{children:Ot.jsx(Mn,{className:"py-12",children:Ot.jsx("div",{className:"text-center text-muted-foreground",children:"Loading loyalty data..."})})}):e?Ot.jsxs("div",{className:"space-y-6",children:[Ot.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ot.jsx(zr,{className:"text-sm font-medium",children:"Active Members"}),Ot.jsx(On,{className:"h-5 w-5 text-blue-600"})]}),Ot.jsxs(Mn,{children:[Ot.jsx("div",{className:"text-3xl font-bold",children:e.stats.activeMembers}),Ot.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Loyalty members"})]})]}),Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ot.jsx(zr,{className:"text-sm font-medium",children:"Points Issued"}),Ot.jsx(An,{className:"h-5 w-5 text-yellow-600"})]}),Ot.jsxs(Mn,{children:[Ot.jsx("div",{className:"text-3xl font-bold",children:e.stats.totalPointsIssued.toLocaleString()}),Ot.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"All time"})]})]}),Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ot.jsx(zr,{className:"text-sm font-medium",children:"Points Available"}),Ot.jsx(sr,{className:"h-5 w-5 text-green-600"})]}),Ot.jsxs(Mn,{children:[Ot.jsx("div",{className:"text-3xl font-bold",children:e.stats.totalPointsAvailable.toLocaleString()}),Ot.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Current balance"})]})]}),Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ot.jsx(zr,{className:"text-sm font-medium",children:"Total Rewards"}),Ot.jsx(Ei,{className:"h-5 w-5 text-purple-600"})]}),Ot.jsxs(Mn,{children:[Ot.jsx("div",{className:"text-3xl font-bold",children:e.rewards.total}),Ot.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Reward catalog"})]})]})]}),Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{children:[Ot.jsxs(zr,{className:"flex items-center gap-2",children:[Ot.jsx(Wr,{className:"h-5 w-5"}),"Tier Distribution"]}),Ot.jsx(Ur,{children:"Member distribution across loyalty tiers"})]}),Ot.jsx(Mn,{children:Ot.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:e.tiers.distribution.map((t,n)=>{const r=e.tiers.items.find(e=>e.name===t.tier),s=e.accounts.total>0?(t.count/e.accounts.total*100).toFixed(1):0;return Ot.jsx(Sn,{className:"border-2",children:Ot.jsxs(Mn,{className:"pt-6",children:[Ot.jsxs("div",{className:"flex items-center justify-between mb-2",children:[Ot.jsx("h4",{className:"font-semibold text-lg",children:t.tier}),0===n&&Ot.jsx(In,{className:"h-5 w-5 text-amber-500"}),1===n&&Ot.jsx(In,{className:"h-5 w-5 text-gray-400"}),2===n&&Ot.jsx(In,{className:"h-5 w-5 text-yellow-600"}),3===n&&Ot.jsx(Wr,{className:"h-5 w-5 text-purple-600"})]}),Ot.jsx("div",{className:"text-3xl font-bold",children:t.count}),Ot.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[s,"% of members"]}),r&&Ot.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Min: ",r.pointsRequired," pts"]})]})},n)})})})]}),Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{children:[Ot.jsxs(zr,{className:"flex items-center gap-2",children:[Ot.jsx(Dn,{className:"h-5 w-5"}),"Top Loyalty Members"]}),Ot.jsx(Ur,{children:"Members with highest lifetime points"})]}),Ot.jsx(Mn,{className:"space-y-3",children:e.accounts.items.slice(0,10).map((e,t)=>Ot.jsx(Sn,{children:Ot.jsx(Mn,{className:"pt-4",children:Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{className:"flex items-center gap-4",children:[Ot.jsxs("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center text-white font-bold",children:["#",t+1]}),Ot.jsxs("div",{children:[Ot.jsxs("p",{className:"font-medium",children:["User ",e.userId.slice(0,8)]}),Ot.jsxs("p",{className:"text-sm text-muted-foreground",children:["Tier: ",e.tierName," (Level ",e.tierLevel,")"]})]})]}),Ot.jsxs("div",{className:"text-right",children:[Ot.jsxs("p",{className:"font-bold text-lg text-green-600",children:[e.currentPoints.toLocaleString()," pts"]}),Ot.jsxs("p",{className:"text-xs text-muted-foreground",children:["Lifetime: ",e.lifetimePoints.toLocaleString()]})]})]})})},e.id))})]}),Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{children:[Ot.jsxs(zr,{className:"flex items-center gap-2",children:[Ot.jsx(Ei,{className:"h-5 w-5"}),"Rewards Catalog"]}),Ot.jsx(Ur,{children:"Available rewards for redemption"})]}),Ot.jsx(Mn,{className:"space-y-3",children:0===e.rewards.items.length?Ot.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No rewards available"}):e.rewards.items.map(e=>Ot.jsx(Sn,{children:Ot.jsx(Mn,{className:"pt-4",children:Ot.jsxs("div",{className:"flex items-start gap-4",children:[e.imageUrl&&Ot.jsx("img",{src:e.imageUrl,alt:e.name,className:"w-16 h-16 rounded-lg object-cover"}),Ot.jsx("div",{className:"flex-1",children:Ot.jsx("div",{className:"flex items-start justify-between",children:Ot.jsxs("div",{className:"flex-1",children:[Ot.jsx("h4",{className:"font-semibold",children:e.name}),e.description&&Ot.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mt-1",children:e.description}),Ot.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[Ot.jsxs(Tn,{variant:"outline",children:[e.pointsCost," points"]}),e.businessId?Ot.jsx(Tn,{variant:"secondary",children:"Business Reward"}):Ot.jsx(Tn,{variant:"default",children:"Platform Reward"}),Ot.jsx(Tn,{variant:e.isActive?"default":"secondary",children:e.isActive?"Active":"Inactive"})]})]})})})]})})},e.id))})]}),Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{children:[Ot.jsxs(zr,{className:"flex items-center gap-2",children:[Ot.jsx(sr,{className:"h-5 w-5"}),"Recent Redemptions"]}),Ot.jsxs(Ur,{children:["Latest reward redemptions (",e.redemptions.pending," pending, ",e.redemptions.completed," completed)"]})]}),Ot.jsx(Mn,{className:"space-y-3",children:0===e.redemptions.items.length?Ot.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No redemptions yet"}):e.redemptions.items.map(e=>Ot.jsx(Sn,{children:Ot.jsx(Mn,{className:"pt-4",children:Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{children:[Ot.jsxs("p",{className:"font-medium",children:["Reward ID: ",e.rewardId.slice(0,8)]}),Ot.jsxs("p",{className:"text-sm text-muted-foreground",children:["User: ",e.userId.slice(0,8)]}),Ot.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(e.redeemedAt).toLocaleString()})]}),Ot.jsxs("div",{className:"text-right",children:[Ot.jsxs("p",{className:"font-bold text-red-600",children:["-",e.pointsCost," pts"]}),Ot.jsx(Tn,{variant:"completed"===e.status?"default":"pending"===e.status?"secondary":"outline",children:e.status})]})]})})},e.id))})]})]}):Ot.jsx(Sn,{children:Ot.jsx(Mn,{className:"py-12",children:Ot.jsx("div",{className:"text-center text-muted-foreground",children:"No loyalty data available"})})})}function kxe(){const{data:e,isLoading:t}=za({queryKey:["/api/admin/system"],refetchInterval:3e4});if(t)return Ot.jsx(Sn,{children:Ot.jsx(Mn,{className:"py-12",children:Ot.jsx("div",{className:"text-center text-muted-foreground",children:"Loading system data..."})})});if(!e)return Ot.jsx(Sn,{children:Ot.jsx(Mn,{className:"py-12",children:Ot.jsx("div",{className:"text-center text-muted-foreground",children:"No system data available"})})});const n=e=>`${(e/1024/1024).toFixed(2)} MB`,r=(e.memory.heapUsed/e.memory.heapTotal*100).toFixed(1);return Ot.jsxs("div",{className:"space-y-6",children:[Ot.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[Ot.jsxs(Sn,{className:"border-2",children:[Ot.jsxs(Lr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ot.jsx(zr,{className:"text-sm font-medium",children:"Redis"}),Ot.jsx(Li,{className:"h-5 w-5 text-red-600"})]}),Ot.jsxs(Mn,{children:[Ot.jsx("div",{className:"flex items-center gap-2",children:"healthy"===e.health.redis?Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(us,{className:"h-6 w-6 text-green-600"}),Ot.jsx("span",{className:"text-2xl font-bold text-green-600",children:"Healthy"})]}):Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(Cn,{className:"h-6 w-6 text-red-600"}),Ot.jsx("span",{className:"text-2xl font-bold text-red-600",children:"Unhealthy"})]})}),Ot.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Cache service"})]})]}),Ot.jsxs(Sn,{className:"border-2",children:[Ot.jsxs(Lr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ot.jsx(zr,{className:"text-sm font-medium",children:"Database"}),Ot.jsx(Li,{className:"h-5 w-5 text-blue-600"})]}),Ot.jsxs(Mn,{children:[Ot.jsx("div",{className:"flex items-center gap-2",children:"healthy"===e.health.database?Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(us,{className:"h-6 w-6 text-green-600"}),Ot.jsx("span",{className:"text-2xl font-bold text-green-600",children:"Healthy"})]}):Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(Cn,{className:"h-6 w-6 text-red-600"}),Ot.jsx("span",{className:"text-2xl font-bold text-red-600",children:"Unhealthy"})]})}),Ot.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"PostgreSQL"})]})]}),Ot.jsxs(Sn,{className:"border-2",children:[Ot.jsxs(Lr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ot.jsx(zr,{className:"text-sm font-medium",children:"Server Uptime"}),Ot.jsx(Ri,{className:"h-5 w-5 text-green-600"})]}),Ot.jsxs(Mn,{children:[Ot.jsx("div",{className:"text-2xl font-bold",children:(s=e.uptime,`${Math.floor(s/86400)}d ${Math.floor(s%86400/3600)}h ${Math.floor(s%3600/60)}m`)}),Ot.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Running continuously"})]})]})]}),Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{children:[Ot.jsxs(zr,{className:"flex items-center gap-2",children:[Ot.jsx(Fi,{className:"h-5 w-5"}),"Memory Usage"]}),Ot.jsx(Ur,{children:"Node.js process memory consumption"})]}),Ot.jsx(Mn,{children:Ot.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"RSS (Resident Set Size)"}),Ot.jsx("p",{className:"text-2xl font-bold",children:n(e.memory.rss)}),Ot.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Total memory allocated"})]}),Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Heap Total"}),Ot.jsx("p",{className:"text-2xl font-bold",children:n(e.memory.heapTotal)}),Ot.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"V8 heap size"})]}),Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Heap Used"}),Ot.jsx("p",{className:"text-2xl font-bold",children:n(e.memory.heapUsed)}),Ot.jsxs(Tn,{variant:parseFloat(r)>90?"destructive":parseFloat(r)>70?"secondary":"default",className:"mt-1",children:[r,"% usage"]})]}),Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"External"}),Ot.jsx("p",{className:"text-2xl font-bold",children:n(e.memory.external)}),Ot.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"C++ objects"})]})]})})]}),Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{children:[Ot.jsxs(zr,{className:"flex items-center gap-2",children:[Ot.jsx(Dn,{className:"h-5 w-5"}),"Platform Metrics"]}),Ot.jsx(Ur,{children:"Real-time platform statistics"})]}),Ot.jsx(Mn,{children:Ot.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[Ot.jsx(Sn,{className:"border",children:Ot.jsxs(Mn,{className:"pt-6",children:[Ot.jsxs("div",{className:"flex items-center justify-between mb-2",children:[Ot.jsx(On,{className:"h-8 w-8 text-blue-600"}),Ot.jsx("span",{className:"text-3xl font-bold",children:e.metrics.totalUsers})]}),Ot.jsx("p",{className:"text-sm font-medium",children:"Total Users"}),Ot.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Registered accounts"})]})}),Ot.jsx(Sn,{className:"border",children:Ot.jsxs(Mn,{className:"pt-6",children:[Ot.jsxs("div",{className:"flex items-center justify-between mb-2",children:[Ot.jsx(Zr,{className:"h-8 w-8 text-green-600"}),Ot.jsx("span",{className:"text-3xl font-bold",children:e.metrics.totalBusinesses})]}),Ot.jsx("p",{className:"text-sm font-medium",children:"Total Businesses"}),Ot.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[Ot.jsxs(Tn,{variant:"default",className:"text-xs",children:[e.metrics.verifiedBusinesses," verified"]}),Ot.jsxs(Tn,{variant:"outline",className:"text-xs",children:[e.metrics.activeBusinesses," active"]})]})]})}),Ot.jsx(Sn,{className:"border",children:Ot.jsxs(Mn,{className:"pt-6",children:[Ot.jsxs("div",{className:"flex items-center justify-between mb-2",children:[Ot.jsx(Ir,{className:"h-8 w-8 text-purple-600"}),Ot.jsx("span",{className:"text-3xl font-bold",children:e.metrics.totalOrders})]}),Ot.jsx("p",{className:"text-sm font-medium",children:"Total Orders"}),Ot.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"All time transactions"})]})})]})})]}),Ot.jsxs(Sn,{children:[Ot.jsx(Lr,{children:Ot.jsxs(zr,{className:"flex items-center gap-2",children:[Ot.jsx(Pn,{className:"h-5 w-5"}),"System Information"]})}),Ot.jsx(Mn,{children:Ot.jsxs("div",{className:"space-y-3",children:[Ot.jsxs("div",{className:"flex items-center justify-between py-2 border-b",children:[Ot.jsx("span",{className:"text-sm font-medium",children:"Health Check Timestamp"}),Ot.jsx("span",{className:"text-sm text-muted-foreground",children:new Date(e.health.timestamp).toLocaleString()})]}),Ot.jsxs("div",{className:"flex items-center justify-between py-2 border-b",children:[Ot.jsx("span",{className:"text-sm font-medium",children:"Platform Status"}),Ot.jsxs(Tn,{variant:"default",className:"bg-green-600",children:[Ot.jsx(Ri,{className:"h-3 w-3 mr-1"}),"Operational"]})]}),Ot.jsxs("div",{className:"flex items-center justify-between py-2 border-b",children:[Ot.jsx("span",{className:"text-sm font-medium",children:"Environment"}),Ot.jsx(Tn,{variant:"outline",children:"production"})]}),Ot.jsxs("div",{className:"flex items-center justify-between py-2",children:[Ot.jsx("span",{className:"text-sm font-medium",children:"Auto-refresh"}),Ot.jsx(Tn,{variant:"secondary",children:"Every 30 seconds"})]})]})})]})]});var s}function Axe(){const[e,t]=hn.useState("overview"),{data:n=[]}=za({queryKey:["/api/admin/auth-audit-logs"]}),{data:r=[]}=za({queryKey:["/api/admin/active-sessions"]}),{data:s=[]}=za({queryKey:["/api/admin/security-events"]}),{data:i}=za({queryKey:["/api/admin/token-status"]}),a=n.filter(e=>"login"===e.eventType&&"failure"===e.eventStatus).length,o=s.filter(e=>"high"===e.severity&&!e.resolved).length,l=i?.tokens.filter(e=>e.needsRefresh).length||0;return Ot.jsxs("div",{className:"space-y-6",children:[Ot.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[Ot.jsxs(Sn,{className:"border-2",children:[Ot.jsxs(Lr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ot.jsx(zr,{className:"text-sm font-medium",children:"Active Sessions"}),Ot.jsx(Ri,{className:"h-5 w-5 text-blue-600"})]}),Ot.jsxs(Mn,{children:[Ot.jsx("div",{className:"text-3xl font-bold",children:r.length}),Ot.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[r.filter(e=>e.isCurrent).length," current"]})]})]}),Ot.jsxs(Sn,{className:"border-2",children:[Ot.jsxs(Lr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ot.jsx(zr,{className:"text-sm font-medium",children:"Failed Logins"}),Ot.jsx(ms,{className:"h-5 w-5 text-yellow-600"})]}),Ot.jsxs(Mn,{children:[Ot.jsx("div",{className:"text-3xl font-bold",children:a}),Ot.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Last 24 hours"})]})]}),Ot.jsxs(Sn,{className:"border-2",children:[Ot.jsxs(Lr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ot.jsx(zr,{className:"text-sm font-medium",children:"Security Events"}),Ot.jsx(Rn,{className:"h-5 w-5 text-red-600"})]}),Ot.jsxs(Mn,{children:[Ot.jsx("div",{className:"text-3xl font-bold",children:o}),Ot.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Unresolved"})]})]}),Ot.jsxs(Sn,{className:"border-2",children:[Ot.jsxs(Lr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ot.jsx(zr,{className:"text-sm font-medium",children:"OAuth Tokens"}),Ot.jsx(zi,{className:"h-5 w-5 text-green-600"})]}),Ot.jsxs(Mn,{children:[Ot.jsx("div",{className:"text-3xl font-bold",children:l}),Ot.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Need refresh"})]})]})]}),Ot.jsxs(qs,{value:e,onValueChange:t,children:[Ot.jsxs(Xs,{children:[Ot.jsx(Ks,{value:"overview",children:"Overview"}),Ot.jsx(Ks,{value:"sessions",children:"Active Sessions"}),Ot.jsx(Ks,{value:"audit",children:"Audit Logs"}),Ot.jsx(Ks,{value:"events",children:"Security Events"}),Ot.jsx(Ks,{value:"tokens",children:"OAuth Tokens"})]}),Ot.jsx(Ys,{value:"overview",className:"space-y-4",children:Ot.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{children:[Ot.jsx(zr,{children:"Recent Failed Logins"}),Ot.jsx(Ur,{children:"Suspicious login attempts"})]}),Ot.jsx(Mn,{children:Ot.jsxs("div",{className:"space-y-3",children:[n.filter(e=>"login"===e.eventType&&"failure"===e.eventStatus).slice(0,5).map(e=>Ot.jsxs("div",{className:"flex items-center justify-between py-2 border-b last:border-0",children:[Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-sm font-medium",children:e.ipAddress}),Ot.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(e.createdAt).toLocaleString()})]}),Ot.jsx(Tn,{variant:"destructive",children:"Failed"})]},e.id)),0===n.filter(e=>"login"===e.eventType&&"failure"===e.eventStatus).length&&Ot.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No failed login attempts"})]})})]}),Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{children:[Ot.jsx(zr,{children:"Active Sessions"}),Ot.jsx(Ur,{children:"Currently logged in users"})]}),Ot.jsx(Mn,{children:Ot.jsxs("div",{className:"space-y-3",children:[r.slice(0,5).map(e=>Ot.jsxs("div",{className:"flex items-center justify-between py-2 border-b last:border-0",children:[Ot.jsxs("div",{className:"flex items-center gap-3",children:["mobile"===e.deviceType?Ot.jsx(xi,{className:"h-4 w-4 text-muted-foreground"}):Ot.jsx(Bi,{className:"h-4 w-4 text-muted-foreground"}),Ot.jsxs("div",{children:[Ot.jsxs("p",{className:"text-sm font-medium",children:[e.browser," on ",e.os]}),Ot.jsx("p",{className:"text-xs text-muted-foreground",children:e.ipAddress})]})]}),e.isCurrent&&Ot.jsx(Tn,{variant:"outline",children:"Current"})]},e.id)),0===r.length&&Ot.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No active sessions"})]})})]})]})}),Ot.jsx(Ys,{value:"sessions",className:"space-y-4",children:Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{children:[Ot.jsx(zr,{children:"All Active Sessions"}),Ot.jsx(Ur,{children:"Monitor all user sessions across the platform"})]}),Ot.jsx(Mn,{children:Ot.jsxs("div",{className:"space-y-4",children:[r.map(e=>Ot.jsx(Sn,{className:"p-4",children:Ot.jsx("div",{className:"flex items-start justify-between",children:Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsxs("div",{className:"flex items-center gap-2",children:["mobile"===e.deviceType?Ot.jsx(xi,{className:"h-5 w-5 text-blue-600"}):Ot.jsx(Bi,{className:"h-5 w-5 text-blue-600"}),Ot.jsxs("span",{className:"font-semibold",children:[e.browser," on ",e.os]}),e.isCurrent&&Ot.jsx(Tn,{children:"Current"})]}),Ot.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[Ot.jsxs("div",{className:"flex items-center gap-1",children:[Ot.jsx(Bn,{className:"h-4 w-4"}),e.ipAddress]}),Ot.jsxs("div",{className:"flex items-center gap-1",children:[Ot.jsx(xr,{className:"h-4 w-4"}),"Last active: ",new Date(e.lastActivity).toLocaleString()]})]}),Ot.jsxs("div",{className:"text-xs text-muted-foreground",children:["Expires: ",new Date(e.expiresAt).toLocaleString()]})]})})},e.id)),0===r.length&&Ot.jsx("p",{className:"text-center py-8 text-muted-foreground",children:"No active sessions"})]})})]})}),Ot.jsx(Ys,{value:"audit",className:"space-y-4",children:Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{children:[Ot.jsx(zr,{children:"Authentication Audit Logs"}),Ot.jsx(Ur,{children:"Complete history of authentication events"})]}),Ot.jsx(Mn,{children:Ot.jsxs("div",{className:"space-y-2",children:[n.slice(0,20).map(e=>Ot.jsxs("div",{className:"flex items-center justify-between py-3 border-b last:border-0",children:[Ot.jsxs("div",{className:"flex-1",children:[Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx(Tn,{variant:"success"===e.eventStatus?"default":"destructive",children:e.eventType}),Ot.jsx("span",{className:"text-sm",children:e.ipAddress})]}),Ot.jsx("p",{className:"text-xs text-muted-foreground mt-1 truncate",children:e.userAgent})]}),Ot.jsxs("div",{className:"text-right",children:[Ot.jsx("p",{className:"text-sm font-medium",children:"success"===e.eventStatus?"Success":"Failed"}),Ot.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(e.createdAt).toLocaleString()})]})]},e.id)),0===n.length&&Ot.jsx("p",{className:"text-center py-8 text-muted-foreground",children:"No audit logs yet"})]})})]})}),Ot.jsx(Ys,{value:"events",className:"space-y-4",children:Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{children:[Ot.jsx(zr,{children:"Security Events"}),Ot.jsx(Ur,{children:"Suspicious activities and security incidents"})]}),Ot.jsx(Mn,{children:Ot.jsxs("div",{className:"space-y-3",children:[s.slice(0,20).map(e=>Ot.jsx(Sn,{className:"p-4",children:Ot.jsxs("div",{className:"flex items-start justify-between",children:[Ot.jsxs("div",{className:"flex-1",children:[Ot.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[Ot.jsx(Tn,{variant:"high"===e.severity?"destructive":"medium"===e.severity?"default":"secondary",children:e.severity.toUpperCase()}),Ot.jsx("span",{className:"font-semibold",children:e.eventType})]}),Ot.jsx("p",{className:"text-sm text-muted-foreground",children:e.description}),Ot.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-muted-foreground",children:[Ot.jsxs("span",{children:["IP: ",e.ipAddress]}),Ot.jsx("span",{children:new Date(e.createdAt).toLocaleString()})]})]}),e.resolved?Ot.jsx(Tn,{variant:"outline",children:"Resolved"}):Ot.jsx(Tn,{variant:"destructive",children:"Active"})]})},e.id)),0===s.length&&Ot.jsx("p",{className:"text-center py-8 text-muted-foreground",children:"No security events"})]})})]})}),Ot.jsx(Ys,{value:"tokens",className:"space-y-4",children:Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{children:[Ot.jsx(zr,{children:"OAuth Token Status"}),Ot.jsx(Ur,{children:"Social media account token health"})]}),Ot.jsx(Mn,{children:Ot.jsxs("div",{className:"space-y-3",children:[i?.tokens.map(e=>Ot.jsxs("div",{className:"flex items-center justify-between py-3 border-b last:border-0",children:[Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsx(Yr,{className:"h-5 w-5 text-muted-foreground"}),Ot.jsxs("div",{children:[Ot.jsx("p",{className:"font-medium capitalize",children:e.platform}),Ot.jsx("p",{className:"text-xs text-muted-foreground",children:e.expiresAt?`Expires: ${new Date(e.expiresAt).toLocaleDateString()}`:"No expiry"})]})]}),Ot.jsx(Tn,{variant:"expired"===e.status?"destructive":"expiring_soon"===e.status?"default":"valid"===e.status?"outline":"secondary",children:"expiring_soon"===e.status?"Expiring Soon":e.status})]},e.accountId)),(!i?.tokens||0===i.tokens.length)&&Ot.jsx("p",{className:"text-center py-8 text-muted-foreground",children:"No OAuth tokens configured"})]})})]})})]})]})}function Txe(){const{user:e}=Ua(),{toast:t}=Nn(),n=La(),[,r]=_n(),[s,i]=hn.useState("overview"),[a,o]=hn.useState(null),[l,c]=hn.useState(null),[d,u]=hn.useState(null);if(!e?.isAdmin)return Ot.jsx("div",{className:"container mx-auto px-4 py-8",children:Ot.jsxs(Sn,{className:"max-w-md mx-auto mt-20",children:[Ot.jsxs(Lr,{children:[Ot.jsxs(zr,{className:"flex items-center gap-2",children:[Ot.jsx(Rn,{className:"h-6 w-6 text-red-500"}),"Access Denied"]}),Ot.jsx(Ur,{children:"You don't have administrator privileges."})]}),Ot.jsx(Mn,{children:Ot.jsx(Ln,{onClick:()=>r("/"),className:"w-full",children:"Return to Home"})})]})});const{data:h}=za({queryKey:["/api/admin/stats"]}),{data:p=[],isLoading:m}=za({queryKey:["/api/admin/users"]}),{data:f=[],isLoading:g}=za({queryKey:["/api/admin/businesses"]}),{data:x=[],isLoading:v}=za({queryKey:["/api/admin/orders"]}),y=Fa({mutationFn:async({userId:e,action:t})=>await qn("POST",`/api/admin/users/${e}/${t}`,{}),onSuccess:()=>{n.invalidateQueries({queryKey:["/api/admin/users"]}),n.invalidateQueries({queryKey:["/api/admin/stats"]}),t({title:"Action completed",description:"User action executed successfully."}),o(null)},onError:e=>{t({title:"Action failed",description:e.message||"Failed to execute action.",variant:"destructive"})}}),b=Fa({mutationFn:async({businessId:e,action:t})=>await qn("POST",`/api/admin/businesses/${e}/${t}`,{}),onSuccess:()=>{n.invalidateQueries({queryKey:["/api/admin/businesses"]}),n.invalidateQueries({queryKey:["/api/admin/stats"]}),t({title:"Action completed",description:"Business action executed successfully."}),o(null)},onError:e=>{t({title:"Action failed",description:e.message||"Failed to execute action.",variant:"destructive"})}});return Ot.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 via-white to-gray-50 dark:from-gray-950 dark:to-gray-900",children:[Ot.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-r from-red-600 via-orange-600 to-yellow-600 text-white",children:[Ot.jsx("div",{className:"absolute inset-0 opacity-10",children:Ot.jsx("div",{className:"absolute inset-0",style:{backgroundImage:"radial-gradient(circle at 20% 50%, rgba(255,255,255,0.3) 0%, transparent 50%),\n                             radial-gradient(circle at 80% 50%, rgba(255,255,255,0.3) 0%, transparent 50%)"}})}),Ot.jsx("div",{className:"container mx-auto px-4 py-8 relative z-10",children:Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{className:"flex items-center gap-4",children:[Ot.jsx("div",{className:"p-4 bg-white/20 backdrop-blur-sm rounded-2xl border border-white/30 shadow-xl",children:Ot.jsx(Rn,{className:"h-8 w-8"})}),Ot.jsxs("div",{children:[Ot.jsx("h1",{className:"text-4xl font-bold tracking-tight",children:"Elite Admin Dashboard"}),Ot.jsx("p",{className:"text-lg text-white/90 mt-1",children:"Platform Management & Analytics Control Center"})]})]}),Ot.jsx("div",{className:"hidden md:flex items-center gap-4",children:Ot.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl px-4 py-2 border border-white/20",children:[Ot.jsx("p",{className:"text-xs text-white/70",children:"Logged in as"}),Ot.jsxs("p",{className:"font-semibold",children:[e.firstName," ",e.lastName]})]})})]})}),Ot.jsx("div",{className:"absolute bottom-0 left-0 right-0",children:Ot.jsx("svg",{className:"w-full h-6 text-gray-50 dark:text-gray-950",preserveAspectRatio:"none",viewBox:"0 0 1200 120",xmlns:"http://www.w3.org/2000/svg",children:Ot.jsx("path",{fill:"currentColor",d:"M0,0 C300,50 900,50 1200,0 L1200,120 L0,120 Z"})})})]}),Ot.jsx("div",{className:"container mx-auto px-4 py-8",children:Ot.jsxs(qs,{value:s,onValueChange:i,className:"space-y-6",children:[Ot.jsxs(Xs,{className:"grid w-full grid-cols-5 md:grid-cols-9 lg:w-auto lg:inline-grid gap-1",children:[Ot.jsxs(Ks,{value:"overview",className:"flex items-center gap-2",children:[Ot.jsx(Hs,{className:"h-4 w-4"}),Ot.jsx("span",{className:"hidden sm:inline",children:"Overview"})]}),Ot.jsxs(Ks,{value:"security",className:"flex items-center gap-2",children:[Ot.jsx(Rn,{className:"h-4 w-4"}),Ot.jsx("span",{className:"hidden sm:inline",children:"Security"})]}),Ot.jsxs(Ks,{value:"users",className:"flex items-center gap-2",children:[Ot.jsx(On,{className:"h-4 w-4"}),Ot.jsx("span",{className:"hidden sm:inline",children:"Users"})]}),Ot.jsxs(Ks,{value:"businesses",className:"flex items-center gap-2",children:[Ot.jsx(Zr,{className:"h-4 w-4"}),Ot.jsx("span",{className:"hidden sm:inline",children:"Businesses"})]}),Ot.jsxs(Ks,{value:"orders",className:"flex items-center gap-2",children:[Ot.jsx(Ir,{className:"h-4 w-4"}),Ot.jsx("span",{className:"hidden sm:inline",children:"Orders"})]}),Ot.jsxs(Ks,{value:"content",className:"flex items-center gap-2",children:[Ot.jsx(cs,{className:"h-4 w-4"}),Ot.jsx("span",{className:"hidden sm:inline",children:"Content"})]}),Ot.jsxs(Ks,{value:"marketing",className:"flex items-center gap-2",children:[Ot.jsx(Jr,{className:"h-4 w-4"}),Ot.jsx("span",{className:"hidden sm:inline",children:"Marketing"})]}),Ot.jsxs(Ks,{value:"loyalty",className:"flex items-center gap-2",children:[Ot.jsx(sr,{className:"h-4 w-4"}),Ot.jsx("span",{className:"hidden sm:inline",children:"Loyalty"})]}),Ot.jsxs(Ks,{value:"system",className:"flex items-center gap-2",children:[Ot.jsx(Ri,{className:"h-4 w-4"}),Ot.jsx("span",{className:"hidden sm:inline",children:"System"})]})]}),Ot.jsxs(Ys,{value:"overview",className:"space-y-6",children:[Ot.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[Ot.jsxs(Sn,{className:"border-2 hover:shadow-lg transition-shadow",children:[Ot.jsxs(Lr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ot.jsx(zr,{className:"text-sm font-medium",children:"Total Users"}),Ot.jsx(On,{className:"h-5 w-5 text-blue-600"})]}),Ot.jsxs(Mn,{children:[Ot.jsx("div",{className:"text-3xl font-bold",children:h?.totalUsers||0}),Ot.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[h?.activeUsers||0," active today"]})]})]}),Ot.jsxs(Sn,{className:"border-2 hover:shadow-lg transition-shadow",children:[Ot.jsxs(Lr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ot.jsx(zr,{className:"text-sm font-medium",children:"Total Businesses"}),Ot.jsx(Zr,{className:"h-5 w-5 text-green-600"})]}),Ot.jsxs(Mn,{children:[Ot.jsx("div",{className:"text-3xl font-bold",children:h?.totalBusinesses||0}),Ot.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[h?.pendingApprovals||0," pending approval"]})]})]}),Ot.jsxs(Sn,{className:"border-2 hover:shadow-lg transition-shadow",children:[Ot.jsxs(Lr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ot.jsx(zr,{className:"text-sm font-medium",children:"Total Orders"}),Ot.jsx(Ir,{className:"h-5 w-5 text-purple-600"})]}),Ot.jsxs(Mn,{children:[Ot.jsx("div",{className:"text-3xl font-bold",children:h?.totalOrders||0}),Ot.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"All time"})]})]}),Ot.jsxs(Sn,{className:"border-2 hover:shadow-lg transition-shadow",children:[Ot.jsxs(Lr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ot.jsx(zr,{className:"text-sm font-medium",children:"Total Revenue"}),Ot.jsx(ar,{className:"h-5 w-5 text-yellow-600"})]}),Ot.jsxs(Mn,{children:[Ot.jsxs("div",{className:"text-3xl font-bold",children:["$",((h?.totalRevenue||0)/100).toLocaleString()]}),Ot.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Gross merchandise value"})]})]})]}),Ot.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{children:[Ot.jsx(zr,{children:"Recent Users"}),Ot.jsx(Ur,{children:"Newest registered users"})]}),Ot.jsx(Mn,{children:Ot.jsx("div",{className:"space-y-4",children:p.slice(0,5).map(e=>Ot.jsxs("div",{className:"flex items-center justify-between py-2 border-b last:border-0",children:[Ot.jsxs("div",{children:[Ot.jsxs("p",{className:"font-medium",children:[e.firstName," ",e.lastName]}),Ot.jsx("p",{className:"text-sm text-muted-foreground",children:e.email})]}),Ot.jsx(Tn,{variant:e.isAdmin?"default":"secondary",children:e.isAdmin?"Admin":"User"})]},e.id))})})]}),Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{children:[Ot.jsx(zr,{children:"Recent Businesses"}),Ot.jsx(Ur,{children:"Latest business registrations"})]}),Ot.jsx(Mn,{children:Ot.jsx("div",{className:"space-y-4",children:f.slice(0,5).map(e=>Ot.jsxs("div",{className:"flex items-center justify-between py-2 border-b last:border-0",children:[Ot.jsxs("div",{children:[Ot.jsx("p",{className:"font-medium",children:e.name}),Ot.jsx("p",{className:"text-sm text-muted-foreground",children:e.category})]}),Ot.jsx(Tn,{variant:e.isVerified?"default":"secondary",children:e.isVerified?"Verified":"Pending"})]},e.id))})})]})]})]}),Ot.jsx(Ys,{value:"security",children:Ot.jsx(Axe,{})}),Ot.jsx(Ys,{value:"users",children:Ot.jsx(Pxe,{users:p,isLoading:m,onAction:(e,t)=>{"view"===t?c(e):o({type:`user-${t}`,id:e})}})}),Ot.jsx(Ys,{value:"businesses",children:Ot.jsx(Oxe,{businesses:f,isLoading:g,onAction:(e,t)=>{"view"===t?u(e):o({type:`business-${t}`,id:e})}})}),Ot.jsx(Ys,{value:"orders",children:Ot.jsx(Rxe,{orders:x,isLoading:v})}),Ot.jsx(Ys,{value:"content",children:Ot.jsx(Mxe,{})}),Ot.jsx(Ys,{value:"marketing",children:Ot.jsx(Cxe,{})}),Ot.jsx(Ys,{value:"loyalty",children:Ot.jsx(Exe,{})}),Ot.jsx(Ys,{value:"system",children:Ot.jsx(kxe,{})})]})}),l&&Ot.jsx(_xe,{userId:l,open:!!l,onOpenChange:e=>!e&&c(null)}),d&&Ot.jsx(Sxe,{businessId:d,open:!!d,onOpenChange:e=>!e&&u(null)}),Ot.jsx($O,{open:!!a,onOpenChange:()=>o(null),children:Ot.jsxs(KO,{children:[Ot.jsxs(YO,{children:[Ot.jsx(JO,{children:"Confirm Action"}),Ot.jsx(QO,{children:"Are you sure you want to perform this action? This may affect the user or business immediately."})]}),Ot.jsxs(ZO,{children:[Ot.jsx(tR,{children:"Cancel"}),Ot.jsx(eR,{onClick:()=>{if(a)if(a.type.startsWith("user-")){const e=a.type.replace("user-","");y.mutate({userId:a.id,action:e})}else if(a.type.startsWith("business-")){const e=a.type.replace("business-","");b.mutate({businessId:a.id,action:e})}},children:"Confirm"})]})]})})]})}function Pxe({users:e,isLoading:t,onAction:n}){const[r,s]=hn.useState([]),[i,a]=hn.useState([]),[o,l]=hn.useState(""),c={accessor:(e,t)=>"function"==typeof e?{...t,accessorFn:e}:{...t,accessorKey:e},display:e=>e,group:e=>e},d=[c.accessor("email",{header:({column:e})=>Ot.jsxs(Ln,{variant:"ghost",onClick:()=>e.toggleSorting("asc"===e.getIsSorted()),children:["Email",Ot.jsx(Ui,{className:"ml-2 h-4 w-4"})]}),cell:e=>e.getValue()}),c.accessor("firstName",{header:"Name",cell:e=>`${e.getValue()} ${e.row.original.lastName||""}`}),c.accessor("isAdmin",{header:"Role",cell:e=>Ot.jsx(Tn,{variant:e.getValue()?"default":"secondary",children:e.getValue()?"Admin":"User"})}),c.accessor("createdAt",{header:"Joined",cell:e=>{const t=e.getValue();return t?new Date(t).toLocaleDateString():"N/A"}}),c.display({id:"actions",header:"Actions",cell:e=>Ot.jsxs(MD,{children:[Ot.jsx(CD,{asChild:!0,children:Ot.jsx(Ln,{variant:"ghost",className:"h-8 w-8 p-0",children:Ot.jsx(Is,{className:"h-4 w-4"})})}),Ot.jsxs(ED,{align:"end",children:[Ot.jsx(AD,{children:"Actions"}),Ot.jsxs(kD,{onClick:()=>n(e.row.original.id,"promote"),children:[Ot.jsx(Vi,{className:"mr-2 h-4 w-4"}),e.row.original.isAdmin?"Demote from Admin":"Promote to Admin"]}),Ot.jsxs(kD,{onClick:()=>n(e.row.original.id,"view"),children:[Ot.jsx($r,{className:"mr-2 h-4 w-4"}),"View Details"]}),Ot.jsx(TD,{}),Ot.jsxs(kD,{onClick:()=>n(e.row.original.id,"ban"),className:"text-red-600",children:[Ot.jsx(Hi,{className:"mr-2 h-4 w-4"}),"Ban User"]})]})]})})],u=function(e){const t={state:{},onStateChange:()=>{},renderFallbackValue:null,...e},[n]=hn.useState(()=>({current:fxe(t)})),[r,s]=hn.useState(()=>n.current.initialState);return n.current.setOptions(t=>({...t,...e,state:{...r,...e.state},onStateChange:t=>{s(t),null==e.onStateChange||e.onStateChange(t)}})),n.current}({data:e,columns:d,getCoreRowModel:e=>Mge(()=>[e.options.data],t=>{const n={rows:[],flatRows:[],rowsById:{}},r=function(t,s,i){void 0===s&&(s=0);const a=[];for(let l=0;l<t.length;l++){const c=Pge(e,e._getRowId(t[l],l,i),t[l],l,s,0,null==i?void 0:i.id);var o;n.flatRows.push(c),n.rowsById[c.id]=c,a.push(c),e.options.getSubRows&&(c.originalSubRows=e.options.getSubRows(t[l],l),null!=(o=c.originalSubRows)&&o.length&&(c.subRows=r(c.originalSubRows,s+1,c)))}return a};return n.rows=r(t),n},Cge(e.options,"debugTable",0,()=>e._autoResetPageIndex())),getPaginationRowModel:e=>Mge(()=>[e.getState().pagination,e.getPrePaginationRowModel(),e.options.paginateExpandedRows?void 0:e.getState().expanded],(t,n)=>{if(!n.rows.length)return n;const{pageSize:r,pageIndex:s}=t;let{rows:i,flatRows:a,rowsById:o}=n;const l=r*s,c=l+r;let d;i=i.slice(l,c),d=e.options.paginateExpandedRows?{rows:i,flatRows:a,rowsById:o}:function(e){const t=[],n=e=>{var r;t.push(e),null!=(r=e.subRows)&&r.length&&e.getIsExpanded()&&e.subRows.forEach(n)};return e.rows.forEach(n),{rows:t,flatRows:e.flatRows,rowsById:e.rowsById}}({rows:i,flatRows:a,rowsById:o}),d.flatRows=[];const u=e=>{d.flatRows.push(e),e.subRows.length&&e.subRows.forEach(u)};return d.rows.forEach(u),d},Cge(e.options,"debugTable")),getSortedRowModel:e=>Mge(()=>[e.getState().sorting,e.getPreSortedRowModel()],(t,n)=>{if(!n.rows.length||null==t||!t.length)return n;const r=e.getState().sorting,s=[],i=r.filter(t=>{var n;return null==(n=e.getColumn(t.id))?void 0:n.getCanSort()}),a={};i.forEach(t=>{const n=e.getColumn(t.id);n&&(a[t.id]={sortUndefined:n.columnDef.sortUndefined,invertSorting:n.columnDef.invertSorting,sortingFn:n.getSortingFn()})});const o=e=>{const t=e.map(e=>({...e}));return t.sort((e,t)=>{for(let r=0;r<i.length;r+=1){var n;const s=i[r],o=a[s.id],l=o.sortUndefined,c=null!=(n=null==s?void 0:s.desc)&&n;let d=0;if(l){const n=void 0===e.getValue(s.id),r=void 0===t.getValue(s.id);if(n||r){if("first"===l)return n?-1:1;if("last"===l)return n?1:-1;d=n&&r?0:n?l:-l}}if(0===d&&(d=o.sortingFn(e,t,s.id)),0!==d)return c&&(d*=-1),o.invertSorting&&(d*=-1),d}return e.index-t.index}),t.forEach(e=>{var t;s.push(e),null!=(t=e.subRows)&&t.length&&(e.subRows=o(e.subRows))}),t};return{rows:o(n.rows),flatRows:s,rowsById:n.rowsById}},Cge(e.options,"debugTable",0,()=>e._autoResetPageIndex())),getFilteredRowModel:e=>Mge(()=>[e.getPreFilteredRowModel(),e.getState().columnFilters,e.getState().globalFilter],(t,n,r)=>{if(!t.rows.length||(null==n||!n.length)&&!r){for(let e=0;e<t.flatRows.length;e++)t.flatRows[e].columnFilters={},t.flatRows[e].columnFiltersMeta={};return t}const s=[],i=[];(null!=n?n:[]).forEach(t=>{var n;const r=e.getColumn(t.id);if(!r)return;const i=r.getFilterFn();i&&s.push({id:t.id,filterFn:i,resolvedValue:null!=(n=null==i.resolveFilterValue?void 0:i.resolveFilterValue(t.value))?n:t.value})});const a=(null!=n?n:[]).map(e=>e.id),o=e.getGlobalFilterFn(),l=e.getAllLeafColumns().filter(e=>e.getCanGlobalFilter());let c,d;r&&o&&l.length&&(a.push("__global__"),l.forEach(e=>{var t;i.push({id:e.id,filterFn:o,resolvedValue:null!=(t=null==o.resolveFilterValue?void 0:o.resolveFilterValue(r))?t:r})}));for(let e=0;e<t.flatRows.length;e++){const n=t.flatRows[e];if(n.columnFilters={},s.length)for(let e=0;e<s.length;e++){c=s[e];const t=c.id;n.columnFilters[t]=c.filterFn(n,t,c.resolvedValue,e=>{n.columnFiltersMeta[t]=e})}if(i.length){for(let e=0;e<i.length;e++){d=i[e];const t=d.id;if(d.filterFn(n,t,d.resolvedValue,e=>{n.columnFiltersMeta[t]=e})){n.columnFilters.__global__=!0;break}}!0!==n.columnFilters.__global__&&(n.columnFilters.__global__=!1)}}return gxe(t.rows,e=>{for(let t=0;t<a.length;t++)if(!1===e.columnFilters[a[t]])return!1;return!0},e)},Cge(e.options,"debugTable",0,()=>e._autoResetPageIndex())),onSortingChange:s,onColumnFiltersChange:a,onGlobalFilterChange:l,state:{sorting:r,columnFilters:i,globalFilter:o}});return Ot.jsxs(Sn,{children:[Ot.jsx(Lr,{children:Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{children:[Ot.jsx(zr,{children:"User Management"}),Ot.jsx(Ur,{children:"Manage all platform users"})]}),Ot.jsxs("div",{className:"relative w-64",children:[Ot.jsx(Fn,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),Ot.jsx(zn,{placeholder:"Search users...",value:o,onChange:e=>l(e.target.value),className:"pl-8"})]})]})}),Ot.jsx(Mn,{children:t?Ot.jsx("div",{className:"text-center py-12",children:"Loading users..."}):Ot.jsxs(Ot.Fragment,{children:[Ot.jsx("div",{className:"rounded-md border",children:Ot.jsxs(vxe,{children:[Ot.jsx(yxe,{children:u.getHeaderGroups().map(e=>Ot.jsx(wxe,{children:e.headers.map(e=>Ot.jsx(jxe,{children:e.isPlaceholder?null:xxe(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),Ot.jsx(bxe,{children:u.getRowModel().rows.length?u.getRowModel().rows.map(e=>Ot.jsx(wxe,{children:e.getVisibleCells().map(e=>Ot.jsx(Nxe,{children:xxe(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):Ot.jsx(wxe,{children:Ot.jsx(Nxe,{colSpan:d.length,className:"h-24 text-center",children:"No users found."})})})]})}),Ot.jsxs("div",{className:"flex items-center justify-between space-x-2 py-4",children:[Ot.jsxs("div",{className:"text-sm text-muted-foreground",children:[u.getFilteredRowModel().rows.length," user(s) total"]}),Ot.jsxs("div",{className:"space-x-2",children:[Ot.jsx(Ln,{variant:"outline",size:"sm",onClick:()=>u.previousPage(),disabled:!u.getCanPreviousPage(),children:"Previous"}),Ot.jsx(Ln,{variant:"outline",size:"sm",onClick:()=>u.nextPage(),disabled:!u.getCanNextPage(),children:"Next"})]})]})]})})]})}function Oxe({businesses:e,isLoading:t,onAction:n}){const[r,s]=hn.useState("");return Ot.jsxs(Sn,{children:[Ot.jsx(Lr,{children:Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{children:[Ot.jsx(zr,{children:"Business Management"}),Ot.jsx(Ur,{children:"Approve, verify, and manage businesses"})]}),Ot.jsxs("div",{className:"relative w-64",children:[Ot.jsx(Fn,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),Ot.jsx(zn,{placeholder:"Search businesses...",value:r,onChange:e=>s(e.target.value),className:"pl-8"})]})]})}),Ot.jsx(Mn,{children:t?Ot.jsx("div",{className:"text-center py-12",children:"Loading businesses..."}):Ot.jsx("div",{className:"space-y-4",children:e.filter(e=>!r||(e.name.toLowerCase().includes(r.toLowerCase())||e.category?.toLowerCase().includes(r.toLowerCase()))).map(e=>Ot.jsx(Sn,{className:"p-4",children:Ot.jsxs("div",{className:"flex items-start justify-between",children:[Ot.jsxs("div",{className:"flex gap-4",children:[e.logoUrl&&Ot.jsx("img",{src:e.logoUrl,alt:e.name,className:"w-16 h-16 rounded-lg object-cover"}),Ot.jsxs("div",{children:[Ot.jsx("h3",{className:"font-semibold text-lg",children:e.name}),Ot.jsx("p",{className:"text-sm text-muted-foreground",children:e.tagline}),Ot.jsxs("div",{className:"flex gap-2 mt-2",children:[Ot.jsx(Tn,{variant:"outline",children:e.category}),Ot.jsx(Tn,{variant:"outline",children:e.location}),e.isVerified&&Ot.jsx(Tn,{variant:"default",className:"bg-green-500",children:"Verified"})]})]})]}),Ot.jsxs(MD,{children:[Ot.jsx(CD,{asChild:!0,children:Ot.jsx(Ln,{variant:"ghost",className:"h-8 w-8 p-0",children:Ot.jsx(Is,{className:"h-4 w-4"})})}),Ot.jsxs(ED,{align:"end",children:[Ot.jsx(AD,{children:"Actions"}),Ot.jsxs(kD,{onClick:()=>n(e.id,"verify"),children:[Ot.jsx(us,{className:"mr-2 h-4 w-4"}),e.isVerified?"Remove Verification":"Verify Business"]}),Ot.jsxs(kD,{onClick:()=>n(e.id,"view"),children:[Ot.jsx($r,{className:"mr-2 h-4 w-4"}),"View Details"]}),Ot.jsx(TD,{}),Ot.jsxs(kD,{onClick:()=>n(e.id,"delete"),className:"text-red-600",children:[Ot.jsx(vs,{className:"mr-2 h-4 w-4"}),"Delete Business"]})]})]})]})},e.id))})})]})}function Rxe({orders:e,isLoading:t}){const[n,r]=hn.useState("");return Ot.jsxs(Sn,{children:[Ot.jsx(Lr,{children:Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{children:[Ot.jsx(zr,{children:"Order Management"}),Ot.jsx(Ur,{children:"View and manage all platform orders"})]}),Ot.jsxs("div",{className:"relative w-64",children:[Ot.jsx(Fn,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),Ot.jsx(zn,{placeholder:"Search orders...",value:n,onChange:e=>r(e.target.value),className:"pl-8"})]})]})}),Ot.jsx(Mn,{children:t?Ot.jsx("div",{className:"text-center py-12",children:"Loading orders..."}):0===e.length?Ot.jsx("div",{className:"text-center py-12 text-muted-foreground",children:"No orders yet"}):Ot.jsx("div",{className:"space-y-4",children:e.slice(0,20).map(e=>Ot.jsx(Sn,{className:"p-4",children:Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{children:[Ot.jsxs("p",{className:"font-medium",children:["Order #",e.id.slice(0,8)]}),Ot.jsx("p",{className:"text-sm text-muted-foreground",children:e.customerEmail})]}),Ot.jsxs("div",{className:"text-right",children:[Ot.jsxs("p",{className:"font-bold",children:["$",e.total]}),Ot.jsx(Tn,{variant:"delivered"===e.status?"default":"secondary",children:e.status})]})]})},e.id))})})]})}function Ixe({businessId:e,className:t="",compact:n=!1}){const{toast:r}=Nn(),[s,i]=hn.useState(!1),{data:a,isLoading:o}=za({queryKey:["/api/gmb/sync-status",e],queryFn:async()=>({isConnected:!0,businessName:"Miami Beach Boutique",locationId:"12345678901234567890",lastSyncedAt:new Date(Date.now()-9e5).toISOString(),syncStatus:"synced",autoPostEnabled:!0,reviewSyncEnabled:!0,photoSyncEnabled:!1,stats:{totalReviews:127,averageRating:4.7,photosCount:45,postsCount:23,viewsLastMonth:1245,searchesLastMonth:892}}),enabled:Boolean(e),refetchInterval:3e4}),l=Fa({mutationFn:async()=>{i(!0),await new Promise(e=>setTimeout(e,2e3)),i(!1)},onSuccess:()=>{r({title:"Sync Complete",description:"Google My Business data has been synced successfully."}),vr.invalidateQueries({queryKey:["/api/gmb/sync-status",e]})},onError:()=>{i(!1),r({title:"Sync Failed",description:"Failed to sync with Google My Business. Please try again.",variant:"destructive"})}}),c=()=>{window.location.href=`/api/gmb/connect?businessId=${e}`};return o?Ot.jsxs(Sn,{className:`entrance-fade-up ${t}`,children:[Ot.jsxs(Lr,{children:[Ot.jsx(er,{className:"h-6 w-48"}),Ot.jsx(er,{className:"h-4 w-64 mt-2"})]}),Ot.jsx(Mn,{children:Ot.jsx(er,{className:"h-32 w-full"})})]}):a?.isConnected?n?Ot.jsx(Sn,{className:`entrance-fade-up ${t}`,children:Ot.jsx(Mn,{className:"pt-6",children:Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center "+("synced"===a.syncStatus?"bg-emerald-100":"syncing"===a.syncStatus?"bg-blue-100":"bg-red-100"),children:"synced"===a.syncStatus?Ot.jsx(zs,{className:"w-5 h-5 text-emerald-600"}):"syncing"===a.syncStatus?Ot.jsx(Fs,{className:"w-5 h-5 text-blue-600 animate-spin"}):Ot.jsx(Cn,{className:"w-5 h-5 text-red-600"})}),Ot.jsxs("div",{children:[Ot.jsx("h4",{className:"font-semibold text-sm",children:"GMB Connected"}),Ot.jsx("p",{className:"text-xs text-muted-foreground",children:a.lastSyncedAt&&Uo(new Date(a.lastSyncedAt),{addSuffix:!0})})]})]}),Ot.jsx(Ln,{variant:"ghost",size:"sm",onClick:()=>l.mutate(),disabled:s,children:Ot.jsx(Fs,{className:"w-4 h-4 "+(s?"animate-spin":"")})})]})})}):Ot.jsxs(Sn,{className:`entrance-fade-up ${t}`,children:[Ot.jsx(Lr,{children:Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-emerald-500 to-teal-600 flex items-center justify-center shadow-lg",children:Ot.jsx(Bn,{className:"w-6 h-6 text-white"})}),Ot.jsxs("div",{children:[Ot.jsxs(zr,{className:"flex items-center gap-2",children:["Google My Business","synced"===a.syncStatus&&Ot.jsxs(Tn,{variant:"outline",className:"bg-emerald-50 text-emerald-700 border-emerald-300",children:[Ot.jsx(Wi,{className:"w-3 h-3 mr-1"}),"Connected"]})]}),Ot.jsx(Ur,{children:a.businessName})]})]}),Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsxs(Ln,{variant:"outline",size:"sm",onClick:()=>l.mutate(),disabled:s,children:[Ot.jsx(Fs,{className:"w-4 h-4 mr-2 "+(s?"animate-spin":"")}),"Sync Now"]}),a.locationId&&Ot.jsx(Ln,{variant:"ghost",size:"sm",onClick:()=>window.open(`https://business.google.com/locations/${a.locationId}`,"_blank"),children:Ot.jsx(Si,{className:"w-4 h-4"})})]})]})}),Ot.jsxs(Mn,{className:"space-y-6",children:[Ot.jsxs("div",{children:[Ot.jsxs("div",{className:"flex items-center justify-between mb-2",children:[Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx(xr,{className:"w-4 h-4 text-muted-foreground"}),Ot.jsx("span",{className:"text-sm font-medium",children:"Last Synced"})]}),Ot.jsx("span",{className:"text-sm text-muted-foreground",children:a.lastSyncedAt&&Uo(new Date(a.lastSyncedAt),{addSuffix:!0})})]}),"syncing"===a.syncStatus&&void 0!==a.syncProgress&&Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsx(Vr,{value:a.syncProgress,className:"h-2"}),Ot.jsxs("p",{className:"text-xs text-muted-foreground text-center",children:["Syncing data... ",a.syncProgress,"%"]})]})]}),Ot.jsxs("div",{children:[Ot.jsx("h4",{className:"text-sm font-semibold mb-3",children:"Sync Features"}),Ot.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[Ot.jsxs("div",{className:"p-3 rounded-lg border "+(a.autoPostEnabled?"bg-emerald-50 border-emerald-200":"bg-gray-50 border-gray-200"),children:[Ot.jsxs("div",{className:"flex items-center justify-between mb-1",children:[Ot.jsx("span",{className:"text-sm font-medium",children:"Auto-Post"}),a.autoPostEnabled?Ot.jsx(zs,{className:"w-4 h-4 text-emerald-600"}):Ot.jsx($i,{className:"w-4 h-4 text-gray-400"})]}),Ot.jsx("p",{className:"text-xs text-muted-foreground",children:a.autoPostEnabled?"Active":"Disabled"})]}),Ot.jsxs("div",{className:"p-3 rounded-lg border "+(a.reviewSyncEnabled?"bg-emerald-50 border-emerald-200":"bg-gray-50 border-gray-200"),children:[Ot.jsxs("div",{className:"flex items-center justify-between mb-1",children:[Ot.jsx("span",{className:"text-sm font-medium",children:"Review Sync"}),a.reviewSyncEnabled?Ot.jsx(zs,{className:"w-4 h-4 text-emerald-600"}):Ot.jsx($i,{className:"w-4 h-4 text-gray-400"})]}),Ot.jsx("p",{className:"text-xs text-muted-foreground",children:a.reviewSyncEnabled?"Active":"Disabled"})]}),Ot.jsxs("div",{className:"p-3 rounded-lg border "+(a.photoSyncEnabled?"bg-emerald-50 border-emerald-200":"bg-gray-50 border-gray-200"),children:[Ot.jsxs("div",{className:"flex items-center justify-between mb-1",children:[Ot.jsx("span",{className:"text-sm font-medium",children:"Photo Sync"}),a.photoSyncEnabled?Ot.jsx(zs,{className:"w-4 h-4 text-emerald-600"}):Ot.jsx($i,{className:"w-4 h-4 text-gray-400"})]}),Ot.jsx("p",{className:"text-xs text-muted-foreground",children:a.photoSyncEnabled?"Active":"Disabled"})]})]})]}),Ot.jsxs("div",{children:[Ot.jsx("h4",{className:"text-sm font-semibold mb-3",children:"GMB Performance"}),Ot.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[Ot.jsxs("div",{className:"text-center p-3 rounded-lg bg-gradient-to-br from-blue-50 to-blue-100/50",children:[Ot.jsx("div",{className:"text-2xl font-bold text-blue-700",children:a.stats.totalReviews}),Ot.jsx("div",{className:"text-xs text-blue-600 font-medium",children:"Reviews"})]}),Ot.jsxs("div",{className:"text-center p-3 rounded-lg bg-gradient-to-br from-amber-50 to-amber-100/50",children:[Ot.jsx("div",{className:"text-2xl font-bold text-amber-700",children:a.stats.averageRating.toFixed(1)}),Ot.jsx("div",{className:"text-xs text-amber-600 font-medium",children:"Rating"})]}),Ot.jsxs("div",{className:"text-center p-3 rounded-lg bg-gradient-to-br from-purple-50 to-purple-100/50",children:[Ot.jsx("div",{className:"text-2xl font-bold text-purple-700",children:a.stats.photosCount}),Ot.jsx("div",{className:"text-xs text-purple-600 font-medium",children:"Photos"})]}),Ot.jsxs("div",{className:"text-center p-3 rounded-lg bg-gradient-to-br from-emerald-50 to-emerald-100/50",children:[Ot.jsx("div",{className:"text-2xl font-bold text-emerald-700",children:a.stats.postsCount}),Ot.jsx("div",{className:"text-xs text-emerald-600 font-medium",children:"Posts"})]}),Ot.jsxs("div",{className:"text-center p-3 rounded-lg bg-gradient-to-br from-cyan-50 to-cyan-100/50",children:[Ot.jsx("div",{className:"text-2xl font-bold text-cyan-700",children:a.stats.viewsLastMonth.toLocaleString()}),Ot.jsx("div",{className:"text-xs text-cyan-600 font-medium",children:"Views (30d)"})]}),Ot.jsxs("div",{className:"text-center p-3 rounded-lg bg-gradient-to-br from-pink-50 to-pink-100/50",children:[Ot.jsx("div",{className:"text-2xl font-bold text-pink-700",children:a.stats.searchesLastMonth.toLocaleString()}),Ot.jsx("div",{className:"text-xs text-pink-600 font-medium",children:"Searches (30d)"})]})]})]}),a.errors&&a.errors.length>0&&Ot.jsx("div",{className:"p-4 rounded-lg bg-red-50 border border-red-200",children:Ot.jsxs("div",{className:"flex items-start gap-2",children:[Ot.jsx(Cn,{className:"w-5 h-5 text-red-600 mt-0.5 flex-shrink-0"}),Ot.jsxs("div",{className:"flex-1",children:[Ot.jsx("h4",{className:"text-sm font-semibold text-red-900 mb-1",children:"Sync Errors"}),Ot.jsx("ul",{className:"text-xs text-red-700 space-y-1",children:a.errors.map((e,t)=>Ot.jsxs("li",{children:[" ",e]},t))})]})]})}),Ot.jsxs("div",{className:"flex flex-wrap gap-2 pt-2 border-t",children:[Ot.jsxs(Ln,{variant:"outline",size:"sm",className:"flex-1",children:[Ot.jsx(Pn,{className:"w-4 h-4 mr-2"}),"Configure Sync"]}),Ot.jsx(Ln,{variant:"outline",size:"sm",onClick:()=>{r({title:"Disconnected",description:"Google My Business has been disconnected."})},className:"text-red-600 hover:text-red-700",children:"Disconnect"})]})]})]}):Ot.jsxs(Sn,{className:`entrance-fade-up border-orange-200 bg-orange-50/50 ${t}`,children:[Ot.jsxs(Lr,{children:[Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx(Cn,{className:"w-5 h-5 text-orange-600"}),Ot.jsx(zr,{children:"Google My Business Not Connected"})]}),Ot.jsx(Ur,{children:"Connect your Google My Business account to unlock powerful features"})]}),Ot.jsx(Mn,{children:Ot.jsxs("div",{className:"space-y-4",children:[Ot.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[Ot.jsxs("div",{className:"flex items-start gap-2",children:[Ot.jsx(zs,{className:"w-4 h-4 text-emerald-600 mt-0.5 flex-shrink-0"}),Ot.jsx("span",{children:"Auto-sync reviews and ratings"})]}),Ot.jsxs("div",{className:"flex items-start gap-2",children:[Ot.jsx(zs,{className:"w-4 h-4 text-emerald-600 mt-0.5 flex-shrink-0"}),Ot.jsx("span",{children:"Post updates automatically"})]}),Ot.jsxs("div",{className:"flex items-start gap-2",children:[Ot.jsx(zs,{className:"w-4 h-4 text-emerald-600 mt-0.5 flex-shrink-0"}),Ot.jsx("span",{children:"Sync photos and media"})]}),Ot.jsxs("div",{className:"flex items-start gap-2",children:[Ot.jsx(zs,{className:"w-4 h-4 text-emerald-600 mt-0.5 flex-shrink-0"}),Ot.jsx("span",{children:"Track performance insights"})]})]}),Ot.jsxs(Ln,{onClick:c,className:"w-full",size:"lg",children:[Ot.jsx(Bn,{className:"w-4 h-4 mr-2"}),"Connect Google My Business"]})]})})]})}function Dxe({businessId:e,className:t=""}){const{toast:n}=Nn(),[r,s]=hn.useState(""),[i,a]=hn.useState("all"),[o,l]=hn.useState("all"),[c,d]=hn.useState(null),[u,h]=hn.useState(""),[p,m]=hn.useState(!1),{data:f=[],isLoading:g}=za({queryKey:["/api/gmb/reviews",e,i,o],queryFn:async()=>{const e=new URLSearchParams;return"all"!==i&&e.set("rating",i),"all"!==o&&e.set("status",o),[{id:"1",reviewId:"gmb-review-1",authorName:"Sarah Johnson",rating:5,comment:"Amazing service! The staff was incredibly friendly and knowledgeable. I've already recommended this place to all my friends. Will definitely be back!",reviewTime:new Date(Date.now()-1728e5).toISOString(),hasReply:!0,reply:{text:"Thank you so much for the wonderful review, Sarah! We're thrilled to hear you had such a great experience. We look forward to serving you again soon!",updateTime:new Date(Date.now()-864e5).toISOString(),isAiGenerated:!0},needsResponse:!1},{id:"2",reviewId:"gmb-review-2",authorName:"Michael Chen",rating:4,comment:"Great products and atmosphere. Only issue was the wait time, but overall worth it!",reviewTime:new Date(Date.now()-432e6).toISOString(),hasReply:!1,needsResponse:!0},{id:"3",reviewId:"gmb-review-3",authorName:"Emma Rodriguez",rating:5,comment:"Best experience I've had in years! Professional, efficient, and the results exceeded my expectations.",reviewTime:new Date(Date.now()-6048e5).toISOString(),hasReply:!1,needsResponse:!0},{id:"4",reviewId:"gmb-review-4",authorName:"David Thompson",rating:3,comment:"Decent service but felt it was a bit overpriced for what we got. Staff was nice though.",reviewTime:new Date(Date.now()-864e6).toISOString(),hasReply:!1,needsResponse:!0}]},enabled:Boolean(e)}),x=Fa({mutationFn:async e=>{m(!0),await new Promise(e=>setTimeout(e,1500));const t={5:`Thank you so much for the wonderful ${e.rating}-star review, ${e.authorName}! We're thrilled to hear you had such a positive experience. Your kind words mean the world to our team, and we look forward to serving you again soon!`,4:`Thank you for your feedback, ${e.authorName}! We're glad you enjoyed your experience. We appreciate you mentioning the wait time - we're always working to improve. Hope to see you again soon!`,3:`Thank you for your honest feedback, ${e.authorName}. We appreciate your comments about pricing and are always evaluating our value proposition. We're glad our staff made a positive impression, and we hope to exceed your expectations next time!`};return{reply:t[e.rating]||t[4]}},onSuccess:e=>{h(e.reply),m(!1),n({title:"Reply Generated",description:"AI has drafted a response. Feel free to edit before posting."})},onError:()=>{m(!1),n({title:"Generation Failed",description:"Failed to generate reply. Please try again.",variant:"destructive"})}}),v=Fa({mutationFn:async({reviewId:e,reply:t})=>{await new Promise(e=>setTimeout(e,1e3))},onSuccess:()=>{n({title:"Reply Posted",description:"Your reply has been posted to Google My Business."}),d(null),h(""),vr.invalidateQueries({queryKey:["/api/gmb/reviews",e]})},onError:()=>{n({title:"Post Failed",description:"Failed to post reply. Please try again.",variant:"destructive"})}}),y=()=>{c&&x.mutate(c)},b=()=>{c&&u.trim()&&v.mutate({reviewId:c.reviewId,reply:u.trim()})},w=f.filter(e=>""===r||e.comment.toLowerCase().includes(r.toLowerCase())||e.authorName.toLowerCase().includes(r.toLowerCase())),j=f.filter(e=>e.needsResponse).length,N=f.length>0?f.reduce((e,t)=>e+t.rating,0)/f.length:0;return g?Ot.jsxs(Sn,{className:`entrance-fade-up ${t}`,children:[Ot.jsxs(Lr,{children:[Ot.jsx(er,{className:"h-6 w-48"}),Ot.jsx(er,{className:"h-4 w-64 mt-2"})]}),Ot.jsx(Mn,{children:Ot.jsx(er,{className:"h-64 w-full"})})]}):Ot.jsxs(Sn,{className:`entrance-fade-up ${t}`,children:[Ot.jsx(Lr,{children:Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{children:[Ot.jsxs(zr,{className:"flex items-center gap-2",children:[Ot.jsx(Or,{className:"w-5 h-5 text-blue-600"}),"Review Management"]}),Ot.jsx(Ur,{children:"Manage and respond to Google My Business reviews"})]}),Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsxs("div",{className:"text-right",children:[Ot.jsxs("div",{className:"text-2xl font-bold flex items-center gap-1",children:[N.toFixed(1),Ot.jsx(In,{className:"w-5 h-5 text-amber-500 fill-amber-500"})]}),Ot.jsxs("div",{className:"text-xs text-muted-foreground",children:[f.length," reviews"]})]}),j>0&&Ot.jsxs(Tn,{variant:"destructive",className:"animate-pulse",children:[j," pending"]})]})]})}),Ot.jsxs(Mn,{className:"space-y-4",children:[Ot.jsx("div",{className:"grid grid-cols-5 gap-2",children:[5,4,3,2,1].map(e=>{const t=f.filter(t=>t.rating===e).length,n=f.length>0?t/f.length*100:0;return Ot.jsxs("div",{className:"text-center",children:[Ot.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[Ot.jsx(In,{className:"w-3 h-3 "+(e>=4?"text-amber-500 fill-amber-500":"text-gray-400")}),Ot.jsx("span",{className:"text-xs font-medium",children:e})]}),Ot.jsx("div",{className:"h-2 bg-gray-100 rounded-full overflow-hidden",children:Ot.jsx("div",{className:"h-full bg-gradient-to-r from-amber-400 to-amber-500",style:{width:`${n}%`}})}),Ot.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:t})]},e)})}),Ot.jsxs("div",{className:"flex flex-col md:flex-row gap-3",children:[Ot.jsxs("div",{className:"flex-1 relative",children:[Ot.jsx(Fn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),Ot.jsx(zn,{placeholder:"Search reviews...",value:r,onChange:e=>s(e.target.value),className:"pl-10"})]}),Ot.jsxs(Un,{value:i,onValueChange:a,children:[Ot.jsx(Vn,{className:"w-full md:w-[140px]",children:Ot.jsx(Hn,{placeholder:"All Ratings"})}),Ot.jsxs(Wn,{children:[Ot.jsx($n,{value:"all",children:"All Ratings"}),Ot.jsx($n,{value:"5",children:"5 Stars"}),Ot.jsx($n,{value:"4",children:"4 Stars"}),Ot.jsx($n,{value:"3",children:"3 Stars"}),Ot.jsx($n,{value:"2",children:"2 Stars"}),Ot.jsx($n,{value:"1",children:"1 Star"})]})]}),Ot.jsxs(Un,{value:o,onValueChange:l,children:[Ot.jsx(Vn,{className:"w-full md:w-[140px]",children:Ot.jsx(Hn,{placeholder:"All Status"})}),Ot.jsxs(Wn,{children:[Ot.jsx($n,{value:"all",children:"All Status"}),Ot.jsx($n,{value:"needs-response",children:"Needs Response"}),Ot.jsx($n,{value:"replied",children:"Replied"})]})]})]}),Ot.jsx("div",{className:"space-y-3 max-h-[600px] overflow-y-auto",children:0===w.length?Ot.jsxs("div",{className:"text-center py-12",children:[Ot.jsx(Or,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),Ot.jsx("p",{className:"text-sm text-muted-foreground",children:"No reviews found"})]}):w.map((e,t)=>Ot.jsxs("div",{className:`\n                  border border-gray-200 rounded-lg p-4\n                  hover:border-blue-300 hover:shadow-md\n                  transition-all duration-300\n                  entrance-slide-right stagger-${Math.min(t+1,8)}\n                `,children:[Ot.jsxs("div",{className:"flex items-start justify-between mb-3",children:[Ot.jsxs("div",{className:"flex items-start gap-3",children:[Ot.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-400 to-blue-600 flex items-center justify-center text-white font-semibold",children:e.authorName.charAt(0)}),Ot.jsxs("div",{children:[Ot.jsx("h4",{className:"font-semibold text-sm",children:e.authorName}),Ot.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[Ot.jsx("div",{className:"flex items-center",children:[...Array(5)].map((t,n)=>Ot.jsx(In,{className:"w-3.5 h-3.5 "+(n<e.rating?"text-amber-500 fill-amber-500":"text-gray-300")},n))}),Ot.jsx("span",{className:"text-xs text-muted-foreground",children:Uo(new Date(e.reviewTime),{addSuffix:!0})})]})]})]}),Ot.jsxs("div",{className:"flex items-center gap-2",children:[e.needsResponse&&Ot.jsxs(Tn,{variant:"outline",className:"bg-orange-50 text-orange-700 border-orange-300",children:[Ot.jsx(xr,{className:"w-3 h-3 mr-1"}),"Pending"]}),e.hasReply&&Ot.jsxs(Tn,{variant:"outline",className:"bg-emerald-50 text-emerald-700 border-emerald-300",children:[Ot.jsx(zs,{className:"w-3 h-3 mr-1"}),"Replied"]})]})]}),Ot.jsx("p",{className:"text-sm text-gray-700 leading-relaxed mb-3",children:e.comment}),e.reply&&Ot.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-3 rounded mb-3",children:[Ot.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[Ot.jsx(Gi,{className:"w-3.5 h-3.5 text-blue-600"}),Ot.jsx("span",{className:"text-xs font-semibold text-blue-900",children:"Your Response"}),e.reply.isAiGenerated&&Ot.jsx(tu,{variant:"minimal",size:"sm"}),Ot.jsx("span",{className:"text-xs text-blue-600 ml-auto",children:Uo(new Date(e.reply.updateTime),{addSuffix:!0})})]}),Ot.jsx("p",{className:"text-sm text-blue-900",children:e.reply.text})]}),!e.hasReply&&Ot.jsxs(yr,{children:[Ot.jsx(br,{asChild:!0,children:Ot.jsxs(Ln,{variant:"outline",size:"sm",className:"w-full",onClick:()=>d(e),children:[Ot.jsx(Gi,{className:"w-4 h-4 mr-2"}),"Respond to Review"]})}),Ot.jsxs(jr,{className:"sm:max-w-2xl",children:[Ot.jsx(Nr,{children:Ot.jsx(_r,{children:"Respond to Review"})}),Ot.jsxs("div",{className:"space-y-4",children:[Ot.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[Ot.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[Ot.jsx("div",{className:"flex items-center",children:[...Array(5)].map((t,n)=>Ot.jsx(In,{className:"w-3.5 h-3.5 "+(n<e.rating?"text-amber-500 fill-amber-500":"text-gray-300")},n))}),Ot.jsx("span",{className:"text-sm font-semibold",children:e.authorName})]}),Ot.jsx("p",{className:"text-sm text-gray-700",children:e.comment})]}),Ot.jsx(Ln,{onClick:y,disabled:p,variant:"outline",className:"w-full",children:p?Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(Fs,{className:"w-4 h-4 mr-2 animate-spin"}),"Generating AI Response..."]}):Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(In,{className:"w-4 h-4 mr-2"}),"Generate AI Response"]})}),Ot.jsxs("div",{children:[Ot.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Your Response"}),Ot.jsx(Tr,{placeholder:"Write your response...",value:u,onChange:e=>h(e.target.value),rows:6,className:"resize-none"}),Ot.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[u.length," characters"]})]}),Ot.jsxs("div",{className:"flex gap-2",children:[Ot.jsx(Ln,{onClick:b,disabled:!u.trim()||v.isPending,className:"flex-1",children:v.isPending?"Posting...":"Post Reply"}),Ot.jsx(Ln,{variant:"outline",onClick:()=>{d(null),h("")},children:"Cancel"})]})]})]})]})]},e.id))})]})]})}function Lxe({businessId:e,className:t=""}){const{toast:n}=Nn(),[r,s]=hn.useState(""),[i,a]=hn.useState(""),[o,l]=hn.useState(!0),[c,d]=hn.useState(!0),{data:u=[],isLoading:h}=za({queryKey:["/api/gmb/posts",e],queryFn:async()=>[{id:"1",content:" Summer Special! Get 20% off all services this week. Book your appointment today! #SummerSale #LocalBusiness",imageUrl:"https://images.unsplash.com/photo-1507525428034-b723cf961d3e?w=400",status:"posted",postedAt:new Date(Date.now()-72e5).toISOString(),gmbPostId:"gmb-post-123"},{id:"2",content:"We're excited to announce our new product line! Stop by and check out our latest offerings. ",status:"scheduled",scheduledFor:new Date(Date.now()+864e5).toISOString()},{id:"3",content:"Thank you to all our amazing customers! Your support means the world to us. ",status:"posted",postedAt:new Date(Date.now()-6048e5).toISOString(),gmbPostId:"gmb-post-456"}],enabled:Boolean(e)}),p=Fa({mutationFn:async e=>{await new Promise(e=>setTimeout(e,1500))},onSuccess:()=>{n({title:c?"Post Published":"Post Scheduled",description:c?"Your post has been published to Google My Business.":"Your post will be published automatically."}),s(""),a(""),vr.invalidateQueries({queryKey:["/api/gmb/posts",e]})},onError:()=>{n({title:"Post Failed",description:"Failed to create post. Please try again.",variant:"destructive"})}}),m=Fa({mutationFn:async()=>{await new Promise(e=>setTimeout(e,1500));const e=[" We're thrilled to serve our amazing community! Stop by today and experience the difference that makes us special. Your support means everything to us!"," New week, new opportunities! We're here to help you achieve your goals. Visit us today and let's make something great together!"," Exciting things are happening! We've been working hard to bring you the best experience possible. Come see what's new!"];return{content:e[Math.floor(Math.random()*e.length)]}},onSuccess:e=>{s(e.content),n({title:"Content Generated",description:"AI has created post content. Feel free to edit before posting."})},onError:()=>{n({title:"Generation Failed",description:"Failed to generate content. Please try again.",variant:"destructive"})}}),f=e=>{switch(e){case"posted":return Ot.jsx(zs,{className:"w-4 h-4 text-emerald-600"});case"scheduled":return Ot.jsx(xr,{className:"w-4 h-4 text-blue-600"});case"failed":return Ot.jsx(Bs,{className:"w-4 h-4 text-red-600"});default:return null}},g=e=>{switch(e){case"posted":return Ot.jsx(Tn,{variant:"outline",className:"bg-emerald-50 text-emerald-700 border-emerald-300",children:"Published"});case"scheduled":return Ot.jsx(Tn,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-300",children:"Scheduled"});case"failed":return Ot.jsx(Tn,{variant:"outline",className:"bg-red-50 text-red-700 border-red-300",children:"Failed"});default:return null}};return h?Ot.jsxs(Sn,{className:`entrance-fade-up ${t}`,children:[Ot.jsxs(Lr,{children:[Ot.jsx(er,{className:"h-6 w-48"}),Ot.jsx(er,{className:"h-4 w-64 mt-2"})]}),Ot.jsx(Mn,{children:Ot.jsx(er,{className:"h-64 w-full"})})]}):Ot.jsxs(Sn,{className:`entrance-fade-up ${t}`,children:[Ot.jsx(Lr,{children:Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{children:[Ot.jsxs(zr,{className:"flex items-center gap-2",children:[Ot.jsx(Yr,{className:"w-5 h-5 text-blue-600"}),"Auto-Post to GMB"]}),Ot.jsx(Ur,{children:"Create posts that automatically publish to Google My Business"})]}),Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx($X,{checked:o,onCheckedChange:l,id:"auto-post-toggle"}),Ot.jsx(ws,{htmlFor:"auto-post-toggle",className:"text-sm cursor-pointer",children:"Auto-Post Enabled"})]})]})}),Ot.jsxs(Mn,{className:"space-y-6",children:[Ot.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 space-y-4",children:[Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsx("h4",{className:"text-sm font-semibold",children:"Create New Post"}),Ot.jsx(Ln,{variant:"outline",size:"sm",onClick:()=>m.mutate(),disabled:m.isPending,children:m.isPending?Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(Fs,{className:"w-4 h-4 mr-2 animate-spin"}),"Generating..."]}):Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(An,{className:"w-4 h-4 mr-2"}),"Generate AI Content"]})})]}),Ot.jsxs("div",{children:[Ot.jsx(ws,{htmlFor:"post-content",className:"text-sm mb-2 block",children:"Post Content"}),Ot.jsx(Tr,{id:"post-content",placeholder:"What would you like to share with your customers?",value:r,onChange:e=>s(e.target.value),rows:4,className:"resize-none"}),Ot.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[r.length," / 1500 characters"]})]}),Ot.jsxs("div",{children:[Ot.jsx(ws,{htmlFor:"post-image",className:"text-sm mb-2 block",children:"Image URL (Optional)"}),Ot.jsx("div",{className:"flex gap-2",children:Ot.jsxs("div",{className:"flex-1 relative",children:[Ot.jsx(Pr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),Ot.jsx("input",{id:"post-image",type:"url",placeholder:"https://example.com/image.jpg",value:i,onChange:e=>a(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})})]}),i&&Ot.jsx("div",{className:"relative rounded-lg overflow-hidden border border-gray-200",children:Ot.jsx("img",{src:i,alt:"Post preview",className:"w-full h-48 object-cover",onError:()=>{n({title:"Invalid Image",description:"Could not load image from URL",variant:"destructive"}),a("")}})}),Ot.jsxs("div",{className:"flex items-center justify-between pt-2 border-t",children:[Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx($X,{checked:c,onCheckedChange:d,id:"post-now-toggle"}),Ot.jsx(ws,{htmlFor:"post-now-toggle",className:"text-sm cursor-pointer",children:c?"Post immediately":"Schedule for later"})]}),Ot.jsx(Ln,{onClick:()=>{r.trim()?p.mutate({content:r,imageUrl:i||void 0,postNow:c}):n({title:"Content Required",description:"Please enter post content.",variant:"destructive"})},disabled:p.isPending||!r.trim(),children:p.isPending?"Posting...":Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(ns,{className:"w-4 h-4 mr-2"}),c?"Post Now":"Schedule Post"]})})]})]}),Ot.jsxs("div",{children:[Ot.jsx("h4",{className:"text-sm font-semibold mb-3",children:"Recent & Scheduled Posts"}),0===u.length?Ot.jsxs("div",{className:"text-center py-8 border border-dashed border-gray-300 rounded-lg",children:[Ot.jsx(Yr,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),Ot.jsx("p",{className:"text-sm text-muted-foreground",children:"No posts yet"})]}):Ot.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto",children:u.map((e,t)=>Ot.jsxs("div",{className:`\n                    border border-gray-200 rounded-lg p-4\n                    hover:border-blue-300 hover:shadow-md\n                    transition-all duration-300\n                    entrance-slide-right stagger-${Math.min(t+1,8)}\n                  `,children:[Ot.jsxs("div",{className:"flex items-start justify-between mb-3",children:[Ot.jsxs("div",{className:"flex items-center gap-2",children:[f(e.status),Ot.jsxs("span",{className:"text-xs text-muted-foreground",children:["posted"===e.status&&e.postedAt&&Ot.jsxs(Ot.Fragment,{children:["Posted ",Uo(new Date(e.postedAt),{addSuffix:!0})]}),"scheduled"===e.status&&e.scheduledFor&&Ot.jsxs(Ot.Fragment,{children:["Scheduled for ",Uo(new Date(e.scheduledFor),{addSuffix:!0})]}),"failed"===e.status&&Ot.jsx(Ot.Fragment,{children:"Failed to post"})]})]}),g(e.status)]}),Ot.jsx("p",{className:"text-sm text-gray-700 leading-relaxed mb-3 line-clamp-3",children:e.content}),e.imageUrl&&Ot.jsx("div",{className:"rounded-lg overflow-hidden mb-3",children:Ot.jsx("img",{src:e.imageUrl,alt:"Post",className:"w-full h-32 object-cover"})}),e.error&&Ot.jsx("div",{className:"bg-red-50 border border-red-200 rounded p-2",children:Ot.jsx("p",{className:"text-xs text-red-700",children:e.error})}),"posted"===e.status&&e.gmbPostId&&Ot.jsx(Ln,{variant:"ghost",size:"sm",className:"w-full mt-2",onClick:()=>window.open(`https://business.google.com/posts/${e.gmbPostId}`,"_blank"),children:"View on GMB"})]},e.id))})]})]})]})}function Fxe({businessId:e,className:t="",compact:n=!1}){const{data:r,isLoading:s}=za({queryKey:["/api/gmb/insights",e],queryFn:async()=>({period:{startDate:new Date(Date.now()-2592e6).toISOString(),endDate:(new Date).toISOString()},metrics:{views:{total:1245,change:18.5,trend:"up",breakdown:{search:892,maps:353}},actions:{websiteClicks:156,phoneCalls:89,total:245,change:12.3,trend:"up"},directionRequests:{total:127,change:-5.2,trend:"down"},photos:{viewsFromOwner:3420,viewsFromCustomers:1890,totalPhotos:45},searchQueries:{direct:673,discovery:572}},topSearchQueries:[{query:"miami beach boutique",impressions:234},{query:"clothing store miami",impressions:187},{query:"boutique near me",impressions:156},{query:"women's fashion miami",impressions:123},{query:"beach wear shop",impressions:92}]}),enabled:Boolean(e)}),i=e=>{switch(e){case"up":return Ot.jsx(Dn,{className:"w-4 h-4 text-emerald-600"});case"down":return Ot.jsx(Xi,{className:"w-4 h-4 text-red-600"});case"stable":return Ot.jsx(Oi,{className:"w-4 h-4 text-gray-600"})}},a=e=>{switch(e){case"up":return"text-emerald-600";case"down":return"text-red-600";case"stable":return"text-gray-600"}};if(s)return Ot.jsxs(Sn,{className:`entrance-fade-up ${t}`,children:[Ot.jsxs(Lr,{children:[Ot.jsx(er,{className:"h-6 w-48"}),Ot.jsx(er,{className:"h-4 w-64 mt-2"})]}),Ot.jsx(Mn,{children:Ot.jsx(er,{className:"h-64 w-full"})})]});if(!r)return null;if(n)return Ot.jsx(Sn,{className:`entrance-fade-up ${t}`,children:Ot.jsx(Mn,{className:"pt-6",children:Ot.jsxs("div",{className:"space-y-3",children:[Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx($r,{className:"w-4 h-4 text-blue-600"}),Ot.jsx("span",{className:"text-sm font-medium",children:"Profile Views"})]}),Ot.jsxs("div",{className:"flex items-center gap-1",children:[Ot.jsx("span",{className:"text-xl font-bold",children:r.metrics.views.total.toLocaleString()}),i(r.metrics.views.trend)]})]}),Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx(On,{className:"w-4 h-4 text-purple-600"}),Ot.jsx("span",{className:"text-sm font-medium",children:"Actions"})]}),Ot.jsxs("div",{className:"flex items-center gap-1",children:[Ot.jsx("span",{className:"text-xl font-bold",children:r.metrics.actions.total.toLocaleString()}),i(r.metrics.actions.trend)]})]}),Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx(qi,{className:"w-4 h-4 text-orange-600"}),Ot.jsx("span",{className:"text-sm font-medium",children:"Directions"})]}),Ot.jsxs("div",{className:"flex items-center gap-1",children:[Ot.jsx("span",{className:"text-xl font-bold",children:r.metrics.directionRequests.total.toLocaleString()}),i(r.metrics.directionRequests.trend)]})]})]})})});const o=r.metrics.views.breakdown.search/r.metrics.views.total*100,l=r.metrics.views.breakdown.maps/r.metrics.views.total*100,c=r.metrics.searchQueries.direct/(r.metrics.searchQueries.direct+r.metrics.searchQueries.discovery)*100;return Ot.jsxs(Sn,{className:`entrance-fade-up ${t}`,children:[Ot.jsx(Lr,{children:Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{children:[Ot.jsxs(zr,{className:"flex items-center gap-2",children:[Ot.jsx(Bn,{className:"w-5 h-5 text-emerald-600"}),"Location Insights"]}),Ot.jsx(Ur,{children:"Performance metrics from Google My Business (Last 30 days)"})]}),Ot.jsx(Tn,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-300",children:"30 Days"})]})}),Ot.jsxs(Mn,{className:"space-y-6",children:[Ot.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[Ot.jsxs("div",{className:"p-4 rounded-lg bg-gradient-to-br from-blue-50 to-blue-100/50 border border-blue-200",children:[Ot.jsxs("div",{className:"flex items-center justify-between mb-2",children:[Ot.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-500 flex items-center justify-center",children:Ot.jsx($r,{className:"w-5 h-5 text-white"})}),Ot.jsxs("div",{className:"flex items-center gap-1",children:[i(r.metrics.views.trend),Ot.jsxs("span",{className:`text-sm font-semibold ${a(r.metrics.views.trend)}`,children:[r.metrics.views.change>0?"+":"",r.metrics.views.change.toFixed(1),"%"]})]})]}),Ot.jsx("div",{className:"text-2xl font-bold text-blue-900",children:r.metrics.views.total.toLocaleString()}),Ot.jsx("div",{className:"text-xs text-blue-700 font-medium",children:"Profile Views"})]}),Ot.jsxs("div",{className:"p-4 rounded-lg bg-gradient-to-br from-purple-50 to-purple-100/50 border border-purple-200",children:[Ot.jsxs("div",{className:"flex items-center justify-between mb-2",children:[Ot.jsx("div",{className:"w-10 h-10 rounded-lg bg-purple-500 flex items-center justify-center",children:Ot.jsx(On,{className:"w-5 h-5 text-white"})}),Ot.jsxs("div",{className:"flex items-center gap-1",children:[i(r.metrics.actions.trend),Ot.jsxs("span",{className:`text-sm font-semibold ${a(r.metrics.actions.trend)}`,children:[r.metrics.actions.change>0?"+":"",r.metrics.actions.change.toFixed(1),"%"]})]})]}),Ot.jsx("div",{className:"text-2xl font-bold text-purple-900",children:r.metrics.actions.total.toLocaleString()}),Ot.jsx("div",{className:"text-xs text-purple-700 font-medium",children:"Customer Actions"})]}),Ot.jsxs("div",{className:"p-4 rounded-lg bg-gradient-to-br from-orange-50 to-orange-100/50 border border-orange-200",children:[Ot.jsxs("div",{className:"flex items-center justify-between mb-2",children:[Ot.jsx("div",{className:"w-10 h-10 rounded-lg bg-orange-500 flex items-center justify-center",children:Ot.jsx(qi,{className:"w-5 h-5 text-white"})}),Ot.jsxs("div",{className:"flex items-center gap-1",children:[i(r.metrics.directionRequests.trend),Ot.jsxs("span",{className:`text-sm font-semibold ${a(r.metrics.directionRequests.trend)}`,children:[r.metrics.directionRequests.change>0?"+":"",r.metrics.directionRequests.change.toFixed(1),"%"]})]})]}),Ot.jsx("div",{className:"text-2xl font-bold text-orange-900",children:r.metrics.directionRequests.total.toLocaleString()}),Ot.jsx("div",{className:"text-xs text-orange-700 font-medium",children:"Direction Requests"})]})]}),Ot.jsxs("div",{children:[Ot.jsx("h4",{className:"text-sm font-semibold mb-3",children:"Views Breakdown"}),Ot.jsxs("div",{className:"space-y-3",children:[Ot.jsxs("div",{children:[Ot.jsxs("div",{className:"flex items-center justify-between mb-2",children:[Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx(Fn,{className:"w-4 h-4 text-blue-600"}),Ot.jsx("span",{className:"text-sm",children:"Google Search"})]}),Ot.jsxs("span",{className:"text-sm font-semibold",children:[r.metrics.views.breakdown.search.toLocaleString()," (",o.toFixed(0),"%)"]})]}),Ot.jsx(Vr,{value:o,className:"h-2 bg-blue-100"})]}),Ot.jsxs("div",{children:[Ot.jsxs("div",{className:"flex items-center justify-between mb-2",children:[Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx(Bn,{className:"w-4 h-4 text-emerald-600"}),Ot.jsx("span",{className:"text-sm",children:"Google Maps"})]}),Ot.jsxs("span",{className:"text-sm font-semibold",children:[r.metrics.views.breakdown.maps.toLocaleString()," (",l.toFixed(0),"%)"]})]}),Ot.jsx(Vr,{value:l,className:"h-2 bg-emerald-100"})]})]})]}),Ot.jsxs("div",{children:[Ot.jsx("h4",{className:"text-sm font-semibold mb-3",children:"Customer Actions"}),Ot.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[Ot.jsxs("div",{className:"p-3 rounded-lg border border-gray-200 bg-gray-50",children:[Ot.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[Ot.jsx(Yr,{className:"w-4 h-4 text-blue-600"}),Ot.jsx("span",{className:"text-xs font-medium",children:"Website Clicks"})]}),Ot.jsx("div",{className:"text-xl font-bold",children:r.metrics.actions.websiteClicks.toLocaleString()})]}),Ot.jsxs("div",{className:"p-3 rounded-lg border border-gray-200 bg-gray-50",children:[Ot.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[Ot.jsx(Qr,{className:"w-4 h-4 text-emerald-600"}),Ot.jsx("span",{className:"text-xs font-medium",children:"Phone Calls"})]}),Ot.jsx("div",{className:"text-xl font-bold",children:r.metrics.actions.phoneCalls.toLocaleString()})]})]})]}),Ot.jsxs("div",{children:[Ot.jsx("h4",{className:"text-sm font-semibold mb-3",children:"How Customers Find You"}),Ot.jsxs("div",{className:"space-y-3 mb-4",children:[Ot.jsxs("div",{children:[Ot.jsxs("div",{className:"flex items-center justify-between mb-2",children:[Ot.jsx("span",{className:"text-sm",children:"Direct Searches (business name)"}),Ot.jsxs("span",{className:"text-sm font-semibold",children:[r.metrics.searchQueries.direct.toLocaleString()," (",c.toFixed(0),"%)"]})]}),Ot.jsx(Vr,{value:c,className:"h-2 bg-purple-100"})]}),Ot.jsxs("div",{children:[Ot.jsxs("div",{className:"flex items-center justify-between mb-2",children:[Ot.jsx("span",{className:"text-sm",children:"Discovery Searches (category/product)"}),Ot.jsxs("span",{className:"text-sm font-semibold",children:[r.metrics.searchQueries.discovery.toLocaleString()," (",(100-c).toFixed(0),"%)"]})]}),Ot.jsx(Vr,{value:100-c,className:"h-2 bg-cyan-100"})]})]}),Ot.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[Ot.jsx("h5",{className:"text-xs font-semibold text-gray-700 uppercase tracking-wide mb-3",children:"Top Search Queries"}),Ot.jsx("div",{className:"space-y-2",children:r.topSearchQueries.slice(0,5).map((e,t)=>Ot.jsxs("div",{className:"flex items-center justify-between text-sm",children:[Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx(Tn,{variant:"outline",className:"w-6 h-6 flex items-center justify-center p-0 text-xs",children:t+1}),Ot.jsx("span",{className:"text-gray-700",children:e.query})]}),Ot.jsx("span",{className:"text-gray-500 font-medium",children:e.impressions.toLocaleString()})]},t))})]})]}),Ot.jsxs("div",{children:[Ot.jsx("h4",{className:"text-sm font-semibold mb-3",children:"Photo Performance"}),Ot.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[Ot.jsxs("div",{className:"text-center p-3 rounded-lg bg-gradient-to-br from-pink-50 to-pink-100/50 border border-pink-200",children:[Ot.jsx("div",{className:"text-xl font-bold text-pink-900",children:r.metrics.photos.totalPhotos}),Ot.jsx("div",{className:"text-xs text-pink-700 font-medium",children:"Total Photos"})]}),Ot.jsxs("div",{className:"text-center p-3 rounded-lg bg-gradient-to-br from-blue-50 to-blue-100/50 border border-blue-200",children:[Ot.jsx("div",{className:"text-xl font-bold text-blue-900",children:r.metrics.photos.viewsFromOwner.toLocaleString()}),Ot.jsx("div",{className:"text-xs text-blue-700 font-medium",children:"Owner Photo Views"})]}),Ot.jsxs("div",{className:"text-center p-3 rounded-lg bg-gradient-to-br from-purple-50 to-purple-100/50 border border-purple-200",children:[Ot.jsx("div",{className:"text-xl font-bold text-purple-900",children:r.metrics.photos.viewsFromCustomers.toLocaleString()}),Ot.jsx("div",{className:"text-xs text-purple-700 font-medium",children:"Customer Photo Views"})]})]})]})]})]})}function zxe({userId:e,businessId:t,limit:n=10,className:r="",onReuse:s}){const{toast:i}=Nn(),[a,o]=hn.useState(null),{data:l=[],isLoading:c}=za({queryKey:["/api/ai/content-history",e,t,n],queryFn:async()=>{const r=new URLSearchParams;return e&&r.set("userId",e),t&&r.set("businessId",t),r.set("limit",n.toString()),[{id:"1",type:"post",title:"Summer Special Promotion",content:" Beat the heat with our exclusive summer collection! Enjoy 20% off all beachwear and accessories. Limited time offer - shop now and make waves this season!",businessName:"Miami Beach Boutique",generatedAt:new Date(Date.now()-72e5).toISOString(),prompt:"Create a social media post about summer sale",isPublished:!0},{id:"2",type:"description",title:"Business Bio Update",content:"Welcome to our award-winning restaurant where coastal cuisine meets modern elegance. Our chef-driven menu features locally sourced ingredients and breathtaking waterfront views.",businessName:"Ocean View Restaurant",generatedAt:new Date(Date.now()-18e6).toISOString(),prompt:"Write a professional business description",isPublished:!0},{id:"3",type:"product",title:"Artisan Coffee Blend Description",content:"Experience the rich, smooth taste of our signature medium roast. Hand-selected beans from sustainable Florida farms, expertly roasted to perfection. Notes of caramel and dark chocolate with a clean finish.",businessName:"Local Coffee Roasters",generatedAt:new Date(Date.now()-864e5).toISOString(),prompt:"Create product description for coffee",isPublished:!1}]},enabled:Boolean(e||t)}),d=e=>{switch(e){case"post":return"bg-blue-500/10 text-blue-700 border-blue-500/30";case"description":return"bg-purple-500/10 text-purple-700 border-purple-500/30";case"product":return"bg-green-500/10 text-green-700 border-green-500/30";case"response":return"bg-orange-500/10 text-orange-700 border-orange-500/30";default:return"bg-gray-500/10 text-gray-700 border-gray-500/30"}};return e||t?c?Ot.jsxs(Sn,{className:`entrance-fade-up ${r}`,children:[Ot.jsxs(Lr,{children:[Ot.jsx(er,{className:"h-6 w-48"}),Ot.jsx(er,{className:"h-4 w-64 mt-2"})]}),Ot.jsx(Mn,{className:"space-y-4",children:[1,2,3].map(e=>Ot.jsx(er,{className:"h-32 w-full"},e))})]}):0===l.length?Ot.jsxs(Sn,{className:`entrance-fade-up ${r}`,children:[Ot.jsxs(Lr,{children:[Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx(Ki,{className:"w-5 h-5 text-purple-600"}),Ot.jsx(zr,{children:"AI Content History"})]}),Ot.jsx(Ur,{children:"Your AI-generated content will appear here"})]}),Ot.jsx(Mn,{children:Ot.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[Ot.jsx(An,{className:"w-12 h-12 text-gray-300 mb-3"}),Ot.jsx("p",{className:"text-sm text-muted-foreground",children:"No AI-generated content yet. Start creating with our AI tools!"})]})})]}):Ot.jsxs(Sn,{className:`entrance-fade-up ${r}`,children:[Ot.jsxs(Lr,{children:[Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx(Ki,{className:"w-5 h-5 text-purple-600"}),Ot.jsx(zr,{children:"AI Content History"})]}),Ot.jsxs(Tn,{variant:"outline",className:"flex items-center gap-1",children:[Ot.jsx(An,{className:"w-3 h-3"}),l.length," items"]})]}),Ot.jsx(Ur,{children:"View and reuse your AI-generated content"})]}),Ot.jsxs(Mn,{className:"space-y-3",children:[l.map((e,t)=>Ot.jsxs("div",{className:`\n              border border-gray-200 rounded-lg p-4\n              hover:border-purple-300 hover:shadow-md\n              transition-all duration-300\n              entrance-slide-right stagger-${Math.min(t+1,8)}\n            `,children:[Ot.jsxs("div",{className:"flex items-start justify-between mb-3",children:[Ot.jsxs("div",{className:"flex-1",children:[Ot.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[Ot.jsx(Tn,{className:d(e.type),variant:"outline",children:e.type}),e.isPublished&&Ot.jsx(Tn,{variant:"outline",className:"bg-green-500/10 text-green-700 border-green-500/30",children:"Published"})]}),Ot.jsx("h4",{className:"font-semibold text-sm text-gray-900",children:e.title}),e.businessName&&Ot.jsx("p",{className:"text-xs text-gray-500 mt-1",children:e.businessName})]}),Ot.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[Ot.jsx(Ln,{variant:"ghost",size:"sm",onClick:()=>(async e=>{try{await navigator.clipboard.writeText(e),i({title:"Copied!",description:"Content copied to clipboard"})}catch(t){i({title:"Copy Failed",description:"Could not copy to clipboard",variant:"destructive"})}})(e.content),className:"h-8 w-8 p-0",children:Ot.jsx(ni,{className:"w-4 h-4"})}),s&&Ot.jsx(Ln,{variant:"ghost",size:"sm",onClick:()=>(e=>{s&&s(e),i({title:"Content Loaded",description:"AI-generated content loaded for editing"})})(e),className:"h-8 w-8 p-0",children:Ot.jsx(Si,{className:"w-4 h-4"})}),Ot.jsx(Ln,{variant:"ghost",size:"sm",onClick:()=>(async()=>{i({title:"Deleted",description:"Content removed from history"})})(),className:"h-8 w-8 p-0 text-red-600 hover:text-red-700",children:Ot.jsx(vs,{className:"w-4 h-4"})})]})]}),Ot.jsxs("div",{className:"mb-3",children:[Ot.jsx("p",{className:"text-sm text-gray-700 leading-relaxed "+(a===e.id?"":"line-clamp-2"),children:e.content}),e.content.length>150&&Ot.jsx("button",{onClick:()=>o(a===e.id?null:e.id),className:"text-xs text-purple-600 hover:text-purple-700 mt-1 font-medium",children:a===e.id?"Show less":"Show more"})]}),Ot.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[Ot.jsxs("div",{className:"flex items-center gap-1",children:[Ot.jsx(Qn,{className:"w-3 h-3"}),Ot.jsx("span",{children:Uo(new Date(e.generatedAt),{addSuffix:!0})})]}),e.prompt&&a===e.id&&Ot.jsxs("div",{className:"text-xs text-gray-400 italic",children:['Prompt: "',e.prompt,'"']})]})]},e.id)),l.length>=n&&Ot.jsx(Ln,{variant:"outline",className:"w-full mt-4",size:"sm",children:"View All History"})]})]}):null}function Bxe({businessId:e,variant:t="full"}){const[n,r]=hn.useState({connected:!1}),[s,i]=hn.useState(!0),[a,o]=hn.useState(!1);hn.useEffect(()=>{e?l():i(!1)},[e]);const l=async()=>{i(!0);try{const t=await fetch(`/api/gmb/status/${e}`,{credentials:"include"});if(t.ok){const e=await t.json();r({connected:e.connected||!1,lastSync:e.lastSync?new Date(e.lastSync):void 0,nextSync:e.nextSync?new Date(e.nextSync):void 0,reviewCount:e.reviewCount,averageRating:e.averageRating,views:e.views,searchAppearances:e.searchAppearances})}else r({connected:!1})}catch(t){r({connected:!1,error:"Failed to load status"})}finally{i(!1)}},c=async()=>{o(!0);try{if(!(await fetch(`/api/gmb/sync/${e}`,{method:"POST",credentials:"include"})).ok)throw new Error("Sync failed");await l()}catch(t){r(e=>({...e,error:"Sync failed"}))}finally{o(!1)}},d=()=>{window.location.href=`/api/gmb/connect/${e}`};return s?Ot.jsx(Sn,{className:"compact"===t?"w-full":"",children:Ot.jsx(Mn,{className:"flex items-center justify-center py-8",children:Ot.jsx(Fr,{className:"h-6 w-6 animate-spin text-primary"})})}):"compact"===t?Ot.jsx(wo.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},children:Ot.jsx(Sn,{className:"overflow-hidden border-l-4",style:{borderLeftColor:n.connected?"#10b981":"#ef4444"},children:Ot.jsxs(Mn,{className:"p-4",children:[Ot.jsxs("div",{className:"flex items-start justify-between mb-3",children:[Ot.jsxs("div",{className:"flex items-center gap-2",children:[n.connected?Ot.jsx(us,{className:"h-5 w-5 text-green-500"}):Ot.jsx(Bs,{className:"h-5 w-5 text-red-500"}),Ot.jsx("span",{className:"font-semibold text-sm",children:n.connected?"GMB Connected":"GMB Not Connected"})]}),n.connected&&Ot.jsx(Ln,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:c,disabled:a,children:Ot.jsx(Fs,{className:"h-3 w-3 "+(a?"animate-spin":"")})})]}),n.connected?Ot.jsxs("div",{className:"space-y-2",children:[n.lastSync&&Ot.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[Ot.jsx("span",{children:"Last sync:"}),Ot.jsx("span",{className:"font-medium",children:new Date(n.lastSync).toLocaleString()})]}),n.averageRating&&Ot.jsxs("div",{className:"flex items-center justify-between text-xs",children:[Ot.jsx("span",{className:"text-muted-foreground",children:"Rating:"}),Ot.jsxs("div",{className:"flex items-center gap-1",children:[Ot.jsx(In,{className:"h-3 w-3 fill-yellow-400 text-yellow-400"}),Ot.jsx("span",{className:"font-semibold",children:n.averageRating.toFixed(1)}),Ot.jsxs("span",{className:"text-muted-foreground",children:["(",n.reviewCount,")"]})]})]}),Ot.jsxs(Ln,{variant:"outline",size:"sm",className:"w-full mt-2",onClick:()=>window.location.href=`/gmb/${e}`,children:["View GMB Dashboard",Ot.jsx(Si,{className:"ml-2 h-3 w-3"})]})]}):Ot.jsx(Ln,{variant:"default",size:"sm",className:"w-full",onClick:d,children:"Connect Google My Business"})]})})}):Ot.jsx(wo.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},children:Ot.jsxs(Sn,{children:[Ot.jsx(Lr,{children:Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{children:[Ot.jsxs(zr,{className:"flex items-center gap-2",children:["Google My Business Integration",n.connected?Ot.jsxs(Tn,{variant:"default",className:"bg-green-500",children:[Ot.jsx(us,{className:"h-3 w-3 mr-1"}),"Connected"]}):Ot.jsxs(Tn,{variant:"destructive",children:[Ot.jsx(Bs,{className:"h-3 w-3 mr-1"}),"Not Connected"]})]}),Ot.jsx(Ur,{children:n.connected?"Your business is synced with Google My Business":"Connect to unlock powerful insights and automation"})]}),n.connected&&Ot.jsx(Ln,{variant:"outline",size:"sm",onClick:c,disabled:a,children:a?Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(Fr,{className:"mr-2 h-4 w-4 animate-spin"}),"Syncing..."]}):Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(Fs,{className:"mr-2 h-4 w-4"}),"Sync Now"]})})]})}),Ot.jsxs(Mn,{className:"space-y-4",children:[n.error&&Ot.jsxs(dR,{variant:"destructive",children:[Ot.jsx(Cn,{className:"h-4 w-4"}),Ot.jsx(hR,{children:n.error})]}),n.connected?Ot.jsxs(Ot.Fragment,{children:[Ot.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.lastSync&&Ot.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg bg-muted/50",children:[Ot.jsx(Qn,{className:"h-5 w-5 text-primary mt-0.5"}),Ot.jsxs("div",{children:[Ot.jsx("div",{className:"text-sm font-medium",children:"Last Sync"}),Ot.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(n.lastSync).toLocaleString()})]})]}),n.nextSync&&Ot.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg bg-muted/50",children:[Ot.jsx(Fs,{className:"h-5 w-5 text-primary mt-0.5"}),Ot.jsxs("div",{children:[Ot.jsx("div",{className:"text-sm font-medium",children:"Next Sync"}),Ot.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(n.nextSync).toLocaleString()})]})]})]}),Ot.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[void 0!==n.reviewCount&&Ot.jsxs("div",{className:"flex flex-col items-center p-4 rounded-lg bg-gradient-to-br from-yellow-50 to-yellow-100 dark:from-yellow-900/20 dark:to-yellow-800/20",children:[Ot.jsx(In,{className:"h-8 w-8 text-yellow-500 mb-2"}),Ot.jsx("div",{className:"text-2xl font-bold",children:n.reviewCount}),Ot.jsx("div",{className:"text-xs text-muted-foreground text-center",children:"Total Reviews"})]}),void 0!==n.averageRating&&Ot.jsxs("div",{className:"flex flex-col items-center p-4 rounded-lg bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20",children:[Ot.jsx(Dn,{className:"h-8 w-8 text-green-500 mb-2"}),Ot.jsx("div",{className:"text-2xl font-bold",children:n.averageRating.toFixed(1)}),Ot.jsx("div",{className:"text-xs text-muted-foreground text-center",children:"Avg Rating"})]}),void 0!==n.views&&Ot.jsxs("div",{className:"flex flex-col items-center p-4 rounded-lg bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20",children:[Ot.jsx(On,{className:"h-8 w-8 text-blue-500 mb-2"}),Ot.jsx("div",{className:"text-2xl font-bold",children:n.views.toLocaleString()}),Ot.jsx("div",{className:"text-xs text-muted-foreground text-center",children:"Profile Views"})]}),void 0!==n.searchAppearances&&Ot.jsxs("div",{className:"flex flex-col items-center p-4 rounded-lg bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20",children:[Ot.jsx(Dn,{className:"h-8 w-8 text-purple-500 mb-2"}),Ot.jsx("div",{className:"text-2xl font-bold",children:n.searchAppearances.toLocaleString()}),Ot.jsx("div",{className:"text-xs text-muted-foreground text-center",children:"Search Views"})]})]}),Ot.jsxs("div",{className:"flex gap-3",children:[Ot.jsxs(Ln,{variant:"default",className:"flex-1",onClick:()=>window.location.href=`/gmb/${e}`,children:["View Full Dashboard",Ot.jsx(Si,{className:"ml-2 h-4 w-4"})]}),Ot.jsx(Ln,{variant:"outline",onClick:()=>window.location.href=`/gmb/${e}/settings`,children:"Settings"})]})]}):Ot.jsxs(Ot.Fragment,{children:[Ot.jsxs(dR,{children:[Ot.jsx(Cn,{className:"h-4 w-4"}),Ot.jsx(hR,{children:"Connect your Google My Business account to automatically sync your business information, reviews, and insights. Get AI-powered recommendations to improve your local search presence."})]}),Ot.jsxs("div",{className:"space-y-3",children:[Ot.jsx("h4",{className:"font-semibold text-sm",children:"Benefits of connecting:"}),Ot.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[Ot.jsxs("li",{className:"flex items-start gap-2",children:[Ot.jsx(us,{className:"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0"}),Ot.jsx("span",{children:"Automatic sync of business hours, photos, and posts"})]}),Ot.jsxs("li",{className:"flex items-start gap-2",children:[Ot.jsx(us,{className:"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0"}),Ot.jsx("span",{children:"Real-time review monitoring and AI-powered response suggestions"})]}),Ot.jsxs("li",{className:"flex items-start gap-2",children:[Ot.jsx(us,{className:"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0"}),Ot.jsx("span",{children:"Performance insights and local search optimization"})]}),Ot.jsxs("li",{className:"flex items-start gap-2",children:[Ot.jsx(us,{className:"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0"}),Ot.jsx("span",{children:"Competitive analysis and market trends"})]})]})]}),Ot.jsxs(Ln,{variant:"default",size:"lg",className:"w-full",onClick:d,children:[Ot.jsx("img",{src:"https://www.google.com/images/branding/googleg/1x/googleg_standard_color_128dp.png",alt:"Google",className:"h-5 w-5 mr-2"}),"Connect Google My Business"]})]})]})]})})}function Uxe(){const{user:e}=Ua();_n();const[t,n]=hn.useState("overview"),{data:r=[]}=za({queryKey:["/api/businesses/my"],enabled:!!e}),s=r[0]?.id,{data:i,isLoading:a}=za({queryKey:[`/api/businesses/${s}`],enabled:!!s}),{data:o}=za({queryKey:[`/api/products/business/${s}`],enabled:!!s}),{data:l}=za({queryKey:[`/api/posts/business/${s}`],enabled:!!s}),c=e&&i&&i.ownerId===e.id;if(a)return Ot.jsx("div",{className:"container mx-auto px-4 py-8",children:Ot.jsx("div",{className:"flex items-center justify-center min-h-screen",children:Ot.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})})});if(!i||!c)return Ot.jsx("div",{className:"container mx-auto px-4 py-8",children:Ot.jsxs(Sn,{className:"max-w-md mx-auto mt-20",children:[Ot.jsxs(Lr,{children:[Ot.jsx(zr,{children:"Access Denied"}),Ot.jsx(Ur,{children:"You don't have permission to view this dashboard."})]}),Ot.jsx(Mn,{children:Ot.jsx(Yn,{href:"/marketplace",children:Ot.jsx(Ln,{className:"w-full",children:"Go to Marketplace"})})})]})});const d=o?.length||0,u=l?.reduce((e,t)=>e+(t.likeCount||0),0)||0,h=l?.reduce((e,t)=>e+(t.commentCount||0),0)||0,p=parseFloat(i.rating||"0"),m=i.reviewCount||0,f=i.followerCount||0;return Ot.jsxs("div",{className:"min-h-screen",children:[Ot.jsxs("div",{className:"relative bg-gradient-to-r from-purple-600 via-blue-600 to-cyan-600 text-white overflow-hidden",children:[Ot.jsx("div",{className:"absolute inset-0 bg-[url('/grid.svg')] opacity-20"}),Ot.jsx("div",{className:"container mx-auto px-4 py-12 relative z-10",children:Ot.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center gap-6",children:[i.logoUrl&&Ot.jsx("img",{src:i.logoUrl,alt:i.name,className:"w-24 h-24 rounded-2xl shadow-2xl border-4 border-white/20 object-cover"}),Ot.jsxs("div",{className:"flex-1",children:[Ot.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-2",children:i.name}),Ot.jsx("p",{className:"text-xl text-white/90 mb-4",children:i.tagline}),Ot.jsxs("div",{className:"flex flex-wrap gap-3",children:[Ot.jsx(Tn,{variant:"secondary",className:"bg-white/20 text-white border-white/30",children:i.category}),Ot.jsx(Tn,{variant:"secondary",className:"bg-white/20 text-white border-white/30",children:i.location}),i.isVerified&&Ot.jsx(Tn,{variant:"secondary",className:"bg-green-500/20 text-white border-green-300",children:" Verified"})]})]}),Ot.jsxs("div",{className:"flex gap-3",children:[Ot.jsx(Yn,{href:`/edit-business/${i.id}`,children:Ot.jsxs(Ln,{variant:"secondary",size:"lg",children:[Ot.jsx(yi,{className:"mr-2 h-5 w-5"}),"Settings"]})}),Ot.jsx(Yn,{href:`/business/${i.id}`,children:Ot.jsxs(Ln,{variant:"outline",size:"lg",className:"bg-white/10 border-white/30 text-white hover:bg-white/20",children:[Ot.jsx($r,{className:"mr-2 h-5 w-5"}),"View Public Profile"]})})]})]})})]}),Ot.jsx("div",{className:"container mx-auto px-4 py-8",children:Ot.jsxs(qs,{value:t,onValueChange:n,className:"space-y-6",children:[Ot.jsxs(Xs,{className:"grid w-full grid-cols-5 lg:w-auto lg:inline-grid",children:[Ot.jsxs(Ks,{value:"overview",className:"flex items-center gap-2",children:[Ot.jsx(Hs,{className:"h-4 w-4"}),Ot.jsx("span",{className:"hidden sm:inline",children:"Overview"})]}),Ot.jsxs(Ks,{value:"gmb",className:"flex items-center gap-2",children:[Ot.jsx(Bn,{className:"h-4 w-4"}),Ot.jsx("span",{className:"hidden sm:inline",children:"Google My Business"})]}),Ot.jsxs(Ks,{value:"content",className:"flex items-center gap-2",children:[Ot.jsx(An,{className:"h-4 w-4"}),Ot.jsx("span",{className:"hidden sm:inline",children:"AI Content"})]}),Ot.jsxs(Ks,{value:"products",className:"flex items-center gap-2",children:[Ot.jsx(tr,{className:"h-4 w-4"}),Ot.jsx("span",{className:"hidden sm:inline",children:"Products"})]}),Ot.jsxs(Ks,{value:"posts",className:"flex items-center gap-2",children:[Ot.jsx(Or,{className:"h-4 w-4"}),Ot.jsx("span",{className:"hidden sm:inline",children:"Posts"})]})]}),Ot.jsxs(Ys,{value:"overview",className:"space-y-6",children:[Ot.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[Ot.jsxs(Sn,{className:"border-2 hover:shadow-lg transition-shadow bg-white/80 backdrop-blur-md",children:[Ot.jsxs(Lr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ot.jsx(zr,{className:"text-sm font-medium",children:"Total Followers"}),Ot.jsx(On,{className:"h-5 w-5 text-blue-600"})]}),Ot.jsxs(Mn,{children:[Ot.jsx("div",{className:"text-3xl font-bold",children:f.toLocaleString()}),Ot.jsx("p",{className:"text-xs text-gray-900 mt-1",children:"Your audience reach"})]})]}),Ot.jsxs(Sn,{className:"border-2 hover:shadow-lg transition-shadow bg-white/80 backdrop-blur-md",children:[Ot.jsxs(Lr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ot.jsx(zr,{className:"text-sm font-medium",children:"Products"}),Ot.jsx(as,{className:"h-5 w-5 text-green-600"})]}),Ot.jsxs(Mn,{children:[Ot.jsx("div",{className:"text-3xl font-bold",children:d}),Ot.jsx("p",{className:"text-xs text-gray-900 mt-1",children:"Listed in your store"})]})]}),Ot.jsxs(Sn,{className:"border-2 hover:shadow-lg transition-shadow bg-white/80 backdrop-blur-md",children:[Ot.jsxs(Lr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ot.jsx(zr,{className:"text-sm font-medium",children:"Rating"}),Ot.jsx(Dn,{className:"h-5 w-5 text-yellow-600"})]}),Ot.jsxs(Mn,{children:[Ot.jsxs("div",{className:"text-3xl font-bold",children:[p.toFixed(1)," "]}),Ot.jsxs("p",{className:"text-xs text-gray-900 mt-1",children:[m," reviews"]})]})]}),Ot.jsxs(Sn,{className:"border-2 hover:shadow-lg transition-shadow bg-white/80 backdrop-blur-md",children:[Ot.jsxs(Lr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ot.jsx(zr,{className:"text-sm font-medium",children:"Engagement"}),Ot.jsx(Zn,{className:"h-5 w-5 text-red-600"})]}),Ot.jsxs(Mn,{children:[Ot.jsx("div",{className:"text-3xl font-bold",children:u+h}),Ot.jsxs("p",{className:"text-xs text-gray-900 mt-1",children:[u," likes, ",h," comments"]})]})]})]}),Ot.jsx(wo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:Ot.jsxs(Sn,{className:"border-2 border-purple-200 dark:border-purple-800 bg-gradient-to-r from-purple-50/90 to-pink-50/90 dark:from-purple-950/30 dark:to-pink-950/30 backdrop-blur-md",children:[Ot.jsx(Lr,{children:Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsx("div",{className:"p-3 rounded-full bg-gradient-to-r from-purple-500 to-pink-500",children:Ot.jsx(An,{className:"h-6 w-6 text-white"})}),Ot.jsxs("div",{children:[Ot.jsx(zr,{className:"text-xl",children:"AI-Powered Tools"}),Ot.jsx(Ur,{children:"Save time with intelligent content generation and automation"})]})]}),Ot.jsx(Tn,{className:"bg-gradient-to-r from-purple-500 to-pink-500 text-white px-3 py-1",children:"NEW"})]})}),Ot.jsxs(Mn,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[Ot.jsxs(Ln,{className:"w-full h-auto py-6 flex-col gap-2 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white shadow-lg hover:shadow-xl transition-all",size:"lg",onClick:()=>window.location.href="/ai/content-generator",children:[Ot.jsx(An,{className:"h-6 w-6"}),Ot.jsxs("div",{className:"text-center",children:[Ot.jsx("div",{className:"font-bold",children:"Generate Content"}),Ot.jsx("div",{className:"text-xs opacity-90",children:"AI-powered posts & descriptions"})]})]}),Ot.jsxs(Ln,{className:"w-full h-auto py-6 flex-col gap-2 bg-white/90 hover:bg-white dark:bg-gray-800 dark:hover:bg-gray-700 text-gray-900 dark:text-white shadow-lg hover:shadow-xl transition-all border-2 border-purple-200 dark:border-purple-800",variant:"outline",size:"lg",onClick:()=>window.location.href="/integrations/gmb",children:[Ot.jsx(Bn,{className:"h-6 w-6 text-blue-600"}),Ot.jsxs("div",{className:"text-center",children:[Ot.jsx("div",{className:"font-bold",children:"GMB Integration"}),Ot.jsx("div",{className:"text-xs opacity-70",children:"Sync with Google My Business"})]})]}),Ot.jsxs(Ln,{className:"w-full h-auto py-6 flex-col gap-2 bg-white/90 hover:bg-white dark:bg-gray-800 dark:hover:bg-gray-700 text-gray-900 dark:text-white shadow-lg hover:shadow-xl transition-all border-2 border-purple-200 dark:border-purple-800",variant:"outline",size:"lg",onClick:()=>window.open(`/ai/insights/${i.id}`,"_blank"),children:[Ot.jsx(Hs,{className:"h-6 w-6 text-green-600"}),Ot.jsxs("div",{className:"text-center",children:[Ot.jsx("div",{className:"font-bold",children:"AI Insights"}),Ot.jsx("div",{className:"text-xs opacity-70",children:"Performance recommendations"})]})]}),Ot.jsxs(Ln,{className:"w-full h-auto py-6 flex-col gap-2 bg-white/90 hover:bg-white dark:bg-gray-800 dark:hover:bg-gray-700 text-gray-900 dark:text-white shadow-lg hover:shadow-xl transition-all border-2 border-purple-200 dark:border-purple-800",variant:"outline",size:"lg",onClick:()=>window.open(`/ai/campaigns/${i.id}`,"_blank"),children:[Ot.jsx(Dn,{className:"h-6 w-6 text-orange-600"}),Ot.jsxs("div",{className:"text-center",children:[Ot.jsx("div",{className:"font-bold",children:"Smart Campaigns"}),Ot.jsx("div",{className:"text-xs opacity-70",children:"AI-optimized marketing"})]})]})]})]})}),Ot.jsx(Bxe,{businessId:Number(i.id),variant:"full"}),Ot.jsxs(Sn,{className:"bg-white/80 backdrop-blur-md",children:[Ot.jsxs(Lr,{children:[Ot.jsx(zr,{children:"Quick Actions"}),Ot.jsx(Ur,{children:"Manage your business day-to-day"})]}),Ot.jsxs(Mn,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[Ot.jsx(Yn,{href:`/vendor-products?businessId=${i.id}`,children:Ot.jsxs(Ln,{className:"w-full",variant:"outline",size:"lg",children:[Ot.jsx(wr,{className:"mr-2 h-5 w-5"}),"Add Product"]})}),Ot.jsx(Yn,{href:`/edit-business/${i.id}`,children:Ot.jsxs(Ln,{className:"w-full",variant:"outline",size:"lg",children:[Ot.jsx(yi,{className:"mr-2 h-5 w-5"}),"Edit Business"]})}),Ot.jsx(Yn,{href:`/business/${i.id}`,children:Ot.jsxs(Ln,{className:"w-full",variant:"outline",size:"lg",children:[Ot.jsx($r,{className:"mr-2 h-5 w-5"}),"View Profile"]})}),Ot.jsx(Yn,{href:"/ai/agents",children:Ot.jsxs(Ln,{className:"w-full bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white",size:"lg",children:[Ot.jsx(ii,{className:"mr-2 h-5 w-5"}),"AI Agents",Ot.jsx(Tn,{className:"ml-2 bg-white/20 text-white",children:"15"})]})})]})]}),Ot.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[Ot.jsxs(Sn,{className:"bg-white/80 backdrop-blur-md",children:[Ot.jsxs(Lr,{children:[Ot.jsx(zr,{children:"Recent Products"}),Ot.jsx(Ur,{children:"Your latest product listings"})]}),Ot.jsx(Mn,{children:o&&o.length>0?Ot.jsx("div",{className:"space-y-4",children:o.slice(0,5).map(e=>Ot.jsxs("div",{className:"flex items-center justify-between py-2 border-b last:border-0",children:[Ot.jsxs("div",{className:"flex-1",children:[Ot.jsx("p",{className:"font-medium",children:e.name}),Ot.jsxs("p",{className:"text-sm text-gray-900",children:["$",e.price]})]}),Ot.jsx(Tn,{variant:e.isActive?"default":"secondary",children:e.isActive?"Active":"Inactive"})]},e.id))}):Ot.jsxs("div",{className:"text-center py-8",children:[Ot.jsx(as,{className:"h-12 w-12 mx-auto text-gray-900 mb-4"}),Ot.jsx("p",{className:"text-gray-900 mb-4",children:"No products yet"}),Ot.jsx(Yn,{href:`/vendor-products?businessId=${i.id}`,children:Ot.jsxs(Ln,{children:[Ot.jsx(wr,{className:"mr-2 h-4 w-4"}),"Add Your First Product"]})})]})})]}),Ot.jsxs(Sn,{className:"bg-white/80 backdrop-blur-md",children:[Ot.jsxs(Lr,{children:[Ot.jsx(zr,{children:"Recent Posts"}),Ot.jsx(Ur,{children:"Your latest social updates"})]}),Ot.jsx(Mn,{children:l&&l.length>0?Ot.jsx("div",{className:"space-y-4",children:l.slice(0,5).map(e=>Ot.jsxs("div",{className:"py-2 border-b last:border-0",children:[Ot.jsx("p",{className:"text-sm line-clamp-2",children:e.content}),Ot.jsxs("div",{className:"flex gap-4 mt-2 text-xs text-gray-900",children:[Ot.jsxs("span",{children:[e.likeCount||0," likes"]}),Ot.jsxs("span",{children:[e.commentCount||0," comments"]}),Ot.jsxs("span",{children:[e.shareCount||0," shares"]})]})]},e.id))}):Ot.jsxs("div",{className:"text-center py-8",children:[Ot.jsx(Or,{className:"h-12 w-12 mx-auto text-gray-900 mb-4"}),Ot.jsx("p",{className:"text-gray-900 mb-4",children:"No posts yet"}),Ot.jsxs(Ln,{onClick:()=>n("content"),children:[Ot.jsx(An,{className:"mr-2 h-4 w-4"}),"Create Your First Post"]})]})})]})]})]}),Ot.jsxs(Ys,{value:"gmb",className:"space-y-6",children:[Ot.jsx(Ixe,{businessId:Number(i.id)}),Ot.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[Ot.jsx(Fxe,{businessId:Number(i.id)}),Ot.jsx(Lxe,{businessId:Number(i.id)})]}),Ot.jsx(Dxe,{businessId:Number(i.id)})]}),Ot.jsxs(Ys,{value:"content",className:"space-y-6",children:[Ot.jsx(eK,{businessId:Number(i.id)}),Ot.jsx(zxe,{businessId:Number(i.id),userId:e?.id,limit:10})]}),Ot.jsx(Ys,{value:"products",children:Ot.jsxs(Sn,{className:"bg-white/80 backdrop-blur-md",children:[Ot.jsx(Lr,{children:Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{children:[Ot.jsx(zr,{children:"Product Management"}),Ot.jsx(Ur,{children:"Manage your product catalog"})]}),Ot.jsx(Yn,{href:`/vendor-products?businessId=${i.id}`,children:Ot.jsxs(Ln,{children:[Ot.jsx(wr,{className:"mr-2 h-4 w-4"}),"Add Product"]})})]})}),Ot.jsx(Mn,{children:o&&o.length>0?Ot.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map(e=>Ot.jsxs(Sn,{className:"overflow-hidden",children:[e.imageUrl&&Ot.jsx("div",{className:"aspect-square overflow-hidden",children:Ot.jsx("img",{src:e.imageUrl,alt:e.name,className:"w-full h-full object-cover"})}),Ot.jsxs(Mn,{className:"p-4",children:[Ot.jsx("h3",{className:"font-semibold mb-2",children:e.name}),Ot.jsxs("div",{className:"flex items-center justify-between mb-2",children:[Ot.jsxs("span",{className:"text-2xl font-bold",children:["$",e.price]}),Ot.jsx(Tn,{variant:e.isActive?"default":"secondary",children:e.isActive?"Active":"Inactive"})]}),Ot.jsxs("p",{className:"text-sm text-gray-900",children:["Inventory: ",e.stockQuantity||0]})]})]},e.id))}):Ot.jsxs("div",{className:"text-center py-12",children:[Ot.jsx(as,{className:"h-16 w-16 mx-auto text-gray-900 mb-4"}),Ot.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No products yet"}),Ot.jsx("p",{className:"text-gray-900 mb-6",children:"Start selling by adding your first product"}),Ot.jsx(Yn,{href:`/vendor-products?businessId=${i.id}`,children:Ot.jsxs(Ln,{size:"lg",children:[Ot.jsx(wr,{className:"mr-2 h-5 w-5"}),"Add Your First Product"]})})]})})]})}),Ot.jsx(Ys,{value:"posts",children:Ot.jsxs(Sn,{className:"bg-white/80 backdrop-blur-md",children:[Ot.jsx(Lr,{children:Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{children:[Ot.jsx(zr,{children:"Post Management"}),Ot.jsx(Ur,{children:"View and manage your social posts"})]}),Ot.jsxs(Ln,{onClick:()=>n("content"),children:[Ot.jsx(An,{className:"mr-2 h-4 w-4"}),"Create New Post"]})]})}),Ot.jsx(Mn,{children:l&&l.length>0?Ot.jsx("div",{className:"space-y-4",children:l.map(e=>Ot.jsx(Sn,{children:Ot.jsxs(Mn,{className:"pt-6",children:[Ot.jsx("p",{className:"mb-4",children:e.content}),Ot.jsxs("div",{className:"flex items-center gap-6 text-sm text-gray-900",children:[Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx(Zn,{className:"h-4 w-4"}),Ot.jsxs("span",{children:[e.likeCount||0," likes"]})]}),Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx(Or,{className:"h-4 w-4"}),Ot.jsxs("span",{children:[e.commentCount||0," comments"]})]}),Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx(Dn,{className:"h-4 w-4"}),Ot.jsxs("span",{children:[e.shareCount||0," shares"]})]}),Ot.jsx(Tn,{variant:"outline",className:"ml-auto",children:e.type})]})]})},e.id))}):Ot.jsxs("div",{className:"text-center py-12",children:[Ot.jsx(Or,{className:"h-16 w-16 mx-auto text-gray-900 mb-4"}),Ot.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No posts yet"}),Ot.jsx("p",{className:"text-gray-900 mb-6",children:"Start engaging your audience with your first post"}),Ot.jsxs(Ln,{size:"lg",onClick:()=>n("content"),children:[Ot.jsx(An,{className:"mr-2 h-5 w-5"}),"Create Your First Post"]})]})})]})})]})})]})}hn.forwardRef(({className:e,...t},n)=>Ot.jsx("caption",{ref:n,className:bn("mt-4 text-sm text-muted-foreground",e),...t})).displayName="TableCaption";const Vxe=({milestone:e})=>Ot.jsxs(wo.div,{initial:{opacity:0,scale:.5},whileInView:{opacity:1,scale:1},transition:{duration:.5,delay:.3*e.id,ease:"easeOut"},viewport:{once:!0,amount:.8},className:"absolute flex items-center gap-4",style:e.position,children:[Ot.jsxs("div",{className:"relative flex h-8 w-8 items-center justify-center",children:[Ot.jsx("div",{className:bn("absolute h-3 w-3 rounded-full border-2",{complete:"bg-green-500 border-green-700","in-progress":"bg-blue-500 border-blue-700 animate-pulse",pending:"bg-muted border-border"}[e.status])}),Ot.jsx("div",{className:"absolute h-full w-full rounded-full bg-primary/10"})]}),Ot.jsx("div",{className:"rounded-full border bg-card px-4 py-2 text-sm font-medium text-card-foreground shadow-sm",children:e.name})]}),Hxe=hn.forwardRef(({className:e,milestones:t,mapImageSrc:n,...r},s)=>{const i=hn.useRef(null),{scrollYProgress:a}=So({target:i,offset:["start end","end start"]}),o=Mo(a,[.15,.7],[0,1]);return Ot.jsxs("div",{ref:i,className:bn("relative w-full max-w-4xl mx-auto py-24",e),...r,children:[Ot.jsx(wo.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut"},viewport:{once:!0,amount:.2},className:"absolute inset-0 top-10",children:Ot.jsx("img",{src:n,alt:"Product roadmap map",className:"h-full w-full object-contain"})}),Ot.jsxs("div",{className:"relative h-[400px]",children:[Ot.jsx("svg",{width:"100%",height:"100%",viewBox:"0 0 800 400",preserveAspectRatio:"none",className:"absolute top-0 left-0",children:Ot.jsx(wo.path,{d:"M 50 350 Q 200 50 400 200 T 750 100",fill:"none",stroke:"hsl(var(--primary))",strokeWidth:"3",strokeDasharray:"10 5",strokeLinecap:"round",style:{pathLength:o}})}),t.map(e=>Ot.jsx(Vxe,{milestone:e},e.id))]})]})});Hxe.displayName="AnimatedRoadmap";const Wxe="18.973665961em",$xe="\n  @keyframes js-ripple-animation {\n    0% { transform: scale(0); opacity: 1; }\n    100% { transform: scale(1); opacity: 0; }\n  }\n  .animate-js-ripple-effect {\n    animation: js-ripple-animation var(--ripple-duration) ease-out forwards;\n  }\n",Gxe=({children:e,onClick:t,className:n="",disabled:r=!1,variant:s="default",rippleColor:i,rippleDuration:a=600,hoverBaseColor:o="#6996e2",hoverRippleColor:l,hoverBorderEffectColor:c="#6996e277",hoverBorderEffectThickness:d="0.3em"})=>{const[u,h]=hn.useState([]),p=hn.useMemo(()=>i||"var(--button-ripple-color, rgba(0, 0, 0, 0.1))",[i]),m=hn.useMemo(()=>{let e="";const t="0.9s";for(let n=0;n<12;n++)for(let r=0;r<36;r++){const i=36*n+r+1,a=.125+.25*n,o=.1875+.25*r;"hover"===s?e+=`\n            .hover-variant-grid-cell:nth-child(${i}):hover ~ .hover-variant-visual-ripple {\n              top: ${a}em; left: ${o}em;\n              transition: width ${t} ease, height ${t} ease, top 0s linear, left 0s linear;\n            }`:"hoverborder"===s&&(e+=`\n            .hoverborder-variant-grid-cell:nth-child(${i}):hover ~ .hoverborder-variant-visual-ripple {\n              top: ${a}em; left: ${o}em;\n              transition: width ${t} ease-out, height ${t} ease-out, top 0s linear, left 0s linear;\n            }`)}if("hover"===s){return`\n        .hover-variant-visual-ripple {\n          background-color: ${l||((e,t)=>{let n=e.startsWith("#")?e.slice(1):e;return 3===n.length&&(n=n.split("").map(e=>e+e).join("")),`rgba(${parseInt(n.slice(0,2),16)}, ${parseInt(n.slice(2,4),16)}, ${parseInt(n.slice(4,6),16)}, ${t})`})(o,.466)};\n          transition: width ${t} ease, height ${t} ease, top 99999s linear, left 99999s linear;\n        }\n        .hover-variant-grid-cell:hover ~ .hover-variant-visual-ripple {\n          width: ${Wxe}; height: ${Wxe};\n        }\n        ${e}\n      `}return"hoverborder"===s?`\n        .hoverborder-variant-ripple-container {\n          padding: ${d};\n          mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);\n          mask-composite: exclude;\n          -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);\n          -webkit-mask-composite: xor;\n        }\n        .hoverborder-variant-visual-ripple {\n          background-color: ${c};\n          /* Ensure the base transition also uses the standardized duration for width/height */\n          transition: width ${t} ease-out, height ${t} ease-out, top 99999s linear, left 9999s linear;\n        }\n        .hoverborder-variant-grid-cell:hover ~ .hoverborder-variant-visual-ripple {\n          width: ${Wxe}; height: ${Wxe};\n        }\n        ${e}\n      `:""},[s,o,l,c,d]),f=e=>{r||((e=>{const t=e.currentTarget.getBoundingClientRect(),n=2*Math.max(t.width,t.height),r=e.clientX-t.left-n/2,s=e.clientY-t.top-n/2,i={key:Date.now(),x:r,y:s,size:n,color:p};h(e=>[...e,i]),setTimeout(()=>{h(e=>e.filter(e=>e.key!==i.key))},a)})(e),t&&t(e))},g=Ot.jsx("div",{className:"absolute inset-0 pointer-events-none z-[5]",children:u.map(e=>Ot.jsx("span",{className:"absolute rounded-full animate-js-ripple-effect",style:{left:e.x,top:e.y,width:e.size,height:e.size,backgroundColor:e.color,"--ripple-duration":`${a}ms`}},e.key))});if("hover"===s){const t=["relative","rounded-lg","text-lg","px-4","py-2","border-none","bg-transparent","isolate","overflow-hidden","cursor-pointer",r?"opacity-50 cursor-not-allowed pointer-events-none":"",n].filter(Boolean).join(" ");return Ot.jsxs(Ot.Fragment,{children:[Ot.jsx("style",{dangerouslySetInnerHTML:{__html:$xe}}),Ot.jsx("style",{dangerouslySetInnerHTML:{__html:m}}),Ot.jsxs("button",{className:t,onClick:f,disabled:r,children:[Ot.jsx("span",{className:"relative z-[10] pointer-events-none",children:e}),g,Ot.jsxs("div",{className:"hover-variant-grid-container absolute inset-0 grid overflow-hidden pointer-events-none z-[0]",style:{gridTemplateColumns:"repeat(36, 0.25em)"},children:[Array.from({length:432},(e,t)=>Ot.jsx("span",{className:"hover-variant-grid-cell relative flex justify-center items-center pointer-events-auto"},t)),Ot.jsx("div",{className:"hover-variant-visual-ripple pointer-events-none absolute w-0 h-0 rounded-full transform -translate-x-1/2 -translate-y-1/2 top-0 left-0 z-[-1]"})]})]})]})}if("hoverborder"===s){const t=["relative","rounded-lg","overflow-hidden","text-lg","px-4","py-2","border-none","bg-transparent","isolate","cursor-pointer",r?"opacity-50 cursor-not-allowed pointer-events-none":"",n].filter(Boolean).join(" ");return Ot.jsxs(Ot.Fragment,{children:[Ot.jsx("style",{dangerouslySetInnerHTML:{__html:$xe}}),Ot.jsx("style",{dangerouslySetInnerHTML:{__html:m}}),Ot.jsxs("button",{className:t,onClick:f,disabled:r,children:[Ot.jsx("span",{className:"relative z-[10] pointer-events-none",children:e}),g,Ot.jsxs("div",{className:"hoverborder-variant-ripple-container absolute inset-0 grid rounded-[0.8em] overflow-hidden pointer-events-none z-[0]",style:{gridTemplateColumns:"repeat(36, 0.25em)"},children:[Array.from({length:432},(e,t)=>Ot.jsx("span",{className:"hoverborder-variant-grid-cell relative flex justify-center items-center pointer-events-auto"},t)),Ot.jsx("div",{className:"hoverborder-variant-visual-ripple pointer-events-none absolute w-0 h-0 rounded-full transform -translate-x-1/2 -translate-y-1/2 top-0 left-0 z-[-1]"})]})]})]})}if("ghost"===s){const t=["relative","border-none","bg-transparent","isolate","overflow-hidden","cursor-pointer","px-4","py-2","rounded-lg","text-lg",r?"opacity-50 cursor-not-allowed pointer-events-none":"",n].filter(Boolean).join(" ");return Ot.jsxs(Ot.Fragment,{children:[Ot.jsx("style",{dangerouslySetInnerHTML:{__html:$xe}}),Ot.jsxs("button",{className:t,onClick:f,disabled:r,children:[Ot.jsx("span",{className:"relative z-10 pointer-events-none",children:e}),g]})]})}const x=`relative border-none overflow-hidden isolate transition-all duration-200 cursor-pointer px-4 py-2 bg-blue-600 hover:opacity-90 text-white rounded-lg ${r?"opacity-50 cursor-not-allowed":""} ${n}`;return Ot.jsxs(Ot.Fragment,{children:[Ot.jsx("style",{dangerouslySetInnerHTML:{__html:$xe}}),Ot.jsxs("button",{className:x,onClick:f,disabled:r,children:[Ot.jsx("span",{className:"relative z-[1] pointer-events-none",children:e}),g]})]})},qxe=({className:e})=>Ot.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:Ot.jsx("path",{d:"M20 6 9 17l-5-5"})}),Xxe=()=>{const e=hn.useRef(null),t=hn.useRef(null),n=hn.useRef(null),r=hn.useRef(null),[s,i]=hn.useState([1,1,1]);return hn.useEffect(()=>{const e=document.documentElement,t=()=>{const t=e.classList.contains("dark");i(t?[0,0,0]:[1,1,1])};t();const n=new MutationObserver(e=>{for(const n of e)"attributes"===n.type&&"class"===n.attributeName&&t()});return n.observe(e,{attributes:!0}),()=>n.disconnect()},[]),hn.useEffect(()=>{const e=r.current,i=t.current,a=n.current;e&&i&&a&&(e.useProgram(i),e.uniform3fv(a,new Float32Array(s)))},[s]),hn.useEffect(()=>{const i=e.current;if(!i)return;const a=i.getContext("webgl");if(!a)return;r.current=a;const o=(e,t)=>{const n=a.createShader(e);if(!n)throw new Error("Could not create shader");if(a.shaderSource(n,t),a.compileShader(n),!a.getShaderParameter(n,a.COMPILE_STATUS))throw new Error(a.getShaderInfoLog(n)||"Shader compilation error");return n},l=a.createProgram();if(!l)throw new Error("Could not create program");const c=o(a.VERTEX_SHADER,"attribute vec2 aPosition; void main() { gl_Position = vec4(aPosition, 0.0, 1.0); }"),d=o(a.FRAGMENT_SHADER,"\n      precision highp float;\n      uniform float iTime;\n      uniform vec2 iResolution;\n      uniform vec3 uBackgroundColor;\n      mat2 rotate2d(float angle){ float c=cos(angle),s=sin(angle); return mat2(c,-s,s,c); }\n      float variation(vec2 v1,vec2 v2,float strength,float speed){ return sin(dot(normalize(v1),normalize(v2))*strength+iTime*speed)/100.0; }\n      vec3 paintCircle(vec2 uv,vec2 center,float rad,float width){\n        vec2 diff = center-uv;\n        float len = length(diff);\n        len += variation(diff,vec2(0.,1.),5.,2.);\n        len -= variation(diff,vec2(1.,0.),5.,2.);\n        float circle = smoothstep(rad-width,rad,len)-smoothstep(rad,rad+width,len);\n        return vec3(circle);\n      }\n      void main(){\n        vec2 uv = gl_FragCoord.xy/iResolution.xy;\n        uv.x *= 1.5; uv.x -= 0.25;\n        float mask = 0.0;\n        float radius = .35;\n        vec2 center = vec2(.5);\n        mask += paintCircle(uv,center,radius,.035).r;\n        mask += paintCircle(uv,center,radius-.018,.01).r;\n        mask += paintCircle(uv,center,radius+.018,.005).r;\n        vec2 v=rotate2d(iTime)*uv;\n        vec3 foregroundColor=vec3(v.x,v.y,.7-v.y*v.x);\n        vec3 color=mix(uBackgroundColor,foregroundColor,mask);\n        color=mix(color,vec3(1.),paintCircle(uv,center,radius,.003).r);\n        gl_FragColor=vec4(color,1.);\n      }");a.attachShader(l,c),a.attachShader(l,d),a.linkProgram(l),a.useProgram(l),t.current=l;const u=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,u),a.bufferData(a.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]),a.STATIC_DRAW);const h=a.getAttribLocation(l,"aPosition");a.enableVertexAttribArray(h),a.vertexAttribPointer(h,2,a.FLOAT,!1,0,0);const p=a.getUniformLocation(l,"iTime"),m=a.getUniformLocation(l,"iResolution");let f;n.current=a.getUniformLocation(l,"uBackgroundColor"),a.uniform3fv(n.current,new Float32Array(s));const g=e=>{a.uniform1f(p,.001*e),a.uniform2f(m,i.width,i.height),a.drawArrays(a.TRIANGLES,0,6),f=requestAnimationFrame(g)},x=()=>{i.width=window.innerWidth,i.height=window.innerHeight,a.viewport(0,0,a.drawingBufferWidth,a.drawingBufferHeight)};return x(),window.addEventListener("resize",x),f=requestAnimationFrame(g),()=>{window.removeEventListener("resize",x),cancelAnimationFrame(f)}},[]),Ot.jsx("canvas",{ref:e,className:"absolute top-0 left-0 w-full h-full block z-0 bg-background"})},Kxe=({planName:e,description:t,price:n,features:r,buttonText:s,isPopular:i=!1,buttonVariant:a="primary"})=>{const o=`\n    backdrop-blur-[14px] bg-gradient-to-br rounded-2xl shadow-xl flex-1 max-w-xs px-7 py-8 flex flex-col transition-all duration-300\n    from-black/5 to-black/0 border border-black/10\n    dark:from-white/10 dark:to-white/5 dark:border-white/10 dark:backdrop-brightness-[0.91]\n    ${i?"scale-105 relative ring-2 ring-cyan-400/20 dark:from-white/20 dark:to-white/10 dark:border-cyan-400/30 shadow-2xl":""}\n  `,l=`\n    mt-auto w-full py-2.5 rounded-xl font-semibold text-[14px] transition font-sans\n    ${"primary"===a?"bg-cyan-400 hover:bg-cyan-300 text-foreground":"bg-black/10 hover:bg-black/20 text-foreground border border-black/20 dark:bg-white/10 dark:hover:bg-white/20 dark:text-white dark:border-white/20"}\n  `;return Ot.jsxs("div",{className:o.trim(),children:[i&&Ot.jsx("div",{className:"absolute -top-4 right-4 px-3 py-1 text-[12px] font-semibold rounded-full bg-cyan-400 text-foreground dark:text-black",children:"Most Popular"}),Ot.jsxs("div",{className:"mb-3",children:[Ot.jsx("h2",{className:"text-[48px] font-extralight tracking-[-0.03em] text-foreground font-display",children:e}),Ot.jsx("p",{className:"text-[16px] text-foreground/70 mt-1 font-sans",children:t})]}),Ot.jsxs("div",{className:"my-6 flex items-baseline gap-2",children:[Ot.jsxs("span",{className:"text-[48px] font-extralight text-foreground font-display",children:["$",n]}),Ot.jsx("span",{className:"text-[14px] text-foreground/70 font-sans",children:"/mo"})]}),Ot.jsx("div",{className:"card-divider w-full mb-5 h-px bg-[linear-gradient(90deg,transparent,rgba(0,0,0,0.1)_50%,transparent)] dark:bg-[linear-gradient(90deg,transparent,rgba(255,255,255,0.09)_20%,rgba(255,255,255,0.22)_50%,rgba(255,255,255,0.09)_80%,transparent)]"}),Ot.jsx("ul",{className:"flex flex-col gap-2 text-[14px] text-foreground/90 mb-6 font-sans",children:r.map((e,t)=>Ot.jsxs("li",{className:"flex items-center gap-2",children:[Ot.jsx(qxe,{className:"text-cyan-400 w-4 h-4"})," ",e]},t))}),Ot.jsx(Gxe,{className:l.trim(),children:s})]})},Yxe=({title:e,subtitle:t,plans:n,showAnimatedBackground:r=!0})=>Ot.jsxs("section",{className:"relative bg-background text-foreground w-full overflow-hidden min-h-[600px]",children:[r&&Ot.jsx(Xxe,{}),Ot.jsxs("div",{className:"relative w-full flex flex-col items-center px-4 py-16 md:py-20 z-10",children:[Ot.jsxs("div",{className:"w-full max-w-5xl mx-auto text-center mb-14",children:[Ot.jsx("h1",{className:"text-[48px] md:text-[64px] font-extralight leading-tight tracking-[-0.03em] bg-clip-text text-transparent bg-gradient-to-r from-slate-900 via-cyan-500 to-blue-600 dark:from-white dark:via-cyan-300 dark:to-blue-400 font-display",children:e}),Ot.jsx("p",{className:"mt-3 text-[16px] md:text-[20px] text-foreground/80 max-w-2xl mx-auto font-sans",children:t})]}),Ot.jsx("div",{className:"flex flex-col md:flex-row gap-8 md:gap-6 justify-center items-center w-full max-w-4xl",children:n.map(e=>Ot.jsx(Kxe,{...e},e.planName))})]})]}),Zxe=[{id:1,name:"Establish Presence",status:"complete",position:{top:"70%",left:"5%"}},{id:2,name:"Activate Commerce",status:"complete",position:{top:"15%",left:"25%"}},{id:3,name:"Accelerate Growth",status:"in-progress",position:{top:"45%",left:"55%"}},{id:4,name:"Market Leader",status:"pending",position:{top:"10%",right:"10%"}}],Jxe=[{planName:"Local Starter",description:"Your digital foundation. Build trust and connect authentically.",price:"TBD",features:["Professional business showcase","Entrepreneur profile & story","Direct customer conversations","Community marketplace access"],buttonText:"Start Your Journey",buttonVariant:"secondary"},{planName:"Local Market",description:"Transform browsers into buyers. Sell smarter, grow faster.",price:"TBD",features:["Everything in Starter","Full-featured online storefront","Unlimited product catalog","AI-powered content creation","Real-time analytics dashboard","Integrated payment processing","Cross-promotion network access","500 automated emails monthly","Priority marketplace placement"],buttonText:"Elevate to Market",isPopular:!0,buttonVariant:"primary"},{planName:"Enterprise Local",description:"Dominate your market with enterprise power at local prices.",price:"TBD",features:["Everything in Market","15 specialized AI agents","Premium Registry spotlight","Advanced predictive analytics","Unlimited marketing campaigns","White-glove support 24/7","Custom API integration","Multi-location management","Bespoke brand experiences","Dedicated success strategist"],buttonText:"Scale to Enterprise",buttonVariant:"primary"}];function Qxe(){const{isAuthenticated:e}=Ua();return hn.useEffect(()=>(document.body.classList.add("has-video-bg"),()=>document.body.classList.remove("has-video-bg")),[]),Ot.jsxs("div",{className:"min-h-screen relative",style:{position:"relative",zIndex:2,background:"transparent",backgroundColor:"transparent"},children:[Ot.jsx(Gr,{youtubeUrl:"https://youtu.be/5xnaoI0cXjs",overlayOpacity:.4}),Ot.jsxs("div",{className:"w-full relative",style:{zIndex:20},children:[Ot.jsxs("div",{className:"container mx-auto flex flex-col items-center px-4 py-16 text-center md:py-24",children:[Ot.jsxs("h1",{className:"text-4xl font-bold tracking-tight md:text-6xl lg:text-7xl bg-gradient-to-r from-[#008B8B] via-[#d4af37] to-[#008B8B] bg-clip-text text-transparent",style:{textShadow:"0 4px 12px rgba(0,0,0,1), 0 2px 8px rgba(0,0,0,1)"},children:["One Platform. ",Ot.jsx("span",{className:"bg-black/70 p-2 rounded-md text-white",style:{textShadow:"0 2px 8px rgba(0,0,0,1)"},children:"Infinite Growth."})]}),Ot.jsx("p",{className:"mt-6 max-w-2xl text-lg text-white md:text-xl font-medium bg-black/60 backdrop-blur-sm px-6 py-4 rounded-2xl",style:{textShadow:"0 2px 8px rgba(0,0,0,1)"},children:"Replace 12+ expensive tools. Save $47,000 annually. Join Florida's most successful businesses on the only platform designed for local domination."}),Ot.jsx("div",{className:"mt-8 flex flex-wrap justify-center gap-4",style:{position:"relative",zIndex:100},children:e?Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(Ln,{size:"lg",variant:"fl-gold",style:{position:"relative",zIndex:100,pointerEvents:"auto",cursor:"pointer"},children:"Unlock Full Power"}),Ot.jsx(Yn,{href:"/business/dashboard",children:Ot.jsx(Ln,{size:"lg",variant:"fl-glass",style:{position:"relative",zIndex:100,pointerEvents:"auto",cursor:"pointer"},children:"View Dashboard"})})]}):Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(Ln,{size:"lg",variant:"fl-gold",onClick:()=>window.location.href="/api/login",style:{position:"relative",zIndex:100,pointerEvents:"auto",cursor:"pointer"},children:"Claim Your Space"}),Ot.jsx(Ln,{size:"lg",variant:"fl-glass",style:{position:"relative",zIndex:100,pointerEvents:"auto",cursor:"pointer"},children:"Watch Demo"})]})})]}),Ot.jsx(Hxe,{milestones:Zxe,mapImageSrc:"https://www.thiings.co/_next/image?url=https%3A%2F%2Flftz25oez4aqbxpq.public.blob.vercel-storage.com%2Fimage-SsfjxCJh43Hr1dqzkbFWUGH3ICZQbH.png&w=320&q=75","aria-label":"An animated roadmap showing your business journey from setup to becoming a local legend."}),Ot.jsx(Yxe,{title:Ot.jsxs(Ot.Fragment,{children:["Choose Your ",Ot.jsx("span",{className:"text-cyan-400",children:"Growth"})," Trajectory"]}),subtitle:"Every tier unlocks exponential value. Start where you are. Scale when you're ready.",plans:Jxe,showAnimatedBackground:!0}),Ot.jsxs("div",{className:"container mx-auto px-4 py-16",children:[Ot.jsxs("div",{className:"text-center mb-16",children:[Ot.jsxs("h2",{className:"text-3xl md:text-5xl font-light mb-6 tracking-tight",children:["The ",Ot.jsx("span",{className:"font-semibold bg-gradient-to-r from-[#008B8B] to-[#d4af37] bg-clip-text text-transparent",children:"Florida Local"})," Advantage"]}),Ot.jsxs("p",{className:"text-lg md:text-xl text-white max-w-3xl mx-auto font-medium leading-relaxed bg-black/50 backdrop-blur-sm px-6 py-4 rounded-2xl",style:{textShadow:"0 2px 6px rgba(0,0,0,1)"},children:["While competitors juggle dozens of disconnected tools, you operate from one intelligent command center.",Ot.jsx("span",{className:"block mt-2 font-semibold text-white",children:"This isn't just software. It's your competitive edge."})]})]}),Ot.jsxs("div",{className:"grid md:grid-cols-3 gap-12 max-w-5xl mx-auto mb-16",children:[Ot.jsxs("div",{className:"text-center group hover:scale-105 transition-transform duration-300 bg-black/50 backdrop-blur-md rounded-2xl p-6",children:[Ot.jsx("div",{className:"text-5xl md:text-6xl font-extralight text-transparent bg-gradient-to-br from-[#d4af37] to-[#ffd700] bg-clip-text mb-3",style:{filter:"drop-shadow(0 2px 8px rgba(212,175,55,0.8))"},children:"156%"}),Ot.jsx("div",{className:"text-xl font-semibold mb-2 text-white",style:{textShadow:"0 2px 4px rgba(0,0,0,0.8)"},children:"Revenue Growth"}),Ot.jsx("div",{className:"text-sm text-white font-medium",style:{textShadow:"0 2px 4px rgba(0,0,0,0.8)"},children:"Proven average in 6 months"})]}),Ot.jsxs("div",{className:"text-center group hover:scale-105 transition-transform duration-300 bg-black/50 backdrop-blur-md rounded-2xl p-6",children:[Ot.jsx("div",{className:"text-5xl md:text-6xl font-extralight text-transparent bg-gradient-to-br from-[#008B8B] to-[#00A8A8] bg-clip-text mb-3",style:{filter:"drop-shadow(0 2px 8px rgba(0,139,139,0.8))"},children:"$47K"}),Ot.jsx("div",{className:"text-xl font-semibold mb-2 text-white",style:{textShadow:"0 2px 4px rgba(0,0,0,0.8)"},children:"Annual Savings"}),Ot.jsx("div",{className:"text-sm text-white font-medium",style:{textShadow:"0 2px 4px rgba(0,0,0,0.8)"},children:"Replace your entire tech stack"})]}),Ot.jsxs("div",{className:"text-center group hover:scale-105 transition-transform duration-300 bg-black/50 backdrop-blur-md rounded-2xl p-6",children:[Ot.jsx("div",{className:"text-5xl md:text-6xl font-extralight text-transparent bg-gradient-to-br from-[#d4af37] to-[#cd7f32] bg-clip-text mb-3",style:{filter:"drop-shadow(0 2px 8px rgba(212,175,55,0.8))"},children:"32hrs"}),Ot.jsx("div",{className:"text-xl font-semibold mb-2 text-white",style:{textShadow:"0 2px 4px rgba(0,0,0,0.8)"},children:"Time Reclaimed"}),Ot.jsx("div",{className:"text-sm text-white font-medium",style:{textShadow:"0 2px 4px rgba(0,0,0,0.8)"},children:"Every week through AI automation"})]})]}),Ot.jsxs("div",{className:"max-w-4xl mx-auto bg-gradient-to-br from-white/5 to-white/10 backdrop-blur-xl rounded-3xl p-12 border border-white/10 shadow-2xl",children:[Ot.jsx("h3",{className:"text-2xl md:text-3xl font-light mb-8 text-center",children:"What You're Really Buying"}),Ot.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[Ot.jsxs("div",{className:"space-y-4",children:[Ot.jsxs("div",{className:"flex items-start gap-3",children:[Ot.jsx("div",{className:"w-1 h-12 bg-gradient-to-b from-[#008B8B] to-transparent rounded-full mt-1"}),Ot.jsxs("div",{children:[Ot.jsx("h4",{className:"font-semibold mb-1 text-white",children:"Time Freedom"}),Ot.jsx("p",{className:"text-sm text-white/90",children:"AI handles the repetitive. You focus on growth."})]})]}),Ot.jsxs("div",{className:"flex items-start gap-3",children:[Ot.jsx("div",{className:"w-1 h-12 bg-gradient-to-b from-[#d4af37] to-transparent rounded-full mt-1"}),Ot.jsxs("div",{children:[Ot.jsx("h4",{className:"font-semibold mb-1 text-white",children:"Market Authority"}),Ot.jsx("p",{className:"text-sm text-white/90",children:"Dominate local search. Own your category."})]})]})]}),Ot.jsxs("div",{className:"space-y-4",children:[Ot.jsxs("div",{className:"flex items-start gap-3",children:[Ot.jsx("div",{className:"w-1 h-12 bg-gradient-to-b from-[#008B8B] to-transparent rounded-full mt-1"}),Ot.jsxs("div",{children:[Ot.jsx("h4",{className:"font-semibold mb-1 text-white",children:"Revenue Multiplication"}),Ot.jsx("p",{className:"text-sm text-white/90",children:"Turn browsers into buyers. Automatically."})]})]}),Ot.jsxs("div",{className:"flex items-start gap-3",children:[Ot.jsx("div",{className:"w-1 h-12 bg-gradient-to-b from-[#d4af37] to-transparent rounded-full mt-1"}),Ot.jsxs("div",{children:[Ot.jsx("h4",{className:"font-semibold mb-1 text-white",children:"Peace of Mind"}),Ot.jsx("p",{className:"text-sm text-white/90",children:"One platform. One price. Zero complexity."})]})]})]})]})]}),Ot.jsxs("div",{className:"text-center mt-16",children:[Ot.jsxs("p",{className:"text-2xl md:text-3xl font-medium mb-8 max-w-2xl mx-auto text-white bg-black/50 backdrop-blur-sm px-8 py-6 rounded-2xl",style:{textShadow:"0 2px 6px rgba(0,0,0,1)"},children:["The question isn't ",Ot.jsx("span",{className:"font-bold",children:"if"})," you can afford Florida Local.",Ot.jsx("span",{className:"block mt-2 text-xl text-white/95",children:"It's whether you can afford to wait."})]}),e?Ot.jsx(Ln,{size:"xl",variant:"fl-gold",className:"text-lg px-10 py-7 shadow-2xl hover:shadow-[0_0_40px_rgba(212,175,55,0.3)] transition-all duration-300",children:"Unlock Your Full Potential"}):Ot.jsx(Ln,{size:"xl",variant:"fl-gold",className:"text-lg px-10 py-7 shadow-2xl hover:shadow-[0_0_40px_rgba(212,175,55,0.3)] transition-all duration-300",onClick:()=>window.location.href="/api/login",children:"Transform Your Business Now"})]})]})]})]})}const eve="#3b82f6",tve="#10b981",nve="#f59e0b",rve="#a855f7";function sve(){const{toast:e}=Nn(),[t,n]=hn.useState(null),[r,s]=hn.useState([]),[i,a]=hn.useState("30d"),[o,l]=hn.useState(!0);hn.useEffect(()=>{c()},[i]);const c=async()=>{l(!0);try{const e=await fetch(`/api/marketing/analytics/overview?range=${i}`,{credentials:"include"});if(e.ok){const t=await e.json();n(t.metrics),s(t.chartData||[])}}catch(t){e({title:"Error",description:"Failed to load dashboard data",variant:"destructive"})}finally{l(!1)}};if(o||!t)return Ot.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:Ot.jsx(Fr,{className:"h-8 w-8 animate-spin text-primary"})});const d=e=>e>0?Ot.jsx(Dn,{className:"h-4 w-4 text-green-500"}):e<0?Ot.jsx(Xi,{className:"h-4 w-4 text-red-500"}):null,u=e=>e>0?"text-green-600":e<0?"text-red-600":"text-muted-foreground",h=[{name:"Opened",value:t.emails.opened,color:tve},{name:"Clicked",value:t.emails.clicked,color:eve},{name:"Unopened",value:t.emails.delivered-t.emails.opened,color:nve}],p=[{name:"Active",value:t.campaigns.active,color:tve},{name:"Scheduled",value:t.campaigns.scheduled,color:nve},{name:"Completed",value:t.campaigns.completed,color:eve}];return Ot.jsxs("div",{className:"space-y-6",children:[Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{children:[Ot.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Marketing Overview"}),Ot.jsx("p",{className:"text-muted-foreground",children:"Comprehensive view of your marketing performance"})]}),Ot.jsxs(Un,{value:i,onValueChange:e=>a(e),children:[Ot.jsxs(Vn,{className:"w-[180px]",children:[Ot.jsx(Qn,{className:"mr-2 h-4 w-4"}),Ot.jsx(Hn,{})]}),Ot.jsxs(Wn,{children:[Ot.jsx($n,{value:"7d",children:"Last 7 days"}),Ot.jsx($n,{value:"30d",children:"Last 30 days"}),Ot.jsx($n,{value:"90d",children:"Last 90 days"}),Ot.jsx($n,{value:"1y",children:"Last year"})]})]})]}),Ot.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[Ot.jsx(wo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ot.jsx(zr,{className:"text-sm font-medium",children:"Total Campaigns"}),Ot.jsx(Jr,{className:"h-4 w-4 text-muted-foreground"})]}),Ot.jsxs(Mn,{children:[Ot.jsx("div",{className:"text-2xl font-bold",children:t.campaigns.total}),Ot.jsx("div",{className:"flex items-center gap-2 mt-1",children:Ot.jsxs(Tn,{variant:"secondary",className:"text-xs",children:[t.campaigns.active," active"]})}),Ot.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:[t.campaigns.scheduled," scheduled"]})]})]})}),Ot.jsx(wo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ot.jsx(zr,{className:"text-sm font-medium",children:"Email Performance"}),Ot.jsx(Ri,{className:"h-4 w-4 text-muted-foreground"})]}),Ot.jsxs(Mn,{children:[Ot.jsxs("div",{className:"text-2xl font-bold",children:[t.emails.openRate.toFixed(1),"%"]}),Ot.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Open Rate"}),Ot.jsxs("div",{className:"mt-2 space-y-1",children:[Ot.jsxs("div",{className:"flex items-center justify-between text-xs",children:[Ot.jsx("span",{className:"text-muted-foreground",children:"Click Rate"}),Ot.jsxs("span",{className:"font-medium",children:[t.emails.clickRate.toFixed(1),"%"]})]}),Ot.jsx(Vr,{value:t.emails.clickRate,className:"h-1"})]})]})]})}),Ot.jsx(wo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ot.jsx(zr,{className:"text-sm font-medium",children:"Total Audience"}),Ot.jsx(On,{className:"h-4 w-4 text-muted-foreground"})]}),Ot.jsxs(Mn,{children:[Ot.jsx("div",{className:"text-2xl font-bold",children:t.audience.total.toLocaleString()}),Ot.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[d(t.audience.growthRate),Ot.jsxs("span",{className:`text-xs font-medium ${u(t.audience.growthRate)}`,children:[t.audience.growthRate>0?"+":"",t.audience.growthRate.toFixed(1),"%"]}),Ot.jsx("span",{className:"text-xs text-muted-foreground",children:"growth"})]}),Ot.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:[t.audience.segments," segments"]})]})]})}),Ot.jsx(wo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ot.jsx(zr,{className:"text-sm font-medium",children:"Marketing ROI"}),Ot.jsx(ar,{className:"h-4 w-4 text-muted-foreground"})]}),Ot.jsxs(Mn,{children:[Ot.jsxs("div",{className:"text-2xl font-bold",children:[t.revenue.roi.toFixed(1),"x"]}),Ot.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Return on Investment"}),Ot.jsxs("p",{className:"text-xs font-medium text-green-600 mt-2",children:["$",t.revenue.total.toLocaleString()," revenue"]})]})]})})]}),Ot.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[Ot.jsxs(Sn,{className:"col-span-1 lg:col-span-2",children:[Ot.jsxs(Lr,{children:[Ot.jsx(zr,{children:"Email Performance Trends"}),Ot.jsx(Ur,{children:"Track email engagement metrics over time"})]}),Ot.jsx(Mn,{children:Ot.jsx(v9,{width:"100%",height:300,children:Ot.jsxs(cge,{data:r,children:[Ot.jsx(ome,{strokeDasharray:"3 3"}),Ot.jsx(Zme,{dataKey:"date",tick:{fontSize:12},tickFormatter:e=>{const t=new Date(e);return`${t.getMonth()+1}/${t.getDate()}`}}),Ot.jsx(lfe,{tick:{fontSize:12}}),Ot.jsx(u9,{}),Ot.jsx(T6,{}),Ot.jsx(Bme,{type:"monotone",dataKey:"sent",stackId:"1",stroke:eve,fill:eve,fillOpacity:.6,name:"Sent"}),Ot.jsx(Bme,{type:"monotone",dataKey:"opened",stackId:"2",stroke:tve,fill:tve,fillOpacity:.6,name:"Opened"}),Ot.jsx(Bme,{type:"monotone",dataKey:"clicked",stackId:"3",stroke:rve,fill:rve,fillOpacity:.6,name:"Clicked"})]})})})]}),Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{children:[Ot.jsx(zr,{children:"Email Engagement Distribution"}),Ot.jsx(Ur,{children:"Breakdown of email interactions"})]}),Ot.jsx(Mn,{children:Ot.jsx(v9,{width:"100%",height:250,children:Ot.jsxs(lge,{children:[Ot.jsx(Lde,{data:h,cx:"50%",cy:"50%",labelLine:!1,label:e=>`${e.name}: ${e.value}`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:h.map((e,t)=>Ot.jsx(y9,{fill:e.color},`cell-${t}`))}),Ot.jsx(u9,{})]})})})]}),Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{children:[Ot.jsx(zr,{children:"Campaign Status"}),Ot.jsx(Ur,{children:"Distribution by campaign status"})]}),Ot.jsx(Mn,{children:Ot.jsx(v9,{width:"100%",height:250,children:Ot.jsxs(oge,{data:p,children:[Ot.jsx(ome,{strokeDasharray:"3 3"}),Ot.jsx(Zme,{dataKey:"name",tick:{fontSize:12}}),Ot.jsx(lfe,{tick:{fontSize:12}}),Ot.jsx(u9,{}),Ot.jsx(the,{dataKey:"value",radius:[8,8,0,0],children:p.map((e,t)=>Ot.jsx(y9,{fill:e.color},`cell-${t}`))})]})})})]})]}),Ot.jsxs(qs,{defaultValue:"campaigns",className:"space-y-4",children:[Ot.jsxs(Xs,{className:"grid w-full max-w-3xl grid-cols-5",children:[Ot.jsx(Ks,{value:"campaigns",children:"Campaigns"}),Ot.jsx(Ks,{value:"emails",children:"Emails"}),Ot.jsx(Ks,{value:"audience",children:"Audience"}),Ot.jsx(Ks,{value:"automation",children:"Automation"}),Ot.jsx(Ks,{value:"ai",children:"AI Tasks"})]}),Ot.jsx(Ys,{value:"campaigns",className:"space-y-4",children:Ot.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[Ot.jsxs(Sn,{children:[Ot.jsx(Lr,{className:"pb-3",children:Ot.jsx(zr,{className:"text-sm font-medium",children:"Total Campaigns"})}),Ot.jsx(Mn,{children:Ot.jsx("div",{className:"text-3xl font-bold",children:t.campaigns.total})})]}),Ot.jsxs(Sn,{children:[Ot.jsx(Lr,{className:"pb-3",children:Ot.jsxs(zr,{className:"text-sm font-medium flex items-center gap-2",children:[Ot.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}),"Active"]})}),Ot.jsx(Mn,{children:Ot.jsx("div",{className:"text-3xl font-bold",children:t.campaigns.active})})]}),Ot.jsxs(Sn,{children:[Ot.jsx(Lr,{className:"pb-3",children:Ot.jsxs(zr,{className:"text-sm font-medium flex items-center gap-2",children:[Ot.jsx("div",{className:"w-2 h-2 rounded-full bg-yellow-500"}),"Scheduled"]})}),Ot.jsx(Mn,{children:Ot.jsx("div",{className:"text-3xl font-bold",children:t.campaigns.scheduled})})]}),Ot.jsxs(Sn,{children:[Ot.jsx(Lr,{className:"pb-3",children:Ot.jsxs(zr,{className:"text-sm font-medium flex items-center gap-2",children:[Ot.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),"Completed"]})}),Ot.jsx(Mn,{children:Ot.jsx("div",{className:"text-3xl font-bold",children:t.campaigns.completed})})]})]})}),Ot.jsx(Ys,{value:"emails",className:"space-y-4",children:Ot.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[Ot.jsxs(Sn,{children:[Ot.jsx(Lr,{className:"pb-3",children:Ot.jsxs(zr,{className:"text-sm font-medium flex items-center gap-2",children:[Ot.jsx(ns,{className:"h-4 w-4"}),"Emails Sent"]})}),Ot.jsxs(Mn,{children:[Ot.jsx("div",{className:"text-3xl font-bold",children:t.emails.sent.toLocaleString()}),Ot.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[t.emails.delivered.toLocaleString()," delivered"]})]})]}),Ot.jsxs(Sn,{children:[Ot.jsx(Lr,{className:"pb-3",children:Ot.jsxs(zr,{className:"text-sm font-medium flex items-center gap-2",children:[Ot.jsx($r,{className:"h-4 w-4"}),"Open Rate"]})}),Ot.jsxs(Mn,{children:[Ot.jsxs("div",{className:"text-3xl font-bold",children:[t.emails.openRate.toFixed(1),"%"]}),Ot.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[t.emails.opened.toLocaleString()," opens"]})]})]}),Ot.jsxs(Sn,{children:[Ot.jsx(Lr,{className:"pb-3",children:Ot.jsxs(zr,{className:"text-sm font-medium flex items-center gap-2",children:[Ot.jsx(Yi,{className:"h-4 w-4"}),"Click Rate"]})}),Ot.jsxs(Mn,{children:[Ot.jsxs("div",{className:"text-3xl font-bold",children:[t.emails.clickRate.toFixed(1),"%"]}),Ot.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[t.emails.clicked.toLocaleString()," clicks"]})]})]}),Ot.jsxs(Sn,{children:[Ot.jsx(Lr,{className:"pb-3",children:Ot.jsxs(zr,{className:"text-sm font-medium flex items-center gap-2",children:[Ot.jsx(Cn,{className:"h-4 w-4"}),"Bounce Rate"]})}),Ot.jsxs(Mn,{children:[Ot.jsxs("div",{className:"text-3xl font-bold",children:[t.emails.bounceRate.toFixed(1),"%"]}),Ot.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[t.emails.bounced.toLocaleString()," bounces"]})]})]}),Ot.jsxs(Sn,{children:[Ot.jsx(Lr,{className:"pb-3",children:Ot.jsx(zr,{className:"text-sm font-medium",children:"Unsubscribes"})}),Ot.jsxs(Mn,{children:[Ot.jsx("div",{className:"text-3xl font-bold",children:t.emails.unsubscribed.toLocaleString()}),Ot.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[(t.emails.unsubscribed/t.emails.sent*100).toFixed(2),"% rate"]})]})]})]})}),Ot.jsx(Ys,{value:"audience",className:"space-y-4",children:Ot.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[Ot.jsxs(Sn,{children:[Ot.jsx(Lr,{className:"pb-3",children:Ot.jsxs(zr,{className:"text-sm font-medium flex items-center gap-2",children:[Ot.jsx(On,{className:"h-4 w-4"}),"Total Contacts"]})}),Ot.jsxs(Mn,{children:[Ot.jsx("div",{className:"text-3xl font-bold",children:t.audience.total.toLocaleString()}),Ot.jsxs("div",{className:"flex items-center gap-1 mt-2",children:[d(t.audience.growthRate),Ot.jsxs("span",{className:`text-sm font-medium ${u(t.audience.growthRate)}`,children:[t.audience.growthRate>0?"+":"",t.audience.growthRate.toFixed(1),"% growth"]})]})]})]}),Ot.jsxs(Sn,{children:[Ot.jsx(Lr,{className:"pb-3",children:Ot.jsxs(zr,{className:"text-sm font-medium flex items-center gap-2",children:[Ot.jsx(Us,{className:"h-4 w-4"}),"Segments"]})}),Ot.jsxs(Mn,{children:[Ot.jsx("div",{className:"text-3xl font-bold",children:t.audience.segments}),Ot.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Active segments"})]})]}),Ot.jsxs(Sn,{children:[Ot.jsx(Lr,{className:"pb-3",children:Ot.jsxs(zr,{className:"text-sm font-medium flex items-center gap-2",children:[Ot.jsx(us,{className:"h-4 w-4"}),"Active Subscribers"]})}),Ot.jsxs(Mn,{children:[Ot.jsx("div",{className:"text-3xl font-bold",children:t.audience.activeSubscribers.toLocaleString()}),Ot.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:[(t.audience.activeSubscribers/t.audience.total*100).toFixed(1),"% of total"]})]})]})]})}),Ot.jsx(Ys,{value:"automation",className:"space-y-4",children:Ot.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[Ot.jsxs(Sn,{children:[Ot.jsx(Lr,{className:"pb-3",children:Ot.jsxs(zr,{className:"text-sm font-medium flex items-center gap-2",children:[Ot.jsx(Zi,{className:"h-4 w-4"}),"Workflows"]})}),Ot.jsxs(Mn,{children:[Ot.jsx("div",{className:"text-3xl font-bold",children:t.workflows.total}),Ot.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[t.workflows.active," active"]})]})]}),Ot.jsxs(Sn,{children:[Ot.jsx(Lr,{className:"pb-3",children:Ot.jsxs(zr,{className:"text-sm font-medium flex items-center gap-2",children:[Ot.jsx(Ji,{className:"h-4 w-4"}),"Enrolled"]})}),Ot.jsxs(Mn,{children:[Ot.jsx("div",{className:"text-3xl font-bold",children:t.workflows.enrolled.toLocaleString()}),Ot.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Total contacts"})]})]}),Ot.jsxs(Sn,{children:[Ot.jsx(Lr,{className:"pb-3",children:Ot.jsxs(zr,{className:"text-sm font-medium flex items-center gap-2",children:[Ot.jsx(us,{className:"h-4 w-4"}),"Completed"]})}),Ot.jsxs(Mn,{children:[Ot.jsx("div",{className:"text-3xl font-bold",children:t.workflows.completed.toLocaleString()}),Ot.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[(t.workflows.completed/t.workflows.enrolled*100).toFixed(1),"% completion rate"]})]})]}),Ot.jsxs(Sn,{children:[Ot.jsx(Lr,{className:"pb-3",children:Ot.jsxs(zr,{className:"text-sm font-medium flex items-center gap-2",children:[Ot.jsx(cs,{className:"h-4 w-4"}),"Lead Forms"]})}),Ot.jsxs(Mn,{children:[Ot.jsx("div",{className:"text-3xl font-bold",children:t.forms.total}),Ot.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[t.forms.conversionRate.toFixed(1),"% conversion"]})]})]})]})}),Ot.jsx(Ys,{value:"ai",className:"space-y-4",children:Ot.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[Ot.jsxs(Sn,{children:[Ot.jsx(Lr,{className:"pb-3",children:Ot.jsxs(zr,{className:"text-sm font-medium flex items-center gap-2",children:[Ot.jsx(An,{className:"h-4 w-4 text-purple-500"}),"Total AI Tasks"]})}),Ot.jsxs(Mn,{children:[Ot.jsx("div",{className:"text-3xl font-bold",children:t.aiTasks.total}),Ot.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"All time"})]})]}),Ot.jsxs(Sn,{children:[Ot.jsx(Lr,{className:"pb-3",children:Ot.jsxs(zr,{className:"text-sm font-medium flex items-center gap-2",children:[Ot.jsx(us,{className:"h-4 w-4 text-green-500"}),"Completed"]})}),Ot.jsxs(Mn,{children:[Ot.jsx("div",{className:"text-3xl font-bold text-green-600",children:t.aiTasks.completed}),Ot.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[(t.aiTasks.completed/t.aiTasks.total*100).toFixed(1),"% success rate"]})]})]}),Ot.jsxs(Sn,{children:[Ot.jsx(Lr,{className:"pb-3",children:Ot.jsxs(zr,{className:"text-sm font-medium flex items-center gap-2",children:[Ot.jsx(xr,{className:"h-4 w-4 text-yellow-500"}),"Pending"]})}),Ot.jsxs(Mn,{children:[Ot.jsx("div",{className:"text-3xl font-bold text-yellow-600",children:t.aiTasks.pending}),Ot.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"In queue"})]})]}),Ot.jsxs(Sn,{children:[Ot.jsx(Lr,{className:"pb-3",children:Ot.jsxs(zr,{className:"text-sm font-medium flex items-center gap-2",children:[Ot.jsx(Cn,{className:"h-4 w-4 text-red-500"}),"Failed"]})}),Ot.jsxs(Mn,{children:[Ot.jsx("div",{className:"text-3xl font-bold text-red-600",children:t.aiTasks.failed}),Ot.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[(t.aiTasks.failed/t.aiTasks.total*100).toFixed(1),"% failure rate"]})]})]})]})})]})]})}function ive(){Ua(),Nn();const[e,t]=hn.useState("overview"),{data:n}=za({queryKey:["/api/marketing/campaigns/stats"],queryFn:async()=>{try{const e=await qn("GET","/api/marketing/campaigns"),t={total:e.length,active:e.filter(e=>"active"===e.status).length,draft:e.filter(e=>"draft"===e.status).length,sent:e.filter(e=>"sent"===e.status).length,totalSent:0,totalOpens:0,totalClicks:0,avgOpenRate:0,avgClickRate:0};return e.forEach(e=>{e.analytics&&(t.totalSent+=e.analytics.sent||0,t.totalOpens+=e.analytics.opens||0,t.totalClicks+=e.analytics.clicks||0)}),t.totalSent>0&&(t.avgOpenRate=t.totalOpens/t.totalSent*100,t.avgClickRate=t.totalClicks/t.totalSent*100),t}catch(e){return{total:12,active:3,draft:5,sent:4,totalSent:1250,totalOpens:425,totalClicks:89,avgOpenRate:34,avgClickRate:7.1}}}}),{data:r}=za({queryKey:["/api/marketing/segments/stats"],queryFn:async()=>{try{const e=await qn("GET","/api/marketing/segments");let t=0;return e.forEach(e=>{t+=e.memberCount||0}),{total:e.length,activeMembers:t,avgSegmentSize:e.length>0?Math.round(t/e.length):0}}catch(e){return{total:8,activeMembers:450,avgSegmentSize:56}}}});za({queryKey:["/api/marketing/workflows/stats"],queryFn:async()=>{try{const e=await qn("GET","/api/marketing/workflows");let t=0,n=0;return e.forEach(e=>{"active"===e.status&&n++,t+=e.enrollmentCount||0}),{total:e.length,active:n,totalEnrollments:t,completionRate:72}}catch(e){return{total:5,active:2,totalEnrollments:234,completionRate:72}}}}),za({queryKey:["/api/marketing/forms/stats"],queryFn:async()=>{try{const e=await qn("GET","/api/marketing/forms");let t=0;return e.forEach(e=>{t+=e.submissionCount||0}),{total:e.length,submissions:t,conversionRate:t>0?12.5:0}}catch(e){return{total:6,submissions:89,conversionRate:12.5}}}});const{data:s}=za({queryKey:["/api/ai/stats"],queryFn:async()=>{try{return await qn("GET","/api/ai/stats")}catch(e){return{tasksCompleted:45,avgOptimization:28,modelsUsed:["claude-3.5-sonnet","gpt-4-turbo"],lastOptimization:(new Date).toISOString()}}}});return Ot.jsx("div",{className:"min-h-screen",children:Ot.jsxs("div",{className:"container mx-auto px-4 py-8",children:[Ot.jsx("div",{className:"mb-8",children:Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{children:[Ot.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Marketing Hub"}),Ot.jsx("p",{className:"text-muted-foreground mt-2",children:"AI-powered marketing automation and campaign management"})]}),Ot.jsxs(Ln,{size:"lg",className:"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700",children:[Ot.jsx(wr,{className:"h-5 w-5 mr-2"}),"Create Campaign"]})]})}),Ot.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4 mb-8",children:[Ot.jsxs(Sn,{className:"border-2 hover:border-purple-400 transition-all bg-white/80 backdrop-blur-md",children:[Ot.jsxs(Lr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ot.jsx(zr,{className:"text-sm font-medium",children:"Active Campaigns"}),Ot.jsx(Jr,{className:"h-4 w-4 text-purple-600"})]}),Ot.jsxs(Mn,{children:[Ot.jsx("div",{className:"text-2xl font-bold",children:n?.active||0}),Ot.jsx("div",{className:"flex items-center text-xs text-muted-foreground",children:Ot.jsxs("span",{children:[n?.total||0," total campaigns"]})})]})]}),Ot.jsxs(Sn,{className:"border-2 hover:border-green-400 transition-all bg-white/80 backdrop-blur-md",children:[Ot.jsxs(Lr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ot.jsx(zr,{className:"text-sm font-medium",children:"Open Rate"}),Ot.jsx($r,{className:"h-4 w-4 text-green-600"})]}),Ot.jsxs(Mn,{children:[Ot.jsxs("div",{className:"text-2xl font-bold",children:[n?.avgOpenRate?.toFixed(1)||0,"%"]}),Ot.jsxs("div",{className:"flex items-center text-xs text-green-600",children:[Ot.jsx(Dn,{className:"h-3 w-3 mr-1"}),Ot.jsx("span",{children:"+5.2% from last month"})]})]})]}),Ot.jsxs(Sn,{className:"border-2 hover:border-blue-400 transition-all bg-white/80 backdrop-blur-md",children:[Ot.jsxs(Lr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ot.jsx(zr,{className:"text-sm font-medium",children:"Total Segments"}),Ot.jsx(On,{className:"h-4 w-4 text-blue-600"})]}),Ot.jsxs(Mn,{children:[Ot.jsx("div",{className:"text-2xl font-bold",children:r?.total||0}),Ot.jsxs("div",{className:"text-xs text-muted-foreground",children:[r?.activeMembers||0," total members"]})]})]}),Ot.jsxs(Sn,{className:"border-2 hover:border-orange-400 transition-all bg-white/80 backdrop-blur-md",children:[Ot.jsxs(Lr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ot.jsx(zr,{className:"text-sm font-medium",children:"AI Optimizations"}),Ot.jsx(ei,{className:"h-4 w-4 text-orange-600"})]}),Ot.jsxs(Mn,{children:[Ot.jsx("div",{className:"text-2xl font-bold",children:s?.tasksCompleted||0}),Ot.jsxs("div",{className:"flex items-center text-xs text-orange-600",children:[Ot.jsx(An,{className:"h-3 w-3 mr-1"}),Ot.jsxs("span",{children:["+",s?.avgOptimization||0,"% improvement"]})]})]})]})]}),Ot.jsxs(qs,{value:e,onValueChange:t,children:[Ot.jsxs(Xs,{className:"grid w-full grid-cols-5",children:[Ot.jsx(Ks,{value:"overview",children:"Overview"}),Ot.jsx(Ks,{value:"campaigns",children:"Campaigns"}),Ot.jsx(Ks,{value:"segments",children:"Segments"}),Ot.jsx(Ks,{value:"workflows",children:"Workflows"}),Ot.jsx(Ks,{value:"ai-tools",children:"AI Tools"})]}),Ot.jsx(Ys,{value:"overview",children:Ot.jsx(sve,{})}),Ot.jsx(Ys,{value:"campaigns",children:Ot.jsxs("div",{className:"grid gap-6",children:[Ot.jsxs(Sn,{children:[Ot.jsx(Lr,{children:Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{children:[Ot.jsx(zr,{children:"Email Campaigns"}),Ot.jsx(Ur,{children:"Create and manage email marketing campaigns"})]}),Ot.jsxs("div",{className:"flex gap-2",children:[Ot.jsxs(Ln,{variant:"outline",children:[Ot.jsx(Qn,{className:"h-4 w-4 mr-2"}),"Schedule"]}),Ot.jsxs(Ln,{children:[Ot.jsx(wr,{className:"h-4 w-4 mr-2"}),"New Campaign"]})]})]})}),Ot.jsx(Mn,{children:Ot.jsx("div",{className:"space-y-4",children:[{name:"Summer Sale 2024",status:"active",sent:450,opens:156,clicks:34},{name:"Welcome Series",status:"active",sent:89,opens:45,clicks:12},{name:"Product Launch",status:"draft",sent:0,opens:0,clicks:0},{name:"Holiday Special",status:"scheduled",sent:0,opens:0,clicks:0}].map((e,t)=>Ot.jsx("div",{className:"p-4 border rounded-lg hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",children:Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsx(Jr,{className:"h-5 w-5 text-purple-600"}),Ot.jsxs("div",{children:[Ot.jsx("p",{className:"font-medium",children:e.name}),Ot.jsxs("div",{className:"flex items-center gap-4 mt-1",children:[Ot.jsx(Tn,{variant:"active"===e.status?"default":"draft"===e.status?"secondary":"outline",children:e.status}),e.sent>0&&Ot.jsxs(Ot.Fragment,{children:[Ot.jsxs("span",{className:"text-xs text-muted-foreground",children:[e.sent," sent"]}),Ot.jsxs("span",{className:"text-xs text-muted-foreground",children:[(e.opens/e.sent*100).toFixed(1),"% opens"]}),Ot.jsxs("span",{className:"text-xs text-muted-foreground",children:[(e.clicks/e.sent*100).toFixed(1),"% clicks"]})]})]})]})]}),Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx(Ln,{variant:"ghost",size:"sm",children:Ot.jsx(Hs,{className:"h-4 w-4"})}),Ot.jsx(Ln,{variant:"ghost",size:"sm",children:"Edit"}),"draft"===e.status&&Ot.jsxs(Ln,{size:"sm",children:[Ot.jsx(ns,{className:"h-4 w-4 mr-2"}),"Send"]})]})]})},t))})})]}),Ot.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[Ot.jsx(Sn,{className:"hover:shadow-lg transition-shadow cursor-pointer",children:Ot.jsxs(Yn,{href:"/marketing/campaigns/new",children:[Ot.jsx(Lr,{children:Ot.jsxs(zr,{className:"flex items-center gap-2",children:[Ot.jsx(Jr,{className:"h-5 w-5"}),"Email Campaign"]})}),Ot.jsx(Mn,{children:Ot.jsx("p",{className:"text-sm text-muted-foreground",children:"Create a new email campaign with AI assistance"})})]})}),Ot.jsx(Sn,{className:"hover:shadow-lg transition-shadow cursor-pointer",children:Ot.jsxs(Yn,{href:"/marketing/campaigns/sms",children:[Ot.jsx(Lr,{children:Ot.jsxs(zr,{className:"flex items-center gap-2",children:[Ot.jsx(Or,{className:"h-5 w-5"}),"SMS Campaign"]})}),Ot.jsx(Mn,{children:Ot.jsx("p",{className:"text-sm text-muted-foreground",children:"Send targeted SMS messages to customers"})})]})}),Ot.jsx(Sn,{className:"hover:shadow-lg transition-shadow cursor-pointer",children:Ot.jsxs(Yn,{href:"/marketing/campaigns/multi",children:[Ot.jsx(Lr,{children:Ot.jsxs(zr,{className:"flex items-center gap-2",children:[Ot.jsx(Qi,{className:"h-5 w-5"}),"Multi-Channel"]})}),Ot.jsx(Mn,{children:Ot.jsx("p",{className:"text-sm text-muted-foreground",children:"Coordinate campaigns across all channels"})})]})})]})]})}),Ot.jsx(Ys,{value:"segments",children:Ot.jsxs(Sn,{children:[Ot.jsx(Lr,{children:Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{children:[Ot.jsx(zr,{children:"Customer Segments"}),Ot.jsx(Ur,{children:"Create targeted customer groups for personalized marketing"})]}),Ot.jsxs(Ln,{children:[Ot.jsx(wr,{className:"h-4 w-4 mr-2"}),"New Segment"]})]})}),Ot.jsx(Mn,{children:Ot.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[{name:"High Value Customers",members:124,icon:ar,color:"text-green-600"},{name:"New Customers",members:89,icon:On,color:"text-blue-600"},{name:"Inactive Users",members:234,icon:xr,color:"text-yellow-600"},{name:"Email Engaged",members:567,icon:Jr,color:"text-purple-600"},{name:"Local Shoppers",members:345,icon:Us,color:"text-red-600"},{name:"Mobile Users",members:456,icon:Or,color:"text-pink-600"}].map((e,t)=>{const n=e.icon;return Ot.jsxs(Sn,{className:"hover:shadow-lg transition-shadow cursor-pointer",children:[Ot.jsxs(Lr,{children:[Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsx(n,{className:bn("h-5 w-5",e.color)}),Ot.jsxs(Tn,{variant:"secondary",children:[e.members," members"]})]}),Ot.jsx(zr,{className:"text-base mt-2",children:e.name})]}),Ot.jsxs(Mn,{children:[Ot.jsx(Vr,{value:100*Math.random(),className:"h-2"}),Ot.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Last updated 2 days ago"})]})]},t)})})})]})}),Ot.jsx(Ys,{value:"workflows",children:Ot.jsx("div",{className:"grid gap-6",children:Ot.jsxs(Sn,{children:[Ot.jsx(Lr,{children:Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{children:[Ot.jsx(zr,{children:"Marketing Workflows"}),Ot.jsx(Ur,{children:"Automated customer journeys and sequences"})]}),Ot.jsx(Yn,{href:"/marketing/workflows",children:Ot.jsxs(Ln,{children:[Ot.jsx(ri,{className:"h-4 w-4 mr-2"}),"Workflow Builder"]})})]})}),Ot.jsx(Mn,{children:Ot.jsx("div",{className:"space-y-4",children:[{name:"Welcome Series",status:"active",enrollments:234,steps:5,completion:72},{name:"Abandoned Cart Recovery",status:"active",enrollments:89,steps:3,completion:45},{name:"Re-engagement Campaign",status:"paused",enrollments:156,steps:4,completion:38},{name:"Post-Purchase Follow-up",status:"draft",enrollments:0,steps:6,completion:0}].map((e,t)=>Ot.jsxs("div",{className:"p-4 border rounded-lg",children:[Ot.jsxs("div",{className:"flex items-center justify-between mb-3",children:[Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsx(ri,{className:"h-5 w-5 text-purple-600"}),Ot.jsxs("div",{children:[Ot.jsx("p",{className:"font-medium",children:e.name}),Ot.jsxs("div",{className:"flex items-center gap-4 mt-1",children:[Ot.jsx(Tn,{variant:"active"===e.status?"default":"paused"===e.status?"secondary":"outline",children:e.status}),Ot.jsxs("span",{className:"text-xs text-muted-foreground",children:[e.enrollments," enrollments"]}),Ot.jsxs("span",{className:"text-xs text-muted-foreground",children:[e.steps," steps"]})]})]})]}),Ot.jsx(Ln,{variant:"outline",size:"sm",children:Ot.jsx(mr,{className:"h-4 w-4"})})]}),e.enrollments>0&&Ot.jsxs("div",{children:[Ot.jsxs("div",{className:"flex items-center justify-between text-sm mb-1",children:[Ot.jsx("span",{className:"text-muted-foreground",children:"Completion Rate"}),Ot.jsxs("span",{className:"font-medium",children:[e.completion,"%"]})]}),Ot.jsx(Vr,{value:e.completion,className:"h-2"})]})]},t))})})]})})}),Ot.jsx(Ys,{value:"ai-tools",children:Ot.jsxs("div",{className:"grid gap-6",children:[Ot.jsxs(Sn,{className:"border-2 border-purple-200 dark:border-purple-800",children:[Ot.jsx(Lr,{children:Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsx("div",{className:"p-2 rounded-lg bg-gradient-to-br from-purple-500 to-pink-500",children:Ot.jsx(ei,{className:"h-6 w-6 text-white"})}),Ot.jsxs("div",{children:[Ot.jsx(zr,{children:"AI Marketing Assistant"}),Ot.jsx(Ur,{children:"Powered by Claude 3.5 Sonnet and GPT-4 Turbo"})]})]})}),Ot.jsx(Mn,{children:Ot.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[Ot.jsxs(Sn,{className:"hover:shadow-lg transition-shadow cursor-pointer",children:[Ot.jsx(Lr,{children:Ot.jsxs(zr,{className:"text-base flex items-center gap-2",children:[Ot.jsx(ti,{className:"h-5 w-5 text-purple-600"}),"Campaign Optimizer"]})}),Ot.jsxs(Mn,{children:[Ot.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"AI analyzes and optimizes your campaigns for better performance"}),Ot.jsxs(Ln,{className:"w-full",variant:"outline",children:[Ot.jsx(An,{className:"h-4 w-4 mr-2"}),"Optimize Campaign"]})]})]}),Ot.jsxs(Sn,{className:"hover:shadow-lg transition-shadow cursor-pointer",children:[Ot.jsx(Lr,{children:Ot.jsxs(zr,{className:"text-base flex items-center gap-2",children:[Ot.jsx(Jr,{className:"h-5 w-5 text-blue-600"}),"Content Generator"]})}),Ot.jsxs(Mn,{children:[Ot.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Generate engaging email content with AI assistance"}),Ot.jsxs(Ln,{className:"w-full",variant:"outline",children:[Ot.jsx(Pn,{className:"h-4 w-4 mr-2"}),"Generate Content"]})]})]}),Ot.jsxs(Sn,{className:"hover:shadow-lg transition-shadow cursor-pointer",children:[Ot.jsx(Lr,{children:Ot.jsxs(zr,{className:"text-base flex items-center gap-2",children:[Ot.jsx(On,{className:"h-5 w-5 text-green-600"}),"Segment Analyzer"]})}),Ot.jsxs(Mn,{children:[Ot.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"AI discovers hidden patterns in your customer segments"}),Ot.jsxs(Ln,{className:"w-full",variant:"outline",children:[Ot.jsx(Us,{className:"h-4 w-4 mr-2"}),"Analyze Segments"]})]})]}),Ot.jsxs(Sn,{className:"hover:shadow-lg transition-shadow cursor-pointer",children:[Ot.jsx(Lr,{children:Ot.jsxs(zr,{className:"text-base flex items-center gap-2",children:[Ot.jsx(xr,{className:"h-5 w-5 text-orange-600"}),"Send Time Optimizer"]})}),Ot.jsxs(Mn,{children:[Ot.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Find the perfect time to send your campaigns"}),Ot.jsxs(Ln,{className:"w-full",variant:"outline",children:[Ot.jsx(Qn,{className:"h-4 w-4 mr-2"}),"Optimize Timing"]})]})]})]})})]}),Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{children:[Ot.jsx(zr,{children:"AI Performance Metrics"}),Ot.jsx(Ur,{children:"Impact of AI optimization on your marketing"})]}),Ot.jsx(Mn,{children:Ot.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[Ot.jsxs("div",{className:"text-center",children:[Ot.jsx("p",{className:"text-3xl font-bold text-green-600",children:"+28%"}),Ot.jsx("p",{className:"text-sm text-muted-foreground",children:"Avg Open Rate Improvement"})]}),Ot.jsxs("div",{className:"text-center",children:[Ot.jsx("p",{className:"text-3xl font-bold text-blue-600",children:"+45%"}),Ot.jsx("p",{className:"text-sm text-muted-foreground",children:"Click Rate Improvement"})]}),Ot.jsxs("div",{className:"text-center",children:[Ot.jsx("p",{className:"text-3xl font-bold text-purple-600",children:"3.2x"}),Ot.jsx("p",{className:"text-sm text-muted-foreground",children:"ROI Increase"})]})]})})]})]})})]})]})})}var ave=function(){return ave=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},ave.apply(this,arguments)};function ove(e,t,n){for(var r,s=0,i=t.length;s<i;s++)!r&&s in t||(r||(r=Array.prototype.slice.call(t,0,s)),r[s]=t[s]);return e.concat(r||Array.prototype.slice.call(t))}function lve(e){return"multiple"===e.mode}function cve(e){return"range"===e.mode}function dve(e){return"single"===e.mode}var uve={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};var hve=Object.freeze({__proto__:null,formatCaption:function(e,t){return Fo(e,"LLLL y",t)},formatDay:function(e,t){return Fo(e,"d",t)},formatMonthCaption:function(e,t){return Fo(e,"LLLL",t)},formatWeekNumber:function(e){return"".concat(e)},formatWeekdayName:function(e,t){return Fo(e,"cccccc",t)},formatYearCaption:function(e,t){return Fo(e,"yyyy",t)}}),pve=Object.freeze({__proto__:null,labelDay:function(e,t,n){return Fo(e,"do MMMM (EEEE)",n)},labelMonthDropdown:function(){return"Month: "},labelNext:function(){return"Go to next month"},labelPrevious:function(){return"Go to previous month"},labelWeekNumber:function(e){return"Week n. ".concat(e)},labelWeekday:function(e,t){return Fo(e,"cccc",t)},labelYearDropdown:function(){return"Year: "}});var mve=hn.createContext(void 0);function fve(e){var t,n,r=e.initialProps,s={captionLayout:"buttons",classNames:uve,formatters:hve,labels:pve,locale:$o,modifiersClassNames:{},modifiers:{},numberOfMonths:1,styles:{},today:new Date,mode:"default"},i=function(e){var t=e.fromYear,n=e.toYear,r=e.fromMonth,s=e.toMonth,i=e.fromDate,a=e.toDate;return r?i=Vo(r):t&&(i=new Date(t,0,1)),s?a=Ho(s):n&&(a=new Date(n,11,31)),{fromDate:i?Wo(i):void 0,toDate:a?Wo(a):void 0}}(r),a=i.fromDate,o=i.toDate,l=null!==(t=r.captionLayout)&&void 0!==t?t:s.captionLayout;"buttons"===l||a&&o||(l="buttons"),(dve(r)||lve(r)||cve(r))&&(n=r.onSelect);var c=ave(ave(ave({},s),r),{captionLayout:l,classNames:ave(ave({},s.classNames),r.classNames),components:ave({},r.components),formatters:ave(ave({},s.formatters),r.formatters),fromDate:a,labels:ave(ave({},s.labels),r.labels),mode:r.mode||s.mode,modifiers:ave(ave({},s.modifiers),r.modifiers),modifiersClassNames:ave(ave({},s.modifiersClassNames),r.modifiersClassNames),onSelect:n,styles:ave(ave({},s.styles),r.styles),toDate:o});return Ot.jsx(mve.Provider,{value:c,children:e.children})}function gve(){var e=hn.useContext(mve);if(!e)throw new Error("useDayPicker must be used within a DayPickerProvider.");return e}function xve(e){var t=gve(),n=t.locale,r=t.classNames,s=t.styles,i=t.formatters.formatCaption;return Ot.jsx("div",{className:r.caption_label,style:s.caption_label,"aria-live":"polite",role:"presentation",id:e.id,children:i(e.displayMonth,{locale:n})})}function vve(e){return Ot.jsx("svg",ave({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},e,{children:Ot.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function yve(e){var t,n,r=e.onChange,s=e.value,i=e.children,a=e.caption,o=e.className,l=e.style,c=gve(),d=null!==(n=null===(t=c.components)||void 0===t?void 0:t.IconDropdown)&&void 0!==n?n:vve;return Ot.jsxs("div",{className:o,style:l,children:[Ot.jsx("span",{className:c.classNames.vhidden,children:e["aria-label"]}),Ot.jsx("select",{name:e.name,"aria-label":e["aria-label"],className:c.classNames.dropdown,style:c.styles.dropdown,value:s,onChange:r,children:i}),Ot.jsxs("div",{className:c.classNames.caption_label,style:c.styles.caption_label,"aria-hidden":"true",children:[a,Ot.jsx(d,{className:c.classNames.dropdown_icon,style:c.styles.dropdown_icon})]})]})}function bve(e){var t,n=gve(),r=n.fromDate,s=n.toDate,i=n.styles,a=n.locale,o=n.formatters.formatMonthCaption,l=n.classNames,c=n.components,d=n.labels.labelMonthDropdown;if(!r)return Ot.jsx(Ot.Fragment,{});if(!s)return Ot.jsx(Ot.Fragment,{});var u=[];if(ol(r,s))for(var h=Vo(r),p=r.getMonth();p<=s.getMonth();p++)u.push(ll(h,p));else for(h=Vo(new Date),p=0;p<=11;p++)u.push(ll(h,p));var m=null!==(t=null==c?void 0:c.Dropdown)&&void 0!==t?t:yve;return Ot.jsx(m,{name:"months","aria-label":d(),className:l.dropdown_month,style:i.dropdown_month,onChange:function(t){var n=Number(t.target.value),r=ll(Vo(e.displayMonth),n);e.onChange(r)},value:e.displayMonth.getMonth(),caption:o(e.displayMonth,{locale:a}),children:u.map(function(e){return Ot.jsx("option",{value:e.getMonth(),children:o(e,{locale:a})},e.getMonth())})})}function wve(e){var t,n=e.displayMonth,r=gve(),s=r.fromDate,i=r.toDate,a=r.locale,o=r.styles,l=r.classNames,c=r.components,d=r.formatters.formatYearCaption,u=r.labels.labelYearDropdown,h=[];if(!s)return Ot.jsx(Ot.Fragment,{});if(!i)return Ot.jsx(Ot.Fragment,{});for(var p=s.getFullYear(),m=i.getFullYear(),f=p;f<=m;f++)h.push(cl(dl(new Date),f));var g=null!==(t=null==c?void 0:c.Dropdown)&&void 0!==t?t:yve;return Ot.jsx(g,{name:"years","aria-label":u(),className:l.dropdown_year,style:o.dropdown_year,onChange:function(t){var r=cl(Vo(n),Number(t.target.value));e.onChange(r)},value:n.getFullYear(),caption:d(n,{locale:a}),children:h.map(function(e){return Ot.jsx("option",{value:e.getFullYear(),children:d(e,{locale:a})},e.getFullYear())})})}function jve(){var e=gve(),t=function(e){var t=e.month,n=e.defaultMonth,r=e.today,s=t||n||r||new Date,i=e.toDate,a=e.fromDate,o=e.numberOfMonths,l=void 0===o?1:o;return i&&qo(i,s)<0&&(s=Go(i,-1*(l-1))),a&&qo(s,a)<0&&(s=a),Vo(s)}(e),n=function(e,t){var n=hn.useState(e),r=n[0];return[void 0===t?r:t,n[1]]}(t,e.month),r=n[0],s=n[1];return[r,function(t){var n;if(!e.disableNavigation){var r=Vo(t);s(r),null===(n=e.onMonthChange)||void 0===n||n.call(e,r)}}]}var Nve=hn.createContext(void 0);function _ve(e){var t=gve(),n=jve(),r=n[0],s=n[1],i=function(e,t){for(var n=t.reverseMonths,r=t.numberOfMonths,s=Vo(e),i=Vo(Go(s,r)),a=qo(i,s),o=[],l=0;l<a;l++){var c=Go(s,l);o.push(c)}return n&&(o=o.reverse()),o}(r,t),a=function(e,t){if(!t.disableNavigation){var n=t.toDate,r=t.pagedNavigation,s=t.numberOfMonths,i=void 0===s?1:s,a=r?i:1,o=Vo(e);if(!n)return Go(o,a);if(!(qo(n,e)<i))return Go(o,a)}}(r,t),o=function(e,t){if(!t.disableNavigation){var n=t.fromDate,r=t.pagedNavigation,s=t.numberOfMonths,i=r?void 0===s?1:s:1,a=Vo(e);if(!n)return Go(a,-i);if(!(qo(a,n)<=0))return Go(a,-i)}}(r,t),l=function(e){return i.some(function(t){return Xo(e,t)})},c={currentMonth:r,displayMonths:i,goToMonth:s,goToDate:function(e,n){l(e)||(n&&Ko(e,n)?s(Go(e,1+-1*t.numberOfMonths)):s(e))},previousMonth:o,nextMonth:a,isDateDisplayed:l};return Ot.jsx(Nve.Provider,{value:c,children:e.children})}function Sve(){var e=hn.useContext(Nve);if(!e)throw new Error("useNavigation must be used within a NavigationProvider");return e}function Mve(e){var t,n=gve(),r=n.classNames,s=n.styles,i=n.components,a=Sve().goToMonth,o=function(t){a(Go(t,e.displayIndex?-e.displayIndex:0))},l=null!==(t=null==i?void 0:i.CaptionLabel)&&void 0!==t?t:xve,c=Ot.jsx(l,{id:e.id,displayMonth:e.displayMonth});return Ot.jsxs("div",{className:r.caption_dropdowns,style:s.caption_dropdowns,children:[Ot.jsx("div",{className:r.vhidden,children:c}),Ot.jsx(bve,{onChange:o,displayMonth:e.displayMonth}),Ot.jsx(wve,{onChange:o,displayMonth:e.displayMonth})]})}function Cve(e){return Ot.jsx("svg",ave({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:Ot.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function Eve(e){return Ot.jsx("svg",ave({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:Ot.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var kve=hn.forwardRef(function(e,t){var n=gve(),r=n.classNames,s=n.styles,i=[r.button_reset,r.button];e.className&&i.push(e.className);var a=i.join(" "),o=ave(ave({},s.button_reset),s.button);return e.style&&Object.assign(o,e.style),Ot.jsx("button",ave({},e,{ref:t,type:"button",className:a,style:o}))});function Ave(e){var t,n,r=gve(),s=r.dir,i=r.locale,a=r.classNames,o=r.styles,l=r.labels,c=l.labelPrevious,d=l.labelNext,u=r.components;if(!e.nextMonth&&!e.previousMonth)return Ot.jsx(Ot.Fragment,{});var h=c(e.previousMonth,{locale:i}),p=[a.nav_button,a.nav_button_previous].join(" "),m=d(e.nextMonth,{locale:i}),f=[a.nav_button,a.nav_button_next].join(" "),g=null!==(t=null==u?void 0:u.IconRight)&&void 0!==t?t:Eve,x=null!==(n=null==u?void 0:u.IconLeft)&&void 0!==n?n:Cve;return Ot.jsxs("div",{className:a.nav,style:o.nav,children:[!e.hidePrevious&&Ot.jsx(kve,{name:"previous-month","aria-label":h,className:p,style:o.nav_button_previous,disabled:!e.previousMonth,onClick:e.onPreviousClick,children:"rtl"===s?Ot.jsx(g,{className:a.nav_icon,style:o.nav_icon}):Ot.jsx(x,{className:a.nav_icon,style:o.nav_icon})}),!e.hideNext&&Ot.jsx(kve,{name:"next-month","aria-label":m,className:f,style:o.nav_button_next,disabled:!e.nextMonth,onClick:e.onNextClick,children:"rtl"===s?Ot.jsx(x,{className:a.nav_icon,style:o.nav_icon}):Ot.jsx(g,{className:a.nav_icon,style:o.nav_icon})})]})}function Tve(e){var t=gve().numberOfMonths,n=Sve(),r=n.previousMonth,s=n.nextMonth,i=n.goToMonth,a=n.displayMonths,o=a.findIndex(function(t){return Xo(e.displayMonth,t)}),l=0===o,c=o===a.length-1,d=t>1&&(l||!c),u=t>1&&(c||!l);return Ot.jsx(Ave,{displayMonth:e.displayMonth,hideNext:d,hidePrevious:u,nextMonth:s,previousMonth:r,onPreviousClick:function(){r&&i(r)},onNextClick:function(){s&&i(s)}})}function Pve(e){var t,n,r=gve(),s=r.classNames,i=r.disableNavigation,a=r.styles,o=r.captionLayout,l=r.components,c=null!==(t=null==l?void 0:l.CaptionLabel)&&void 0!==t?t:xve;return n=i?Ot.jsx(c,{id:e.id,displayMonth:e.displayMonth}):"dropdown"===o?Ot.jsx(Mve,{displayMonth:e.displayMonth,id:e.id}):"dropdown-buttons"===o?Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(Mve,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id}),Ot.jsx(Tve,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id})]}):Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(c,{id:e.id,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),Ot.jsx(Tve,{displayMonth:e.displayMonth,id:e.id})]}),Ot.jsx("div",{className:s.caption,style:a.caption,children:n})}function Ove(e){var t=gve(),n=t.footer,r=t.styles,s=t.classNames.tfoot;return n?Ot.jsx("tfoot",{className:s,style:r.tfoot,children:Ot.jsx("tr",{children:Ot.jsx("td",{colSpan:8,children:n})})}):Ot.jsx(Ot.Fragment,{})}function Rve(){var e=gve(),t=e.classNames,n=e.styles,r=e.showWeekNumber,s=e.locale,i=e.weekStartsOn,a=e.ISOWeek,o=e.formatters.formatWeekdayName,l=e.labels.labelWeekday,c=function(e,t,n){for(var r=n?pl(new Date):ml(new Date,{locale:e,weekStartsOn:t}),s=[],i=0;i<7;i++){var a=Zo(r,i);s.push(a)}return s}(s,i,a);return Ot.jsxs("tr",{style:n.head_row,className:t.head_row,children:[r&&Ot.jsx("td",{style:n.head_cell,className:t.head_cell}),c.map(function(e,r){return Ot.jsx("th",{scope:"col",className:t.head_cell,style:n.head_cell,"aria-label":l(e,{locale:s}),children:o(e,{locale:s})},r)})]})}function Ive(){var e,t=gve(),n=t.classNames,r=t.styles,s=t.components,i=null!==(e=null==s?void 0:s.HeadRow)&&void 0!==e?e:Rve;return Ot.jsx("thead",{style:r.head,className:n.head,children:Ot.jsx(i,{})})}function Dve(e){var t=gve(),n=t.locale,r=t.formatters.formatDay;return Ot.jsx(Ot.Fragment,{children:r(e.date,{locale:n})})}var Lve=hn.createContext(void 0);function Fve(e){if(!lve(e.initialProps)){return Ot.jsx(Lve.Provider,{value:{selected:void 0,modifiers:{disabled:[]}},children:e.children})}return Ot.jsx(zve,{initialProps:e.initialProps,children:e.children})}function zve(e){var t=e.initialProps,n=e.children,r=t.selected,s=t.min,i=t.max,a={disabled:[]};r&&a.disabled.push(function(e){var t=i&&r.length>i-1,n=r.some(function(t){return Yo(t,e)});return Boolean(t&&!n)});var o={selected:r,onDayClick:function(e,n,a){var o,l;if((null===(o=t.onDayClick)||void 0===o||o.call(t,e,n,a),!Boolean(n.selected&&s&&(null==r?void 0:r.length)===s))&&!Boolean(!n.selected&&i&&(null==r?void 0:r.length)===i)){var c=r?ove([],r):[];if(n.selected){var d=c.findIndex(function(t){return Yo(e,t)});c.splice(d,1)}else c.push(e);null===(l=t.onSelect)||void 0===l||l.call(t,c,e,n,a)}},modifiers:a};return Ot.jsx(Lve.Provider,{value:o,children:n})}function Bve(){var e=hn.useContext(Lve);if(!e)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return e}var Uve,Vve,Hve=hn.createContext(void 0);function Wve(e){if(!cve(e.initialProps)){return Ot.jsx(Hve.Provider,{value:{selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}},children:e.children})}return Ot.jsx($ve,{initialProps:e.initialProps,children:e.children})}function $ve(e){var t=e.initialProps,n=e.children,r=t.selected,s=r||{},i=s.from,a=s.to,o=t.min,l=t.max,c={range_start:[],range_end:[],range_middle:[],disabled:[]};if(i?(c.range_start=[i],a?(c.range_end=[a],Yo(i,a)||(c.range_middle=[{after:i,before:a}])):c.range_end=[i]):a&&(c.range_start=[a],c.range_end=[a]),o&&(i&&!a&&c.disabled.push({after:Jo(i,o-1),before:Zo(i,o-1)}),i&&a&&c.disabled.push({after:i,before:Zo(i,o-1)}),!i&&a&&c.disabled.push({after:Jo(a,o-1),before:Zo(a,o-1)})),l){if(i&&!a&&(c.disabled.push({before:Zo(i,1-l)}),c.disabled.push({after:Zo(i,l-1)})),i&&a){var d=l-(Qo(a,i)+1);c.disabled.push({before:Jo(i,d)}),c.disabled.push({after:Zo(a,d)})}!i&&a&&(c.disabled.push({before:Zo(a,1-l)}),c.disabled.push({after:Zo(a,l-1)}))}return Ot.jsx(Hve.Provider,{value:{selected:r,onDayClick:function(e,n,s){var i,a;null===(i=t.onDayClick)||void 0===i||i.call(t,e,n,s);var o=function(e,t){var n=t||{},r=n.from,s=n.to;if(r&&s){if(Yo(s,e)&&Yo(r,e))return;if(Yo(s,e))return{from:s,to:void 0};if(Yo(r,e))return;return rl(r,e)?{from:e,to:s}:{from:r,to:e}}return s?rl(e,s)?{from:s,to:e}:{from:e,to:s}:r?Ko(e,r)?{from:e,to:r}:{from:r,to:e}:{from:e,to:void 0}}(e,r);null===(a=t.onSelect)||void 0===a||a.call(t,o,e,n,s)},modifiers:c},children:n})}function Gve(){var e=hn.useContext(Hve);if(!e)throw new Error("useSelectRange must be used within a SelectRangeProvider");return e}function qve(e){return Array.isArray(e)?ove([],e):void 0!==e?[e]:[]}(Vve=Uve||(Uve={})).Outside="outside",Vve.Disabled="disabled",Vve.Selected="selected",Vve.Hidden="hidden",Vve.Today="today",Vve.RangeStart="range_start",Vve.RangeEnd="range_end",Vve.RangeMiddle="range_middle";var Xve=Uve.Selected,Kve=Uve.Disabled,Yve=Uve.Hidden,Zve=Uve.Today,Jve=Uve.RangeEnd,Qve=Uve.RangeMiddle,eye=Uve.RangeStart,tye=Uve.Outside;var nye=hn.createContext(void 0);function rye(e){var t=gve(),n=function(e,t,n){var r,s=((r={})[Xve]=qve(e.selected),r[Kve]=qve(e.disabled),r[Yve]=qve(e.hidden),r[Zve]=[e.today],r[Jve]=[],r[Qve]=[],r[eye]=[],r[tye]=[],r);return e.fromDate&&s[Kve].push({before:e.fromDate}),e.toDate&&s[Kve].push({after:e.toDate}),lve(e)?s[Kve]=s[Kve].concat(t.modifiers[Kve]):cve(e)&&(s[Kve]=s[Kve].concat(n.modifiers[Kve]),s[eye]=n.modifiers[eye],s[Qve]=n.modifiers[Qve],s[Jve]=n.modifiers[Jve]),s}(t,Bve(),Gve()),r=function(e){var t={};return Object.entries(e).forEach(function(e){var n=e[0],r=e[1];t[n]=qve(r)}),t}(t.modifiers),s=ave(ave({},n),r);return Ot.jsx(nye.Provider,{value:s,children:e.children})}function sye(){var e=hn.useContext(nye);if(!e)throw new Error("useModifiers must be used within a ModifiersProvider");return e}function iye(e,t){return t.some(function(t){if("boolean"==typeof t)return t;if(xl(t))return Yo(e,t);var n,r,s,i,a;if(function(e){return Array.isArray(e)&&e.every(xl)}(t))return t.includes(e);if(function(e){return Boolean(e&&"object"==typeof e&&"from"in e)}(t))return n=e,i=(r=t).from,a=r.to,i&&a?(Qo(a,i)<0&&(i=(s=[a,i])[0],a=s[1]),Qo(n,i)>=0&&Qo(a,n)>=0):a?Yo(a,n):!!i&&Yo(i,n);if(function(e){return Boolean(e&&"object"==typeof e&&"dayOfWeek"in e)}(t))return t.dayOfWeek.includes(e.getDay());if(function(e){return Boolean(e&&"object"==typeof e&&"before"in e&&"after"in e)}(t)){var o=Qo(t.before,e)>0,l=Qo(t.after,e)<0;return rl(t.before,t.after)?l&&o:o||l}return function(e){return Boolean(e&&"object"==typeof e&&"after"in e)}(t)?Qo(e,t.after)>0:function(e){return Boolean(e&&"object"==typeof e&&"before"in e)}(t)?Qo(t.before,e)>0:"function"==typeof t&&t(e)})}function aye(e,t,n){var r=Object.keys(t).reduce(function(n,r){var s=t[r];return iye(e,s)&&n.push(r),n},[]),s={};return r.forEach(function(e){return s[e]=!0}),n&&!Xo(e,n)&&(s.outside=!0),s}function oye(e,t){var n=t.moveBy,r=t.direction,s=t.context,i=t.modifiers,a=t.retry,o=void 0===a?{count:0,lastFocused:e}:a,l=s.weekStartsOn,c=s.fromDate,d=s.toDate,u=s.locale,h={day:Zo,week:tl,month:Go,year:sl,startOfWeek:function(e){return s.ISOWeek?pl(e):ml(e,{locale:u,weekStartsOn:l})},endOfWeek:function(e){return s.ISOWeek?ul(e):hl(e,{locale:u,weekStartsOn:l})}}[n](e,"after"===r?1:-1);"before"===r&&c?h=il([c,h]):"after"===r&&d&&(h=al([d,h]));var p=!0;if(i){var m=aye(h,i);p=!m.disabled&&!m.hidden}return p?h:o.count>365?o.lastFocused:oye(h,{moveBy:n,direction:r,context:s,modifiers:i,retry:ave(ave({},o),{count:o.count+1})})}var lye=hn.createContext(void 0);function cye(e){var t=Sve(),n=sye(),r=hn.useState(),s=r[0],i=r[1],a=hn.useState(),o=a[0],l=a[1],c=function(e,t){for(var n,r,s=Vo(e[0]),i=Ho(e[e.length-1]),a=s;a<=i;){var o=aye(a,t);if(o.disabled||o.hidden)a=Zo(a,1);else{if(o.selected)return a;o.today&&!r&&(r=a),n||(n=a),a=Zo(a,1)}}return r||n}(t.displayMonths,n),d=(null!=s?s:o&&t.isDateDisplayed(o))?o:c,u=function(e){i(e)},h=gve(),p=function(e,r){if(s){var i=oye(s,{moveBy:e,direction:r,context:h,modifiers:n});Yo(s,i)||(t.goToDate(i,s),u(i))}},m={focusedDay:s,focusTarget:d,blur:function(){l(s),i(void 0)},focus:u,focusDayAfter:function(){return p("day","after")},focusDayBefore:function(){return p("day","before")},focusWeekAfter:function(){return p("week","after")},focusWeekBefore:function(){return p("week","before")},focusMonthBefore:function(){return p("month","before")},focusMonthAfter:function(){return p("month","after")},focusYearBefore:function(){return p("year","before")},focusYearAfter:function(){return p("year","after")},focusStartOfWeek:function(){return p("startOfWeek","before")},focusEndOfWeek:function(){return p("endOfWeek","after")}};return Ot.jsx(lye.Provider,{value:m,children:e.children})}function dye(){var e=hn.useContext(lye);if(!e)throw new Error("useFocusContext must be used within a FocusProvider");return e}var uye=hn.createContext(void 0);function hye(e){if(!dve(e.initialProps)){return Ot.jsx(uye.Provider,{value:{selected:void 0},children:e.children})}return Ot.jsx(pye,{initialProps:e.initialProps,children:e.children})}function pye(e){var t=e.initialProps,n=e.children,r={selected:t.selected,onDayClick:function(e,n,r){var s,i,a;null===(s=t.onDayClick)||void 0===s||s.call(t,e,n,r),!n.selected||t.required?null===(a=t.onSelect)||void 0===a||a.call(t,e,e,n,r):null===(i=t.onSelect)||void 0===i||i.call(t,void 0,e,n,r)}};return Ot.jsx(uye.Provider,{value:r,children:n})}function mye(){var e=hn.useContext(uye);if(!e)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return e}function fye(e,t){var n=[e.classNames.day];return Object.keys(t).forEach(function(t){var r=e.modifiersClassNames[t];if(r)n.push(r);else if(function(e){return Object.values(Uve).includes(e)}(t)){var s=e.classNames["day_".concat(t)];s&&n.push(s)}}),n}function gye(e,t,n){var r,s,i,a=gve(),o=dye(),l=function(e,t){return aye(e,sye(),t)}(e,t),c=function(e,t){var n=gve(),r=mye(),s=Bve(),i=Gve(),a=dye(),o=a.focusDayAfter,l=a.focusDayBefore,c=a.focusWeekAfter,d=a.focusWeekBefore,u=a.blur,h=a.focus,p=a.focusMonthBefore,m=a.focusMonthAfter,f=a.focusYearBefore,g=a.focusYearAfter,x=a.focusStartOfWeek,v=a.focusEndOfWeek;return{onClick:function(a){var o,l,c,d;dve(n)?null===(o=r.onDayClick)||void 0===o||o.call(r,e,t,a):lve(n)?null===(l=s.onDayClick)||void 0===l||l.call(s,e,t,a):cve(n)?null===(c=i.onDayClick)||void 0===c||c.call(i,e,t,a):null===(d=n.onDayClick)||void 0===d||d.call(n,e,t,a)},onFocus:function(r){var s;h(e),null===(s=n.onDayFocus)||void 0===s||s.call(n,e,t,r)},onBlur:function(r){var s;u(),null===(s=n.onDayBlur)||void 0===s||s.call(n,e,t,r)},onKeyDown:function(r){var s;switch(r.key){case"ArrowLeft":r.preventDefault(),r.stopPropagation(),"rtl"===n.dir?o():l();break;case"ArrowRight":r.preventDefault(),r.stopPropagation(),"rtl"===n.dir?l():o();break;case"ArrowDown":r.preventDefault(),r.stopPropagation(),c();break;case"ArrowUp":r.preventDefault(),r.stopPropagation(),d();break;case"PageUp":r.preventDefault(),r.stopPropagation(),r.shiftKey?f():p();break;case"PageDown":r.preventDefault(),r.stopPropagation(),r.shiftKey?g():m();break;case"Home":r.preventDefault(),r.stopPropagation(),x();break;case"End":r.preventDefault(),r.stopPropagation(),v()}null===(s=n.onDayKeyDown)||void 0===s||s.call(n,e,t,r)},onKeyUp:function(r){var s;null===(s=n.onDayKeyUp)||void 0===s||s.call(n,e,t,r)},onMouseEnter:function(r){var s;null===(s=n.onDayMouseEnter)||void 0===s||s.call(n,e,t,r)},onMouseLeave:function(r){var s;null===(s=n.onDayMouseLeave)||void 0===s||s.call(n,e,t,r)},onPointerEnter:function(r){var s;null===(s=n.onDayPointerEnter)||void 0===s||s.call(n,e,t,r)},onPointerLeave:function(r){var s;null===(s=n.onDayPointerLeave)||void 0===s||s.call(n,e,t,r)},onTouchCancel:function(r){var s;null===(s=n.onDayTouchCancel)||void 0===s||s.call(n,e,t,r)},onTouchEnd:function(r){var s;null===(s=n.onDayTouchEnd)||void 0===s||s.call(n,e,t,r)},onTouchMove:function(r){var s;null===(s=n.onDayTouchMove)||void 0===s||s.call(n,e,t,r)},onTouchStart:function(r){var s;null===(s=n.onDayTouchStart)||void 0===s||s.call(n,e,t,r)}}}(e,l),d=function(){var e=gve(),t=mye(),n=Bve(),r=Gve();return dve(e)?t.selected:lve(e)?n.selected:cve(e)?r.selected:void 0}(),u=Boolean(a.onDayClick||"default"!==a.mode);hn.useEffect(function(){var t;l.outside||o.focusedDay&&u&&Yo(o.focusedDay,e)&&(null===(t=n.current)||void 0===t||t.focus())},[o.focusedDay,e,n,u,l.outside]);var h=fye(a,l).join(" "),p=function(e,t){var n=ave({},e.styles.day);return Object.keys(t).forEach(function(t){var r;n=ave(ave({},n),null===(r=e.modifiersStyles)||void 0===r?void 0:r[t])}),n}(a,l),m=Boolean(l.outside&&!a.showOutsideDays||l.hidden),f=null!==(i=null===(s=a.components)||void 0===s?void 0:s.DayContent)&&void 0!==i?i:Dve,g={style:p,className:h,children:Ot.jsx(f,{date:e,displayMonth:t,activeModifiers:l}),role:"gridcell"},x=o.focusTarget&&Yo(o.focusTarget,e)&&!l.outside,v=o.focusedDay&&Yo(o.focusedDay,e),y=ave(ave(ave({},g),((r={disabled:l.disabled,role:"gridcell"})["aria-selected"]=l.selected,r.tabIndex=v||x?0:-1,r)),c);return{isButton:u,isHidden:m,activeModifiers:l,selectedDays:d,buttonProps:y,divProps:g}}function xye(e){var t=hn.useRef(null),n=gye(e.date,e.displayMonth,t);return n.isHidden?Ot.jsx("div",{role:"gridcell"}):n.isButton?Ot.jsx(kve,ave({name:"day",ref:t},n.buttonProps)):Ot.jsx("div",ave({},n.divProps))}function vye(e){var t=e.number,n=e.dates,r=gve(),s=r.onWeekNumberClick,i=r.styles,a=r.classNames,o=r.locale,l=r.labels.labelWeekNumber,c=(0,r.formatters.formatWeekNumber)(Number(t),{locale:o});if(!s)return Ot.jsx("span",{className:a.weeknumber,style:i.weeknumber,children:c});var d=l(Number(t),{locale:o});return Ot.jsx(kve,{name:"week-number","aria-label":d,className:a.weeknumber,style:i.weeknumber,onClick:function(e){s(t,n,e)},children:c})}function yye(e){var t,n,r,s=gve(),i=s.styles,a=s.classNames,o=s.showWeekNumber,l=s.components,c=null!==(t=null==l?void 0:l.Day)&&void 0!==t?t:xye,d=null!==(n=null==l?void 0:l.WeekNumber)&&void 0!==n?n:vye;return o&&(r=Ot.jsx("td",{className:a.cell,style:i.cell,children:Ot.jsx(d,{number:e.weekNumber,dates:e.dates})})),Ot.jsxs("tr",{className:a.row,style:i.row,children:[r,e.dates.map(function(t){return Ot.jsx("td",{className:a.cell,style:i.cell,role:"presentation",children:Ot.jsx(c,{displayMonth:e.displayMonth,date:t})},nl(t))})]})}function bye(e,t,n){for(var r=(null==n?void 0:n.ISOWeek)?ul(t):hl(t,n),s=(null==n?void 0:n.ISOWeek)?pl(e):ml(e,n),i=Qo(r,s),a=[],o=0;o<=i;o++)a.push(Zo(s,o));return a.reduce(function(e,t){var r=(null==n?void 0:n.ISOWeek)?fl(t):gl(t,n),s=e.find(function(e){return e.weekNumber===r});return s?(s.dates.push(t),e):(e.push({weekNumber:r,dates:[t]}),e)},[])}function wye(e){var t,n,r,s=gve(),i=s.locale,a=s.classNames,o=s.styles,l=s.hideHead,c=s.fixedWeeks,d=s.components,u=s.weekStartsOn,h=s.firstWeekContainsDate,p=s.ISOWeek,m=function(e,t){var n=bye(Vo(e),Ho(e),t);if(null==t?void 0:t.useFixedWeeks){var r=el(e,t);if(r<6){var s=n[n.length-1],i=s.dates[s.dates.length-1],a=tl(i,6-r),o=bye(tl(i,1),a,t);n.push.apply(n,o)}}return n}(e.displayMonth,{useFixedWeeks:Boolean(c),ISOWeek:p,locale:i,weekStartsOn:u,firstWeekContainsDate:h}),f=null!==(t=null==d?void 0:d.Head)&&void 0!==t?t:Ive,g=null!==(n=null==d?void 0:d.Row)&&void 0!==n?n:yye,x=null!==(r=null==d?void 0:d.Footer)&&void 0!==r?r:Ove;return Ot.jsxs("table",{id:e.id,className:a.table,style:o.table,role:"grid","aria-labelledby":e["aria-labelledby"],children:[!l&&Ot.jsx(f,{}),Ot.jsx("tbody",{className:a.tbody,style:o.tbody,children:m.map(function(t){return Ot.jsx(g,{displayMonth:e.displayMonth,dates:t.dates,weekNumber:t.weekNumber},t.weekNumber)})}),Ot.jsx(x,{displayMonth:e.displayMonth})]})}var jye="undefined"!=typeof window&&window.document&&window.document.createElement?hn.useLayoutEffect:hn.useEffect,Nye=!1,_ye=0;function Sye(){return"react-day-picker-".concat(++_ye)}function Mye(e){var t,n,r=gve(),s=r.dir,i=r.classNames,a=r.styles,o=r.components,l=Sve().displayMonths,c=function(e){var t,n=null!=e?e:Nye?Sye():null,r=hn.useState(n),s=r[0],i=r[1];return jye(function(){null===s&&i(Sye())},[]),hn.useEffect(function(){!1===Nye&&(Nye=!0)},[]),null!==(t=null!=e?e:s)&&void 0!==t?t:void 0}(r.id?"".concat(r.id,"-").concat(e.displayIndex):void 0),d=r.id?"".concat(r.id,"-grid-").concat(e.displayIndex):void 0,u=[i.month],h=a.month,p=0===e.displayIndex,m=e.displayIndex===l.length-1,f=!p&&!m;"rtl"===s&&(m=(t=[p,m])[0],p=t[1]),p&&(u.push(i.caption_start),h=ave(ave({},h),a.caption_start)),m&&(u.push(i.caption_end),h=ave(ave({},h),a.caption_end)),f&&(u.push(i.caption_between),h=ave(ave({},h),a.caption_between));var g=null!==(n=null==o?void 0:o.Caption)&&void 0!==n?n:Pve;return Ot.jsxs("div",{className:u.join(" "),style:h,children:[Ot.jsx(g,{id:c,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),Ot.jsx(wye,{id:d,"aria-labelledby":c,displayMonth:e.displayMonth})]},e.displayIndex)}function Cye(e){var t=gve(),n=t.classNames,r=t.styles;return Ot.jsx("div",{className:n.months,style:r.months,children:e.children})}function Eye(e){var t,n,r=e.initialProps,s=gve(),i=dye(),a=Sve(),o=hn.useState(!1),l=o[0],c=o[1];hn.useEffect(function(){s.initialFocus&&i.focusTarget&&(l||(i.focus(i.focusTarget),c(!0)))},[s.initialFocus,l,i.focus,i.focusTarget,i]);var d=[s.classNames.root,s.className];s.numberOfMonths>1&&d.push(s.classNames.multiple_months),s.showWeekNumber&&d.push(s.classNames.with_weeknumber);var u=ave(ave({},s.styles.root),s.style),h=Object.keys(r).filter(function(e){return e.startsWith("data-")}).reduce(function(e,t){var n;return ave(ave({},e),((n={})[t]=r[t],n))},{}),p=null!==(n=null===(t=r.components)||void 0===t?void 0:t.Months)&&void 0!==n?n:Cye;return Ot.jsx("div",ave({className:d.join(" "),style:u,dir:s.dir,id:s.id,nonce:r.nonce,title:r.title,lang:r.lang},h,{children:Ot.jsx(p,{children:a.displayMonths.map(function(e,t){return Ot.jsx(Mye,{displayIndex:t,displayMonth:e},t)})})}))}function kye(e){var t=e.children,n=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n}(e,["children"]);return Ot.jsx(fve,{initialProps:n,children:Ot.jsx(_ve,{children:Ot.jsx(hye,{initialProps:n,children:Ot.jsx(Fve,{initialProps:n,children:Ot.jsx(Wve,{initialProps:n,children:Ot.jsx(rye,{children:Ot.jsx(cye,{children:t})})})})})})})}function Aye(e){return Ot.jsx(kye,ave({},e,{children:Ot.jsx(Eye,{initialProps:e})}))}function Tye({className:e,classNames:t,showOutsideDays:n=!0,...r}){return Ot.jsx(Aye,{showOutsideDays:n,className:bn("p-3",e),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:bn(hs({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:bn(hs({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:({className:e,...t})=>Ot.jsx(Gs,{className:bn("h-4 w-4",e),...t}),IconRight:({className:e,...t})=>Ot.jsx(Ps,{className:bn("h-4 w-4",e),...t})},...r})}function Pye(e){const t=Oye(e),n=hn.forwardRef((e,n)=>{const{children:r,...s}=e,i=hn.Children.toArray(r),a=i.find(Iye);if(a){const e=a.props.children,r=i.map(t=>t===a?hn.Children.count(e)>1?hn.Children.only(null):hn.isValidElement(e)?e.props.children:null:t);return Ot.jsx(t,{...s,ref:n,children:hn.isValidElement(e)?hn.cloneElement(e,void 0,r):null})}return Ot.jsx(t,{...s,ref:n,children:r})});return n.displayName=`${e}.Slot`,n}function Oye(e){const t=hn.forwardRef((e,t)=>{const{children:n,...r}=e;if(hn.isValidElement(n)){const e=function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;if(n)return e.ref;if(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n)return e.props.ref;return e.props.ref||e.ref}(n),s=function(e,t){const n={...t};for(const r in t){const s=e[r],i=t[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...e)=>{i(...e),s(...e)}:s&&(n[r]=s):"style"===r?n[r]={...s,...i}:"className"===r&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...e,...n}}(r,n.props);return n.type!==hn.Fragment&&(s.ref=t?rn(t,e):e),hn.cloneElement(n,s)}return hn.Children.count(n)>1?hn.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}Tye.displayName="Calendar";var Rye=Symbol("radix.slottable");function Iye(e){return hn.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===Rye}var Dye="Popover",[Lye]=At(Dye,[_s]),Fye=_s(),[zye,Bye]=Lye(Dye),Uye=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:a=!1}=e,o=Fye(t),l=hn.useRef(null),[c,d]=hn.useState(!1),[u=!1,h]=Dt({prop:r,defaultProp:s,onChange:i});return Ot.jsx(As,{...o,children:Ot.jsx(zye,{scope:t,contentId:dn(),triggerRef:l,open:u,onOpenChange:h,onOpenToggle:hn.useCallback(()=>h(e=>!e),[h]),hasCustomAnchor:c,onCustomAnchorAdd:hn.useCallback(()=>d(!0),[]),onCustomAnchorRemove:hn.useCallback(()=>d(!1),[]),modal:a,children:n})})};Uye.displayName=Dye;var Vye="PopoverAnchor";hn.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=Bye(Vye,n),i=Fye(n),{onCustomAnchorAdd:a,onCustomAnchorRemove:o}=s;return hn.useEffect(()=>(a(),()=>o()),[a,o]),Ot.jsx(Ms,{...i,...r,ref:t})}).displayName=Vye;var Hye="PopoverTrigger",Wye=hn.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=Bye(Hye,n),i=Fye(n),a=Pt(t,s.triggerRef),o=Ot.jsx(It.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":nbe(s.open),...r,ref:a,onClick:Ft(e.onClick,s.onOpenToggle)});return s.hasCustomAnchor?o:Ot.jsx(Ms,{asChild:!0,...i,children:o})});Wye.displayName=Hye;var $ye="PopoverPortal",[Gye,qye]=Lye($ye,{forceMount:void 0}),Xye=e=>{const{__scopePopover:t,forceMount:n,children:r,container:s}=e,i=Bye($ye,t);return Ot.jsx(Gye,{scope:t,forceMount:n,children:Ot.jsx(Lt,{present:n||i.open,children:Ot.jsx(Ut,{asChild:!0,container:s,children:r})})})};Xye.displayName=$ye;var Kye="PopoverContent",Yye=hn.forwardRef((e,t)=>{const n=qye(Kye,e.__scopePopover),{forceMount:r=n.forceMount,...s}=e,i=Bye(Kye,e.__scopePopover);return Ot.jsx(Lt,{present:r||i.open,children:i.modal?Ot.jsx(Jye,{...s,ref:t}):Ot.jsx(Qye,{...s,ref:t})})});Yye.displayName=Kye;var Zye=Pye("PopoverContent.RemoveScroll"),Jye=hn.forwardRef((e,t)=>{const n=Bye(Kye,e.__scopePopover),r=hn.useRef(null),s=Pt(t,r),i=hn.useRef(!1);return hn.useEffect(()=>{const e=r.current;if(e)return cn(e)},[]),Ot.jsx(an,{as:Zye,allowPinchZoom:!0,children:Ot.jsx(ebe,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ft(e.onCloseAutoFocus,e=>{e.preventDefault(),i.current||n.triggerRef.current?.focus()}),onPointerDownOutside:Ft(e.onPointerDownOutside,e=>{const t=e.detail.originalEvent,n=0===t.button&&!0===t.ctrlKey,r=2===t.button||n;i.current=r},{checkForDefaultPrevented:!1}),onFocusOutside:Ft(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1})})})}),Qye=hn.forwardRef((e,t)=>{const n=Bye(Kye,e.__scopePopover),r=hn.useRef(!1),s=hn.useRef(!1);return Ot.jsx(ebe,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),t.defaultPrevented||(r.current||n.triggerRef.current?.focus(),t.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||(r.current=!0,"pointerdown"===t.detail.originalEvent.type&&(s.current=!0));const i=t.target,a=n.triggerRef.current?.contains(i);a&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&s.current&&t.preventDefault()}})}),ebe=hn.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,disableOutsidePointerEvents:a,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:d,...u}=e,h=Bye(Kye,n),p=Fye(n);return sn(),Ot.jsx(on,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:Ot.jsx(ln,{asChild:!0,disableOutsidePointerEvents:a,onInteractOutside:d,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:c,onDismiss:()=>h.onOpenChange(!1),children:Ot.jsx(ks,{"data-state":nbe(h.open),role:"dialog",id:h.contentId,...p,...u,ref:t,style:{...u.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),tbe="PopoverClose";hn.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=Bye(tbe,n);return Ot.jsx(It.button,{type:"button",...r,ref:t,onClick:Ft(e.onClick,()=>s.onOpenChange(!1))})}).displayName=tbe;function nbe(e){return e?"open":"closed"}hn.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=Fye(n);return Ot.jsx(Ts,{...s,...r,ref:t})}).displayName="PopoverArrow";var rbe=Xye,sbe=Yye;const ibe=Uye,abe=Wye,obe=hn.forwardRef(({className:e,align:t="center",sideOffset:n=4,...r},s)=>Ot.jsx(rbe,{children:Ot.jsx(sbe,{ref:s,align:t,sideOffset:n,className:bn("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",e),...r})}));function lbe(e){return vo({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12.017 0C5.396 0 .029 5.367.029 11.987c0 5.079 3.158 9.417 7.618 11.162-.105-.949-.199-2.403.041-3.439.219-.937 1.406-5.957 1.406-5.957s-.359-.72-.359-1.781c0-1.663.967-2.911 2.168-2.911 1.024 0 1.518.769 1.518 1.688 0 1.029-.653 2.567-.992 3.992-.285 1.193.6 2.165 1.775 2.165 2.128 0 3.768-2.245 3.768-5.487 0-2.861-2.063-4.869-5.008-4.869-3.41 0-5.409 2.562-5.409 5.199 0 1.033.394 2.143.889 2.741.099.12.112.225.085.345-.09.375-.293 1.199-.334 1.363-.053.225-.172.271-.401.165-1.495-.69-2.433-2.878-2.433-4.646 0-3.776 2.748-7.252 7.92-7.252 4.158 0 7.392 2.967 7.392 6.923 0 4.135-2.607 7.462-6.233 7.462-1.214 0-2.354-.629-2.758-1.379l-.749 2.848c-.269 1.045-1.004 2.352-1.498 3.146 1.123.345 2.306.535 3.55.535 6.607 0 11.985-5.365 11.985-11.987C23.97 5.39 18.592.026 11.985.026L12.017 0z"},child:[]}]})(e)}function cbe(e){return vo({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12.525.02c1.31-.02 2.61-.01 3.91-.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-1.43.08-2.86-.31-4.08-1.03-2.02-1.19-3.44-3.37-3.65-5.71-.02-.5-.03-1-.01-1.49.18-1.9 1.12-3.72 2.58-4.96 1.66-1.44 3.98-2.13 6.15-1.72.02 1.48-.04 2.96-.04 4.44-.99-.32-2.15-.23-3.02.37-.63.41-1.11 1.04-1.36 1.75-.21.51-.15 1.07-.14 1.61.24 1.64 1.82 3.02 3.5 2.87 1.12-.01 2.19-.66 2.77-1.61.19-.33.4-.67.41-1.06.1-1.79.06-3.57.07-5.36.01-4.03-.01-8.05.02-12.07z"},child:[]}]})(e)}obe.displayName=sbe.displayName;const dbe={facebook:{name:"Facebook",icon:Ot.jsx(gi,{className:"w-5 h-5"}),color:"text-blue-600",bgColor:"bg-blue-50",borderColor:"border-blue-200",maxChars:63206,features:{images:!0,videos:!0,stories:!0,reels:!0,hashtags:!0,mentions:!0,carousel:!0}},instagram:{name:"Instagram",icon:Ot.jsx(fi,{className:"w-5 h-5"}),color:"text-pink-600",bgColor:"bg-pink-50",borderColor:"border-pink-200",maxChars:2200,features:{images:!0,videos:!0,stories:!0,reels:!0,hashtags:!0,mentions:!0,carousel:!0}},twitter:{name:"X (Twitter)",icon:Ot.jsx(ra,{className:"w-5 h-5"}),color:"text-gray-900",bgColor:"bg-gray-50",borderColor:"border-gray-200",maxChars:280,features:{images:!0,videos:!0,hashtags:!0,mentions:!0,threads:!0}},linkedin:{name:"LinkedIn",icon:Ot.jsx(mi,{className:"w-5 h-5"}),color:"text-blue-700",bgColor:"bg-blue-50",borderColor:"border-blue-200",maxChars:3e3,features:{images:!0,videos:!0,hashtags:!0,mentions:!0,articles:!0}},youtube:{name:"YouTube",icon:Ot.jsx(Js,{className:"w-5 h-5"}),color:"text-red-600",bgColor:"bg-red-50",borderColor:"border-red-200",maxChars:5e3,features:{videos:!0,thumbnails:!0,hashtags:!0,playlists:!0,shorts:!0}},tiktok:{name:"TikTok",icon:Ot.jsx(cbe,{className:"w-5 h-5"}),color:"text-gray-900",bgColor:"bg-gray-50",borderColor:"border-gray-200",maxChars:2200,features:{videos:!0,hashtags:!0,mentions:!0,sounds:!0,effects:!0}},pinterest:{name:"Pinterest",icon:Ot.jsx(lbe,{className:"w-5 h-5"}),color:"text-red-600",bgColor:"bg-red-50",borderColor:"border-red-200",maxChars:500,features:{images:!0,videos:!0,hashtags:!0,boards:!0,pins:!0}}};function ube({businessId:e}){const{toast:t}=Nn();hn.useState(new Date);const[n,r]=hn.useState(!1),[s,i]=hn.useState([]),[a,o]=hn.useState(""),[l,c]=hn.useState([]),[d,u]=hn.useState(),[h,p]=hn.useState([]),[m,f]=hn.useState("");hn.useState(!1);const[g,x]=hn.useState(null),[v,y]=hn.useState(""),[b,w]=hn.useState(null);hn.useState(null),hn.useState(null);const{data:j=[]}=za({queryKey:["/api/social-media/accounts",e],enabled:!!e}),{data:N=[]}=za({queryKey:["/api/social-media/posts",e],enabled:!!e}),{data:_}=za({queryKey:["/api/social-media/analytics",e,"summary"],enabled:!!e});za({queryKey:["/api/social-media/campaigns",e],enabled:!!e});const{data:S=[]}=za({queryKey:["/api/social-media/messages",e],enabled:!!e}),{data:M=[]}=za({queryKey:["/api/social-media/mentions",e],enabled:!!e}),{data:C=[]}=za({queryKey:["/api/social-media/automation",e],enabled:!!e});za({queryKey:["/api/social-media/templates",e],enabled:!!e}),za({queryKey:["/api/social-media/team",e],enabled:!!e}),Fa({mutationFn:e=>qn("/api/social-media/accounts/connect",{method:"POST",body:JSON.stringify(e)}),onSuccess:()=>{vr.invalidateQueries({queryKey:["/api/social-media/accounts"]}),t({title:"Account connected",description:"Social media account has been connected successfully."})}});const E=Fa({mutationFn:e=>qn("/api/social-media/posts",{method:"POST",body:JSON.stringify(e)}),onSuccess:()=>{vr.invalidateQueries({queryKey:["/api/social-media/posts"]}),t({title:"Post created",description:"Your post has been scheduled successfully."}),r(!1),T()}});Fa({mutationFn:e=>qn(`/api/social-media/posts/${e}/publish`,{method:"POST"}),onSuccess:()=>{vr.invalidateQueries({queryKey:["/api/social-media/posts"]}),t({title:"Post published",description:"Your post has been published successfully."})}});const k=Fa({mutationFn:e=>qn("/api/social-media/posts/bulk-schedule",{method:"POST",body:JSON.stringify(e)}),onSuccess:()=>{vr.invalidateQueries({queryKey:["/api/social-media/posts"]}),t({title:"Bulk schedule complete",description:"Posts have been scheduled successfully."}),w(null)}}),A=Fa({mutationFn:e=>qn(`/api/social-media/messages/${e.messageId}/reply`,{method:"POST",body:JSON.stringify({response:e.response})}),onSuccess:()=>{vr.invalidateQueries({queryKey:["/api/social-media/messages"]}),t({title:"Reply sent",description:"Your reply has been sent successfully."}),y("")}});Fa({mutationFn:e=>qn("/api/social-media/automation",{method:"POST",body:JSON.stringify(e)}),onSuccess:()=>{vr.invalidateQueries({queryKey:["/api/social-media/automation"]}),t({title:"Automation created",description:"Your automation has been set up successfully."})}});const T=()=>{o(""),i([]),c([]),u(void 0),p([]),f("")},P=async t=>{window.location.href=`/api/social-media/auth/${t}?businessId=${e}`},O=_?.summary||{totalReach:0,avgEngagementRate:0},R=S.filter(e=>!e.isRead).length,I=N.reduce((e,t)=>{if(t.scheduledFor){const n=Fo(new Date(t.scheduledFor),"yyyy-MM-dd");e[n]||(e[n]=[]),e[n].push(t)}return e},{});return Ot.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[Ot.jsxs("div",{className:"flex justify-between items-center",children:[Ot.jsxs("div",{children:[Ot.jsx("h1",{className:"text-3xl font-bold",children:"Social Media Hub"}),Ot.jsx("p",{className:"text-muted-foreground",children:"Manage all your social media from one place"})]}),Ot.jsxs("div",{className:"flex gap-3",children:[Ot.jsxs(Ln,{variant:"outline",onClick:()=>vr.invalidateQueries(),"data-testid":"button-refresh",children:[Ot.jsx(Fs,{className:"w-4 h-4 mr-2"}),"Refresh"]}),Ot.jsxs(Ln,{onClick:()=>r(!0),"data-testid":"button-compose",children:[Ot.jsx(wr,{className:"w-4 h-4 mr-2"}),"Create Post"]})]})]}),Ot.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[Ot.jsxs(Sn,{children:[Ot.jsx(Lr,{className:"pb-2",children:Ot.jsx(zr,{className:"text-sm font-medium",children:"Total Reach"})}),Ot.jsxs(Mn,{children:[Ot.jsx("div",{className:"text-2xl font-bold",children:O.totalReach.toLocaleString()}),Ot.jsx("p",{className:"text-xs text-muted-foreground",children:"Last 30 days"})]})]}),Ot.jsxs(Sn,{children:[Ot.jsx(Lr,{className:"pb-2",children:Ot.jsx(zr,{className:"text-sm font-medium",children:"Engagement Rate"})}),Ot.jsxs(Mn,{children:[Ot.jsxs("div",{className:"text-2xl font-bold",children:[O.avgEngagementRate.toFixed(2),"%"]}),Ot.jsxs("p",{className:"text-xs text-muted-foreground",children:[Ot.jsx(Dn,{className:"w-3 h-3 inline text-green-600"})," +12.5%"]})]})]}),Ot.jsxs(Sn,{children:[Ot.jsx(Lr,{className:"pb-2",children:Ot.jsx(zr,{className:"text-sm font-medium",children:"Scheduled Posts"})}),Ot.jsxs(Mn,{children:[Ot.jsx("div",{className:"text-2xl font-bold",children:N.filter(e=>"scheduled"===e.status).length}),Ot.jsx("p",{className:"text-xs text-muted-foreground",children:"Ready to publish"})]})]}),Ot.jsxs(Sn,{children:[Ot.jsx(Lr,{className:"pb-2",children:Ot.jsx(zr,{className:"text-sm font-medium",children:"Messages"})}),Ot.jsxs(Mn,{children:[Ot.jsx("div",{className:"text-2xl font-bold",children:R}),Ot.jsx("p",{className:"text-xs text-muted-foreground",children:"Unread messages"})]})]})]}),Ot.jsxs(qs,{defaultValue:"dashboard",className:"space-y-4",children:[Ot.jsxs(Xs,{className:"grid w-full grid-cols-8",children:[Ot.jsx(Ks,{value:"dashboard",children:"Dashboard"}),Ot.jsx(Ks,{value:"accounts",children:"Accounts"}),Ot.jsx(Ks,{value:"composer",children:"Composer"}),Ot.jsx(Ks,{value:"calendar",children:"Calendar"}),Ot.jsx(Ks,{value:"analytics",children:"Analytics"}),Ot.jsx(Ks,{value:"inbox",children:"Inbox"}),Ot.jsx(Ks,{value:"listening",children:"Listening"}),Ot.jsx(Ks,{value:"automation",children:"Automation"})]}),Ot.jsx(Ys,{value:"dashboard",className:"space-y-4",children:Ot.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{children:[Ot.jsx(zr,{children:"Recent Posts"}),Ot.jsx(Ur,{children:"Your latest published content"})]}),Ot.jsx(Mn,{children:Ot.jsx(eC,{className:"h-[400px]",children:Ot.jsx("div",{className:"space-y-4",children:N.filter(e=>"published"===e.status).slice(0,5).map(e=>Ot.jsxs("div",{className:"p-4 border rounded-lg space-y-2",children:[Ot.jsxs("div",{className:"flex items-start justify-between",children:[Ot.jsx("div",{className:"flex gap-2",children:e.platform.map(e=>Ot.jsx("div",{className:bn("p-1 rounded",dbe[e]?.bgColor),children:dbe[e]?.icon},e))}),Ot.jsx(Tn,{variant:"outline",children:"Published"})]}),Ot.jsx("p",{className:"text-sm line-clamp-2",children:e.content}),e.metrics&&Ot.jsxs("div",{className:"flex gap-4 text-xs text-muted-foreground",children:[Ot.jsxs("span",{className:"flex items-center gap-1",children:[Ot.jsx($r,{className:"w-3 h-3"}),e.metrics.views]}),Ot.jsxs("span",{className:"flex items-center gap-1",children:[Ot.jsx(Zn,{className:"w-3 h-3"}),e.metrics.likes]}),Ot.jsxs("span",{className:"flex items-center gap-1",children:[Ot.jsx(_i,{className:"w-3 h-3"}),e.metrics.comments]}),Ot.jsxs("span",{className:"flex items-center gap-1",children:[Ot.jsx(ss,{className:"w-3 h-3"}),e.metrics.shares]})]})]},e.id))})})})]}),Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{children:[Ot.jsx(zr,{children:"Engagement Overview"}),Ot.jsx(Ur,{children:"Last 7 days performance"})]}),Ot.jsx(Mn,{children:Ot.jsx(v9,{width:"100%",height:400,children:Ot.jsxs(age,{data:[{name:"Mon",engagement:4.2,reach:2400},{name:"Tue",engagement:3.8,reach:1398},{name:"Wed",engagement:5.1,reach:9800},{name:"Thu",engagement:4.7,reach:3908},{name:"Fri",engagement:4.9,reach:4800},{name:"Sat",engagement:3.6,reach:3800},{name:"Sun",engagement:4.3,reach:4300}],children:[Ot.jsx(ome,{strokeDasharray:"3 3"}),Ot.jsx(Zme,{dataKey:"name"}),Ot.jsx(lfe,{yAxisId:"left"}),Ot.jsx(lfe,{yAxisId:"right",orientation:"right"}),Ot.jsx(u9,{}),Ot.jsx(T6,{}),Ot.jsx(_me,{yAxisId:"left",type:"monotone",dataKey:"engagement",stroke:"#8884d8",name:"Engagement Rate (%)"}),Ot.jsx(_me,{yAxisId:"right",type:"monotone",dataKey:"reach",stroke:"#82ca9d",name:"Reach"})]})})})]})]})}),Ot.jsx(Ys,{value:"accounts",className:"space-y-4",children:Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{children:[Ot.jsx(zr,{children:"Connected Accounts"}),Ot.jsx(Ur,{children:"Manage your social media accounts"})]}),Ot.jsx(Mn,{children:Ot.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(dbe).map(([e,t])=>{const n=j.find(t=>t.platform===e);return Ot.jsxs("div",{className:bn("p-4 rounded-lg border-2",t.borderColor,n?t.bgColor:"bg-gray-50"),children:[Ot.jsxs("div",{className:"flex items-start justify-between",children:[Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsx("div",{className:bn("p-2 rounded",t.bgColor),children:t.icon}),Ot.jsxs("div",{children:[Ot.jsx("h4",{className:"font-medium",children:t.name}),n?Ot.jsxs(Ot.Fragment,{children:[Ot.jsxs("p",{className:"text-sm text-muted-foreground",children:["@",n.accountHandle]}),Ot.jsxs("div",{className:"flex gap-3 mt-1 text-xs",children:[Ot.jsxs("span",{children:[n.followers?.toLocaleString()," followers"]}),Ot.jsxs("span",{children:[n.posts?.toLocaleString()," posts"]})]})]}):Ot.jsx("p",{className:"text-sm text-muted-foreground",children:"Not connected"})]})]}),n?Ot.jsxs(Tn,{variant:"outline",className:"bg-green-50",children:[Ot.jsx(us,{className:"w-3 h-3 mr-1 text-green-600"}),"Connected"]}):Ot.jsxs(Ln,{size:"sm",variant:"outline",onClick:()=>P(e),"data-testid":`button-connect-${e}`,children:[Ot.jsx(ea,{className:"w-4 h-4 mr-2"}),"Connect"]})]}),n&&Ot.jsxs("div",{className:"mt-4 pt-4 border-t flex justify-between items-center",children:[Ot.jsxs("span",{className:"text-xs text-muted-foreground",children:["Last synced: ",Fo(new Date(n.lastSyncedAt),"PPp")]}),Ot.jsxs(Ln,{size:"sm",variant:"ghost",onClick:()=>P(e),children:[Ot.jsx(Fs,{className:"w-3 h-3 mr-1"}),"Sync"]})]})]},e)})})})]})}),Ot.jsxs(Ys,{value:"composer",className:"space-y-4",children:[Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{children:[Ot.jsx(zr,{children:"Create Post"}),Ot.jsx(Ur,{children:"Compose and schedule your social media content"})]}),Ot.jsxs(Mn,{className:"space-y-6",children:[Ot.jsxs("div",{children:[Ot.jsx(ws,{children:"Select Platforms"}),Ot.jsx("div",{className:"flex flex-wrap gap-3 mt-2",children:Object.entries(dbe).map(([e,t])=>Ot.jsxs(Ln,{variant:s.includes(e)?"default":"outline",size:"sm",onClick:()=>{i(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},"data-testid":`button-platform-${e}`,children:[t.icon,Ot.jsx("span",{className:"ml-2",children:t.name})]},e))})]}),Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsx(ws,{htmlFor:"content",children:"Content"}),Ot.jsx(Tr,{id:"content",placeholder:"What would you like to share?",value:a,onChange:e=>o(e.target.value),className:"min-h-[150px]","data-testid":"textarea-content"}),Ot.jsxs("div",{className:"flex justify-between text-sm text-muted-foreground",children:[Ot.jsxs("span",{children:[a.length," characters"]}),s.length>0&&Ot.jsxs("span",{children:["Max: ",Math.min(...s.map(e=>dbe[e]?.maxChars||280))]})]})]}),Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsx(ws,{children:"Media"}),Ot.jsxs("div",{className:"border-2 border-dashed rounded-lg p-6 text-center",children:[Ot.jsx(ai,{className:"w-12 h-12 mx-auto text-muted-foreground mb-3"}),Ot.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Drag & drop or click to upload"}),Ot.jsx(zn,{type:"file",multiple:!0,accept:"image/*,video/*",className:"hidden",id:"media-upload",onChange:e=>{const t=Array.from(e.target.files||[]);c(t)},"data-testid":"input-media"}),Ot.jsx(Ln,{variant:"outline",size:"sm",asChild:!0,children:Ot.jsx("label",{htmlFor:"media-upload",className:"cursor-pointer",children:"Choose Files"})})]}),l.length>0&&Ot.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:l.map((e,t)=>Ot.jsxs("div",{className:"relative p-2 border rounded flex items-center gap-2",children:[Ot.jsx(Pr,{className:"w-4 h-4"}),Ot.jsx("span",{className:"text-sm",children:e.name}),Ot.jsx(Ln,{size:"sm",variant:"ghost",onClick:()=>{c(e=>e.filter((e,n)=>n!==t))},children:Ot.jsx(jn,{className:"w-3 h-3"})})]},t))})]}),Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsx(ws,{children:"Hashtags"}),Ot.jsxs("div",{className:"flex gap-2",children:[Ot.jsx(zn,{placeholder:"Add hashtags...",onKeyPress:e=>{if("Enter"===e.key){e.preventDefault();const t=e.currentTarget;t.value&&(p(e=>[...e,t.value]),t.value="")}},"data-testid":"input-hashtags"}),Ot.jsx(Ln,{variant:"outline",size:"icon",children:Ot.jsx(An,{className:"w-4 h-4"})})]}),h.length>0&&Ot.jsx("div",{className:"flex flex-wrap gap-2",children:h.map((e,t)=>Ot.jsxs(Tn,{variant:"secondary",children:["#",e,Ot.jsx(Ln,{size:"sm",variant:"ghost",className:"ml-1 p-0 h-auto",onClick:()=>{p(e=>e.filter((e,n)=>n!==t))},children:Ot.jsx(jn,{className:"w-3 h-3"})})]},t))})]}),Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsx(ws,{children:"Schedule"}),Ot.jsxs(ibe,{children:[Ot.jsx(abe,{asChild:!0,children:Ot.jsxs(Ln,{variant:"outline",className:"w-full justify-start text-left font-normal","data-testid":"button-schedule",children:[Ot.jsx(Qn,{className:"mr-2 h-4 w-4"}),d?Fo(d,"PPP p"):"Publish now"]})}),Ot.jsx(obe,{className:"w-auto p-0",align:"start",children:Ot.jsx(Tye,{mode:"single",selected:d,onSelect:u,initialFocus:!0})})]})]}),Ot.jsxs("div",{className:"flex justify-between",children:[Ot.jsxs(Ln,{variant:"outline",onClick:T,children:[Ot.jsx(jn,{className:"w-4 h-4 mr-2"}),"Cancel"]}),Ot.jsxs("div",{className:"flex gap-2",children:[Ot.jsx(Ln,{variant:"outline",children:"Save as Draft"}),Ot.jsx(Ln,{onClick:()=>{E.mutate({businessId:e,platform:s,content:a,hashtags:h,scheduledFor:d,status:d?"scheduled":"published"})},disabled:!a||0===s.length,"data-testid":"button-publish",children:d?Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(xr,{className:"w-4 h-4 mr-2"}),"Schedule Post"]}):Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(ns,{className:"w-4 h-4 mr-2"}),"Publish Now"]})})]})]})]})]}),Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{children:[Ot.jsx(zr,{children:"Bulk Schedule"}),Ot.jsx(Ur,{children:"Upload CSV/Excel file to schedule multiple posts"})]}),Ot.jsx(Mn,{children:Ot.jsxs("div",{className:"border-2 border-dashed rounded-lg p-6 text-center",children:[Ot.jsx(ta,{className:"w-12 h-12 mx-auto text-muted-foreground mb-3"}),Ot.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Upload CSV or Excel file with your posts"}),Ot.jsx(zn,{type:"file",accept:".csv,.xlsx",className:"hidden",id:"bulk-upload",onChange:e=>{const t=e.target.files?.[0];t&&w(t)},"data-testid":"input-bulk-upload"}),Ot.jsx(Ln,{variant:"outline",size:"sm",asChild:!0,children:Ot.jsx("label",{htmlFor:"bulk-upload",className:"cursor-pointer",children:"Choose File"})}),b&&Ot.jsxs("div",{className:"mt-4 p-3 bg-gray-50 rounded flex items-center justify-between",children:[Ot.jsx("span",{className:"text-sm",children:b.name}),Ot.jsxs(Ln,{size:"sm",onClick:()=>{const t=new FileReader;t.onload=t=>{k.mutate({csvData:t.target?.result,businessId:e})},t.readAsText(b)},children:[Ot.jsx(ai,{className:"w-4 h-4 mr-2"}),"Process"]})]}),Ot.jsxs("p",{className:"text-xs text-muted-foreground mt-3",children:["Download ",Ot.jsx("a",{href:"#",className:"underline",children:"template file"})," for reference"]})]})})]})]}),Ot.jsx(Ys,{value:"calendar",className:"space-y-4",children:Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{children:[Ot.jsx(zr,{children:"Content Calendar"}),Ot.jsx(Ur,{children:"Visual overview of your scheduled content"})]}),Ot.jsx(Mn,{children:Ot.jsxs("div",{className:"grid grid-cols-7 gap-2",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(e=>Ot.jsx("div",{className:"text-center font-medium py-2",children:e},e)),Array.from({length:35},(e,t)=>{const n=Zo(ml(new Date),t),r=Fo(n,"yyyy-MM-dd"),s=I[r]||[];return Ot.jsxs("div",{className:bn("min-h-[100px] border rounded p-2",s.length>0&&"bg-blue-50"),children:[Ot.jsx("div",{className:"text-sm font-medium mb-1",children:Fo(n,"d")}),s.slice(0,2).map(e=>Ot.jsx("div",{className:"text-xs p-1 bg-white rounded mb-1 truncate",children:Ot.jsx("div",{className:"flex gap-1",children:e.platform.map(e=>Ot.jsx("span",{className:dbe[e]?.color,children:dbe[e]?.icon},e))})},e.id)),s.length>2&&Ot.jsxs("div",{className:"text-xs text-muted-foreground",children:["+",s.length-2," more"]})]},t)})]})})]})}),Ot.jsxs(Ys,{value:"analytics",className:"space-y-4",children:[Ot.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[Ot.jsxs(Sn,{children:[Ot.jsx(Lr,{children:Ot.jsx(zr,{children:"Platform Performance"})}),Ot.jsx(Mn,{children:Ot.jsx(v9,{width:"100%",height:300,children:Ot.jsxs(lge,{children:[Ot.jsx(Lde,{data:[{name:"Facebook",value:35,color:"#1877F2"},{name:"Instagram",value:25,color:"#E4405F"},{name:"Twitter",value:20,color:"#1DA1F2"},{name:"LinkedIn",value:15,color:"#0A66C2"},{name:"Others",value:5,color:"#9CA3AF"}],dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:100,children:[0,1,2,3,4].map(e=>Ot.jsx(y9,{fill:["#1877F2","#E4405F","#1DA1F2","#0A66C2","#9CA3AF"][e]},e))}),Ot.jsx(u9,{}),Ot.jsx(T6,{})]})})})]}),Ot.jsxs(Sn,{children:[Ot.jsx(Lr,{children:Ot.jsx(zr,{children:"Engagement Breakdown"})}),Ot.jsx(Mn,{children:Ot.jsxs("div",{className:"space-y-4",children:[Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx(Zn,{className:"w-4 h-4 text-red-500"}),Ot.jsx("span",{className:"text-sm",children:"Likes"})]}),Ot.jsx("span",{className:"font-medium",children:"12.4K"})]}),Ot.jsx(Vr,{value:75,className:"h-2"}),Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx(_i,{className:"w-4 h-4 text-blue-500"}),Ot.jsx("span",{className:"text-sm",children:"Comments"})]}),Ot.jsx("span",{className:"font-medium",children:"3.2K"})]}),Ot.jsx(Vr,{value:45,className:"h-2"}),Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx(ss,{className:"w-4 h-4 text-green-500"}),Ot.jsx("span",{className:"text-sm",children:"Shares"})]}),Ot.jsx("span",{className:"font-medium",children:"1.8K"})]}),Ot.jsx(Vr,{value:30,className:"h-2"}),Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx($r,{className:"w-4 h-4 text-purple-500"}),Ot.jsx("span",{className:"text-sm",children:"Views"})]}),Ot.jsx("span",{className:"font-medium",children:"45.6K"})]}),Ot.jsx(Vr,{value:90,className:"h-2"})]})})]}),Ot.jsxs(Sn,{children:[Ot.jsx(Lr,{children:Ot.jsx(zr,{children:"Top Performing Posts"})}),Ot.jsx(Mn,{children:Ot.jsx(eC,{className:"h-[350px]",children:Ot.jsx("div",{className:"space-y-3",children:N.filter(e=>e.metrics).sort((e,t)=>(t.metrics?.engagementRate||0)-(e.metrics?.engagementRate||0)).slice(0,5).map((e,t)=>Ot.jsxs("div",{className:"flex items-start gap-3",children:[Ot.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center text-sm font-medium",children:t+1}),Ot.jsxs("div",{className:"flex-1 space-y-1",children:[Ot.jsx("p",{className:"text-sm line-clamp-2",children:e.content}),Ot.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[Ot.jsxs(Tn,{variant:"outline",className:"text-xs",children:[e.metrics?.engagementRate.toFixed(1),"% engagement"]}),Ot.jsxs("span",{children:[e.metrics?.views," views"]})]})]})]},e.id))})})})]})]}),Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{children:[Ot.jsx(zr,{children:"Growth Over Time"}),Ot.jsx(Ur,{children:"Track your audience growth across platforms"})]}),Ot.jsx(Mn,{children:Ot.jsx(v9,{width:"100%",height:400,children:Ot.jsxs(cge,{data:[{month:"Jan",followers:4500,engagement:4.2},{month:"Feb",followers:5200,engagement:4.5},{month:"Mar",followers:5800,engagement:4.1},{month:"Apr",followers:6500,engagement:4.8},{month:"May",followers:7300,engagement:5.2},{month:"Jun",followers:8100,engagement:5.5}],children:[Ot.jsx(ome,{strokeDasharray:"3 3"}),Ot.jsx(Zme,{dataKey:"month"}),Ot.jsx(lfe,{yAxisId:"left"}),Ot.jsx(lfe,{yAxisId:"right",orientation:"right"}),Ot.jsx(u9,{}),Ot.jsx(T6,{}),Ot.jsx(Bme,{yAxisId:"left",type:"monotone",dataKey:"followers",stroke:"#8884d8",fill:"#8884d8",fillOpacity:.6,name:"Followers"}),Ot.jsx(Bme,{yAxisId:"right",type:"monotone",dataKey:"engagement",stroke:"#82ca9d",fill:"#82ca9d",fillOpacity:.6,name:"Engagement Rate (%)"})]})})})]})]}),Ot.jsx(Ys,{value:"inbox",className:"space-y-4",children:Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{children:[Ot.jsx(zr,{children:"Unified Inbox"}),Ot.jsx(Ur,{children:"Manage all your social media messages in one place"})]}),Ot.jsx(Mn,{children:Ot.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[Ot.jsx("div",{className:"lg:col-span-1 border-r",children:Ot.jsx(eC,{className:"h-[600px]",children:Ot.jsx("div",{className:"space-y-2 pr-4",children:S.map(e=>Ot.jsx("div",{className:bn("p-3 rounded cursor-pointer hover:bg-gray-50",g?.id===e.id&&"bg-blue-50",!e.isRead&&"bg-blue-50/50"),onClick:()=>x(e),children:Ot.jsxs("div",{className:"flex items-start gap-3",children:[Ot.jsxs(ou,{className:"w-10 h-10",children:[Ot.jsx(lu,{src:e.senderImage}),Ot.jsx(cu,{children:e.senderName[0]})]}),Ot.jsxs("div",{className:"flex-1 min-w-0",children:[Ot.jsxs("div",{className:"flex items-start justify-between",children:[Ot.jsxs("div",{children:[Ot.jsx("p",{className:"font-medium text-sm",children:e.senderName}),Ot.jsx("p",{className:"text-xs text-muted-foreground",children:dbe[e.platform]?.name})]}),Ot.jsx("span",{className:"text-xs text-muted-foreground",children:Fo(new Date(e.timestamp),"p")})]}),Ot.jsx("p",{className:"text-sm line-clamp-2 mt-1",children:e.content}),Ot.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[!e.isRead&&Ot.jsx(Tn,{variant:"secondary",className:"text-xs",children:"New"}),"high"===e.priority&&Ot.jsx(Tn,{variant:"destructive",className:"text-xs",children:"High Priority"}),e.sentiment&&Ot.jsx(Tn,{variant:"outline",className:bn("text-xs","positive"===e.sentiment&&"text-green-600","negative"===e.sentiment&&"text-red-600"),children:e.sentiment})]})]})]})},e.id))})})}),Ot.jsx("div",{className:"lg:col-span-2",children:g?Ot.jsxs("div",{className:"flex flex-col h-[600px]",children:[Ot.jsx("div",{className:"p-4 border-b",children:Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsxs(ou,{children:[Ot.jsx(lu,{src:g.senderImage}),Ot.jsx(cu,{children:g.senderName[0]})]}),Ot.jsxs("div",{children:[Ot.jsx("p",{className:"font-medium",children:g.senderName}),Ot.jsxs("p",{className:"text-sm text-muted-foreground",children:["via ",dbe[g.platform]?.name]})]})]}),Ot.jsxs(MD,{children:[Ot.jsx(CD,{asChild:!0,children:Ot.jsx(Ln,{variant:"ghost",size:"icon",children:Ot.jsx(ts,{className:"w-4 h-4"})})}),Ot.jsxs(ED,{align:"end",children:[Ot.jsxs(kD,{children:[Ot.jsx(In,{className:"w-4 h-4 mr-2"}),"Mark as Important"]}),Ot.jsxs(kD,{children:[Ot.jsx(ms,{className:"w-4 h-4 mr-2"}),"Flag for Review"]}),Ot.jsxs(kD,{className:"text-red-600",children:[Ot.jsx(jn,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})]})}),Ot.jsx("div",{className:"flex-1 p-4 overflow-y-auto",children:Ot.jsx("div",{className:"space-y-4",children:Ot.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[Ot.jsx("p",{className:"text-sm",children:g.content}),Ot.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:Fo(new Date(g.timestamp),"PPp")})]})})}),Ot.jsx("div",{className:"p-4 border-t",children:Ot.jsxs("div",{className:"space-y-3",children:[Ot.jsx(Tr,{placeholder:"Type your reply...",value:v,onChange:e=>y(e.target.value),className:"min-h-[100px]"}),Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{className:"flex gap-2",children:[Ot.jsxs(Ln,{variant:"outline",size:"sm",children:[Ot.jsx(An,{className:"w-4 h-4 mr-2"}),"Use Template"]}),Ot.jsxs(Ln,{variant:"outline",size:"sm",children:[Ot.jsx(ii,{className:"w-4 h-4 mr-2"}),"AI Suggest"]})]}),Ot.jsxs(Ln,{onClick:()=>{A.mutate({messageId:g.id,response:v})},disabled:!v,children:[Ot.jsx(ns,{className:"w-4 h-4 mr-2"}),"Send Reply"]})]})]})})]}):Ot.jsx("div",{className:"h-[600px] flex items-center justify-center text-muted-foreground",children:"Select a message to view"})})]})})]})}),Ot.jsx(Ys,{value:"listening",className:"space-y-4",children:Ot.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{children:[Ot.jsx(zr,{children:"Brand Mentions"}),Ot.jsx(Ur,{children:"Track mentions of your brand across social media"})]}),Ot.jsx(Mn,{children:Ot.jsx(eC,{className:"h-[400px]",children:Ot.jsx("div",{className:"space-y-3",children:M.map(e=>Ot.jsxs("div",{className:"p-3 border rounded-lg",children:[Ot.jsxs("div",{className:"flex items-start justify-between",children:[Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx("div",{className:bn("p-1 rounded",dbe[e.platform]?.bgColor),children:dbe[e.platform]?.icon}),Ot.jsxs("div",{children:[Ot.jsx("p",{className:"font-medium text-sm",children:e.authorName}),Ot.jsxs("p",{className:"text-xs text-muted-foreground",children:["@",e.authorHandle]})]})]}),Ot.jsx(Tn,{variant:"outline",className:bn("text-xs","positive"===e.sentiment&&"text-green-600 border-green-200","negative"===e.sentiment&&"text-red-600 border-red-200"),children:e.sentiment})]}),Ot.jsx("p",{className:"text-sm mt-2",children:e.content}),Ot.jsxs("div",{className:"flex items-center justify-between mt-3",children:[Ot.jsx("span",{className:"text-xs text-muted-foreground",children:Fo(new Date(e.timestamp),"PPp")}),Ot.jsxs(Ln,{size:"sm",variant:"outline",children:[Ot.jsx(_i,{className:"w-3 h-3 mr-1"}),"Reply"]})]})]},e.id))})})})]}),Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{children:[Ot.jsx(zr,{children:"Trending Topics"}),Ot.jsx(Ur,{children:"Popular hashtags and topics in your industry"})]}),Ot.jsx(Mn,{children:Ot.jsx("div",{className:"space-y-3",children:["#LocalBusiness","#SmallBusinessLove","#ShopLocal","#CommunityFirst","#FloridaBusiness"].map((e,t)=>Ot.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center text-sm font-medium",children:t+1}),Ot.jsxs("div",{children:[Ot.jsx("p",{className:"font-medium",children:e}),Ot.jsxs("p",{className:"text-xs text-muted-foreground",children:[Math.floor(1e4*Math.random())," posts"]})]})]}),Ot.jsx(Dn,{className:"w-4 h-4 text-green-600"})]},e))})})]})]})}),Ot.jsx(Ys,{value:"automation",className:"space-y-4",children:Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{children:[Ot.jsx(zr,{children:"Automation Rules"}),Ot.jsx(Ur,{children:"Set up automated posting and responses"})]}),Ot.jsx(Mn,{children:Ot.jsxs("div",{className:"space-y-4",children:[Ot.jsxs(yr,{children:[Ot.jsx(br,{asChild:!0,children:Ot.jsxs(Ln,{children:[Ot.jsx(wr,{className:"w-4 h-4 mr-2"}),"Create Automation"]})}),Ot.jsxs(jr,{className:"max-w-2xl",children:[Ot.jsxs(Nr,{children:[Ot.jsx(_r,{children:"Create Automation Rule"}),Ot.jsx(ji,{children:"Set up automated actions for your social media"})]}),Ot.jsxs("div",{className:"space-y-4",children:[Ot.jsxs("div",{children:[Ot.jsx(ws,{children:"Automation Type"}),Ot.jsxs(Un,{children:[Ot.jsx(Vn,{children:Ot.jsx(Hn,{placeholder:"Select type"})}),Ot.jsxs(Wn,{children:[Ot.jsx($n,{value:"rss",children:"RSS Feed Auto-post"}),Ot.jsx($n,{value:"product",children:"Product Sync"}),Ot.jsx($n,{value:"review",children:"Review to Social"}),Ot.jsx($n,{value:"event",children:"Event Promotion"}),Ot.jsx($n,{value:"welcome",children:"Welcome Message"}),Ot.jsx($n,{value:"birthday",children:"Birthday Posts"})]})]})]}),Ot.jsxs("div",{children:[Ot.jsx(ws,{children:"Trigger"}),Ot.jsx(zn,{placeholder:"e.g., New RSS item, 5-star review"})]}),Ot.jsxs("div",{children:[Ot.jsx(ws,{children:"Action"}),Ot.jsx(Tr,{placeholder:"Describe what should happen..."})]}),Ot.jsxs("div",{children:[Ot.jsx(ws,{children:"Platforms"}),Ot.jsx("div",{className:"flex gap-2",children:Object.entries(dbe).map(([e,t])=>Ot.jsx(Ln,{variant:"outline",size:"sm",children:t.icon},e))})]})]}),Ot.jsxs(Ai,{children:[Ot.jsx(Ln,{variant:"outline",children:"Cancel"}),Ot.jsx(Ln,{children:"Create Rule"})]})]})]}),Ot.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:C.map(e=>Ot.jsxs("div",{className:"p-4 border rounded-lg",children:[Ot.jsxs("div",{className:"flex items-start justify-between",children:[Ot.jsxs("div",{children:[Ot.jsx("h4",{className:"font-medium",children:e.name}),Ot.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[e.trigger,"  ",e.action]}),Ot.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[Ot.jsx(Tn,{variant:"outline",children:e.type}),Ot.jsxs("span",{className:"text-xs text-muted-foreground",children:[e.runsCount," runs"]})]})]}),Ot.jsx($X,{checked:e.isActive,onCheckedChange:e=>{}})]}),Ot.jsx("div",{className:"flex gap-2 mt-3",children:e.platforms.map(e=>Ot.jsx("div",{className:bn("p-1 rounded",dbe[e]?.bgColor),children:dbe[e]?.icon},e))})]},e.id))})]})})]})})]}),Ot.jsx(jo,{children:n&&Ot.jsxs(wo.div,{initial:{opacity:0,y:100},animate:{opacity:1,y:0},exit:{opacity:0,y:100},className:"fixed bottom-4 right-4 w-96 bg-white rounded-lg shadow-2xl border p-4",children:[Ot.jsxs("div",{className:"flex items-center justify-between mb-3",children:[Ot.jsx("h3",{className:"font-medium",children:"Quick Post"}),Ot.jsx(Ln,{size:"sm",variant:"ghost",onClick:()=>r(!1),children:Ot.jsx(jn,{className:"w-4 h-4"})})]}),Ot.jsx(Tr,{placeholder:"What's on your mind?",className:"min-h-[100px] mb-3"}),Ot.jsxs("div",{className:"flex justify-between",children:[Ot.jsxs("div",{className:"flex gap-2",children:[Ot.jsx(Ln,{size:"sm",variant:"outline",children:Ot.jsx(Pr,{className:"w-4 h-4"})}),Ot.jsx(Ln,{size:"sm",variant:"outline",children:Ot.jsx(na,{className:"w-4 h-4"})})]}),Ot.jsxs(Ln,{size:"sm",children:[Ot.jsx(ns,{className:"w-4 h-4 mr-2"}),"Post"]})]})]})})]})}function hbe(){return Ot.jsx("div",{className:"min-h-screen",children:Ot.jsx("div",{className:"container mx-auto px-4 py-8",children:Ot.jsx(ube,{})})})}function pbe(){const{id:e}=ps(),{user:t}=Ua(),{toast:n}=Nn(),[,r]=_n(),[s,i]=hn.useState("overview"),[a,o]=hn.useState(!1),l=t?.id===e,{data:c,isLoading:d}=za({queryKey:["/api/entrepreneurs",e],queryFn:async()=>{try{return await qn("GET",`/api/entrepreneurs/${e}`)}catch(n){return{id:e,userId:e,displayName:t?.firstName||"John Entrepreneur",bio:"Serial entrepreneur passionate about building innovative businesses in Florida. Focused on creating value for local communities through technology and sustainable practices.",title:"Founder & CEO",location:"Miami, Florida",website:"https://example.com",email:"john@example.com",phone:"+1 (305) 555-0100",socialLinks:{linkedin:"https://linkedin.com/in/john",twitter:"https://twitter.com/john",instagram:"https://instagram.com/john",facebook:"https://facebook.com/john"},skills:["Business Strategy","Digital Marketing","E-commerce","Team Building","Innovation","Leadership"],experience:8,achievements:[{id:"1",title:"Spotlight Champion",description:"Won monthly spotlight 3 times",icon:"trophy",earnedAt:(new Date).toISOString(),rarity:"epic"},{id:"2",title:"Community Leader",description:"Helped 50+ businesses grow",icon:"users",earnedAt:(new Date).toISOString(),rarity:"rare"},{id:"3",title:"Revenue Master",description:"Generated $1M+ in platform sales",icon:"dollar",earnedAt:(new Date).toISOString(),rarity:"legendary"}],businesses:[],stats:{totalBusinesses:3,totalFollowers:1234,totalRevenue:125e4,successRate:92,spotlightWins:3,avgRating:4.8},createdAt:new Date(Date.now()-31536e6).toISOString(),updatedAt:(new Date).toISOString(),verified:!0}}}}),{data:u=[]}=za({queryKey:["/api/entrepreneurs",e,"businesses"],queryFn:async()=>{try{return await qn("GET",`/api/entrepreneurs/${e}/businesses`)}catch(t){return await qn("GET",`/api/users/${e}/businesses`)}}}),{data:h=[]}=za({queryKey:["/api/timeline",e],queryFn:async()=>{try{return await qn("GET",`/api/timeline/user/${e}`)}catch(t){return[{id:"1",title:"Launched New Product Line!",content:"Excited to announce our new sustainable product line. ",likes:45,comments:12,shares:5,createdAt:new Date(Date.now()-864e5).toISOString()},{id:"2",title:"Celebrating 5 Years in Business",content:"What an incredible journey it has been! Thank you to all our customers and supporters.",mediaUrl:"/api/placeholder/400/400",likes:123,comments:34,shares:15,createdAt:new Date(Date.now()-1728e5).toISOString()}]}}}),p=Fa({mutationFn:async()=>{a?await qn("DELETE",`/api/entrepreneurs/${e}/follow`):await qn("POST",`/api/entrepreneurs/${e}/follow`)},onSuccess:()=>{o(!a),n({title:a?"Unfollowed":"Following",description:a?`You've unfollowed ${c?.displayName}`:`You're now following ${c?.displayName}`}),vr.invalidateQueries({queryKey:["/api/entrepreneurs",e]})},onError:()=>{n({title:"Error",description:"Failed to update follow status",variant:"destructive"})}}),m=e=>{switch(e){case"legendary":return"text-yellow-600 bg-yellow-100";case"epic":return"text-purple-600 bg-purple-100";case"rare":return"text-blue-600 bg-blue-100";default:return"text-gray-600 bg-gray-100"}},f=e=>{switch(e){case"trophy":return Ot.jsx(Jn,{className:"h-5 w-5"});case"users":return Ot.jsx(Ii,{className:"h-5 w-5"});case"dollar":return Ot.jsx(Dn,{className:"h-5 w-5"});default:return Ot.jsx(sr,{className:"h-5 w-5"})}};return d?Ot.jsx("div",{className:"min-h-screen",children:Ot.jsx("div",{className:"container mx-auto px-4 py-8",children:Ot.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[Ot.jsx(er,{className:"h-64 w-full"}),Ot.jsx(er,{className:"h-48 w-full"}),Ot.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:[...Array(6)].map((e,t)=>Ot.jsx(er,{className:"h-32 w-full"},t))})]})})}):Ot.jsx("div",{className:"min-h-screen",children:Ot.jsx("div",{className:"container mx-auto px-4 py-8",children:Ot.jsxs("div",{className:"max-w-6xl mx-auto",children:[Ot.jsx(Sn,{className:"mb-8 border-2 hover:border-purple-400 transition-all",children:Ot.jsxs(Mn,{className:"p-8",children:[Ot.jsxs("div",{className:"flex flex-col md:flex-row items-start gap-6",children:[Ot.jsxs("div",{className:"relative",children:[Ot.jsxs(ou,{className:"h-32 w-32 border-4 border-white shadow-xl",children:[Ot.jsx(lu,{src:`https://api.dicebear.com/7.x/avataaars/svg?seed=${e}`}),Ot.jsx(cu,{className:"text-3xl bg-gradient-to-br from-purple-500 to-pink-500 text-white",children:c?.displayName?.charAt(0)||"E"})]}),c?.verified&&Ot.jsx("div",{className:"absolute bottom-0 right-0 bg-blue-500 rounded-full p-2",children:Ot.jsx(us,{className:"h-6 w-6 text-white"})})]}),Ot.jsxs("div",{className:"flex-1",children:[Ot.jsxs("div",{className:"flex items-start justify-between",children:[Ot.jsxs("div",{children:[Ot.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[c?.displayName,c?.verified&&Ot.jsx(Tn,{className:"bg-blue-100 text-blue-700",children:"Verified"})]}),Ot.jsx("p",{className:"text-lg text-muted-foreground mt-1",children:c?.title}),Ot.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[Ot.jsxs("span",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[Ot.jsx(Bn,{className:"h-4 w-4"}),c?.location]}),Ot.jsxs("span",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[Ot.jsx(sa,{className:"h-4 w-4"}),c?.experience," years experience"]}),Ot.jsxs("span",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[Ot.jsx(Qn,{className:"h-4 w-4"}),"Joined ",c&&Fo(new Date(c.createdAt),"MMM yyyy")]})]})]}),Ot.jsx("div",{className:"flex gap-2",children:l?Ot.jsxs(Ot.Fragment,{children:[Ot.jsxs(Ln,{variant:"outline",children:[Ot.jsx(Ds,{className:"h-4 w-4 mr-2"}),"Edit Profile"]}),Ot.jsxs(Ln,{variant:"outline",children:[Ot.jsx(ss,{className:"h-4 w-4 mr-2"}),"Share"]})]}):Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(Ln,{onClick:()=>p.mutate(),variant:a?"outline":"default",children:a?Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(ia,{className:"h-4 w-4 mr-2"}),"Unfollow"]}):Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(Ji,{className:"h-4 w-4 mr-2"}),"Follow"]})}),Ot.jsxs(Ln,{variant:"outline",children:[Ot.jsx(Or,{className:"h-4 w-4 mr-2"}),"Message"]})]})})]}),Ot.jsx("p",{className:"mt-4 text-gray-700 dark:text-gray-300 leading-relaxed",children:c?.bio}),Ot.jsx("div",{className:"flex flex-wrap gap-2 mt-4",children:c?.skills.map(e=>Ot.jsx(Tn,{variant:"secondary",children:e},e))}),Ot.jsxs("div",{className:"flex gap-4 mt-4",children:[c?.website&&Ot.jsx("a",{href:c.website,target:"_blank",rel:"noopener noreferrer",children:Ot.jsx(Ln,{variant:"ghost",size:"sm",children:Ot.jsx(Yr,{className:"h-4 w-4"})})}),c?.socialLinks?.linkedin&&Ot.jsx("a",{href:c.socialLinks.linkedin,target:"_blank",rel:"noopener noreferrer",children:Ot.jsx(Ln,{variant:"ghost",size:"sm",children:Ot.jsx(mi,{className:"h-4 w-4"})})}),c?.socialLinks?.twitter&&Ot.jsx("a",{href:c.socialLinks.twitter,target:"_blank",rel:"noopener noreferrer",children:Ot.jsx(Ln,{variant:"ghost",size:"sm",children:Ot.jsx(ra,{className:"h-4 w-4"})})}),c?.socialLinks?.instagram&&Ot.jsx("a",{href:c.socialLinks.instagram,target:"_blank",rel:"noopener noreferrer",children:Ot.jsx(Ln,{variant:"ghost",size:"sm",children:Ot.jsx(fi,{className:"h-4 w-4"})})}),c?.socialLinks?.facebook&&Ot.jsx("a",{href:c.socialLinks.facebook,target:"_blank",rel:"noopener noreferrer",children:Ot.jsx(Ln,{variant:"ghost",size:"sm",children:Ot.jsx(gi,{className:"h-4 w-4"})})})]})]})]}),Ot.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4 mt-8 pt-8 border-t",children:[Ot.jsxs("div",{className:"text-center",children:[Ot.jsx("p",{className:"text-2xl font-bold",children:c?.stats.totalBusinesses}),Ot.jsx("p",{className:"text-sm text-muted-foreground",children:"Businesses"})]}),Ot.jsxs("div",{className:"text-center",children:[Ot.jsx("p",{className:"text-2xl font-bold",children:c?.stats.totalFollowers.toLocaleString()}),Ot.jsx("p",{className:"text-sm text-muted-foreground",children:"Followers"})]}),Ot.jsxs("div",{className:"text-center",children:[Ot.jsxs("p",{className:"text-2xl font-bold",children:["$",(c?.stats.totalRevenue/1e6).toFixed(1),"M"]}),Ot.jsx("p",{className:"text-sm text-muted-foreground",children:"Revenue"})]}),Ot.jsxs("div",{className:"text-center",children:[Ot.jsxs("p",{className:"text-2xl font-bold",children:[c?.stats.successRate,"%"]}),Ot.jsx("p",{className:"text-sm text-muted-foreground",children:"Success Rate"})]}),Ot.jsxs("div",{className:"text-center",children:[Ot.jsx("p",{className:"text-2xl font-bold",children:c?.stats.spotlightWins}),Ot.jsx("p",{className:"text-sm text-muted-foreground",children:"Spotlight Wins"})]}),Ot.jsxs("div",{className:"text-center",children:[Ot.jsxs("p",{className:"text-2xl font-bold flex items-center justify-center gap-1",children:[c?.stats.avgRating,Ot.jsx(In,{className:"h-4 w-4 text-yellow-500 fill-yellow-500"})]}),Ot.jsx("p",{className:"text-sm text-muted-foreground",children:"Avg Rating"})]})]})]})}),Ot.jsxs(qs,{value:s,onValueChange:i,children:[Ot.jsxs(Xs,{className:"grid w-full grid-cols-4",children:[Ot.jsx(Ks,{value:"overview",children:"Overview"}),Ot.jsx(Ks,{value:"businesses",children:"Businesses"}),Ot.jsx(Ks,{value:"timeline",children:"Timeline"}),Ot.jsx(Ks,{value:"achievements",children:"Achievements"})]}),Ot.jsx(Ys,{value:"overview",children:Ot.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[Ot.jsxs(Sn,{children:[Ot.jsx(Lr,{children:Ot.jsx(zr,{children:"Quick Actions"})}),Ot.jsxs(Mn,{className:"space-y-2",children:[Ot.jsxs(Ln,{variant:"outline",className:"w-full justify-start",children:[Ot.jsx(Vs,{className:"h-4 w-4 mr-2"}),"View Timeline Posts"]}),Ot.jsxs(Ln,{variant:"outline",className:"w-full justify-start",children:[Ot.jsx(Zr,{className:"h-4 w-4 mr-2"}),"Browse Businesses"]}),Ot.jsxs(Ln,{variant:"outline",className:"w-full justify-start",children:[Ot.jsx(Jn,{className:"h-4 w-4 mr-2"}),"View Achievements"]}),Ot.jsxs(Ln,{variant:"outline",className:"w-full justify-start",children:[Ot.jsx(Or,{className:"h-4 w-4 mr-2"}),"Send Message"]})]})]}),Ot.jsxs(Sn,{children:[Ot.jsx(Lr,{children:Ot.jsx(zr,{children:"Recent Activity"})}),Ot.jsx(Mn,{children:Ot.jsxs("div",{className:"space-y-4",children:[Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsx("div",{className:"p-2 rounded-full bg-purple-100 dark:bg-purple-900/30",children:Ot.jsx(Vs,{className:"h-4 w-4 text-purple-600"})}),Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-sm font-medium",children:"Posted a new timeline update"}),Ot.jsx("p",{className:"text-xs text-muted-foreground",children:"2 hours ago"})]})]}),Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsx("div",{className:"p-2 rounded-full bg-green-100 dark:bg-green-900/30",children:Ot.jsx(Jn,{className:"h-4 w-4 text-green-600"})}),Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-sm font-medium",children:"Won monthly spotlight"}),Ot.jsx("p",{className:"text-xs text-muted-foreground",children:"3 days ago"})]})]}),Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsx("div",{className:"p-2 rounded-full bg-blue-100 dark:bg-blue-900/30",children:Ot.jsx(Zr,{className:"h-4 w-4 text-blue-600"})}),Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-sm font-medium",children:"Launched new business"}),Ot.jsx("p",{className:"text-xs text-muted-foreground",children:"1 week ago"})]})]})]})})]})]})}),Ot.jsx(Ys,{value:"businesses",children:Ot.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[u.map(e=>Ot.jsxs(Sn,{className:"hover:shadow-lg transition-shadow cursor-pointer",children:[Ot.jsxs(Lr,{children:[Ot.jsxs("div",{className:"flex items-start justify-between",children:[Ot.jsxs(ou,{className:"h-12 w-12",children:[Ot.jsx(lu,{src:e.logoUrl||void 0}),Ot.jsx(cu,{children:e.name.charAt(0)})]}),Ot.jsx(Tn,{variant:"secondary",children:e.category})]}),Ot.jsx(zr,{className:"text-lg mt-3",children:e.name}),Ot.jsx(Ur,{children:e.tagline})]}),Ot.jsxs(Mn,{children:[Ot.jsxs("div",{className:"flex items-center justify-between text-sm",children:[Ot.jsxs("span",{className:"flex items-center gap-1",children:[Ot.jsx(In,{className:"h-4 w-4 text-yellow-500 fill-yellow-500"}),e.rating||0]}),Ot.jsxs("span",{className:"text-muted-foreground",children:[e.reviewCount||0," reviews"]})]}),Ot.jsxs(Ln,{variant:"outline",className:"w-full mt-4",onClick:()=>r(`/business/${e.id}`),children:["View Business",Ot.jsx(Ps,{className:"h-4 w-4 ml-2"})]})]})]},e.id)),l&&Ot.jsx(Sn,{className:"border-dashed border-2 hover:shadow-lg transition-shadow cursor-pointer",children:Ot.jsx(Mn,{className:"flex flex-col items-center justify-center h-full min-h-[250px]",children:Ot.jsxs(Ln,{variant:"outline",onClick:()=>r("/create-business"),children:[Ot.jsx(Zr,{className:"h-5 w-5 mr-2"}),"Add New Business"]})})})]})}),Ot.jsx(Ys,{value:"timeline",children:Ot.jsxs("div",{className:"space-y-6",children:[h.map(t=>Ot.jsxs(Sn,{className:"hover:shadow-lg transition-shadow",children:[Ot.jsx(Lr,{children:Ot.jsx("div",{className:"flex items-start justify-between",children:Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsxs(ou,{className:"h-10 w-10",children:[Ot.jsx(lu,{src:`https://api.dicebear.com/7.x/avataaars/svg?seed=${e}`}),Ot.jsx(cu,{children:c?.displayName?.charAt(0)})]}),Ot.jsxs("div",{children:[Ot.jsx("p",{className:"font-medium",children:c?.displayName}),Ot.jsx("p",{className:"text-xs text-muted-foreground",children:Fo(new Date(t.createdAt),"MMM d, yyyy")})]})]})})}),Ot.jsxs(Mn,{children:[Ot.jsx("h3",{className:"font-semibold mb-2",children:t.title}),Ot.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:t.content}),t.mediaUrl&&Ot.jsx("img",{src:t.mediaUrl,alt:t.title,className:"mt-4 rounded-lg w-full"}),Ot.jsxs("div",{className:"flex items-center gap-6 mt-4",children:[Ot.jsxs("button",{className:"flex items-center gap-2 text-sm text-muted-foreground hover:text-primary",children:[Ot.jsx(Zn,{className:"h-4 w-4"}),t.likes]}),Ot.jsxs("button",{className:"flex items-center gap-2 text-sm text-muted-foreground hover:text-primary",children:[Ot.jsx(Or,{className:"h-4 w-4"}),t.comments]}),Ot.jsxs("button",{className:"flex items-center gap-2 text-sm text-muted-foreground hover:text-primary",children:[Ot.jsx(ss,{className:"h-4 w-4"}),t.shares]})]})]})]},t.id)),l&&Ot.jsx(Sn,{className:"border-dashed border-2",children:Ot.jsx(Mn,{className:"flex flex-col items-center justify-center py-8",children:Ot.jsxs(Ln,{onClick:()=>r("/timeline/create"),children:[Ot.jsx(Vs,{className:"h-5 w-5 mr-2"}),"Create Timeline Post"]})})})]})}),Ot.jsx(Ys,{value:"achievements",children:Ot.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:c?.achievements.map(e=>Ot.jsxs(Sn,{className:bn("hover:shadow-lg transition-all","legendary"===e.rarity&&"border-yellow-400","epic"===e.rarity&&"border-purple-400","rare"===e.rarity&&"border-blue-400"),children:[Ot.jsxs(Lr,{children:[Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsx("div",{className:bn("p-3 rounded-lg",m(e.rarity)),children:f(e.icon)}),Ot.jsx(Tn,{className:m(e.rarity),children:e.rarity})]}),Ot.jsx(zr,{className:"text-lg mt-3",children:e.title}),Ot.jsx(Ur,{children:e.description})]}),Ot.jsx(Mn,{children:Ot.jsxs("p",{className:"text-xs text-muted-foreground",children:["Earned ",Fo(new Date(e.earnedAt),"MMM d, yyyy")]})})]},e.id))})})]})]})})})}function mbe(){const[,e]=_n(),{data:t=[],isLoading:n}=za({queryKey:["/api/entrepreneurs"]}),{data:r=[],isLoading:s}=za({queryKey:["/api/businesses/featured"]}),{data:i=[]}=za({queryKey:["/api/premium-slots"]}),a=Array.from({length:9},(e,t)=>({id:`slot-${t+1}`,companyName:"Your Company Here",tagline:"Advertise to thousands of local customers",imageUrl:"",isPremium:!1})),o=i.length>0?i:a;return Ot.jsxs("div",{className:"min-h-screen marble-texture abstract-overlay-light relative overflow-hidden",children:[Ot.jsx(ho,{intensity:"medium"}),Ot.jsx(go,{}),Ot.jsxs("div",{className:"relative",style:{zIndex:10},children:[Ot.jsxs("section",{className:"py-20 relative overflow-hidden",children:[Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-[var(--fl-teal-lagoon)]/5 via-transparent to-[var(--fl-sunset-gold)]/5"}),Ot.jsxs("div",{className:"container mx-auto px-4 lg:px-8 text-center relative z-10",children:[Ot.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[Ot.jsx(An,{className:"h-8 w-8 text-[var(--fl-sunset-gold)]"}),Ot.jsx("h1",{className:"text-5xl md:text-6xl font-bold bg-gradient-to-r from-[var(--fl-teal-lagoon)] via-[var(--fl-sunset-gold)] to-[var(--fl-bronze)] bg-clip-text text-transparent",children:"Entrepreneurs & Businesses"}),Ot.jsx(An,{className:"h-8 w-8 text-[var(--fl-sunset-gold)]"})]}),Ot.jsx("p",{className:"text-xl text-muted-foreground max-w-3xl mx-auto leading-relaxed mb-8",children:"Discover Florida's most innovative entrepreneurs and thriving businesses. Connect, collaborate, and grow together in our local community."}),Ot.jsxs("div",{className:"flex flex-wrap gap-4 justify-center",children:[Ot.jsxs(Tn,{className:"bg-[var(--fl-teal-lagoon)] text-white px-6 py-2 text-sm",children:[Ot.jsx(On,{className:"h-4 w-4 mr-2"}),t.length||"50+"," Entrepreneurs"]}),Ot.jsxs(Tn,{className:"bg-[var(--fl-sunset-gold)] text-white px-6 py-2 text-sm",children:[Ot.jsx(Zr,{className:"h-4 w-4 mr-2"}),r.length||"100+"," Businesses"]}),Ot.jsxs(Tn,{className:"bg-[var(--fl-bronze)] text-white px-6 py-2 text-sm",children:[Ot.jsx(In,{className:"h-4 w-4 mr-2"}),"Premium Partners"]})]})]})]}),Ot.jsxs("section",{className:"py-12 container mx-auto px-4",children:[Ot.jsxs("div",{className:"text-center mb-8",children:[Ot.jsx("h2",{className:"text-3xl font-bold mb-2 bg-gradient-to-r from-[var(--fl-sunset-gold)] to-[var(--fl-bronze)] bg-clip-text text-transparent",children:"Premium Partners"}),Ot.jsx("p",{className:"text-muted-foreground",children:"Featured businesses reaching thousands of local customers"})]}),Ot.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 max-w-7xl mx-auto",children:o.map(e=>Ot.jsx(fo,{className:"group hover:shadow-[0_20px_45px_rgba(212,175,55,0.35)] transition-all duration-300 cursor-pointer overflow-hidden",children:Ot.jsx(Mn,{className:"p-0",children:Ot.jsx("div",{className:"relative w-full aspect-square bg-gradient-to-br from-[var(--fl-teal-lagoon)] via-[var(--fl-sunset-gold)] to-[var(--fl-bronze)]",children:Ot.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:Ot.jsxs("div",{className:"text-center p-6",children:[Ot.jsx("h3",{className:"text-3xl font-bold text-white mb-2",children:"YOUR COMPANY HERE"}),Ot.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[Ot.jsx("img",{src:"/florida-local/logo.svg",alt:"Florida Local",className:"h-12 w-auto"}),Ot.jsx("span",{className:"text-xl font-bold text-white",children:"THE FLORIDA LOCAL"})]})]})})})})},e.id))})]}),Ot.jsx("section",{className:"py-12 bg-gradient-to-b from-transparent via-[var(--fl-teal-lagoon)]/5 to-transparent",children:Ot.jsxs("div",{className:"container mx-auto px-4",children:[Ot.jsxs("div",{className:"flex items-center justify-between mb-8",children:[Ot.jsxs("div",{children:[Ot.jsx("h2",{className:"text-3xl font-bold mb-2 bg-gradient-to-r from-[var(--fl-teal-lagoon)] to-[var(--fl-bronze)] bg-clip-text text-transparent",children:"Featured Entrepreneurs"}),Ot.jsx("p",{className:"text-muted-foreground",children:"Meet Florida's innovative business leaders"})]}),Ot.jsxs(Ln,{variant:"outline",children:["View All",Ot.jsx(Ps,{className:"h-4 w-4 ml-2"})]})]}),Ot.jsx(eC,{className:"w-full whitespace-nowrap pb-4",children:Ot.jsx("div",{className:"flex space-x-6",children:n?Array.from({length:6}).map((e,t)=>Ot.jsx(Sn,{className:"inline-block w-[320px] animate-pulse",children:Ot.jsxs(Mn,{className:"p-6",children:[Ot.jsx("div",{className:"h-48 bg-muted rounded-lg mb-4"}),Ot.jsx("div",{className:"h-4 bg-muted rounded w-3/4 mb-2"}),Ot.jsx("div",{className:"h-3 bg-muted rounded w-1/2"})]})},t)):t.length>0?t.map(t=>Ot.jsx(fo,{className:"inline-block w-[320px] hover:shadow-[0_20px_45px_rgba(0,139,139,0.35)] transition-all duration-300 cursor-pointer group",onClick:()=>e(`/entrepreneur/${t.id}`),children:Ot.jsxs(Mn,{className:"p-6",children:[Ot.jsxs("div",{className:"relative mb-4",children:[Ot.jsxs(ou,{className:"h-24 w-24 mx-auto mb-4 border-4 border-[var(--fl-teal-lagoon)]/30 group-hover:scale-110 transition-transform",children:[Ot.jsx(lu,{src:t.imageUrl||`https://api.dicebear.com/7.x/avataaars/svg?seed=${t.id}`}),Ot.jsx(cu,{className:"text-2xl bg-gradient-to-br from-[var(--fl-teal-lagoon)] to-[var(--fl-bronze)] text-white",children:t.name.charAt(0)})]}),t.verified&&Ot.jsxs(Tn,{className:"absolute top-0 right-1/4 bg-blue-500 text-white",children:[Ot.jsx(sr,{className:"h-3 w-3 mr-1"}),"Verified"]})]}),Ot.jsx("h3",{className:"text-xl font-bold text-center mb-1",children:t.name}),Ot.jsx("p",{className:"text-sm text-muted-foreground text-center mb-2",children:t.title}),Ot.jsxs("div",{className:"flex items-center justify-center gap-1 text-sm text-muted-foreground mb-4",children:[Ot.jsx(Bn,{className:"h-3 w-3"}),t.location]}),Ot.jsxs("div",{className:"grid grid-cols-3 gap-4 pt-4 border-t",children:[Ot.jsxs("div",{className:"text-center",children:[Ot.jsx("p",{className:"text-lg font-bold text-[var(--fl-teal-lagoon)]",children:t.stats?.businesses||0}),Ot.jsx("p",{className:"text-xs text-muted-foreground",children:"Businesses"})]}),Ot.jsxs("div",{className:"text-center",children:[Ot.jsx("p",{className:"text-lg font-bold text-[var(--fl-sunset-gold)]",children:t.stats?.followers||0}),Ot.jsx("p",{className:"text-xs text-muted-foreground",children:"Followers"})]}),Ot.jsxs("div",{className:"text-center",children:[Ot.jsxs("p",{className:"text-lg font-bold text-[var(--fl-bronze)]",children:["$",t.stats?.revenue?(t.stats.revenue/1e3).toFixed(0)+"K":"0"]}),Ot.jsx("p",{className:"text-xs text-muted-foreground",children:"Revenue"})]})]})]})},t.id)):Array.from({length:8},(e,t)=>({id:`mock-${t+1}`,name:`Entrepreneur ${t+1}`,title:"Business Owner",location:"Florida",imageUrl:"",stats:{businesses:Math.floor(5*Math.random())+1,followers:Math.floor(1e3*Math.random())+100,revenue:Math.floor(5e5*Math.random())+5e4},verified:t%3==0})).map(e=>Ot.jsx(fo,{className:"inline-block w-[320px] hover:shadow-[0_20px_45px_rgba(0,139,139,0.35)] transition-all duration-300 cursor-pointer group",children:Ot.jsxs(Mn,{className:"p-6",children:[Ot.jsxs("div",{className:"relative mb-4",children:[Ot.jsxs(ou,{className:"h-24 w-24 mx-auto mb-4 border-4 border-[var(--fl-teal-lagoon)]/30 group-hover:scale-110 transition-transform",children:[Ot.jsx(lu,{src:`https://api.dicebear.com/7.x/avataaars/svg?seed=${e.id}`}),Ot.jsx(cu,{className:"text-2xl bg-gradient-to-br from-[var(--fl-teal-lagoon)] to-[var(--fl-bronze)] text-white",children:e.name.charAt(0)})]}),e.verified&&Ot.jsxs(Tn,{className:"absolute top-0 right-1/4 bg-blue-500 text-white",children:[Ot.jsx(sr,{className:"h-3 w-3 mr-1"}),"Verified"]})]}),Ot.jsx("h3",{className:"text-xl font-bold text-center mb-1",children:e.name}),Ot.jsx("p",{className:"text-sm text-muted-foreground text-center mb-2",children:e.title}),Ot.jsxs("div",{className:"flex items-center justify-center gap-1 text-sm text-muted-foreground mb-4",children:[Ot.jsx(Bn,{className:"h-3 w-3"}),e.location]}),Ot.jsxs("div",{className:"grid grid-cols-3 gap-4 pt-4 border-t",children:[Ot.jsxs("div",{className:"text-center",children:[Ot.jsx("p",{className:"text-lg font-bold text-[var(--fl-teal-lagoon)]",children:e.stats.businesses}),Ot.jsx("p",{className:"text-xs text-muted-foreground",children:"Businesses"})]}),Ot.jsxs("div",{className:"text-center",children:[Ot.jsx("p",{className:"text-lg font-bold text-[var(--fl-sunset-gold)]",children:e.stats.followers}),Ot.jsx("p",{className:"text-xs text-muted-foreground",children:"Followers"})]}),Ot.jsxs("div",{className:"text-center",children:[Ot.jsxs("p",{className:"text-lg font-bold text-[var(--fl-bronze)]",children:["$",(e.stats.revenue/1e3).toFixed(0),"K"]}),Ot.jsx("p",{className:"text-xs text-muted-foreground",children:"Revenue"})]})]})]})},e.id))})})]})}),Ot.jsx("section",{className:"py-12",children:Ot.jsxs("div",{className:"container mx-auto px-4",children:[Ot.jsxs("div",{className:"flex items-center justify-between mb-8",children:[Ot.jsxs("div",{children:[Ot.jsx("h2",{className:"text-3xl font-bold mb-2 bg-gradient-to-r from-[var(--fl-sunset-gold)] to-[var(--fl-bronze)] bg-clip-text text-transparent",children:"Featured Businesses"}),Ot.jsx("p",{className:"text-muted-foreground",children:"Discover Florida's top-rated local businesses"})]}),Ot.jsxs(Ln,{variant:"outline",children:["View All",Ot.jsx(Ps,{className:"h-4 w-4 ml-2"})]})]}),Ot.jsx(eC,{className:"w-full whitespace-nowrap pb-4",children:Ot.jsx("div",{className:"flex space-x-6",children:s?Array.from({length:6}).map((e,t)=>Ot.jsx(Sn,{className:"inline-block w-[320px] animate-pulse",children:Ot.jsxs(Mn,{className:"p-6",children:[Ot.jsx("div",{className:"h-48 bg-muted rounded-lg mb-4"}),Ot.jsx("div",{className:"h-4 bg-muted rounded w-3/4 mb-2"}),Ot.jsx("div",{className:"h-3 bg-muted rounded w-1/2"})]})},t)):r.length>0?r.map(t=>Ot.jsx(fo,{className:"inline-block w-[320px] hover:shadow-[0_20px_45px_rgba(212,175,55,0.35)] transition-all duration-300 cursor-pointer group",onClick:()=>e(`/business/${t.id}`),children:Ot.jsxs(Mn,{className:"p-6",children:[Ot.jsxs(ou,{className:"h-24 w-24 mx-auto mb-4 border-4 border-[var(--fl-sunset-gold)]/30 group-hover:scale-110 transition-transform",children:[Ot.jsx(lu,{src:t.logoUrl||void 0}),Ot.jsx(cu,{className:"text-2xl bg-gradient-to-br from-[var(--fl-sunset-gold)] to-[var(--fl-bronze)] text-white",children:t.name.charAt(0)})]}),Ot.jsx("h3",{className:"text-xl font-bold text-center mb-1",children:t.name}),Ot.jsx("p",{className:"text-sm text-muted-foreground text-center mb-2",children:t.category}),Ot.jsxs("div",{className:"flex items-center justify-center gap-1 mb-4",children:[Ot.jsx(In,{className:"h-4 w-4 text-yellow-500 fill-yellow-500"}),Ot.jsx("span",{className:"font-semibold",children:t.rating||5}),Ot.jsxs("span",{className:"text-muted-foreground text-sm",children:["(",t.reviewCount||0," reviews)"]})]}),Ot.jsxs("div",{className:"flex items-center justify-center gap-1 text-sm text-muted-foreground mb-4",children:[Ot.jsx(Bn,{className:"h-3 w-3"}),t.location]}),Ot.jsxs(Ln,{size:"sm",className:"w-full bg-gradient-to-r from-[var(--fl-sunset-gold)] to-[var(--fl-bronze)] hover:opacity-90 text-white",children:["View Business",Ot.jsx(Ps,{className:"h-4 w-4 ml-2"})]})]})},t.id)):Array.from({length:10},(e,t)=>({id:`mock-biz-${t+1}`,name:`Business ${t+1}`,category:["Restaurant","Retail","Services","Tech","Healthcare"][Math.floor(5*Math.random())],location:"Florida",rating:(2*Math.random()+3).toFixed(1),reviewCount:Math.floor(200*Math.random())+10})).map(e=>Ot.jsx(fo,{className:"inline-block w-[320px] hover:shadow-[0_20px_45px_rgba(212,175,55,0.35)] transition-all duration-300 cursor-pointer group",children:Ot.jsxs(Mn,{className:"p-6",children:[Ot.jsxs(ou,{className:"h-24 w-24 mx-auto mb-4 border-4 border-[var(--fl-sunset-gold)]/30 group-hover:scale-110 transition-transform",children:[Ot.jsx(lu,{src:`https://api.dicebear.com/7.x/shapes/svg?seed=${e.id}`}),Ot.jsx(cu,{className:"text-2xl bg-gradient-to-br from-[var(--fl-sunset-gold)] to-[var(--fl-bronze)] text-white",children:e.name.charAt(0)})]}),Ot.jsx("h3",{className:"text-xl font-bold text-center mb-1",children:e.name}),Ot.jsx("p",{className:"text-sm text-muted-foreground text-center mb-2",children:e.category}),Ot.jsxs("div",{className:"flex items-center justify-center gap-1 mb-4",children:[Ot.jsx(In,{className:"h-4 w-4 text-yellow-500 fill-yellow-500"}),Ot.jsx("span",{className:"font-semibold",children:e.rating}),Ot.jsxs("span",{className:"text-muted-foreground text-sm",children:["(",e.reviewCount," reviews)"]})]}),Ot.jsxs("div",{className:"flex items-center justify-center gap-1 text-sm text-muted-foreground mb-4",children:[Ot.jsx(Bn,{className:"h-3 w-3"}),e.location]}),Ot.jsxs(Ln,{size:"sm",className:"w-full bg-gradient-to-r from-[var(--fl-sunset-gold)] to-[var(--fl-bronze)] hover:opacity-90 text-white",children:["View Business",Ot.jsx(Ps,{className:"h-4 w-4 ml-2"})]})]})},e.id))})})]})})]})]})}function fbe(){const{user:e,isAuthenticated:t,isLoading:n}=Ua(),[,r]=_n(),[s,i]=hn.useState(!1),{data:a=[],isLoading:o}=za({queryKey:["/api/businesses/my"],enabled:t}),{data:l,isLoading:c}=za({queryKey:["/api/loyalty/account"],enabled:t});return za({queryKey:["/api/user/stats"],enabled:t}),hn.useEffect(()=>{n||(n||t?!t||o||c||i(!0):window.location.href="/api/login")},[n,t,o,c,r]),n?Ot.jsx("div",{className:"min-h-screen",children:Ot.jsx("div",{className:"container mx-auto px-4 py-20",children:Ot.jsx(Sn,{className:"max-w-2xl mx-auto",children:Ot.jsx(Mn,{className:"py-12",children:Ot.jsxs("div",{className:"flex flex-col items-center gap-4",children:[Ot.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"}),Ot.jsx("h2",{className:"text-xl font-semibold",children:"Verifying authentication..."}),Ot.jsx("p",{className:"text-gray-900",children:"Please wait while we verify your session"})]})})})})}):!s||o||c?Ot.jsx("div",{className:"min-h-screen",children:Ot.jsx("div",{className:"container mx-auto px-4 py-20",children:Ot.jsx(Sn,{className:"max-w-2xl mx-auto",children:Ot.jsx(Mn,{className:"py-12",children:Ot.jsxs("div",{className:"flex flex-col items-center gap-4",children:[Ot.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"}),Ot.jsx("h2",{className:"text-xl font-semibold",children:"Loading your profile..."}),Ot.jsx("p",{className:"text-gray-900",children:"Setting up your personalized dashboard"})]})})})})}):Ot.jsx("div",{className:"min-h-screen",children:Ot.jsxs("div",{className:"container mx-auto px-4 py-8",children:[Ot.jsx(Sn,{className:"mb-8",children:Ot.jsx(Mn,{className:"pt-8",children:Ot.jsxs("div",{className:"flex items-start gap-6",children:[Ot.jsxs("div",{className:"relative",children:[e?.profileImageUrl?Ot.jsx("img",{src:e.profileImageUrl,alt:e.firstName||"User",className:"w-24 h-24 rounded-full object-cover"}):Ot.jsx("div",{className:"w-24 h-24 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center",children:Ot.jsx(Ii,{className:"h-12 w-12 text-white"})}),e?.isAdmin&&Ot.jsx("div",{className:"absolute -top-2 -right-2 bg-yellow-500 rounded-full p-2",children:Ot.jsx(Wr,{className:"h-5 w-5 text-white"})})]}),Ot.jsxs("div",{className:"flex-1",children:[Ot.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[Ot.jsxs("h1",{className:"text-2xl font-bold",children:[e?.firstName," ",e?.lastName]}),e?.isAdmin&&Ot.jsxs(Tn,{variant:"secondary",className:"bg-yellow-100",children:[Ot.jsx(Wr,{className:"h-3 w-3 mr-1"}),"Admin"]}),a.length>0&&Ot.jsxs(Tn,{variant:"secondary",className:"bg-blue-100",children:[Ot.jsx(Zr,{className:"h-3 w-3 mr-1"}),"Business Owner"]})]}),Ot.jsx("p",{className:"text-gray-900 mb-4",children:e?.email}),Ot.jsxs("div",{className:"flex items-center gap-6 text-sm",children:[a.length>0&&Ot.jsxs("div",{className:"flex items-center gap-1",children:[Ot.jsx(Zr,{className:"h-4 w-4 text-blue-500"}),Ot.jsxs("span",{children:[a.length," Business",a.length>1?"es":""]})]}),l&&Ot.jsxs("div",{className:"flex items-center gap-1",children:[Ot.jsx(sr,{className:"h-4 w-4 text-yellow-500"}),Ot.jsxs("span",{children:[l.currentPoints||0," Points"]})]})]})]})]})})}),Ot.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[e?.isAdmin&&Ot.jsxs(Sn,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>r("/admin"),"data-testid":"card-admin-dashboard",children:[Ot.jsxs(Lr,{children:[Ot.jsxs(zr,{className:"flex items-center gap-2",children:[Ot.jsx(Rn,{className:"h-5 w-5 text-red-500"}),"Admin Dashboard"]}),Ot.jsx(Ur,{children:"Manage platform and users"})]}),Ot.jsx(Mn,{children:Ot.jsxs(Ln,{className:"w-full",variant:"outline",children:["Go to Admin Panel",Ot.jsx(Ps,{className:"ml-2 h-4 w-4"})]})})]}),a.length>0&&Ot.jsxs(Sn,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>r("/business-dashboard"),"data-testid":"card-business-dashboard",children:[Ot.jsxs(Lr,{children:[Ot.jsxs(zr,{className:"flex items-center gap-2",children:[Ot.jsx(Zr,{className:"h-5 w-5 text-blue-500"}),"Business Dashboard"]}),Ot.jsx(Ur,{children:"Manage your businesses"})]}),Ot.jsxs(Mn,{children:[Ot.jsxs("div",{className:"space-y-2 mb-4",children:[a.slice(0,2).map(e=>Ot.jsxs("div",{className:"text-sm",children:[" ",e.name]},e.id)),a.length>2&&Ot.jsxs("div",{className:"text-sm text-gray-900",children:["+",a.length-2," more"]})]}),Ot.jsxs(Ln,{className:"w-full",variant:"outline",children:["Manage Businesses",Ot.jsx(Ps,{className:"ml-2 h-4 w-4"})]})]})]}),0===a.length&&Ot.jsxs(Sn,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>r("/create-business"),"data-testid":"card-create-business",children:[Ot.jsxs(Lr,{children:[Ot.jsxs(zr,{className:"flex items-center gap-2",children:[Ot.jsx(fr,{className:"h-5 w-5 text-green-500"}),"Start Your Business"]}),Ot.jsx(Ur,{children:"Create your business profile"})]}),Ot.jsx(Mn,{children:Ot.jsxs(Ln,{className:"w-full",variant:"outline",children:["Create Business",Ot.jsx(Ps,{className:"ml-2 h-4 w-4"})]})})]}),l&&Ot.jsxs(Sn,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>r("/loyalty"),"data-testid":"card-loyalty",children:[Ot.jsxs(Lr,{children:[Ot.jsxs(zr,{className:"flex items-center gap-2",children:[Ot.jsx(sr,{className:"h-5 w-5 text-yellow-500"}),"Loyalty Program"]}),Ot.jsxs(Ur,{children:[l.tierName||"Bronze"," Member"]})]}),Ot.jsxs(Mn,{children:[Ot.jsxs("div",{className:"text-2xl font-bold mb-2",children:[l.currentPoints||0," Points"]}),Ot.jsxs(Ln,{className:"w-full",variant:"outline",children:["View Rewards",Ot.jsx(Ps,{className:"ml-2 h-4 w-4"})]})]})]}),Ot.jsxs(Sn,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>r("/marketplace"),"data-testid":"card-marketplace",children:[Ot.jsxs(Lr,{children:[Ot.jsxs(zr,{className:"flex items-center gap-2",children:[Ot.jsx(fr,{className:"h-5 w-5 text-purple-500"}),"Marketplace"]}),Ot.jsx(Ur,{children:"Browse products & services"})]}),Ot.jsx(Mn,{children:Ot.jsxs(Ln,{className:"w-full",variant:"outline",children:["Browse Marketplace",Ot.jsx(Ps,{className:"ml-2 h-4 w-4"})]})})]}),Ot.jsxs(Sn,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>r("/messages"),"data-testid":"card-messages",children:[Ot.jsxs(Lr,{children:[Ot.jsxs(zr,{className:"flex items-center gap-2",children:[Ot.jsx(Or,{className:"h-5 w-5 text-cyan-500"}),"Messages"]}),Ot.jsx(Ur,{children:"View your conversations"})]}),Ot.jsx(Mn,{children:Ot.jsxs(Ln,{className:"w-full",variant:"outline",children:["Open Messages",Ot.jsx(Ps,{className:"ml-2 h-4 w-4"})]})})]})]}),Ot.jsxs(Sn,{children:[Ot.jsx(Lr,{children:Ot.jsx(zr,{children:"Account Settings"})}),Ot.jsxs(Mn,{className:"space-y-2",children:[Ot.jsxs(Ln,{variant:"outline",className:"w-full justify-start",onClick:()=>r("/settings"),children:[Ot.jsx(yi,{className:"mr-2 h-4 w-4"}),"Account Settings"]}),Ot.jsxs(Ln,{variant:"outline",className:"w-full justify-start text-red-600 hover:text-red-700",onClick:()=>window.location.href="/api/logout",children:[Ot.jsx(aa,{className:"mr-2 h-4 w-4"}),"Sign Out"]})]})]})]})})}function gbe(){hn.useEffect(()=>(document.body.classList.add("has-video-bg"),()=>document.body.classList.remove("has-video-bg")),[]),_n();const e=new URLSearchParams(window.location.search),t=e.get("reason")||"unknown",n=e.get("debug");let r=null;if(n)try{r=JSON.parse(decodeURIComponent(n))}catch(a){}const s={auth_failed:{title:"Authentication Failed",description:"We encountered an error during the sign-in process.",whatHappened:"The authentication service was unable to verify your identity. This could be due to a temporary network issue or a problem with the authentication provider.",howToFix:["Click 'Try Again' below to retry the login","Check your internet connection","Try clearing your browser cookies and cache","If the problem persists, try a different browser"],canRetry:!0},no_user:{title:"User Not Found",description:"We couldn't find your account or create a new one.",whatHappened:"After successfully authenticating, we couldn't create or retrieve your user account. This might be due to a database connection issue.",howToFix:["Click 'Try Again' - we'll attempt to create your account again","Make sure you're using the same URL you started login from","Enable cookies in your browser (required for login)","Try accessing from the main URL: the-florida-local.replit.app"],canRetry:!0},session_failed:{title:"Session Error",description:"We couldn't establish your session.",whatHappened:"Your authentication was successful, but we couldn't create a secure session for you. This is usually a temporary issue.",howToFix:["Click 'Try Again' - session creation will be retried automatically","Clear your browser cookies for this site","Make sure third-party cookies are enabled","Try using an incognito/private browsing window"],canRetry:!0},network_error:{title:"Network Error",description:"Unable to connect to the authentication service.",whatHappened:"Your browser couldn't reach our servers. This might be due to your internet connection or a temporary server issue.",howToFix:["Check your internet connection","Click 'Try Again' in a few seconds","Try refreshing the page","If you're on VPN, try disconnecting it"],canRetry:!0},unknown:{title:"Login Error",description:"An unexpected error occurred during sign-in.",whatHappened:"Something went wrong that we didn't anticipate. Don't worry, your data is safe.",howToFix:["Click 'Try Again' below","Clear your browser cache and cookies","Try a different browser","Contact support if the problem continues"],canRetry:!0}},i=s[t]||s.unknown;return Ot.jsxs("div",{className:"min-h-screen flex items-center justify-center relative",style:{position:"relative",zIndex:2,background:"transparent",backgroundColor:"transparent"},children:[Ot.jsx(Gr,{youtubeUrl:"https://youtu.be/I0qV37ezBJc",overlayOpacity:.3}),Ot.jsx("div",{className:"max-w-md w-full mx-4 relative",style:{zIndex:20},children:Ot.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 border border-gray-200",children:[Ot.jsx("div",{className:"flex justify-center mb-6",children:Ot.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center",children:Ot.jsx(ms,{className:"w-8 h-8 text-red-600"})})}),Ot.jsx("h1",{className:"text-2xl font-bold text-center text-gray-900 mb-2",children:i.title}),Ot.jsx("p",{className:"text-center text-gray-600 mb-6",children:i.description}),Ot.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 mb-4",children:[Ot.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-2",children:"What happened?"}),Ot.jsx("p",{className:"text-sm text-gray-700",children:i.whatHappened})]}),Ot.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[Ot.jsx("h3",{className:"text-sm font-semibold text-blue-900 mb-2",children:"How to fix this:"}),Ot.jsx("ol",{className:"list-decimal list-inside space-y-1 text-sm text-blue-800",children:i.howToFix.map((e,t)=>Ot.jsx("li",{children:e},t))})]}),Ot.jsxs("div",{className:"space-y-3",children:[Ot.jsxs(Ln,{onClick:()=>window.location.href="/api/login",className:"w-full bg-gradient-to-r from-[#008B8B] to-[#20B2AA] hover:from-[#006B6B] hover:to-[#008B8B]",children:[Ot.jsx(Fs,{className:"w-4 h-4 mr-2"}),"Try Again"]}),Ot.jsx(Yn,{href:"/",children:Ot.jsxs(Ln,{variant:"outline",className:"w-full",children:[Ot.jsx(bs,{className:"w-4 h-4 mr-2"}),"Go Home"]})})]}),Ot.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[Ot.jsxs("p",{className:"text-xs text-gray-500 text-center",children:["Error code: ",Ot.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded",children:t})]}),r&&Ot.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[Ot.jsx("p",{className:"text-xs font-semibold text-gray-700 mb-2",children:"Debug Information:"}),Ot.jsx("pre",{className:"text-xs text-gray-600 whitespace-pre-wrap break-all",children:JSON.stringify(r,null,2)})]})]})]})})]})}const xbe=Eo({id:Ao(),type:Do(["trigger","condition","action","delay","split"]),config:vl(To()),nextSteps:Ro(Ao()).optional()}),vbe=Eo({name:Ao().min(1,"Workflow name is required"),description:Ao().optional(),goal:Ao().optional(),trigger:Eo({type:Do(["form_submission","email_open","email_click","purchase","abandoned_cart","segment_entry","date_based","api_webhook"]),config:vl(To())}),steps:Ro(xbe),isActive:ko().default(!1)});function ybe(){const{toast:e}=Nn(),[t,n]=hn.useState([]),[r,s]=hn.useState(null),[i,a]=hn.useState([]),[o,l]=hn.useState(!1),[c,d]=hn.useState(null),[u,h]=hn.useState("builder"),{register:p,handleSubmit:m,formState:{errors:f,isSubmitting:g},setValue:x,watch:v,reset:y}=pn({resolver:Rr(vbe),defaultValues:{name:"",description:"",goal:"",trigger:{type:"form_submission",config:{}},steps:[],isActive:!1}});hn.useEffect(()=>{b()},[]);const b=async()=>{try{const e=await fetch("/api/marketing/workflows",{credentials:"include"});if(!e.ok)throw new Error("Failed to load workflows");const t=await e.json();n(t.workflows||[])}catch(t){e({title:"Error",description:"Failed to load workflows",variant:"destructive"})}},w=e=>{switch(e){case"trigger":default:return Ot.jsx(Pn,{className:"h-4 w-4"});case"condition":return Ot.jsx(Zi,{className:"h-4 w-4"});case"action":return Ot.jsx(Jr,{className:"h-4 w-4"});case"delay":return Ot.jsx(xr,{className:"h-4 w-4"});case"split":return Ot.jsx(Os,{className:"h-4 w-4"})}},j=e=>({trigger:"bg-purple-500",condition:"bg-blue-500",action:"bg-green-500",delay:"bg-yellow-500",split:"bg-orange-500"}[e]);return Ot.jsxs("div",{className:"space-y-6",children:[Ot.jsx("div",{className:"flex items-center justify-between",children:Ot.jsxs("div",{children:[Ot.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Workflow Builder"}),Ot.jsx("p",{className:"text-muted-foreground",children:"Create automated marketing workflows with AI assistance"})]})}),Ot.jsxs(qs,{value:u,onValueChange:h,className:"space-y-6",children:[Ot.jsxs(Xs,{className:"grid w-full max-w-md grid-cols-3",children:[Ot.jsx(Ks,{value:"builder",children:"Builder"}),Ot.jsx(Ks,{value:"ai-assist",children:"AI Assist"}),Ot.jsx(Ks,{value:"workflows",children:"My Workflows"})]}),Ot.jsx(Ys,{value:"builder",className:"space-y-6",children:Ot.jsxs("form",{onSubmit:m(async t=>{try{const n={...t,steps:i},o=r?`/api/marketing/workflows/${r.id}`:"/api/marketing/workflows",l=r?"PUT":"POST",c=await fetch(o,{method:l,headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(n)});if(!c.ok){const e=await c.json();throw new Error(e.message||"Failed to save workflow")}await c.json();e({title:"Success",description:r?"Workflow updated successfully":"Workflow created successfully"}),await b(),y(),a([]),s(null)}catch(n){e({title:"Error",description:n instanceof Error?n.message:"Failed to save workflow",variant:"destructive"})}}),className:"space-y-6",children:[Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{children:[Ot.jsx(zr,{children:"Workflow Details"}),Ot.jsx(Ur,{children:"Define the basic information for your workflow"})]}),Ot.jsxs(Mn,{className:"space-y-4",children:[Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsx(ws,{htmlFor:"name",children:"Workflow Name"}),Ot.jsx(zn,{id:"name",placeholder:"e.g., Welcome Series, Abandoned Cart Recovery",...p("name")}),f.name&&Ot.jsx("p",{className:"text-sm text-destructive",children:f.name.message})]}),Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsx(ws,{htmlFor:"description",children:"Description (Optional)"}),Ot.jsx(Tr,{id:"description",placeholder:"Describe the purpose and audience for this workflow",...p("description")})]}),Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsx(ws,{htmlFor:"goal",children:"Workflow Goal (Optional)"}),Ot.jsx(zn,{id:"goal",placeholder:"e.g., Convert leads, Reduce churn, Increase engagement",...p("goal")}),Ot.jsx("p",{className:"text-xs text-muted-foreground",children:"Used by AI to generate optimal workflow suggestions"})]}),Ot.jsx(rs,{}),Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsx(ws,{htmlFor:"triggerType",children:"Trigger Type"}),Ot.jsxs(Un,{value:v("trigger.type"),onValueChange:e=>x("trigger.type",e),children:[Ot.jsx(Vn,{children:Ot.jsx(Hn,{})}),Ot.jsxs(Wn,{children:[Ot.jsx($n,{value:"form_submission",children:"Form Submission"}),Ot.jsx($n,{value:"email_open",children:"Email Open"}),Ot.jsx($n,{value:"email_click",children:"Email Click"}),Ot.jsx($n,{value:"purchase",children:"Purchase"}),Ot.jsx($n,{value:"abandoned_cart",children:"Abandoned Cart"}),Ot.jsx($n,{value:"segment_entry",children:"Segment Entry"}),Ot.jsx($n,{value:"date_based",children:"Date Based"}),Ot.jsx($n,{value:"api_webhook",children:"API Webhook"})]})]})]})]})]}),Ot.jsxs(Sn,{children:[Ot.jsx(Lr,{children:Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{children:[Ot.jsx(zr,{children:"Workflow Steps"}),Ot.jsx(Ur,{children:"Build your automation sequence step by step"})]}),Ot.jsx("div",{className:"flex gap-2",children:Ot.jsxs(Un,{onValueChange:e=>(e=>{const t={id:`step_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,type:e,config:{},nextSteps:[]};a([...i,t])})(e),children:[Ot.jsxs(Vn,{className:"w-[180px]",children:[Ot.jsx(wr,{className:"mr-2 h-4 w-4"}),Ot.jsx(Hn,{placeholder:"Add Step"})]}),Ot.jsxs(Wn,{children:[Ot.jsx($n,{value:"action",children:"Action"}),Ot.jsx($n,{value:"condition",children:"Condition"}),Ot.jsx($n,{value:"delay",children:"Delay"}),Ot.jsx($n,{value:"split",children:"Split Test"})]})]})})]})}),Ot.jsx(Mn,{children:0===i.length?Ot.jsxs(dR,{children:[Ot.jsx(Cn,{className:"h-4 w-4"}),Ot.jsx(hR,{children:'No steps added yet. Click "Add Step" to start building your workflow, or use AI Assist to generate a complete workflow automatically.'})]}):Ot.jsx("div",{className:"space-y-4",children:Ot.jsx(jo,{mode:"popLayout",children:i.map((e,t)=>{return Ot.jsxs(wo.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,x:-100},className:"relative",children:[Ot.jsxs(Sn,{className:"overflow-hidden border-l-4",style:{borderLeftColor:j(e.type).replace("bg-","rgb(var(--")},children:[Ot.jsx(Lr,{className:"pb-3",children:Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsx("div",{className:`p-2 rounded-lg ${j(e.type)} text-white`,children:w(e.type)}),Ot.jsxs("div",{children:[Ot.jsxs("div",{className:"font-semibold",children:["Step ",t+1,": ",(n=e.type,{trigger:"Trigger",condition:"Condition",action:"Action",delay:"Delay",split:"Split Test"}[n])]}),Ot.jsx("div",{className:"text-xs text-muted-foreground",children:"Configure this step's behavior"})]})]}),Ot.jsxs("div",{className:"flex gap-2",children:[Ot.jsx(Ln,{type:"button",variant:"ghost",size:"icon",onClick:()=>(e=>{const t=i.find(t=>t.id===e);if(!t)return;const n={...t,id:`step_${Date.now()}_${Math.random().toString(36).substr(2,9)}`},r=i.findIndex(t=>t.id===e),s=[...i];s.splice(r+1,0,n),a(s)})(e.id),children:Ot.jsx(ni,{className:"h-4 w-4"})}),Ot.jsx(Ln,{type:"button",variant:"ghost",size:"icon",onClick:()=>{return t=e.id,void a(i.filter(e=>e.id!==t));var t},children:Ot.jsx(vs,{className:"h-4 w-4"})})]})]})}),Ot.jsx(Mn,{children:Ot.jsx("div",{className:"text-sm text-muted-foreground",children:"Step configuration panel (implementation details vary by step type)"})})]}),t<i.length-1&&Ot.jsx("div",{className:"flex justify-center py-2",children:Ot.jsx(oa,{className:"h-6 w-6 text-muted-foreground"})})]},e.id);var n})})})})]}),Ot.jsxs("div",{className:"flex justify-end gap-3",children:[Ot.jsx(Ln,{type:"button",variant:"outline",onClick:()=>{y(),a([]),s(null)},children:"Cancel"}),Ot.jsx(Ln,{type:"submit",disabled:g,children:g?Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(Fr,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(ys,{className:"mr-2 h-4 w-4"}),r?"Update Workflow":"Create Workflow"]})})]})]})}),Ot.jsx(Ys,{value:"ai-assist",className:"space-y-6",children:Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{children:[Ot.jsxs(zr,{className:"flex items-center gap-2",children:[Ot.jsx(An,{className:"h-5 w-5 text-purple-500"}),"AI Workflow Generator"]}),Ot.jsx(Ur,{children:"Let AI create an optimized workflow based on your goals"})]}),Ot.jsxs(Mn,{className:"space-y-4",children:[Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsx(ws,{children:"Workflow Goal"}),Ot.jsx(zn,{value:v("goal")||"",onChange:e=>x("goal",e.target.value),placeholder:"e.g., Convert free trial users to paid customers"})]}),Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsx(ws,{children:"Target Audience (Optional)"}),Ot.jsx(Tr,{value:v("description")||"",onChange:e=>x("description",e.target.value),placeholder:"Describe your target audience"})]}),Ot.jsx(Ln,{onClick:async()=>{const t=v("goal"),n=v("trigger.type");if(t){l(!0),d(null);try{const r=await fetch("/api/ai/marketing/workflow/generate",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({goal:t,trigger:n,audience:v("description"),campaignType:"nurture"})});if(!r.ok){const e=await r.json();throw new Error(e.message||"Failed to generate workflow")}const{taskId:s}=await r.json(),i=async()=>{const t=await fetch(`/api/ai/tasks/${s}`,{credentials:"include"});if(!t.ok)throw new Error("Failed to check task status");const n=await t.json();if("completed"===n.status)d(n.result),l(!1),e({title:"AI Workflow Generated",description:"Review the AI-generated workflow and apply it to your builder"});else{if("failed"===n.status)throw new Error(n.error||"AI generation failed");setTimeout(i,2e3)}};setTimeout(i,2e3)}catch(r){l(!1),e({title:"AI Generation Failed",description:r instanceof Error?r.message:"Failed to generate workflow",variant:"destructive"})}}else e({title:"Missing Information",description:"Please provide a workflow goal to generate AI suggestions",variant:"destructive"})},disabled:o||!v("goal"),className:"w-full",children:o?Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(Fr,{className:"mr-2 h-4 w-4 animate-spin"}),"Generating AI Workflow..."]}):Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(An,{className:"mr-2 h-4 w-4"}),"Generate AI Workflow"]})}),c&&Ot.jsxs(wo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-4 pt-4",children:[Ot.jsx(rs,{}),Ot.jsxs("div",{className:"space-y-4",children:[Ot.jsxs("div",{children:[Ot.jsxs("h3",{className:"font-semibold text-lg flex items-center gap-2",children:[Ot.jsx(us,{className:"h-5 w-5 text-green-500"}),c.workflow.name]}),Ot.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:c.workflow.description})]}),Ot.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsx(ws,{className:"text-xs text-muted-foreground",children:"Estimated Conversion Lift"}),Ot.jsx("div",{className:"text-2xl font-bold text-green-600",children:c.estimatedConversionLift})]}),Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsx(ws,{className:"text-xs text-muted-foreground",children:"Workflow Steps"}),Ot.jsx("div",{className:"text-2xl font-bold",children:c.workflow.steps.length})]})]}),Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsx(ws,{className:"text-xs text-muted-foreground",children:"AI Reasoning"}),Ot.jsx("p",{className:"text-sm",children:c.reasoning})]}),c.bestPractices.length>0&&Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsx(ws,{className:"text-xs text-muted-foreground",children:"Best Practices"}),Ot.jsx("ul",{className:"space-y-1",children:c.bestPractices.map((e,t)=>Ot.jsxs("li",{className:"text-sm flex items-start gap-2",children:[Ot.jsx(us,{className:"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0"}),Ot.jsx("span",{children:e})]},t))})]}),Ot.jsxs(Ln,{onClick:()=>{c&&(x("name",c.workflow.name),x("description",c.workflow.description),x("trigger",c.workflow.trigger),a(c.workflow.steps),e({title:"AI Workflow Applied",description:"You can now customize the workflow as needed"}),h("builder"))},className:"w-full",children:[Ot.jsx(us,{className:"mr-2 h-4 w-4"}),"Apply This Workflow"]})]})]})]})]})}),Ot.jsx(Ys,{value:"workflows",className:"space-y-6",children:0===t.length?Ot.jsx(Sn,{children:Ot.jsxs(Mn,{className:"flex flex-col items-center justify-center py-16",children:[Ot.jsx(Zi,{className:"h-16 w-16 text-muted-foreground mb-4"}),Ot.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No Workflows Yet"}),Ot.jsx("p",{className:"text-muted-foreground text-center mb-6",children:"Create your first automated workflow to start engaging with customers"}),Ot.jsxs(Ln,{onClick:()=>h("builder"),children:[Ot.jsx(wr,{className:"mr-2 h-4 w-4"}),"Create Workflow"]})]})}):Ot.jsx("div",{className:"grid gap-4",children:t.map(t=>Ot.jsxs(Sn,{children:[Ot.jsx(Lr,{children:Ot.jsxs("div",{className:"flex items-start justify-between",children:[Ot.jsxs("div",{children:[Ot.jsxs(zr,{className:"flex items-center gap-2",children:[t.name,Ot.jsx(Tn,{variant:t.isActive?"default":"secondary",children:t.isActive?"Active":"Paused"})]}),t.description&&Ot.jsx(Ur,{className:"mt-2",children:t.description})]}),Ot.jsxs("div",{className:"flex gap-2",children:[Ot.jsx(Ln,{variant:"outline",size:"icon",onClick:()=>(async(t,n)=>{try{if(!(await fetch(`/api/marketing/workflows/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({isActive:!n})})).ok)throw new Error("Failed to toggle workflow");await b(),e({title:"Success",description:"Workflow "+(n?"paused":"activated")})}catch(r){e({title:"Error",description:"Failed to update workflow status",variant:"destructive"})}})(t.id,t.isActive),children:t.isActive?Ot.jsx(la,{className:"h-4 w-4"}):Ot.jsx(Zs,{className:"h-4 w-4"})}),Ot.jsx(Ln,{variant:"outline",size:"icon",onClick:()=>(async t=>{if(confirm("Are you sure you want to delete this workflow?"))try{if(!(await fetch(`/api/marketing/workflows/${t}`,{method:"DELETE",credentials:"include"})).ok)throw new Error("Failed to delete workflow");await b(),e({title:"Success",description:"Workflow deleted successfully"})}catch(n){e({title:"Error",description:"Failed to delete workflow",variant:"destructive"})}})(t.id),children:Ot.jsx(vs,{className:"h-4 w-4"})})]})]})}),Ot.jsx(Mn,{children:Ot.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[Ot.jsxs("div",{children:[Ot.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Trigger"}),Ot.jsx(Tn,{variant:"outline",children:t.trigger?.type?.replace("_"," ")})]}),Ot.jsxs("div",{children:[Ot.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Steps"}),Ot.jsxs("div",{className:"font-semibold",children:[t.steps?.length||0," steps"]})]}),Ot.jsxs("div",{children:[Ot.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Enrolled"}),Ot.jsxs("div",{className:"font-semibold",children:[t.enrolledCount||0," contacts"]})]})]})})]},t.id))})})]})]})}const bbe=Eo({id:Ao(),type:Do(["text","email","phone","textarea","select","checkbox","radio","date","number"]),label:Ao().min(1,"Label is required"),placeholder:Ao().optional(),required:ko().default(!1),options:Ro(Ao()).optional(),validation:vl(To()).optional()}),wbe=Eo({name:Ao().min(1,"Form name is required"),description:Ao().optional(),fields:Ro(bbe),successMessage:Ao().optional(),redirectUrl:Ao().optional(),isActive:ko().default(!0)});function jbe(){const{toast:e}=Nn(),[t,n]=hn.useState([]),[r,s]=hn.useState(null),[i,a]=hn.useState(!1),[o,l]=hn.useState(null),[c,d]=hn.useState("builder"),[u,h]=hn.useState(!1),{register:p,control:m,handleSubmit:f,formState:{errors:g,isSubmitting:x},setValue:v,watch:y,reset:b}=pn({resolver:Rr(wbe),defaultValues:{name:"",description:"",fields:[],successMessage:"Thank you for your submission!",redirectUrl:"",isActive:!0}}),{fields:w,append:j,remove:N}=xn({control:m,name:"fields"});hn.useEffect(()=>{_()},[]);const _=async()=>{try{const e=await fetch("/api/marketing/lead-forms",{credentials:"include"});if(!e.ok)throw new Error("Failed to load forms");const t=await e.json();n(t.forms||[])}catch(t){e({title:"Error",description:"Failed to load forms",variant:"destructive"})}},S=e=>{switch(e){case"email":return Ot.jsx(Jr,{className:"h-4 w-4"});case"phone":return Ot.jsx(Qr,{className:"h-4 w-4"});case"date":return Ot.jsx(Qn,{className:"h-4 w-4"});default:return Ot.jsx(cs,{className:"h-4 w-4"})}};return Ot.jsxs("div",{className:"space-y-6",children:[Ot.jsx("div",{className:"flex items-center justify-between",children:Ot.jsxs("div",{children:[Ot.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Lead Form Builder"}),Ot.jsx("p",{className:"text-muted-foreground",children:"Create high-converting lead capture forms with AI optimization"})]})}),Ot.jsxs(qs,{value:c,onValueChange:d,className:"space-y-6",children:[Ot.jsxs(Xs,{className:"grid w-full max-w-md grid-cols-3",children:[Ot.jsx(Ks,{value:"builder",children:"Builder"}),Ot.jsx(Ks,{value:"ai-optimize",children:"AI Optimize"}),Ot.jsx(Ks,{value:"forms",children:"My Forms"})]}),Ot.jsx(Ys,{value:"builder",className:"space-y-6",children:Ot.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[Ot.jsx("div",{className:"space-y-6",children:Ot.jsxs("form",{onSubmit:f(async t=>{try{const n=r?`/api/marketing/lead-forms/${r.id}`:"/api/marketing/lead-forms",i=r?"PUT":"POST",a=await fetch(n,{method:i,headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});if(!a.ok){const e=await a.json();throw new Error(e.message||"Failed to save form")}e({title:"Success",description:r?"Form updated successfully":"Form created successfully"}),await _(),b(),s(null)}catch(n){e({title:"Error",description:n instanceof Error?n.message:"Failed to save form",variant:"destructive"})}}),className:"space-y-6",children:[Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{children:[Ot.jsx(zr,{children:"Form Details"}),Ot.jsx(Ur,{children:"Basic information about your form"})]}),Ot.jsxs(Mn,{className:"space-y-4",children:[Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsx(ws,{htmlFor:"name",children:"Form Name"}),Ot.jsx(zn,{id:"name",placeholder:"e.g., Contact Form, Newsletter Signup",...p("name")}),g.name&&Ot.jsx("p",{className:"text-sm text-destructive",children:g.name.message})]}),Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsx(ws,{htmlFor:"description",children:"Description (Optional)"}),Ot.jsx(Tr,{id:"description",placeholder:"Describe the purpose of this form",...p("description")})]}),Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsx(ws,{htmlFor:"successMessage",children:"Success Message"}),Ot.jsx(zn,{id:"successMessage",placeholder:"Thank you for your submission!",...p("successMessage")})]}),Ot.jsxs("div",{className:"flex items-center space-x-2",children:[Ot.jsx($X,{checked:y("isActive"),onCheckedChange:e=>v("isActive",e)}),Ot.jsx(ws,{className:"font-normal",children:"Form is active"})]})]})]}),Ot.jsxs(Sn,{children:[Ot.jsx(Lr,{children:Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{children:[Ot.jsx(zr,{children:"Form Fields"}),Ot.jsx(Ur,{children:"Add and configure form fields"})]}),Ot.jsxs(Un,{onValueChange:e=>(e=>{const t={id:`field_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,type:e,label:`New ${e} field`,placeholder:"",required:!1,options:"select"===e||"radio"===e?["Option 1","Option 2"]:void 0};j(t)})(e),children:[Ot.jsxs(Vn,{className:"w-[180px]",children:[Ot.jsx(wr,{className:"mr-2 h-4 w-4"}),Ot.jsx(Hn,{placeholder:"Add Field"})]}),Ot.jsxs(Wn,{children:[Ot.jsx($n,{value:"text",children:"Text"}),Ot.jsx($n,{value:"email",children:"Email"}),Ot.jsx($n,{value:"phone",children:"Phone"}),Ot.jsx($n,{value:"textarea",children:"Text Area"}),Ot.jsx($n,{value:"select",children:"Dropdown"}),Ot.jsx($n,{value:"checkbox",children:"Checkbox"}),Ot.jsx($n,{value:"radio",children:"Radio Buttons"}),Ot.jsx($n,{value:"date",children:"Date"}),Ot.jsx($n,{value:"number",children:"Number"})]})]})]})}),Ot.jsx(Mn,{children:0===w.length?Ot.jsxs(dR,{children:[Ot.jsx(Cn,{className:"h-4 w-4"}),Ot.jsx(hR,{children:'No fields added yet. Click "Add Field" to start building your form.'})]}):Ot.jsx("div",{className:"space-y-4",children:Ot.jsx(jo,{mode:"popLayout",children:w.map((e,t)=>Ot.jsx(wo.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,x:-100},children:Ot.jsxs(Sn,{children:[Ot.jsx(Lr,{className:"pb-3",children:Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx(ca,{className:"h-4 w-4 text-muted-foreground cursor-move"}),Ot.jsx("div",{className:"p-2 rounded bg-primary/10",children:S(e.type)}),Ot.jsxs("div",{children:[Ot.jsxs("div",{className:"font-semibold capitalize",children:[e.type," Field"]}),Ot.jsx("div",{className:"text-xs text-muted-foreground",children:e.required?"Required":"Optional"})]})]}),Ot.jsx(Ln,{type:"button",variant:"ghost",size:"icon",onClick:()=>N(t),children:Ot.jsx(vs,{className:"h-4 w-4"})})]})}),Ot.jsxs(Mn,{className:"space-y-3",children:[Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsx(ws,{children:"Field Label"}),Ot.jsx(zn,{...p(`fields.${t}.label`),placeholder:"Enter field label"})]}),Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsx(ws,{children:"Placeholder (Optional)"}),Ot.jsx(zn,{...p(`fields.${t}.placeholder`),placeholder:"Enter placeholder text"})]}),("select"===e.type||"radio"===e.type)&&Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsx(ws,{children:"Options (comma-separated)"}),Ot.jsx(zn,{value:e.options?.join(", ")||"",onChange:e=>{const n=e.target.value.split(",").map(e=>e.trim()).filter(Boolean);v(`fields.${t}.options`,n)},placeholder:"Option 1, Option 2, Option 3"})]}),Ot.jsxs("div",{className:"flex items-center space-x-2",children:[Ot.jsx($X,{checked:e.required,onCheckedChange:e=>v(`fields.${t}.required`,e)}),Ot.jsx(ws,{className:"font-normal",children:"Required field"})]})]})]})},e.id))})})})]}),Ot.jsxs("div",{className:"flex justify-end gap-3",children:[Ot.jsx(Ln,{type:"button",variant:"outline",onClick:()=>{b(),s(null)},children:"Cancel"}),Ot.jsxs(Ln,{type:"button",variant:"outline",onClick:()=>h(!u),children:[Ot.jsx($r,{className:"mr-2 h-4 w-4"}),u?"Edit":"Preview"]}),Ot.jsx(Ln,{type:"submit",disabled:x,children:x?Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(Fr,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(ys,{className:"mr-2 h-4 w-4"}),r?"Update Form":"Create Form"]})})]})]})}),Ot.jsx("div",{className:"lg:sticky lg:top-6 lg:h-fit",children:Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{children:[Ot.jsxs(zr,{className:"flex items-center gap-2",children:[Ot.jsx($r,{className:"h-5 w-5"}),"Live Preview"]}),Ot.jsx(Ur,{children:"See how your form will look to users"})]}),Ot.jsx(Mn,{children:(()=>{const e=y("fields");return Ot.jsxs("div",{className:"space-y-4 max-w-2xl mx-auto p-6 bg-background border rounded-lg",children:[Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsx("h3",{className:"text-2xl font-bold",children:y("name")||"Form Preview"}),y("description")&&Ot.jsx("p",{className:"text-muted-foreground",children:y("description")})]}),Ot.jsx(rs,{}),Ot.jsx("div",{className:"space-y-4",children:e.map(e=>Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsxs(ws,{children:[e.label,e.required&&Ot.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),"textarea"===e.type?Ot.jsx(Tr,{placeholder:e.placeholder}):"select"===e.type?Ot.jsxs(Un,{children:[Ot.jsx(Vn,{children:Ot.jsx(Hn,{placeholder:e.placeholder||"Select an option"})}),Ot.jsx(Wn,{children:e.options?.map((e,t)=>Ot.jsx($n,{value:e,children:e},t))})]}):"checkbox"===e.type?Ot.jsxs("div",{className:"flex items-center space-x-2",children:[Ot.jsx("input",{type:"checkbox",className:"rounded"}),Ot.jsx(ws,{className:"font-normal",children:e.placeholder||e.label})]}):Ot.jsx(zn,{type:e.type,placeholder:e.placeholder})]},e.id))}),Ot.jsx(Ln,{className:"w-full",children:"Submit"})]})})()})]})})]})}),Ot.jsx(Ys,{value:"ai-optimize",className:"space-y-6",children:Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{children:[Ot.jsxs(zr,{className:"flex items-center gap-2",children:[Ot.jsx(An,{className:"h-5 w-5 text-purple-500"}),"AI Form Optimizer"]}),Ot.jsx(Ur,{children:"Optimize your form for maximum conversions using AI"})]}),Ot.jsxs(Mn,{className:"space-y-4",children:[Ot.jsxs(dR,{children:[Ot.jsx(Us,{className:"h-4 w-4"}),Ot.jsx(hR,{children:"AI will analyze your form fields and suggest improvements to increase conversion rates by reducing friction and improving user experience."})]}),Ot.jsx(Ln,{onClick:async()=>{const t=y("fields");if(t&&0!==t.length){a(!0),l(null);try{const n=await fetch("/api/ai/marketing/form/optimize",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({formId:r?.id,fields:t,conversionRate:r?.conversionRate,dropOffPoint:r?.dropOffPoint})});if(!n.ok){const e=await n.json();throw new Error(e.message||"Failed to optimize form")}const{taskId:s}=await n.json(),i=async()=>{const t=await fetch(`/api/ai/tasks/${s}`,{credentials:"include"});if(!t.ok)throw new Error("Failed to check task status");const n=await t.json();if("completed"===n.status)l(n.result),a(!1),e({title:"AI Optimization Complete",description:"Review the AI recommendations for your form"});else{if("failed"===n.status)throw new Error(n.error||"AI optimization failed");setTimeout(i,2e3)}};setTimeout(i,2e3)}catch(n){a(!1),e({title:"AI Optimization Failed",description:n instanceof Error?n.message:"Failed to optimize form",variant:"destructive"})}}else e({title:"No Fields",description:"Add some fields to your form before optimizing",variant:"destructive"})},disabled:i||0===w.length,className:"w-full",children:i?Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(Fr,{className:"mr-2 h-4 w-4 animate-spin"}),"Analyzing Form..."]}):Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(An,{className:"mr-2 h-4 w-4"}),"Optimize with AI"]})}),o&&Ot.jsxs(wo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-4 pt-4",children:[Ot.jsx(rs,{}),Ot.jsxs("div",{className:"space-y-4",children:[Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{children:[Ot.jsxs("h3",{className:"font-semibold text-lg flex items-center gap-2",children:[Ot.jsx(us,{className:"h-5 w-5 text-green-500"}),"Optimization Complete"]}),Ot.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Estimated conversion rate improvement"})]}),Ot.jsxs("div",{className:"text-3xl font-bold text-green-600 flex items-center gap-2",children:[Ot.jsx(Dn,{className:"h-6 w-6"}),o.conversionRateEstimate]})]}),Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsx(ws,{className:"text-xs text-muted-foreground",children:"AI Analysis"}),Ot.jsx("p",{className:"text-sm",children:o.reasoning})]}),o.recommendations.length>0&&Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsxs(ws,{className:"text-xs text-muted-foreground",children:["Recommendations (",o.recommendations.length,")"]}),Ot.jsx("div",{className:"space-y-2",children:o.recommendations.map((e,t)=>Ot.jsx(dR,{children:Ot.jsxs("div",{className:"flex items-start gap-3",children:[Ot.jsxs(Tn,{variant:"high"===e.impact?"default":"medium"===e.impact?"secondary":"outline",className:"mt-0.5",children:[e.impact," impact"]}),Ot.jsxs("div",{className:"flex-1",children:[Ot.jsxs("div",{className:"font-semibold text-sm capitalize",children:[e.type," - ",e.field]}),Ot.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:e.suggestion})]})]})},t))})]}),o.bestPractices.length>0&&Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsx(ws,{className:"text-xs text-muted-foreground",children:"Best Practices Applied"}),Ot.jsx("ul",{className:"space-y-1",children:o.bestPractices.map((e,t)=>Ot.jsxs("li",{className:"text-sm flex items-start gap-2",children:[Ot.jsx(us,{className:"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0"}),Ot.jsx("span",{children:e})]},t))})]}),Ot.jsxs(Ln,{onClick:()=>{o&&(v("fields",o.optimizedFields),e({title:"AI Optimization Applied",description:"Your form has been optimized based on AI recommendations"}),d("builder"))},className:"w-full",children:[Ot.jsx(us,{className:"mr-2 h-4 w-4"}),"Apply Optimizations"]})]})]})]})]})}),Ot.jsx(Ys,{value:"forms",className:"space-y-6",children:0===t.length?Ot.jsx(Sn,{children:Ot.jsxs(Mn,{className:"flex flex-col items-center justify-center py-16",children:[Ot.jsx(cs,{className:"h-16 w-16 text-muted-foreground mb-4"}),Ot.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No Forms Yet"}),Ot.jsx("p",{className:"text-muted-foreground text-center mb-6",children:"Create your first lead capture form to start collecting leads"}),Ot.jsxs(Ln,{onClick:()=>d("builder"),children:[Ot.jsx(wr,{className:"mr-2 h-4 w-4"}),"Create Form"]})]})}):Ot.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:t.map(n=>Ot.jsxs(Sn,{children:[Ot.jsx(Lr,{children:Ot.jsx("div",{className:"flex items-start justify-between",children:Ot.jsxs("div",{className:"flex-1",children:[Ot.jsxs(zr,{className:"flex items-center gap-2",children:[n.name,Ot.jsx(Tn,{variant:n.isActive?"default":"secondary",children:n.isActive?"Active":"Inactive"})]}),n.description&&Ot.jsx(Ur,{className:"mt-2 line-clamp-2",children:n.description})]})})}),Ot.jsx(Mn,{children:Ot.jsxs("div",{className:"space-y-3",children:[Ot.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ot.jsxs("div",{children:[Ot.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Fields"}),Ot.jsx("div",{className:"font-semibold",children:n.fields?.length||0})]}),Ot.jsxs("div",{children:[Ot.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Submissions"}),Ot.jsx("div",{className:"font-semibold",children:n.submissionCount||0})]})]}),n.conversionRate&&Ot.jsxs("div",{children:[Ot.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Conversion Rate"}),Ot.jsxs("div",{className:"font-semibold text-green-600",children:[n.conversionRate,"%"]})]}),Ot.jsxs("div",{className:"flex gap-2 pt-2",children:[Ot.jsxs(Ln,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>(async n=>{const r=t.find(e=>e.id===n);if(r)try{if(!(await fetch("/api/marketing/lead-forms",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({...r,name:`${r.name} (Copy)`,id:void 0})})).ok)throw new Error("Failed to duplicate form");await _(),e({title:"Success",description:"Form duplicated successfully"})}catch(s){e({title:"Error",description:"Failed to duplicate form",variant:"destructive"})}})(n.id),children:[Ot.jsx(ni,{className:"mr-2 h-4 w-4"}),"Duplicate"]}),Ot.jsx(Ln,{variant:"outline",size:"sm",onClick:()=>(async t=>{if(confirm("Are you sure you want to delete this form?"))try{if(!(await fetch(`/api/marketing/lead-forms/${t}`,{method:"DELETE",credentials:"include"})).ok)throw new Error("Failed to delete form");await _(),e({title:"Success",description:"Form deleted successfully"})}catch(n){e({title:"Error",description:"Failed to delete form",variant:"destructive"})}})(n.id),children:Ot.jsx(vs,{className:"h-4 w-4"})})]})]})})]},n.id))})})]})]})}function Nbe(){const[e,t]=hn.useState(""),[n,r]=hn.useState(""),[s,i]=hn.useState([]),[a,o]=hn.useState("newest"),{toast:l}=Nn(),{data:c,isLoading:d}=za({queryKey:["/api/blog/posts",e,n,s,a],queryFn:async()=>{const t=new URLSearchParams;e&&t.append("q",e),n&&t.append("category",n),s.length&&t.append("tags",s.join(",")),t.append("sort",a),t.append("status","published"),t.append("limit","12");const r=await fetch(`/api/blog/posts?${t}`);if(!r.ok)throw new Error("Failed to fetch posts");return r.json()}}),{data:u}=za({queryKey:["/api/blog/posts/popular"],queryFn:async()=>{const e=await fetch("/api/blog/posts/popular?limit=5");if(!e.ok)throw new Error("Failed to fetch popular posts");return e.json()}}),{data:h}=za({queryKey:["/api/blog/categories"]}),{data:p}=za({queryKey:["/api/blog/tags"]}),m=Fa({mutationFn:async e=>{const t=await fetch("/api/blog/subscribe",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,type:"newsletter",preferences:["new_posts","weekly_digest"]})});if(!t.ok)throw new Error("Subscription failed");return t.json()},onSuccess:()=>{l({title:"Subscribed!",description:"You've been subscribed to our blog newsletter."})},onError:()=>{l({variant:"destructive",title:"Subscription failed",description:"Please try again later."})}}),f=e=>{const t=e.split(/\s+/).length;return`${Math.ceil(t/200)} min read`};return Ot.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-muted",children:[Ot.jsxs("section",{className:"relative py-20 px-4 overflow-hidden",children:[Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary/10 via-transparent to-secondary/10"}),Ot.jsxs(wo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"relative max-w-7xl mx-auto text-center",children:[Ot.jsx("h1",{className:"text-5xl font-bold mb-6 bg-clip-text text-transparent bg-gradient-to-r from-primary to-secondary",children:"The Florida Local Blog"}),Ot.jsx("p",{className:"text-xl text-muted-foreground mb-8 max-w-3xl mx-auto",children:"Insights, tips, and stories for Florida businesses. Stay informed about local trends, marketing strategies, and business growth."}),Ot.jsx("div",{className:"max-w-2xl mx-auto mb-8",children:Ot.jsxs("div",{className:"relative",children:[Ot.jsx(zn,{type:"search",placeholder:"Search articles...",className:"pl-12 pr-4 py-6 text-lg",value:e,onChange:e=>t(e.target.value),"data-testid":"input-blog-search"}),Ot.jsx(Fn,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-muted-foreground"})]})}),Ot.jsx("div",{className:"flex flex-wrap justify-center gap-2 mb-8",children:h?.map(e=>Ot.jsx(Tn,{variant:n===e.id?"default":"secondary",className:"cursor-pointer px-4 py-2",onClick:()=>r(e.id===n?"":e.id),"data-testid":`badge-category-${e.id}`,children:e.name},e.id))})]})]}),Ot.jsx("section",{className:"max-w-7xl mx-auto px-4 py-12",children:Ot.jsxs("div",{className:"grid lg:grid-cols-4 gap-8",children:[Ot.jsxs("div",{className:"lg:col-span-3",children:[Ot.jsxs("div",{className:"flex justify-between items-center mb-6",children:[Ot.jsx("h2",{className:"text-2xl font-bold",children:"Latest Articles"}),Ot.jsxs(Un,{value:a,onValueChange:o,children:[Ot.jsx(Vn,{className:"w-40","data-testid":"select-sort",children:Ot.jsx(Hn,{})}),Ot.jsxs(Wn,{children:[Ot.jsx($n,{value:"newest",children:"Newest First"}),Ot.jsx($n,{value:"popular",children:"Most Popular"}),Ot.jsx($n,{value:"trending",children:"Trending"})]})]})]}),d?Ot.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:[...Array(6)].map((e,t)=>Ot.jsx(Sn,{children:Ot.jsxs(Mn,{className:"p-6",children:[Ot.jsx(er,{className:"h-48 mb-4"}),Ot.jsx(er,{className:"h-6 mb-2"}),Ot.jsx(er,{className:"h-4 mb-2"}),Ot.jsx(er,{className:"h-4 w-3/4"})]})},t))}):Ot.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:c?.posts?.map(e=>{return Ot.jsx(wo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{y:-4},transition:{duration:.2},children:Ot.jsxs(Sn,{className:"h-full hover:shadow-lg transition-shadow",children:[e.featuredImage&&Ot.jsx("div",{className:"relative h-48 overflow-hidden rounded-t-lg",children:Ot.jsx("img",{src:e.featuredImage,alt:e.title,className:"w-full h-full object-cover",loading:"lazy"})}),Ot.jsxs(Lr,{children:[Ot.jsx("div",{className:"flex gap-2 mb-2",children:e.categoryId&&Ot.jsx(Tn,{variant:"secondary","data-testid":`text-category-${e.id}`,children:h?.find(t=>t.id===e.categoryId)?.name})}),Ot.jsx(zr,{className:"line-clamp-2",children:Ot.jsx(Yn,{href:`/blog/${e.slug}`,children:Ot.jsx("a",{className:"hover:text-primary transition-colors","data-testid":`link-post-${e.id}`,children:e.title})})})]}),Ot.jsxs(Mn,{children:[Ot.jsx("p",{className:"text-muted-foreground line-clamp-3 mb-4",children:e.excerpt}),Ot.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[Ot.jsxs("div",{className:"flex items-center gap-4",children:[Ot.jsxs("span",{className:"flex items-center gap-1",children:[Ot.jsx(Qn,{className:"h-3 w-3"}),(t=e.publishedAt||e.createdAt,new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}))]}),Ot.jsxs("span",{className:"flex items-center gap-1",children:[Ot.jsx(xr,{className:"h-3 w-3"}),f(e.content||"")]})]}),Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsxs("span",{className:"flex items-center gap-1",children:[Ot.jsx($r,{className:"h-3 w-3"}),e.viewCount]}),Ot.jsxs("span",{className:"flex items-center gap-1",children:[Ot.jsx(Zn,{className:"h-3 w-3"}),e.likeCount]}),Ot.jsxs("span",{className:"flex items-center gap-1",children:[Ot.jsx(_i,{className:"h-3 w-3"}),e.commentCount]})]})]})]}),Ot.jsx(ki,{children:Ot.jsx(Yn,{href:`/blog/${e.slug}`,children:Ot.jsxs(Ln,{variant:"ghost",className:"w-full","data-testid":`button-read-${e.id}`,children:["Read More ",Ot.jsx(mr,{className:"ml-2 h-4 w-4"})]})})})]})},e.id);var t})}),c&&c.total>c.limit&&Ot.jsx("div",{className:"flex justify-center mt-8 gap-2",children:[...Array(Math.ceil(c.total/c.limit))].map((e,t)=>Ot.jsx(Ln,{variant:c.page===t+1?"default":"outline",size:"sm","data-testid":`button-page-${t+1}`,children:t+1},t))})]}),Ot.jsxs("div",{className:"space-y-8",children:[Ot.jsxs(Sn,{children:[Ot.jsx(Lr,{children:Ot.jsxs(zr,{className:"flex items-center gap-2",children:[Ot.jsx(da,{className:"h-5 w-5"}),"Newsletter"]})}),Ot.jsxs(Mn,{children:[Ot.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Get the latest business insights delivered to your inbox."}),Ot.jsxs("form",{onSubmit:e=>{e.preventDefault();const t=e.target.email.value;m.mutate(t)},children:[Ot.jsx(zn,{type:"email",name:"email",placeholder:"Enter your email",className:"mb-3",required:!0,"data-testid":"input-newsletter-email"}),Ot.jsx(Ln,{type:"submit",className:"w-full","data-testid":"button-subscribe",children:"Subscribe"})]})]})]}),u&&u.length>0&&Ot.jsxs(Sn,{children:[Ot.jsx(Lr,{children:Ot.jsxs(zr,{className:"flex items-center gap-2",children:[Ot.jsx(Dn,{className:"h-5 w-5"}),"Popular Posts"]})}),Ot.jsx(Mn,{children:Ot.jsx("div",{className:"space-y-4",children:u.map((e,t)=>Ot.jsx(Yn,{href:`/blog/${e.slug}`,children:Ot.jsxs("a",{className:"flex gap-3 group","data-testid":`link-popular-${e.id}`,children:[Ot.jsx("span",{className:"text-2xl font-bold text-muted-foreground",children:t+1}),Ot.jsxs("div",{className:"flex-1",children:[Ot.jsx("h4",{className:"font-medium group-hover:text-primary transition-colors line-clamp-2",children:e.title}),Ot.jsxs("p",{className:"text-sm text-muted-foreground",children:[e.viewCount," views  ",f(e.content||"")]})]})]})},e.id))})})]}),p&&p.length>0&&Ot.jsxs(Sn,{children:[Ot.jsx(Lr,{children:Ot.jsxs(zr,{className:"flex items-center gap-2",children:[Ot.jsx($s,{className:"h-5 w-5"}),"Popular Tags"]})}),Ot.jsx(Mn,{children:Ot.jsx("div",{className:"flex flex-wrap gap-2",children:p.slice(0,15).map(e=>Ot.jsx(Tn,{variant:"outline",className:"cursor-pointer hover:bg-primary hover:text-primary-foreground transition-colors",onClick:()=>{i(t=>t.includes(e.id)?t.filter(t=>t!==e.id):[...t,e.id])},"data-testid":`badge-tag-${e.id}`,children:e.name},e.id))})})]})]})]})})]})}function _be(){const{slug:e}=ps();_n();const{toast:t}=Nn(),[n,r]=hn.useState(""),[s,i]=hn.useState(null),[a,o]=hn.useState(null),[l,c]=hn.useState(""),[d,u]=hn.useState(!1),[h,p]=hn.useState("comments"),{data:m}=za({queryKey:["/api/auth/me"]}),{data:f,isLoading:g}=za({queryKey:["/api/blog/posts/slug",e],queryFn:async()=>{const t=await fetch(`/api/blog/posts/slug/${e}`);if(!t.ok){if(404===t.status)throw new Error("Post not found");throw new Error("Failed to fetch post")}return t.json()},enabled:!!e}),{data:x,isLoading:v}=za({queryKey:["/api/blog/posts",f?.id,"comments"],queryFn:async()=>{const e=await fetch(`/api/blog/posts/${f?.id}/comments?sortBy=newest`);if(!e.ok)throw new Error("Failed to fetch comments");return e.json()},enabled:!!f?.id}),{data:y}=za({queryKey:["/api/blog/posts",f?.id,"related"],queryFn:async()=>{const e=await fetch(`/api/blog/posts/${f?.id}/related?limit=4`);if(!e.ok)throw new Error("Failed to fetch related posts");return e.json()},enabled:!!f?.id});hn.useEffect(()=>{if(f?.id){fetch(`/api/blog/posts/${f.id}/track-view`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionId:sessionStorage.getItem("blog_session")||S(),referrer:document.referrer,deviceType:M(),utmSource:new URLSearchParams(window.location.search).get("utm_source"),utmMedium:new URLSearchParams(window.location.search).get("utm_medium"),utmCampaign:new URLSearchParams(window.location.search).get("utm_campaign")})});const e=()=>{const e=(window.scrollY+window.innerHeight)/document.documentElement.scrollHeight;fetch(`/api/blog/posts/${f.id}/track-engagement`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"scroll",scrollDepth:Math.round(100*e),timeSpent:Math.floor((Date.now()-t)/1e3)})})},t=Date.now();return window.addEventListener("scroll",C(e,1e3)),()=>{window.removeEventListener("scroll",e)}}},[f?.id]);const b=Fa({mutationFn:async e=>qn("/api/blog/posts/"+f?.id+"/comments",{method:"POST",body:e}),onSuccess:()=>{vr.invalidateQueries({queryKey:["/api/blog/posts",f?.id,"comments"]}),r(""),i(null),t({title:"Comment posted!",description:"Your comment has been added successfully."})},onError:()=>{t({variant:"destructive",title:"Failed to post comment",description:"Please try again later."})}}),w=Fa({mutationFn:async({id:e,content:t})=>qn("/api/blog/comments/"+e,{method:"PUT",body:{content:t}}),onSuccess:()=>{vr.invalidateQueries({queryKey:["/api/blog/posts",f?.id,"comments"]}),o(null),c(""),t({title:"Comment updated!",description:"Your comment has been updated successfully."})}}),j=Fa({mutationFn:async e=>qn("/api/blog/comments/"+e,{method:"DELETE"}),onSuccess:()=>{vr.invalidateQueries({queryKey:["/api/blog/posts",f?.id,"comments"]}),t({title:"Comment deleted",description:"The comment has been removed."})}}),N=Fa({mutationFn:async e=>qn("/api/blog/posts/"+f?.id+"/reactions",{method:"POST",body:{reactionType:e}}),onSuccess:()=>{vr.invalidateQueries({queryKey:["/api/blog/posts/slug",e]}),t({title:"Thanks for your feedback!"})}}),_=Fa({mutationFn:async()=>qn("/api/blog/posts/"+f?.id+"/bookmarks",{method:"POST",body:{}}),onSuccess:()=>{t({title:"Post bookmarked!",description:"You can find this post in your reading list."})}}),S=()=>{const e="session_"+Math.random().toString(36).substr(2,9);return sessionStorage.setItem("blog_session",e),e},M=()=>{const e=window.innerWidth;return e<768?"mobile":e<1024?"tablet":"desktop"},C=(e,t)=>{let n;return function(...r){clearTimeout(n),n=setTimeout(()=>{clearTimeout(n),e(...r)},t)}},E=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),k=e=>{const t=e.split(/\s+/).length;return`${Math.ceil(t/200)} min read`},A=window.location.href,T=f?.title||"",P=e=>{const t={facebook:`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(A)}`,twitter:`https://twitter.com/intent/tweet?url=${encodeURIComponent(A)}&text=${encodeURIComponent(T)}`,linkedin:`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(A)}`};t[e]&&(window.open(t[e],"_blank","width=600,height=400"),fetch(`/api/blog/posts/${f?.id}/track-engagement`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"share",platform:e})}))},O=(e,t=0)=>{const d=a===e.id,u=m?.id===e.authorId,h=x?.comments.filter(t=>t.parentId===e.id)||[];return Ot.jsxs("div",{className:t>0?"ml-8 mt-4":"mt-4","data-testid":`comment-${e.id}`,children:[Ot.jsxs(Sn,{children:[Ot.jsx(Lr,{className:"pb-3",children:Ot.jsxs("div",{className:"flex items-start justify-between",children:[Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsxs(ou,{className:"h-8 w-8",children:[Ot.jsx(lu,{src:e.authorName}),Ot.jsx(cu,{children:e.authorName?.[0]||"U"})]}),Ot.jsxs("div",{children:[Ot.jsx("p",{className:"font-medium text-sm",children:e.authorName||"Anonymous"}),Ot.jsx("p",{className:"text-xs text-muted-foreground",children:E(e.createdAt)})]})]}),u&&Ot.jsxs(MD,{children:[Ot.jsx(CD,{asChild:!0,children:Ot.jsx(Ln,{variant:"ghost",size:"sm","data-testid":`button-comment-menu-${e.id}`,children:""})}),Ot.jsxs(ED,{children:[Ot.jsxs(kD,{onClick:()=>{o(e.id),c(e.content)},children:[Ot.jsx(Ds,{className:"mr-2 h-4 w-4"}),"Edit"]}),Ot.jsxs(kD,{onClick:()=>j.mutate(e.id),className:"text-destructive",children:[Ot.jsx(vs,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})]})}),Ot.jsx(Mn,{children:d?Ot.jsxs("div",{className:"space-y-3",children:[Ot.jsx(Tr,{value:l,onChange:e=>c(e.target.value),className:"min-h-[80px]","data-testid":`textarea-edit-${e.id}`}),Ot.jsxs("div",{className:"flex gap-2",children:[Ot.jsx(Ln,{size:"sm",onClick:()=>w.mutate({id:e.id,content:l}),"data-testid":`button-save-edit-${e.id}`,children:"Save"}),Ot.jsx(Ln,{size:"sm",variant:"outline",onClick:()=>{o(null),c("")},children:"Cancel"})]})]}):Ot.jsx("p",{className:"text-sm",children:e.content})}),!d&&Ot.jsx(ki,{className:"pt-2",children:Ot.jsxs("div",{className:"flex items-center gap-4",children:[Ot.jsxs(Ln,{variant:"ghost",size:"sm",onClick:()=>i(e.id),"data-testid":`button-reply-${e.id}`,children:[Ot.jsx(Gi,{className:"mr-1 h-3 w-3"}),"Reply"]}),Ot.jsxs(Ln,{variant:"ghost",size:"sm",children:[Ot.jsx(Mi,{className:"mr-1 h-3 w-3"}),e.likeCount||0]})]})})]}),s===e.id&&Ot.jsx(Sn,{className:"ml-8 mt-3",children:Ot.jsxs(Mn,{className:"pt-4",children:[Ot.jsx(Tr,{placeholder:"Write your reply...",value:n,onChange:e=>r(e.target.value),className:"min-h-[80px] mb-3","data-testid":`textarea-reply-${e.id}`}),Ot.jsxs("div",{className:"flex gap-2",children:[Ot.jsxs(Ln,{size:"sm",onClick:()=>{b.mutate({content:n,parentId:e.id})},disabled:!n.trim(),"data-testid":`button-submit-reply-${e.id}`,children:[Ot.jsx(ns,{className:"mr-1 h-3 w-3"}),"Reply"]}),Ot.jsx(Ln,{size:"sm",variant:"outline",onClick:()=>{i(null),r("")},children:"Cancel"})]})]})}),h.map(e=>O(e,t+1))]},e.id)};return g?Ot.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[Ot.jsx(er,{className:"h-12 mb-4"}),Ot.jsx(er,{className:"h-6 mb-8 w-1/2"}),Ot.jsx(er,{className:"h-96 mb-8"}),Ot.jsxs("div",{className:"space-y-4",children:[Ot.jsx(er,{className:"h-4 w-full"}),Ot.jsx(er,{className:"h-4 w-5/6"}),Ot.jsx(er,{className:"h-4 w-4/6"})]})]}):f?Ot.jsxs("div",{className:"min-h-screen bg-background",children:[Ot.jsx("div",{className:"max-w-4xl mx-auto px-4 py-4",children:Ot.jsxs("nav",{className:"flex items-center text-sm text-muted-foreground",children:[Ot.jsx(Yn,{href:"/",children:"Home"}),Ot.jsx("span",{className:"mx-2",children:"/"}),Ot.jsx(Yn,{href:"/blog",children:"Blog"}),Ot.jsx("span",{className:"mx-2",children:"/"}),Ot.jsx("span",{className:"text-foreground",children:f.title})]})}),Ot.jsx("article",{className:"max-w-4xl mx-auto px-4 py-8",children:Ot.jsxs(wo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[Ot.jsxs("header",{className:"mb-8",children:[f.categoryId&&Ot.jsx(Tn,{variant:"secondary",className:"mb-4","data-testid":"text-post-category",children:f.category?.name}),Ot.jsx("h1",{className:"text-4xl font-bold mb-4","data-testid":"text-post-title",children:f.title}),f.excerpt&&Ot.jsx("p",{className:"text-xl text-muted-foreground mb-6",children:f.excerpt}),Ot.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4 pb-6 border-b",children:[Ot.jsxs("div",{className:"flex items-center gap-4",children:[f.author&&Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsxs(ou,{children:[Ot.jsx(lu,{src:f.author.profilePictureURL||""}),Ot.jsx(cu,{children:f.author.displayName?.[0]||"A"})]}),Ot.jsxs("div",{children:[Ot.jsx("p",{className:"font-medium",children:f.author.displayName}),Ot.jsx("p",{className:"text-sm text-muted-foreground",children:"Author"})]})]}),Ot.jsx(rs,{orientation:"vertical",className:"h-8"}),Ot.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[Ot.jsxs("span",{className:"flex items-center gap-1",children:[Ot.jsx(Qn,{className:"h-4 w-4"}),E(f.publishedAt||f.createdAt)]}),Ot.jsxs("span",{className:"flex items-center gap-1",children:[Ot.jsx(xr,{className:"h-4 w-4"}),k(f.content||"")]}),Ot.jsxs("span",{className:"flex items-center gap-1",children:[Ot.jsx($r,{className:"h-4 w-4"}),f.viewCount," views"]})]})]}),Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsxs(Ln,{variant:"outline",size:"sm",onClick:()=>N.mutate("like"),"data-testid":"button-like-post",children:[Ot.jsx(Zn,{className:"mr-1 h-4 w-4"}),f.likeCount]}),Ot.jsx(Ln,{variant:"outline",size:"sm",onClick:()=>_.mutate(),"data-testid":"button-bookmark-post",children:Ot.jsx(Qs,{className:"h-4 w-4"})}),Ot.jsxs(MD,{children:[Ot.jsx(CD,{asChild:!0,children:Ot.jsx(Ln,{variant:"outline",size:"sm","data-testid":"button-share-post",children:Ot.jsx(ss,{className:"h-4 w-4"})})}),Ot.jsxs(ED,{children:[Ot.jsxs(kD,{onClick:()=>P("facebook"),children:[Ot.jsx(gi,{className:"mr-2 h-4 w-4"}),"Facebook"]}),Ot.jsxs(kD,{onClick:()=>P("twitter"),children:[Ot.jsx(ra,{className:"mr-2 h-4 w-4"}),"Twitter"]}),Ot.jsxs(kD,{onClick:()=>P("linkedin"),children:[Ot.jsx(mi,{className:"mr-2 h-4 w-4"}),"LinkedIn"]}),Ot.jsxs(kD,{onClick:()=>{navigator.clipboard.writeText(A),u(!0),setTimeout(()=>u(!1),2e3)},children:[d?Ot.jsx(rr,{className:"mr-2 h-4 w-4"}):Ot.jsx(ni,{className:"mr-2 h-4 w-4"}),d?"Copied!":"Copy Link"]})]})]})]})]})]}),f.featuredImage&&Ot.jsx("div",{className:"mb-8 rounded-lg overflow-hidden",children:Ot.jsx("img",{src:f.featuredImage,alt:f.title,className:"w-full h-auto",loading:"lazy"})}),Ot.jsx("div",{className:"prose prose-lg max-w-none mb-12",dangerouslySetInnerHTML:{__html:f.content||""}}),f.tags&&f.tags.length>0&&Ot.jsx("div",{className:"flex flex-wrap gap-2 mb-8",children:f.tags.map(e=>Ot.jsx(Yn,{href:`/blog?tags=${e.id}`,children:Ot.jsxs(Tn,{variant:"outline",className:"cursor-pointer","data-testid":`badge-post-tag-${e.id}`,children:["#",e.name]})},e.id))}),Ot.jsx(rs,{className:"my-8"}),Ot.jsxs(qs,{value:h,onValueChange:p,children:[Ot.jsxs(Xs,{className:"mb-6",children:[Ot.jsxs(Ks,{value:"comments","data-testid":"tab-comments",children:[Ot.jsx(_i,{className:"mr-2 h-4 w-4"}),"Comments (",x?.total||0,")"]}),Ot.jsx(Ks,{value:"related","data-testid":"tab-related",children:"Related Posts"})]}),Ot.jsxs(Ys,{value:"comments",children:[m?Ot.jsxs(Sn,{className:"mb-6",children:[Ot.jsx(Lr,{children:Ot.jsx("h3",{className:"font-semibold",children:"Leave a Comment"})}),Ot.jsxs(Mn,{children:[Ot.jsx(Tr,{placeholder:"Share your thoughts...",value:n,onChange:e=>r(e.target.value),className:"min-h-[120px] mb-4","data-testid":"textarea-new-comment"}),Ot.jsxs(Ln,{onClick:()=>b.mutate({content:n}),disabled:!n.trim()||b.isPending,"data-testid":"button-post-comment",children:[Ot.jsx(ns,{className:"mr-2 h-4 w-4"}),"Post Comment"]})]})]}):Ot.jsx(Sn,{className:"mb-6",children:Ot.jsxs(Mn,{className:"py-8 text-center",children:[Ot.jsx("p",{className:"mb-4",children:"Please sign in to leave a comment."}),Ot.jsx(Yn,{href:"/login",children:Ot.jsx(Ln,{"data-testid":"button-signin-to-comment",children:"Sign In"})})]})}),v?Ot.jsx("div",{className:"space-y-4",children:[...Array(3)].map((e,t)=>Ot.jsx(Sn,{children:Ot.jsxs(Mn,{className:"p-6",children:[Ot.jsx(er,{className:"h-4 mb-2 w-1/4"}),Ot.jsx(er,{className:"h-3 mb-4 w-1/6"}),Ot.jsx(er,{className:"h-16"})]})},t))}):Ot.jsxs("div",{className:"space-y-4",children:[x?.comments?.filter(e=>!e.parentId).map(e=>O(e)),(!x||0===x.comments.length)&&Ot.jsx(Sn,{children:Ot.jsx(Mn,{className:"py-8 text-center text-muted-foreground",children:"No comments yet. Be the first to share your thoughts!"})})]})]}),Ot.jsx(Ys,{value:"related",children:Ot.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:y?.map(e=>Ot.jsxs(Sn,{className:"hover:shadow-lg transition-shadow",children:[Ot.jsx(Lr,{children:Ot.jsx(CardTitle,{className:"text-lg line-clamp-2",children:Ot.jsx(Yn,{href:`/blog/${e.slug}`,children:Ot.jsx("a",{className:"hover:text-primary transition-colors","data-testid":`link-related-${e.id}`,children:e.title})})})}),Ot.jsx(Mn,{children:Ot.jsx("p",{className:"text-sm text-muted-foreground line-clamp-3",children:e.excerpt})}),Ot.jsx(ki,{children:Ot.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[Ot.jsx("span",{children:E(e.publishedAt||e.createdAt)}),Ot.jsx("span",{children:k(e.content||"")})]})})]},e.id))})})]})]})})]}):Ot.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-20 text-center",children:[Ot.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Post Not Found"}),Ot.jsx("p",{className:"text-muted-foreground mb-8",children:"The blog post you're looking for doesn't exist."}),Ot.jsx(Yn,{href:"/blog",children:Ot.jsxs(Ln,{"data-testid":"button-back-to-blog",children:[Ot.jsx(Gs,{className:"mr-2 h-4 w-4"}),"Back to Blog"]})})]})}function Sbe(e){this.content=e}function Mbe(e,t,n){for(let r=0;;r++){if(r==e.childCount||r==t.childCount)return e.childCount==t.childCount?null:n;let s=e.child(r),i=t.child(r);if(s!=i){if(!s.sameMarkup(i))return n;if(s.isText&&s.text!=i.text){for(let e=0;s.text[e]==i.text[e];e++)n++;return n}if(s.content.size||i.content.size){let e=Mbe(s.content,i.content,n+1);if(null!=e)return e}n+=s.nodeSize}else n+=s.nodeSize}}function Cbe(e,t,n,r){for(let s=e.childCount,i=t.childCount;;){if(0==s||0==i)return s==i?null:{a:n,b:r};let a=e.child(--s),o=t.child(--i),l=a.nodeSize;if(a!=o){if(!a.sameMarkup(o))return{a:n,b:r};if(a.isText&&a.text!=o.text){let e=0,t=Math.min(a.text.length,o.text.length);for(;e<t&&a.text[a.text.length-e-1]==o.text[o.text.length-e-1];)e++,n--,r--;return{a:n,b:r}}if(a.content.size||o.content.size){let e=Cbe(a.content,o.content,n-1,r-1);if(e)return e}n-=l,r-=l}else n-=l,r-=l}}Sbe.prototype={constructor:Sbe,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return-1==t?void 0:this.content[t+1]},update:function(e,t,n){var r=n&&n!=e?this.remove(n):this,s=r.find(e),i=r.content.slice();return-1==s?i.push(n||e,t):(i[s+1]=t,n&&(i[s]=n)),new Sbe(i)},remove:function(e){var t=this.find(e);if(-1==t)return this;var n=this.content.slice();return n.splice(t,2),new Sbe(n)},addToStart:function(e,t){return new Sbe([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var n=this.remove(e).content.slice();return n.push(e,t),new Sbe(n)},addBefore:function(e,t,n){var r=this.remove(t),s=r.content.slice(),i=r.find(e);return s.splice(-1==i?s.length:i,0,t,n),new Sbe(s)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return(e=Sbe.from(e)).size?new Sbe(e.content.concat(this.subtract(e).content)):this},append:function(e){return(e=Sbe.from(e)).size?new Sbe(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=Sbe.from(e);for(var n=0;n<e.content.length;n+=2)t=t.remove(e.content[n]);return t},toObject:function(){var e={};return this.forEach(function(t,n){e[t]=n}),e},get size(){return this.content.length>>1}},Sbe.from=function(e){if(e instanceof Sbe)return e;var t=[];if(e)for(var n in e)t.push(n,e[n]);return new Sbe(t)};class Ebe{constructor(e,t){if(this.content=e,this.size=t||0,null==t)for(let n=0;n<e.length;n++)this.size+=e[n].nodeSize}nodesBetween(e,t,n,r=0,s){for(let i=0,a=0;a<t;i++){let o=this.content[i],l=a+o.nodeSize;if(l>e&&!1!==n(o,r+a,s||null,i)&&o.content.size){let s=a+1;o.nodesBetween(Math.max(0,e-s),Math.min(o.content.size,t-s),n,r+s)}a=l}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,n,r){let s="",i=!0;return this.nodesBetween(e,t,(a,o)=>{let l=a.isText?a.text.slice(Math.max(e,o)-o,t-o):a.isLeaf?r?"function"==typeof r?r(a):r:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&l||a.isTextblock)&&n&&(i?i=!1:s+=n),s+=l},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,n=e.firstChild,r=this.content.slice(),s=0;for(t.isText&&t.sameMarkup(n)&&(r[r.length-1]=t.withText(t.text+n.text),s=1);s<e.content.length;s++)r.push(e.content[s]);return new Ebe(r,this.size+e.size)}cut(e,t=this.size){if(0==e&&t==this.size)return this;let n=[],r=0;if(t>e)for(let s=0,i=0;i<t;s++){let a=this.content[s],o=i+a.nodeSize;o>e&&((i<e||o>t)&&(a=a.isText?a.cut(Math.max(0,e-i),Math.min(a.text.length,t-i)):a.cut(Math.max(0,e-i-1),Math.min(a.content.size,t-i-1))),n.push(a),r+=a.nodeSize),i=o}return new Ebe(n,r)}cutByIndex(e,t){return e==t?Ebe.empty:0==e&&t==this.content.length?this:new Ebe(this.content.slice(e,t))}replaceChild(e,t){let n=this.content[e];if(n==t)return this;let r=this.content.slice(),s=this.size+t.nodeSize-n.nodeSize;return r[e]=t,new Ebe(r,s)}addToStart(e){return new Ebe([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new Ebe(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,n=0;t<this.content.length;t++){let r=this.content[t];e(r,n,t),n+=r.nodeSize}}findDiffStart(e,t=0){return Mbe(this,e,t)}findDiffEnd(e,t=this.size,n=e.size){return Cbe(this,e,t,n)}findIndex(e){if(0==e)return Abe(0,e);if(e==this.size)return Abe(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let t=0,n=0;;t++){let r=n+this.child(t).nodeSize;if(r>=e)return r==e?Abe(t+1,r):Abe(t,n);n=r}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return Ebe.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new Ebe(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return Ebe.empty;let t,n=0;for(let r=0;r<e.length;r++){let s=e[r];n+=s.nodeSize,r&&s.isText&&e[r-1].sameMarkup(s)?(t||(t=e.slice(0,r)),t[t.length-1]=s.withText(t[t.length-1].text+s.text)):t&&t.push(s)}return new Ebe(t||e,n)}static from(e){if(!e)return Ebe.empty;if(e instanceof Ebe)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new Ebe([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}Ebe.empty=new Ebe([],0);const kbe={index:0,offset:0};function Abe(e,t){return kbe.index=e,kbe.offset=t,kbe}function Tbe(e,t){if(e===t)return!0;if(!e||"object"!=typeof e||!t||"object"!=typeof t)return!1;let n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!Tbe(e[n],t[n]))return!1}else{for(let n in e)if(!(n in t)||!Tbe(e[n],t[n]))return!1;for(let n in t)if(!(n in e))return!1}return!0}let Pbe=class e{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,n=!1;for(let r=0;r<e.length;r++){let s=e[r];if(this.eq(s))return e;if(this.type.excludes(s.type))t||(t=e.slice(0,r));else{if(s.type.excludes(this.type))return e;!n&&s.type.rank>this.type.rank&&(t||(t=e.slice(0,r)),t.push(this),n=!0),t&&t.push(s)}}return t||(t=e.slice()),n||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Tbe(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let n=e.marks[t.type];if(!n)throw new RangeError(`There is no mark type ${t.type} in this schema`);let r=n.create(t.attrs);return n.checkAttrs(r.attrs),r}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].eq(t[n]))return!1;return!0}static setFrom(t){if(!t||Array.isArray(t)&&0==t.length)return e.none;if(t instanceof e)return[t];let n=t.slice();return n.sort((e,t)=>e.type.rank-t.type.rank),n}};Pbe.none=[];class Obe extends Error{}class Rbe{constructor(e,t,n){this.content=e,this.openStart=t,this.openEnd=n}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let n=Dbe(this.content,e+this.openStart,t);return n&&new Rbe(n,this.openStart,this.openEnd)}removeBetween(e,t){return new Rbe(Ibe(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return Rbe.empty;let n=t.openStart||0,r=t.openEnd||0;if("number"!=typeof n||"number"!=typeof r)throw new RangeError("Invalid input for Slice.fromJSON");return new Rbe(Ebe.fromJSON(e,t.content),n,r)}static maxOpen(e,t=!0){let n=0,r=0;for(let s=e.firstChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.firstChild)n++;for(let s=e.lastChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.lastChild)r++;return new Rbe(e,n,r)}}function Ibe(e,t,n){let{index:r,offset:s}=e.findIndex(t),i=e.maybeChild(r),{index:a,offset:o}=e.findIndex(n);if(s==t||i.isText){if(o!=n&&!e.child(a).isText)throw new RangeError("Removing non-flat range");return e.cut(0,t).append(e.cut(n))}if(r!=a)throw new RangeError("Removing non-flat range");return e.replaceChild(r,i.copy(Ibe(i.content,t-s-1,n-s-1)))}function Dbe(e,t,n,r){let{index:s,offset:i}=e.findIndex(t),a=e.maybeChild(s);if(i==t||a.isText)return r&&!r.canReplace(s,s,n)?null:e.cut(0,t).append(n).append(e.cut(t));let o=Dbe(a.content,t-i-1,n,a);return o&&e.replaceChild(s,a.copy(o))}function Lbe(e,t,n){if(n.openStart>e.depth)throw new Obe("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new Obe("Inconsistent open depths");return Fbe(e,t,n,0)}function Fbe(e,t,n,r){let s=e.index(r),i=e.node(r);if(s==t.index(r)&&r<e.depth-n.openStart){let a=Fbe(e,t,n,r+1);return i.copy(i.content.replaceChild(s,a))}if(n.content.size){if(n.openStart||n.openEnd||e.depth!=r||t.depth!=r){let{start:s,end:a}=function(e,t){let n=t.depth-e.openStart,r=t.node(n).copy(e.content);for(let s=n-1;s>=0;s--)r=t.node(s).copy(Ebe.from(r));return{start:r.resolveNoCache(e.openStart+n),end:r.resolveNoCache(r.content.size-e.openEnd-n)}}(n,e);return Hbe(i,Wbe(e,s,a,t,r))}{let r=e.parent,s=r.content;return Hbe(r,s.cut(0,e.parentOffset).append(n.content).append(s.cut(t.parentOffset)))}}return Hbe(i,$be(e,t,r))}function zbe(e,t){if(!t.type.compatibleContent(e.type))throw new Obe("Cannot join "+t.type.name+" onto "+e.type.name)}function Bbe(e,t,n){let r=e.node(n);return zbe(r,t.node(n)),r}function Ube(e,t){let n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function Vbe(e,t,n,r){let s=(t||e).node(n),i=0,a=t?t.index(n):s.childCount;e&&(i=e.index(n),e.depth>n?i++:e.textOffset&&(Ube(e.nodeAfter,r),i++));for(let o=i;o<a;o++)Ube(s.child(o),r);t&&t.depth==n&&t.textOffset&&Ube(t.nodeBefore,r)}function Hbe(e,t){return e.type.checkContent(t),e.copy(t)}function Wbe(e,t,n,r,s){let i=e.depth>s&&Bbe(e,t,s+1),a=r.depth>s&&Bbe(n,r,s+1),o=[];return Vbe(null,e,s,o),i&&a&&t.index(s)==n.index(s)?(zbe(i,a),Ube(Hbe(i,Wbe(e,t,n,r,s+1)),o)):(i&&Ube(Hbe(i,$be(e,t,s+1)),o),Vbe(t,n,s,o),a&&Ube(Hbe(a,$be(n,r,s+1)),o)),Vbe(r,null,s,o),new Ebe(o)}function $be(e,t,n){let r=[];if(Vbe(null,e,n,r),e.depth>n){Ube(Hbe(Bbe(e,t,n+1),$be(e,t,n+1)),r)}return Vbe(t,null,n,r),new Ebe(r)}Rbe.empty=new Rbe(Ebe.empty,0,0);class Gbe{constructor(e,t,n){this.pos=e,this.path=t,this.parentOffset=n,this.depth=t.length/3-1}resolveDepth(e){return null==e?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[3*this.resolveDepth(e)]}index(e){return this.path[3*this.resolveDepth(e)+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e!=this.depth||this.textOffset?1:0)}start(e){return 0==(e=this.resolveDepth(e))?0:this.path[3*e-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]}after(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]+this.path[3*e].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let n=this.pos-this.path[this.path.length-1],r=e.child(t);return n?e.child(t).cut(n):r}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):0==e?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let n=this.path[3*t],r=0==t?0:this.path[3*t-1]+1;for(let s=0;s<e;s++)r+=n.child(s).nodeSize;return r}marks(){let e=this.parent,t=this.index();if(0==e.content.size)return Pbe.none;if(this.textOffset)return e.child(t).marks;let n=e.maybeChild(t-1),r=e.maybeChild(t);if(!n){let e=n;n=r,r=e}let s=n.marks;for(var i=0;i<s.length;i++)!1!==s[i].type.spec.inclusive||r&&s[i].isInSet(r.marks)||(s=s[i--].removeFromSet(s));return s}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let n=t.marks,r=e.parent.maybeChild(e.index());for(var s=0;s<n.length;s++)!1!==n[s].type.spec.inclusive||r&&n[s].isInSet(r.marks)||(n=n[s--].removeFromSet(n));return n}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let n=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);n>=0;n--)if(e.pos<=this.end(n)&&(!t||t(this.node(n))))return new Ybe(this,e,n);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let n=[],r=0,s=t;for(let i=e;;){let{index:e,offset:t}=i.content.findIndex(s),a=s-t;if(n.push(i,e,r+t),!a)break;if(i=i.child(e),i.isText)break;s=a-1,r+=t+1}return new Gbe(t,n,s)}static resolveCached(e,t){let n=Kbe.get(e);if(n)for(let s=0;s<n.elts.length;s++){let e=n.elts[s];if(e.pos==t)return e}else Kbe.set(e,n=new qbe);let r=n.elts[n.i]=Gbe.resolve(e,t);return n.i=(n.i+1)%Xbe,r}}class qbe{constructor(){this.elts=[],this.i=0}}const Xbe=12,Kbe=new WeakMap;class Ybe{constructor(e,t,n){this.$from=e,this.$to=t,this.depth=n}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const Zbe=Object.create(null);let Jbe=class e{constructor(e,t,n,r=Pbe.none){this.type=e,this.attrs=t,this.marks=r,this.content=n||Ebe.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,n,r=0){this.content.nodesBetween(e,t,n,r,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,n,r){return this.content.textBetween(e,t,n,r)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,n){return this.type==e&&Tbe(this.attrs,t||e.defaultAttrs||Zbe)&&Pbe.sameSet(this.marks,n||Pbe.none)}copy(t=null){return t==this.content?this:new e(this.type,this.attrs,t,this.marks)}mark(t){return t==this.marks?this:new e(this.type,this.attrs,this.content,t)}cut(e,t=this.content.size){return 0==e&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,n=!1){if(e==t)return Rbe.empty;let r=this.resolve(e),s=this.resolve(t),i=n?0:r.sharedDepth(t),a=r.start(i),o=r.node(i).content.cut(r.pos-a,s.pos-a);return new Rbe(o,r.depth-i,s.depth-i)}replace(e,t,n){return Lbe(this.resolve(e),this.resolve(t),n)}nodeAt(e){for(let t=this;;){let{index:n,offset:r}=t.content.findIndex(e);if(t=t.maybeChild(n),!t)return null;if(r==e||t.isText)return t;e-=r+1}}childAfter(e){let{index:t,offset:n}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:n}}childBefore(e){if(0==e)return{node:null,index:0,offset:0};let{index:t,offset:n}=this.content.findIndex(e);if(n<e)return{node:this.content.child(t),index:t,offset:n};let r=this.content.child(t-1);return{node:r,index:t-1,offset:n-r.nodeSize}}resolve(e){return Gbe.resolveCached(this,e)}resolveNoCache(e){return Gbe.resolve(this,e)}rangeHasMark(e,t,n){let r=!1;return t>e&&this.nodesBetween(e,t,e=>(n.isInSet(e.marks)&&(r=!0),!r)),r}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),ewe(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,n=Ebe.empty,r=0,s=n.childCount){let i=this.contentMatchAt(e).matchFragment(n,r,s),a=i&&i.matchFragment(this.content,t);if(!a||!a.validEnd)return!1;for(let o=r;o<s;o++)if(!this.type.allowsMarks(n.child(o).marks))return!1;return!0}canReplaceWith(e,t,n,r){if(r&&!this.type.allowsMarks(r))return!1;let s=this.contentMatchAt(e).matchType(n),i=s&&s.matchFragment(this.content,t);return!!i&&i.validEnd}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=Pbe.none;for(let t=0;t<this.marks.length;t++){let n=this.marks[t];n.type.checkAttrs(n.attrs),e=n.addToSet(e)}if(!Pbe.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(e=>e.type.name)}`);this.content.forEach(e=>e.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(e=>e.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let n;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=t.marks.map(e.markFromJSON)}if("text"==t.type){if("string"!=typeof t.text)throw new RangeError("Invalid text node in JSON");return e.text(t.text,n)}let r=Ebe.fromJSON(e,t.content),s=e.nodeType(t.type).create(t.attrs,r,n);return s.type.checkAttrs(s.attrs),s}};Jbe.prototype.text=void 0;class Qbe extends Jbe{constructor(e,t,n,r){if(super(e,t,null,r),!n)throw new RangeError("Empty text nodes are not allowed");this.text=n}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):ewe(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Qbe(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Qbe(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return 0==e&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function ewe(e,t){for(let n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}class twe{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let n=new nwe(e,t);if(null==n.next)return twe.empty;let r=rwe(n);n.next&&n.err("Unexpected trailing text");let s=function(e){let t=Object.create(null);return n(cwe(e,0));function n(r){let s=[];r.forEach(t=>{e[t].forEach(({term:t,to:n})=>{if(!t)return;let r;for(let e=0;e<s.length;e++)s[e][0]==t&&(r=s[e][1]);cwe(e,n).forEach(e=>{r||s.push([t,r=[]]),-1==r.indexOf(e)&&r.push(e)})})});let i=t[r.join(",")]=new twe(r.indexOf(e.length-1)>-1);for(let e=0;e<s.length;e++){let r=s[e][1].sort(lwe);i.next.push({type:s[e][0],next:t[r.join(",")]||n(r)})}return i}}(function(e){let t=[[]];return s(i(e,0),n()),t;function n(){return t.push([])-1}function r(e,n,r){let s={term:r,to:n};return t[e].push(s),s}function s(e,t){e.forEach(e=>e.to=t)}function i(e,t){if("choice"==e.type)return e.exprs.reduce((e,n)=>e.concat(i(n,t)),[]);if("seq"!=e.type){if("star"==e.type){let a=n();return r(t,a),s(i(e.expr,a),a),[r(a)]}if("plus"==e.type){let a=n();return s(i(e.expr,t),a),s(i(e.expr,a),a),[r(a)]}if("opt"==e.type)return[r(t)].concat(i(e.expr,t));if("range"==e.type){let a=t;for(let t=0;t<e.min;t++){let t=n();s(i(e.expr,a),t),a=t}if(-1==e.max)s(i(e.expr,a),a);else for(let t=e.min;t<e.max;t++){let t=n();r(a,t),s(i(e.expr,a),t),a=t}return[r(a)]}if("name"==e.type)return[r(t,void 0,e.value)];throw new Error("Unknown expr type")}for(let r=0;;r++){let a=i(e.exprs[r],t);if(r==e.exprs.length-1)return a;s(a,t=n())}}}(r));return function(e,t){for(let n=0,r=[e];n<r.length;n++){let e=r[n],s=!e.validEnd,i=[];for(let t=0;t<e.next.length;t++){let{type:n,next:a}=e.next[t];i.push(n.name),!s||n.isText||n.hasRequiredAttrs()||(s=!1),-1==r.indexOf(a)&&r.push(a)}s&&t.err("Only non-generatable nodes ("+i.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(s,n),s}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,n=e.childCount){let r=this;for(let s=t;r&&s<n;s++)r=r.matchType(e.child(s).type);return r}get inlineContent(){return 0!=this.next.length&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!t.isText&&!t.hasRequiredAttrs())return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let n=0;n<e.next.length;n++)if(this.next[t].type==e.next[n].type)return!0;return!1}fillBefore(e,t=!1,n=0){let r=[this];return function s(i,a){let o=i.matchFragment(e,n);if(o&&(!t||o.validEnd))return Ebe.from(a.map(e=>e.createAndFill()));for(let e=0;e<i.next.length;e++){let{type:t,next:n}=i.next[e];if(!t.isText&&!t.hasRequiredAttrs()&&-1==r.indexOf(n)){r.push(n);let e=s(n,a.concat(t));if(e)return e}}return null}(this,[])}findWrapping(e){for(let n=0;n<this.wrapCache.length;n+=2)if(this.wrapCache[n]==e)return this.wrapCache[n+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),n=[{match:this,type:null,via:null}];for(;n.length;){let r=n.shift(),s=r.match;if(s.matchType(e)){let e=[];for(let t=r;t.type;t=t.via)e.push(t.type);return e.reverse()}for(let e=0;e<s.next.length;e++){let{type:i,next:a}=s.next[e];i.isLeaf||i.hasRequiredAttrs()||i.name in t||r.type&&!a.validEnd||(n.push({match:i.contentMatch,type:i,via:r}),t[i.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];return function t(n){e.push(n);for(let r=0;r<n.next.length;r++)-1==e.indexOf(n.next[r].next)&&t(n.next[r].next)}(this),e.map((t,n)=>{let r=n+(t.validEnd?"*":" ")+" ";for(let s=0;s<t.next.length;s++)r+=(s?", ":"")+t.next[s].type.name+"->"+e.indexOf(t.next[s].next);return r}).join("\n")}}twe.empty=new twe(!0);class nwe{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function rwe(e){let t=[];do{t.push(swe(e))}while(e.eat("|"));return 1==t.length?t[0]:{type:"choice",exprs:t}}function swe(e){let t=[];do{t.push(iwe(e))}while(e.next&&")"!=e.next&&"|"!=e.next);return 1==t.length?t[0]:{type:"seq",exprs:t}}function iwe(e){let t=function(e){if(e.eat("(")){let t=rwe(e);return e.eat(")")||e.err("Missing closing paren"),t}if(!/\W/.test(e.next)){let t=function(e,t){let n=e.nodeTypes,r=n[t];if(r)return[r];let s=[];for(let i in n){let e=n[i];e.isInGroup(t)&&s.push(e)}0==s.length&&e.err("No node type or group '"+t+"' found");return s}(e,e.next).map(t=>(null==e.inline?e.inline=t.isInline:e.inline!=t.isInline&&e.err("Mixing inline and block content"),{type:"name",value:t}));return e.pos++,1==t.length?t[0]:{type:"choice",exprs:t}}e.err("Unexpected token '"+e.next+"'")}(e);for(;;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else{if(!e.eat("{"))break;t=owe(e,t)}return t}function awe(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");let t=Number(e.next);return e.pos++,t}function owe(e,t){let n=awe(e),r=n;return e.eat(",")&&(r="}"!=e.next?awe(e):-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:t}}function lwe(e,t){return t-e}function cwe(e,t){let n=[];return function t(r){let s=e[r];if(1==s.length&&!s[0].term)return t(s[0].to);n.push(r);for(let e=0;e<s.length;e++){let{term:r,to:i}=s[e];r||-1!=n.indexOf(i)||t(i)}}(t),n.sort(lwe)}function dwe(e){let t=Object.create(null);for(let n in e){let r=e[n];if(!r.hasDefault)return null;t[n]=r.default}return t}function uwe(e,t){let n=Object.create(null);for(let r in e){let s=t&&t[r];if(void 0===s){let t=e[r];if(!t.hasDefault)throw new RangeError("No value supplied for attribute "+r);s=t.default}n[r]=s}return n}function hwe(e,t,n,r){for(let s in t)if(!(s in e))throw new RangeError(`Unsupported attribute ${s} for ${n} of type ${s}`);for(let s in e){let n=e[s];n.validate&&n.validate(t[s])}}function pwe(e,t){let n=Object.create(null);if(t)for(let r in t)n[r]=new fwe(e,r,t[r]);return n}let mwe=class e{constructor(e,t,n){this.name=e,this.schema=t,this.spec=n,this.markSet=null,this.groups=n.group?n.group.split(" "):[],this.attrs=pwe(e,n.attrs),this.defaultAttrs=dwe(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(n.inline||"text"==e),this.isText="text"==e}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==twe.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:uwe(this.attrs,e)}create(e=null,t,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Jbe(this,this.computeAttrs(e),Ebe.from(t),Pbe.setFrom(n))}createChecked(e=null,t,n){return t=Ebe.from(t),this.checkContent(t),new Jbe(this,this.computeAttrs(e),t,Pbe.setFrom(n))}createAndFill(e=null,t,n){if(e=this.computeAttrs(e),(t=Ebe.from(t)).size){let e=this.contentMatch.fillBefore(t);if(!e)return null;t=e.append(t)}let r=this.contentMatch.matchFragment(t),s=r&&r.fillBefore(Ebe.empty,!0);return s?new Jbe(this,e,t.append(s),Pbe.setFrom(n)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let n=0;n<e.childCount;n++)if(!this.allowsMarks(e.child(n).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){hwe(this.attrs,e,"node")}allowsMarkType(e){return null==this.markSet||this.markSet.indexOf(e)>-1}allowsMarks(e){if(null==this.markSet)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(null==this.markSet)return e;let t;for(let n=0;n<e.length;n++)this.allowsMarkType(e[n].type)?t&&t.push(e[n]):t||(t=e.slice(0,n));return t?t.length?t:Pbe.none:e}static compile(t,n){let r=Object.create(null);t.forEach((t,s)=>r[t]=new e(t,n,s));let s=n.spec.topNode||"doc";if(!r[s])throw new RangeError("Schema is missing its top node type ('"+s+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let e in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};class fwe{constructor(e,t,n){this.hasDefault=Object.prototype.hasOwnProperty.call(n,"default"),this.default=n.default,this.validate="string"==typeof n.validate?function(e,t,n){let r=n.split("|");return n=>{let s=null===n?"null":typeof n;if(r.indexOf(s)<0)throw new RangeError(`Expected value of type ${r} for attribute ${t} on type ${e}, got ${s}`)}}(e,t,n.validate):n.validate}get isRequired(){return!this.hasDefault}}class gwe{constructor(e,t,n,r){this.name=e,this.rank=t,this.schema=n,this.spec=r,this.attrs=pwe(e,r.attrs),this.excluded=null;let s=dwe(this.attrs);this.instance=s?new Pbe(this,s):null}create(e=null){return!e&&this.instance?this.instance:new Pbe(this,uwe(this.attrs,e))}static compile(e,t){let n=Object.create(null),r=0;return e.forEach((e,s)=>n[e]=new gwe(e,r++,t,s)),n}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){hwe(this.attrs,e,"mark")}excludes(e){return this.excluded.indexOf(e)>-1}}class xwe{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let r in e)t[r]=e[r];t.nodes=Sbe.from(e.nodes),t.marks=Sbe.from(e.marks||{}),this.nodes=mwe.compile(this.spec.nodes,this),this.marks=gwe.compile(this.spec.marks,this);let n=Object.create(null);for(let r in this.nodes){if(r in this.marks)throw new RangeError(r+" can not be both a node and a mark");let e=this.nodes[r],t=e.spec.content||"",s=e.spec.marks;if(e.contentMatch=n[t]||(n[t]=twe.parse(t,this.nodes)),e.inlineContent=e.contentMatch.inlineContent,e.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!e.isInline||!e.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=e}e.markSet="_"==s?null:s?vwe(this,s.split(" ")):""!=s&&e.inlineContent?null:[]}for(let r in this.marks){let e=this.marks[r],t=e.spec.excludes;e.excluded=null==t?[e]:""==t?[]:vwe(this,t.split(" "))}this.nodeFromJSON=e=>Jbe.fromJSON(this,e),this.markFromJSON=e=>Pbe.fromJSON(this,e),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,n,r){if("string"==typeof e)e=this.nodeType(e);else{if(!(e instanceof mwe))throw new RangeError("Invalid node type: "+e);if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}return e.createChecked(t,n,r)}text(e,t){let n=this.nodes.text;return new Qbe(n,n.defaultAttrs,e,Pbe.setFrom(t))}mark(e,t){return"string"==typeof e&&(e=this.marks[e]),e.create(t)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function vwe(e,t){let n=[];for(let r=0;r<t.length;r++){let s=t[r],i=e.marks[s],a=i;if(i)n.push(i);else for(let t in e.marks){let r=e.marks[t];("_"==s||r.spec.group&&r.spec.group.split(" ").indexOf(s)>-1)&&n.push(a=r)}if(!a)throw new SyntaxError("Unknown mark type: '"+t[r]+"'")}return n}let ywe=class e{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let n=this.matchedStyles=[];t.forEach(e=>{if(function(e){return null!=e.tag}(e))this.tags.push(e);else if(function(e){return null!=e.style}(e)){let t=/[^=]*/.exec(e.style)[0];n.indexOf(t)<0&&n.push(t),this.styles.push(e)}}),this.normalizeLists=!this.tags.some(t=>{if(!/^(ul|ol)\b/.test(t.tag)||!t.node)return!1;let n=e.nodes[t.node];return n.contentMatch.matchType(n)})}parse(e,t={}){let n=new Swe(this,t,!1);return n.addAll(e,Pbe.none,t.from,t.to),n.finish()}parseSlice(e,t={}){let n=new Swe(this,t,!0);return n.addAll(e,Pbe.none,t.from,t.to),Rbe.maxOpen(n.finish())}matchTag(e,t,n){for(let r=n?this.tags.indexOf(n)+1:0;r<this.tags.length;r++){let n=this.tags[r];if(Mwe(e,n.tag)&&(void 0===n.namespace||e.namespaceURI==n.namespace)&&(!n.context||t.matchesContext(n.context))){if(n.getAttrs){let t=n.getAttrs(e);if(!1===t)continue;n.attrs=t||void 0}return n}}}matchStyle(e,t,n,r){for(let s=r?this.styles.indexOf(r)+1:0;s<this.styles.length;s++){let r=this.styles[s],i=r.style;if(!(0!=i.indexOf(e)||r.context&&!n.matchesContext(r.context)||i.length>e.length&&(61!=i.charCodeAt(e.length)||i.slice(e.length+1)!=t))){if(r.getAttrs){let e=r.getAttrs(t);if(!1===e)continue;r.attrs=e||void 0}return r}}}static schemaRules(e){let t=[];function n(e){let n=null==e.priority?50:e.priority,r=0;for(;r<t.length;r++){let e=t[r];if((null==e.priority?50:e.priority)<n)break}t.splice(r,0,e)}for(let r in e.marks){let t=e.marks[r].spec.parseDOM;t&&t.forEach(e=>{n(e=Cwe(e)),e.mark||e.ignore||e.clearMark||(e.mark=r)})}for(let r in e.nodes){let t=e.nodes[r].spec.parseDOM;t&&t.forEach(e=>{n(e=Cwe(e)),e.node||e.ignore||e.mark||(e.node=r)})}return t}static fromSchema(t){return t.cached.domParser||(t.cached.domParser=new e(t,e.schemaRules(t)))}};const bwe={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},wwe={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},jwe={ol:!0,ul:!0};function Nwe(e,t,n){return null!=t?(t?1:0)|("full"===t?2:0):e&&"pre"==e.whitespace?3:-5&n}class _we{constructor(e,t,n,r,s,i){this.type=e,this.attrs=t,this.marks=n,this.solid=r,this.options=i,this.content=[],this.activeMarks=Pbe.none,this.match=s||(4&i?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(Ebe.from(e));if(!t){let t,n=this.type.contentMatch;return(t=n.findWrapping(e.type))?(this.match=n,t):null}this.match=this.type.contentMatch.matchFragment(t)}return this.match.findWrapping(e.type)}finish(e){if(!(1&this.options)){let e,t=this.content[this.content.length-1];if(t&&t.isText&&(e=/[ \t\r\n\u000c]+$/.exec(t.text))){let n=t;t.text.length==e[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-e[0].length))}}let t=Ebe.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(Ebe.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!bwe.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class Swe{constructor(e,t,n){this.parser=e,this.options=t,this.isOpen=n,this.open=0,this.localPreserveWS=!1;let r,s=t.topNode,i=Nwe(null,t.preserveWhitespace,0)|(n?4:0);r=s?new _we(s.type,s.attrs,Pbe.none,!0,t.topMatch||s.type.contentMatch,i):new _we(n?null:e.schema.topNodeType,null,Pbe.none,!0,null,i),this.nodes=[r],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,t){3==e.nodeType?this.addTextNode(e,t):1==e.nodeType&&this.addElement(e,t)}addTextNode(e,t){let n=e.nodeValue,r=this.top,s=2&r.options?"full":this.localPreserveWS||(1&r.options)>0;if("full"===s||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(n)){if(s)n="full"!==s?n.replace(/\r?\n|\r/g," "):n.replace(/\r\n?/g,"\n");else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){let t=r.content[r.content.length-1],s=e.previousSibling;(!t||s&&"BR"==s.nodeName||t.isText&&/[ \t\r\n\u000c]$/.test(t.text))&&(n=n.slice(1))}n&&this.insertNode(this.parser.schema.text(n),t,!/\S/.test(n)),this.findInText(e)}else this.findInside(e)}addElement(e,t,n){let r=this.localPreserveWS,s=this.top;("PRE"==e.tagName||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let i,a=e.nodeName.toLowerCase();jwe.hasOwnProperty(a)&&this.parser.normalizeLists&&function(e){for(let t=e.firstChild,n=null;t;t=t.nextSibling){let e=1==t.nodeType?t.nodeName.toLowerCase():null;e&&jwe.hasOwnProperty(e)&&n?(n.appendChild(t),t=n):"li"==e?n=t:e&&(n=null)}}(e);let o=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(i=this.parser.matchTag(e,this,n));e:if(o?o.ignore:wwe.hasOwnProperty(a))this.findInside(e),this.ignoreFallback(e,t);else if(!o||o.skip||o.closeParent){o&&o.closeParent?this.open=Math.max(0,this.open-1):o&&o.skip.nodeType&&(e=o.skip);let n,r=this.needsBlock;if(bwe.hasOwnProperty(a))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),n=!0,s.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);break e}let i=o&&o.skip?t:this.readStyles(e,t);i&&this.addAll(e,i),n&&this.sync(s),this.needsBlock=r}else{let n=this.readStyles(e,t);n&&this.addElementByRule(e,o,n,!1===o.consuming?i:void 0)}this.localPreserveWS=r}leafFallback(e,t){"BR"==e.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode("\n"),t)}ignoreFallback(e,t){"BR"!=e.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"),t,!0)}readStyles(e,t){let n=e.style;if(n&&n.length)for(let r=0;r<this.parser.matchedStyles.length;r++){let e=this.parser.matchedStyles[r],s=n.getPropertyValue(e);if(s)for(let n;;){let r=this.parser.matchStyle(e,s,this,n);if(!r)break;if(r.ignore)return null;if(t=r.clearMark?t.filter(e=>!r.clearMark(e)):t.concat(this.parser.schema.marks[r.mark].create(r.attrs)),!1!==r.consuming)break;n=r}}return t}addElementByRule(e,t,n,r){let s,i;if(t.node)if(i=this.parser.schema.nodes[t.node],i.isLeaf)this.insertNode(i.create(t.attrs),n,"BR"==e.nodeName)||this.leafFallback(e,n);else{let e=this.enter(i,t.attrs||null,n,t.preserveWhitespace);e&&(s=!0,n=e)}else{let e=this.parser.schema.marks[t.mark];n=n.concat(e.create(t.attrs))}let a=this.top;if(i&&i.isLeaf)this.findInside(e);else if(r)this.addElement(e,n,r);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(e=>this.insertNode(e,n,!1));else{let r=e;"string"==typeof t.contentElement?r=e.querySelector(t.contentElement):"function"==typeof t.contentElement?r=t.contentElement(e):t.contentElement&&(r=t.contentElement),this.findAround(e,r,!0),this.addAll(r,n),this.findAround(e,r,!1)}s&&this.sync(a)&&this.open--}addAll(e,t,n,r){let s=n||0;for(let i=n?e.childNodes[n]:e.firstChild,a=null==r?null:e.childNodes[r];i!=a;i=i.nextSibling,++s)this.findAtPoint(e,s),this.addDOM(i,t);this.findAtPoint(e,s)}findPlace(e,t,n){let r,s;for(let i=this.open,a=0;i>=0;i--){let t=this.nodes[i],o=t.findWrapping(e);if(o&&(!r||r.length>o.length+a)&&(r=o,s=t,!o.length))break;if(t.solid){if(n)break;a+=2}}if(!r)return null;this.sync(s);for(let i=0;i<r.length;i++)t=this.enterInner(r[i],null,t,!1);return t}insertNode(e,t,n){if(e.isInline&&this.needsBlock&&!this.top.type){let e=this.textblockFromContext();e&&(t=this.enterInner(e,null,t))}let r=this.findPlace(e,t,n);if(r){this.closeExtra();let t=this.top;t.match&&(t.match=t.match.matchType(e.type));let n=Pbe.none;for(let s of r.concat(e.marks))(t.type?t.type.allowsMarkType(s.type):Ewe(s.type,e.type))&&(n=s.addToSet(n));return t.content.push(e.mark(n)),!0}return!1}enter(e,t,n,r){let s=this.findPlace(e.create(t),n,!1);return s&&(s=this.enterInner(e,t,n,!0,r)),s}enterInner(e,t,n,r=!1,s){this.closeExtra();let i=this.top;i.match=i.match&&i.match.matchType(e);let a=Nwe(e,s,i.options);4&i.options&&0==i.content.length&&(a|=4);let o=Pbe.none;return n=n.filter(t=>!(i.type?i.type.allowsMarkType(t.type):Ewe(t.type,e))||(o=t.addToSet(o),!1)),this.nodes.push(new _we(e,t,o,r,null,a)),this.open++,n}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!(!this.isOpen&&!this.options.topOpen))}sync(e){for(let t=this.open;t>=0;t--){if(this.nodes[t]==e)return this.open=t,!0;this.localPreserveWS&&(this.nodes[t].options|=1)}return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let n=this.nodes[t].content;for(let t=n.length-1;t>=0;t--)e+=n[t].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&this.find[n].offset==t&&(this.find[n].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)null==this.find[t].pos&&1==e.nodeType&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,n){if(e!=t&&this.find)for(let r=0;r<this.find.length;r++)if(null==this.find[r].pos&&1==e.nodeType&&e.contains(this.find[r].node)){t.compareDocumentPosition(this.find[r].node)&(n?2:4)&&(this.find[r].pos=this.currentPos)}}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),n=this.options.context,r=!(this.isOpen||n&&n.parent.type!=this.nodes[0].type),s=-(n?n.depth+1:0)+(r?0:1),i=(e,a)=>{for(;e>=0;e--){let o=t[e];if(""==o){if(e==t.length-1||0==e)continue;for(;a>=s;a--)if(i(e-1,a))return!0;return!1}{let e=a>0||0==a&&r?this.nodes[a].type:n&&a>=s?n.node(a-s).type:null;if(!e||e.name!=o&&!e.isInGroup(o))return!1;a--}}return!0};return i(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let n=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(let t in this.parser.schema.nodes){let e=this.parser.schema.nodes[t];if(e.isTextblock&&e.defaultAttrs)return e}}}function Mwe(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function Cwe(e){let t={};for(let n in e)t[n]=e[n];return t}function Ewe(e,t){let n=t.schema.nodes;for(let r in n){let s=n[r];if(!s.allowsMarkType(e))continue;let i=[],a=e=>{i.push(e);for(let n=0;n<e.edgeCount;n++){let{type:r,next:s}=e.edge(n);if(r==t)return!0;if(i.indexOf(s)<0&&a(s))return!0}};if(a(s.contentMatch))return!0}}class kwe{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},n){n||(n=Twe(t).createDocumentFragment());let r=n,s=[];return e.forEach(e=>{if(s.length||e.marks.length){let n=0,i=0;for(;n<s.length&&i<e.marks.length;){let t=e.marks[i];if(this.marks[t.type.name]){if(!t.eq(s[n][0])||!1===t.type.spec.spanning)break;n++,i++}else i++}for(;n<s.length;)r=s.pop()[1];for(;i<e.marks.length;){let n=e.marks[i++],a=this.serializeMark(n,e.isInline,t);a&&(s.push([n,r]),r.appendChild(a.dom),r=a.contentDOM||a.dom)}}r.appendChild(this.serializeNodeInner(e,t))}),n}serializeNodeInner(e,t){let{dom:n,contentDOM:r}=Rwe(Twe(t),this.nodes[e.type.name](e),null,e.attrs);if(r){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,r)}return n}serializeNode(e,t={}){let n=this.serializeNodeInner(e,t);for(let r=e.marks.length-1;r>=0;r--){let s=this.serializeMark(e.marks[r],e.isInline,t);s&&((s.contentDOM||s.dom).appendChild(n),n=s.dom)}return n}serializeMark(e,t,n={}){let r=this.marks[e.type.name];return r&&Rwe(Twe(n),r(e,t),null,e.attrs)}static renderSpec(e,t,n=null,r){return Rwe(e,t,n,r)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new kwe(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=Awe(e.nodes);return t.text||(t.text=e=>e.text),t}static marksFromSchema(e){return Awe(e.marks)}}function Awe(e){let t={};for(let n in e){let r=e[n].spec.toDOM;r&&(t[n]=r)}return t}function Twe(e){return e.document||window.document}const Pwe=new WeakMap;function Owe(e){let t=Pwe.get(e);return void 0===t&&Pwe.set(e,t=function(e){let t=null;function n(e){if(e&&"object"==typeof e)if(Array.isArray(e))if("string"==typeof e[0])t||(t=[]),t.push(e);else for(let t=0;t<e.length;t++)n(e[t]);else for(let t in e)n(e[t])}return n(e),t}(e)),t}function Rwe(e,t,n,r){if("string"==typeof t)return{dom:e.createTextNode(t)};if(null!=t.nodeType)return{dom:t};if(t.dom&&null!=t.dom.nodeType)return t;let s,i=t[0];if("string"!=typeof i)throw new RangeError("Invalid array passed to renderSpec");if(r&&(s=Owe(r))&&s.indexOf(t)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let a,o=i.indexOf(" ");o>0&&(n=i.slice(0,o),i=i.slice(o+1));let l=n?e.createElementNS(n,i):e.createElement(i),c=t[1],d=1;if(c&&"object"==typeof c&&null==c.nodeType&&!Array.isArray(c)){d=2;for(let e in c)if(null!=c[e]){let t=e.indexOf(" ");t>0?l.setAttributeNS(e.slice(0,t),e.slice(t+1),c[e]):"style"==e&&l.style?l.style.cssText=c[e]:l.setAttribute(e,c[e])}}for(let u=d;u<t.length;u++){let s=t[u];if(0===s){if(u<t.length-1||u>d)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}{let{dom:t,contentDOM:i}=Rwe(e,s,n,r);if(l.appendChild(t),i){if(a)throw new RangeError("Multiple content holes");a=i}}}return{dom:l,contentDOM:a}}const Iwe=Math.pow(2,16);function Dwe(e,t){return e+t*Iwe}function Lwe(e){return 65535&e}class Fwe{constructor(e,t,n){this.pos=e,this.delInfo=t,this.recover=n}get deleted(){return(8&this.delInfo)>0}get deletedBefore(){return(5&this.delInfo)>0}get deletedAfter(){return(6&this.delInfo)>0}get deletedAcross(){return(4&this.delInfo)>0}}class zwe{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&zwe.empty)return zwe.empty}recover(e){let t=0,n=Lwe(e);if(!this.inverted)for(let r=0;r<n;r++)t+=this.ranges[3*r+2]-this.ranges[3*r+1];return this.ranges[3*n]+t+function(e){return(e-(65535&e))/Iwe}(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,n){let r=0,s=this.inverted?2:1,i=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let o=this.ranges[a]-(this.inverted?r:0);if(o>e)break;let l=this.ranges[a+s],c=this.ranges[a+i],d=o+l;if(e<=d){let s=o+r+((l?e==o?-1:e==d?1:t:t)<0?0:c);if(n)return s;let i=e==(t<0?o:d)?null:Dwe(a/3,e-o),u=e==o?2:e==d?1:4;return(t<0?e!=o:e!=d)&&(u|=8),new Fwe(s,u,i)}r+=c-l}return n?e+r:new Fwe(e+r,0,null)}touches(e,t){let n=0,r=Lwe(t),s=this.inverted?2:1,i=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let t=this.ranges[a]-(this.inverted?n:0);if(t>e)break;let o=this.ranges[a+s];if(e<=t+o&&a==3*r)return!0;n+=this.ranges[a+i]-o}return!1}forEach(e){let t=this.inverted?2:1,n=this.inverted?1:2;for(let r=0,s=0;r<this.ranges.length;r+=3){let i=this.ranges[r],a=i-(this.inverted?s:0),o=i+(this.inverted?0:s),l=this.ranges[r+t],c=this.ranges[r+n];e(a,a+l,o,o+c),s+=c-l}}invert(){return new zwe(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return 0==e?zwe.empty:new zwe(e<0?[0,-e,0]:[0,0,e])}}zwe.empty=new zwe([]);class Bwe{constructor(e,t,n=0,r=(e?e.length:0)){this.mirror=t,this.from=n,this.to=r,this._maps=e||[],this.ownData=!(e||t)}get maps(){return this._maps}slice(e=0,t=this.maps.length){return new Bwe(this._maps,this.mirror,e,t)}appendMap(e,t){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),null!=t&&this.setMirror(this._maps.length-1,t)}appendMapping(e){for(let t=0,n=this._maps.length;t<e._maps.length;t++){let r=e.getMirror(t);this.appendMap(e._maps[t],null!=r&&r<t?n+r:void 0)}}getMirror(e){if(this.mirror)for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,n=this._maps.length+e._maps.length;t>=0;t--){let r=e.getMirror(t);this.appendMap(e._maps[t].invert(),null!=r&&r>t?n-r-1:void 0)}}invert(){let e=new Bwe;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let n=this.from;n<this.to;n++)e=this._maps[n].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,n){let r=0;for(let s=this.from;s<this.to;s++){let n=this._maps[s].mapResult(e,t);if(null!=n.recover){let t=this.getMirror(s);if(null!=t&&t>s&&t<this.to){s=t,e=this._maps[t].recover(n.recover);continue}}r|=n.delInfo,e=n.pos}return n?e:new Fwe(e,r,null)}}const Uwe=Object.create(null);class Vwe{getMap(){return zwe.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let n=Uwe[t.stepType];if(!n)throw new RangeError(`No step type ${t.stepType} defined`);return n.fromJSON(e,t)}static jsonID(e,t){if(e in Uwe)throw new RangeError("Duplicate use of step JSON ID "+e);return Uwe[e]=t,t.prototype.jsonID=e,t}}class Hwe{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new Hwe(e,null)}static fail(e){return new Hwe(null,e)}static fromReplace(e,t,n,r){try{return Hwe.ok(e.replace(t,n,r))}catch(s){if(s instanceof Obe)return Hwe.fail(s.message);throw s}}}function Wwe(e,t,n){let r=[];for(let s=0;s<e.childCount;s++){let i=e.child(s);i.content.size&&(i=i.copy(Wwe(i.content,t,i))),i.isInline&&(i=t(i,n,s)),r.push(i)}return Ebe.fromArray(r)}class $we extends Vwe{constructor(e,t,n){super(),this.from=e,this.to=t,this.mark=n}apply(e){let t=e.slice(this.from,this.to),n=e.resolve(this.from),r=n.node(n.sharedDepth(this.to)),s=new Rbe(Wwe(t.content,(e,t)=>e.isAtom&&t.type.allowsMarkType(this.mark.type)?e.mark(this.mark.addToSet(e.marks)):e,r),t.openStart,t.openEnd);return Hwe.fromReplace(e,this.from,this.to,s)}invert(){return new Gwe(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deleted&&n.deleted||t.pos>=n.pos?null:new $we(t.pos,n.pos,this.mark)}merge(e){return e instanceof $we&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new $we(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new $we(t.from,t.to,e.markFromJSON(t.mark))}}Vwe.jsonID("addMark",$we);class Gwe extends Vwe{constructor(e,t,n){super(),this.from=e,this.to=t,this.mark=n}apply(e){let t=e.slice(this.from,this.to),n=new Rbe(Wwe(t.content,e=>e.mark(this.mark.removeFromSet(e.marks)),e),t.openStart,t.openEnd);return Hwe.fromReplace(e,this.from,this.to,n)}invert(){return new $we(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deleted&&n.deleted||t.pos>=n.pos?null:new Gwe(t.pos,n.pos,this.mark)}merge(e){return e instanceof Gwe&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Gwe(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Gwe(t.from,t.to,e.markFromJSON(t.mark))}}Vwe.jsonID("removeMark",Gwe);class qwe extends Vwe{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return Hwe.fail("No node at mark step's position");let n=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return Hwe.fromReplace(e,this.pos,this.pos+1,new Rbe(Ebe.from(n),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let e=this.mark.addToSet(t.marks);if(e.length==t.marks.length){for(let n=0;n<t.marks.length;n++)if(!t.marks[n].isInSet(e))return new qwe(this.pos,t.marks[n]);return new qwe(this.pos,this.mark)}}return new Xwe(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new qwe(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if("number"!=typeof t.pos)throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new qwe(t.pos,e.markFromJSON(t.mark))}}Vwe.jsonID("addNodeMark",qwe);class Xwe extends Vwe{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return Hwe.fail("No node at mark step's position");let n=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return Hwe.fromReplace(e,this.pos,this.pos+1,new Rbe(Ebe.from(n),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return t&&this.mark.isInSet(t.marks)?new qwe(this.pos,this.mark):this}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Xwe(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if("number"!=typeof t.pos)throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Xwe(t.pos,e.markFromJSON(t.mark))}}Vwe.jsonID("removeNodeMark",Xwe);class Kwe extends Vwe{constructor(e,t,n,r=!1){super(),this.from=e,this.to=t,this.slice=n,this.structure=r}apply(e){return this.structure&&Zwe(e,this.from,this.to)?Hwe.fail("Structure replace would overwrite content"):Hwe.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new zwe([this.from,this.to-this.from,this.slice.size])}invert(e){return new Kwe(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deletedAcross&&n.deletedAcross?null:new Kwe(t.pos,Math.max(t.pos,n.pos),this.slice,this.structure)}merge(e){if(!(e instanceof Kwe)||e.structure||this.structure)return null;if(this.from+this.slice.size!=e.from||this.slice.openEnd||e.slice.openStart){if(e.to!=this.from||this.slice.openStart||e.slice.openEnd)return null;{let t=this.slice.size+e.slice.size==0?Rbe.empty:new Rbe(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Kwe(e.from,this.to,t,this.structure)}}{let t=this.slice.size+e.slice.size==0?Rbe.empty:new Rbe(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Kwe(this.from,this.to+(e.to-e.from),t,this.structure)}}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Kwe(t.from,t.to,Rbe.fromJSON(e,t.slice),!!t.structure)}}Vwe.jsonID("replace",Kwe);class Ywe extends Vwe{constructor(e,t,n,r,s,i,a=!1){super(),this.from=e,this.to=t,this.gapFrom=n,this.gapTo=r,this.slice=s,this.insert=i,this.structure=a}apply(e){if(this.structure&&(Zwe(e,this.from,this.gapFrom)||Zwe(e,this.gapTo,this.to)))return Hwe.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return Hwe.fail("Gap is not a flat range");let n=this.slice.insertAt(this.insert,t.content);return n?Hwe.fromReplace(e,this.from,this.to,n):Hwe.fail("Content does not fit in gap")}getMap(){return new zwe([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new Ywe(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1),r=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),s=this.to==this.gapTo?n.pos:e.map(this.gapTo,1);return t.deletedAcross&&n.deletedAcross||r<t.pos||s>n.pos?null:new Ywe(t.pos,n.pos,r,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to||"number"!=typeof t.gapFrom||"number"!=typeof t.gapTo||"number"!=typeof t.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Ywe(t.from,t.to,t.gapFrom,t.gapTo,Rbe.fromJSON(e,t.slice),t.insert,!!t.structure)}}function Zwe(e,t,n){let r=e.resolve(t),s=n-t,i=r.depth;for(;s>0&&i>0&&r.indexAfter(i)==r.node(i).childCount;)i--,s--;if(s>0){let e=r.node(i).maybeChild(r.indexAfter(i));for(;s>0;){if(!e||e.isLeaf)return!0;e=e.firstChild,s--}}return!1}function Jwe(e,t,n,r=n.contentMatch,s=!0){let i=e.doc.nodeAt(t),a=[],o=t+1;for(let l=0;l<i.childCount;l++){let t=i.child(l),c=o+t.nodeSize,d=r.matchType(t.type);if(d){r=d;for(let r=0;r<t.marks.length;r++)n.allowsMarkType(t.marks[r].type)||e.step(new Gwe(o,c,t.marks[r]));if(s&&t.isText&&"pre"!=n.whitespace){let e,r,s=/\r?\n|\r/g;for(;e=s.exec(t.text);)r||(r=new Rbe(Ebe.from(n.schema.text(" ",n.allowedMarks(t.marks))),0,0)),a.push(new Kwe(o+e.index,o+e.index+e[0].length,r))}}else a.push(new Kwe(o,c,Rbe.empty));o=c}if(!r.validEnd){let t=r.fillBefore(Ebe.empty,!0);e.replace(o,o,new Rbe(t,0,0))}for(let l=a.length-1;l>=0;l--)e.step(a[l])}function Qwe(e,t,n){return(0==t||e.canReplace(t,e.childCount))&&(n==e.childCount||e.canReplace(0,n))}function eje(e){let t=e.parent.content.cutByIndex(e.startIndex,e.endIndex);for(let n=e.depth;;--n){let r=e.$from.node(n),s=e.$from.index(n),i=e.$to.indexAfter(n);if(n<e.depth&&r.canReplace(s,i,t))return n;if(0==n||r.type.spec.isolating||!Qwe(r,s,i))break}return null}function tje(e,t,n=null,r=e){let s=function(e,t){let{parent:n,startIndex:r,endIndex:s}=e,i=n.contentMatchAt(r).findWrapping(t);if(!i)return null;let a=i.length?i[0]:t;return n.canReplaceWith(r,s,a)?i:null}(e,t),i=s&&function(e,t){let{parent:n,startIndex:r,endIndex:s}=e,i=n.child(r),a=t.contentMatch.findWrapping(i.type);if(!a)return null;let o=(a.length?a[a.length-1]:t).contentMatch;for(let l=r;o&&l<s;l++)o=o.matchType(n.child(l).type);return o&&o.validEnd?a:null}(r,t);return i?s.map(nje).concat({type:t,attrs:n}).concat(i.map(nje)):null}function nje(e){return{type:e,attrs:null}}function rje(e,t,n,r){t.forEach((s,i)=>{if(s.isText){let a,o=/\r?\n|\r/g;for(;a=o.exec(s.text);){let s=e.mapping.slice(r).map(n+1+i+a.index);e.replaceWith(s,s+1,t.type.schema.linebreakReplacement.create())}}})}function sje(e,t,n,r){t.forEach((s,i)=>{if(s.type==s.type.schema.linebreakReplacement){let s=e.mapping.slice(r).map(n+1+i);e.replaceWith(s,s+1,t.type.schema.text("\n"))}})}function ije(e,t,n=1,r){let s=e.resolve(t),i=s.depth-n,a=r&&r[r.length-1]||s.parent;if(i<0||s.parent.type.spec.isolating||!s.parent.canReplace(s.index(),s.parent.childCount)||!a.type.validContent(s.parent.content.cutByIndex(s.index(),s.parent.childCount)))return!1;for(let c=s.depth-1,d=n-2;c>i;c--,d--){let e=s.node(c),t=s.index(c);if(e.type.spec.isolating)return!1;let n=e.content.cutByIndex(t,e.childCount),i=r&&r[d+1];i&&(n=n.replaceChild(0,i.type.create(i.attrs)));let a=r&&r[d]||e;if(!e.canReplace(t+1,e.childCount)||!a.type.validContent(n))return!1}let o=s.indexAfter(i),l=r&&r[0];return s.node(i).canReplaceWith(o,o,l?l.type:s.node(i+1).type)}function aje(e,t){let n=e.resolve(t),r=n.index();return oje(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function oje(e,t){return!(!e||!t||e.isLeaf||!function(e,t){t.content.size||e.type.compatibleContent(t.type);let n=e.contentMatchAt(e.childCount),{linebreakReplacement:r}=e.type.schema;for(let s=0;s<t.childCount;s++){let i=t.child(s),a=i.type==r?e.type.schema.nodes.text:i.type;if(n=n.matchType(a),!n)return!1;if(!e.type.allowsMarks(i.marks))return!1}return n.validEnd}(e,t))}function lje(e,t,n=-1){let r=e.resolve(t);for(let s=r.depth;;s--){let e,i,a=r.index(s);if(s==r.depth?(e=r.nodeBefore,i=r.nodeAfter):n>0?(e=r.node(s+1),a++,i=r.node(s).maybeChild(a)):(e=r.node(s).maybeChild(a-1),i=r.node(s+1)),e&&!e.isTextblock&&oje(e,i)&&r.node(s).canReplace(a,a+1))return t;if(0==s)break;t=n<0?r.before(s):r.after(s)}}function cje(e,t,n){let r=e.resolve(t);if(!n.content.size)return t;let s=n.content;for(let i=0;i<n.openStart;i++)s=s.firstChild.content;for(let i=1;i<=(0==n.openStart&&n.size?2:1);i++)for(let e=r.depth;e>=0;e--){let t=e==r.depth?0:r.pos<=(r.start(e+1)+r.end(e+1))/2?-1:1,n=r.index(e)+(t>0?1:0),a=r.node(e),o=!1;if(1==i)o=a.canReplace(n,n,s);else{let e=a.contentMatchAt(n).findWrapping(s.firstChild.type);o=e&&a.canReplaceWith(n,n,e[0])}if(o)return 0==t?r.pos:t<0?r.before(e+1):r.after(e+1)}return null}function dje(e,t,n=t,r=Rbe.empty){if(t==n&&!r.size)return null;let s=e.resolve(t),i=e.resolve(n);return uje(s,i,r)?new Kwe(t,n,r):new hje(s,i,r).fit()}function uje(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}Vwe.jsonID("replaceAround",Ywe);class hje{constructor(e,t,n){this.$from=e,this.$to=t,this.unplaced=n,this.frontier=[],this.placed=Ebe.empty;for(let r=0;r<=e.depth;r++){let t=e.node(r);this.frontier.push({type:t.type,match:t.contentMatchAt(e.indexAfter(r))})}for(let r=e.depth;r>0;r--)this.placed=Ebe.from(e.node(r).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let e=this.findFittable();e?this.placeNodes(e):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,n=this.$from,r=this.close(e<0?this.$to:n.doc.resolve(e));if(!r)return null;let s=this.placed,i=n.depth,a=r.depth;for(;i&&a&&1==s.childCount;)s=s.firstChild.content,i--,a--;let o=new Rbe(s,i,a);return e>-1?new Ywe(n.pos,e,this.$to.pos,this.$to.end(),o,t):o.size||n.pos!=this.$to.pos?new Kwe(n.pos,r.pos,o):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,n=0,r=this.unplaced.openEnd;n<e;n++){let s=t.firstChild;if(t.childCount>1&&(r=0),s.type.spec.isolating&&r<=n){e=n;break}t=s.content}for(let t=1;t<=2;t++)for(let n=1==t?e:this.unplaced.openStart;n>=0;n--){let e,r=null;n?(r=fje(this.unplaced.content,n-1).firstChild,e=r.content):e=this.unplaced.content;let s=e.firstChild;for(let i=this.depth;i>=0;i--){let e,{type:a,match:o}=this.frontier[i],l=null;if(1==t&&(s?o.matchType(s.type)||(l=o.fillBefore(Ebe.from(s),!1)):r&&a.compatibleContent(r.type)))return{sliceDepth:n,frontierDepth:i,parent:r,inject:l};if(2==t&&s&&(e=o.findWrapping(s.type)))return{sliceDepth:n,frontierDepth:i,parent:r,wrap:e};if(r&&o.matchType(r.type))break}}}openMore(){let{content:e,openStart:t,openEnd:n}=this.unplaced,r=fje(e,t);return!(!r.childCount||r.firstChild.isLeaf)&&(this.unplaced=new Rbe(e,t+1,Math.max(n,r.size+t>=e.size-n?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:n}=this.unplaced,r=fje(e,t);if(r.childCount<=1&&t>0){let s=e.size-t<=t+r.size;this.unplaced=new Rbe(pje(e,t-1,1),t-1,s?t-1:n)}else this.unplaced=new Rbe(pje(e,t,1),t,n)}placeNodes({sliceDepth:e,frontierDepth:t,parent:n,inject:r,wrap:s}){for(;this.depth>t;)this.closeFrontierNode();if(s)for(let m=0;m<s.length;m++)this.openFrontierNode(s[m]);let i=this.unplaced,a=n?n.content:i.content,o=i.openStart-e,l=0,c=[],{match:d,type:u}=this.frontier[t];if(r){for(let e=0;e<r.childCount;e++)c.push(r.child(e));d=d.matchFragment(r)}let h=a.size+e-(i.content.size-i.openEnd);for(;l<a.childCount;){let e=a.child(l),t=d.matchType(e.type);if(!t)break;l++,(l>1||0==o||e.content.size)&&(d=t,c.push(gje(e.mark(u.allowedMarks(e.marks)),1==l?o:0,l==a.childCount?h:-1)))}let p=l==a.childCount;p||(h=-1),this.placed=mje(this.placed,t,Ebe.from(c)),this.frontier[t].match=d,p&&h<0&&n&&n.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let m=0,f=a;m<h;m++){let e=f.lastChild;this.frontier.push({type:e.type,match:e.contentMatchAt(e.childCount)}),f=e.content}this.unplaced=p?0==e?Rbe.empty:new Rbe(pje(i.content,e-1,1),e-1,h<0?i.openEnd:e-1):new Rbe(pje(i.content,e,l),i.openStart,i.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e,t=this.frontier[this.depth];if(!t.type.isTextblock||!xje(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(e=this.findCloseLevel(this.$to))&&e.depth==this.depth)return-1;let{depth:n}=this.$to,r=this.$to.after(n);for(;n>1&&r==this.$to.end(--n);)++r;return r}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:n,type:r}=this.frontier[t],s=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),i=xje(e,t,r,n,s);if(i){for(let n=t-1;n>=0;n--){let{match:t,type:r}=this.frontier[n],s=xje(e,n,r,t,!0);if(!s||s.childCount)continue e}return{depth:t,fit:i,move:s?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=mje(this.placed,t.depth,t.fit)),e=t.move;for(let n=t.depth+1;n<=e.depth;n++){let t=e.node(n),r=t.type.contentMatch.fillBefore(t.content,!0,e.index(n));this.openFrontierNode(t.type,t.attrs,r)}return e}openFrontierNode(e,t=null,n){let r=this.frontier[this.depth];r.match=r.match.matchType(e),this.placed=mje(this.placed,this.depth,Ebe.from(e.create(t,n))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let e=this.frontier.pop().match.fillBefore(Ebe.empty,!0);e.childCount&&(this.placed=mje(this.placed,this.frontier.length,e))}}function pje(e,t,n){return 0==t?e.cutByIndex(n,e.childCount):e.replaceChild(0,e.firstChild.copy(pje(e.firstChild.content,t-1,n)))}function mje(e,t,n){return 0==t?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(mje(e.lastChild.content,t-1,n)))}function fje(e,t){for(let n=0;n<t;n++)e=e.firstChild.content;return e}function gje(e,t,n){if(t<=0)return e;let r=e.content;return t>1&&(r=r.replaceChild(0,gje(r.firstChild,t-1,1==r.childCount?n-1:0))),t>0&&(r=e.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(e.type.contentMatch.matchFragment(r).fillBefore(Ebe.empty,!0)))),e.copy(r)}function xje(e,t,n,r,s){let i=e.node(t),a=s?e.indexAfter(t):e.index(t);if(a==i.childCount&&!n.compatibleContent(i.type))return null;let o=r.fillBefore(i.content,!0,a);return o&&!function(e,t,n){for(let r=n;r<t.childCount;r++)if(!e.allowsMarks(t.child(r).marks))return!0;return!1}(n,i.content,a)?o:null}function vje(e){return e.spec.defining||e.spec.definingForContent}function yje(e,t,n,r,s){if(t<n){let s=e.firstChild;e=e.replaceChild(0,s.copy(yje(s.content,t+1,n,r,s)))}if(t>r){let t=s.contentMatchAt(0),n=t.fillBefore(e).append(e);e=n.append(t.matchFragment(n).fillBefore(Ebe.empty,!0))}return e}function bje(e,t){let n=[];for(let r=Math.min(e.depth,t.depth);r>=0;r--){let s=e.start(r);if(s<e.pos-(e.depth-r)||t.end(r)>t.pos+(t.depth-r)||e.node(r).type.spec.isolating||t.node(r).type.spec.isolating)break;(s==t.start(r)||r==e.depth&&r==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&r&&t.start(r-1)==s-1)&&n.push(r)}return n}class wje extends Vwe{constructor(e,t,n){super(),this.pos=e,this.attr=t,this.value=n}apply(e){let t=e.nodeAt(this.pos);if(!t)return Hwe.fail("No node at attribute step's position");let n=Object.create(null);for(let s in t.attrs)n[s]=t.attrs[s];n[this.attr]=this.value;let r=t.type.create(n,null,t.marks);return Hwe.fromReplace(e,this.pos,this.pos+1,new Rbe(Ebe.from(r),0,t.isLeaf?0:1))}getMap(){return zwe.empty}invert(e){return new wje(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new wje(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if("number"!=typeof t.pos||"string"!=typeof t.attr)throw new RangeError("Invalid input for AttrStep.fromJSON");return new wje(t.pos,t.attr,t.value)}}Vwe.jsonID("attr",wje);class jje extends Vwe{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let r in e.attrs)t[r]=e.attrs[r];t[this.attr]=this.value;let n=e.type.create(t,e.content,e.marks);return Hwe.ok(n)}getMap(){return zwe.empty}invert(e){return new jje(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if("string"!=typeof t.attr)throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new jje(t.attr,t.value)}}Vwe.jsonID("docAttr",jje);let Nje=class extends Error{};Nje=function e(t){let n=Error.call(this,t);return n.__proto__=e.prototype,n},(Nje.prototype=Object.create(Error.prototype)).constructor=Nje,Nje.prototype.name="TransformError";class _je{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Bwe}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new Nje(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,n=Rbe.empty){let r=dje(this.doc,e,t,n);return r&&this.step(r),this}replaceWith(e,t,n){return this.replace(e,t,new Rbe(Ebe.from(n),0,0))}delete(e,t){return this.replace(e,t,Rbe.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,n){return function(e,t,n,r){if(!r.size)return e.deleteRange(t,n);let s=e.doc.resolve(t),i=e.doc.resolve(n);if(uje(s,i,r))return e.step(new Kwe(t,n,r));let a=bje(s,e.doc.resolve(n));0==a[a.length-1]&&a.pop();let o=-(s.depth+1);a.unshift(o);for(let h=s.depth,p=s.pos-1;h>0;h--,p--){let e=s.node(h).type.spec;if(e.defining||e.definingAsContext||e.isolating)break;a.indexOf(h)>-1?o=h:s.before(h)==p&&a.splice(1,0,-h)}let l=a.indexOf(o),c=[],d=r.openStart;for(let h=r.content,p=0;;p++){let e=h.firstChild;if(c.push(e),p==r.openStart)break;h=e.content}for(let h=d-1;h>=0;h--){let e=c[h],t=vje(e.type);if(t&&!e.sameMarkup(s.node(Math.abs(o)-1)))d=h;else if(t||!e.type.isTextblock)break}for(let h=r.openStart;h>=0;h--){let t=(h+d+1)%(r.openStart+1),o=c[t];if(o)for(let c=0;c<a.length;c++){let d=a[(c+l)%a.length],u=!0;d<0&&(u=!1,d=-d);let h=s.node(d-1),p=s.index(d-1);if(h.canReplaceWith(p,p,o.type,o.marks))return e.replace(s.before(d),u?i.after(d):n,new Rbe(yje(r.content,0,r.openStart,t),t,r.openEnd))}}let u=e.steps.length;for(let h=a.length-1;h>=0&&(e.replace(t,n,r),!(e.steps.length>u));h--){let e=a[h];e<0||(t=s.before(e),n=i.after(e))}}(this,e,t,n),this}replaceRangeWith(e,t,n){return function(e,t,n,r){if(!r.isInline&&t==n&&e.doc.resolve(t).parent.content.size){let s=function(e,t,n){let r=e.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),n))return t;if(0==r.parentOffset)for(let s=r.depth-1;s>=0;s--){let e=r.index(s);if(r.node(s).canReplaceWith(e,e,n))return r.before(s+1);if(e>0)return null}if(r.parentOffset==r.parent.content.size)for(let s=r.depth-1;s>=0;s--){let e=r.indexAfter(s);if(r.node(s).canReplaceWith(e,e,n))return r.after(s+1);if(e<r.node(s).childCount)return null}return null}(e.doc,t,r.type);null!=s&&(t=n=s)}e.replaceRange(t,n,new Rbe(Ebe.from(r),0,0))}(this,e,t,n),this}deleteRange(e,t){return function(e,t,n){let r=e.doc.resolve(t),s=e.doc.resolve(n),i=bje(r,s);for(let a=0;a<i.length;a++){let t=i[a],n=a==i.length-1;if(n&&0==t||r.node(t).type.contentMatch.validEnd)return e.delete(r.start(t),s.end(t));if(t>0&&(n||r.node(t-1).canReplace(r.index(t-1),s.indexAfter(t-1))))return e.delete(r.before(t),s.after(t))}for(let a=1;a<=r.depth&&a<=s.depth;a++)if(t-r.start(a)==r.depth-a&&n>r.end(a)&&s.end(a)-n!=s.depth-a&&r.start(a-1)==s.start(a-1)&&r.node(a-1).canReplace(r.index(a-1),s.index(a-1)))return e.delete(r.before(a),n);e.delete(t,n)}(this,e,t),this}lift(e,t){return function(e,t,n){let{$from:r,$to:s,depth:i}=t,a=r.before(i+1),o=s.after(i+1),l=a,c=o,d=Ebe.empty,u=0;for(let m=i,f=!1;m>n;m--)f||r.index(m)>0?(f=!0,d=Ebe.from(r.node(m).copy(d)),u++):l--;let h=Ebe.empty,p=0;for(let m=i,f=!1;m>n;m--)f||s.after(m+1)<s.end(m)?(f=!0,h=Ebe.from(s.node(m).copy(h)),p++):c++;e.step(new Ywe(l,c,a,o,new Rbe(d.append(h),u,p),d.size-u,!0))}(this,e,t),this}join(e,t=1){return function(e,t,n){let r=null,{linebreakReplacement:s}=e.doc.type.schema,i=e.doc.resolve(t-n),a=i.node().type;if(s&&a.inlineContent){let e="pre"==a.whitespace,t=!!a.contentMatch.matchType(s);e&&!t?r=!1:!e&&t&&(r=!0)}let o=e.steps.length;if(!1===r){let r=e.doc.resolve(t+n);sje(e,r.node(),r.before(),o)}a.inlineContent&&Jwe(e,t+n-1,a,i.node().contentMatchAt(i.index()),null==r);let l=e.mapping.slice(o),c=l.map(t-n);if(e.step(new Kwe(c,l.map(t+n,-1),Rbe.empty,!0)),!0===r){let t=e.doc.resolve(c);rje(e,t.node(),t.before(),e.steps.length)}}(this,e,t),this}wrap(e,t){return function(e,t,n){let r=Ebe.empty;for(let a=n.length-1;a>=0;a--){if(r.size){let e=n[a].type.contentMatch.matchFragment(r);if(!e||!e.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=Ebe.from(n[a].type.create(n[a].attrs,r))}let s=t.start,i=t.end;e.step(new Ywe(s,i,s,i,new Rbe(r,0,0),n.length,!0))}(this,e,t),this}setBlockType(e,t=e,n,r=null){return function(e,t,n,r,s){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let i=e.steps.length;e.doc.nodesBetween(t,n,(t,n)=>{let a="function"==typeof s?s(t):s;if(t.isTextblock&&!t.hasMarkup(r,a)&&function(e,t,n){let r=e.resolve(t),s=r.index();return r.parent.canReplaceWith(s,s+1,n)}(e.doc,e.mapping.slice(i).map(n),r)){let s=null;if(r.schema.linebreakReplacement){let e="pre"==r.whitespace,t=!!r.contentMatch.matchType(r.schema.linebreakReplacement);e&&!t?s=!1:!e&&t&&(s=!0)}!1===s&&sje(e,t,n,i),Jwe(e,e.mapping.slice(i).map(n,1),r,void 0,null===s);let o=e.mapping.slice(i),l=o.map(n,1),c=o.map(n+t.nodeSize,1);return e.step(new Ywe(l,c,l+1,c-1,new Rbe(Ebe.from(r.create(a,null,t.marks)),0,0),1,!0)),!0===s&&rje(e,t,n,i),!1}})}(this,e,t,n,r),this}setNodeMarkup(e,t,n=null,r){return function(e,t,n,r,s){let i=e.doc.nodeAt(t);if(!i)throw new RangeError("No node at given position");n||(n=i.type);let a=n.create(r,null,s||i.marks);if(i.isLeaf)return e.replaceWith(t,t+i.nodeSize,a);if(!n.validContent(i.content))throw new RangeError("Invalid content for node type "+n.name);e.step(new Ywe(t,t+i.nodeSize,t+1,t+i.nodeSize-1,new Rbe(Ebe.from(a),0,0),1,!0))}(this,e,t,n,r),this}setNodeAttribute(e,t,n){return this.step(new wje(e,t,n)),this}setDocAttribute(e,t){return this.step(new jje(e,t)),this}addNodeMark(e,t){return this.step(new qwe(e,t)),this}removeNodeMark(e,t){let n=this.doc.nodeAt(e);if(!n)throw new RangeError("No node at position "+e);if(t instanceof Pbe)t.isInSet(n.marks)&&this.step(new Xwe(e,t));else{let r,s=n.marks,i=[];for(;r=t.isInSet(s);)i.push(new Xwe(e,r)),s=r.removeFromSet(s);for(let e=i.length-1;e>=0;e--)this.step(i[e])}return this}split(e,t=1,n){return function(e,t,n=1,r){let s=e.doc.resolve(t),i=Ebe.empty,a=Ebe.empty;for(let o=s.depth,l=s.depth-n,c=n-1;o>l;o--,c--){i=Ebe.from(s.node(o).copy(i));let e=r&&r[c];a=Ebe.from(e?e.type.create(e.attrs,a):s.node(o).copy(a))}e.step(new Kwe(t,t,new Rbe(i.append(a),n,n),!0))}(this,e,t,n),this}addMark(e,t,n){return function(e,t,n,r){let s,i,a=[],o=[];e.doc.nodesBetween(t,n,(e,l,c)=>{if(!e.isInline)return;let d=e.marks;if(!r.isInSet(d)&&c.type.allowsMarkType(r.type)){let c=Math.max(l,t),u=Math.min(l+e.nodeSize,n),h=r.addToSet(d);for(let e=0;e<d.length;e++)d[e].isInSet(h)||(s&&s.to==c&&s.mark.eq(d[e])?s.to=u:a.push(s=new Gwe(c,u,d[e])));i&&i.to==c?i.to=u:o.push(i=new $we(c,u,r))}}),a.forEach(t=>e.step(t)),o.forEach(t=>e.step(t))}(this,e,t,n),this}removeMark(e,t,n){return function(e,t,n,r){let s=[],i=0;e.doc.nodesBetween(t,n,(e,a)=>{if(!e.isInline)return;i++;let o=null;if(r instanceof gwe){let t,n=e.marks;for(;t=r.isInSet(n);)(o||(o=[])).push(t),n=t.removeFromSet(n)}else r?r.isInSet(e.marks)&&(o=[r]):o=e.marks;if(o&&o.length){let r=Math.min(a+e.nodeSize,n);for(let e=0;e<o.length;e++){let n,l=o[e];for(let e=0;e<s.length;e++){let t=s[e];t.step==i-1&&l.eq(s[e].style)&&(n=t)}n?(n.to=r,n.step=i):s.push({style:l,from:Math.max(a,t),to:r,step:i})}}}),s.forEach(t=>e.step(new Gwe(t.from,t.to,t.style)))}(this,e,t,n),this}clearIncompatible(e,t,n){return Jwe(this,e,t,n),this}}const Sje=Object.create(null);class Mje{constructor(e,t,n){this.$anchor=e,this.$head=t,this.ranges=n||[new Cje(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=Rbe.empty){let n=t.content.lastChild,r=null;for(let a=0;a<t.openEnd;a++)r=n,n=n.lastChild;let s=e.steps.length,i=this.ranges;for(let a=0;a<i.length;a++){let{$from:o,$to:l}=i[a],c=e.mapping.slice(s);e.replaceRange(c.map(o.pos),c.map(l.pos),a?Rbe.empty:t),0==a&&Lje(e,s,(n?n.isInline:r&&r.isTextblock)?-1:1)}}replaceWith(e,t){let n=e.steps.length,r=this.ranges;for(let s=0;s<r.length;s++){let{$from:i,$to:a}=r[s],o=e.mapping.slice(n),l=o.map(i.pos),c=o.map(a.pos);s?e.deleteRange(l,c):(e.replaceRangeWith(l,c,t),Lje(e,n,t.isInline?-1:1))}}static findFrom(e,t,n=!1){let r=e.parent.inlineContent?new Aje(e):Dje(e.node(0),e.parent,e.pos,e.index(),t,n);if(r)return r;for(let s=e.depth-1;s>=0;s--){let r=t<0?Dje(e.node(0),e.node(s),e.before(s+1),e.index(s),t,n):Dje(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,t,n);if(r)return r}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new Rje(e.node(0))}static atStart(e){return Dje(e,e,0,0,1)||new Rje(e)}static atEnd(e){return Dje(e,e,e.content.size,e.childCount,-1)||new Rje(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let n=Sje[t.type];if(!n)throw new RangeError(`No selection type ${t.type} defined`);return n.fromJSON(e,t)}static jsonID(e,t){if(e in Sje)throw new RangeError("Duplicate use of selection JSON ID "+e);return Sje[e]=t,t.prototype.jsonID=e,t}getBookmark(){return Aje.between(this.$anchor,this.$head).getBookmark()}}Mje.prototype.visible=!0;class Cje{constructor(e,t){this.$from=e,this.$to=t}}let Eje=!1;function kje(e){Eje||e.parent.inlineContent||(Eje=!0)}class Aje extends Mje{constructor(e,t=e){kje(e),kje(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let n=e.resolve(t.map(this.head));if(!n.parent.inlineContent)return Mje.near(n);let r=e.resolve(t.map(this.anchor));return new Aje(r.parent.inlineContent?r:n,n)}replace(e,t=Rbe.empty){if(super.replace(e,t),t==Rbe.empty){let t=this.$from.marksAcross(this.$to);t&&e.ensureMarks(t)}}eq(e){return e instanceof Aje&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new Tje(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if("number"!=typeof t.anchor||"number"!=typeof t.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new Aje(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,n=t){let r=e.resolve(t);return new this(r,n==t?r:e.resolve(n))}static between(e,t,n){let r=e.pos-t.pos;if(n&&!r||(n=r>=0?1:-1),!t.parent.inlineContent){let e=Mje.findFrom(t,n,!0)||Mje.findFrom(t,-n,!0);if(!e)return Mje.near(t,n);t=e.$head}return e.parent.inlineContent||(0==r||(e=(Mje.findFrom(e,-n,!0)||Mje.findFrom(e,n,!0)).$anchor).pos<t.pos!=r<0)&&(e=t),new Aje(e,t)}}Mje.jsonID("text",Aje);class Tje{constructor(e,t){this.anchor=e,this.head=t}map(e){return new Tje(e.map(this.anchor),e.map(this.head))}resolve(e){return Aje.between(e.resolve(this.anchor),e.resolve(this.head))}}class Pje extends Mje{constructor(e){let t=e.nodeAfter,n=e.node(0).resolve(e.pos+t.nodeSize);super(e,n),this.node=t}map(e,t){let{deleted:n,pos:r}=t.mapResult(this.anchor),s=e.resolve(r);return n?Mje.near(s):new Pje(s)}content(){return new Rbe(Ebe.from(this.node),0,0)}eq(e){return e instanceof Pje&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Oje(this.anchor)}static fromJSON(e,t){if("number"!=typeof t.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Pje(e.resolve(t.anchor))}static create(e,t){return new Pje(e.resolve(t))}static isSelectable(e){return!e.isText&&!1!==e.type.spec.selectable}}Pje.prototype.visible=!1,Mje.jsonID("node",Pje);class Oje{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:n}=e.mapResult(this.anchor);return t?new Tje(n,n):new Oje(n)}resolve(e){let t=e.resolve(this.anchor),n=t.nodeAfter;return n&&Pje.isSelectable(n)?new Pje(t):Mje.near(t)}}class Rje extends Mje{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=Rbe.empty){if(t==Rbe.empty){e.delete(0,e.doc.content.size);let t=Mje.atStart(e.doc);t.eq(e.selection)||e.setSelection(t)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new Rje(e)}map(e){return new Rje(e)}eq(e){return e instanceof Rje}getBookmark(){return Ije}}Mje.jsonID("all",Rje);const Ije={map(){return this},resolve:e=>new Rje(e)};function Dje(e,t,n,r,s,i=!1){if(t.inlineContent)return Aje.create(e,n);for(let a=r-(s>0?0:1);s>0?a<t.childCount:a>=0;a+=s){let r=t.child(a);if(r.isAtom){if(!i&&Pje.isSelectable(r))return Pje.create(e,n-(s<0?r.nodeSize:0))}else{let t=Dje(e,r,n+s,s<0?r.childCount:0,s,i);if(t)return t}n+=r.nodeSize*s}return null}function Lje(e,t,n){let r=e.steps.length-1;if(r<t)return;let s,i=e.steps[r];(i instanceof Kwe||i instanceof Ywe)&&(e.mapping.maps[r].forEach((e,t,n,r)=>{null==s&&(s=r)}),e.setSelection(Mje.near(e.doc.resolve(s),n)))}class Fje extends _je{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=-3&this.updated|1,this.storedMarks=null,this}get selectionSet(){return(1&this.updated)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=2,this}ensureMarks(e){return Pbe.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(2&this.updated)>0}addStep(e,t){super.addStep(e,t),this.updated=-3&this.updated,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let n=this.selection;return t&&(e=e.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||Pbe.none))),n.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,n){let r=this.doc.type.schema;if(null==t)return e?this.replaceSelectionWith(r.text(e),!0):this.deleteSelection();{if(null==n&&(n=t),n=null==n?t:n,!e)return this.deleteRange(t,n);let s=this.storedMarks;if(!s){let e=this.doc.resolve(t);s=n==t?e.marks():e.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(t,n,r.text(e,s)),this.selection.empty||this.setSelection(Mje.near(this.selection.$to)),this}}setMeta(e,t){return this.meta["string"==typeof e?e:e.key]=t,this}getMeta(e){return this.meta["string"==typeof e?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=4,this}get scrolledIntoView(){return(4&this.updated)>0}}function zje(e,t){return t&&e?e.bind(t):e}class Bje{constructor(e,t,n){this.name=e,this.init=zje(t.init,n),this.apply=zje(t.apply,n)}}const Uje=[new Bje("doc",{init:e=>e.doc||e.schema.topNodeType.createAndFill(),apply:e=>e.doc}),new Bje("selection",{init:(e,t)=>e.selection||Mje.atStart(t.doc),apply:e=>e.selection}),new Bje("storedMarks",{init:e=>e.storedMarks||null,apply:(e,t,n,r)=>r.selection.$cursor?e.storedMarks:null}),new Bje("scrollToSelection",{init:()=>0,apply:(e,t)=>e.scrolledIntoView?t+1:t})];class Vje{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=Uje.slice(),t&&t.forEach(e=>{if(this.pluginsByKey[e.key])throw new RangeError("Adding different instances of a keyed plugin ("+e.key+")");this.plugins.push(e),this.pluginsByKey[e.key]=e,e.spec.state&&this.fields.push(new Bje(e.key,e.spec.state,e))})}}class Hje{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let n=0;n<this.config.plugins.length;n++)if(n!=t){let t=this.config.plugins[n];if(t.spec.filterTransaction&&!t.spec.filterTransaction.call(t,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],n=this.applyInner(e),r=null;for(;;){let s=!1;for(let i=0;i<this.config.plugins.length;i++){let a=this.config.plugins[i];if(a.spec.appendTransaction){let o=r?r[i].n:0,l=r?r[i].state:this,c=o<t.length&&a.spec.appendTransaction.call(a,o?t.slice(o):t,l,n);if(c&&n.filterTransaction(c,i)){if(c.setMeta("appendedTransaction",e),!r){r=[];for(let e=0;e<this.config.plugins.length;e++)r.push(e<i?{state:n,n:t.length}:{state:this,n:0})}t.push(c),n=n.applyInner(c),s=!0}r&&(r[i]={state:n,n:t.length})}}if(!s)return{state:n,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new Hje(this.config),n=this.config.fields;for(let r=0;r<n.length;r++){let s=n[r];t[s.name]=s.apply(e,this[s.name],this,t)}return t}get tr(){return new Fje(this)}static create(e){let t=new Vje(e.doc?e.doc.type.schema:e.schema,e.plugins),n=new Hje(t);for(let r=0;r<t.fields.length;r++)n[t.fields[r].name]=t.fields[r].init(e,n);return n}reconfigure(e){let t=new Vje(this.schema,e.plugins),n=t.fields,r=new Hje(t);for(let s=0;s<n.length;s++){let t=n[s].name;r[t]=this.hasOwnProperty(t)?this[t]:n[s].init(e,r)}return r}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(e=>e.toJSON())),e&&"object"==typeof e)for(let n in e){if("doc"==n||"selection"==n)throw new RangeError("The JSON fields `doc` and `selection` are reserved");let r=e[n],s=r.spec.state;s&&s.toJSON&&(t[n]=s.toJSON.call(r,this[r.key]))}return t}static fromJSON(e,t,n){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let r=new Vje(e.schema,e.plugins),s=new Hje(r);return r.fields.forEach(r=>{if("doc"==r.name)s.doc=Jbe.fromJSON(e.schema,t.doc);else if("selection"==r.name)s.selection=Mje.fromJSON(s.doc,t.selection);else if("storedMarks"==r.name)t.storedMarks&&(s.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(n)for(let i in n){let a=n[i],o=a.spec.state;if(a.key==r.name&&o&&o.fromJSON&&Object.prototype.hasOwnProperty.call(t,i))return void(s[r.name]=o.fromJSON.call(a,e,t[i],s))}s[r.name]=r.init(e,s)}}),s}}function Wje(e,t,n){for(let r in e){let s=e[r];s instanceof Function?s=s.bind(t):"handleDOMEvents"==r&&(s=Wje(s,t,{})),n[r]=s}return n}class $je{constructor(e){this.spec=e,this.props={},e.props&&Wje(e.props,this,this.props),this.key=e.key?e.key.key:qje("plugin")}getState(e){return e[this.key]}}const Gje=Object.create(null);function qje(e){return e in Gje?e+"$"+ ++Gje[e]:(Gje[e]=0,e+"$")}class Xje{constructor(e="key"){this.key=qje(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const Kje=function(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t},Yje=function(e){let t=e.assignedSlot||e.parentNode;return t&&11==t.nodeType?t.host:t};let Zje=null;const Jje=function(e,t,n){let r=Zje||(Zje=document.createRange());return r.setEnd(e,null==n?e.nodeValue.length:n),r.setStart(e,t||0),r},Qje=function(e,t,n,r){return n&&(tNe(e,t,n,r,-1)||tNe(e,t,n,r,1))},eNe=/^(img|br|input|textarea|hr)$/i;function tNe(e,t,n,r,s){for(var i;;){if(e==n&&t==r)return!0;if(t==(s<0?0:nNe(e))){let n=e.parentNode;if(!n||1!=n.nodeType||rNe(e)||eNe.test(e.nodeName)||"false"==e.contentEditable)return!1;t=Kje(e)+(s<0?0:1),e=n}else{if(1!=e.nodeType)return!1;{let n=e.childNodes[t+(s<0?-1:0)];if(1==n.nodeType&&"false"==n.contentEditable){if(!(null===(i=n.pmViewDesc)||void 0===i?void 0:i.ignoreForSelection))return!1;t+=s}else e=n,t=s<0?nNe(e):0}}}}function nNe(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function rNe(e){let t;for(let n=e;n&&!(t=n.pmViewDesc);n=n.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}const sNe=function(e){return e.focusNode&&Qje(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)};function iNe(e,t){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}const aNe="undefined"!=typeof navigator?navigator:null,oNe="undefined"!=typeof document?document:null,lNe=aNe&&aNe.userAgent||"",cNe=/Edge\/(\d+)/.exec(lNe),dNe=/MSIE \d/.exec(lNe),uNe=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(lNe),hNe=!!(dNe||uNe||cNe),pNe=dNe?document.documentMode:uNe?+uNe[1]:cNe?+cNe[1]:0,mNe=!hNe&&/gecko\/(\d+)/i.test(lNe),fNe=!hNe&&/Chrome\/(\d+)/.exec(lNe),gNe=!!fNe,xNe=fNe?+fNe[1]:0,vNe=!hNe&&!!aNe&&/Apple Computer/.test(aNe.vendor),yNe=vNe&&(/Mobile\/\w+/.test(lNe)||!!aNe&&aNe.maxTouchPoints>2),bNe=yNe||!!aNe&&/Mac/.test(aNe.platform),wNe=!!aNe&&/Win/.test(aNe.platform),jNe=/Android \d/.test(lNe),NNe=!!oNe&&"webkitFontSmoothing"in oNe.documentElement.style,_Ne=NNe?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function SNe(e){let t=e.defaultView&&e.defaultView.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function MNe(e,t){return"number"==typeof e?e:e[t]}function CNe(e){let t=e.getBoundingClientRect(),n=t.width/e.offsetWidth||1,r=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*n,top:t.top,bottom:t.top+e.clientHeight*r}}function ENe(e,t,n){let r=e.someProp("scrollThreshold")||0,s=e.someProp("scrollMargin")||5,i=e.dom.ownerDocument;for(let a=n||e.dom;a;){if(1!=a.nodeType){a=Yje(a);continue}let e=a,n=e==i.body,o=n?SNe(i):CNe(e),l=0,c=0;if(t.top<o.top+MNe(r,"top")?c=-(o.top-t.top+MNe(s,"top")):t.bottom>o.bottom-MNe(r,"bottom")&&(c=t.bottom-t.top>o.bottom-o.top?t.top+MNe(s,"top")-o.top:t.bottom-o.bottom+MNe(s,"bottom")),t.left<o.left+MNe(r,"left")?l=-(o.left-t.left+MNe(s,"left")):t.right>o.right-MNe(r,"right")&&(l=t.right-o.right+MNe(s,"right")),l||c)if(n)i.defaultView.scrollBy(l,c);else{let n=e.scrollLeft,r=e.scrollTop;c&&(e.scrollTop+=c),l&&(e.scrollLeft+=l);let s=e.scrollLeft-n,i=e.scrollTop-r;t={left:t.left-s,top:t.top-i,right:t.right-s,bottom:t.bottom-i}}let d=n?"fixed":getComputedStyle(a).position;if(/^(fixed|sticky)$/.test(d))break;a="absolute"==d?a.offsetParent:Yje(a)}}function kNe(e){let t=[],n=e.ownerDocument;for(let r=e;r&&(t.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),e!=n);r=Yje(r));return t}function ANe(e,t){for(let n=0;n<e.length;n++){let{dom:r,top:s,left:i}=e[n];r.scrollTop!=s+t&&(r.scrollTop=s+t),r.scrollLeft!=i&&(r.scrollLeft=i)}}let TNe=null;function PNe(e,t){let n,r,s,i,a=2e8,o=0,l=t.top,c=t.top;for(let d=e.firstChild,u=0;d;d=d.nextSibling,u++){let e;if(1==d.nodeType)e=d.getClientRects();else{if(3!=d.nodeType)continue;e=Jje(d).getClientRects()}for(let h=0;h<e.length;h++){let p=e[h];if(p.top<=l&&p.bottom>=c){l=Math.max(p.bottom,l),c=Math.min(p.top,c);let e=p.left>t.left?p.left-t.left:p.right<t.left?t.left-p.right:0;if(e<a){n=d,a=e,r=e&&3==n.nodeType?{left:p.right<t.left?p.right:p.left,top:t.top}:t,1==d.nodeType&&e&&(o=u+(t.left>=(p.left+p.right)/2?1:0));continue}}else p.top>t.top&&!s&&p.left<=t.left&&p.right>=t.left&&(s=d,i={left:Math.max(p.left,Math.min(p.right,t.left)),top:p.top});!n&&(t.left>=p.right&&t.top>=p.top||t.left>=p.left&&t.top>=p.bottom)&&(o=u+1)}}return!n&&s&&(n=s,r=i,a=0),n&&3==n.nodeType?function(e,t){let n=e.nodeValue.length,r=document.createRange();for(let s=0;s<n;s++){r.setEnd(e,s+1),r.setStart(e,s);let n=LNe(r,1);if(n.top!=n.bottom&&ONe(t,n))return{node:e,offset:s+(t.left>=(n.left+n.right)/2?1:0)}}return{node:e,offset:0}}(n,r):!n||a&&1==n.nodeType?{node:e,offset:o}:PNe(n,r)}function ONe(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function RNe(e,t,n){let r=e.childNodes.length;if(r&&n.top<n.bottom)for(let s=Math.max(0,Math.min(r-1,Math.floor(r*(t.top-n.top)/(n.bottom-n.top))-2)),i=s;;){let n=e.childNodes[i];if(1==n.nodeType){let e=n.getClientRects();for(let r=0;r<e.length;r++){let s=e[r];if(ONe(t,s))return RNe(n,t,s)}}if((i=(i+1)%r)==s)break}return e}function INe(e,t){let n,r=e.dom.ownerDocument,s=0,i=function(e,t,n){if(e.caretPositionFromPoint)try{let r=e.caretPositionFromPoint(t,n);if(r)return{node:r.offsetNode,offset:Math.min(nNe(r.offsetNode),r.offset)}}catch(r){}if(e.caretRangeFromPoint){let r=e.caretRangeFromPoint(t,n);if(r)return{node:r.startContainer,offset:Math.min(nNe(r.startContainer),r.startOffset)}}}(r,t.left,t.top);i&&({node:n,offset:s}=i);let a,o=(e.root.elementFromPoint?e.root:r).elementFromPoint(t.left,t.top);if(!o||!e.dom.contains(1!=o.nodeType?o.parentNode:o)){let n=e.dom.getBoundingClientRect();if(!ONe(t,n))return null;if(o=RNe(e.dom,t,n),!o)return null}if(vNe)for(let c=o;n&&c;c=Yje(c))c.draggable&&(n=void 0);if(o=function(e,t){let n=e.parentNode;return n&&/^li$/i.test(n.nodeName)&&t.left<e.getBoundingClientRect().left?n:e}(o,t),n){if(mNe&&1==n.nodeType&&(s=Math.min(s,n.childNodes.length),s<n.childNodes.length)){let e,r=n.childNodes[s];"IMG"==r.nodeName&&(e=r.getBoundingClientRect()).right<=t.left&&e.bottom>t.top&&s++}let r;NNe&&s&&1==n.nodeType&&1==(r=n.childNodes[s-1]).nodeType&&"false"==r.contentEditable&&r.getBoundingClientRect().top>=t.top&&s--,n==e.dom&&s==n.childNodes.length-1&&1==n.lastChild.nodeType&&t.top>n.lastChild.getBoundingClientRect().bottom?a=e.state.doc.content.size:0!=s&&1==n.nodeType&&"BR"==n.childNodes[s-1].nodeName||(a=function(e,t,n,r){let s=-1;for(let i=t,a=!1;i!=e.dom;){let t,n=e.docView.nearestDesc(i,!0);if(!n)return null;if(1==n.dom.nodeType&&(n.node.isBlock&&n.parent||!n.contentDOM)&&((t=n.dom.getBoundingClientRect()).width||t.height)&&(n.node.isBlock&&n.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(n.dom.nodeName)&&(!a&&t.left>r.left||t.top>r.top?s=n.posBefore:(!a&&t.right<r.left||t.bottom<r.top)&&(s=n.posAfter),a=!0),!n.contentDOM&&s<0&&!n.node.isText))return(n.node.isBlock?r.top<(t.top+t.bottom)/2:r.left<(t.left+t.right)/2)?n.posBefore:n.posAfter;i=n.dom.parentNode}return s>-1?s:e.docView.posFromDOM(t,n,-1)}(e,n,s,t))}null==a&&(a=function(e,t,n){let{node:r,offset:s}=PNe(t,n),i=-1;if(1==r.nodeType&&!r.firstChild){let e=r.getBoundingClientRect();i=e.left!=e.right&&n.left>(e.left+e.right)/2?1:-1}return e.docView.posFromDOM(r,s,i)}(e,o,t));let l=e.docView.nearestDesc(o,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function DNe(e){return e.top<e.bottom||e.left<e.right}function LNe(e,t){let n=e.getClientRects();if(n.length){let e=n[t<0?0:n.length-1];if(DNe(e))return e}return Array.prototype.find.call(n,DNe)||e.getBoundingClientRect()}const FNe=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function zNe(e,t,n){let{node:r,offset:s,atom:i}=e.docView.domFromPos(t,n<0?-1:1),a=NNe||mNe;if(3==r.nodeType){if(!a||!FNe.test(r.nodeValue)&&(n<0?s:s!=r.nodeValue.length)){let e=s,t=s,i=n<0?1:-1;return n<0&&!s?(t++,i=-1):n>=0&&s==r.nodeValue.length?(e--,i=1):n<0?e--:t++,BNe(LNe(Jje(r,e,t),i),i<0)}{let e=LNe(Jje(r,s,s),n);if(mNe&&s&&/\s/.test(r.nodeValue[s-1])&&s<r.nodeValue.length){let t=LNe(Jje(r,s-1,s-1),-1);if(t.top==e.top){let n=LNe(Jje(r,s,s+1),-1);if(n.top!=e.top)return BNe(n,n.left<t.left)}}return e}}if(!e.state.doc.resolve(t-(i||0)).parent.inlineContent){if(null==i&&s&&(n<0||s==nNe(r))){let e=r.childNodes[s-1];if(1==e.nodeType)return UNe(e.getBoundingClientRect(),!1)}if(null==i&&s<nNe(r)){let e=r.childNodes[s];if(1==e.nodeType)return UNe(e.getBoundingClientRect(),!0)}return UNe(r.getBoundingClientRect(),n>=0)}if(null==i&&s&&(n<0||s==nNe(r))){let e=r.childNodes[s-1],t=3==e.nodeType?Jje(e,nNe(e)-(a?0:1)):1!=e.nodeType||"BR"==e.nodeName&&e.nextSibling?null:e;if(t)return BNe(LNe(t,1),!1)}if(null==i&&s<nNe(r)){let e=r.childNodes[s];for(;e.pmViewDesc&&e.pmViewDesc.ignoreForCoords;)e=e.nextSibling;let t=e?3==e.nodeType?Jje(e,0,a?0:1):1==e.nodeType?e:null:null;if(t)return BNe(LNe(t,-1),!0)}return BNe(LNe(3==r.nodeType?Jje(r):r,-n),n>=0)}function BNe(e,t){if(0==e.width)return e;let n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function UNe(e,t){if(0==e.height)return e;let n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}function VNe(e,t,n){let r=e.state,s=e.root.activeElement;r!=t&&e.updateState(t),s!=e.dom&&e.focus();try{return n()}finally{r!=t&&e.updateState(r),s!=e.dom&&s&&s.focus()}}const HNe=/[\u0590-\u08ac]/;let WNe=null,$Ne=null,GNe=!1;function qNe(e,t,n){return WNe==t&&$Ne==n?GNe:(WNe=t,$Ne=n,GNe="up"==n||"down"==n?function(e,t,n){let r=t.selection,s="up"==n?r.$from:r.$to;return VNe(e,t,()=>{let{node:t}=e.docView.domFromPos(s.pos,"up"==n?-1:1);for(;;){let n=e.docView.nearestDesc(t,!0);if(!n)break;if(n.node.isBlock){t=n.contentDOM||n.dom;break}t=n.dom.parentNode}let r=zNe(e,s.pos,1);for(let e=t.firstChild;e;e=e.nextSibling){let t;if(1==e.nodeType)t=e.getClientRects();else{if(3!=e.nodeType)continue;t=Jje(e,0,e.nodeValue.length).getClientRects()}for(let e=0;e<t.length;e++){let s=t[e];if(s.bottom>s.top+1&&("up"==n?r.top-s.top>2*(s.bottom-r.top):s.bottom-r.bottom>2*(r.bottom-s.top)))return!1}}return!0})}(e,t,n):function(e,t,n){let{$head:r}=t.selection;if(!r.parent.isTextblock)return!1;let s=r.parentOffset,i=!s,a=s==r.parent.content.size,o=e.domSelection();return o?HNe.test(r.parent.textContent)&&o.modify?VNe(e,t,()=>{let{focusNode:t,focusOffset:s,anchorNode:i,anchorOffset:a}=e.domSelectionRange(),l=o.caretBidiLevel;o.modify("move",n,"character");let c=r.depth?e.docView.domAfterPos(r.before()):e.dom,{focusNode:d,focusOffset:u}=e.domSelectionRange(),h=d&&!c.contains(1==d.nodeType?d:d.parentNode)||t==d&&s==u;try{o.collapse(i,a),t&&(t!=i||s!=a)&&o.extend&&o.extend(t,s)}catch(p){}return null!=l&&(o.caretBidiLevel=l),h}):"left"==n||"backward"==n?i:a:r.pos==r.start()||r.pos==r.end()}(e,t,n))}class XNe{constructor(e,t,n,r){this.parent=e,this.children=t,this.dom=n,this.contentDOM=r,this.dirty=0,n.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,n){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,n=this.posAtStart;;t++){let r=this.children[t];if(r==e)return n;n+=r.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,n){if(this.contentDOM&&this.contentDOM.contains(1==e.nodeType?e:e.parentNode)){if(n<0){let n,r;if(e==this.contentDOM)n=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;n=e.previousSibling}for(;n&&(!(r=n.pmViewDesc)||r.parent!=this);)n=n.previousSibling;return n?this.posBeforeChild(r)+r.size:this.posAtStart}{let n,r;if(e==this.contentDOM)n=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;n=e.nextSibling}for(;n&&(!(r=n.pmViewDesc)||r.parent!=this);)n=n.nextSibling;return n?this.posBeforeChild(r):this.posAtEnd}}let r;if(e==this.dom&&this.contentDOM)r=t>Kje(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))r=2&e.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==t)for(let t=e;;t=t.parentNode){if(t==this.dom){r=!1;break}if(t.previousSibling)break}if(null==r&&t==e.childNodes.length)for(let t=e;;t=t.parentNode){if(t==this.dom){r=!0;break}if(t.nextSibling)break}}return(null==r?n>0:r)?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let n=!0,r=e;r;r=r.parentNode){let s,i=this.getDesc(r);if(i&&(!t||i.node)){if(!n||!(s=i.nodeDOM)||(1==s.nodeType?s.contains(1==e.nodeType?e:e.parentNode):s==e))return i;n=!1}}}getDesc(e){let t=e.pmViewDesc;for(let n=t;n;n=n.parent)if(n==this)return t}posFromDOM(e,t,n){for(let r=e;r;r=r.parentNode){let s=this.getDesc(r);if(s)return s.localPosFromDOM(e,t,n)}return-1}descAt(e){for(let t=0,n=0;t<this.children.length;t++){let r=this.children[t],s=n+r.size;if(n==e&&s!=n){for(;!r.border&&r.children.length;)for(let e=0;e<r.children.length;e++){let t=r.children[e];if(t.size){r=t;break}}return r}if(e<s)return r.descAt(e-n-r.border);n=s}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let n=0,r=0;for(let s=0;n<this.children.length;n++){let t=this.children[n],i=s+t.size;if(i>e||t instanceof t_e){r=e-s;break}s=i}if(r)return this.children[n].domFromPos(r-this.children[n].border,t);for(let s;n&&!(s=this.children[n-1]).size&&s instanceof KNe&&s.side>=0;n--);if(t<=0){let e,r=!0;for(;e=n?this.children[n-1]:null,e&&e.dom.parentNode!=this.contentDOM;n--,r=!1);return e&&t&&r&&!e.border&&!e.domAtom?e.domFromPos(e.size,t):{node:this.contentDOM,offset:e?Kje(e.dom)+1:0}}{let e,r=!0;for(;e=n<this.children.length?this.children[n]:null,e&&e.dom.parentNode!=this.contentDOM;n++,r=!1);return e&&r&&!e.border&&!e.domAtom?e.domFromPos(0,t):{node:this.contentDOM,offset:e?Kje(e.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,n=0){if(0==this.children.length)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let r=-1,s=-1;for(let i=n,a=0;;a++){let n=this.children[a],o=i+n.size;if(-1==r&&e<=o){let s=i+n.border;if(e>=s&&t<=o-n.border&&n.node&&n.contentDOM&&this.contentDOM.contains(n.contentDOM))return n.parseRange(e,t,s);e=i;for(let t=a;t>0;t--){let n=this.children[t-1];if(n.size&&n.dom.parentNode==this.contentDOM&&!n.emptyChildAt(1)){r=Kje(n.dom)+1;break}e-=n.size}-1==r&&(r=0)}if(r>-1&&(o>t||a==this.children.length-1)){t=o;for(let e=a+1;e<this.children.length;e++){let n=this.children[e];if(n.size&&n.dom.parentNode==this.contentDOM&&!n.emptyChildAt(-1)){s=Kje(n.dom);break}t+=n.size}-1==s&&(s=this.contentDOM.childNodes.length);break}i=o}return{node:this.contentDOM,from:e,to:t,fromOffset:r,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return 0==t.size||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:n}=this.domFromPos(e,0);if(1!=t.nodeType||n==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[n]}setSelection(e,t,n,r=!1){let s=Math.min(e,t),i=Math.max(e,t);for(let p=0,m=0;p<this.children.length;p++){let a=this.children[p],o=m+a.size;if(s>m&&i<o)return a.setSelection(e-m-a.border,t-m-a.border,n,r);m=o}let a=this.domFromPos(e,e?-1:1),o=t==e?a:this.domFromPos(t,t?-1:1),l=n.root.getSelection(),c=n.domSelectionRange(),d=!1;if((mNe||vNe)&&e==t){let{node:e,offset:t}=a;if(3==e.nodeType){if(d=!(!t||"\n"!=e.nodeValue[t-1]),d&&t==e.nodeValue.length)for(let n,r=e;r;r=r.parentNode){if(n=r.nextSibling){"BR"==n.nodeName&&(a=o={node:n.parentNode,offset:Kje(n)+1});break}let e=r.pmViewDesc;if(e&&e.node&&e.node.isBlock)break}}else{let n=e.childNodes[t-1];d=n&&("BR"==n.nodeName||"false"==n.contentEditable)}}if(mNe&&c.focusNode&&c.focusNode!=o.node&&1==c.focusNode.nodeType){let e=c.focusNode.childNodes[c.focusOffset];e&&"false"==e.contentEditable&&(r=!0)}if(!(r||d&&vNe)&&Qje(a.node,a.offset,c.anchorNode,c.anchorOffset)&&Qje(o.node,o.offset,c.focusNode,c.focusOffset))return;let u=!1;if((l.extend||e==t)&&(!d||!mNe)){l.collapse(a.node,a.offset);try{e!=t&&l.extend(o.node,o.offset),u=!0}catch(h){}}if(!u){if(e>t){let e=a;a=o,o=e}let n=document.createRange();n.setEnd(o.node,o.offset),n.setStart(a.node,a.offset),l.removeAllRanges(),l.addRange(n)}}ignoreMutation(e){return!this.contentDOM&&"selection"!=e.type}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let n=0,r=0;r<this.children.length;r++){let s=this.children[r],i=n+s.size;if(n==i?e<=i&&t>=n:e<i&&t>n){let r=n+s.border,a=i-s.border;if(e>=r&&t<=a)return this.dirty=e==n||t==i?2:1,void(e!=r||t!=a||!s.contentLost&&s.dom.parentNode==this.contentDOM?s.markDirty(e-r,t-r):s.dirty=3);s.dirty=s.dom!=s.contentDOM||s.dom.parentNode!=this.contentDOM||s.children.length?3:2}n=i}this.dirty=2}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let n=1==e?2:1;t.dirty<n&&(t.dirty=n)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class KNe extends XNe{constructor(e,t,n,r){let s,i=t.type.toDOM;if("function"==typeof i&&(i=i(n,()=>s?s.parent?s.parent.posBeforeChild(s):void 0:r)),!t.type.spec.raw){if(1!=i.nodeType){let e=document.createElement("span");e.appendChild(i),i=e}i.contentEditable="false",i.classList.add("ProseMirror-widget")}super(e,[],i,null),this.widget=t,this.widget=t,s=this}matchesWidget(e){return 0==this.dirty&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return!!t&&t(e)}ignoreMutation(e){return"selection"!=e.type||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class YNe extends XNe{constructor(e,t,n,r){super(e,[],t,null),this.textDOM=n,this.text=r}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return"characterData"===e.type&&e.target.nodeValue==e.oldValue}}class ZNe extends XNe{constructor(e,t,n,r,s){super(e,[],n,r),this.mark=t,this.spec=s}static create(e,t,n,r){let s=r.nodeViews[t.type.name],i=s&&s(t,r,n);return i&&i.dom||(i=kwe.renderSpec(document,t.type.spec.toDOM(t,n),null,t.attrs)),new ZNe(e,t,i.dom,i.contentDOM||i.dom,i)}parseRule(){return 3&this.dirty||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return 3!=this.dirty&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),0!=this.dirty){let e=this.parent;for(;!e.node;)e=e.parent;e.dirty<this.dirty&&(e.dirty=this.dirty),this.dirty=0}}slice(e,t,n){let r=ZNe.create(this.parent,this.mark,!0,n),s=this.children,i=this.size;t<i&&(s=m_e(s,t,i,n)),e>0&&(s=m_e(s,0,e,n));for(let a=0;a<s.length;a++)s[a].parent=r;return r.children=s,r}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class JNe extends XNe{constructor(e,t,n,r,s,i,a,o,l){super(e,[],s,i),this.node=t,this.outerDeco=n,this.innerDeco=r,this.nodeDOM=a}static create(e,t,n,r,s,i){let a,o=s.nodeViews[t.type.name],l=o&&o(t,s,()=>a?a.parent?a.parent.posBeforeChild(a):void 0:i,n,r),c=l&&l.dom,d=l&&l.contentDOM;if(t.isText)if(c){if(3!=c.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else c=document.createTextNode(t.text);else if(!c){let e=kwe.renderSpec(document,t.type.spec.toDOM(t),null,t.attrs);({dom:c,contentDOM:d}=e)}d||t.isText||"BR"==c.nodeName||(c.hasAttribute("contenteditable")||(c.contentEditable="false"),t.type.spec.draggable&&(c.draggable=!0));let u=c;return c=c_e(c,n,t),l?a=new n_e(e,t,n,r,c,d||null,u,l,s,i+1):t.isText?new e_e(e,t,n,r,c,u,s):new JNe(e,t,n,r,c,d||null,u,s,i+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if("pre"==this.node.type.whitespace&&(e.preserveWhitespace="full"),this.contentDOM)if(this.contentLost){for(let t=this.children.length-1;t>=0;t--){let n=this.children[t];if(this.dom.contains(n.dom.parentNode)){e.contentElement=n.dom.parentNode;break}}e.contentElement||(e.getContent=()=>Ebe.empty)}else e.contentElement=this.contentDOM;else e.getContent=()=>this.node.content;return e}matchesNode(e,t,n){return 0==this.dirty&&e.eq(this.node)&&d_e(t,this.outerDeco)&&n.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let n=this.node.inlineContent,r=t,s=e.composing?this.localCompositionInfo(e,t):null,i=s&&s.pos>-1?s:null,a=s&&s.pos<0,o=new h_e(this,i&&i.node,e);!function(e,t,n,r){let s=t.locals(e),i=0;if(0==s.length){for(let n=0;n<e.childCount;n++){let a=e.child(n);r(a,s,t.forChild(i,a),n),i+=a.nodeSize}return}let a=0,o=[],l=null;for(let c=0;;){let d,u,h,p;for(;a<s.length&&s[a].to==i;){let e=s[a++];e.widget&&(d?(u||(u=[d])).push(e):d=e)}if(d)if(u){u.sort(p_e);for(let e=0;e<u.length;e++)n(u[e],c,!!l)}else n(d,c,!!l);if(l)p=-1,h=l,l=null;else{if(!(c<e.childCount))break;p=c,h=e.child(c++)}for(let e=0;e<o.length;e++)o[e].to<=i&&o.splice(e--,1);for(;a<s.length&&s[a].from<=i&&s[a].to>i;)o.push(s[a++]);let m=i+h.nodeSize;if(h.isText){let e=m;a<s.length&&s[a].from<e&&(e=s[a].from);for(let t=0;t<o.length;t++)o[t].to<e&&(e=o[t].to);e<m&&(l=h.cut(e-i),h=h.cut(0,e-i),m=e,p=-1)}else for(;a<s.length&&s[a].to<m;)a++;r(h,h.isInline&&!h.isLeaf?o.filter(e=>!e.inline):o.slice(),t.forChild(i,h),p),i=m}}(this.node,this.innerDeco,(t,s,i)=>{t.spec.marks?o.syncToMarks(t.spec.marks,n,e):t.type.side>=0&&!i&&o.syncToMarks(s==this.node.childCount?Pbe.none:this.node.child(s).marks,n,e),o.placeWidget(t,e,r)},(t,i,l,c)=>{let d;o.syncToMarks(t.marks,n,e),o.findNodeMatch(t,i,l,c)||a&&e.state.selection.from>r&&e.state.selection.to<r+t.nodeSize&&(d=o.findIndexWithChild(s.node))>-1&&o.updateNodeAt(t,i,l,d,e)||o.updateNextNode(t,i,l,e,c,r)||o.addNode(t,i,l,e,r),r+=t.nodeSize}),o.syncToMarks([],n,e),this.node.isTextblock&&o.addTextblockHacks(),o.destroyRest(),(o.changed||2==this.dirty)&&(i&&this.protectLocalComposition(e,i),r_e(this.contentDOM,this.children,e),yNe&&function(e){if("UL"==e.nodeName||"OL"==e.nodeName){let t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}(this.dom))}localCompositionInfo(e,t){let{from:n,to:r}=e.state.selection;if(!(e.state.selection instanceof Aje)||n<t||r>t+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let e=s.nodeValue,i=function(e,t,n,r){for(let s=0,i=0;s<e.childCount&&i<=r;){let a=e.child(s++),o=i;if(i+=a.nodeSize,!a.isText)continue;let l=a.text;for(;s<e.childCount;){let t=e.child(s++);if(i+=t.nodeSize,!t.isText)break;l+=t.text}if(i>=n){if(i>=r&&l.slice(r-t.length-o,r-o)==t)return r-t.length;let e=o<r?l.lastIndexOf(t,r-o-1):-1;if(e>=0&&e+t.length+o>=n)return o+e;if(n==r&&l.length>=r+t.length-o&&l.slice(r-o,r-o+t.length)==t)return r}}return-1}(this.node.content,e,n-t,r-t);return i<0?null:{node:s,pos:i,text:e}}return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:n,text:r}){if(this.getDesc(t))return;let s=t;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let i=new YNe(this,s,t,r);e.input.compositionNodes.push(i),this.children=m_e(this.children,n,n+r.length,e,i)}update(e,t,n,r){return!(3==this.dirty||!e.sameMarkup(this.node))&&(this.updateInner(e,t,n,r),!0)}updateInner(e,t,n,r){this.updateOuterDeco(t),this.node=e,this.innerDeco=n,this.contentDOM&&this.updateChildren(r,this.posAtStart),this.dirty=0}updateOuterDeco(e){if(d_e(e,this.outerDeco))return;let t=1!=this.nodeDOM.nodeType,n=this.dom;this.dom=o_e(this.dom,this.nodeDOM,a_e(this.outerDeco,this.node,t),a_e(e,this.node,t)),this.dom!=n&&(n.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){1==this.nodeDOM.nodeType&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.nodeDOM.draggable=!0))}deselectNode(){1==this.nodeDOM.nodeType&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function QNe(e,t,n,r,s){c_e(r,t,e);let i=new JNe(void 0,e,t,n,r,r,r,s,0);return i.contentDOM&&i.updateChildren(s,0),i}class e_e extends JNe{constructor(e,t,n,r,s,i,a){super(e,t,n,r,s,null,i,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,n,r){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!e.sameMarkup(this.node))&&(this.updateOuterDeco(t),0==this.dirty&&e.text==this.node.text||e.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=e.text,r.trackWrites==this.nodeDOM&&(r.trackWrites=null)),this.node=e,this.dirty=0,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,n){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,n)}ignoreMutation(e){return"characterData"!=e.type&&"selection"!=e.type}slice(e,t,n){let r=this.node.cut(e,t),s=document.createTextNode(r.text);return new e_e(this.parent,r,this.outerDeco,this.innerDeco,s,s,n)}markDirty(e,t){super.markDirty(e,t),this.dom==this.nodeDOM||0!=e&&t!=this.nodeDOM.nodeValue.length||(this.dirty=3)}get domAtom(){return!1}isText(e){return this.node.text==e}}class t_e extends XNe{parseRule(){return{ignore:!0}}matchesHack(e){return 0==this.dirty&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return"IMG"==this.dom.nodeName}}class n_e extends JNe{constructor(e,t,n,r,s,i,a,o,l,c){super(e,t,n,r,s,i,a,l,c),this.spec=o}update(e,t,n,r){if(3==this.dirty)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let s=this.spec.update(e,t,n);return s&&this.updateInner(e,t,n,r),s}return!(!this.contentDOM&&!e.isLeaf)&&super.update(e,t,n,r)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,n,r){this.spec.setSelection?this.spec.setSelection(e,t,n.root):super.setSelection(e,t,n,r)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return!!this.spec.stopEvent&&this.spec.stopEvent(e)}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function r_e(e,t,n){let r=e.firstChild,s=!1;for(let i=0;i<t.length;i++){let a=t[i],o=a.dom;if(o.parentNode==e){for(;o!=r;)r=u_e(r),s=!0;r=r.nextSibling}else s=!0,e.insertBefore(o,r);if(a instanceof ZNe){let t=r?r.previousSibling:e.lastChild;r_e(a.contentDOM,a.children,n),r=t?t.nextSibling:e.firstChild}}for(;r;)r=u_e(r),s=!0;s&&n.trackWrites==e&&(n.trackWrites=null)}const s_e=function(e){e&&(this.nodeName=e)};s_e.prototype=Object.create(null);const i_e=[new s_e];function a_e(e,t,n){if(0==e.length)return i_e;let r=n?i_e[0]:new s_e,s=[r];for(let i=0;i<e.length;i++){let a=e[i].type.attrs;if(a){a.nodeName&&s.push(r=new s_e(a.nodeName));for(let e in a){let i=a[e];null!=i&&(n&&1==s.length&&s.push(r=new s_e(t.isInline?"span":"div")),"class"==e?r.class=(r.class?r.class+" ":"")+i:"style"==e?r.style=(r.style?r.style+";":"")+i:"nodeName"!=e&&(r[e]=i))}}}return s}function o_e(e,t,n,r){if(n==i_e&&r==i_e)return t;let s=t;for(let i=0;i<r.length;i++){let t=r[i],a=n[i];if(i){let n;a&&a.nodeName==t.nodeName&&s!=e&&(n=s.parentNode)&&n.nodeName.toLowerCase()==t.nodeName||(n=document.createElement(t.nodeName),n.pmIsDeco=!0,n.appendChild(s),a=i_e[0]),s=n}l_e(s,a||i_e[0],t)}return s}function l_e(e,t,n){for(let r in t)"class"==r||"style"==r||"nodeName"==r||r in n||e.removeAttribute(r);for(let r in n)"class"!=r&&"style"!=r&&"nodeName"!=r&&n[r]!=t[r]&&e.setAttribute(r,n[r]);if(t.class!=n.class){let r=t.class?t.class.split(" ").filter(Boolean):[],s=n.class?n.class.split(" ").filter(Boolean):[];for(let t=0;t<r.length;t++)-1==s.indexOf(r[t])&&e.classList.remove(r[t]);for(let t=0;t<s.length;t++)-1==r.indexOf(s[t])&&e.classList.add(s[t]);0==e.classList.length&&e.removeAttribute("class")}if(t.style!=n.style){if(t.style){let n,r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;for(;n=r.exec(t.style);)e.style.removeProperty(n[1])}n.style&&(e.style.cssText+=n.style)}}function c_e(e,t,n){return o_e(e,e,i_e,a_e(t,n,1!=e.nodeType))}function d_e(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function u_e(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}class h_e{constructor(e,t,n){this.lock=t,this.view=n,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=function(e,t){let n=t,r=n.children.length,s=e.childCount,i=new Map,a=[];e:for(;s>0;){let o;for(;;)if(r){let e=n.children[r-1];if(!(e instanceof ZNe)){o=e,r--;break}n=e,r=e.children.length}else{if(n==t)break e;r=n.parent.children.indexOf(n),n=n.parent}let l=o.node;if(l){if(l!=e.child(s-1))break;--s,i.set(o,s),a.push(o)}}return{index:s,matched:i,matches:a.reverse()}}(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let n=e;n<t;n++)this.top.children[n].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,n){let r=0,s=this.stack.length>>1,i=Math.min(s,e.length);for(;r<i&&(r==s-1?this.top:this.stack[r+1<<1]).matchesMark(e[r])&&!1!==e[r].type.spec.spanning;)r++;for(;r<s;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let r=-1;for(let t=this.index;t<Math.min(this.index+3,this.top.children.length);t++){let n=this.top.children[t];if(n.matchesMark(e[s])&&!this.isLocked(n.dom)){r=t;break}}if(r>-1)r>this.index&&(this.changed=!0,this.destroyBetween(this.index,r)),this.top=this.top.children[this.index];else{let r=ZNe.create(this.top,e[s],t,n);this.top.children.splice(this.index,0,r),this.top=r,this.changed=!0}this.index=0,s++}}findNodeMatch(e,t,n,r){let s,i=-1;if(r>=this.preMatch.index&&(s=this.preMatch.matches[r-this.preMatch.index]).parent==this.top&&s.matchesNode(e,t,n))i=this.top.children.indexOf(s,this.index);else for(let a=this.index,o=Math.min(this.top.children.length,a+5);a<o;a++){let r=this.top.children[a];if(r.matchesNode(e,t,n)&&!this.preMatch.matched.has(r)){i=a;break}}return!(i<0)&&(this.destroyBetween(this.index,i),this.index++,!0)}updateNodeAt(e,t,n,r,s){let i=this.top.children[r];return 3==i.dirty&&i.dom==i.contentDOM&&(i.dirty=2),!!i.update(e,t,n,s)&&(this.destroyBetween(this.index,r),this.index++,!0)}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let t=e.pmViewDesc;if(t)for(let e=this.index;e<this.top.children.length;e++)if(this.top.children[e]==t)return e;return-1}e=t}}updateNextNode(e,t,n,r,s,i){for(let a=this.index;a<this.top.children.length;a++){let o=this.top.children[a];if(o instanceof JNe){let l=this.preMatch.matched.get(o);if(null!=l&&l!=s)return!1;let c,d=o.dom,u=this.isLocked(d)&&!(e.isText&&o.node&&o.node.isText&&o.nodeDOM.nodeValue==e.text&&3!=o.dirty&&d_e(t,o.outerDeco));if(!u&&o.update(e,t,n,r))return this.destroyBetween(this.index,a),o.dom!=d&&(this.changed=!0),this.index++,!0;if(!u&&(c=this.recreateWrapper(o,e,t,n,r,i)))return this.destroyBetween(this.index,a),this.top.children[this.index]=c,c.contentDOM&&(c.dirty=2,c.updateChildren(r,i+1),c.dirty=0),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,n,r,s,i){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content)||!d_e(n,e.outerDeco)||!r.eq(e.innerDeco))return null;let a=JNe.create(this.top,t,n,r,s,i);if(a.contentDOM){a.children=e.children,e.children=[];for(let e of a.children)e.parent=a}return e.destroy(),a}addNode(e,t,n,r,s){let i=JNe.create(this.top,e,t,n,r,s);i.contentDOM&&i.updateChildren(r,s+1),this.top.children.splice(this.index++,0,i),this.changed=!0}placeWidget(e,t,n){let r=this.index<this.top.children.length?this.top.children[this.index]:null;if(!r||!r.matchesWidget(e)||e!=r.widget&&r.widget.type.toDOM.parentNode){let r=new KNe(this.top,e,t,n);this.top.children.splice(this.index++,0,r),this.changed=!0}else this.index++}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof ZNe;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof e_e)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((vNe||gNe)&&e&&"false"==e.dom.contentEditable&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let n=document.createElement(e);"IMG"==e&&(n.className="ProseMirror-separator",n.alt=""),"BR"==e&&(n.className="ProseMirror-trailingBreak");let r=new t_e(this.top,[],n,null);t!=this.top?t.children.push(r):t.children.splice(this.index++,0,r),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||1==e.nodeType&&e.contains(this.lock.parentNode))}}function p_e(e,t){return e.type.side-t.type.side}function m_e(e,t,n,r,s){let i=[];for(let a=0,o=0;a<e.length;a++){let l=e[a],c=o,d=o+=l.size;c>=n||d<=t?i.push(l):(c<t&&i.push(l.slice(0,t-c,r)),s&&(i.push(s),s=void 0),d>n&&i.push(l.slice(n-c,l.size,r)))}return i}function f_e(e,t=null){let n=e.domSelectionRange(),r=e.state.doc;if(!n.focusNode)return null;let s=e.docView.nearestDesc(n.focusNode),i=s&&0==s.size,a=e.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(a<0)return null;let o,l,c=r.resolve(a);if(sNe(n)){for(o=a;s&&!s.node;)s=s.parent;let e=s.node;if(s&&e.isAtom&&Pje.isSelectable(e)&&s.parent&&(!e.isInline||!function(e,t,n){for(let r=0==t,s=t==nNe(e);r||s;){if(e==n)return!0;let t=Kje(e);if(!(e=e.parentNode))return!1;r=r&&0==t,s=s&&t==nNe(e)}}(n.focusNode,n.focusOffset,s.dom))){let e=s.posBefore;l=new Pje(a==e?c:r.resolve(e))}}else{if(n instanceof e.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let t=a,s=a;for(let r=0;r<n.rangeCount;r++){let i=n.getRangeAt(r);t=Math.min(t,e.docView.posFromDOM(i.startContainer,i.startOffset,1)),s=Math.max(s,e.docView.posFromDOM(i.endContainer,i.endOffset,-1))}if(t<0)return null;[o,a]=s==e.state.selection.anchor?[s,t]:[t,s],c=r.resolve(a)}else o=e.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(o<0)return null}let d=r.resolve(o);if(!l){l=__e(e,d,c,"pointer"==t||e.state.selection.head<c.pos&&!i?1:-1)}return l}function g_e(e){return e.editable?e.hasFocus():M_e(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function x_e(e,t=!1){let n=e.state.selection;if(j_e(e,n),g_e(e)){if(!t&&e.input.mouseDown&&e.input.mouseDown.allowDefault&&gNe){let t=e.domSelectionRange(),n=e.domObserver.currentSelection;if(t.anchorNode&&n.anchorNode&&Qje(t.anchorNode,t.anchorOffset,n.anchorNode,n.anchorOffset))return e.input.mouseDown.delayedSelectionSync=!0,void e.domObserver.setCurSelection()}if(e.domObserver.disconnectSelection(),e.cursorWrapper)!function(e){let t=e.domSelection();if(!t)return;let n=e.cursorWrapper.dom,r="IMG"==n.nodeName;r?t.collapse(n.parentNode,Kje(n)+1):t.collapse(n,0);!r&&!e.state.selection.visible&&hNe&&pNe<=11&&(n.disabled=!0,n.disabled=!1)}(e);else{let r,s,{anchor:i,head:a}=n;!v_e||n instanceof Aje||(n.$from.parent.inlineContent||(r=y_e(e,n.from)),n.empty||n.$from.parent.inlineContent||(s=y_e(e,n.to))),e.docView.setSelection(i,a,e,t),v_e&&(r&&w_e(r),s&&w_e(s)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function(e){let t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.input.hideSelectionGuard);let n=e.domSelectionRange(),r=n.anchorNode,s=n.anchorOffset;t.addEventListener("selectionchange",e.input.hideSelectionGuard=()=>{n.anchorNode==r&&n.anchorOffset==s||(t.removeEventListener("selectionchange",e.input.hideSelectionGuard),setTimeout(()=>{g_e(e)&&!e.state.selection.visible||e.dom.classList.remove("ProseMirror-hideselection")},20))})}(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}const v_e=vNe||gNe&&xNe<63;function y_e(e,t){let{node:n,offset:r}=e.docView.domFromPos(t,0),s=r<n.childNodes.length?n.childNodes[r]:null,i=r?n.childNodes[r-1]:null;if(vNe&&s&&"false"==s.contentEditable)return b_e(s);if(!(s&&"false"!=s.contentEditable||i&&"false"!=i.contentEditable)){if(s)return b_e(s);if(i)return b_e(i)}}function b_e(e){return e.contentEditable="true",vNe&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function w_e(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function j_e(e,t){if(t instanceof Pje){let n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(N_e(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else N_e(e)}function N_e(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=void 0)}function __e(e,t,n,r){return e.someProp("createSelectionBetween",r=>r(e,t,n))||Aje.between(t,n,r)}function S_e(e){return!(e.editable&&!e.hasFocus())&&M_e(e)}function M_e(e){let t=e.domSelectionRange();if(!t.anchorNode)return!1;try{return e.dom.contains(3==t.anchorNode.nodeType?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(3==t.focusNode.nodeType?t.focusNode.parentNode:t.focusNode))}catch(n){return!1}}function C_e(e,t){let{$anchor:n,$head:r}=e.selection,s=t>0?n.max(r):n.min(r),i=s.parent.inlineContent?s.depth?e.doc.resolve(t>0?s.after():s.before()):null:s;return i&&Mje.findFrom(i,t)}function E_e(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function k_e(e,t,n){let r=e.state.selection;if(!(r instanceof Aje)){if(r instanceof Pje&&r.node.isInline)return E_e(e,new Aje(t>0?r.$to:r.$from));{let n=C_e(e.state,t);return!!n&&E_e(e,n)}}if(n.indexOf("s")>-1){let{$head:n}=r,s=n.textOffset?null:t<0?n.nodeBefore:n.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let i=e.state.doc.resolve(n.pos+s.nodeSize*(t<0?-1:1));return E_e(e,new Aje(r.$anchor,i))}if(!r.empty)return!1;if(e.endOfTextblock(t>0?"forward":"backward")){let n=C_e(e.state,t);return!!(n&&n instanceof Pje)&&E_e(e,n)}if(!(bNe&&n.indexOf("m")>-1)){let n,s=r.$head,i=s.textOffset?null:t<0?s.nodeBefore:s.nodeAfter;if(!i||i.isText)return!1;let a=t<0?s.pos-i.nodeSize:s.pos;return!!(i.isAtom||(n=e.docView.descAt(a))&&!n.contentDOM)&&(Pje.isSelectable(i)?E_e(e,new Pje(t<0?e.state.doc.resolve(s.pos-i.nodeSize):s)):!!NNe&&E_e(e,new Aje(e.state.doc.resolve(t<0?a:a+i.nodeSize))))}}function A_e(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function T_e(e,t){let n=e.pmViewDesc;return n&&0==n.size&&(t<0||e.nextSibling||"BR"!=e.nodeName)}function P_e(e,t){return t<0?function(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let s,i,a=!1;mNe&&1==n.nodeType&&r<A_e(n)&&T_e(n.childNodes[r],-1)&&(a=!0);for(;;)if(r>0){if(1!=n.nodeType)break;{let e=n.childNodes[r-1];if(T_e(e,-1))s=n,i=--r;else{if(3!=e.nodeType)break;n=e,r=n.nodeValue.length}}}else{if(O_e(n))break;{let t=n.previousSibling;for(;t&&T_e(t,-1);)s=n.parentNode,i=Kje(t),t=t.previousSibling;if(t)n=t,r=A_e(n);else{if(n=n.parentNode,n==e.dom)break;r=0}}}a?R_e(e,n,r):s&&R_e(e,s,i)}(e):function(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let s,i,a=A_e(n);for(;;)if(r<a){if(1!=n.nodeType)break;if(!T_e(n.childNodes[r],1))break;s=n,i=++r}else{if(O_e(n))break;{let t=n.nextSibling;for(;t&&T_e(t,1);)s=t.parentNode,i=Kje(t)+1,t=t.nextSibling;if(t)n=t,r=0,a=A_e(n);else{if(n=n.parentNode,n==e.dom)break;r=a=0}}}s&&R_e(e,s,i)}(e)}function O_e(e){let t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function R_e(e,t,n){if(3!=t.nodeType){let e,r;(r=function(e,t){for(;e&&t==e.childNodes.length&&!rNe(e);)t=Kje(e)+1,e=e.parentNode;for(;e&&t<e.childNodes.length;){let n=e.childNodes[t];if(3==n.nodeType)return n;if(1==n.nodeType&&"false"==n.contentEditable)break;e=n,t=0}}(t,n))?(t=r,n=0):(e=function(e,t){for(;e&&!t&&!rNe(e);)t=Kje(e),e=e.parentNode;for(;e&&t;){let n=e.childNodes[t-1];if(3==n.nodeType)return n;if(1==n.nodeType&&"false"==n.contentEditable)break;t=(e=n).childNodes.length}}(t,n))&&(t=e,n=e.nodeValue.length)}let r=e.domSelection();if(!r)return;if(sNe(r)){let e=document.createRange();e.setEnd(t,n),e.setStart(t,n),r.removeAllRanges(),r.addRange(e)}else r.extend&&r.extend(t,n);e.domObserver.setCurSelection();let{state:s}=e;setTimeout(()=>{e.state==s&&x_e(e)},50)}function I_e(e,t){let n=e.state.doc.resolve(t);if(!gNe&&!wNe&&n.parent.inlineContent){let r=e.coordsAtPos(t);if(t>n.start()){let n=e.coordsAtPos(t-1),s=(n.top+n.bottom)/2;if(s>r.top&&s<r.bottom&&Math.abs(n.left-r.left)>1)return n.left<r.left?"ltr":"rtl"}if(t<n.end()){let n=e.coordsAtPos(t+1),s=(n.top+n.bottom)/2;if(s>r.top&&s<r.bottom&&Math.abs(n.left-r.left)>1)return n.left>r.left?"ltr":"rtl"}}return"rtl"==getComputedStyle(e.dom).direction?"rtl":"ltr"}function D_e(e,t,n){let r=e.state.selection;if(r instanceof Aje&&!r.empty||n.indexOf("s")>-1)return!1;if(bNe&&n.indexOf("m")>-1)return!1;let{$from:s,$to:i}=r;if(!s.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){let n=C_e(e.state,t);if(n&&n instanceof Pje)return E_e(e,n)}if(!s.parent.inlineContent){let n=t<0?s:i,a=r instanceof Rje?Mje.near(n,t):Mje.findFrom(n,t);return!!a&&E_e(e,a)}return!1}function L_e(e,t){if(!(e.state.selection instanceof Aje))return!0;let{$head:n,$anchor:r,empty:s}=e.state.selection;if(!n.sameParent(r))return!0;if(!s)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;let i=!n.textOffset&&(t<0?n.nodeBefore:n.nodeAfter);if(i&&!i.isText){let r=e.state.tr;return t<0?r.delete(n.pos-i.nodeSize,n.pos):r.delete(n.pos,n.pos+i.nodeSize),e.dispatch(r),!0}return!1}function F_e(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function z_e(e,t){let n=t.keyCode,r=function(e){let t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}(t);if(8==n||bNe&&72==n&&"c"==r)return L_e(e,-1)||P_e(e,-1);if(46==n&&!t.shiftKey||bNe&&68==n&&"c"==r)return L_e(e,1)||P_e(e,1);if(13==n||27==n)return!0;if(37==n||bNe&&66==n&&"c"==r){let t=37==n?"ltr"==I_e(e,e.state.selection.from)?-1:1:-1;return k_e(e,t,r)||P_e(e,t)}if(39==n||bNe&&70==n&&"c"==r){let t=39==n?"ltr"==I_e(e,e.state.selection.from)?1:-1:1;return k_e(e,t,r)||P_e(e,t)}return 38==n||bNe&&80==n&&"c"==r?D_e(e,-1,r)||P_e(e,-1):40==n||bNe&&78==n&&"c"==r?function(e){if(!vNe||e.state.selection.$head.parentOffset>0)return!1;let{focusNode:t,focusOffset:n}=e.domSelectionRange();if(t&&1==t.nodeType&&0==n&&t.firstChild&&"false"==t.firstChild.contentEditable){let n=t.firstChild;F_e(e,n,"true"),setTimeout(()=>F_e(e,n,"false"),20)}return!1}(e)||D_e(e,1,r)||P_e(e,1):r==(bNe?"m":"c")&&(66==n||73==n||89==n||90==n)}function B_e(e,t){e.someProp("transformCopied",n=>{t=n(t,e)});let n=[],{content:r,openStart:s,openEnd:i}=t;for(;s>1&&i>1&&1==r.childCount&&1==r.firstChild.childCount;){s--,i--;let e=r.firstChild;n.push(e.type.name,e.attrs!=e.type.defaultAttrs?e.attrs:null),r=e.content}let a=e.someProp("clipboardSerializer")||kwe.fromSchema(e.state.schema),o=Y_e(),l=o.createElement("div");l.appendChild(a.serializeFragment(r,{document:o}));let c,d=l.firstChild,u=0;for(;d&&1==d.nodeType&&(c=X_e[d.nodeName.toLowerCase()]);){for(let e=c.length-1;e>=0;e--){let t=o.createElement(c[e]);for(;l.firstChild;)t.appendChild(l.firstChild);l.appendChild(t),u++}d=l.firstChild}return d&&1==d.nodeType&&d.setAttribute("data-pm-slice",`${s} ${i}${u?` -${u}`:""} ${JSON.stringify(n)}`),{dom:l,text:e.someProp("clipboardTextSerializer",n=>n(t,e))||t.content.textBetween(0,t.content.size,"\n\n"),slice:t}}function U_e(e,t,n,r,s){let i,a,o=s.parent.type.spec.code;if(!n&&!t)return null;let l=!!t&&(r||o||!n);if(l){if(e.someProp("transformPastedText",n=>{t=n(t,o||r,e)}),o)return a=new Rbe(Ebe.from(e.state.schema.text(t.replace(/\r\n?/g,"\n"))),0,0),e.someProp("transformPasted",t=>{a=t(a,e,!0)}),a;let n=e.someProp("clipboardTextParser",n=>n(t,s,r,e));if(n)a=n;else{let n=s.marks(),{schema:r}=e.state,a=kwe.fromSchema(r);i=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach(e=>{let t=i.appendChild(document.createElement("p"));e&&t.appendChild(a.serializeNode(r.text(e,n)))})}}else e.someProp("transformPastedHTML",t=>{n=t(n,e)}),i=function(e){let t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));let n,r=Y_e().createElement("div"),s=/<([a-z][^>\s]+)/i.exec(e);(n=s&&X_e[s[1].toLowerCase()])&&(e=n.map(e=>"<"+e+">").join("")+e+n.map(e=>"</"+e+">").reverse().join(""));if(r.innerHTML=function(e){let t=window.trustedTypes;if(!t)return e;Z_e||(Z_e=t.defaultPolicy||t.createPolicy("ProseMirrorClipboard",{createHTML:e=>e}));return Z_e.createHTML(e)}(e),n)for(let i=0;i<n.length;i++)r=r.querySelector(n[i])||r;return r}(n),NNe&&function(e){let t=e.querySelectorAll(gNe?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<t.length;n++){let r=t[n];1==r.childNodes.length&&""==r.textContent&&r.parentNode&&r.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),r)}}(i);let c=i&&i.querySelector("[data-pm-slice]"),d=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(d&&d[3])for(let u=+d[3];u>0;u--){let e=i.firstChild;for(;e&&1!=e.nodeType;)e=e.nextSibling;if(!e)break;i=e}if(!a){let t=e.someProp("clipboardParser")||e.someProp("domParser")||ywe.fromSchema(e.state.schema);a=t.parseSlice(i,{preserveWhitespace:!(!l&&!d),context:s,ruleFromNode:e=>"BR"!=e.nodeName||e.nextSibling||!e.parentNode||V_e.test(e.parentNode.nodeName)?null:{ignore:!0}})}if(d)a=function(e,t){if(!e.size)return e;let n,r=e.content.firstChild.type.schema;try{n=JSON.parse(t)}catch(o){return e}let{content:s,openStart:i,openEnd:a}=e;for(let l=n.length-2;l>=0;l-=2){let e=r.nodes[n[l]];if(!e||e.hasRequiredAttrs())break;s=Ebe.from(e.create(n[l+1],s)),i++,a++}return new Rbe(s,i,a)}(q_e(a,+d[1],+d[2]),d[4]);else if(a=Rbe.maxOpen(function(e,t){if(e.childCount<2)return e;for(let n=t.depth;n>=0;n--){let r,s=t.node(n).contentMatchAt(t.index(n)),i=[];if(e.forEach(e=>{if(!i)return;let t,n=s.findWrapping(e.type);if(!n)return i=null;if(t=i.length&&r.length&&W_e(n,r,e,i[i.length-1],0))i[i.length-1]=t;else{i.length&&(i[i.length-1]=$_e(i[i.length-1],r.length));let t=H_e(e,n);i.push(t),s=s.matchType(t.type),r=n}}),i)return Ebe.from(i)}return e}(a.content,s),!0),a.openStart||a.openEnd){let e=0,t=0;for(let n=a.content.firstChild;e<a.openStart&&!n.type.spec.isolating;e++,n=n.firstChild);for(let n=a.content.lastChild;t<a.openEnd&&!n.type.spec.isolating;t++,n=n.lastChild);a=q_e(a,e,t)}return e.someProp("transformPasted",t=>{a=t(a,e,l)}),a}const V_e=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function H_e(e,t,n=0){for(let r=t.length-1;r>=n;r--)e=t[r].create(null,Ebe.from(e));return e}function W_e(e,t,n,r,s){if(s<e.length&&s<t.length&&e[s]==t[s]){let i=W_e(e,t,n,r.lastChild,s+1);if(i)return r.copy(r.content.replaceChild(r.childCount-1,i));if(r.contentMatchAt(r.childCount).matchType(s==e.length-1?n.type:e[s+1]))return r.copy(r.content.append(Ebe.from(H_e(n,e,s+1))))}}function $_e(e,t){if(0==t)return e;let n=e.content.replaceChild(e.childCount-1,$_e(e.lastChild,t-1)),r=e.contentMatchAt(e.childCount).fillBefore(Ebe.empty,!0);return e.copy(n.append(r))}function G_e(e,t,n,r,s,i){let a=t<0?e.firstChild:e.lastChild,o=a.content;return e.childCount>1&&(i=0),s<r-1&&(o=G_e(o,t,n,r,s+1,i)),s>=n&&(o=t<0?a.contentMatchAt(0).fillBefore(o,i<=s).append(o):o.append(a.contentMatchAt(a.childCount).fillBefore(Ebe.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,a.copy(o))}function q_e(e,t,n){return t<e.openStart&&(e=new Rbe(G_e(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),n<e.openEnd&&(e=new Rbe(G_e(e.content,1,n,e.openEnd,0,0),e.openStart,n)),e}const X_e={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let K_e=null;function Y_e(){return K_e||(K_e=document.implementation.createHTMLDocument("title"))}let Z_e=null;const J_e={},Q_e={},eSe={touchstart:!0,touchmove:!0};class tSe{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function nSe(e,t){e.input.lastSelectionOrigin=t,e.input.lastSelectionTime=Date.now()}function rSe(e){e.someProp("handleDOMEvents",t=>{for(let n in t)e.input.eventHandlers[n]||e.dom.addEventListener(n,e.input.eventHandlers[n]=t=>sSe(e,t))})}function sSe(e,t){return e.someProp("handleDOMEvents",n=>{let r=n[t.type];return!!r&&(r(e,t)||t.defaultPrevented)})}function iSe(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let n=t.target;n!=e.dom;n=n.parentNode)if(!n||11==n.nodeType||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}function aSe(e){return{left:e.clientX,top:e.clientY}}function oSe(e,t,n,r,s){if(-1==r)return!1;let i=e.state.doc.resolve(r);for(let a=i.depth+1;a>0;a--)if(e.someProp(t,t=>a>i.depth?t(e,n,i.nodeAfter,i.before(a),s,!0):t(e,n,i.node(a),i.before(a),s,!1)))return!0;return!1}function lSe(e,t,n){if(e.focused||e.focus(),e.state.selection.eq(t))return;let r=e.state.tr.setSelection(t);r.setMeta("pointer",!0),e.dispatch(r)}function cSe(e,t,n,r,s){return oSe(e,"handleClickOn",t,n,r)||e.someProp("handleClick",n=>n(e,t,r))||(s?function(e,t){if(-1==t)return!1;let n,r,s=e.state.selection;s instanceof Pje&&(n=s.node);let i=e.state.doc.resolve(t);for(let a=i.depth+1;a>0;a--){let e=a>i.depth?i.nodeAfter:i.node(a);if(Pje.isSelectable(e)){r=n&&s.$from.depth>0&&a>=s.$from.depth&&i.before(s.$from.depth+1)==s.$from.pos?i.before(s.$from.depth):i.before(a);break}}return null!=r&&(lSe(e,Pje.create(e.state.doc,r)),!0)}(e,n):function(e,t){if(-1==t)return!1;let n=e.state.doc.resolve(t),r=n.nodeAfter;return!!(r&&r.isAtom&&Pje.isSelectable(r))&&(lSe(e,new Pje(n)),!0)}(e,n))}function dSe(e,t,n,r){return oSe(e,"handleDoubleClickOn",t,n,r)||e.someProp("handleDoubleClick",n=>n(e,t,r))}function uSe(e,t,n,r){return oSe(e,"handleTripleClickOn",t,n,r)||e.someProp("handleTripleClick",n=>n(e,t,r))||function(e,t,n){if(0!=n.button)return!1;let r=e.state.doc;if(-1==t)return!!r.inlineContent&&(lSe(e,Aje.create(r,0,r.content.size)),!0);let s=r.resolve(t);for(let i=s.depth+1;i>0;i--){let t=i>s.depth?s.nodeAfter:s.node(i),n=s.before(i);if(t.inlineContent)lSe(e,Aje.create(r,n+1,n+1+t.content.size));else{if(!Pje.isSelectable(t))continue;lSe(e,Pje.create(r,n))}return!0}}(e,n,r)}function hSe(e){return bSe(e)}Q_e.keydown=(e,t)=>{let n=t;if(e.input.shiftKey=16==n.keyCode||n.shiftKey,!fSe(e,n)&&(e.input.lastKeyCode=n.keyCode,e.input.lastKeyCodeTime=Date.now(),!jNe||!gNe||13!=n.keyCode))if(229!=n.keyCode&&e.domObserver.forceFlush(),!yNe||13!=n.keyCode||n.ctrlKey||n.altKey||n.metaKey)e.someProp("handleKeyDown",t=>t(e,n))||z_e(e,n)?n.preventDefault():nSe(e,"key");else{let t=Date.now();e.input.lastIOSEnter=t,e.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{e.input.lastIOSEnter==t&&(e.someProp("handleKeyDown",t=>t(e,iNe(13,"Enter"))),e.input.lastIOSEnter=0)},200)}},Q_e.keyup=(e,t)=>{16==t.keyCode&&(e.input.shiftKey=!1)},Q_e.keypress=(e,t)=>{let n=t;if(fSe(e,n)||!n.charCode||n.ctrlKey&&!n.altKey||bNe&&n.metaKey)return;if(e.someProp("handleKeyPress",t=>t(e,n)))return void n.preventDefault();let r=e.state.selection;if(!(r instanceof Aje&&r.$from.sameParent(r.$to))){let t=String.fromCharCode(n.charCode),s=()=>e.state.tr.insertText(t).scrollIntoView();/[\r\n]/.test(t)||e.someProp("handleTextInput",n=>n(e,r.$from.pos,r.$to.pos,t,s))||e.dispatch(s()),n.preventDefault()}};const pSe=bNe?"metaKey":"ctrlKey";J_e.mousedown=(e,t)=>{let n=t;e.input.shiftKey=n.shiftKey;let r=hSe(e),s=Date.now(),i="singleClick";s-e.input.lastClick.time<500&&function(e,t){let n=t.x-e.clientX,r=t.y-e.clientY;return n*n+r*r<100}(n,e.input.lastClick)&&!n[pSe]&&e.input.lastClick.button==n.button&&("singleClick"==e.input.lastClick.type?i="doubleClick":"doubleClick"==e.input.lastClick.type&&(i="tripleClick")),e.input.lastClick={time:s,x:n.clientX,y:n.clientY,type:i,button:n.button};let a=e.posAtCoords(aSe(n));a&&("singleClick"==i?(e.input.mouseDown&&e.input.mouseDown.done(),e.input.mouseDown=new mSe(e,a,n,!!r)):("doubleClick"==i?dSe:uSe)(e,a.pos,a.inside,n)?n.preventDefault():nSe(e,"pointer"))};class mSe{constructor(e,t,n,r){let s,i;if(this.view=e,this.pos=t,this.event=n,this.flushed=r,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!n[pSe],this.allowDefault=n.shiftKey,t.inside>-1)s=e.state.doc.nodeAt(t.inside),i=t.inside;else{let n=e.state.doc.resolve(t.pos);s=n.parent,i=n.depth?n.before():0}const a=r?null:n.target,o=a?e.docView.nearestDesc(a,!0):null;this.target=o&&1==o.nodeDOM.nodeType?o.nodeDOM:null;let{selection:l}=e.state;(0==n.button&&s.type.spec.draggable&&!1!==s.type.spec.selectable||l instanceof Pje&&l.from<=i&&l.to>i)&&(this.mightDrag={node:s,pos:i,addAttr:!(!this.target||this.target.draggable),setUneditable:!(!this.target||!mNe||this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),nSe(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>x_e(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(aSe(e))),this.updateAllowDefault(e),this.allowDefault||!t?nSe(this.view,"pointer"):cSe(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():0==e.button&&(this.flushed||vNe&&this.mightDrag&&!this.mightDrag.node.isAtom||gNe&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(lSe(this.view,Mje.near(this.view.state.doc.resolve(t.pos))),e.preventDefault()):nSe(this.view,"pointer")}move(e){this.updateAllowDefault(e),nSe(this.view,"pointer"),0==e.buttons&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}function fSe(e,t){return!!e.composing||!!(vNe&&Math.abs(t.timeStamp-e.input.compositionEndedAt)<500)&&(e.input.compositionEndedAt=-2e8,!0)}J_e.touchstart=e=>{e.input.lastTouch=Date.now(),hSe(e),nSe(e,"pointer")},J_e.touchmove=e=>{e.input.lastTouch=Date.now(),nSe(e,"pointer")},J_e.contextmenu=e=>hSe(e);const gSe=jNe?5e3:-1;function xSe(e,t){clearTimeout(e.input.composingTimeout),t>-1&&(e.input.composingTimeout=setTimeout(()=>bSe(e),t))}function vSe(e){for(e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=function(){let e=document.createEvent("Event");return e.initEvent("event",!0,!0),e.timeStamp}());e.input.compositionNodes.length>0;)e.input.compositionNodes.pop().markParentsDirty()}function ySe(e){let t=e.domSelectionRange();if(!t.focusNode)return null;let n=function(e,t){for(;;){if(3==e.nodeType&&t)return e;if(1==e.nodeType&&t>0){if("false"==e.contentEditable)return null;t=nNe(e=e.childNodes[t-1])}else{if(!e.parentNode||rNe(e))return null;t=Kje(e),e=e.parentNode}}}(t.focusNode,t.focusOffset),r=function(e,t){for(;;){if(3==e.nodeType&&t<e.nodeValue.length)return e;if(1==e.nodeType&&t<e.childNodes.length){if("false"==e.contentEditable)return null;e=e.childNodes[t],t=0}else{if(!e.parentNode||rNe(e))return null;t=Kje(e)+1,e=e.parentNode}}}(t.focusNode,t.focusOffset);if(n&&r&&n!=r){let t=r.pmViewDesc,s=e.domObserver.lastChangedTextNode;if(n==s||r==s)return s;if(!t||!t.isText(r.nodeValue))return r;if(e.input.compositionNode==r){let e=n.pmViewDesc;if(e&&e.isText(n.nodeValue))return r}}return n||r}function bSe(e,t=!1){if(!(jNe&&e.domObserver.flushingSoon>=0)){if(e.domObserver.forceFlush(),vSe(e),t||e.docView&&e.docView.dirty){let n=f_e(e),r=e.state.selection;return n&&!n.eq(r)?e.dispatch(e.state.tr.setSelection(n)):!e.markCursor&&!t||r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?e.updateState(e.state):e.dispatch(e.state.tr.deleteSelection()),!0}return!1}}Q_e.compositionstart=Q_e.compositionupdate=e=>{if(!e.composing){e.domObserver.flush();let{state:t}=e,n=t.selection.$to;if(t.selection instanceof Aje&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(e=>!1===e.type.spec.inclusive)))e.markCursor=e.state.storedMarks||n.marks(),bSe(e,!0),e.markCursor=null;else if(bSe(e,!t.selection.empty),mNe&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let t=e.domSelectionRange();for(let n=t.focusNode,r=t.focusOffset;n&&1==n.nodeType&&0!=r;){let t=r<0?n.lastChild:n.childNodes[r-1];if(!t)break;if(3==t.nodeType){let n=e.domSelection();n&&n.collapse(t,t.nodeValue.length);break}n=t,r=-1}}e.input.composing=!0}xSe(e,gSe)},Q_e.compositionend=(e,t)=>{e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=t.timeStamp,e.input.compositionPendingChanges=e.domObserver.pendingRecords().length?e.input.compositionID:0,e.input.compositionNode=null,e.input.compositionPendingChanges&&Promise.resolve().then(()=>e.domObserver.flush()),e.input.compositionID++,xSe(e,20))};const wSe=hNe&&pNe<15||yNe&&_Ne<604;function jSe(e,t,n,r,s){let i=U_e(e,t,n,r,e.state.selection.$from);if(e.someProp("handlePaste",t=>t(e,s,i||Rbe.empty)))return!0;if(!i)return!1;let a=function(e){return 0==e.openStart&&0==e.openEnd&&1==e.content.childCount?e.content.firstChild:null}(i),o=a?e.state.tr.replaceSelectionWith(a,r):e.state.tr.replaceSelection(i);return e.dispatch(o.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function NSe(e){let t=e.getData("text/plain")||e.getData("Text");if(t)return t;let n=e.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}J_e.copy=Q_e.cut=(e,t)=>{let n=t,r=e.state.selection,s="cut"==n.type;if(r.empty)return;let i=wSe?null:n.clipboardData,a=r.content(),{dom:o,text:l}=B_e(e,a);i?(n.preventDefault(),i.clearData(),i.setData("text/html",o.innerHTML),i.setData("text/plain",l)):function(e,t){if(!e.dom.parentNode)return;let n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),s=document.createRange();s.selectNodeContents(t),e.dom.blur(),r.removeAllRanges(),r.addRange(s),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),e.focus()},50)}(e,o),s&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))},Q_e.paste=(e,t)=>{let n=t;if(e.composing&&!jNe)return;let r=wSe?null:n.clipboardData,s=e.input.shiftKey&&45!=e.input.lastKeyCode;r&&jSe(e,NSe(r),r.getData("text/html"),s,n)?n.preventDefault():function(e,t){if(!e.dom.parentNode)return;let n=e.input.shiftKey||e.state.selection.$from.parent.type.spec.code,r=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let s=e.input.shiftKey&&45!=e.input.lastKeyCode;setTimeout(()=>{e.focus(),r.parentNode&&r.parentNode.removeChild(r),n?jSe(e,r.value,null,s,t):jSe(e,r.textContent,r.innerHTML,s,t)},50)}(e,n)};class _Se{constructor(e,t,n){this.slice=e,this.move=t,this.node=n}}const SSe=bNe?"altKey":"ctrlKey";function MSe(e,t){let n=e.someProp("dragCopies",e=>!e(t));return null!=n?n:!t[SSe]}J_e.dragstart=(e,t)=>{let n=t,r=e.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let s,i=e.state.selection,a=i.empty?null:e.posAtCoords(aSe(n));if(a&&a.pos>=i.from&&a.pos<=(i instanceof Pje?i.to-1:i.to));else if(r&&r.mightDrag)s=Pje.create(e.state.doc,r.mightDrag.pos);else if(n.target&&1==n.target.nodeType){let t=e.docView.nearestDesc(n.target,!0);t&&t.node.type.spec.draggable&&t!=e.docView&&(s=Pje.create(e.state.doc,t.posBefore))}let o=(s||e.state.selection).content(),{dom:l,text:c,slice:d}=B_e(e,o);(!n.dataTransfer.files.length||!gNe||xNe>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(wSe?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",wSe||n.dataTransfer.setData("text/plain",c),e.dragging=new _Se(d,MSe(e,n),s)},J_e.dragend=e=>{let t=e.dragging;window.setTimeout(()=>{e.dragging==t&&(e.dragging=null)},50)},Q_e.dragover=Q_e.dragenter=(e,t)=>t.preventDefault(),Q_e.drop=(e,t)=>{let n=t,r=e.dragging;if(e.dragging=null,!n.dataTransfer)return;let s=e.posAtCoords(aSe(n));if(!s)return;let i=e.state.doc.resolve(s.pos),a=r&&r.slice;a?e.someProp("transformPasted",t=>{a=t(a,e,!1)}):a=U_e(e,NSe(n.dataTransfer),wSe?null:n.dataTransfer.getData("text/html"),!1,i);let o=!(!r||!MSe(e,n));if(e.someProp("handleDrop",t=>t(e,n,a||Rbe.empty,o)))return void n.preventDefault();if(!a)return;n.preventDefault();let l=a?cje(e.state.doc,i.pos,a):i.pos;null==l&&(l=i.pos);let c=e.state.tr;if(o){let{node:e}=r;e?e.replace(c):c.deleteSelection()}let d=c.mapping.map(l),u=0==a.openStart&&0==a.openEnd&&1==a.content.childCount,h=c.doc;if(u?c.replaceRangeWith(d,d,a.content.firstChild):c.replaceRange(d,d,a),c.doc.eq(h))return;let p=c.doc.resolve(d);if(u&&Pje.isSelectable(a.content.firstChild)&&p.nodeAfter&&p.nodeAfter.sameMarkup(a.content.firstChild))c.setSelection(new Pje(p));else{let t=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((e,n,r,s)=>t=s),c.setSelection(__e(e,p,c.doc.resolve(t)))}e.focus(),e.dispatch(c.setMeta("uiEvent","drop"))},J_e.focus=e=>{e.input.lastFocus=Date.now(),e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout(()=>{e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.domSelectionRange())&&x_e(e)},20))},J_e.blur=(e,t)=>{let n=t;e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),n.relatedTarget&&e.dom.contains(n.relatedTarget)&&e.domObserver.currentSelection.clear(),e.focused=!1)},J_e.beforeinput=(e,t)=>{if(gNe&&jNe&&"deleteContentBackward"==t.inputType){e.domObserver.flushSoon();let{domChangeCount:t}=e.input;setTimeout(()=>{if(e.input.domChangeCount!=t)return;if(e.dom.blur(),e.focus(),e.someProp("handleKeyDown",t=>t(e,iNe(8,"Backspace"))))return;let{$cursor:n}=e.state.selection;n&&n.pos>0&&e.dispatch(e.state.tr.delete(n.pos-1,n.pos).scrollIntoView())},50)}};for(let os in Q_e)J_e[os]=Q_e[os];function CSe(e,t){if(e==t)return!0;for(let n in e)if(e[n]!==t[n])return!1;for(let n in t)if(!(n in e))return!1;return!0}class ESe{constructor(e,t){this.toDOM=e,this.spec=t||OSe,this.side=this.spec.side||0}map(e,t,n,r){let{pos:s,deleted:i}=e.mapResult(t.from+r,this.side<0?-1:1);return i?null:new TSe(s-n,s-n,this)}valid(){return!0}eq(e){return this==e||e instanceof ESe&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&CSe(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class kSe{constructor(e,t){this.attrs=e,this.spec=t||OSe}map(e,t,n,r){let s=e.map(t.from+r,this.spec.inclusiveStart?-1:1)-n,i=e.map(t.to+r,this.spec.inclusiveEnd?1:-1)-n;return s>=i?null:new TSe(s,i,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof kSe&&CSe(this.attrs,e.attrs)&&CSe(this.spec,e.spec)}static is(e){return e.type instanceof kSe}destroy(){}}class ASe{constructor(e,t){this.attrs=e,this.spec=t||OSe}map(e,t,n,r){let s=e.mapResult(t.from+r,1);if(s.deleted)return null;let i=e.mapResult(t.to+r,-1);return i.deleted||i.pos<=s.pos?null:new TSe(s.pos-n,i.pos-n,this)}valid(e,t){let n,{index:r,offset:s}=e.content.findIndex(t.from);return s==t.from&&!(n=e.child(r)).isText&&s+n.nodeSize==t.to}eq(e){return this==e||e instanceof ASe&&CSe(this.attrs,e.attrs)&&CSe(this.spec,e.spec)}destroy(){}}class TSe{constructor(e,t,n){this.from=e,this.to=t,this.type=n}copy(e,t){return new TSe(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,n){return this.type.map(e,this,t,n)}static widget(e,t,n){return new TSe(e,e,new ESe(t,n))}static inline(e,t,n,r){return new TSe(e,t,new kSe(n,r))}static node(e,t,n,r){return new TSe(e,t,new ASe(n,r))}get spec(){return this.type.spec}get inline(){return this.type instanceof kSe}get widget(){return this.type instanceof ESe}}const PSe=[],OSe={};class RSe{constructor(e,t){this.local=e.length?e:PSe,this.children=t.length?t:PSe}static create(e,t){return t.length?BSe(t,e,0,OSe):ISe}find(e,t,n){let r=[];return this.findInner(null==e?0:e,null==t?1e9:t,r,0,n),r}findInner(e,t,n,r,s){for(let i=0;i<this.local.length;i++){let a=this.local[i];a.from<=t&&a.to>=e&&(!s||s(a.spec))&&n.push(a.copy(a.from+r,a.to+r))}for(let i=0;i<this.children.length;i+=3)if(this.children[i]<t&&this.children[i+1]>e){let a=this.children[i]+1;this.children[i+2].findInner(e-a,t-a,n,r+a,s)}}map(e,t,n){return this==ISe||0==e.maps.length?this:this.mapInner(e,t,0,0,n||OSe)}mapInner(e,t,n,r,s){let i;for(let a=0;a<this.local.length;a++){let o=this.local[a].map(e,n,r);o&&o.type.valid(t,o)?(i||(i=[])).push(o):s.onRemove&&s.onRemove(this.local[a].spec)}return this.children.length?function(e,t,n,r,s,i,a){let o=e.slice();for(let c=0,d=i;c<n.maps.length;c++){let e=0;n.maps[c].forEach((t,n,r,s)=>{let i=s-r-(n-t);for(let a=0;a<o.length;a+=3){let r=o[a+1];if(r<0||t>r+d-e)continue;let s=o[a]+d-e;n>=s?o[a+1]=t<=s?-2:-1:t>=d&&i&&(o[a]+=i,o[a+1]+=i)}e+=i}),d=n.maps[c].map(d,-1)}let l=!1;for(let c=0;c<o.length;c+=3)if(o[c+1]<0){if(-2==o[c+1]){l=!0,o[c+1]=-1;continue}let t=n.map(e[c]+i),d=t-s;if(d<0||d>=r.content.size){l=!0;continue}let u=n.map(e[c+1]+i,-1)-s,{index:h,offset:p}=r.content.findIndex(d),m=r.maybeChild(h);if(m&&p==d&&p+m.nodeSize==u){let r=o[c+2].mapInner(n,m,t+1,e[c]+i+1,a);r!=ISe?(o[c]=d,o[c+1]=u,o[c+2]=r):(o[c+1]=-2,l=!0)}else l=!0}if(l){let l=function(e,t,n,r,s,i,a){function o(e,t){for(let i=0;i<e.local.length;i++){let o=e.local[i].map(r,s,t);o?n.push(o):a.onRemove&&a.onRemove(e.local[i].spec)}for(let n=0;n<e.children.length;n+=3)o(e.children[n+2],e.children[n]+t+1)}for(let l=0;l<e.length;l+=3)-1==e[l+1]&&o(e[l+2],t[l]+i+1);return n}(o,e,t,n,s,i,a),c=BSe(l,r,0,a);t=c.local;for(let e=0;e<o.length;e+=3)o[e+1]<0&&(o.splice(e,3),e-=3);for(let e=0,t=0;e<c.children.length;e+=3){let n=c.children[e];for(;t<o.length&&o[t]<n;)t+=3;o.splice(t,0,c.children[e],c.children[e+1],c.children[e+2])}}return new RSe(t.sort(USe),o)}(this.children,i||[],e,t,n,r,s):i?new RSe(i.sort(USe),PSe):ISe}add(e,t){return t.length?this==ISe?RSe.create(e,t):this.addInner(e,t,0):this}addInner(e,t,n){let r,s=0;e.forEach((e,i)=>{let a,o=i+n;if(a=FSe(t,e,o)){for(r||(r=this.children.slice());s<r.length&&r[s]<i;)s+=3;r[s]==i?r[s+2]=r[s+2].addInner(e,a,o+1):r.splice(s,0,i,i+e.nodeSize,BSe(a,e,o+1,OSe)),s+=3}});let i=LSe(s?zSe(t):t,-n);for(let a=0;a<i.length;a++)i[a].type.valid(e,i[a])||i.splice(a--,1);return new RSe(i.length?this.local.concat(i).sort(USe):this.local,r||this.children)}remove(e){return 0==e.length||this==ISe?this:this.removeInner(e,0)}removeInner(e,t){let n=this.children,r=this.local;for(let s=0;s<n.length;s+=3){let r,i=n[s]+t,a=n[s+1]+t;for(let t,n=0;n<e.length;n++)(t=e[n])&&t.from>i&&t.to<a&&(e[n]=null,(r||(r=[])).push(t));if(!r)continue;n==this.children&&(n=this.children.slice());let o=n[s+2].removeInner(r,i+1);o!=ISe?n[s+2]=o:(n.splice(s,3),s-=3)}if(r.length)for(let s,i=0;i<e.length;i++)if(s=e[i])for(let e=0;e<r.length;e++)r[e].eq(s,t)&&(r==this.local&&(r=this.local.slice()),r.splice(e--,1));return n==this.children&&r==this.local?this:r.length||n.length?new RSe(r,n):ISe}forChild(e,t){if(this==ISe)return this;if(t.isLeaf)return RSe.empty;let n,r;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(n=this.children[a+2]);break}let s=e+1,i=s+t.content.size;for(let a=0;a<this.local.length;a++){let e=this.local[a];if(e.from<i&&e.to>s&&e.type instanceof kSe){let t=Math.max(s,e.from)-s,n=Math.min(i,e.to)-s;t<n&&(r||(r=[])).push(e.copy(t,n))}}if(r){let e=new RSe(r.sort(USe),PSe);return n?new DSe([e,n]):e}return n||ISe}eq(e){if(this==e)return!0;if(!(e instanceof RSe)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return VSe(this.localsInner(e))}localsInner(e){if(this==ISe)return PSe;if(e.inlineContent||!this.local.some(kSe.is))return this.local;let t=[];for(let n=0;n<this.local.length;n++)this.local[n].type instanceof kSe||t.push(this.local[n]);return t}forEachSet(e){e(this)}}RSe.empty=new RSe([],[]),RSe.removeOverlap=VSe;const ISe=RSe.empty;class DSe{constructor(e){this.members=e}map(e,t){const n=this.members.map(n=>n.map(e,t,OSe));return DSe.from(n)}forChild(e,t){if(t.isLeaf)return RSe.empty;let n=[];for(let r=0;r<this.members.length;r++){let s=this.members[r].forChild(e,t);s!=ISe&&(s instanceof DSe?n=n.concat(s.members):n.push(s))}return DSe.from(n)}eq(e){if(!(e instanceof DSe)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,n=!0;for(let r=0;r<this.members.length;r++){let s=this.members[r].localsInner(e);if(s.length)if(t){n&&(t=t.slice(),n=!1);for(let e=0;e<s.length;e++)t.push(s[e])}else t=s}return t?VSe(n?t:t.sort(USe)):PSe}static from(e){switch(e.length){case 0:return ISe;case 1:return e[0];default:return new DSe(e.every(e=>e instanceof RSe)?e:e.reduce((e,t)=>e.concat(t instanceof RSe?t:t.members),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}}function LSe(e,t){if(!t||!e.length)return e;let n=[];for(let r=0;r<e.length;r++){let s=e[r];n.push(new TSe(s.from+t,s.to+t,s.type))}return n}function FSe(e,t,n){if(t.isLeaf)return null;let r=n+t.nodeSize,s=null;for(let i,a=0;a<e.length;a++)(i=e[a])&&i.from>n&&i.to<r&&((s||(s=[])).push(i),e[a]=null);return s}function zSe(e){let t=[];for(let n=0;n<e.length;n++)null!=e[n]&&t.push(e[n]);return t}function BSe(e,t,n,r){let s=[],i=!1;t.forEach((t,a)=>{let o=FSe(e,t,a+n);if(o){i=!0;let e=BSe(o,t,n+a+1,r);e!=ISe&&s.push(a,a+t.nodeSize,e)}});let a=LSe(i?zSe(e):e,-n).sort(USe);for(let o=0;o<a.length;o++)a[o].type.valid(t,a[o])||(r.onRemove&&r.onRemove(a[o].spec),a.splice(o--,1));return a.length||s.length?new RSe(a,s):ISe}function USe(e,t){return e.from-t.from||e.to-t.to}function VSe(e){let t=e;for(let n=0;n<t.length-1;n++){let r=t[n];if(r.from!=r.to)for(let s=n+1;s<t.length;s++){let i=t[s];if(i.from!=r.from){i.from<r.to&&(t==e&&(t=e.slice()),t[n]=r.copy(r.from,i.from),HSe(t,s,r.copy(i.from,r.to)));break}i.to!=r.to&&(t==e&&(t=e.slice()),t[s]=i.copy(i.from,r.to),HSe(t,s+1,i.copy(r.to,i.to)))}}return t}function HSe(e,t,n){for(;t<e.length&&USe(n,e[t])>0;)t++;e.splice(t,0,n)}function WSe(e){let t=[];return e.someProp("decorations",n=>{let r=n(e.state);r&&r!=ISe&&t.push(r)}),e.cursorWrapper&&t.push(RSe.create(e.state.doc,[e.cursorWrapper.deco])),DSe.from(t)}const $Se={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},GSe=hNe&&pNe<=11;class qSe{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class XSe{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new qSe,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(e=>{for(let t=0;t<e.length;t++)this.queue.push(e[t]);hNe&&pNe<=11&&e.some(e=>"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length)?this.flushSoon():this.flush()}),GSe&&(this.onCharData=e=>{this.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,$Se)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(S_e(this.view)){if(this.suppressingSelectionUpdates)return x_e(this.view);if(hNe&&pNe<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Qje(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t,n=new Set;for(let s=e.focusNode;s;s=Yje(s))n.add(s);for(let s=e.anchorNode;s;s=Yje(s))if(n.has(s)){t=s;break}let r=t&&this.view.docView.nearestDesc(t);return r&&r.ignoreMutation({type:"selection",target:3==t.nodeType?t.parentNode:t})?(this.setCurSelection(),!0):void 0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let n=e.domSelectionRange(),r=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(n)&&S_e(e)&&!this.ignoreSelectionChange(n),s=-1,i=-1,a=!1,o=[];if(e.editable)for(let c=0;c<t.length;c++){let e=this.registerMutation(t[c],o);e&&(s=s<0?e.from:Math.min(e.from,s),i=i<0?e.to:Math.max(e.to,i),e.typeOver&&(a=!0))}if(mNe&&o.length){let t=o.filter(e=>"BR"==e.nodeName);if(2==t.length){let[e,n]=t;e.parentNode&&e.parentNode.parentNode==n.parentNode?n.remove():e.remove()}else{let{focusNode:n}=this.currentSelection;for(let r of t){let t=r.parentNode;!t||"LI"!=t.nodeName||n&&JSe(e,n)==t||r.remove()}}}let l=null;s<0&&r&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&sNe(n)&&(l=f_e(e))&&l.eq(Mje.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,x_e(e),this.currentSelection.set(n),e.scrollToSelection()):(s>-1||r)&&(s>-1&&(e.docView.markDirty(s,i),function(e){if(KSe.has(e))return;if(KSe.set(e,null),-1!==["normal","nowrap","pre-line"].indexOf(getComputedStyle(e.dom).whiteSpace)){if(e.requiresGeckoHackNode=mNe,YSe)return;YSe=!0}}(e)),this.handleDOMChange(s,i,a,o),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(n)||x_e(e),this.currentSelection.set(n))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let n=this.view.docView.nearestDesc(e.target);if("attributes"==e.type&&(n==this.view.docView||"contenteditable"==e.attributeName||"style"==e.attributeName&&!e.oldValue&&!e.target.getAttribute("style")))return null;if(!n||n.ignoreMutation(e))return null;if("childList"==e.type){for(let n=0;n<e.addedNodes.length;n++){let r=e.addedNodes[n];t.push(r),3==r.nodeType&&(this.lastChangedTextNode=r)}if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(e.target))return{from:n.posBefore,to:n.posAfter};let r=e.previousSibling,s=e.nextSibling;if(hNe&&pNe<=11&&e.addedNodes.length)for(let t=0;t<e.addedNodes.length;t++){let{previousSibling:n,nextSibling:i}=e.addedNodes[t];(!n||Array.prototype.indexOf.call(e.addedNodes,n)<0)&&(r=n),(!i||Array.prototype.indexOf.call(e.addedNodes,i)<0)&&(s=i)}let i=r&&r.parentNode==e.target?Kje(r)+1:0,a=n.localPosFromDOM(e.target,i,-1),o=s&&s.parentNode==e.target?Kje(s):e.target.childNodes.length;return{from:a,to:n.localPosFromDOM(e.target,o,1)}}return"attributes"==e.type?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:(this.lastChangedTextNode=e.target,{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let KSe=new WeakMap,YSe=!1;function ZSe(e,t){let n=t.startContainer,r=t.startOffset,s=t.endContainer,i=t.endOffset,a=e.domAtPos(e.state.selection.anchor);return Qje(a.node,a.offset,s,i)&&([n,r,s,i]=[s,i,n,r]),{anchorNode:n,anchorOffset:r,focusNode:s,focusOffset:i}}function JSe(e,t){for(let n=t.parentNode;n&&n!=e.dom;n=n.parentNode){let t=e.docView.nearestDesc(n,!0);if(t&&t.node.isBlock)return n}return null}function QSe(e){let t=e.pmViewDesc;if(t)return t.parseRule();if("BR"==e.nodeName&&e.parentNode){if(vNe&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){let e=document.createElement("div");return e.appendChild(document.createElement("li")),{skip:e}}if(e.parentNode.lastChild==e||vNe&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if("IMG"==e.nodeName&&e.getAttribute("mark-placeholder"))return{ignore:!0};return null}const eMe=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function tMe(e,t,n,r,s){let i=e.input.compositionPendingChanges||(e.composing?e.input.compositionID:0);if(e.input.compositionPendingChanges=0,t<0){let t=e.input.lastSelectionTime>Date.now()-50?e.input.lastSelectionOrigin:null,n=f_e(e,t);if(n&&!e.state.selection.eq(n)){if(gNe&&jNe&&13===e.input.lastKeyCode&&Date.now()-100<e.input.lastKeyCodeTime&&e.someProp("handleKeyDown",t=>t(e,iNe(13,"Enter"))))return;let r=e.state.tr.setSelection(n);"pointer"==t?r.setMeta("pointer",!0):"key"==t&&r.scrollIntoView(),i&&r.setMeta("composition",i),e.dispatch(r)}return}let a=e.state.doc.resolve(t),o=a.sharedDepth(n);t=a.before(o+1),n=e.state.doc.resolve(n).after(o+1);let l,c,d=e.state.selection,u=function(e,t,n){let r,{node:s,fromOffset:i,toOffset:a,from:o,to:l}=e.docView.parseRange(t,n),c=e.domSelectionRange(),d=c.anchorNode;if(d&&e.dom.contains(1==d.nodeType?d:d.parentNode)&&(r=[{node:d,offset:c.anchorOffset}],sNe(c)||r.push({node:c.focusNode,offset:c.focusOffset})),gNe&&8===e.input.lastKeyCode)for(let g=a;g>i;g--){let e=s.childNodes[g-1],t=e.pmViewDesc;if("BR"==e.nodeName&&!t){a=g;break}if(!t||t.size)break}let u=e.state.doc,h=e.someProp("domParser")||ywe.fromSchema(e.state.schema),p=u.resolve(o),m=null,f=h.parse(s,{topNode:p.parent,topMatch:p.parent.contentMatchAt(p.index()),topOpen:!0,from:i,to:a,preserveWhitespace:"pre"!=p.parent.type.whitespace||"full",findPositions:r,ruleFromNode:QSe,context:p});if(r&&null!=r[0].pos){let e=r[0].pos,t=r[1]&&r[1].pos;null==t&&(t=e),m={anchor:e+o,head:t+o}}return{doc:f,sel:m,from:o,to:l}}(e,t,n),h=e.state.doc,p=h.slice(u.from,u.to);8===e.input.lastKeyCode&&Date.now()-100<e.input.lastKeyCodeTime?(l=e.state.selection.to,c="end"):(l=e.state.selection.from,c="start"),e.input.lastKeyCode=null;let m=function(e,t,n,r,s){let i=e.findDiffStart(t,n);if(null==i)return null;let{a:a,b:o}=e.findDiffEnd(t,n+e.size,n+t.size);if("end"==s){r-=a+Math.max(0,i-Math.min(a,o))-i}if(a<i&&e.size<t.size){let e=r<=i&&r>=a?i-r:0;i-=e,i&&i<t.size&&sMe(t.textBetween(i-1,i+1))&&(i+=e?1:-1),o=i+(o-a),a=i}else if(o<i){let t=r<=i&&r>=o?i-r:0;i-=t,i&&i<e.size&&sMe(e.textBetween(i-1,i+1))&&(i+=t?1:-1),a=i+(a-o),o=i}return{start:i,endA:a,endB:o}}(p.content,u.doc.content,u.from,l,c);if(m&&e.input.domChangeCount++,(yNe&&e.input.lastIOSEnter>Date.now()-225||jNe)&&s.some(e=>1==e.nodeType&&!eMe.test(e.nodeName))&&(!m||m.endA>=m.endB)&&e.someProp("handleKeyDown",t=>t(e,iNe(13,"Enter"))))return void(e.input.lastIOSEnter=0);if(!m){if(!(r&&d instanceof Aje&&!d.empty&&d.$head.sameParent(d.$anchor))||e.composing||u.sel&&u.sel.anchor!=u.sel.head){if(u.sel){let t=nMe(e,e.state.doc,u.sel);if(t&&!t.eq(e.state.selection)){let n=e.state.tr.setSelection(t);i&&n.setMeta("composition",i),e.dispatch(n)}}return}m={start:d.from,endA:d.to,endB:d.to}}e.state.selection.from<e.state.selection.to&&m.start==m.endB&&e.state.selection instanceof Aje&&(m.start>e.state.selection.from&&m.start<=e.state.selection.from+2&&e.state.selection.from>=u.from?m.start=e.state.selection.from:m.endA<e.state.selection.to&&m.endA>=e.state.selection.to-2&&e.state.selection.to<=u.to&&(m.endB+=e.state.selection.to-m.endA,m.endA=e.state.selection.to)),hNe&&pNe<=11&&m.endB==m.start+1&&m.endA==m.start&&m.start>u.from&&" "==u.doc.textBetween(m.start-u.from-1,m.start-u.from+1)&&(m.start--,m.endA--,m.endB--);let f=u.doc.resolveNoCache(m.start-u.from),g=u.doc.resolveNoCache(m.endB-u.from),x=h.resolve(m.start),v=f.sameParent(g)&&f.parent.inlineContent&&x.end()>=m.endA;if((yNe&&e.input.lastIOSEnter>Date.now()-225&&(!v||s.some(e=>"DIV"==e.nodeName||"P"==e.nodeName))||!v&&f.pos<u.doc.content.size&&(!f.sameParent(g)||!f.parent.inlineContent)&&f.pos<g.pos&&!/\S/.test(u.doc.textBetween(f.pos,g.pos,"","")))&&e.someProp("handleKeyDown",t=>t(e,iNe(13,"Enter"))))return void(e.input.lastIOSEnter=0);if(e.state.selection.anchor>m.start&&function(e,t,n,r,s){if(n-t<=s.pos-r.pos||rMe(r,!0,!1)<s.pos)return!1;let i=e.resolve(t);if(!r.parent.isTextblock){let e=i.nodeAfter;return null!=e&&n==t+e.nodeSize}if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;let a=e.resolve(rMe(i,!0,!0));return!(!a.parent.isTextblock||a.pos>n||rMe(a,!0,!1)<n)&&r.parent.content.cut(r.parentOffset).eq(a.parent.content)}(h,m.start,m.endA,f,g)&&e.someProp("handleKeyDown",t=>t(e,iNe(8,"Backspace"))))return void(jNe&&gNe&&e.domObserver.suppressSelectionUpdates());gNe&&m.endB==m.start&&(e.input.lastChromeDelete=Date.now()),jNe&&!v&&f.start()!=g.start()&&0==g.parentOffset&&f.depth==g.depth&&u.sel&&u.sel.anchor==u.sel.head&&u.sel.head==m.endA&&(m.endB-=2,g=u.doc.resolveNoCache(m.endB-u.from),setTimeout(()=>{e.someProp("handleKeyDown",function(t){return t(e,iNe(13,"Enter"))})},20));let y,b=m.start,w=m.endA,j=t=>{let n=t||e.state.tr.replace(b,w,u.doc.slice(m.start-u.from,m.endB-u.from));if(u.sel){let t=nMe(e,n.doc,u.sel);t&&!(gNe&&e.composing&&t.empty&&(m.start!=m.endB||e.input.lastChromeDelete<Date.now()-100)&&(t.head==b||t.head==n.mapping.map(w)-1)||hNe&&t.empty&&t.head==b)&&n.setSelection(t)}return i&&n.setMeta("composition",i),n.scrollIntoView()};if(v)if(f.pos==g.pos){hNe&&pNe<=11&&0==f.parentOffset&&(e.domObserver.suppressSelectionUpdates(),setTimeout(()=>x_e(e),20));let t=j(e.state.tr.delete(b,w)),n=h.resolve(m.start).marksAcross(h.resolve(m.endA));n&&t.ensureMarks(n),e.dispatch(t)}else if(m.endA==m.endB&&(y=function(e,t){let n,r,s,i=e.firstChild.marks,a=t.firstChild.marks,o=i,l=a;for(let d=0;d<a.length;d++)o=a[d].removeFromSet(o);for(let d=0;d<i.length;d++)l=i[d].removeFromSet(l);if(1==o.length&&0==l.length)r=o[0],n="add",s=e=>e.mark(r.addToSet(e.marks));else{if(0!=o.length||1!=l.length)return null;r=l[0],n="remove",s=e=>e.mark(r.removeFromSet(e.marks))}let c=[];for(let d=0;d<t.childCount;d++)c.push(s(t.child(d)));if(Ebe.from(c).eq(e))return{mark:r,type:n}}(f.parent.content.cut(f.parentOffset,g.parentOffset),x.parent.content.cut(x.parentOffset,m.endA-x.start())))){let t=j(e.state.tr);"add"==y.type?t.addMark(b,w,y.mark):t.removeMark(b,w,y.mark),e.dispatch(t)}else if(f.parent.child(f.index()).isText&&f.index()==g.index()-(g.textOffset?0:1)){let t=f.parent.textBetween(f.parentOffset,g.parentOffset),n=()=>j(e.state.tr.insertText(t,b,w));e.someProp("handleTextInput",r=>r(e,b,w,t,n))||e.dispatch(n())}else e.dispatch(j());else e.dispatch(j())}function nMe(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:__e(e,t.resolve(n.anchor),t.resolve(n.head))}function rMe(e,t,n){let r=e.depth,s=t?e.end():e.pos;for(;r>0&&(t||e.indexAfter(r)==e.node(r).childCount);)r--,s++,t=!1;if(n){let t=e.node(r).maybeChild(e.indexAfter(r));for(;t&&!t.isLeaf;)t=t.firstChild,s++}return s}function sMe(e){if(2!=e.length)return!1;let t=e.charCodeAt(0),n=e.charCodeAt(1);return t>=56320&&t<=57343&&n>=55296&&n<=56319}class iMe{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new tSe,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(dMe),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):"function"==typeof e?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=lMe(this),oMe(this),this.nodeViews=cMe(this),this.docView=QNe(this.state.doc,aMe(this),WSe(this),this.dom,this),this.domObserver=new XSe(this,(e,t,n,r)=>tMe(this,e,t,n,r)),this.domObserver.start(),function(e){for(let t in J_e){let n=J_e[t];e.dom.addEventListener(t,e.input.eventHandlers[t]=t=>{!iSe(e,t)||sSe(e,t)||!e.editable&&t.type in Q_e||n(e,t)},eSe[t]?{passive:!0}:void 0)}vNe&&e.dom.addEventListener("input",()=>null),rSe(e)}(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&rSe(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(dMe),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let n in this._props)t[n]=this._props[n];t.state=this.state;for(let n in e)t[n]=e[n];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var n;let r=this.state,s=!1,i=!1;e.storedMarks&&this.composing&&(vSe(this),i=!0),this.state=e;let a=r.plugins!=e.plugins||this._props.plugins!=t.plugins;if(a||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let e=cMe(this);(function(e,t){let n=0,r=0;for(let s in e){if(e[s]!=t[s])return!0;n++}for(let s in t)r++;return n!=r})(e,this.nodeViews)&&(this.nodeViews=e,s=!0)}(a||t.handleDOMEvents!=this._props.handleDOMEvents)&&rSe(this),this.editable=lMe(this),oMe(this);let o=WSe(this),l=aMe(this),c=r.plugins==e.plugins||r.doc.eq(e.doc)?e.scrollToSelection>r.scrollToSelection?"to selection":"preserve":"reset",d=s||!this.docView.matchesNode(e.doc,l,o);!d&&e.selection.eq(r.selection)||(i=!0);let u="preserve"==c&&i&&null==this.dom.style.overflowAnchor&&function(e){let t,n,r=e.dom.getBoundingClientRect(),s=Math.max(0,r.top);for(let i=(r.left+r.right)/2,a=s+1;a<Math.min(innerHeight,r.bottom);a+=5){let r=e.root.elementFromPoint(i,a);if(!r||r==e.dom||!e.dom.contains(r))continue;let o=r.getBoundingClientRect();if(o.top>=s-20){t=r,n=o.top;break}}return{refDOM:t,refTop:n,stack:kNe(e.dom)}}(this);if(i){this.domObserver.stop();let t=d&&(hNe||gNe)&&!this.composing&&!r.selection.empty&&!e.selection.empty&&function(e,t){let n=Math.min(e.$anchor.sharedDepth(e.head),t.$anchor.sharedDepth(t.head));return e.$anchor.start(n)!=t.$anchor.start(n)}(r.selection,e.selection);if(d){let n=gNe?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=ySe(this)),!s&&this.docView.update(e.doc,l,o,this)||(this.docView.updateOuterDeco(l),this.docView.destroy(),this.docView=QNe(e.doc,l,o,this.dom,this)),n&&!this.trackWrites&&(t=!0)}t||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&function(e){let t=e.docView.domFromPos(e.state.selection.anchor,0),n=e.domSelectionRange();return Qje(t.node,t.offset,n.anchorNode,n.anchorOffset)}(this))?x_e(this,t):(j_e(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(r),(null===(n=this.dragging)||void 0===n?void 0:n.node)&&!r.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,r),"reset"==c?this.dom.scrollTop=0:"to selection"==c?this.scrollToSelection():u&&function({refDOM:e,refTop:t,stack:n}){let r=e?e.getBoundingClientRect().top:0;ANe(n,0==r?0:r-t)}(u)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(e&&this.dom.contains(1==e.nodeType?e:e.parentNode))if(this.someProp("handleScrollToSelection",e=>e(this)));else if(this.state.selection instanceof Pje){let t=this.docView.domAfterPos(this.state.selection.from);1==t.nodeType&&ENe(this,t.getBoundingClientRect(),e)}else ENe(this,this.coordsAtPos(this.state.selection.head,1),e);else;}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(e&&e.plugins==this.state.plugins&&this.directPlugins==this.prevDirectPlugins)for(let t=0;t<this.pluginViews.length;t++){let n=this.pluginViews[t];n.update&&n.update(this,e)}else{this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let e=0;e<this.directPlugins.length;e++){let t=this.directPlugins[e];t.spec.view&&this.pluginViews.push(t.spec.view(this))}for(let e=0;e<this.state.plugins.length;e++){let t=this.state.plugins[e];t.spec.view&&this.pluginViews.push(t.spec.view(this))}}}updateDraggedNode(e,t){let n=e.node,r=-1;if(this.state.doc.nodeAt(n.from)==n.node)r=n.from;else{let e=n.from+(this.state.doc.content.size-t.doc.content.size);(e>0&&this.state.doc.nodeAt(e))==n.node&&(r=e)}this.dragging=new _Se(e.slice,e.move,r<0?void 0:Pje.create(this.state.doc,r))}someProp(e,t){let n,r=this._props&&this._props[e];if(null!=r&&(n=t?t(r):r))return n;for(let i=0;i<this.directPlugins.length;i++){let r=this.directPlugins[i].props[e];if(null!=r&&(n=t?t(r):r))return n}let s=this.state.plugins;if(s)for(let i=0;i<s.length;i++){let r=s[i].props[e];if(null!=r&&(n=t?t(r):r))return n}}hasFocus(){if(hNe){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if("false"==e.contentEditable)return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&function(e){if(e.setActive)return e.setActive();if(TNe)return e.focus(TNe);let t=kNe(e);e.focus(null==TNe?{get preventScroll(){return TNe={preventScroll:!0},!0}}:void 0),TNe||(TNe=!1,ANe(t,0))}(this.dom),x_e(this),this.domObserver.start()}get root(){let e=this._root;if(null==e)for(let t=this.dom.parentNode;t;t=t.parentNode)if(9==t.nodeType||11==t.nodeType&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t;return e||document}updateRoot(){this._root=null}posAtCoords(e){return INe(this,e)}coordsAtPos(e,t=1){return zNe(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,n=-1){let r=this.docView.posFromDOM(e,t,n);if(null==r)throw new RangeError("DOM position not inside the editor");return r}endOfTextblock(e,t){return qNe(this,t||this.state,e)}pasteHTML(e,t){return jSe(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return jSe(this,e,null,!0,t||new ClipboardEvent("paste"))}serializeForClipboard(e){return B_e(this,e)}destroy(){this.docView&&(!function(e){e.domObserver.stop();for(let t in e.input.eventHandlers)e.dom.removeEventListener(t,e.input.eventHandlers[t]);clearTimeout(e.input.composingTimeout),clearTimeout(e.input.lastIOSEnterFallbackTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],WSe(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,Zje=null)}get isDestroyed(){return null==this.docView}dispatchEvent(e){return function(e,t){sSe(e,t)||!J_e[t.type]||!e.editable&&t.type in Q_e||J_e[t.type](e,t)}(this,e)}domSelectionRange(){let e=this.domSelection();return e?vNe&&11===this.root.nodeType&&function(e){let t=e.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}(this.dom.ownerDocument)==this.dom&&function(e,t){if(t.getComposedRanges){let n=t.getComposedRanges(e.root)[0];if(n)return ZSe(e,n)}let n;function r(e){e.preventDefault(),e.stopImmediatePropagation(),n=e.getTargetRanges()[0]}return e.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),e.dom.removeEventListener("beforeinput",r,!0),n?ZSe(e,n):null}(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}function aMe(e){let t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",n=>{if("function"==typeof n&&(n=n(e.state)),n)for(let e in n)"class"==e?t.class+=" "+n[e]:"style"==e?t.style=(t.style?t.style+";":"")+n[e]:t[e]||"contenteditable"==e||"nodeName"==e||(t[e]=String(n[e]))}),t.translate||(t.translate="no"),[TSe.node(0,e.state.doc.content.size,t)]}function oMe(e){if(e.markCursor){let t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),e.cursorWrapper={dom:t,deco:TSe.widget(e.state.selection.from,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function lMe(e){return!e.someProp("editable",t=>!1===t(e.state))}function cMe(e){let t=Object.create(null);function n(e){for(let n in e)Object.prototype.hasOwnProperty.call(t,n)||(t[n]=e[n])}return e.someProp("nodeViews",n),e.someProp("markViews",n),t}function dMe(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}iMe.prototype.dispatch=function(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))};for(var uMe={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},hMe={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},pMe="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),mMe="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),fMe=0;fMe<10;fMe++)uMe[48+fMe]=uMe[96+fMe]=String(fMe);for(fMe=1;fMe<=24;fMe++)uMe[fMe+111]="F"+fMe;for(fMe=65;fMe<=90;fMe++)uMe[fMe]=String.fromCharCode(fMe+32),hMe[fMe]=String.fromCharCode(fMe);for(var gMe in uMe)hMe.hasOwnProperty(gMe)||(hMe[gMe]=uMe[gMe]);const xMe="undefined"!=typeof navigator&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),vMe="undefined"!=typeof navigator&&/Win/.test(navigator.platform);function yMe(e){let t,n,r,s,i=e.split(/-(?!$)/),a=i[i.length-1];"Space"==a&&(a=" ");for(let o=0;o<i.length-1;o++){let e=i[o];if(/^(cmd|meta|m)$/i.test(e))s=!0;else if(/^a(lt)?$/i.test(e))t=!0;else if(/^(c|ctrl|control)$/i.test(e))n=!0;else if(/^s(hift)?$/i.test(e))r=!0;else{if(!/^mod$/i.test(e))throw new Error("Unrecognized modifier name: "+e);xMe?s=!0:n=!0}}return t&&(a="Alt-"+a),n&&(a="Ctrl-"+a),s&&(a="Meta-"+a),r&&(a="Shift-"+a),a}function bMe(e,t,n=!0){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),n&&t.shiftKey&&(e="Shift-"+e),e}function wMe(e){let t=function(e){let t=Object.create(null);for(let n in e)t[yMe(n)]=e[n];return t}(e);return function(e,n){let r,s=function(e){var t=!(pMe&&e.metaKey&&e.shiftKey&&!e.ctrlKey&&!e.altKey||mMe&&e.shiftKey&&e.key&&1==e.key.length||"Unidentified"==e.key)&&e.key||(e.shiftKey?hMe:uMe)[e.keyCode]||e.key||"Unidentified";return"Esc"==t&&(t="Escape"),"Del"==t&&(t="Delete"),"Left"==t&&(t="ArrowLeft"),"Up"==t&&(t="ArrowUp"),"Right"==t&&(t="ArrowRight"),"Down"==t&&(t="ArrowDown"),t}(n),i=t[bMe(s,n)];if(i&&i(e.state,e.dispatch,e))return!0;if(1==s.length&&" "!=s){if(n.shiftKey){let r=t[bMe(s,n,!1)];if(r&&r(e.state,e.dispatch,e))return!0}if((n.altKey||n.metaKey||n.ctrlKey)&&!(vMe&&n.ctrlKey&&n.altKey)&&(r=uMe[n.keyCode])&&r!=s){let s=t[bMe(r,n)];if(s&&s(e.state,e.dispatch,e))return!0}}return!1}}function jMe(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("backward",e):n.parentOffset>0)?null:n}function NMe(e,t,n){let r=t.nodeBefore,s=t.pos-1;for(;!r.isTextblock;s--){if(r.type.spec.isolating)return!1;let e=r.lastChild;if(!e)return!1;r=e}let i=t.nodeAfter,a=t.pos+1;for(;!i.isTextblock;a++){if(i.type.spec.isolating)return!1;let e=i.firstChild;if(!e)return!1;i=e}let o=dje(e.doc,s,a,Rbe.empty);if(!o||o.from!=s||o instanceof Kwe&&o.slice.size>=a-s)return!1;if(n){let t=e.tr.step(o);t.setSelection(Aje.create(t.doc,s)),n(t.scrollIntoView())}return!0}function _Me(e,t,n=!1){for(let r=e;r;r="start"==t?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&1!=r.childCount)return!1}return!1}function SMe(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function MMe(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("forward",e):n.parentOffset<n.parent.content.size)?null:n}function CMe(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){let n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}function EMe(e){for(let t=0;t<e.edgeCount;t++){let{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function kMe(e,t,n,r){let s,i,a=t.nodeBefore,o=t.nodeAfter,l=a.type.spec.isolating||o.type.spec.isolating;if(!l&&function(e,t,n){let r=t.nodeBefore,s=t.nodeAfter,i=t.index();return!(!(r&&s&&r.type.compatibleContent(s.type))||(!r.content.size&&t.parent.canReplace(i-1,i)?(n&&n(e.tr.delete(t.pos-r.nodeSize,t.pos).scrollIntoView()),0):!t.parent.canReplace(i,i+1)||!s.isTextblock&&!aje(e.doc,t.pos)||(n&&n(e.tr.join(t.pos).scrollIntoView()),0)))}(e,t,n))return!0;let c=!l&&t.parent.canReplace(t.index(),t.index()+1);if(c&&(s=(i=a.contentMatchAt(a.childCount)).findWrapping(o.type))&&i.matchType(s[0]||o.type).validEnd){if(n){let r=t.pos+o.nodeSize,i=Ebe.empty;for(let e=s.length-1;e>=0;e--)i=Ebe.from(s[e].create(null,i));i=Ebe.from(a.copy(i));let l=e.tr.step(new Ywe(t.pos-1,r,t.pos,r,new Rbe(i,1,0),s.length,!0)),c=l.doc.resolve(r+2*s.length);c.nodeAfter&&c.nodeAfter.type==a.type&&aje(l.doc,c.pos)&&l.join(c.pos),n(l.scrollIntoView())}return!0}let d=o.type.spec.isolating||r>0&&l?null:Mje.findFrom(t,1),u=d&&d.$from.blockRange(d.$to),h=u&&eje(u);if(null!=h&&h>=t.depth)return n&&n(e.tr.lift(u,h).scrollIntoView()),!0;if(c&&_Me(o,"start",!0)&&_Me(a,"end")){let r=a,s=[];for(;s.push(r),!r.isTextblock;)r=r.lastChild;let i=o,l=1;for(;!i.isTextblock;i=i.firstChild)l++;if(r.canReplace(r.childCount,r.childCount,i.content)){if(n){let r=Ebe.empty;for(let e=s.length-1;e>=0;e--)r=Ebe.from(s[e].copy(r));n(e.tr.step(new Ywe(t.pos-s.length,t.pos+o.nodeSize,t.pos+l,t.pos+o.nodeSize-l,new Rbe(r,s.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function AMe(e){return function(t,n){let r=t.selection,s=e<0?r.$from:r.$to,i=s.depth;for(;s.node(i).isInline;){if(!i)return!1;i--}return!!s.node(i).isTextblock&&(n&&n(t.tr.setSelection(Aje.create(t.doc,e<0?s.start(i):s.end(i)))),!0)}}const TMe=AMe(-1),PMe=AMe(1);function OMe(e,t=null){return function(n,r){let s=!1;for(let i=0;i<n.selection.ranges.length&&!s;i++){let{$from:{pos:r},$to:{pos:a}}=n.selection.ranges[i];n.doc.nodesBetween(r,a,(r,i)=>{if(s)return!1;if(r.isTextblock&&!r.hasMarkup(e,t))if(r.type==e)s=!0;else{let t=n.doc.resolve(i),r=t.index();s=t.parent.canReplaceWith(r,r+1,e)}})}if(!s)return!1;if(r){let s=n.tr;for(let r=0;r<n.selection.ranges.length;r++){let{$from:{pos:i},$to:{pos:a}}=n.selection.ranges[r];s.setBlockType(i,a,e,t)}r(s.scrollIntoView())}return!0}}function RMe(e,t=null){return function(n,r){let{$from:s,$to:i}=n.selection,a=s.blockRange(i);if(!a)return!1;let o=r?n.tr:null;return!!function(e,t,n,r=null){let s=!1,i=t,a=t.$from.doc;if(t.depth>=2&&t.$from.node(t.depth-1).type.compatibleContent(n)&&0==t.startIndex){if(0==t.$from.index(t.depth-1))return!1;let e=a.resolve(t.start-2);i=new Ybe(e,e,t.depth),t.endIndex<t.parent.childCount&&(t=new Ybe(t.$from,a.resolve(t.$to.end(t.depth)),t.depth)),s=!0}let o=tje(i,n,r,t);if(!o)return!1;e&&function(e,t,n,r,s){let i=Ebe.empty;for(let d=n.length-1;d>=0;d--)i=Ebe.from(n[d].type.create(n[d].attrs,i));e.step(new Ywe(t.start-(r?2:0),t.end,t.start,t.end,new Rbe(i,0,0),n.length,!0));let a=0;for(let d=0;d<n.length;d++)n[d].type==s&&(a=d+1);let o=n.length-a,l=t.start+n.length-(r?2:0),c=t.parent;for(let d=t.startIndex,u=t.endIndex,h=!0;d<u;d++,h=!1)!h&&ije(e.doc,l,o)&&(e.split(l,o),l+=2*o),l+=c.child(d).nodeSize}(e,t,o,s,n);return!0}(o,a,e,t)&&(r&&r(o.scrollIntoView()),!0)}}function IMe(e){return function(t,n){let{$from:r,$to:s}=t.selection,i=r.blockRange(s,t=>t.childCount>0&&t.firstChild.type==e);return!!i&&(!n||(r.node(i.depth-1).type==e?function(e,t,n,r){let s=e.tr,i=r.end,a=r.$to.end(r.depth);i<a&&(s.step(new Ywe(i-1,a,i,a,new Rbe(Ebe.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new Ybe(s.doc.resolve(r.$from.pos),s.doc.resolve(a),r.depth));const o=eje(r);if(null==o)return!1;s.lift(r,o);let l=s.doc.resolve(s.mapping.map(i,-1)-1);aje(s.doc,l.pos)&&l.nodeBefore.type==l.nodeAfter.type&&s.join(l.pos);return t(s.scrollIntoView()),!0}(t,n,e,i):function(e,t,n){let r=e.tr,s=n.parent;for(let p=n.end,m=n.endIndex-1,f=n.startIndex;m>f;m--)p-=s.child(m).nodeSize,r.delete(p-1,p+1);let i=r.doc.resolve(n.start),a=i.nodeAfter;if(r.mapping.map(n.end)!=n.start+i.nodeAfter.nodeSize)return!1;let o=0==n.startIndex,l=n.endIndex==s.childCount,c=i.node(-1),d=i.index(-1);if(!c.canReplace(d+(o?0:1),d+1,a.content.append(l?Ebe.empty:Ebe.from(s))))return!1;let u=i.pos,h=u+a.nodeSize;return r.step(new Ywe(u-(o?1:0),h+(l?1:0),u+1,h-1,new Rbe((o?Ebe.empty:Ebe.from(s.copy(Ebe.empty))).append(l?Ebe.empty:Ebe.from(s.copy(Ebe.empty))),o?0:1,l?0:1),o?0:1)),t(r.scrollIntoView()),!0}(t,n,i)))}}"undefined"!=typeof navigator?/Mac|iP(hone|[oa]d)/.test(navigator.platform):"undefined"!=typeof os&&os.platform&&os.platform();var DMe=Object.defineProperty,LMe=(e,t)=>{for(var n in t)DMe(e,n,{get:t[n],enumerable:!0})};function FMe(e){const{state:t,transaction:n}=e;let{selection:r}=n,{doc:s}=n,{storedMarks:i}=n;return{...t,apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),plugins:t.plugins,schema:t.schema,reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return i},get selection(){return r},get doc(){return s},get tr(){return r=n.selection,s=n.doc,i=n.storedMarks,n}}}var zMe=class{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:n}=this,{view:r}=t,{tr:s}=n,i=this.buildProps(s);return Object.fromEntries(Object.entries(e).map(([e,t])=>[e,(...e)=>{const n=t(...e)(i);return s.getMeta("preventDispatch")||this.hasCustomState||r.dispatch(s),n}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:n,editor:r,state:s}=this,{view:i}=r,a=[],o=!!e,l=e||s.tr,c={...Object.fromEntries(Object.entries(n).map(([e,n])=>[e,(...e)=>{const r=this.buildProps(l,t),s=n(...e)(r);return a.push(s),c}])),run:()=>(o||!t||l.getMeta("preventDispatch")||this.hasCustomState||i.dispatch(l),a.every(e=>!0===e))};return c}createCan(e){const{rawCommands:t,state:n}=this,r=!1,s=e||n.tr,i=this.buildProps(s,r);return{...Object.fromEntries(Object.entries(t).map(([e,t])=>[e,(...e)=>t(...e)({...i,dispatch:void 0})])),chain:()=>this.createChain(s,r)}}buildProps(e,t=!0){const{rawCommands:n,editor:r,state:s}=this,{view:i}=r,a={tr:e,editor:r,view:i,state:FMe({state:s,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(n).map(([e,t])=>[e,(...e)=>t(...e)(a)]))}};return a}},BMe=class{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const n=this.callbacks[e];return n&&n.forEach(e=>e.apply(this,t)),this}off(e,t){const n=this.callbacks[e];return n&&(t?this.callbacks[e]=n.filter(e=>e!==t):delete this.callbacks[e]),this}once(e,t){const n=(...r)=>{this.off(e,n),t.apply(this,r)};return this.on(e,n)}removeAllListeners(){this.callbacks={}}};function UMe(e,t){const n=new _je(e);return t.forEach(e=>{e.steps.forEach(e=>{n.step(e)})}),n}var VMe=e=>{const t=e.childNodes;for(let n=t.length-1;n>=0;n-=1){const r=t[n];3===r.nodeType&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?e.removeChild(r):1===r.nodeType&&VMe(r)}return e};function HMe(e){if("undefined"==typeof window)throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const t=`<body>${e}</body>`,n=(new window.DOMParser).parseFromString(t,"text/html").body;return VMe(n)}function WMe(e,t,n){if(e instanceof Jbe||e instanceof Ebe)return e;n={slice:!0,parseOptions:{},...n};const r="string"==typeof e;if("object"==typeof e&&null!==e)try{if(Array.isArray(e)&&e.length>0)return Ebe.fromArray(e.map(e=>t.nodeFromJSON(e)));const r=t.nodeFromJSON(e);return n.errorOnInvalidContent&&r.check(),r}catch(s){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return WMe("",t,n)}if(r){if(n.errorOnInvalidContent){let r=!1,s="";const i=new xwe({topNode:t.spec.topNode,marks:t.spec.marks,nodes:t.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:e=>(r=!0,s="string"==typeof e?e:e.outerHTML,null)}]}})});if(n.slice?ywe.fromSchema(i).parseSlice(HMe(e),n.parseOptions):ywe.fromSchema(i).parse(HMe(e),n.parseOptions),n.errorOnInvalidContent&&r)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${s}`)})}const r=ywe.fromSchema(t);return n.slice?r.parseSlice(HMe(e),n.parseOptions).content:r.parse(HMe(e),n.parseOptions)}return WMe("",t,n)}function $Me(e,t,n={},r={}){return WMe(e,t,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}function GMe(e,t){const n=[];return e.descendants((e,r)=>{t(e)&&n.push({node:e,pos:r})}),n}function qMe(e){return t=>function(e,t){for(let n=e.depth;n>0;n-=1){const r=e.node(n);if(t(r))return{pos:n>0?e.before(n):0,start:e.start(n),depth:n,node:r}}}(t.$from,e)}function XMe(e,t,n){if(void 0===e.config[t]&&e.parent)return XMe(e.parent,t,n);if("function"==typeof e.config[t]){return e.config[t].bind({...n,parent:e.parent?XMe(e.parent,t,n):null})}return e.config[t]}function KMe(e){return e.map(e=>{const t=XMe(e,"addExtensions",{name:e.name,options:e.options,storage:e.storage});return t?[e,...KMe(t())]:e}).flat(10)}function YMe(e,t){const n=kwe.fromSchema(t).serializeFragment(e),r=document.implementation.createHTMLDocument().createElement("div");return r.appendChild(n),r.innerHTML}function ZMe(e){return"function"==typeof e}function JMe(e,t=void 0,...n){return ZMe(e)?t?e.bind(t)(...n):e(...n):e}function QMe(e){return{baseExtensions:e.filter(e=>"extension"===e.type),nodeExtensions:e.filter(e=>"node"===e.type),markExtensions:e.filter(e=>"mark"===e.type)}}function eCe(e){const t=[],{nodeExtensions:n,markExtensions:r}=QMe(e),s=[...n,...r],i={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return e.forEach(e=>{const n=XMe(e,"addGlobalAttributes",{name:e.name,options:e.options,storage:e.storage,extensions:s});if(!n)return;n().forEach(e=>{e.types.forEach(n=>{Object.entries(e.attributes).forEach(([e,r])=>{t.push({type:n,name:e,attribute:{...i,...r}})})})})}),s.forEach(e=>{const n={name:e.name,options:e.options,storage:e.storage},r=XMe(e,"addAttributes",n);if(!r)return;const s=r();Object.entries(s).forEach(([n,r])=>{const s={...i,...r};"function"==typeof(null==s?void 0:s.default)&&(s.default=s.default()),(null==s?void 0:s.isRequired)&&void 0===(null==s?void 0:s.default)&&delete s.default,t.push({type:e.name,name:n,attribute:s})})}),t}function tCe(...e){return e.filter(e=>!!e).reduce((e,t)=>{const n={...e};return Object.entries(t).forEach(([e,t])=>{if(n[e])if("class"===e){const r=t?String(t).split(" "):[],s=n[e]?n[e].split(" "):[],i=r.filter(e=>!s.includes(e));n[e]=[...s,...i].join(" ")}else if("style"===e){const r=t?t.split(";").map(e=>e.trim()).filter(Boolean):[],s=n[e]?n[e].split(";").map(e=>e.trim()).filter(Boolean):[],i=new Map;s.forEach(e=>{const[t,n]=e.split(":").map(e=>e.trim());i.set(t,n)}),r.forEach(e=>{const[t,n]=e.split(":").map(e=>e.trim());i.set(t,n)}),n[e]=Array.from(i.entries()).map(([e,t])=>`${e}: ${t}`).join("; ")}else n[e]=t;else n[e]=t}),n},{})}function nCe(e,t){return t.filter(t=>t.type===e.type.name).filter(e=>e.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(e.attrs)||{}:{[t.name]:e.attrs[t.name]}).reduce((e,t)=>tCe(e,t),{})}function rCe(e,t){return"style"in e?e:{...e,getAttrs:n=>{const r=e.getAttrs?e.getAttrs(n):e.attrs;if(!1===r)return!1;const s=t.reduce((e,t)=>{const r=t.attribute.parseHTML?t.attribute.parseHTML(n):function(e){return"string"!=typeof e?e:e.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(e):"true"===e||"false"!==e&&e}(n.getAttribute(t.name));return null==r?e:{...e,[t.name]:r}},{});return{...r,...s}}}}function sCe(e){return Object.fromEntries(Object.entries(e).filter(([e,t])=>("attrs"!==e||!function(e={}){return 0===Object.keys(e).length&&e.constructor===Object}(t))&&null!=t))}function iCe(e){return e.sort((e,t)=>{const n=XMe(e,"priority")||100,r=XMe(t,"priority")||100;return n>r?-1:n<r?1:0})}function aCe(e){const t=iCe(KMe(e));return function(e){const t=e.filter((t,n)=>e.indexOf(t)!==n);return Array.from(new Set(t))}(t.map(e=>e.name)).length,t}function oCe(e,t,n){const{from:r,to:s}=t,{blockSeparator:i="\n\n",textSerializers:a={}}=n||{};let o="";return e.nodesBetween(r,s,(e,n,l,c)=>{var d;e.isBlock&&n>r&&(o+=i);const u=null==a?void 0:a[e.type.name];if(u)return l&&(o+=u({node:e,pos:n,parent:l,index:c,range:t})),!1;e.isText&&(o+=null==(d=null==e?void 0:e.text)?void 0:d.slice(Math.max(r,n)-n,s-n))}),o}function lCe(e){return Object.fromEntries(Object.entries(e.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}function cCe(e,t){if("string"==typeof e){if(!t.marks[e])throw Error(`There is no mark type named '${e}'. Maybe you forgot to add the extension?`);return t.marks[e]}return e}function dCe(e,t){const n=cCe(t,e.schema),{from:r,to:s,empty:i}=e.selection,a=[];i?(e.storedMarks&&a.push(...e.storedMarks),a.push(...e.selection.$head.marks())):e.doc.nodesBetween(r,s,e=>{a.push(...e.marks)});const o=a.find(e=>e.type.name===n.name);return o?{...o.attrs}:{}}function uCe(e,t){if("string"==typeof e){if(!t.nodes[e])throw Error(`There is no node type named '${e}'. Maybe you forgot to add the extension?`);return t.nodes[e]}return e}function hCe(e,t){return t.nodes[e]?"node":t.marks[e]?"mark":null}function pCe(e,t){const n=hCe("string"==typeof t?t:t.name,e.schema);return"node"===n?function(e,t){const n=uCe(t,e.schema),{from:r,to:s}=e.selection,i=[];e.doc.nodesBetween(r,s,e=>{i.push(e)});const a=i.reverse().find(e=>e.type.name===n.name);return a?{...a.attrs}:{}}(e,t):"mark"===n?dCe(e,t):{}}function mCe(e){const t=function(e,t=JSON.stringify){const n={};return e.filter(e=>{const r=t(e);return!Object.prototype.hasOwnProperty.call(n,r)&&(n[r]=!0)})}(e);return 1===t.length?t:t.filter((e,n)=>{const r=t.filter((e,t)=>t!==n);return!r.some(t=>e.oldRange.from>=t.oldRange.from&&e.oldRange.to<=t.oldRange.to&&e.newRange.from>=t.newRange.from&&e.newRange.to<=t.newRange.to)})}function fCe(e){const{mapping:t,steps:n}=e,r=[];return t.maps.forEach((e,s)=>{const i=[];if(e.ranges.length)e.forEach((e,t)=>{i.push({from:e,to:t})});else{const{from:e,to:t}=n[s];if(void 0===e||void 0===t)return;i.push({from:e,to:t})}i.forEach(({from:e,to:n})=>{const i=t.slice(s).map(e,-1),a=t.slice(s).map(n),o=t.invert().map(i,-1),l=t.invert().map(a);r.push({oldRange:{from:o,to:l},newRange:{from:i,to:a}})})}),mCe(r)}function gCe(e){return"[object RegExp]"===Object.prototype.toString.call(e)}function xCe(e,t,n={strict:!0}){const r=Object.keys(t);return!r.length||r.every(r=>n.strict?t[r]===e[r]:gCe(t[r])?t[r].test(e[r]):t[r]===e[r])}function vCe(e,t,n={}){return e.find(e=>e.type===t&&xCe(Object.fromEntries(Object.keys(n).map(t=>[t,e.attrs[t]])),n))}function yCe(e,t,n={}){return!!vCe(e,t,n)}function bCe(e,t,n){var r;if(!e||!t)return;let s=e.parent.childAfter(e.parentOffset);if(s.node&&s.node.marks.some(e=>e.type===t)||(s=e.parent.childBefore(e.parentOffset)),!s.node||!s.node.marks.some(e=>e.type===t))return;n=n||(null==(r=s.node.marks[0])?void 0:r.attrs);if(!vCe([...s.node.marks],t,n))return;let i=s.index,a=e.start()+s.offset,o=i+1,l=a+s.node.nodeSize;for(;i>0&&yCe([...e.parent.child(i-1).marks],t,n);)i-=1,a-=e.parent.child(i).nodeSize;for(;o<e.parent.childCount&&yCe([...e.parent.child(o).marks],t,n);)l+=e.parent.child(o).nodeSize,o+=1;return{from:a,to:l}}function wCe(e,t,n){const r=[];return e===t?n.resolve(e).marks().forEach(t=>{const s=bCe(n.resolve(e),t.type);s&&r.push({mark:t,...s})}):n.nodesBetween(e,t,(e,t)=>{e&&void 0!==(null==e?void 0:e.nodeSize)&&r.push(...e.marks.map(n=>({from:t,to:t+e.nodeSize,mark:n})))}),r}function jCe(e,t){return t.nodes[e]||t.marks[e]||null}function NCe(e,t,n){return Object.fromEntries(Object.entries(n).filter(([n])=>{const r=e.find(e=>e.type===t&&e.name===n);return!!r&&r.attribute.keepOnSplit}))}function _Ce(e,t,n={}){const{empty:r,ranges:s}=e.selection,i=t?cCe(t,e.schema):null;if(r)return!!(e.storedMarks||e.selection.$from.marks()).filter(e=>!i||i.name===e.type.name).find(e=>xCe(e.attrs,n,{strict:!1}));let a=0;const o=[];if(s.forEach(({$from:t,$to:n})=>{const r=t.pos,s=n.pos;e.doc.nodesBetween(r,s,(e,t)=>{if(!e.isText&&!e.marks.length)return;const n=Math.max(r,t),i=Math.min(s,t+e.nodeSize);a+=i-n,o.push(...e.marks.map(e=>({mark:e,from:n,to:i})))})}),0===a)return!1;const l=o.filter(e=>!i||i.name===e.mark.type.name).filter(e=>xCe(e.mark.attrs,n,{strict:!1})).reduce((e,t)=>e+t.to-t.from,0),c=o.filter(e=>!i||e.mark.type!==i&&e.mark.type.excludes(i)).reduce((e,t)=>e+t.to-t.from,0);return(l>0?l+c:l)>=a}function SCe(e,t,n={}){const{from:r,to:s,empty:i}=e.selection,a=t?uCe(t,e.schema):null,o=[];e.doc.nodesBetween(r,s,(e,t)=>{if(e.isText)return;const n=Math.max(r,t),i=Math.min(s,t+e.nodeSize);o.push({node:e,from:n,to:i})});const l=s-r,c=o.filter(e=>!a||a.name===e.node.type.name).filter(e=>xCe(e.node.attrs,n,{strict:!1}));if(i)return!!c.length;return c.reduce((e,t)=>e+t.to-t.from,0)>=l}function MCe(e,t){return Array.isArray(t)?t.some(t=>("string"==typeof t?t:t.name)===e.name):t}function CCe(e,t){const{nodeExtensions:n}=QMe(t),r=n.find(t=>t.name===e);if(!r)return!1;const s=JMe(XMe(r,"group",{name:r.name,options:r.options,storage:r.storage}));return"string"==typeof s&&s.split(" ").includes("list")}function ECe(e,{checkChildren:t=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if("hardBreak"===e.type.name)return!0;if(e.isText)return/^\s*$/m.test(null!=(r=e.text)?r:"")}if(e.isText)return!e.text;if(e.isAtom||e.isLeaf)return!1;if(0===e.content.childCount)return!0;if(t){let r=!0;return e.content.forEach(e=>{!1!==r&&(ECe(e,{ignoreWhitespace:n,checkChildren:t})||(r=!1))}),r}return!1}function kCe(e){return e instanceof Pje}function ACe(e){return e instanceof Aje}function TCe(e=0,t=0,n=0){return Math.min(Math.max(e,t),n)}function PCe(e,t=null){if(!t)return null;const n=Mje.atStart(e),r=Mje.atEnd(e);if("start"===t||!0===t)return n;if("end"===t)return r;const s=n.from,i=r.to;return"all"===t?Aje.create(e,TCe(0,s,i),TCe(e.content.size,s,i)):Aje.create(e,TCe(t,s,i),TCe(t,s,i))}var OCe=class{constructor(e){var t;this.find=e.find,this.handler=e.handler,this.undoable=null==(t=e.undoable)||t}};function RCe(e){var t;const{editor:n,from:r,to:s,text:i,rules:a,plugin:o}=e,{view:l}=n;if(l.composing)return!1;const c=l.state.doc.resolve(r);if(c.parent.type.spec.code||(null==(t=c.nodeBefore||c.nodeAfter)?void 0:t.marks.find(e=>e.type.spec.code)))return!1;let d=!1;const u=((e,t=500)=>{let n="";const r=e.parentOffset;return e.parent.nodesBetween(Math.max(0,r-t),r,(e,t,s,i)=>{var a,o;const l=(null==(o=(a=e.type.spec).toText)?void 0:o.call(a,{node:e,pos:t,parent:s,index:i}))||e.textContent||"%leaf%";n+=e.isAtom&&!e.isText?l:l.slice(0,Math.max(0,r-t))}),n})(c)+i;return a.forEach(e=>{if(d)return;const t=((e,t)=>{if(gCe(t))return t.exec(e);const n=t(e);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=e,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith),r.push(n.replaceWith)),r})(u,e.find);if(!t)return;const a=l.state.tr,c=FMe({state:l.state,transaction:a}),h={from:r-(t[0].length-i.length),to:s},{commands:p,chain:m,can:f}=new zMe({editor:n,state:c});null!==e.handler({state:c,range:h,match:t,commands:p,chain:m,can:f})&&a.steps.length&&(e.undoable&&a.setMeta(o,{transform:a,from:r,to:s,text:i}),l.dispatch(a),d=!0)}),d}function ICe(e){return"Object"===function(e){return Object.prototype.toString.call(e).slice(8,-1)}(e)&&(e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype)}function DCe(e,t){const n={...e};return ICe(e)&&ICe(t)&&Object.keys(t).forEach(r=>{ICe(t[r])&&ICe(e[r])?n[r]=DCe(e[r],t[r]):n[r]=t[r]}),n}var LCe=class{constructor(e={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...e},this.name=this.config.name}get options(){return{...JMe(XMe(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...JMe(XMe(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(e={}){const t=this.extend({...this.config,addOptions:()=>DCe(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new this.constructor({...this.config,...e});return t.parent=this,this.child=t,t.name="name"in e?e.name:t.parent.name,t}},FCe=class e extends LCe{constructor(){super(...arguments),this.type="mark"}static create(t={}){const n="function"==typeof t?t():t;return new e(n)}static handleExit({editor:e,mark:t}){const{tr:n}=e.state,r=e.state.selection.$from;if(r.pos===r.end()){const s=r.marks();if(!!!s.find(e=>(null==e?void 0:e.type.name)===t.name))return!1;const i=s.find(e=>(null==e?void 0:e.type.name)===t.name);return i&&n.removeStoredMark(i),n.insertText(" ",r.pos),e.view.dispatch(n),!0}return!1}configure(e){return super.configure(e)}extend(e){const t="function"==typeof e?e():e;return super.extend(t)}};var zCe=class{constructor(e){this.find=e.find,this.handler=e.handler}};function BCe(e){const{editor:t,state:n,from:r,to:s,rule:i,pasteEvent:a,dropEvent:o}=e,{commands:l,chain:c,can:d}=new zMe({editor:t,state:n}),u=[];n.doc.nodesBetween(r,s,(e,t)=>{var h,p,m,f,g;if((null==(p=null==(h=e.type)?void 0:h.spec)?void 0:p.code)||!(e.isText||e.isTextblock||e.isInline))return;const x=null!=(g=null!=(f=null==(m=e.content)?void 0:m.size)?f:e.nodeSize)?g:0,v=Math.max(r,t),y=Math.min(s,t+x);if(v>=y)return;((e,t,n)=>{if(gCe(t))return[...e.matchAll(t)];const r=t(e,n);return r?r.map(t=>{const n=[t.text];return n.index=t.index,n.input=e,n.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith),n.push(t.replaceWith)),n}):[]})(e.isText?e.text||"":e.textBetween(v-t,y-t,void 0,""),i.find,a).forEach(e=>{if(void 0===e.index)return;const t=v+e.index+1,r=t+e[0].length,s={from:n.tr.mapping.map(t),to:n.tr.mapping.map(r)},h=i.handler({state:n,range:s,match:e,commands:l,chain:c,can:d,pasteEvent:a,dropEvent:o});u.push(h)})});return u.every(e=>null!==e)}var UCe=null;function VCe(e){const{editor:t,rules:n}=e;let r,s=null,i=!1,a=!1,o="undefined"!=typeof ClipboardEvent?new ClipboardEvent("paste"):null;try{r="undefined"!=typeof DragEvent?new DragEvent("drop"):null}catch{r=null}const l=({state:e,from:n,to:s,rule:i,pasteEvt:a})=>{const l=e.tr,c=FMe({state:e,transaction:l});if(BCe({editor:t,state:c,from:Math.max(n-1,0),to:s.b-1,rule:i,pasteEvent:a,dropEvent:r})&&l.steps.length){try{r="undefined"!=typeof DragEvent?new DragEvent("drop"):null}catch{r=null}return o="undefined"!=typeof ClipboardEvent?new ClipboardEvent("paste"):null,l}};return n.map(e=>new $je({view(e){const n=n=>{var r;s=(null==(r=e.dom.parentElement)?void 0:r.contains(n.target))?e.dom.parentElement:null,s&&(UCe=t)},r=()=>{UCe&&(UCe=null)};return window.addEventListener("dragstart",n),window.addEventListener("dragend",r),{destroy(){window.removeEventListener("dragstart",n),window.removeEventListener("dragend",r)}}},props:{handleDOMEvents:{drop:(e,t)=>{if(a=s===e.dom.parentElement,r=t,!a){const e=UCe;(null==e?void 0:e.isEditable)&&setTimeout(()=>{const t=e.state.selection;t&&e.commands.deleteRange({from:t.from,to:t.to})},10)}return!1},paste:(e,t)=>{var n;const r=null==(n=t.clipboardData)?void 0:n.getData("text/html");return o=t,i=!!(null==r?void 0:r.includes("data-pm-slice")),!1}}},appendTransaction:(t,n,r)=>{const s=t[0],c="paste"===s.getMeta("uiEvent")&&!i,d="drop"===s.getMeta("uiEvent")&&!a,u=s.getMeta("applyPasteRules"),h=!!u;if(!c&&!d&&!h)return;if(h){let{text:t}=u;"string"==typeof t||(t=YMe(Ebe.from(t),r.schema));const{from:n}=u,s=n+t.length,i=(e=>{var t;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return null==(t=n.clipboardData)||t.setData("text/html",e),n})(t);return l({rule:e,state:r,from:n,to:{b:s},pasteEvt:i})}const p=n.doc.content.findDiffStart(r.doc.content),m=n.doc.content.findDiffEnd(r.doc.content);return"number"==typeof p&&m&&p!==m.b?l({rule:e,state:r,from:p,to:m,pasteEvt:o}):void 0}}))}var HCe=class{constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=aCe(e),this.schema=function(e,t){var n;const r=eCe(e),{nodeExtensions:s,markExtensions:i}=QMe(e),a=null==(n=s.find(e=>XMe(e,"topNode")))?void 0:n.name,o=Object.fromEntries(s.map(n=>{const s=r.filter(e=>e.type===n.name),i={name:n.name,options:n.options,storage:n.storage,editor:t},a=sCe({...e.reduce((e,t)=>{const r=XMe(t,"extendNodeSchema",i);return{...e,...r?r(n):{}}},{}),content:JMe(XMe(n,"content",i)),marks:JMe(XMe(n,"marks",i)),group:JMe(XMe(n,"group",i)),inline:JMe(XMe(n,"inline",i)),atom:JMe(XMe(n,"atom",i)),selectable:JMe(XMe(n,"selectable",i)),draggable:JMe(XMe(n,"draggable",i)),code:JMe(XMe(n,"code",i)),whitespace:JMe(XMe(n,"whitespace",i)),linebreakReplacement:JMe(XMe(n,"linebreakReplacement",i)),defining:JMe(XMe(n,"defining",i)),isolating:JMe(XMe(n,"isolating",i)),attrs:Object.fromEntries(s.map(e=>{var t,n;return[e.name,{default:null==(t=null==e?void 0:e.attribute)?void 0:t.default,validate:null==(n=null==e?void 0:e.attribute)?void 0:n.validate}]}))}),o=JMe(XMe(n,"parseHTML",i));o&&(a.parseDOM=o.map(e=>rCe(e,s)));const l=XMe(n,"renderHTML",i);l&&(a.toDOM=e=>l({node:e,HTMLAttributes:nCe(e,s)}));const c=XMe(n,"renderText",i);return c&&(a.toText=c),[n.name,a]})),l=Object.fromEntries(i.map(n=>{const s=r.filter(e=>e.type===n.name),i={name:n.name,options:n.options,storage:n.storage,editor:t},a=sCe({...e.reduce((e,t)=>{const r=XMe(t,"extendMarkSchema",i);return{...e,...r?r(n):{}}},{}),inclusive:JMe(XMe(n,"inclusive",i)),excludes:JMe(XMe(n,"excludes",i)),group:JMe(XMe(n,"group",i)),spanning:JMe(XMe(n,"spanning",i)),code:JMe(XMe(n,"code",i)),attrs:Object.fromEntries(s.map(e=>{var t,n;return[e.name,{default:null==(t=null==e?void 0:e.attribute)?void 0:t.default,validate:null==(n=null==e?void 0:e.attribute)?void 0:n.validate}]}))}),o=JMe(XMe(n,"parseHTML",i));o&&(a.parseDOM=o.map(e=>rCe(e,s)));const l=XMe(n,"renderHTML",i);return l&&(a.toDOM=e=>l({mark:e,HTMLAttributes:nCe(e,s)})),[n.name,a]}));return new xwe({topNode:a,nodes:o,marks:l})}(this.extensions,t),this.setupExtensions()}get commands(){return this.extensions.reduce((e,t)=>{const n=XMe(t,"addCommands",{name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:this.editor,type:jCe(t.name,this.schema)});return n?{...e,...n()}:e},{})}get plugins(){const{editor:e}=this;return iCe([...this.extensions].reverse()).flatMap(t=>{const n={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:e,type:jCe(t.name,this.schema)},r=[],s=XMe(t,"addKeyboardShortcuts",n);let i={};if("mark"===t.type&&XMe(t,"exitable",n)&&(i.ArrowRight=()=>FCe.handleExit({editor:e,mark:t})),s){const t=Object.fromEntries(Object.entries(s()).map(([t,n])=>[t,()=>n({editor:e})]));i={...i,...t}}const a=new $je({props:{handleKeyDown:wMe(i)}});r.push(a);const o=XMe(t,"addInputRules",n);if(MCe(t,e.options.enableInputRules)&&o){const t=o();if(t&&t.length){const n=function(e){const{editor:t,rules:n}=e,r=new $je({state:{init:()=>null,apply(e,s,i){const a=e.getMeta(r);if(a)return a;const o=e.getMeta("applyInputRules");return!!o&&setTimeout(()=>{let{text:e}=o;"string"==typeof e||(e=YMe(Ebe.from(e),i.schema));const{from:s}=o,a=s+e.length;RCe({editor:t,from:s,to:a,text:e,rules:n,plugin:r})}),e.selectionSet||e.docChanged?null:s}},props:{handleTextInput:(e,s,i,a)=>RCe({editor:t,from:s,to:i,text:a,rules:n,plugin:r}),handleDOMEvents:{compositionend:e=>(setTimeout(()=>{const{$cursor:s}=e.state.selection;s&&RCe({editor:t,from:s.pos,to:s.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(e,s){if("Enter"!==s.key)return!1;const{$cursor:i}=e.state.selection;return!!i&&RCe({editor:t,from:i.pos,to:i.pos,text:"\n",rules:n,plugin:r})}},isInputRules:!0});return r}({editor:e,rules:t}),s=Array.isArray(n)?n:[n];r.push(...s)}}const l=XMe(t,"addPasteRules",n);if(MCe(t,e.options.enablePasteRules)&&l){const t=l();if(t&&t.length){const n=VCe({editor:e,rules:t});r.push(...n)}}const c=XMe(t,"addProseMirrorPlugins",n);if(c){const e=c();r.push(...e)}return r})}get attributes(){return eCe(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=QMe(this.extensions);return Object.fromEntries(t.filter(e=>!!XMe(e,"addNodeView")).map(t=>{const n=this.attributes.filter(e=>e.type===t.name),r={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:e,type:uCe(t.name,this.schema)},s=XMe(t,"addNodeView",r);if(!s)return[];return[t.name,(r,i,a,o,l)=>{const c=nCe(r,n);return s()({node:r,view:i,getPos:a,decorations:o,innerDecorations:l,editor:e,extension:t,HTMLAttributes:c})}]}))}get markViews(){const{editor:e}=this,{markExtensions:t}=QMe(this.extensions);return Object.fromEntries(t.filter(e=>!!XMe(e,"addMarkView")).map(t=>{const n=this.attributes.filter(e=>e.type===t.name),r={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:e,type:cCe(t.name,this.schema)},s=XMe(t,"addMarkView",r);if(!s)return[];return[t.name,(r,i,a)=>{const o=nCe(r,n);return s()({mark:r,view:i,inline:a,editor:e,extension:t,HTMLAttributes:o,updateAttributes:t=>{!function(e,t,n={}){const{state:r}=t,{doc:s,tr:i}=r,a=e;s.descendants((t,r)=>{const s=i.mapping.map(r),o=i.mapping.map(r)+t.nodeSize;let l=null;if(t.marks.forEach(e=>{if(e!==a)return!1;l=e}),!l)return;let c=!1;if(Object.keys(n).forEach(e=>{n[e]!==l.attrs[e]&&(c=!0)}),c){const t=e.type.create({...e.attrs,...n});i.removeMark(s,o,e.type),i.addMark(s,o,t)}}),i.docChanged&&t.view.dispatch(i)}(r,e,t)}})}]}))}setupExtensions(){const e=this.extensions;this.editor.extensionStorage=Object.fromEntries(e.map(e=>[e.name,e.storage])),e.forEach(e=>{var t;const n={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:jCe(e.name,this.schema)};if("mark"===e.type){(null==(t=JMe(XMe(e,"keepOnSplit",n)))||t)&&this.splittableMarks.push(e.name)}const r=XMe(e,"onBeforeCreate",n),s=XMe(e,"onCreate",n),i=XMe(e,"onUpdate",n),a=XMe(e,"onSelectionUpdate",n),o=XMe(e,"onTransaction",n),l=XMe(e,"onFocus",n),c=XMe(e,"onBlur",n),d=XMe(e,"onDestroy",n);r&&this.editor.on("beforeCreate",r),s&&this.editor.on("create",s),i&&this.editor.on("update",i),a&&this.editor.on("selectionUpdate",a),o&&this.editor.on("transaction",o),l&&this.editor.on("focus",l),c&&this.editor.on("blur",c),d&&this.editor.on("destroy",d)})}};HCe.resolve=aCe,HCe.sort=iCe,HCe.flatten=KMe;LMe({},{ClipboardTextSerializer:()=>$Ce,Commands:()=>rke,Delete:()=>ske,Drop:()=>ike,Editable:()=>ake,FocusEvents:()=>lke,Keymap:()=>cke,Paste:()=>dke,Tabindex:()=>uke,focusEventsPluginKey:()=>oke});var WCe=class e extends LCe{constructor(){super(...arguments),this.type="extension"}static create(t={}){const n="function"==typeof t?t():t;return new e(n)}configure(e){return super.configure(e)}extend(e){const t="function"==typeof e?e():e;return super.extend(t)}},$Ce=WCe.create({name:"clipboardTextSerializer",addOptions:()=>({blockSeparator:void 0}),addProseMirrorPlugins(){return[new $je({key:new Xje("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:e}=this,{state:t,schema:n}=e,{doc:r,selection:s}=t,{ranges:i}=s,a=Math.min(...i.map(e=>e.$from.pos)),o=Math.max(...i.map(e=>e.$to.pos)),l=lCe(n);return oCe(r,{from:a,to:o},{...void 0!==this.options.blockSeparator?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),GCe={};LMe(GCe,{blur:()=>qCe,clearContent:()=>XCe,clearNodes:()=>KCe,command:()=>YCe,createParagraphNear:()=>ZCe,cut:()=>JCe,deleteCurrentNode:()=>QCe,deleteNode:()=>eEe,deleteRange:()=>tEe,deleteSelection:()=>nEe,enter:()=>rEe,exitCode:()=>sEe,extendMarkRange:()=>iEe,first:()=>aEe,focus:()=>lEe,forEach:()=>cEe,insertContent:()=>dEe,insertContentAt:()=>uEe,joinBackward:()=>mEe,joinDown:()=>pEe,joinForward:()=>fEe,joinItemBackward:()=>gEe,joinItemForward:()=>xEe,joinTextblockBackward:()=>vEe,joinTextblockForward:()=>yEe,joinUp:()=>hEe,keyboardShortcut:()=>wEe,lift:()=>jEe,liftEmptyBlock:()=>NEe,liftListItem:()=>_Ee,newlineInCode:()=>SEe,resetAttributes:()=>CEe,scrollIntoView:()=>EEe,selectAll:()=>kEe,selectNodeBackward:()=>AEe,selectNodeForward:()=>TEe,selectParentNode:()=>PEe,selectTextblockEnd:()=>OEe,selectTextblockStart:()=>REe,setContent:()=>IEe,setMark:()=>DEe,setMeta:()=>LEe,setNode:()=>FEe,setNodeSelection:()=>zEe,setTextSelection:()=>BEe,sinkListItem:()=>UEe,splitBlock:()=>HEe,splitListItem:()=>WEe,toggleList:()=>qEe,toggleMark:()=>XEe,toggleNode:()=>KEe,toggleWrap:()=>YEe,undoInputRule:()=>ZEe,unsetAllMarks:()=>JEe,unsetMark:()=>QEe,updateAttributes:()=>eke,wrapIn:()=>tke,wrapInList:()=>nke});var qCe=()=>({editor:e,view:t})=>(requestAnimationFrame(()=>{var n;e.isDestroyed||(t.dom.blur(),null==(n=null==window?void 0:window.getSelection())||n.removeAllRanges())}),!0),XCe=(e=!0)=>({commands:t})=>t.setContent("",{emitUpdate:e}),KCe=()=>({state:e,tr:t,dispatch:n})=>{const{selection:r}=t,{ranges:s}=r;return!n||(s.forEach(({$from:n,$to:r})=>{e.doc.nodesBetween(n.pos,r.pos,(e,n)=>{if(e.type.isText)return;const{doc:r,mapping:s}=t,i=r.resolve(s.map(n)),a=r.resolve(s.map(n+e.nodeSize)),o=i.blockRange(a);if(!o)return;const l=eje(o);if(e.type.isTextblock){const{defaultType:e}=i.parent.contentMatchAt(i.index());t.setNodeMarkup(o.start,e)}(l||0===l)&&t.lift(o,l)})}),!0)},YCe=e=>t=>e(t),ZCe=()=>({state:e,dispatch:t})=>((e,t)=>{let n=e.selection,{$from:r,$to:s}=n;if(n instanceof Rje||r.parent.inlineContent||s.parent.inlineContent)return!1;let i=EMe(s.parent.contentMatchAt(s.indexAfter()));if(!i||!i.isTextblock)return!1;if(t){let n=(!r.parentOffset&&s.index()<s.parent.childCount?r:s).pos,a=e.tr.insert(n,i.createAndFill());a.setSelection(Aje.create(a.doc,n+1)),t(a.scrollIntoView())}return!0})(e,t),JCe=(e,t)=>({editor:n,tr:r})=>{const{state:s}=n,i=s.doc.slice(e.from,e.to);r.deleteRange(e.from,e.to);const a=r.mapping.map(t);return r.insert(a,i.content),r.setSelection(new Aje(r.doc.resolve(Math.max(a-1,0)))),!0},QCe=()=>({tr:e,dispatch:t})=>{const{selection:n}=e,r=n.$anchor.node();if(r.content.size>0)return!1;const s=e.selection.$anchor;for(let i=s.depth;i>0;i-=1){if(s.node(i).type===r.type){if(t){const t=s.before(i),n=s.after(i);e.delete(t,n).scrollIntoView()}return!0}}return!1},eEe=e=>({tr:t,state:n,dispatch:r})=>{const s=uCe(e,n.schema),i=t.selection.$anchor;for(let e=i.depth;e>0;e-=1){if(i.node(e).type===s){if(r){const n=i.before(e),r=i.after(e);t.delete(n,r).scrollIntoView()}return!0}}return!1},tEe=e=>({tr:t,dispatch:n})=>{const{from:r,to:s}=e;return n&&t.delete(r,s),!0},nEe=()=>({state:e,dispatch:t})=>((e,t)=>!e.selection.empty&&(t&&t(e.tr.deleteSelection().scrollIntoView()),!0))(e,t),rEe=()=>({commands:e})=>e.keyboardShortcut("Enter"),sEe=()=>({state:e,dispatch:t})=>((e,t)=>{let{$head:n,$anchor:r}=e.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let s=n.node(-1),i=n.indexAfter(-1),a=EMe(s.contentMatchAt(i));if(!a||!s.canReplaceWith(i,i,a))return!1;if(t){let r=n.after(),s=e.tr.replaceWith(r,r,a.createAndFill());s.setSelection(Mje.near(s.doc.resolve(r),1)),t(s.scrollIntoView())}return!0})(e,t),iEe=(e,t={})=>({tr:n,state:r,dispatch:s})=>{const i=cCe(e,r.schema),{doc:a,selection:o}=n,{$from:l,from:c,to:d}=o;if(s){const e=bCe(l,i,t);if(e&&e.from<=c&&e.to>=d){const t=Aje.create(a,e.from,e.to);n.setSelection(t)}}return!0},aEe=e=>t=>{const n="function"==typeof e?e(t):e;for(let e=0;e<n.length;e+=1)if(n[e](t))return!0;return!1};function oEe(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var lEe=(e=null,t={})=>({editor:n,view:r,tr:s,dispatch:i})=>{t={scrollIntoView:!0,...t};const a=()=>{(oEe()||"Android"===navigator.platform||/android/i.test(navigator.userAgent))&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),(null==t?void 0:t.scrollIntoView)&&n.commands.scrollIntoView())})};if(r.hasFocus()&&null===e||!1===e)return!0;if(i&&null===e&&!ACe(n.state.selection))return a(),!0;const o=PCe(s.doc,e)||n.state.selection,l=n.state.selection.eq(o);return i&&(l||s.setSelection(o),l&&s.storedMarks&&s.setStoredMarks(s.storedMarks),a()),!0},cEe=(e,t)=>n=>e.every((e,r)=>t(e,{...n,index:r})),dEe=(e,t)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},e,t),uEe=(e,t,n)=>({tr:r,dispatch:s,editor:i})=>{var a;if(s){let s;const l=e=>{i.emit("contentError",{editor:i,error:e,disableCollaboration:()=>{"collaboration"in i.storage&&"object"==typeof i.storage.collaboration&&i.storage.collaboration&&(i.storage.collaboration.isDisabled=!0)}})},c={preserveWhitespace:"full",...(n={parseOptions:i.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n}).parseOptions};if(!n.errorOnInvalidContent&&!i.options.enableContentCheck&&i.options.emitContentError)try{WMe(t,i.schema,{parseOptions:c,errorOnInvalidContent:!0})}catch(o){l(o)}try{s=WMe(t,i.schema,{parseOptions:c,errorOnInvalidContent:null!=(a=n.errorOnInvalidContent)?a:i.options.enableContentCheck})}catch(o){return l(o),!1}let{from:d,to:u}="number"==typeof e?{from:e,to:e}:{from:e.from,to:e.to},h=!0,p=!0;if(("type"in s?[s]:s).forEach(e=>{e.check(),h=!!h&&(e.isText&&0===e.marks.length),p=!!p&&e.isBlock}),d===u&&p){const{parent:e}=r.doc.resolve(d);e.isTextblock&&!e.type.spec.code&&!e.childCount&&(d-=1,u+=1)}let m;if(h){if(Array.isArray(t))m=t.map(e=>e.text||"").join("");else if(t instanceof Ebe){let e="";t.forEach(t=>{t.text&&(e+=t.text)}),m=e}else m="object"==typeof t&&t&&t.text?t.text:t;r.insertText(m,d,u)}else{m=s;const e=r.doc.resolve(d),t=e.node(),n=0===e.parentOffset,i=t.isText||t.isTextblock,a=t.content.size>0;n&&i&&a&&(d=Math.max(0,d-1)),r.replaceWith(d,u,m)}n.updateSelection&&function(e,t,n){const r=e.steps.length-1;if(r<t)return;const s=e.steps[r];if(!(s instanceof Kwe||s instanceof Ywe))return;const i=e.mapping.maps[r];let a=0;i.forEach((e,t,n,r)=>{0===a&&(a=r)}),e.setSelection(Mje.near(e.doc.resolve(a),n))}(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:d,text:m}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:d,text:m})}return!0},hEe=()=>({state:e,dispatch:t})=>((e,t)=>{let n,r=e.selection,s=r instanceof Pje;if(s){if(r.node.isTextblock||!aje(e.doc,r.from))return!1;n=r.from}else if(n=lje(e.doc,r.from,-1),null==n)return!1;if(t){let r=e.tr.join(n);s&&r.setSelection(Pje.create(r.doc,n-e.doc.resolve(n).nodeBefore.nodeSize)),t(r.scrollIntoView())}return!0})(e,t),pEe=()=>({state:e,dispatch:t})=>((e,t)=>{let n,r=e.selection;if(r instanceof Pje){if(r.node.isTextblock||!aje(e.doc,r.to))return!1;n=r.to}else if(n=lje(e.doc,r.to,1),null==n)return!1;return t&&t(e.tr.join(n).scrollIntoView()),!0})(e,t),mEe=()=>({state:e,dispatch:t})=>((e,t,n)=>{let r=jMe(e,n);if(!r)return!1;let s=SMe(r);if(!s){let n=r.blockRange(),s=n&&eje(n);return null!=s&&(t&&t(e.tr.lift(n,s).scrollIntoView()),!0)}let i=s.nodeBefore;if(kMe(e,s,t,-1))return!0;if(0==r.parent.content.size&&(_Me(i,"end")||Pje.isSelectable(i)))for(let a=r.depth;;a--){let n=dje(e.doc,r.before(a),r.after(a),Rbe.empty);if(n&&n.slice.size<n.to-n.from){if(t){let r=e.tr.step(n);r.setSelection(_Me(i,"end")?Mje.findFrom(r.doc.resolve(r.mapping.map(s.pos,-1)),-1):Pje.create(r.doc,s.pos-i.nodeSize)),t(r.scrollIntoView())}return!0}if(1==a||r.node(a-1).childCount>1)break}return!(!i.isAtom||s.depth!=r.depth-1||(t&&t(e.tr.delete(s.pos-i.nodeSize,s.pos).scrollIntoView()),0))})(e,t),fEe=()=>({state:e,dispatch:t})=>((e,t,n)=>{let r=MMe(e,n);if(!r)return!1;let s=CMe(r);if(!s)return!1;let i=s.nodeAfter;if(kMe(e,s,t,1))return!0;if(0==r.parent.content.size&&(_Me(i,"start")||Pje.isSelectable(i))){let n=dje(e.doc,r.before(),r.after(),Rbe.empty);if(n&&n.slice.size<n.to-n.from){if(t){let r=e.tr.step(n);r.setSelection(_Me(i,"start")?Mje.findFrom(r.doc.resolve(r.mapping.map(s.pos)),1):Pje.create(r.doc,r.mapping.map(s.pos))),t(r.scrollIntoView())}return!0}}return!(!i.isAtom||s.depth!=r.depth-1||(t&&t(e.tr.delete(s.pos,s.pos+i.nodeSize).scrollIntoView()),0))})(e,t),gEe=()=>({state:e,dispatch:t,tr:n})=>{try{const r=lje(e.doc,e.selection.$from.pos,-1);return null!=r&&(n.join(r,2),t&&t(n),!0)}catch{return!1}},xEe=()=>({state:e,dispatch:t,tr:n})=>{try{const r=lje(e.doc,e.selection.$from.pos,1);return null!=r&&(n.join(r,2),t&&t(n),!0)}catch{return!1}},vEe=()=>({state:e,dispatch:t})=>((e,t,n)=>{let r=jMe(e,n);if(!r)return!1;let s=SMe(r);return!!s&&NMe(e,s,t)})(e,t),yEe=()=>({state:e,dispatch:t})=>((e,t,n)=>{let r=MMe(e,n);if(!r)return!1;let s=CMe(r);return!!s&&NMe(e,s,t)})(e,t);function bEe(){return"undefined"!=typeof navigator&&/Mac/.test(navigator.platform)}var wEe=e=>({editor:t,view:n,tr:r,dispatch:s})=>{const i=function(e){const t=e.split(/-(?!$)/);let n,r,s,i,a=t[t.length-1];"Space"===a&&(a=" ");for(let o=0;o<t.length-1;o+=1){const e=t[o];if(/^(cmd|meta|m)$/i.test(e))i=!0;else if(/^a(lt)?$/i.test(e))n=!0;else if(/^(c|ctrl|control)$/i.test(e))r=!0;else if(/^s(hift)?$/i.test(e))s=!0;else{if(!/^mod$/i.test(e))throw new Error(`Unrecognized modifier name: ${e}`);oEe()||bEe()?i=!0:r=!0}}return n&&(a=`Alt-${a}`),r&&(a=`Ctrl-${a}`),i&&(a=`Meta-${a}`),s&&(a=`Shift-${a}`),a}(e).split(/-(?!$)/),a=i.find(e=>!["Alt","Ctrl","Meta","Shift"].includes(e)),o=new KeyboardEvent("keydown",{key:"Space"===a?" ":a,altKey:i.includes("Alt"),ctrlKey:i.includes("Ctrl"),metaKey:i.includes("Meta"),shiftKey:i.includes("Shift"),bubbles:!0,cancelable:!0}),l=t.captureTransaction(()=>{n.someProp("handleKeyDown",e=>e(n,o))});return null==l||l.steps.forEach(e=>{const t=e.map(r.mapping);t&&s&&r.maybeStep(t)}),!0},jEe=(e,t={})=>({state:n,dispatch:r})=>!!SCe(n,uCe(e,n.schema),t)&&((e,t)=>{let{$from:n,$to:r}=e.selection,s=n.blockRange(r),i=s&&eje(s);return null!=i&&(t&&t(e.tr.lift(s,i).scrollIntoView()),!0)})(n,r),NEe=()=>({state:e,dispatch:t})=>((e,t)=>{let{$cursor:n}=e.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let r=n.before();if(ije(e.doc,r))return t&&t(e.tr.split(r).scrollIntoView()),!0}let r=n.blockRange(),s=r&&eje(r);return null!=s&&(t&&t(e.tr.lift(r,s).scrollIntoView()),!0)})(e,t),_Ee=e=>({state:t,dispatch:n})=>IMe(uCe(e,t.schema))(t,n),SEe=()=>({state:e,dispatch:t})=>((e,t)=>{let{$head:n,$anchor:r}=e.selection;return!(!n.parent.type.spec.code||!n.sameParent(r)||(t&&t(e.tr.insertText("\n").scrollIntoView()),0))})(e,t);function MEe(e,t){const n="string"==typeof t?[t]:t;return Object.keys(e).reduce((t,r)=>(n.includes(r)||(t[r]=e[r]),t),{})}var CEe=(e,t)=>({tr:n,state:r,dispatch:s})=>{let i=null,a=null;const o=hCe("string"==typeof e?e:e.name,r.schema);return!!o&&("node"===o&&(i=uCe(e,r.schema)),"mark"===o&&(a=cCe(e,r.schema)),s&&n.selection.ranges.forEach(e=>{r.doc.nodesBetween(e.$from.pos,e.$to.pos,(e,r)=>{i&&i===e.type&&n.setNodeMarkup(r,void 0,MEe(e.attrs,t)),a&&e.marks.length&&e.marks.forEach(s=>{a===s.type&&n.addMark(r,r+e.nodeSize,a.create(MEe(s.attrs,t)))})})}),!0)},EEe=()=>({tr:e,dispatch:t})=>(t&&e.scrollIntoView(),!0),kEe=()=>({tr:e,dispatch:t})=>{if(t){const t=new Rje(e.doc);e.setSelection(t)}return!0},AEe=()=>({state:e,dispatch:t})=>((e,t,n)=>{let{$head:r,empty:s}=e.selection,i=r;if(!s)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):r.parentOffset>0)return!1;i=SMe(r)}let a=i&&i.nodeBefore;return!(!a||!Pje.isSelectable(a)||(t&&t(e.tr.setSelection(Pje.create(e.doc,i.pos-a.nodeSize)).scrollIntoView()),0))})(e,t),TEe=()=>({state:e,dispatch:t})=>((e,t,n)=>{let{$head:r,empty:s}=e.selection,i=r;if(!s)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size)return!1;i=CMe(r)}let a=i&&i.nodeAfter;return!(!a||!Pje.isSelectable(a)||(t&&t(e.tr.setSelection(Pje.create(e.doc,i.pos)).scrollIntoView()),0))})(e,t),PEe=()=>({state:e,dispatch:t})=>((e,t)=>{let n,{$from:r,to:s}=e.selection,i=r.sharedDepth(s);return 0!=i&&(n=r.before(i),t&&t(e.tr.setSelection(Pje.create(e.doc,n))),!0)})(e,t),OEe=()=>({state:e,dispatch:t})=>PMe(e,t),REe=()=>({state:e,dispatch:t})=>TMe(e,t),IEe=(e,{errorOnInvalidContent:t,emitUpdate:n=!0,parseOptions:r={}}={})=>({editor:s,tr:i,dispatch:a,commands:o})=>{const{doc:l}=i;if("full"!==r.preserveWhitespace){const o=$Me(e,s.schema,r,{errorOnInvalidContent:null!=t?t:s.options.enableContentCheck});return a&&i.replaceWith(0,l.content.size,o).setMeta("preventUpdate",!n),!0}return a&&i.setMeta("preventUpdate",!n),o.insertContentAt({from:0,to:l.content.size},e,{parseOptions:r,errorOnInvalidContent:null!=t?t:s.options.enableContentCheck})};var DEe=(e,t={})=>({tr:n,state:r,dispatch:s})=>{const{selection:i}=n,{empty:a,ranges:o}=i,l=cCe(e,r.schema);if(s)if(a){const e=dCe(r,l);n.addStoredMark(l.create({...e,...t}))}else o.forEach(e=>{const s=e.$from.pos,i=e.$to.pos;r.doc.nodesBetween(s,i,(e,r)=>{const a=Math.max(r,s),o=Math.min(r+e.nodeSize,i);e.marks.find(e=>e.type===l)?e.marks.forEach(e=>{l===e.type&&n.addMark(a,o,l.create({...e.attrs,...t}))}):n.addMark(a,o,l.create(t))})});return function(e,t,n){var r;const{selection:s}=t;let i=null;if(ACe(s)&&(i=s.$cursor),i){const t=null!=(r=e.storedMarks)?r:i.marks();return i.parent.type.allowsMarkType(n)&&(!!n.isInSet(t)||!t.some(e=>e.type.excludes(n)))}const{ranges:a}=s;return a.some(({$from:t,$to:r})=>{let s=0===t.depth&&e.doc.inlineContent&&e.doc.type.allowsMarkType(n);return e.doc.nodesBetween(t.pos,r.pos,(e,t,r)=>{if(s)return!1;if(e.isInline){const t=!r||r.type.allowsMarkType(n),i=!!n.isInSet(e.marks)||!e.marks.some(e=>e.type.excludes(n));s=t&&i}return!s}),s})}(r,n,l)},LEe=(e,t)=>({tr:n})=>(n.setMeta(e,t),!0),FEe=(e,t={})=>({state:n,dispatch:r,chain:s})=>{const i=uCe(e,n.schema);let a;return n.selection.$anchor.sameParent(n.selection.$head)&&(a=n.selection.$anchor.parent.attrs),!!i.isTextblock&&s().command(({commands:e})=>!!OMe(i,{...a,...t})(n)||e.clearNodes()).command(({state:e})=>OMe(i,{...a,...t})(e,r)).run()},zEe=e=>({tr:t,dispatch:n})=>{if(n){const{doc:n}=t,r=TCe(e,0,n.content.size),s=Pje.create(n,r);t.setSelection(s)}return!0},BEe=e=>({tr:t,dispatch:n})=>{if(n){const{doc:n}=t,{from:r,to:s}="number"==typeof e?{from:e,to:e}:e,i=Aje.atStart(n).from,a=Aje.atEnd(n).to,o=TCe(r,i,a),l=TCe(s,i,a),c=Aje.create(n,o,l);t.setSelection(c)}return!0},UEe=e=>({state:t,dispatch:n})=>{const r=uCe(e,t.schema);return(s=r,function(e,t){let{$from:n,$to:r}=e.selection,i=n.blockRange(r,e=>e.childCount>0&&e.firstChild.type==s);if(!i)return!1;let a=i.startIndex;if(0==a)return!1;let o=i.parent,l=o.child(a-1);if(l.type!=s)return!1;if(t){let n=l.lastChild&&l.lastChild.type==o.type,r=Ebe.from(n?s.create():null),a=new Rbe(Ebe.from(s.create(null,Ebe.from(o.type.create(null,r)))),n?3:1,0),c=i.start,d=i.end;t(e.tr.step(new Ywe(c-(n?3:1),d,c,d,a,1,!0)).scrollIntoView())}return!0})(t,n);var s};function VEe(e,t){const n=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();if(n){const r=n.filter(e=>null==t?void 0:t.includes(e.type.name));e.tr.ensureMarks(r)}}var HEe=({keepMarks:e=!0}={})=>({tr:t,state:n,dispatch:r,editor:s})=>{const{selection:i,doc:a}=t,{$from:o,$to:l}=i,c=NCe(s.extensionManager.attributes,o.node().type.name,o.node().attrs);if(i instanceof Pje&&i.node.isBlock)return!(!o.parentOffset||!ije(a,o.pos))&&(r&&(e&&VEe(n,s.extensionManager.splittableMarks),t.split(o.pos).scrollIntoView()),!0);if(!o.parent.isBlock)return!1;const d=l.parentOffset===l.parent.content.size,u=0===o.depth?void 0:function(e){for(let t=0;t<e.edgeCount;t+=1){const{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}(o.node(-1).contentMatchAt(o.indexAfter(-1)));let h=d&&u?[{type:u,attrs:c}]:void 0,p=ije(t.doc,t.mapping.map(o.pos),1,h);if(h||p||!ije(t.doc,t.mapping.map(o.pos),1,u?[{type:u}]:void 0)||(p=!0,h=u?[{type:u,attrs:c}]:void 0),r){if(p&&(i instanceof Aje&&t.deleteSelection(),t.split(t.mapping.map(o.pos),1,h),u&&!d&&!o.parentOffset&&o.parent.type!==u)){const e=t.mapping.map(o.before()),n=t.doc.resolve(e);o.node(-1).canReplaceWith(n.index(),n.index()+1,u)&&t.setNodeMarkup(t.mapping.map(o.before()),u)}e&&VEe(n,s.extensionManager.splittableMarks),t.scrollIntoView()}return p},WEe=(e,t={})=>({tr:n,state:r,dispatch:s,editor:i})=>{var a;const o=uCe(e,r.schema),{$from:l,$to:c}=r.selection,d=r.selection.node;if(d&&d.isBlock||l.depth<2||!l.sameParent(c))return!1;const u=l.node(-1);if(u.type!==o)return!1;const h=i.extensionManager.attributes;if(0===l.parent.content.size&&l.node(-1).childCount===l.indexAfter(-1)){if(2===l.depth||l.node(-3).type!==o||l.index(-2)!==l.node(-2).childCount-1)return!1;if(s){let e=Ebe.empty;const r=l.index(-1)?1:l.index(-2)?2:3;for(let t=l.depth-r;t>=l.depth-3;t-=1)e=Ebe.from(l.node(t).copy(e));const s=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,i={...NCe(h,l.node().type.name,l.node().attrs),...t},c=(null==(a=o.contentMatch.defaultType)?void 0:a.createAndFill(i))||void 0;e=e.append(Ebe.from(o.createAndFill(null,c)||void 0));const d=l.before(l.depth-(r-1));n.replace(d,l.after(-s),new Rbe(e,4-r,0));let u=-1;n.doc.nodesBetween(d,n.doc.content.size,(e,t)=>{if(u>-1)return!1;e.isTextblock&&0===e.content.size&&(u=t+1)}),u>-1&&n.setSelection(Aje.near(n.doc.resolve(u))),n.scrollIntoView()}return!0}const p=c.pos===l.end()?u.contentMatchAt(0).defaultType:null,m={...NCe(h,u.type.name,u.attrs),...t},f={...NCe(h,l.node().type.name,l.node().attrs),...t};n.delete(l.pos,c.pos);const g=p?[{type:o,attrs:m},{type:p,attrs:f}]:[{type:o,attrs:m}];if(!ije(n.doc,l.pos,2))return!1;if(s){const{selection:e,storedMarks:t}=r,{splittableMarks:a}=i.extensionManager,o=t||e.$to.parentOffset&&e.$from.marks();if(n.split(l.pos,2,g).scrollIntoView(),!o||!s)return!0;const c=o.filter(e=>a.includes(e.type.name));n.ensureMarks(c)}return!0},$Ee=(e,t)=>{const n=qMe(e=>e.type===t)(e.selection);if(!n)return!0;const r=e.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(void 0===r)return!0;const s=e.doc.nodeAt(r);return n.node.type!==(null==s?void 0:s.type)||!aje(e.doc,n.pos)||(e.join(n.pos),!0)},GEe=(e,t)=>{const n=qMe(e=>e.type===t)(e.selection);if(!n)return!0;const r=e.doc.resolve(n.start).after(n.depth);if(void 0===r)return!0;const s=e.doc.nodeAt(r);return n.node.type!==(null==s?void 0:s.type)||!aje(e.doc,r)||(e.join(r),!0)},qEe=(e,t,n,r={})=>({editor:s,tr:i,state:a,dispatch:o,chain:l,commands:c,can:d})=>{const{extensions:u,splittableMarks:h}=s.extensionManager,p=uCe(e,a.schema),m=uCe(t,a.schema),{selection:f,storedMarks:g}=a,{$from:x,$to:v}=f,y=x.blockRange(v),b=g||f.$to.parentOffset&&f.$from.marks();if(!y)return!1;const w=qMe(e=>CCe(e.type.name,u))(f);if(y.depth>=1&&w&&y.depth-w.depth<=1){if(w.node.type===p)return c.liftListItem(m);if(CCe(w.node.type.name,u)&&p.validContent(w.node.content)&&o)return l().command(()=>(i.setNodeMarkup(w.pos,p),!0)).command(()=>$Ee(i,p)).command(()=>GEe(i,p)).run()}return n&&b&&o?l().command(()=>{const e=d().wrapInList(p,r),t=b.filter(e=>h.includes(e.type.name));return i.ensureMarks(t),!!e||c.clearNodes()}).wrapInList(p,r).command(()=>$Ee(i,p)).command(()=>GEe(i,p)).run():l().command(()=>!!d().wrapInList(p,r)||c.clearNodes()).wrapInList(p,r).command(()=>$Ee(i,p)).command(()=>GEe(i,p)).run()},XEe=(e,t={},n={})=>({state:r,commands:s})=>{const{extendEmptyMarkRange:i=!1}=n,a=cCe(e,r.schema);return _Ce(r,a,t)?s.unsetMark(a,{extendEmptyMarkRange:i}):s.setMark(a,t)},KEe=(e,t,n={})=>({state:r,commands:s})=>{const i=uCe(e,r.schema),a=uCe(t,r.schema),o=SCe(r,i,n);let l;return r.selection.$anchor.sameParent(r.selection.$head)&&(l=r.selection.$anchor.parent.attrs),o?s.setNode(a,l):s.setNode(i,{...l,...n})},YEe=(e,t={})=>({state:n,commands:r})=>{const s=uCe(e,n.schema);return SCe(n,s,t)?r.lift(s):r.wrapIn(s,t)},ZEe=()=>({state:e,dispatch:t})=>{const n=e.plugins;for(let r=0;r<n.length;r+=1){const s=n[r];let i;if(s.spec.isInputRules&&(i=s.getState(e))){if(t){const t=e.tr,n=i.transform;for(let e=n.steps.length-1;e>=0;e-=1)t.step(n.steps[e].invert(n.docs[e]));if(i.text){const n=t.doc.resolve(i.from).marks();t.replaceWith(i.from,i.to,e.schema.text(i.text,n))}else t.delete(i.from,i.to)}return!0}}return!1},JEe=()=>({tr:e,dispatch:t})=>{const{selection:n}=e,{empty:r,ranges:s}=n;return r||t&&s.forEach(t=>{e.removeMark(t.$from.pos,t.$to.pos)}),!0},QEe=(e,t={})=>({tr:n,state:r,dispatch:s})=>{var i;const{extendEmptyMarkRange:a=!1}=t,{selection:o}=n,l=cCe(e,r.schema),{$from:c,empty:d,ranges:u}=o;if(!s)return!0;if(d&&a){let{from:e,to:t}=o;const r=null==(i=c.marks().find(e=>e.type===l))?void 0:i.attrs,s=bCe(c,l,r);s&&(e=s.from,t=s.to),n.removeMark(e,t,l)}else u.forEach(e=>{n.removeMark(e.$from.pos,e.$to.pos,l)});return n.removeStoredMark(l),!0},eke=(e,t={})=>({tr:n,state:r,dispatch:s})=>{let i=null,a=null;const o=hCe("string"==typeof e?e:e.name,r.schema);return!!o&&("node"===o&&(i=uCe(e,r.schema)),"mark"===o&&(a=cCe(e,r.schema)),s&&n.selection.ranges.forEach(e=>{const s=e.$from.pos,o=e.$to.pos;let l,c,d,u;n.selection.empty?r.doc.nodesBetween(s,o,(e,t)=>{i&&i===e.type&&(d=Math.max(t,s),u=Math.min(t+e.nodeSize,o),l=t,c=e)}):r.doc.nodesBetween(s,o,(e,r)=>{r<s&&i&&i===e.type&&(d=Math.max(r,s),u=Math.min(r+e.nodeSize,o),l=r,c=e),r>=s&&r<=o&&(i&&i===e.type&&n.setNodeMarkup(r,void 0,{...e.attrs,...t}),a&&e.marks.length&&e.marks.forEach(i=>{if(a===i.type){const l=Math.max(r,s),c=Math.min(r+e.nodeSize,o);n.addMark(l,c,a.create({...i.attrs,...t}))}}))}),c&&(void 0!==l&&n.setNodeMarkup(l,void 0,{...c.attrs,...t}),a&&c.marks.length&&c.marks.forEach(e=>{a===e.type&&n.addMark(d,u,a.create({...e.attrs,...t}))}))}),!0)},tke=(e,t={})=>({state:n,dispatch:r})=>function(e,t=null){return function(n,r){let{$from:s,$to:i}=n.selection,a=s.blockRange(i),o=a&&tje(a,e,t);return!!o&&(r&&r(n.tr.wrap(a,o).scrollIntoView()),!0)}}(uCe(e,n.schema),t)(n,r),nke=(e,t={})=>({state:n,dispatch:r})=>RMe(uCe(e,n.schema),t)(n,r),rke=WCe.create({name:"commands",addCommands:()=>({...GCe})}),ske=WCe.create({name:"delete",onUpdate({transaction:e,appendedTransactions:t}){var n,r,s;const i=()=>{var n,r,s,i;if(null!=(i=null==(s=null==(r=null==(n=this.editor.options.coreExtensionOptions)?void 0:n.delete)?void 0:r.filterTransaction)?void 0:s.call(r,e))?i:e.getMeta("y-sync$"))return;const a=UMe(e.before,[e,...t]);fCe(a).forEach(t=>{a.mapping.mapResult(t.oldRange.from).deletedAfter&&a.mapping.mapResult(t.oldRange.to).deletedBefore&&a.before.nodesBetween(t.oldRange.from,t.oldRange.to,(n,r)=>{const s=r+n.nodeSize-2,i=t.oldRange.from<=r&&s<=t.oldRange.to;this.editor.emit("delete",{type:"node",node:n,from:r,to:s,newFrom:a.mapping.map(r),newTo:a.mapping.map(s),deletedRange:t.oldRange,newRange:t.newRange,partial:!i,editor:this.editor,transaction:e,combinedTransform:a})})});const o=a.mapping;a.steps.forEach((t,n)=>{var r,s;if(t instanceof Gwe){const i=o.slice(n).map(t.from,-1),l=o.slice(n).map(t.to),c=o.invert().map(i,-1),d=o.invert().map(l),u=null==(r=a.doc.nodeAt(i-1))?void 0:r.marks.some(e=>e.eq(t.mark)),h=null==(s=a.doc.nodeAt(l))?void 0:s.marks.some(e=>e.eq(t.mark));this.editor.emit("delete",{type:"mark",mark:t.mark,from:t.from,to:t.to,deletedRange:{from:c,to:d},newRange:{from:i,to:l},partial:Boolean(h||u),editor:this.editor,transaction:e,combinedTransform:a})}})};null==(s=null==(r=null==(n=this.editor.options.coreExtensionOptions)?void 0:n.delete)?void 0:r.async)||s?setTimeout(i,0):i()}}),ike=WCe.create({name:"drop",addProseMirrorPlugins(){return[new $je({key:new Xje("tiptapDrop"),props:{handleDrop:(e,t,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:t,slice:n,moved:r})}}})]}}),ake=WCe.create({name:"editable",addProseMirrorPlugins(){return[new $je({key:new Xje("editable"),props:{editable:()=>this.editor.options.editable}})]}}),oke=new Xje("focusEvents"),lke=WCe.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:e}=this;return[new $je({key:oke,props:{handleDOMEvents:{focus:(t,n)=>{e.isFocused=!0;const r=e.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1},blur:(t,n)=>{e.isFocused=!1;const r=e.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1}}}})]}}),cke=WCe.create({name:"keymap",addKeyboardShortcuts(){const e=()=>this.editor.commands.first(({commands:e})=>[()=>e.undoInputRule(),()=>e.command(({tr:t})=>{const{selection:n,doc:r}=t,{empty:s,$anchor:i}=n,{pos:a,parent:o}=i,l=i.parent.isTextblock&&a>0?t.doc.resolve(a-1):i,c=l.parent.type.spec.isolating,d=i.pos-i.parentOffset,u=c&&1===l.parent.childCount?d===i.pos:Mje.atStart(r).from===a;return!(!s||!o.type.isTextblock||o.textContent.length||!u||u&&"paragraph"===i.parent.type.name)&&e.clearNodes()}),()=>e.deleteSelection(),()=>e.joinBackward(),()=>e.selectNodeBackward()]),t=()=>this.editor.commands.first(({commands:e})=>[()=>e.deleteSelection(),()=>e.deleteCurrentNode(),()=>e.joinForward(),()=>e.selectNodeForward()]),n={Enter:()=>this.editor.commands.first(({commands:e})=>[()=>e.newlineInCode(),()=>e.createParagraphNear(),()=>e.liftEmptyBlock(),()=>e.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:e,"Mod-Backspace":e,"Shift-Backspace":e,Delete:t,"Mod-Delete":t,"Mod-a":()=>this.editor.commands.selectAll()},r={...n},s={...n,"Ctrl-h":e,"Alt-Backspace":e,"Ctrl-d":t,"Ctrl-Alt-Backspace":t,"Alt-Delete":t,"Alt-d":t,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return oEe()||bEe()?s:r},addProseMirrorPlugins(){return[new $je({key:new Xje("clearDocument"),appendTransaction:(e,t,n)=>{if(e.some(e=>e.getMeta("composition")))return;const r=e.some(e=>e.docChanged)&&!t.doc.eq(n.doc),s=e.some(e=>e.getMeta("preventClearDocument"));if(!r||s)return;const{empty:i,from:a,to:o}=t.selection,l=Mje.atStart(t.doc).from,c=Mje.atEnd(t.doc).to;if(i||!(a===l&&o===c))return;if(!ECe(n.doc))return;const d=n.tr,u=FMe({state:n,transaction:d}),{commands:h}=new zMe({editor:this.editor,state:u});return h.clearNodes(),d.steps.length?d:void 0}})]}}),dke=WCe.create({name:"paste",addProseMirrorPlugins(){return[new $je({key:new Xje("tiptapPaste"),props:{handlePaste:(e,t,n)=>{this.editor.emit("paste",{editor:this.editor,event:t,slice:n})}}})]}}),uke=WCe.create({name:"tabindex",addProseMirrorPlugins(){return[new $je({key:new Xje("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),hke=class e{constructor(e,t,n=!1,r=null){this.currentNode=null,this.actualDepth=null,this.isBlock=n,this.resolvedPos=e,this.editor=t,this.currentNode=r}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return null!=(e=this.actualDepth)?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let t=this.from,n=this.to;if(this.isBlock){if(0===this.content.size)return;t=this.from+1,n=this.to-1}this.editor.commands.insertContentAt({from:t,to:n},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(0===this.depth)return null;const t=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(t);return new e(n,this.editor)}get before(){let t=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.from-3)),new e(t,this.editor)}get after(){let t=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.to+3)),new e(t,this.editor)}get children(){const t=[];return this.node.content.forEach((n,r)=>{const s=n.isBlock&&!n.isTextblock,i=n.isAtom&&!n.isText,a=this.pos+r+(i?0:1);if(a<0||a>this.resolvedPos.doc.nodeSize-2)return;const o=this.resolvedPos.doc.resolve(a);if(!s&&o.depth<=this.depth)return;const l=new e(o,this.editor,s,s?n:null);s&&(l.actualDepth=this.depth+1),t.push(new e(o,this.editor,s,s?n:null))}),t}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,t={}){let n=null,r=this.parent;for(;r&&!n;)r.node.type.name===e&&(Object.keys(t).length>0||(n=r)),r=r.parent;return n}querySelector(e,t={}){return this.querySelectorAll(e,t,!0)[0]||null}querySelectorAll(e,t={},n=!1){let r=[];if(!this.children||0===this.children.length)return r;const s=Object.keys(t);return this.children.forEach(i=>{if(!(n&&r.length>0)){if(i.node.type.name===e){s.every(e=>t[e]===i.node.attrs[e])&&r.push(i)}n&&r.length>0||(r=r.concat(i.querySelectorAll(e,t,n)))}}),r}setAttribute(e){const{tr:t}=this.editor.state;t.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(t)}};var pke=class extends BMe{constructor(e={}){super(),this.css=null,this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:"undefined"!=typeof document?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:e})=>{throw e},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:e,slice:t,moved:n})=>this.options.onDrop(e,t,n)),this.on("paste",({event:e,slice:t})=>this.options.onPaste(e,t)),this.on("delete",this.options.onDelete);const t=this.createDoc(),n=PCe(t,this.options.autofocus);this.editorState=Hje.create({doc:t,schema:this.schema,selection:n||void 0}),this.options.element&&this.mount(this.options.element)}mount(e){if("undefined"==typeof document)throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(e),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const e=this.editorView.dom;(null==e?void 0:e.editor)&&delete e.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css)try{"function"==typeof this.css.remove?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(e){}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&"undefined"!=typeof document&&(this.css=function(e,t){const n=document.querySelector("style[data-tiptap-style]");if(null!==n)return n;const r=document.createElement("style");return t&&r.setAttribute("nonce",t),r.setAttribute("data-tiptap-style",""),r.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(r),r}('.ProseMirror {\n  position: relative;\n}\n\n.ProseMirror {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  white-space: break-spaces;\n  -webkit-font-variant-ligatures: none;\n  font-variant-ligatures: none;\n  font-feature-settings: "liga" 0; /* the above doesn\'t seem to work in Edge */\n}\n\n.ProseMirror [contenteditable="false"] {\n  white-space: normal;\n}\n\n.ProseMirror [contenteditable="false"] [contenteditable="true"] {\n  white-space: pre-wrap;\n}\n\n.ProseMirror pre {\n  white-space: pre-wrap;\n}\n\nimg.ProseMirror-separator {\n  display: inline !important;\n  border: none !important;\n  margin: 0 !important;\n  width: 0 !important;\n  height: 0 !important;\n}\n\n.ProseMirror-gapcursor {\n  display: none;\n  pointer-events: none;\n  position: absolute;\n  margin: 0;\n}\n\n.ProseMirror-gapcursor:after {\n  content: "";\n  display: block;\n  position: absolute;\n  top: -2px;\n  width: 20px;\n  border-top: 1px solid black;\n  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;\n}\n\n@keyframes ProseMirror-cursor-blink {\n  to {\n    visibility: hidden;\n  }\n}\n\n.ProseMirror-hideselection *::selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection *::-moz-selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection * {\n  caret-color: transparent;\n}\n\n.ProseMirror-focused .ProseMirror-gapcursor {\n  display: block;\n}',this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},this.editorView&&this.state&&!this.isDestroyed&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:e=>{this.editorState=e},dispatch:e=>{this.dispatchTransaction(e)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(e,t)=>{if(this.editorView)return this.editorView[t];if("state"===t)return this.editorState;if(t in e)return Reflect.get(e,t);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${t}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(e,t){const n=ZMe(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}unregisterPlugin(e){if(this.isDestroyed)return;const t=this.state.plugins;let n=t;if([].concat(e).forEach(e=>{const t="string"==typeof e?`${e}$`:e.key;n=n.filter(e=>!e.key.startsWith(t))}),t.length===n.length)return;const r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}createExtensionManager(){var e,t;const n=[...this.options.enableCoreExtensions?[ake,$Ce.configure({blockSeparator:null==(t=null==(e=this.options.coreExtensionOptions)?void 0:e.clipboardTextSerializer)?void 0:t.blockSeparator}),rke,lke,cke,uke,ike,dke,ske].filter(e=>"object"!=typeof this.options.enableCoreExtensions||!1!==this.options.enableCoreExtensions[e.name]):[],...this.options.extensions].filter(e=>["extension","node","mark"].includes(null==e?void 0:e.type));this.extensionManager=new HCe(n,this)}createCommandManager(){this.commandManager=new zMe({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let e;try{e=$Me(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(t){if(!(t instanceof Error&&["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(t.message)))throw t;this.emit("contentError",{editor:this,error:t,disableCollaboration:()=>{"collaboration"in this.storage&&"object"==typeof this.storage.collaboration&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(e=>"collaboration"!==e.name),this.createExtensionManager()}}),e=$Me(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return e}createView(e){var t;this.editorView=new iMe(e,{...this.options.editorProps,attributes:{role:"textbox",...null==(t=this.options.editorProps)?void 0:t.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const n=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(n),this.prependClass(),this.injectCSS();this.view.dom.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction)return this.capturedTransaction?void e.steps.forEach(e=>{var t;return null==(t=this.capturedTransaction)?void 0:t.step(e)}):void(this.capturedTransaction=e);const{state:t,transactions:n}=this.state.applyTransaction(e),r=!this.state.selection.eq(t.selection),s=n.includes(e),i=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:e,nextState:t}),!s)return;this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e,appendedTransactions:n.slice(1)}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const a=n.findLast(e=>e.getMeta("focus")||e.getMeta("blur")),o=null==a?void 0:a.getMeta("focus"),l=null==a?void 0:a.getMeta("blur");o&&this.emit("focus",{editor:this,event:o.event,transaction:a}),l&&this.emit("blur",{editor:this,event:l.event,transaction:a}),e.getMeta("preventUpdate")||!n.some(e=>e.docChanged)||i.doc.eq(t.doc)||this.emit("update",{editor:this,transaction:e,appendedTransactions:n.slice(1)})}getAttributes(e){return pCe(this.state,e)}isActive(e,t){const n="string"==typeof e?e:null,r="string"==typeof e?t:e;return function(e,t,n={}){if(!t)return SCe(e,null,n)||_Ce(e,null,n);const r=hCe(t,e.schema);return"node"===r?SCe(e,t,n):"mark"===r&&_Ce(e,t,n)}(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return YMe(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t="\n\n",textSerializers:n={}}=e||{};return function(e,t){return oCe(e,{from:0,to:e.content.size},t)}(this.state.doc,{blockSeparator:t,textSerializers:{...lCe(this.schema),...n}})}get isEmpty(){return ECe(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var e,t;return null==(t=null==(e=this.editorView)?void 0:e.isDestroyed)||t}$node(e,t){var n;return(null==(n=this.$doc)?void 0:n.querySelector(e,t))||null}$nodes(e,t){var n;return(null==(n=this.$doc)?void 0:n.querySelectorAll(e,t))||null}$pos(e){const t=this.state.doc.resolve(e);return new hke(t,this)}get $doc(){return this.$pos(0)}};function mke(e){return new OCe({find:e.find,handler:({state:t,range:n,match:r})=>{const s=JMe(e.getAttributes,void 0,r);if(!1===s||null===s)return null;const{tr:i}=t,a=r[r.length-1],o=r[0];if(a){const r=o.search(/\S/),l=n.from+o.indexOf(a),c=l+a.length;if(wCe(n.from,n.to,t.doc).filter(t=>t.mark.type.excluded.find(n=>n===e.type&&n!==t.mark.type)).filter(e=>e.to>l).length)return null;c<n.to&&i.delete(c,n.to),l>n.from&&i.delete(n.from+r,l);const d=n.from+r+a.length;i.addMark(n.from+r,d,e.type.create(s||{})),i.removeStoredMark(e.type)}},undoable:e.undoable})}function fke(e){return new OCe({find:e.find,handler:({state:t,range:n,match:r})=>{const s=JMe(e.getAttributes,void 0,r)||{},{tr:i}=t,a=n.from;let o=n.to;const l=e.type.create(s);if(r[1]){let e=a+r[0].lastIndexOf(r[1]);e>o?e=o:o=e+r[1].length;const t=r[0][r[0].length-1];i.insertText(t,a+r[0].length-1),i.replaceWith(e,o,l)}else if(r[0]){const t=e.type.isInline?a:a-1;i.insert(t,e.type.create(s)).delete(i.mapping.map(a),i.mapping.map(o))}i.scrollIntoView()},undoable:e.undoable})}function gke(e){return new OCe({find:e.find,handler:({state:t,range:n,match:r})=>{const s=t.doc.resolve(n.from),i=JMe(e.getAttributes,void 0,r)||{};if(!s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),e.type))return null;t.tr.delete(n.from,n.to).setBlockType(n.from,n.from,e.type,i)},undoable:e.undoable})}function xke(e){return new OCe({find:e.find,handler:({state:t,range:n,match:r,chain:s})=>{const i=JMe(e.getAttributes,void 0,r)||{},a=t.tr.delete(n.from,n.to),o=a.doc.resolve(n.from).blockRange(),l=o&&tje(o,e.type,i);if(!l)return null;if(a.wrap(o,l),e.keepMarks&&e.editor){const{selection:n,storedMarks:r}=t,{splittableMarks:s}=e.editor.extensionManager,i=r||n.$to.parentOffset&&n.$from.marks();if(i){const e=i.filter(e=>s.includes(e.type.name));a.ensureMarks(e)}}if(e.keepAttributes){const t="bulletList"===e.type.name||"orderedList"===e.type.name?"listItem":"taskList";s().updateAttributes(t,i).run()}const c=a.doc.resolve(n.from-1).nodeBefore;c&&c.type===e.type&&aje(a.doc,n.from-1)&&(!e.joinPredicate||e.joinPredicate(r,c))&&a.join(n.from-1)},undoable:e.undoable})}var vke=class e extends LCe{constructor(){super(...arguments),this.type="node"}static create(t={}){const n="function"==typeof t?t():t;return new e(n)}configure(e){return super.configure(e)}extend(e){const t="function"==typeof e?e():e;return super.extend(t)}};function yke(e){return new zCe({find:e.find,handler:({state:t,range:n,match:r,pasteEvent:s})=>{const i=JMe(e.getAttributes,void 0,r,s);if(!1===i||null===i)return null;const{tr:a}=t,o=r[r.length-1],l=r[0];let c=n.to;if(o){const r=l.search(/\S/),s=n.from+l.indexOf(o),d=s+o.length;if(wCe(n.from,n.to,t.doc).filter(t=>t.mark.type.excluded.find(n=>n===e.type&&n!==t.mark.type)).filter(e=>e.to>s).length)return null;d<n.to&&a.delete(d,n.to),s>n.from&&a.delete(n.from+r,s),c=n.from+r+o.length,a.addMark(n.from+r,c,e.type.create(i||{})),a.removeStoredMark(e.type)}}})}var bke=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,s,i;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(s=r;0!==s--;)if(!e(t[s],n[s]))return!1;return!0}if(t instanceof Map&&n instanceof Map){if(t.size!==n.size)return!1;for(s of t.entries())if(!n.has(s[0]))return!1;for(s of t.entries())if(!e(s[1],n.get(s[0])))return!1;return!0}if(t instanceof Set&&n instanceof Set){if(t.size!==n.size)return!1;for(s of t.entries())if(!n.has(s[0]))return!1;return!0}if(ArrayBuffer.isView(t)&&ArrayBuffer.isView(n)){if((r=t.length)!=n.length)return!1;for(s=r;0!==s--;)if(t[s]!==n[s])return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(i=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(s=r;0!==s--;)if(!Object.prototype.hasOwnProperty.call(n,i[s]))return!1;for(s=r;0!==s--;){var a=i[s];if(("_owner"!==a||!t.$$typeof)&&!e(t[a],n[a]))return!1}return!0}return t!=t&&n!=n};const wke=mn(bke);var jke={exports:{}},Nke={},_ke=hn,Ske=ua;var Mke="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},Cke=Ske.useSyncExternalStore,Eke=_ke.useRef,kke=_ke.useEffect,Ake=_ke.useMemo,Tke=_ke.useDebugValue;Nke.useSyncExternalStoreWithSelector=function(e,t,n,r,s){var i=Eke(null);if(null===i.current){var a={hasValue:!1,value:null};i.current=a}else a=i.current;i=Ake(function(){function e(e){if(!l){if(l=!0,i=e,e=r(e),void 0!==s&&a.hasValue){var t=a.value;if(s(t,e))return o=t}return o=e}if(t=o,Mke(i,e))return t;var n=r(e);return void 0!==s&&s(t,n)?(i=e,t):(i=e,o=n)}var i,o,l=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]},[t,n,r,s]);var o=Cke(e,i[0],i[1]);return kke(function(){a.hasValue=!0,a.value=o},[o]),Tke(o),o},jke.exports=Nke;var Pke=jke.exports,Oke=(...e)=>t=>{e.forEach(e=>{"function"==typeof e?e(t):e&&(e.current=t)})},Rke=({contentComponent:e})=>{const t=ua.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getServerSnapshot);return Ot.jsx(Ot.Fragment,{children:Object.values(t)})};var Ike=class extends fn.Component{constructor(e){var t;super(e),this.editorContentRef=fn.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:Boolean(null==(t=e.editor)?void 0:t.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const t=this.editorContentRef.current;t.append(e.view.dom),e.setOptions({element:t}),e.contentComponent=function(){const e=new Set;let t={};return{subscribe:t=>(e.add(t),()=>{e.delete(t)}),getSnapshot:()=>t,getServerSnapshot:()=>t,setRenderer(n,r){t={...t,[n]:vn.createPortal(r.reactElement,r.element,n)},e.forEach(e=>e())},removeRenderer(n){const r={...t};delete r[n],t=r,e.forEach(e=>e())}}}(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(e=>e.hasContentComponentInitialized?e:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var e;const t=this.props.editor;if(t){this.initialized=!1,t.isDestroyed||t.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),t.contentComponent=null;try{if(!(null==(e=t.view.dom)?void 0:e.firstChild))return;const n=document.createElement("div");n.append(t.view.dom),t.setOptions({element:n})}catch{}}}render(){const{editor:e,innerRef:t,...n}=this.props;return Ot.jsxs(Ot.Fragment,{children:[Ot.jsx("div",{ref:Oke(t,this.editorContentRef),...n}),(null==e?void 0:e.contentComponent)&&Ot.jsx(Rke,{contentComponent:e.contentComponent})]})}},Dke=hn.forwardRef((e,t)=>{const n=fn.useMemo(()=>Math.floor(4294967295*Math.random()).toString(),[e.editor]);return fn.createElement(Ike,{key:n,innerRef:t,...e})}),Lke=fn.memo(Dke),Fke="undefined"!=typeof window?hn.useLayoutEffect:hn.useEffect,zke=class{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber||(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber}),this.lastSnapshot}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const e=()=>{this.transactionNumber+=1,this.subscribers.forEach(e=>e())},t=this.editor;return t.on("transaction",e),()=>{t.off("transaction",e)}}}};var Bke="undefined"==typeof window,Uke=Bke||Boolean("undefined"!=typeof window&&window.next),Vke=class e{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(e=>e())}getInitialEditor(){return void 0===this.options.current.immediatelyRender?Bke||Uke?null:this.createEditor():this.options.current.immediatelyRender?this.createEditor():null}createEditor(){const e={...this.options.current,onBeforeCreate:(...e)=>{var t,n;return null==(n=(t=this.options.current).onBeforeCreate)?void 0:n.call(t,...e)},onBlur:(...e)=>{var t,n;return null==(n=(t=this.options.current).onBlur)?void 0:n.call(t,...e)},onCreate:(...e)=>{var t,n;return null==(n=(t=this.options.current).onCreate)?void 0:n.call(t,...e)},onDestroy:(...e)=>{var t,n;return null==(n=(t=this.options.current).onDestroy)?void 0:n.call(t,...e)},onFocus:(...e)=>{var t,n;return null==(n=(t=this.options.current).onFocus)?void 0:n.call(t,...e)},onSelectionUpdate:(...e)=>{var t,n;return null==(n=(t=this.options.current).onSelectionUpdate)?void 0:n.call(t,...e)},onTransaction:(...e)=>{var t,n;return null==(n=(t=this.options.current).onTransaction)?void 0:n.call(t,...e)},onUpdate:(...e)=>{var t,n;return null==(n=(t=this.options.current).onUpdate)?void 0:n.call(t,...e)},onContentError:(...e)=>{var t,n;return null==(n=(t=this.options.current).onContentError)?void 0:n.call(t,...e)},onDrop:(...e)=>{var t,n;return null==(n=(t=this.options.current).onDrop)?void 0:n.call(t,...e)},onPaste:(...e)=>{var t,n;return null==(n=(t=this.options.current).onPaste)?void 0:n.call(t,...e)},onDelete:(...e)=>{var t,n;return null==(n=(t=this.options.current).onDelete)?void 0:n.call(t,...e)}};return new pke(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,t){return Object.keys(e).every(n=>!!["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(n)||("extensions"===n&&e.extensions&&t.extensions?e.extensions.length===t.extensions.length&&e.extensions.every((e,n)=>{var r;return e===(null==(r=t.extensions)?void 0:r[n])}):e[n]===t[n]))}onRender(t){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&0===t.length?e.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(t),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(null===this.previousDeps)return void(this.previousDeps=e);if(this.previousDeps.length===e.length&&this.previousDeps.every((t,n)=>t===e[n]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,t=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{this.isComponentMounted&&this.instanceId===e?t&&t.setOptions(this.options.current):t&&!t.isDestroyed&&(t.destroy(),this.instanceId===e&&this.setEditor(null))},1)}};function Hke(e={},t=[]){const n=hn.useRef(e);n.current=e;const[r]=hn.useState(()=>new Vke(n)),s=ua.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return hn.useDebugValue(s),hn.useEffect(r.onRender(t)),function(e){var t;const[n]=hn.useState(()=>new zke(e.editor)),r=Pke.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,e.selector,null!=(t=e.equalityFn)?t:wke);Fke(()=>n.watch(e.editor),[e.editor,n]),hn.useDebugValue(r)}({editor:s,selector:({transactionNumber:t})=>!1===e.shouldRerenderOnTransaction||void 0===e.shouldRerenderOnTransaction?null:e.immediatelyRender&&0===t?0:t+1}),s}hn.createContext({editor:null});var Wke=hn.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}});fn.forwardRef((e,t)=>{const{onDragStart:n}=hn.useContext(Wke),r=e.as||"div";return Ot.jsx(r,{...e,ref:t,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...e.style}})}),fn.createContext({markViewContentRef:()=>{}});var $ke=(e,t)=>{if("slot"===e)return 0;if(e instanceof Function)return e(t);const{children:n,...r}=null!=t?t:{};if("svg"===e)throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[e,r,n]},Gke=/^\s*>\s$/,qke=vke.create({name:"blockquote",addOptions:()=>({HTMLAttributes:{}}),content:"block+",group:"block",defining:!0,parseHTML:()=>[{tag:"blockquote"}],renderHTML({HTMLAttributes:e}){return $ke("blockquote",{...tCe(this.options.HTMLAttributes,e),children:$ke("slot",{})})},addCommands(){return{setBlockquote:()=>({commands:e})=>e.wrapIn(this.name),toggleBlockquote:()=>({commands:e})=>e.toggleWrap(this.name),unsetBlockquote:()=>({commands:e})=>e.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[xke({find:Gke,type:this.type})]}}),Xke=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,Kke=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,Yke=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,Zke=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,Jke=FCe.create({name:"bold",addOptions:()=>({HTMLAttributes:{}}),parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:e=>"normal"!==e.style.fontWeight&&null},{style:"font-weight=400",clearMark:e=>e.type.name===this.name},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}]},renderHTML({HTMLAttributes:e}){return $ke("strong",{...tCe(this.options.HTMLAttributes,e),children:$ke("slot",{})})},addCommands(){return{setBold:()=>({commands:e})=>e.setMark(this.name),toggleBold:()=>({commands:e})=>e.toggleMark(this.name),unsetBold:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[mke({find:Xke,type:this.type}),mke({find:Yke,type:this.type})]},addPasteRules(){return[yke({find:Kke,type:this.type}),yke({find:Zke,type:this.type})]}}),Qke=/(^|[^`])`([^`]+)`(?!`)$/,eAe=/(^|[^`])`([^`]+)`(?!`)/g,tAe=FCe.create({name:"code",addOptions:()=>({HTMLAttributes:{}}),excludes:"_",code:!0,exitable:!0,parseHTML:()=>[{tag:"code"}],renderHTML({HTMLAttributes:e}){return["code",tCe(this.options.HTMLAttributes,e),0]},addCommands(){return{setCode:()=>({commands:e})=>e.setMark(this.name),toggleCode:()=>({commands:e})=>e.toggleMark(this.name),unsetCode:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[mke({find:Qke,type:this.type})]},addPasteRules(){return[yke({find:eAe,type:this.type})]}}),nAe=/^```([a-z]+)?[\s\n]$/,rAe=/^~~~([a-z]+)?[\s\n]$/,sAe=vke.create({name:"codeBlock",addOptions:()=>({languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:4,HTMLAttributes:{}}),content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:e=>{var t;const{languageClassPrefix:n}=this.options;if(!n)return null;const r=[...(null==(t=e.firstElementChild)?void 0:t.classList)||[]].filter(e=>e.startsWith(n)).map(e=>e.replace(n,""))[0];return r||null},rendered:!1}}},parseHTML:()=>[{tag:"pre",preserveWhitespace:"full"}],renderHTML({node:e,HTMLAttributes:t}){return["pre",tCe(this.options.HTMLAttributes,t),["code",{class:e.attrs.language?this.options.languageClassPrefix+e.attrs.language:null},0]]},addCommands(){return{setCodeBlock:e=>({commands:t})=>t.setNode(this.name,e),toggleCodeBlock:e=>({commands:t})=>t.toggleNode(this.name,"paragraph",e)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:e,$anchor:t}=this.editor.state.selection,n=1===t.pos;return!(!e||t.parent.type.name!==this.name)&&(!(!n&&t.parent.textContent.length)&&this.editor.commands.clearNodes())},Tab:({editor:e})=>{var t;if(!this.options.enableTabIndentation)return!1;const n=null!=(t=this.options.tabSize)?t:4,{state:r}=e,{selection:s}=r,{$from:i,empty:a}=s;if(i.parent.type!==this.type)return!1;const o=" ".repeat(n);return a?e.commands.insertContent(o):e.commands.command(({tr:e})=>{const{from:t,to:n}=s,i=r.doc.textBetween(t,n,"\n","\n").split("\n").map(e=>o+e).join("\n");return e.replaceWith(t,n,r.schema.text(i)),!0})},"Shift-Tab":({editor:e})=>{var t;if(!this.options.enableTabIndentation)return!1;const n=null!=(t=this.options.tabSize)?t:4,{state:r}=e,{selection:s}=r,{$from:i,empty:a}=s;return i.parent.type===this.type&&(a?e.commands.command(({tr:e})=>{var t;const{pos:s}=i,a=i.start(),o=i.end(),l=r.doc.textBetween(a,o,"\n","\n").split("\n");let c=0,d=0;const u=s-a;for(let n=0;n<l.length;n+=1){if(d+l[n].length>=u){c=n;break}d+=l[n].length+1}const h=(null==(t=l[c].match(/^ */))?void 0:t[0])||"",p=Math.min(h.length,n);if(0===p)return!0;let m=a;for(let n=0;n<c;n+=1)m+=l[n].length+1;e.delete(m,m+p);return s-m<=p&&e.setSelection(Aje.create(e.doc,m)),!0}):e.commands.command(({tr:e})=>{const{from:t,to:i}=s,a=r.doc.textBetween(t,i,"\n","\n").split("\n").map(e=>{var t;const r=(null==(t=e.match(/^ */))?void 0:t[0])||"",s=Math.min(r.length,n);return e.slice(s)}).join("\n");return e.replaceWith(t,i,r.schema.text(a)),!0}))},Enter:({editor:e})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:t}=e,{selection:n}=t,{$from:r,empty:s}=n;if(!s||r.parent.type!==this.type)return!1;const i=r.parentOffset===r.parent.nodeSize-2,a=r.parent.textContent.endsWith("\n\n");return!(!i||!a)&&e.chain().command(({tr:e})=>(e.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:e})=>{if(!this.options.exitOnArrowDown)return!1;const{state:t}=e,{selection:n,doc:r}=t,{$from:s,empty:i}=n;if(!i||s.parent.type!==this.type)return!1;if(!(s.parentOffset===s.parent.nodeSize-2))return!1;const a=s.after();if(void 0===a)return!1;return r.nodeAt(a)?e.commands.command(({tr:e})=>(e.setSelection(Mje.near(r.resolve(a))),!0)):e.commands.exitCode()}}},addInputRules(){return[gke({find:nAe,type:this.type,getAttributes:e=>({language:e[1]})}),gke({find:rAe,type:this.type,getAttributes:e=>({language:e[1]})})]},addProseMirrorPlugins(){return[new $je({key:new Xje("codeBlockVSCodeHandler"),props:{handlePaste:(e,t)=>{if(!t.clipboardData)return!1;if(this.editor.isActive(this.type.name))return!1;const n=t.clipboardData.getData("text/plain"),r=t.clipboardData.getData("vscode-editor-data"),s=r?JSON.parse(r):void 0,i=null==s?void 0:s.mode;if(!n||!i)return!1;const{tr:a,schema:o}=e.state,l=o.text(n.replace(/\r\n?/g,"\n"));return a.replaceSelectionWith(this.type.create({language:i},l)),a.selection.$from.parent.type!==this.type&&a.setSelection(Aje.near(a.doc.resolve(Math.max(0,a.selection.from-2)))),a.setMeta("paste",!0),e.dispatch(a),!0}}})]}}),iAe=sAe,aAe=vke.create({name:"doc",topNode:!0,content:"block+"}),oAe=vke.create({name:"hardBreak",addOptions:()=>({keepMarks:!0,HTMLAttributes:{}}),inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML:()=>[{tag:"br"}],renderHTML({HTMLAttributes:e}){return["br",tCe(this.options.HTMLAttributes,e)]},renderText:()=>"\n",addCommands(){return{setHardBreak:()=>({commands:e,chain:t,state:n,editor:r})=>e.first([()=>e.exitCode(),()=>e.command(()=>{const{selection:e,storedMarks:s}=n;if(e.$from.parent.type.spec.isolating)return!1;const{keepMarks:i}=this.options,{splittableMarks:a}=r.extensionManager,o=s||e.$to.parentOffset&&e.$from.marks();return t().insertContent({type:this.name}).command(({tr:e,dispatch:t})=>{if(t&&o&&i){const t=o.filter(e=>a.includes(e.type.name));e.ensureMarks(t)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),lAe=vke.create({name:"heading",addOptions:()=>({levels:[1,2,3,4,5,6],HTMLAttributes:{}}),content:"inline*",group:"block",defining:!0,addAttributes:()=>({level:{default:1,rendered:!1}}),parseHTML(){return this.options.levels.map(e=>({tag:`h${e}`,attrs:{level:e}}))},renderHTML({node:e,HTMLAttributes:t}){return[`h${this.options.levels.includes(e.attrs.level)?e.attrs.level:this.options.levels[0]}`,tCe(this.options.HTMLAttributes,t),0]},addCommands(){return{setHeading:e=>({commands:t})=>!!this.options.levels.includes(e.level)&&t.setNode(this.name,e),toggleHeading:e=>({commands:t})=>!!this.options.levels.includes(e.level)&&t.toggleNode(this.name,"paragraph",e)}},addKeyboardShortcuts(){return this.options.levels.reduce((e,t)=>({...e,[`Mod-Alt-${t}`]:()=>this.editor.commands.toggleHeading({level:t})}),{})},addInputRules(){return this.options.levels.map(e=>gke({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${e}})\\s$`),type:this.type,getAttributes:{level:e}}))}}),cAe=vke.create({name:"horizontalRule",addOptions:()=>({HTMLAttributes:{},nextNodeType:"paragraph"}),group:"block",parseHTML:()=>[{tag:"hr"}],renderHTML({HTMLAttributes:e}){return["hr",tCe(this.options.HTMLAttributes,e)]},addCommands(){return{setHorizontalRule:()=>({chain:e,state:t})=>{if(!function(e,t){const{selection:n}=e,{$from:r}=n;if(n instanceof Pje){const e=r.index();return r.parent.canReplaceWith(e,e+1,t)}let s=r.depth;for(;s>=0;){const e=r.index(s);if(r.node(s).contentMatchAt(e).matchType(t))return!0;s-=1}return!1}(t,t.schema.nodes[this.name]))return!1;const{selection:n}=t,{$to:r}=n,s=e();return kCe(n)?s.insertContentAt(r.pos,{type:this.name}):s.insertContent({type:this.name}),s.command(({state:e,tr:t,dispatch:n})=>{if(n){const{$to:n}=t.selection,r=n.end();if(n.nodeAfter)n.nodeAfter.isTextblock?t.setSelection(Aje.create(t.doc,n.pos+1)):n.nodeAfter.isBlock?t.setSelection(Pje.create(t.doc,n.pos)):t.setSelection(Aje.create(t.doc,n.pos));else{const s=e.schema.nodes[this.options.nextNodeType]||n.parent.type.contentMatch.defaultType,i=null==s?void 0:s.create();i&&(t.insert(r,i),t.setSelection(Aje.create(t.doc,r+1)))}t.scrollIntoView()}return!0}).run()}}},addInputRules(){return[fke({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),dAe=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,uAe=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,hAe=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,pAe=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,mAe=FCe.create({name:"italic",addOptions:()=>({HTMLAttributes:{}}),parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:e=>"normal"!==e.style.fontStyle&&null},{style:"font-style=normal",clearMark:e=>e.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:e}){return["em",tCe(this.options.HTMLAttributes,e),0]},addCommands(){return{setItalic:()=>({commands:e})=>e.setMark(this.name),toggleItalic:()=>({commands:e})=>e.toggleMark(this.name),unsetItalic:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[mke({find:dAe,type:this.type}),mke({find:hAe,type:this.type})]},addPasteRules(){return[yke({find:uAe,type:this.type}),yke({find:pAe,type:this.type})]}});const fAe="numeric",gAe="ascii",xAe="alpha",vAe="asciinumeric",yAe="alphanumeric",bAe="domain",wAe="emoji",jAe="scheme",NAe="slashscheme",_Ae="whitespace";function SAe(e,t){return e in t||(t[e]=[]),t[e]}function MAe(e,t,n){t[fAe]&&(t[vAe]=!0,t[yAe]=!0),t[gAe]&&(t[vAe]=!0,t[xAe]=!0),t[vAe]&&(t[yAe]=!0),t[xAe]&&(t[yAe]=!0),t[yAe]&&(t[bAe]=!0),t[wAe]&&(t[bAe]=!0);for(const r in t){const t=SAe(r,n);t.indexOf(e)<0&&t.push(e)}}function CAe(e=null){this.j={},this.jr=[],this.jd=null,this.t=e}CAe.groups={},CAe.prototype={accepts(){return!!this.t},go(e){const t=this,n=t.j[e];if(n)return n;for(let r=0;r<t.jr.length;r++){const n=t.jr[r][0],s=t.jr[r][1];if(s&&n.test(e))return s}return t.jd},has(e,t=!1){return t?e in this.j:!!this.go(e)},ta(e,t,n,r){for(let s=0;s<e.length;s++)this.tt(e[s],t,n,r)},tr(e,t,n,r){let s;return r=r||CAe.groups,t&&t.j?s=t:(s=new CAe(t),n&&r&&MAe(t,n,r)),this.jr.push([e,s]),s},ts(e,t,n,r){let s=this;const i=e.length;if(!i)return s;for(let a=0;a<i-1;a++)s=s.tt(e[a]);return s.tt(e[i-1],t,n,r)},tt(e,t,n,r){r=r||CAe.groups;const s=this;if(t&&t.j)return s.j[e]=t,t;const i=t;let a,o=s.go(e);if(o?(a=new CAe,Object.assign(a.j,o.j),a.jr.push.apply(a.jr,o.jr),a.jd=o.jd,a.t=o.t):a=new CAe,i){if(r)if(a.t&&"string"==typeof a.t){const e=Object.assign(function(e,t){const n={};for(const r in t)t[r].indexOf(e)>=0&&(n[r]=!0);return n}(a.t,r),n);MAe(i,e,r)}else n&&MAe(i,n,r);a.t=i}return s.j[e]=a,a}};const EAe=(e,t,n,r,s)=>e.ta(t,n,r,s),kAe=(e,t,n,r,s)=>e.tr(t,n,r,s),AAe=(e,t,n,r,s)=>e.ts(t,n,r,s),TAe=(e,t,n,r,s)=>e.tt(t,n,r,s),PAe="WORD",OAe="UWORD",RAe="ASCIINUMERICAL",IAe="ALPHANUMERICAL",DAe="LOCALHOST",LAe="TLD",FAe="UTLD",zAe="SCHEME",BAe="SLASH_SCHEME",UAe="NUM",VAe="WS",HAe="NL",WAe="OPENBRACE",$Ae="CLOSEBRACE",GAe="OPENBRACKET",qAe="CLOSEBRACKET",XAe="OPENPAREN",KAe="CLOSEPAREN",YAe="OPENANGLEBRACKET",ZAe="CLOSEANGLEBRACKET",JAe="FULLWIDTHLEFTPAREN",QAe="FULLWIDTHRIGHTPAREN",eTe="LEFTCORNERBRACKET",tTe="RIGHTCORNERBRACKET",nTe="LEFTWHITECORNERBRACKET",rTe="RIGHTWHITECORNERBRACKET",sTe="FULLWIDTHLESSTHAN",iTe="FULLWIDTHGREATERTHAN",aTe="AMPERSAND",oTe="APOSTROPHE",lTe="ASTERISK",cTe="AT",dTe="BACKSLASH",uTe="BACKTICK",hTe="CARET",pTe="COLON",mTe="COMMA",fTe="DOLLAR",gTe="DOT",xTe="EQUALS",vTe="EXCLAMATION",yTe="HYPHEN",bTe="PERCENT",wTe="PIPE",jTe="PLUS",NTe="POUND",_Te="QUERY",STe="QUOTE",MTe="FULLWIDTHMIDDLEDOT",CTe="SEMI",ETe="SLASH",kTe="TILDE",ATe="UNDERSCORE",TTe="EMOJI",PTe="SYM";var OTe=Object.freeze({__proto__:null,ALPHANUMERICAL:IAe,AMPERSAND:aTe,APOSTROPHE:oTe,ASCIINUMERICAL:RAe,ASTERISK:lTe,AT:cTe,BACKSLASH:dTe,BACKTICK:uTe,CARET:hTe,CLOSEANGLEBRACKET:ZAe,CLOSEBRACE:$Ae,CLOSEBRACKET:qAe,CLOSEPAREN:KAe,COLON:pTe,COMMA:mTe,DOLLAR:fTe,DOT:gTe,EMOJI:TTe,EQUALS:xTe,EXCLAMATION:vTe,FULLWIDTHGREATERTHAN:iTe,FULLWIDTHLEFTPAREN:JAe,FULLWIDTHLESSTHAN:sTe,FULLWIDTHMIDDLEDOT:MTe,FULLWIDTHRIGHTPAREN:QAe,HYPHEN:yTe,LEFTCORNERBRACKET:eTe,LEFTWHITECORNERBRACKET:nTe,LOCALHOST:DAe,NL:HAe,NUM:UAe,OPENANGLEBRACKET:YAe,OPENBRACE:WAe,OPENBRACKET:GAe,OPENPAREN:XAe,PERCENT:bTe,PIPE:wTe,PLUS:jTe,POUND:NTe,QUERY:_Te,QUOTE:STe,RIGHTCORNERBRACKET:tTe,RIGHTWHITECORNERBRACKET:rTe,SCHEME:zAe,SEMI:CTe,SLASH:ETe,SLASH_SCHEME:BAe,SYM:PTe,TILDE:kTe,TLD:LAe,UNDERSCORE:ATe,UTLD:FAe,UWORD:OAe,WORD:PAe,WS:VAe});const RTe=/[a-z]/,ITe=/\p{L}/u,DTe=/\p{Emoji}/u,LTe=/\d/,FTe=/\s/;let zTe=null,BTe=null;function UTe(e,t){const n=function(e){const t=[],n=e.length;let r=0;for(;r<n;){let s,i=e.charCodeAt(r),a=i<55296||i>56319||r+1===n||(s=e.charCodeAt(r+1))<56320||s>57343?e[r]:e.slice(r,r+2);t.push(a),r+=a.length}return t}(t.replace(/[A-Z]/g,e=>e.toLowerCase())),r=n.length,s=[];let i=0,a=0;for(;a<r;){let o=e,l=null,c=0,d=null,u=-1,h=-1;for(;a<r&&(l=o.go(n[a]));)o=l,o.accepts()?(u=0,h=0,d=o):u>=0&&(u+=n[a].length,h++),c+=n[a].length,i+=n[a].length,a++;i-=u,a-=h,c-=u,s.push({t:d.t,v:t.slice(i-c,i),s:i-c,e:i})}return s}function VTe(e,t,n,r,s){let i;const a=t.length;for(let o=0;o<a-1;o++){const n=t[o];e.j[n]?i=e.j[n]:(i=new CAe(r),i.jr=s.slice(),e.j[n]=i),e=i}return i=new CAe(n),i.jr=s.slice(),e.j[t[a-1]]=i,i}function HTe(e){const t=[],n=[];let r=0;for(;r<e.length;){let s=0;for(;"0123456789".indexOf(e[r+s])>=0;)s++;if(s>0){t.push(n.join(""));for(let t=parseInt(e.substring(r,r+s),10);t>0;t--)n.pop();r+=s}else n.push(e[r]),r++}return t}const WTe={defaultProtocol:"http",events:null,format:GTe,formatHref:GTe,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function $Te(e,t=null){let n=Object.assign({},WTe);e&&(n=Object.assign(n,e instanceof $Te?e.o:e));const r=n.ignoreTags,s=[];for(let i=0;i<r.length;i++)s.push(r[i].toUpperCase());this.o=n,t&&(this.defaultRender=t),this.ignoreTags=s}function GTe(e){return e}function qTe(e,t){this.t="token",this.v=e,this.tk=t}function XTe(e,t){class n extends qTe{constructor(t,n){super(t,n),this.t=e}}for(const r in t)n.prototype[r]=t[r];return n.t=e,n}$Te.prototype={o:WTe,ignoreTags:[],defaultRender:e=>e,check(e){return this.get("validate",e.toString(),e)},get(e,t,n){const r=null!=t;let s=this.o[e];return s?("object"==typeof s?(s=n.t in s?s[n.t]:WTe[e],"function"==typeof s&&r&&(s=s(t,n))):"function"==typeof s&&r&&(s=s(t,n.t,n)),s):s},getObj(e,t,n){let r=this.o[e];return"function"==typeof r&&null!=t&&(r=r(t,n.t,n)),r},render(e){const t=e.render(this);return(this.get("render",null,e)||this.defaultRender)(t,e.t,e)}},qTe.prototype={isLink:!1,toString(){return this.v},toHref(e){return this.toString()},toFormattedString(e){const t=this.toString(),n=e.get("truncate",t,this),r=e.get("format",t,this);return n&&r.length>n?r.substring(0,n)+"":r},toFormattedHref(e){return e.get("formatHref",this.toHref(e.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(e=WTe.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(e),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(e){return{type:this.t,value:this.toFormattedString(e),isLink:this.isLink,href:this.toFormattedHref(e),start:this.startIndex(),end:this.endIndex()}},validate(e){return e.get("validate",this.toString(),this)},render(e){const t=this,n=this.toHref(e.get("defaultProtocol")),r=e.get("formatHref",n,this),s=e.get("tagName",n,t),i=this.toFormattedString(e),a={},o=e.get("className",n,t),l=e.get("target",n,t),c=e.get("rel",n,t),d=e.getObj("attributes",n,t),u=e.getObj("events",n,t);return a.href=r,o&&(a.class=o),l&&(a.target=l),c&&(a.rel=c),d&&Object.assign(a,d),{tagName:s,attributes:a,content:i,eventListeners:u}}};const KTe=XTe("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),YTe=XTe("text"),ZTe=XTe("nl"),JTe=XTe("url",{isLink:!0,toHref(e=WTe.defaultProtocol){return this.hasProtocol()?this.v:`${e}://${this.v}`},hasProtocol(){const e=this.tk;return e.length>=2&&e[0].t!==DAe&&e[1].t===pTe}}),QTe=e=>new CAe(e);function ePe(e,t,n){const r=n[0].s,s=n[n.length-1].e;return new e(t.slice(r,s),n)}const tPe="undefined"!=typeof console&&console&&console.warn||(()=>{}),nPe={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function rPe(e,t=!1){if(nPe.initialized&&tPe(`linkifyjs: already initialized - will not register custom scheme "${e}" until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(e))throw new Error('linkifyjs: incorrect scheme format.\n1. Must only contain digits, lowercase ASCII letters or "-"\n2. Cannot start or end with "-"\n3. "-" cannot repeat');nPe.customSchemes.push([e,t])}function sPe(){nPe.scanner=function(e=[]){const t={};CAe.groups=t;const n=new CAe;null==zTe&&(zTe=HTe("aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2")),null==BTe&&(BTe=HTe("121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222")),TAe(n,"'",oTe),TAe(n,"{",WAe),TAe(n,"}",$Ae),TAe(n,"[",GAe),TAe(n,"]",qAe),TAe(n,"(",XAe),TAe(n,")",KAe),TAe(n,"<",YAe),TAe(n,">",ZAe),TAe(n,"",JAe),TAe(n,"",QAe),TAe(n,"",eTe),TAe(n,"",tTe),TAe(n,"",nTe),TAe(n,"",rTe),TAe(n,"",sTe),TAe(n,"",iTe),TAe(n,"&",aTe),TAe(n,"*",lTe),TAe(n,"@",cTe),TAe(n,"`",uTe),TAe(n,"^",hTe),TAe(n,":",pTe),TAe(n,",",mTe),TAe(n,"$",fTe),TAe(n,".",gTe),TAe(n,"=",xTe),TAe(n,"!",vTe),TAe(n,"-",yTe),TAe(n,"%",bTe),TAe(n,"|",wTe),TAe(n,"+",jTe),TAe(n,"#",NTe),TAe(n,"?",_Te),TAe(n,'"',STe),TAe(n,"/",ETe),TAe(n,";",CTe),TAe(n,"~",kTe),TAe(n,"_",ATe),TAe(n,"\\",dTe),TAe(n,"",MTe);const r=kAe(n,LTe,UAe,{[fAe]:!0});kAe(r,LTe,r);const s=kAe(r,RTe,RAe,{[vAe]:!0}),i=kAe(r,ITe,IAe,{[yAe]:!0}),a=kAe(n,RTe,PAe,{[gAe]:!0});kAe(a,LTe,s),kAe(a,RTe,a),kAe(s,LTe,s),kAe(s,RTe,s);const o=kAe(n,ITe,OAe,{[xAe]:!0});kAe(o,RTe),kAe(o,LTe,i),kAe(o,ITe,o),kAe(i,LTe,i),kAe(i,RTe),kAe(i,ITe,i);const l=TAe(n,"\n",HAe,{[_Ae]:!0}),c=TAe(n,"\r",VAe,{[_Ae]:!0}),d=kAe(n,FTe,VAe,{[_Ae]:!0});TAe(n,"",d),TAe(c,"\n",l),TAe(c,"",d),kAe(c,FTe,d),TAe(d,"\r"),TAe(d,"\n"),kAe(d,FTe,d),TAe(d,"",d);const u=kAe(n,DTe,TTe,{[wAe]:!0});TAe(u,"#"),kAe(u,DTe,u),TAe(u,"",u);const h=TAe(u,"");TAe(h,"#"),kAe(h,DTe,u);const p=[[RTe,a],[LTe,s]],m=[[RTe,null],[ITe,o],[LTe,i]];for(let f=0;f<zTe.length;f++)VTe(n,zTe[f],LAe,PAe,p);for(let f=0;f<BTe.length;f++)VTe(n,BTe[f],FAe,OAe,m);MAe(LAe,{tld:!0,ascii:!0},t),MAe(FAe,{utld:!0,alpha:!0},t),VTe(n,"file",zAe,PAe,p),VTe(n,"mailto",zAe,PAe,p),VTe(n,"http",BAe,PAe,p),VTe(n,"https",BAe,PAe,p),VTe(n,"ftp",BAe,PAe,p),VTe(n,"ftps",BAe,PAe,p),MAe(zAe,{scheme:!0,ascii:!0},t),MAe(BAe,{slashscheme:!0,ascii:!0},t),e=e.sort((e,t)=>e[0]>t[0]?1:-1);for(let f=0;f<e.length;f++){const t=e[f][0],r=e[f][1]?{[jAe]:!0}:{[NAe]:!0};t.indexOf("-")>=0?r[bAe]=!0:RTe.test(t)?LTe.test(t)?r[vAe]=!0:r[gAe]=!0:r[fAe]=!0,AAe(n,t,t,r)}return AAe(n,"localhost",DAe,{ascii:!0}),n.jd=new CAe(PTe),{start:n,tokens:Object.assign({groups:t},OTe)}}(nPe.customSchemes);for(let e=0;e<nPe.tokenQueue.length;e++)nPe.tokenQueue[e][1]({scanner:nPe.scanner});nPe.parser=function({groups:e}){const t=e.domain.concat([aTe,lTe,cTe,dTe,uTe,hTe,fTe,xTe,yTe,UAe,bTe,wTe,jTe,NTe,ETe,PTe,kTe,ATe]),n=[oTe,pTe,mTe,gTe,vTe,bTe,_Te,STe,CTe,YAe,ZAe,WAe,$Ae,qAe,GAe,XAe,KAe,JAe,QAe,eTe,tTe,nTe,rTe,sTe,iTe],r=[aTe,oTe,lTe,dTe,uTe,hTe,fTe,xTe,yTe,WAe,$Ae,bTe,wTe,jTe,NTe,_Te,ETe,PTe,kTe,ATe],s=QTe(),i=TAe(s,kTe);EAe(i,r,i),EAe(i,e.domain,i);const a=QTe(),o=QTe(),l=QTe();EAe(s,e.domain,a),EAe(s,e.scheme,o),EAe(s,e.slashscheme,l),EAe(a,r,i),EAe(a,e.domain,a);const c=TAe(a,cTe);TAe(i,cTe,c),TAe(o,cTe,c),TAe(l,cTe,c);const d=TAe(i,gTe);EAe(d,r,i),EAe(d,e.domain,i);const u=QTe();EAe(c,e.domain,u),EAe(u,e.domain,u);const h=TAe(u,gTe);EAe(h,e.domain,u);const p=QTe(KTe);EAe(h,e.tld,p),EAe(h,e.utld,p),TAe(c,DAe,p);const m=TAe(u,yTe);TAe(m,yTe,m),EAe(m,e.domain,u),EAe(p,e.domain,u),TAe(p,gTe,h),TAe(p,yTe,m);const f=TAe(p,pTe);EAe(f,e.numeric,KTe);const g=TAe(a,yTe),x=TAe(a,gTe);TAe(g,yTe,g),EAe(g,e.domain,a),EAe(x,r,i),EAe(x,e.domain,a);const v=QTe(JTe);EAe(x,e.tld,v),EAe(x,e.utld,v),EAe(v,e.domain,a),EAe(v,r,i),TAe(v,gTe,x),TAe(v,yTe,g),TAe(v,cTe,c);const y=TAe(v,pTe),b=QTe(JTe);EAe(y,e.numeric,b);const w=QTe(JTe),j=QTe();EAe(w,t,w),EAe(w,n,j),EAe(j,t,w),EAe(j,n,j),TAe(v,ETe,w),TAe(b,ETe,w);const N=TAe(o,pTe),_=TAe(l,pTe),S=TAe(_,ETe),M=TAe(S,ETe);EAe(o,e.domain,a),TAe(o,gTe,x),TAe(o,yTe,g),EAe(l,e.domain,a),TAe(l,gTe,x),TAe(l,yTe,g),EAe(N,e.domain,w),TAe(N,ETe,w),TAe(N,_Te,w),EAe(M,e.domain,w),EAe(M,t,w),TAe(M,ETe,w);const C=[[WAe,$Ae],[GAe,qAe],[XAe,KAe],[YAe,ZAe],[JAe,QAe],[eTe,tTe],[nTe,rTe],[sTe,iTe]];for(let E=0;E<C.length;E++){const[e,r]=C[E],s=TAe(w,e);TAe(j,e,s),TAe(s,r,w);const i=QTe(JTe);EAe(s,t,i);const a=QTe();EAe(s,n),EAe(i,t,i),EAe(i,n,a),EAe(a,t,i),EAe(a,n,a),TAe(i,r,w),TAe(a,r,w)}return TAe(s,DAe,v),TAe(s,HAe,ZTe),{start:s,tokens:OTe}}(nPe.scanner.tokens);for(let e=0;e<nPe.pluginQueue.length;e++)nPe.pluginQueue[e][1]({scanner:nPe.scanner,parser:nPe.parser});return nPe.initialized=!0,nPe}function iPe(e){return nPe.initialized||sPe(),function(e,t,n){let r=n.length,s=0,i=[],a=[];for(;s<r;){let o=e,l=null,c=null,d=0,u=null,h=-1;for(;s<r&&!(l=o.go(n[s].t));)a.push(n[s++]);for(;s<r&&(c=l||o.go(n[s].t));)l=null,o=c,o.accepts()?(h=0,u=o):h>=0&&h++,s++,d++;if(h<0)s-=d,s<r&&(a.push(n[s]),s++);else{a.length>0&&(i.push(ePe(YTe,t,a)),a=[]),s-=h,d-=h;const e=u.t,r=n.slice(s-d,s);i.push(ePe(e,t,r))}}return a.length>0&&i.push(ePe(YTe,t,a)),i}(nPe.parser.start,e,UTe(nPe.scanner.start,e))}function aPe(e,t=null,n=null){if(t&&"object"==typeof t){if(n)throw Error(`linkifyjs: Invalid link type ${t}; must be a string`);n=t,t=null}const r=new $Te(n),s=iPe(e),i=[];for(let a=0;a<s.length;a++){const e=s[a];!e.isLink||t&&e.t!==t||!r.check(e)||i.push(e.toFormattedObject(r))}return i}iPe.scan=UTe;var oPe="[\0- -\u2029]",lPe=new RegExp(oPe),cPe=new RegExp(`${oPe}$`),dPe=new RegExp(oPe,"g");function uPe(e,t){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return t&&t.forEach(e=>{const t="string"==typeof e?e:e.scheme;t&&n.push(t)}),!e||e.replace(dPe,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var hPe=FCe.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate),this.options.protocols.forEach(e=>{"string"!=typeof e?rPe(e.scheme,e.optionalSlashes):rPe(e)})},onDestroy(){CAe.groups={},nPe.scanner=null,nPe.parser=null,nPe.tokenQueue=[],nPe.pluginQueue=[],nPe.customSchemes=[],nPe.initialized=!1},inclusive(){return this.options.autolink},addOptions:()=>({openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(e,t)=>!!uPe(e,t.protocols),validate:e=>!!e,shouldAutoLink:e=>!!e}),addAttributes(){return{href:{default:null,parseHTML:e=>e.getAttribute("href")},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:e=>{const t=e.getAttribute("href");return!(!t||!this.options.isAllowedUri(t,{defaultValidate:e=>!!uPe(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol}))&&null}}]},renderHTML({HTMLAttributes:e}){return this.options.isAllowedUri(e.href,{defaultValidate:e=>!!uPe(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",tCe(this.options.HTMLAttributes,e),0]:["a",tCe(this.options.HTMLAttributes,{...e,href:""}),0]},addCommands(){return{setLink:e=>({chain:t})=>{const{href:n}=e;return!!this.options.isAllowedUri(n,{defaultValidate:e=>!!uPe(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})&&t().setMark(this.name,e).setMeta("preventAutolink",!0).run()},toggleLink:e=>({chain:t})=>{const{href:n}=e||{};return!(n&&!this.options.isAllowedUri(n,{defaultValidate:e=>!!uPe(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol}))&&t().toggleMark(this.name,e,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:e})=>e().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[yke({find:e=>{const t=[];if(e){const{protocols:n,defaultProtocol:r}=this.options,s=aPe(e).filter(e=>e.isLink&&this.options.isAllowedUri(e.value,{defaultValidate:e=>!!uPe(e,n),protocols:n,defaultProtocol:r}));s.length&&s.forEach(e=>t.push({text:e.value,data:{href:e.href},index:e.start}))}return t},type:this.type,getAttributes:e=>{var t;return{href:null==(t=e.data)?void 0:t.href}}})]},addProseMirrorPlugins(){const e=[],{protocols:t,defaultProtocol:n}=this.options;var r;return this.options.autolink&&e.push((r={type:this.type,defaultProtocol:this.options.defaultProtocol,validate:e=>this.options.isAllowedUri(e,{defaultValidate:e=>!!uPe(e,t),protocols:t,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink},new $je({key:new Xje("autolink"),appendTransaction:(e,t,n)=>{const s=e.some(e=>e.docChanged)&&!t.doc.eq(n.doc),i=e.some(e=>e.getMeta("preventAutolink"));if(!s||i)return;const{tr:a}=n;return fCe(UMe(t.doc,[...e])).forEach(({newRange:e})=>{const t=function(e,t,n){const r=[];return e.nodesBetween(t.from,t.to,(e,t)=>{n(e)&&r.push({node:e,pos:t})}),r}(n.doc,e,e=>e.isTextblock);let s,i;if(t.length>1)s=t[0],i=n.doc.textBetween(s.pos,s.pos+s.node.nodeSize,void 0," ");else if(t.length){const r=n.doc.textBetween(e.from,e.to," "," ");if(!cPe.test(r))return;s=t[0],i=n.doc.textBetween(s.pos,e.to,void 0," ")}if(s&&i){const e=i.split(lPe).filter(Boolean);if(e.length<=0)return!1;const t=e[e.length-1],l=s.pos+i.lastIndexOf(t);if(!t)return!1;const c=iPe(t).map(e=>e.toObject(r.defaultProtocol));if(!(1===(o=c).length?o[0].isLink:3===o.length&&o[1].isLink&&["()","[]"].includes(o[0].value+o[2].value)))return!1;c.filter(e=>e.isLink).map(e=>({...e,from:l+e.start+1,to:l+e.end+1})).filter(e=>!n.schema.marks.code||!n.doc.rangeHasMark(e.from,e.to,n.schema.marks.code)).filter(e=>r.validate(e.value)).filter(e=>r.shouldAutoLink(e.value)).forEach(e=>{wCe(e.from,e.to,n.doc).some(e=>e.mark.type===r.type)||a.addMark(e.from,e.to,r.type.create({href:e.href}))})}var o}),a.steps.length?a:void 0}}))),!0===this.options.openOnClick&&e.push(function(e){return new $je({key:new Xje("handleClickLink"),props:{handleClick:(t,n,r)=>{var s,i;if(0!==r.button)return!1;if(!t.editable)return!1;let a=null;if(r.target instanceof HTMLAnchorElement)a=r.target;else{let e=r.target;const t=[];for(;"DIV"!==e.nodeName;)t.push(e),e=e.parentNode;a=t.find(e=>"A"===e.nodeName)}if(!a)return!1;const o=pCe(t.state,e.type.name),l=null!=(s=null==a?void 0:a.href)?s:o.href,c=null!=(i=null==a?void 0:a.target)?i:o.target;return e.enableClickSelection&&e.editor.commands.extendMarkRange(e.type.name),!(!a||!l||(window.open(l,c),0))}}})}({type:this.type,editor:this.editor,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&e.push(function(e){return new $je({key:new Xje("handlePasteLink"),props:{handlePaste:(t,n,r)=>{const{state:s}=t,{selection:i}=s,{empty:a}=i;if(a)return!1;let o="";r.content.forEach(e=>{o+=e.textContent});const l=aPe(o,{defaultProtocol:e.defaultProtocol}).find(e=>e.isLink&&e.value===o);return!(!o||!l)&&e.editor.commands.setMark(e.type,{href:l.href})}}})}({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),e}}),pPe=hPe,mPe=Object.defineProperty,fPe="textStyle",gPe=/^\s*([-+*])\s$/,xPe=vke.create({name:"bulletList",addOptions:()=>({itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}),group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML:()=>[{tag:"ul"}],renderHTML({HTMLAttributes:e}){return["ul",tCe(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleBulletList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes("listItem",this.editor.getAttributes(fPe)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let e=xke({find:gPe,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(e=xke({find:gPe,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(fPe),editor:this.editor})),[e]}}),vPe=vke.create({name:"listItem",addOptions:()=>({HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}),content:"paragraph block*",defining:!0,parseHTML:()=>[{tag:"li"}],renderHTML({HTMLAttributes:e}){return["li",tCe(this.options.HTMLAttributes,e),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}});((e,t)=>{for(var n in t)mPe(e,n,{get:t[n],enumerable:!0})})({},{findListItemPos:()=>yPe,getNextListDepth:()=>bPe,handleBackspace:()=>_Pe,handleDelete:()=>CPe,hasListBefore:()=>wPe,hasListItemAfter:()=>EPe,hasListItemBefore:()=>jPe,listItemHasSubList:()=>NPe,nextListIsDeeper:()=>SPe,nextListIsHigher:()=>MPe});var yPe=(e,t)=>{const{$from:n}=t.selection,r=uCe(e,t.schema);let s=null,i=n.depth,a=n.pos,o=null;for(;i>0&&null===o;)s=n.node(i),s.type===r?o=i:(i-=1,a-=1);return null===o?null:{$pos:t.doc.resolve(a),depth:o}},bPe=(e,t)=>{const n=yPe(e,t);if(!n)return!1;const[,r]=((e,t,n,r=20)=>{const s=e.doc.resolve(n);let i=r,a=null;for(;i>0&&null===a;){const e=s.node(i);(null==e?void 0:e.type.name)===t?a=e:i-=1}return[a,i]})(t,e,n.$pos.pos+4);return r},wPe=(e,t,n)=>{const{$anchor:r}=e.selection,s=Math.max(0,r.pos-2),i=e.doc.resolve(s).node();return!(!i||!n.includes(i.type.name))},jPe=(e,t)=>{var n;const{$anchor:r}=t.selection,s=t.doc.resolve(r.pos-2);return 0!==s.index()&&(null==(n=s.nodeBefore)?void 0:n.type.name)===e},NPe=(e,t,n)=>{if(!n)return!1;const r=uCe(e,t.schema);let s=!1;return n.descendants(e=>{e.type===r&&(s=!0)}),s},_Pe=(e,t,n)=>{if(e.commands.undoInputRule())return!0;if(e.state.selection.from!==e.state.selection.to)return!1;if(!SCe(e.state,t)&&wPe(e.state,t,n)){const{$anchor:n}=e.state.selection,r=e.state.doc.resolve(n.before()-1),s=[];r.node().descendants((e,n)=>{e.type.name===t&&s.push({node:e,pos:n})});const i=s.at(-1);if(!i)return!1;const a=e.state.doc.resolve(r.start()+i.pos+1);return e.chain().cut({from:n.start()-1,to:n.end()+1},a.end()).joinForward().run()}if(!SCe(e.state,t))return!1;if(!(e=>{const{$from:t,$to:n}=e.selection;return!(t.parentOffset>0||t.pos!==n.pos)})(e.state))return!1;const r=yPe(t,e.state);if(!r)return!1;const s=e.state.doc.resolve(r.$pos.pos-2).node(r.depth),i=NPe(t,e.state,s);return jPe(t,e.state)&&!i?e.commands.joinItemBackward():e.chain().liftListItem(t).run()},SPe=(e,t)=>{const n=bPe(e,t),r=yPe(e,t);return!(!r||!n)&&n>r.depth},MPe=(e,t)=>{const n=bPe(e,t),r=yPe(e,t);return!(!r||!n)&&n<r.depth},CPe=(e,t)=>{if(!SCe(e.state,t))return!1;if(!((e,t)=>{const{$from:n,$to:r,$anchor:s}=e.selection;if(t){const n=qMe(e=>e.type.name===t)(e.selection);if(!n)return!1;const r=e.doc.resolve(n.pos+1);return s.pos+1===r.end()}return!(r.parentOffset<r.parent.nodeSize-2||n.pos!==r.pos)})(e.state,t))return!1;const{selection:n}=e.state,{$from:r,$to:s}=n;return!(!n.empty&&r.sameParent(s))&&(SPe(t,e.state)?e.chain().focus(e.state.selection.from+4).lift(t).joinBackward().run():MPe(t,e.state)?e.chain().joinForward().joinBackward().run():e.commands.joinItemForward())},EPe=(e,t)=>{var n;const{$anchor:r}=t.selection,s=t.doc.resolve(r.pos-r.parentOffset-2);return s.index()!==s.parent.childCount-1&&(null==(n=s.nodeAfter)?void 0:n.type.name)===e},kPe=WCe.create({name:"listKeymap",addOptions:()=>({listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}),addKeyboardShortcuts(){return{Delete:({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n})=>{void 0!==e.state.schema.nodes[n]&&CPe(e,n)&&(t=!0)}),t},"Mod-Delete":({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n})=>{void 0!==e.state.schema.nodes[n]&&CPe(e,n)&&(t=!0)}),t},Backspace:({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{void 0!==e.state.schema.nodes[n]&&_Pe(e,n,r)&&(t=!0)}),t},"Mod-Backspace":({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{void 0!==e.state.schema.nodes[n]&&_Pe(e,n,r)&&(t=!0)}),t}}}}),APe="textStyle",TPe=/^(\d+)\.\s$/,PPe=vke.create({name:"orderedList",addOptions:()=>({itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}),group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes:()=>({start:{default:1,parseHTML:e=>e.hasAttribute("start")?parseInt(e.getAttribute("start")||"",10):1},type:{default:null,parseHTML:e=>e.getAttribute("type")}}),parseHTML:()=>[{tag:"ol"}],renderHTML({HTMLAttributes:e}){const{start:t,...n}=e;return 1===t?["ol",tCe(this.options.HTMLAttributes,n),0]:["ol",tCe(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleOrderedList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes("listItem",this.editor.getAttributes(APe)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let e=xke({find:TPe,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(e=xke({find:TPe,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(APe)}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1],editor:this.editor})),[e]}}),OPe=/^\s*(\[([( |x])?\])\s$/,RPe=vke.create({name:"taskItem",addOptions:()=>({nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}),content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes:()=>({checked:{default:!1,keepOnSplit:!1,parseHTML:e=>{const t=e.getAttribute("data-checked");return""===t||"true"===t},renderHTML:e=>({"data-checked":e.checked})}}),parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:e,HTMLAttributes:t}){return["li",tCe(this.options.HTMLAttributes,t,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:e.attrs.checked?"checked":null}],["span"]],["div",0]]},addKeyboardShortcuts(){const e={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...e,Tab:()=>this.editor.commands.sinkListItem(this.name)}:e},addNodeView(){return({node:e,HTMLAttributes:t,getPos:n,editor:r})=>{const s=document.createElement("li"),i=document.createElement("label"),a=document.createElement("span"),o=document.createElement("input"),l=document.createElement("div"),c=e=>{var t,n;o.ariaLabel=(null==(n=null==(t=this.options.a11y)?void 0:t.checkboxLabel)?void 0:n.call(t,e,o.checked))||`Task item checkbox for ${e.textContent||"empty task item"}`};return c(e),i.contentEditable="false",o.type="checkbox",o.addEventListener("mousedown",e=>e.preventDefault()),o.addEventListener("change",t=>{if(!r.isEditable&&!this.options.onReadOnlyChecked)return void(o.checked=!o.checked);const{checked:s}=t.target;r.isEditable&&"function"==typeof n&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:e})=>{const t=n();if("number"!=typeof t)return!1;const r=e.doc.nodeAt(t);return e.setNodeMarkup(t,void 0,{...null==r?void 0:r.attrs,checked:s}),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(e,s)||(o.checked=!o.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([e,t])=>{s.setAttribute(e,t)}),s.dataset.checked=e.attrs.checked,o.checked=e.attrs.checked,i.append(o,a),s.append(i,l),Object.entries(t).forEach(([e,t])=>{s.setAttribute(e,t)}),{dom:s,contentDOM:l,update:e=>e.type===this.type&&(s.dataset.checked=e.attrs.checked,o.checked=e.attrs.checked,c(e),!0)}}},addInputRules(){return[xke({find:OPe,type:this.type,getAttributes:e=>({checked:"x"===e[e.length-1]})})]}}),IPe=vke.create({name:"taskList",addOptions:()=>({itemTypeName:"taskItem",HTMLAttributes:{}}),group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:e}){return["ul",tCe(this.options.HTMLAttributes,e,{"data-type":this.name}),0]},addCommands(){return{toggleTaskList:()=>({commands:e})=>e.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});WCe.create({name:"listKit",addExtensions(){const e=[];return!1!==this.options.bulletList&&e.push(xPe.configure(this.options.bulletList)),!1!==this.options.listItem&&e.push(vPe.configure(this.options.listItem)),!1!==this.options.listKeymap&&e.push(kPe.configure(this.options.listKeymap)),!1!==this.options.orderedList&&e.push(PPe.configure(this.options.orderedList)),!1!==this.options.taskItem&&e.push(RPe.configure(this.options.taskItem)),!1!==this.options.taskList&&e.push(IPe.configure(this.options.taskList)),e}});var DPe=vke.create({name:"paragraph",priority:1e3,addOptions:()=>({HTMLAttributes:{}}),group:"block",content:"inline*",parseHTML:()=>[{tag:"p"}],renderHTML({HTMLAttributes:e}){return["p",tCe(this.options.HTMLAttributes,e),0]},addCommands(){return{setParagraph:()=>({commands:e})=>e.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),LPe=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,FPe=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,zPe=FCe.create({name:"strike",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:e=>!!e.includes("line-through")&&{}}],renderHTML({HTMLAttributes:e}){return["s",tCe(this.options.HTMLAttributes,e),0]},addCommands(){return{setStrike:()=>({commands:e})=>e.setMark(this.name),toggleStrike:()=>({commands:e})=>e.toggleMark(this.name),unsetStrike:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[mke({find:LPe,type:this.type})]},addPasteRules(){return[yke({find:FPe,type:this.type})]}}),BPe=vke.create({name:"text",group:"inline"}),UPe=FCe.create({name:"underline",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:e=>!!e.includes("underline")&&{}}],renderHTML({HTMLAttributes:e}){return["u",tCe(this.options.HTMLAttributes,e),0]},addCommands(){return{setUnderline:()=>({commands:e})=>e.setMark(this.name),toggleUnderline:()=>({commands:e})=>e.toggleMark(this.name),unsetUnderline:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}});function VPe(e={}){return new $je({view:t=>new HPe(t,e)})}class HPe{constructor(e,t){var n;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=null!==(n=t.width)&&void 0!==n?n:1,this.color=!1===t.color?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(t=>{let n=e=>{this[t](e)};return e.dom.addEventListener(t,n),{name:t,handler:n}})}destroy(){this.handlers.forEach(({name:e,handler:t})=>this.editorView.dom.removeEventListener(e,t))}update(e,t){null!=this.cursorPos&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,null==e?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e,t=this.editorView.state.doc.resolve(this.cursorPos),n=!t.parent.inlineContent,r=this.editorView.dom,s=r.getBoundingClientRect(),i=s.width/r.offsetWidth,a=s.height/r.offsetHeight;if(n){let n=t.nodeBefore,r=t.nodeAfter;if(n||r){let t=this.editorView.nodeDOM(this.cursorPos-(n?n.nodeSize:0));if(t){let s=t.getBoundingClientRect(),i=n?s.bottom:s.top;n&&r&&(i=(i+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let o=this.width/2*a;e={left:s.left,right:s.right,top:i-o,bottom:i+o}}}}if(!e){let t=this.editorView.coordsAtPos(this.cursorPos),n=this.width/2*i;e={left:t.left-n,right:t.left+n,top:t.top,bottom:t.bottom}}let o,l,c=this.editorView.dom.offsetParent;if(this.element||(this.element=c.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n),!c||c==document.body&&"static"==getComputedStyle(c).position)o=-pageXOffset,l=-pageYOffset;else{let e=c.getBoundingClientRect(),t=e.width/c.offsetWidth,n=e.height/c.offsetHeight;o=e.left-c.scrollLeft*t,l=e.top-c.scrollTop*n}this.element.style.left=(e.left-o)/i+"px",this.element.style.top=(e.top-l)/a+"px",this.element.style.width=(e.right-e.left)/i+"px",this.element.style.height=(e.bottom-e.top)/a+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),n=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),r=n&&n.type.spec.disableDropCursor,s="function"==typeof r?r(this.editorView,t,e):r;if(t&&!s){let e=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let t=cje(this.editorView.state.doc,e,this.editorView.dragging.slice);null!=t&&(e=t)}this.setCursor(e),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class WPe extends Mje{constructor(e){super(e,e)}map(e,t){let n=e.resolve(t.map(this.head));return WPe.valid(n)?new WPe(n):Mje.near(n)}content(){return Rbe.empty}eq(e){return e instanceof WPe&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if("number"!=typeof t.pos)throw new RangeError("Invalid input for GapCursor.fromJSON");return new WPe(e.resolve(t.pos))}getBookmark(){return new $Pe(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!function(e){for(let t=e.depth;t>=0;t--){let n=e.index(t),r=e.node(t);if(0!=n)for(let e=r.child(n-1);;e=e.lastChild){if(0==e.childCount&&!e.inlineContent||e.isAtom||e.type.spec.isolating)return!0;if(e.inlineContent)return!1}else if(r.type.spec.isolating)return!0}return!0}(e)||!function(e){for(let t=e.depth;t>=0;t--){let n=e.indexAfter(t),r=e.node(t);if(n!=r.childCount)for(let e=r.child(n);;e=e.firstChild){if(0==e.childCount&&!e.inlineContent||e.isAtom||e.type.spec.isolating)return!0;if(e.inlineContent)return!1}else if(r.type.spec.isolating)return!0}return!0}(e))return!1;let n=t.type.spec.allowGapCursor;if(null!=n)return n;let r=t.contentMatchAt(e.index()).defaultType;return r&&r.isTextblock}static findGapCursorFrom(e,t,n=!1){e:for(;;){if(!n&&WPe.valid(e))return e;let r=e.pos,s=null;for(let n=e.depth;;n--){let i=e.node(n);if(t>0?e.indexAfter(n)<i.childCount:e.index(n)>0){s=i.child(t>0?e.indexAfter(n):e.index(n)-1);break}if(0==n)return null;r+=t;let a=e.doc.resolve(r);if(WPe.valid(a))return a}for(;;){let i=t>0?s.firstChild:s.lastChild;if(!i){if(s.isAtom&&!s.isText&&!Pje.isSelectable(s)){e=e.doc.resolve(r+s.nodeSize*t),n=!1;continue e}break}s=i,r+=t;let a=e.doc.resolve(r);if(WPe.valid(a))return a}return null}}}WPe.prototype.visible=!1,WPe.findFrom=WPe.findGapCursorFrom,Mje.jsonID("gapcursor",WPe);class $Pe{constructor(e){this.pos=e}map(e){return new $Pe(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return WPe.valid(t)?new WPe(t):Mje.near(t)}}const GPe=wMe({ArrowLeft:qPe("horiz",-1),ArrowRight:qPe("horiz",1),ArrowUp:qPe("vert",-1),ArrowDown:qPe("vert",1)});function qPe(e,t){const n="vert"==e?t>0?"down":"up":t>0?"right":"left";return function(e,r,s){let i=e.selection,a=t>0?i.$to:i.$from,o=i.empty;if(i instanceof Aje){if(!s.endOfTextblock(n)||0==a.depth)return!1;o=!1,a=e.doc.resolve(t>0?a.after():a.before())}let l=WPe.findGapCursorFrom(a,t,o);return!!l&&(r&&r(e.tr.setSelection(new WPe(l))),!0)}}function XPe(e,t,n){if(!e||!e.editable)return!1;let r=e.state.doc.resolve(t);if(!WPe.valid(r))return!1;let s=e.posAtCoords({left:n.clientX,top:n.clientY});return!(s&&s.inside>-1&&Pje.isSelectable(e.state.doc.nodeAt(s.inside)))&&(e.dispatch(e.state.tr.setSelection(new WPe(r))),!0)}function KPe(e,t){if("insertCompositionText"!=t.inputType||!(e.state.selection instanceof WPe))return!1;let{$from:n}=e.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(e.state.schema.nodes.text);if(!r)return!1;let s=Ebe.empty;for(let a=r.length-1;a>=0;a--)s=Ebe.from(r[a].createAndFill(null,s));let i=e.state.tr.replace(n.pos,n.pos,new Rbe(s,0,0));return i.setSelection(Aje.near(i.doc.resolve(n.pos+1))),e.dispatch(i),!1}function YPe(e){if(!(e.selection instanceof WPe))return null;let t=document.createElement("div");return t.className="ProseMirror-gapcursor",RSe.create(e.doc,[TSe.widget(e.selection.head,t,{key:"gapcursor"})])}var ZPe=200,JPe=function(){};JPe.prototype.append=function(e){return e.length?(e=JPe.from(e),!this.length&&e||e.length<ZPe&&this.leafAppend(e)||this.length<ZPe&&e.leafPrepend(this)||this.appendInner(e)):this},JPe.prototype.prepend=function(e){return e.length?JPe.from(e).append(this):this},JPe.prototype.appendInner=function(e){return new eOe(this,e)},JPe.prototype.slice=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.length),e>=t?JPe.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))},JPe.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)},JPe.prototype.forEach=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length),t<=n?this.forEachInner(e,t,n,0):this.forEachInvertedInner(e,t,n,0)},JPe.prototype.map=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length);var r=[];return this.forEach(function(t,n){return r.push(e(t,n))},t,n),r},JPe.from=function(e){return e instanceof JPe?e:e&&e.length?new QPe(e):JPe.empty};var QPe=function(e){function t(t){e.call(this),this.values=t}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(e,n){return 0==e&&n==this.length?this:new t(this.values.slice(e,n))},t.prototype.getInner=function(e){return this.values[e]},t.prototype.forEachInner=function(e,t,n,r){for(var s=t;s<n;s++)if(!1===e(this.values[s],r+s))return!1},t.prototype.forEachInvertedInner=function(e,t,n,r){for(var s=t-1;s>=n;s--)if(!1===e(this.values[s],r+s))return!1},t.prototype.leafAppend=function(e){if(this.length+e.length<=ZPe)return new t(this.values.concat(e.flatten()))},t.prototype.leafPrepend=function(e){if(this.length+e.length<=ZPe)return new t(e.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t}(JPe);JPe.empty=new QPe([]);var eOe=function(e){function t(t,n){e.call(this),this.left=t,this.right=n,this.length=t.length+n.length,this.depth=Math.max(t.depth,n.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(e){return e<this.left.length?this.left.get(e):this.right.get(e-this.left.length)},t.prototype.forEachInner=function(e,t,n,r){var s=this.left.length;return!(t<s&&!1===this.left.forEachInner(e,t,Math.min(n,s),r))&&(!(n>s&&!1===this.right.forEachInner(e,Math.max(t-s,0),Math.min(this.length,n)-s,r+s))&&void 0)},t.prototype.forEachInvertedInner=function(e,t,n,r){var s=this.left.length;return!(t>s&&!1===this.right.forEachInvertedInner(e,t-s,Math.max(n,s)-s,r+s))&&(!(n<s&&!1===this.left.forEachInvertedInner(e,Math.min(t,s),n,r))&&void 0)},t.prototype.sliceInner=function(e,t){if(0==e&&t==this.length)return this;var n=this.left.length;return t<=n?this.left.slice(e,t):e>=n?this.right.slice(e-n,t-n):this.left.slice(e,n).append(this.right.slice(0,t-n))},t.prototype.leafAppend=function(e){var n=this.right.leafAppend(e);if(n)return new t(this.left,n)},t.prototype.leafPrepend=function(e){var n=this.left.leafPrepend(e);if(n)return new t(n,this.right)},t.prototype.appendInner=function(e){return this.left.depth>=Math.max(this.right.depth,e.depth)+1?new t(this.left,new t(this.right,e)):new t(this,e)},t}(JPe);class tOe{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(0==this.eventCount)return null;let n,r,s=this.items.length;for(;;s--){if(this.items.get(s-1).selection){--s;break}}t&&(n=this.remapping(s,this.items.length),r=n.maps.length);let i,a,o=e.tr,l=[],c=[];return this.items.forEach((e,t)=>{if(!e.step)return n||(n=this.remapping(s,t+1),r=n.maps.length),r--,void c.push(e);if(n){c.push(new nOe(e.map));let t,s=e.step.map(n.slice(r));s&&o.maybeStep(s).doc&&(t=o.mapping.maps[o.mapping.maps.length-1],l.push(new nOe(t,void 0,void 0,l.length+c.length))),r--,t&&n.appendMap(t,r)}else o.maybeStep(e.step);return e.selection?(i=n?e.selection.map(n.slice(r)):e.selection,a=new tOe(this.items.slice(0,s).append(c.reverse().concat(l)),this.eventCount-1),!1):void 0},this.items.length,0),{remaining:a,transform:o,selection:i}}addTransform(e,t,n,r){let s=[],i=this.eventCount,a=this.items,o=!r&&a.length?a.get(a.length-1):null;for(let c=0;c<e.steps.length;c++){let n,l=e.steps[c].invert(e.docs[c]),d=new nOe(e.mapping.maps[c],l,t);(n=o&&o.merge(d))&&(d=n,c?s.pop():a=a.slice(0,a.length-1)),s.push(d),t&&(i++,t=void 0),r||(o=d)}let l=i-n.depth;return l>sOe&&(a=function(e,t){let n;return e.forEach((e,r)=>{if(e.selection&&0==t--)return n=r,!1}),e.slice(n)}(a,l),i-=l),new tOe(a.append(s),i)}remapping(e,t){let n=new Bwe;return this.items.forEach((t,r)=>{let s=null!=t.mirrorOffset&&r-t.mirrorOffset>=e?n.maps.length-t.mirrorOffset:void 0;n.appendMap(t.map,s)},e,t),n}addMaps(e){return 0==this.eventCount?this:new tOe(this.items.append(e.map(e=>new nOe(e))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let n=[],r=Math.max(0,this.items.length-t),s=e.mapping,i=e.steps.length,a=this.eventCount;this.items.forEach(e=>{e.selection&&a--},r);let o=t;this.items.forEach(t=>{let r=s.getMirror(--o);if(null==r)return;i=Math.min(i,r);let l=s.maps[r];if(t.step){let i=e.steps[r].invert(e.docs[r]),c=t.selection&&t.selection.map(s.slice(o+1,r));c&&a++,n.push(new nOe(l,i,c))}else n.push(new nOe(l))},r);let l=[];for(let u=t;u<i;u++)l.push(new nOe(s.maps[u]));let c=this.items.slice(0,r).append(l).append(n),d=new tOe(c,a);return d.emptyItemCount()>500&&(d=d.compress(this.items.length-n.length)),d}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),n=t.maps.length,r=[],s=0;return this.items.forEach((i,a)=>{if(a>=e)r.push(i),i.selection&&s++;else if(i.step){let e=i.step.map(t.slice(n)),a=e&&e.getMap();if(n--,a&&t.appendMap(a,n),e){let o=i.selection&&i.selection.map(t.slice(n));o&&s++;let l,c=new nOe(a.invert(),e,o),d=r.length-1;(l=r.length&&r[d].merge(c))?r[d]=l:r.push(c)}}else i.map&&n--},this.items.length,0),new tOe(JPe.from(r.reverse()),s)}}tOe.empty=new tOe(JPe.empty,0);class nOe{constructor(e,t,n,r){this.map=e,this.step=t,this.selection=n,this.mirrorOffset=r}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new nOe(t.getMap().invert(),t,this.selection)}}}class rOe{constructor(e,t,n,r,s){this.done=e,this.undone=t,this.prevRanges=n,this.prevTime=r,this.prevComposition=s}}const sOe=20;function iOe(e){let t=[];for(let n=e.length-1;n>=0&&0==t.length;n--)e[n].forEach((e,n,r,s)=>t.push(r,s));return t}function aOe(e,t){if(!e)return null;let n=[];for(let r=0;r<e.length;r+=2){let s=t.map(e[r],1),i=t.map(e[r+1],-1);s<=i&&n.push(s,i)}return n}let oOe=!1,lOe=null;function cOe(e){let t=e.plugins;if(lOe!=t){oOe=!1,lOe=t;for(let e=0;e<t.length;e++)if(t[e].spec.historyPreserveItems){oOe=!0;break}}return oOe}const dOe=new Xje("history"),uOe=new Xje("closeHistory");function hOe(e={}){return e={depth:e.depth||100,newGroupDelay:e.newGroupDelay||500},new $je({key:dOe,state:{init:()=>new rOe(tOe.empty,tOe.empty,null,0,-1),apply:(t,n,r)=>function(e,t,n,r){let s,i=n.getMeta(dOe);if(i)return i.historyState;n.getMeta(uOe)&&(e=new rOe(e.done,e.undone,null,0,-1));let a=n.getMeta("appendedTransaction");if(0==n.steps.length)return e;if(a&&a.getMeta(dOe))return a.getMeta(dOe).redo?new rOe(e.done.addTransform(n,void 0,r,cOe(t)),e.undone,iOe(n.mapping.maps),e.prevTime,e.prevComposition):new rOe(e.done,e.undone.addTransform(n,void 0,r,cOe(t)),null,e.prevTime,e.prevComposition);if(!1===n.getMeta("addToHistory")||a&&!1===a.getMeta("addToHistory"))return(s=n.getMeta("rebased"))?new rOe(e.done.rebased(n,s),e.undone.rebased(n,s),aOe(e.prevRanges,n.mapping),e.prevTime,e.prevComposition):new rOe(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),aOe(e.prevRanges,n.mapping),e.prevTime,e.prevComposition);{let s=n.getMeta("composition"),i=0==e.prevTime||!a&&e.prevComposition!=s&&(e.prevTime<(n.time||0)-r.newGroupDelay||!function(e,t){if(!t)return!1;if(!e.docChanged)return!0;let n=!1;return e.mapping.maps[0].forEach((e,r)=>{for(let s=0;s<t.length;s+=2)e<=t[s+1]&&r>=t[s]&&(n=!0)}),n}(n,e.prevRanges)),o=a?aOe(e.prevRanges,n.mapping):iOe(n.mapping.maps);return new rOe(e.done.addTransform(n,i?t.selection.getBookmark():void 0,r,cOe(t)),tOe.empty,o,n.time,null==s?e.prevComposition:s)}}(n,r,t,e)},config:e,props:{handleDOMEvents:{beforeinput(e,t){let n=t.inputType,r="historyUndo"==n?mOe:"historyRedo"==n?fOe:null;return!!r&&(t.preventDefault(),r(e.state,e.dispatch))}}}})}function pOe(e,t){return(n,r)=>{let s=dOe.getState(n);if(!s||0==(e?s.undone:s.done).eventCount)return!1;if(r){let i=function(e,t,n){let r=cOe(t),s=dOe.get(t).spec.config,i=(n?e.undone:e.done).popEvent(t,r);if(!i)return null;let a=i.selection.resolve(i.transform.doc),o=(n?e.done:e.undone).addTransform(i.transform,t.selection.getBookmark(),s,r),l=new rOe(n?o:i.remaining,n?i.remaining:o,null,0,-1);return i.transform.setSelection(a).setMeta(dOe,{redo:n,historyState:l})}(s,n,e);i&&r(t?i.scrollIntoView():i)}return!0}}const mOe=pOe(!1,!0),fOe=pOe(!0,!0);var gOe=WCe.create({name:"characterCount",addOptions:()=>({limit:null,mode:"textSize",textCounter:e=>e.length,wordCounter:e=>e.split(" ").filter(e=>""!==e).length}),addStorage:()=>({characters:()=>0,words:()=>0}),onBeforeCreate(){this.storage.characters=e=>{const t=(null==e?void 0:e.node)||this.editor.state.doc;if("textSize"===((null==e?void 0:e.mode)||this.options.mode)){const e=t.textBetween(0,t.content.size,void 0," ");return this.options.textCounter(e)}return t.nodeSize},this.storage.words=e=>{const t=(null==e?void 0:e.node)||this.editor.state.doc,n=t.textBetween(0,t.content.size," "," ");return this.options.wordCounter(n)}},addProseMirrorPlugins(){let e=!1;return[new $je({key:new Xje("characterCount"),appendTransaction:(t,n,r)=>{if(e)return;const s=this.options.limit;if(null==s||0===s)return void(e=!0);const i=this.storage.characters({node:r.doc});if(i>s){const t=0,n=i-s,a=r.tr.deleteRange(t,n);return e=!0,a}e=!0},filterTransaction:(e,t)=>{const n=this.options.limit;if(!e.docChanged||0===n||null==n)return!0;const r=this.storage.characters({node:t.doc}),s=this.storage.characters({node:e.doc});if(s<=n)return!0;if(r>n&&s>n&&s<=r)return!0;if(r>n&&s>n&&s>r)return!1;if(!e.getMeta("paste"))return!1;const i=e.selection.$head.pos,a=i-(s-n),o=i;e.deleteRange(a,o);return!(this.storage.characters({node:e.doc})>n)}})]}}),xOe=WCe.create({name:"dropCursor",addOptions:()=>({color:"currentColor",width:1,class:void 0}),addProseMirrorPlugins(){return[VPe(this.options)]}});WCe.create({name:"focus",addOptions:()=>({className:"has-focus",mode:"all"}),addProseMirrorPlugins(){return[new $je({key:new Xje("focus"),props:{decorations:({doc:e,selection:t})=>{const{isEditable:n,isFocused:r}=this.editor,{anchor:s}=t,i=[];if(!n||!r)return RSe.create(e,[]);let a=0;"deepest"===this.options.mode&&e.descendants((e,t)=>{if(e.isText)return;if(!(s>=t&&s<=t+e.nodeSize-1))return!1;a+=1});let o=0;return e.descendants((e,t)=>{if(e.isText)return!1;if(!(s>=t&&s<=t+e.nodeSize-1))return!1;o+=1;if("deepest"===this.options.mode&&a-o>0||"shallowest"===this.options.mode&&o>1)return"deepest"===this.options.mode;i.push(TSe.node(t,t+e.nodeSize,{class:this.options.className}))}),RSe.create(e,i)}}})]}});var vOe=WCe.create({name:"gapCursor",addProseMirrorPlugins:()=>[new $je({props:{decorations:YPe,createSelectionBetween:(e,t,n)=>t.pos==n.pos&&WPe.valid(n)?new WPe(n):null,handleClick:XPe,handleKeyDown:GPe,handleDOMEvents:{beforeinput:KPe}}})],extendNodeSchema(e){var t;return{allowGapCursor:null!=(t=JMe(XMe(e,"allowGapCursor",{name:e.name,options:e.options,storage:e.storage})))?t:null}}}),yOe=WCe.create({name:"placeholder",addOptions:()=>({emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}),addProseMirrorPlugins(){return[new $je({key:new Xje("placeholder"),props:{decorations:({doc:e,selection:t})=>{const n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=t,s=[];if(!n)return null;const i=this.editor.isEmpty;return e.descendants((e,t)=>{const n=r>=t&&r<=t+e.nodeSize,a=!e.isLeaf&&ECe(e);if((n||!this.options.showOnlyCurrent)&&a){const r=[this.options.emptyNodeClass];i&&r.push(this.options.emptyEditorClass);const a=TSe.node(t,t+e.nodeSize,{class:r.join(" "),"data-placeholder":"function"==typeof this.options.placeholder?this.options.placeholder({editor:this.editor,node:e,pos:t,hasAnchor:n}):this.options.placeholder});s.push(a)}return this.options.includeChildren}),RSe.create(e,s)}}})]}});function bOe({types:e,node:t}){return t&&Array.isArray(e)&&e.includes(t.type)||(null==t?void 0:t.type)===e}WCe.create({name:"selection",addOptions:()=>({className:"selection"}),addProseMirrorPlugins(){const{editor:e,options:t}=this;return[new $je({key:new Xje("selection"),props:{decorations:n=>n.selection.empty||e.isFocused||!e.isEditable||kCe(n.selection)||e.view.dragging?null:RSe.create(n.doc,[TSe.inline(n.selection.from,n.selection.to,{class:t.className})])}})]}});var wOe=WCe.create({name:"trailingNode",addOptions:()=>({node:"paragraph",notAfter:[]}),addProseMirrorPlugins(){const e=new Xje(this.name),t=Object.entries(this.editor.schema.nodes).map(([,e])=>e).filter(e=>(this.options.notAfter||[]).concat(this.options.node).includes(e.name));return[new $je({key:e,appendTransaction:(t,n,r)=>{const{doc:s,tr:i,schema:a}=r,o=e.getState(r),l=s.content.size,c=a.nodes[this.options.node];if(o)return i.insert(l,c.create())},state:{init:(e,n)=>!bOe({node:n.tr.doc.lastChild,types:t}),apply:(e,n)=>{if(!e.docChanged)return n;return!bOe({node:e.doc.lastChild,types:t})}}})]}}),jOe=WCe.create({name:"undoRedo",addOptions:()=>({depth:100,newGroupDelay:500}),addCommands:()=>({undo:()=>({state:e,dispatch:t})=>mOe(e,t),redo:()=>({state:e,dispatch:t})=>fOe(e,t)}),addProseMirrorPlugins(){return[hOe(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),NOe=WCe.create({name:"starterKit",addExtensions(){var e,t,n,r;const s=[];return!1!==this.options.bold&&s.push(Jke.configure(this.options.bold)),!1!==this.options.blockquote&&s.push(qke.configure(this.options.blockquote)),!1!==this.options.bulletList&&s.push(xPe.configure(this.options.bulletList)),!1!==this.options.code&&s.push(tAe.configure(this.options.code)),!1!==this.options.codeBlock&&s.push(sAe.configure(this.options.codeBlock)),!1!==this.options.document&&s.push(aAe.configure(this.options.document)),!1!==this.options.dropcursor&&s.push(xOe.configure(this.options.dropcursor)),!1!==this.options.gapcursor&&s.push(vOe.configure(this.options.gapcursor)),!1!==this.options.hardBreak&&s.push(oAe.configure(this.options.hardBreak)),!1!==this.options.heading&&s.push(lAe.configure(this.options.heading)),!1!==this.options.undoRedo&&s.push(jOe.configure(this.options.undoRedo)),!1!==this.options.horizontalRule&&s.push(cAe.configure(this.options.horizontalRule)),!1!==this.options.italic&&s.push(mAe.configure(this.options.italic)),!1!==this.options.listItem&&s.push(vPe.configure(this.options.listItem)),!1!==this.options.listKeymap&&s.push(kPe.configure(null==(e=this.options)?void 0:e.listKeymap)),!1!==this.options.link&&s.push(hPe.configure(null==(t=this.options)?void 0:t.link)),!1!==this.options.orderedList&&s.push(PPe.configure(this.options.orderedList)),!1!==this.options.paragraph&&s.push(DPe.configure(this.options.paragraph)),!1!==this.options.strike&&s.push(zPe.configure(this.options.strike)),!1!==this.options.text&&s.push(BPe.configure(this.options.text)),!1!==this.options.underline&&s.push(UPe.configure(null==(n=this.options)?void 0:n.underline)),!1!==this.options.trailingNode&&s.push(wOe.configure(null==(r=this.options)?void 0:r.trailingNode)),s}}),_Oe=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,SOe=vke.create({name:"image",addOptions:()=>({inline:!1,allowBase64:!1,HTMLAttributes:{}}),inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes:()=>({src:{default:null},alt:{default:null},title:{default:null},width:{default:null},height:{default:null}}),parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:e}){return["img",tCe(this.options.HTMLAttributes,e)]},addCommands(){return{setImage:e=>({commands:t})=>t.insertContent({type:this.name,attrs:e})}},addInputRules(){return[fke({find:_Oe,type:this.type,getAttributes:e=>{const[,,t,n,r]=e;return{src:n,alt:t,title:r}}})]}});function MOe(e){return e instanceof Map?e.clear=e.delete=e.set=function(){throw new Error("map is read-only")}:e instanceof Set&&(e.add=e.clear=e.delete=function(){throw new Error("set is read-only")}),Object.freeze(e),Object.getOwnPropertyNames(e).forEach(t=>{const n=e[t],r=typeof n;"object"!==r&&"function"!==r||Object.isFrozen(n)||MOe(n)}),e}let COe=class{constructor(e){void 0===e.data&&(e.data={}),this.data=e.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}};function EOe(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function kOe(e,...t){const n=Object.create(null);for(const r in e)n[r]=e[r];return t.forEach(function(e){for(const t in e)n[t]=e[t]}),n}const AOe=e=>!!e.scope;class TOe{constructor(e,t){this.buffer="",this.classPrefix=t.classPrefix,e.walk(this)}addText(e){this.buffer+=EOe(e)}openNode(e){if(!AOe(e))return;const t=((e,{prefix:t})=>{if(e.startsWith("language:"))return e.replace("language:","language-");if(e.includes(".")){const n=e.split(".");return[`${t}${n.shift()}`,...n.map((e,t)=>`${e}${"_".repeat(t+1)}`)].join(" ")}return`${t}${e}`})(e.scope,{prefix:this.classPrefix});this.span(t)}closeNode(e){AOe(e)&&(this.buffer+="</span>")}value(){return this.buffer}span(e){this.buffer+=`<span class="${e}">`}}const POe=(e={})=>{const t={children:[]};return Object.assign(t,e),t};class OOe{constructor(){this.rootNode=POe(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(e){this.top.children.push(e)}openNode(e){const t=POe({scope:e});this.add(t),this.stack.push(t)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(e){return this.constructor._walk(e,this.rootNode)}static _walk(e,t){return"string"==typeof t?e.addText(t):t.children&&(e.openNode(t),t.children.forEach(t=>this._walk(e,t)),e.closeNode(t)),e}static _collapse(e){"string"!=typeof e&&e.children&&(e.children.every(e=>"string"==typeof e)?e.children=[e.children.join("")]:e.children.forEach(e=>{OOe._collapse(e)}))}}class ROe extends OOe{constructor(e){super(),this.options=e}addText(e){""!==e&&this.add(e)}startScope(e){this.openNode(e)}endScope(){this.closeNode()}__addSublanguage(e,t){const n=e.root;t&&(n.scope=`language:${t}`),this.add(n)}toHTML(){return new TOe(this,this.options).value()}finalize(){return this.closeAllNodes(),!0}}function IOe(e){return e?"string"==typeof e?e:e.source:null}function DOe(e){return zOe("(?=",e,")")}function LOe(e){return zOe("(?:",e,")*")}function FOe(e){return zOe("(?:",e,")?")}function zOe(...e){return e.map(e=>IOe(e)).join("")}function BOe(...e){const t=function(e){const t=e[e.length-1];return"object"==typeof t&&t.constructor===Object?(e.splice(e.length-1,1),t):{}}(e);return"("+(t.capture?"":"?:")+e.map(e=>IOe(e)).join("|")+")"}function UOe(e){return new RegExp(e.toString()+"|").exec("").length-1}const VOe=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function HOe(e,{joinWith:t}){let n=0;return e.map(e=>{n+=1;const t=n;let r=IOe(e),s="";for(;r.length>0;){const e=VOe.exec(r);if(!e){s+=r;break}s+=r.substring(0,e.index),r=r.substring(e.index+e[0].length),"\\"===e[0][0]&&e[1]?s+="\\"+String(Number(e[1])+t):(s+=e[0],"("===e[0]&&n++)}return s}).map(e=>`(${e})`).join(t)}const WOe="[a-zA-Z]\\w*",$Oe="[a-zA-Z_]\\w*",GOe="\\b\\d+(\\.\\d+)?",qOe="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",XOe="\\b(0b[01]+)",KOe={begin:"\\\\[\\s\\S]",relevance:0},YOe={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[KOe]},ZOe={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[KOe]},JOe=function(e,t,n={}){const r=kOe({scope:"comment",begin:e,end:t,contains:[]},n);r.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const s=BOe("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return r.contains.push({begin:zOe(/[ ]+/,"(",s,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),r},QOe=JOe("//","$"),eRe=JOe("/\\*","\\*/"),tRe=JOe("#","$"),nRe={scope:"number",begin:GOe,relevance:0},rRe={scope:"number",begin:qOe,relevance:0},sRe={scope:"number",begin:XOe,relevance:0},iRe={scope:"regexp",begin:/\/(?=[^/\n]*\/)/,end:/\/[gimuy]*/,contains:[KOe,{begin:/\[/,end:/\]/,relevance:0,contains:[KOe]}]},aRe={scope:"title",begin:WOe,relevance:0},oRe={scope:"title",begin:$Oe,relevance:0},lRe={begin:"\\.\\s*"+$Oe,relevance:0};var cRe=Object.freeze({__proto__:null,APOS_STRING_MODE:YOe,BACKSLASH_ESCAPE:KOe,BINARY_NUMBER_MODE:sRe,BINARY_NUMBER_RE:XOe,COMMENT:JOe,C_BLOCK_COMMENT_MODE:eRe,C_LINE_COMMENT_MODE:QOe,C_NUMBER_MODE:rRe,C_NUMBER_RE:qOe,END_SAME_AS_BEGIN:function(e){return Object.assign(e,{"on:begin":(e,t)=>{t.data._beginMatch=e[1]},"on:end":(e,t)=>{t.data._beginMatch!==e[1]&&t.ignoreMatch()}})},HASH_COMMENT_MODE:tRe,IDENT_RE:WOe,MATCH_NOTHING_RE:/\b\B/,METHOD_GUARD:lRe,NUMBER_MODE:nRe,NUMBER_RE:GOe,PHRASAL_WORDS_MODE:{begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},QUOTE_STRING_MODE:ZOe,REGEXP_MODE:iRe,RE_STARTERS_RE:"!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",SHEBANG:(e={})=>{const t=/^#![ ]*\//;return e.binary&&(e.begin=zOe(t,/.*\b/,e.binary,/\b.*/)),kOe({scope:"meta",begin:t,end:/$/,relevance:0,"on:begin":(e,t)=>{0!==e.index&&t.ignoreMatch()}},e)},TITLE_MODE:aRe,UNDERSCORE_IDENT_RE:$Oe,UNDERSCORE_TITLE_MODE:oRe});function dRe(e,t){"."===e.input[e.index-1]&&t.ignoreMatch()}function uRe(e,t){void 0!==e.className&&(e.scope=e.className,delete e.className)}function hRe(e,t){t&&e.beginKeywords&&(e.begin="\\b("+e.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",e.__beforeBegin=dRe,e.keywords=e.keywords||e.beginKeywords,delete e.beginKeywords,void 0===e.relevance&&(e.relevance=0))}function pRe(e,t){Array.isArray(e.illegal)&&(e.illegal=BOe(...e.illegal))}function mRe(e,t){if(e.match){if(e.begin||e.end)throw new Error("begin & end are not supported with match");e.begin=e.match,delete e.match}}function fRe(e,t){void 0===e.relevance&&(e.relevance=1)}const gRe=(e,t)=>{if(!e.beforeMatch)return;if(e.starts)throw new Error("beforeMatch cannot be used with starts");const n=Object.assign({},e);Object.keys(e).forEach(t=>{delete e[t]}),e.keywords=n.keywords,e.begin=zOe(n.beforeMatch,DOe(n.begin)),e.starts={relevance:0,contains:[Object.assign(n,{endsParent:!0})]},e.relevance=0,delete n.beforeMatch},xRe=["of","and","for","in","not","or","if","then","parent","list","value"];function vRe(e,t,n="keyword"){const r=Object.create(null);return"string"==typeof e?s(n,e.split(" ")):Array.isArray(e)?s(n,e):Object.keys(e).forEach(function(n){Object.assign(r,vRe(e[n],t,n))}),r;function s(e,n){t&&(n=n.map(e=>e.toLowerCase())),n.forEach(function(t){const n=t.split("|");r[n[0]]=[e,yRe(n[0],n[1])]})}}function yRe(e,t){return t?Number(t):function(e){return xRe.includes(e.toLowerCase())}(e)?0:1}const bRe={},wRe=(e,t)=>{bRe[`${e}/${t}`]||(bRe[`${e}/${t}`]=!0)},jRe=new Error;function NRe(e,t,{key:n}){let r=0;const s=e[n],i={},a={};for(let o=1;o<=t.length;o++)a[o+r]=s[o],i[o+r]=!0,r+=UOe(t[o-1]);e[n]=a,e[n]._emit=i,e[n]._multi=!0}function _Re(e){!function(e){e.scope&&"object"==typeof e.scope&&null!==e.scope&&(e.beginScope=e.scope,delete e.scope)}(e),"string"==typeof e.beginScope&&(e.beginScope={_wrap:e.beginScope}),"string"==typeof e.endScope&&(e.endScope={_wrap:e.endScope}),function(e){if(Array.isArray(e.begin)){if(e.skip||e.excludeBegin||e.returnBegin)throw jRe;if("object"!=typeof e.beginScope||null===e.beginScope)throw jRe;NRe(e,e.begin,{key:"beginScope"}),e.begin=HOe(e.begin,{joinWith:""})}}(e),function(e){if(Array.isArray(e.end)){if(e.skip||e.excludeEnd||e.returnEnd)throw jRe;if("object"!=typeof e.endScope||null===e.endScope)throw jRe;NRe(e,e.end,{key:"endScope"}),e.end=HOe(e.end,{joinWith:""})}}(e)}function SRe(e){function t(t,n){return new RegExp(IOe(t),"m"+(e.case_insensitive?"i":"")+(e.unicodeRegex?"u":"")+(n?"g":""))}class n{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(e,t){t.position=this.position++,this.matchIndexes[this.matchAt]=t,this.regexes.push([t,e]),this.matchAt+=UOe(e)+1}compile(){0===this.regexes.length&&(this.exec=()=>null);const e=this.regexes.map(e=>e[1]);this.matcherRe=t(HOe(e,{joinWith:"|"}),!0),this.lastIndex=0}exec(e){this.matcherRe.lastIndex=this.lastIndex;const t=this.matcherRe.exec(e);if(!t)return null;const n=t.findIndex((e,t)=>t>0&&void 0!==e),r=this.matchIndexes[n];return t.splice(0,n),Object.assign(t,r)}}class r{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(e){if(this.multiRegexes[e])return this.multiRegexes[e];const t=new n;return this.rules.slice(e).forEach(([e,n])=>t.addRule(e,n)),t.compile(),this.multiRegexes[e]=t,t}resumingScanAtSamePosition(){return 0!==this.regexIndex}considerAll(){this.regexIndex=0}addRule(e,t){this.rules.push([e,t]),"begin"===t.type&&this.count++}exec(e){const t=this.getMatcher(this.regexIndex);t.lastIndex=this.lastIndex;let n=t.exec(e);if(this.resumingScanAtSamePosition())if(n&&n.index===this.lastIndex);else{const t=this.getMatcher(0);t.lastIndex=this.lastIndex+1,n=t.exec(e)}return n&&(this.regexIndex+=n.position+1,this.regexIndex===this.count&&this.considerAll()),n}}if(e.compilerExtensions||(e.compilerExtensions=[]),e.contains&&e.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return e.classNameAliases=kOe(e.classNameAliases||{}),function n(s,i){const a=s;if(s.isCompiled)return a;[uRe,mRe,_Re,gRe].forEach(e=>e(s,i)),e.compilerExtensions.forEach(e=>e(s,i)),s.__beforeBegin=null,[hRe,pRe,fRe].forEach(e=>e(s,i)),s.isCompiled=!0;let o=null;return"object"==typeof s.keywords&&s.keywords.$pattern&&(s.keywords=Object.assign({},s.keywords),o=s.keywords.$pattern,delete s.keywords.$pattern),o=o||/\w+/,s.keywords&&(s.keywords=vRe(s.keywords,e.case_insensitive)),a.keywordPatternRe=t(o,!0),i&&(s.begin||(s.begin=/\B|\b/),a.beginRe=t(a.begin),s.end||s.endsWithParent||(s.end=/\B|\b/),s.end&&(a.endRe=t(a.end)),a.terminatorEnd=IOe(a.end)||"",s.endsWithParent&&i.terminatorEnd&&(a.terminatorEnd+=(s.end?"|":"")+i.terminatorEnd)),s.illegal&&(a.illegalRe=t(s.illegal)),s.contains||(s.contains=[]),s.contains=[].concat(...s.contains.map(function(e){return function(e){e.variants&&!e.cachedVariants&&(e.cachedVariants=e.variants.map(function(t){return kOe(e,{variants:null},t)}));if(e.cachedVariants)return e.cachedVariants;if(MRe(e))return kOe(e,{starts:e.starts?kOe(e.starts):null});if(Object.isFrozen(e))return kOe(e);return e}("self"===e?s:e)})),s.contains.forEach(function(e){n(e,a)}),s.starts&&n(s.starts,i),a.matcher=function(e){const t=new r;return e.contains.forEach(e=>t.addRule(e.begin,{rule:e,type:"begin"})),e.terminatorEnd&&t.addRule(e.terminatorEnd,{type:"end"}),e.illegal&&t.addRule(e.illegal,{type:"illegal"}),t}(a),a}(e)}function MRe(e){return!!e&&(e.endsWithParent||MRe(e.starts))}class CRe extends Error{constructor(e,t){super(e),this.name="HTMLInjectionError",this.html=t}}const ERe=EOe,kRe=kOe,ARe=Symbol("nomatch"),TRe=function(e){const t=Object.create(null),n=Object.create(null),r=[];let s=!0;const i="Could not find the language '{}', did you forget to load/include a language module?",a={disableAutodetect:!0,name:"Plain text",contains:[]};let o={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:ROe};function l(e){return o.noHighlightRe.test(e)}function c(e,t,n){let r="",s="";"object"==typeof t?(r=e,n=t.ignoreIllegals,s=t.language):(wRe("10.7.0","highlight(lang, code, ...args) has been deprecated."),wRe("10.7.0","Please use highlight(code, options) instead.\nhttps://github.com/highlightjs/highlight.js/issues/2277"),s=e,r=t),void 0===n&&(n=!0);const i={code:r,language:s};v("before:highlight",i);const a=i.result?i.result:d(i.language,i.code,n);return a.code=i.code,v("after:highlight",a),a}function d(e,n,r,a){const l=Object.create(null);function c(e,t){return e.keywords[t]}function h(){if(!M.keywords)return void E.addText(k);let e=0;M.keywordPatternRe.lastIndex=0;let t=M.keywordPatternRe.exec(k),n="";for(;t;){n+=k.substring(e,t.index);const r=N.case_insensitive?t[0].toLowerCase():t[0],s=c(M,r);if(s){const[e,i]=s;if(E.addText(n),n="",l[r]=(l[r]||0)+1,l[r]<=7&&(A+=i),e.startsWith("_"))n+=t[0];else{const n=N.classNameAliases[e]||e;m(t[0],n)}}else n+=t[0];e=M.keywordPatternRe.lastIndex,t=M.keywordPatternRe.exec(k)}n+=k.substring(e),E.addText(n)}function p(){null!=M.subLanguage?function(){if(""===k)return;let e=null;if("string"==typeof M.subLanguage){if(!t[M.subLanguage])return void E.addText(k);e=d(M.subLanguage,k,!0,C[M.subLanguage]),C[M.subLanguage]=e._top}else e=u(k,M.subLanguage.length?M.subLanguage:null);M.relevance>0&&(A+=e.relevance),E.__addSublanguage(e._emitter,e.language)}():h(),k=""}function m(e,t){""!==e&&(E.startScope(t),E.addText(e),E.endScope())}function g(e,t){let n=1;const r=t.length-1;for(;n<=r;){if(!e._emit[n]){n++;continue}const r=N.classNameAliases[e[n]]||e[n],s=t[n];r?m(s,r):(k=s,h(),k=""),n++}}function x(e,t){return e.scope&&"string"==typeof e.scope&&E.openNode(N.classNameAliases[e.scope]||e.scope),e.beginScope&&(e.beginScope._wrap?(m(k,N.classNameAliases[e.beginScope._wrap]||e.beginScope._wrap),k=""):e.beginScope._multi&&(g(e.beginScope,t),k="")),M=Object.create(e,{parent:{value:M}}),M}function v(e,t,n){let r=function(e,t){const n=e&&e.exec(t);return n&&0===n.index}(e.endRe,n);if(r){if(e["on:end"]){const n=new COe(e);e["on:end"](t,n),n.isMatchIgnored&&(r=!1)}if(r){for(;e.endsParent&&e.parent;)e=e.parent;return e}}if(e.endsWithParent)return v(e.parent,t,n)}function y(e){return 0===M.matcher.regexIndex?(k+=e[0],1):(O=!0,0)}function b(e){const t=e[0],r=n.substring(e.index),s=v(M,e,r);if(!s)return ARe;const i=M;M.endScope&&M.endScope._wrap?(p(),m(t,M.endScope._wrap)):M.endScope&&M.endScope._multi?(p(),g(M.endScope,e)):i.skip?k+=t:(i.returnEnd||i.excludeEnd||(k+=t),p(),i.excludeEnd&&(k=t));do{M.scope&&E.closeNode(),M.skip||M.subLanguage||(A+=M.relevance),M=M.parent}while(M!==s.parent);return s.starts&&x(s.starts,e),i.returnEnd?0:t.length}let w={};function j(t,i){const a=i&&i[0];if(k+=t,null==a)return p(),0;if("begin"===w.type&&"end"===i.type&&w.index===i.index&&""===a){if(k+=n.slice(i.index,i.index+1),!s){const t=new Error(`0 width match regex (${e})`);throw t.languageName=e,t.badRule=w.rule,t}return 1}if(w=i,"begin"===i.type)return function(e){const t=e[0],n=e.rule,r=new COe(n),s=[n.__beforeBegin,n["on:begin"]];for(const i of s)if(i&&(i(e,r),r.isMatchIgnored))return y(t);return n.skip?k+=t:(n.excludeBegin&&(k+=t),p(),n.returnBegin||n.excludeBegin||(k=t)),x(n,e),n.returnBegin?0:t.length}(i);if("illegal"===i.type&&!r){const e=new Error('Illegal lexeme "'+a+'" for mode "'+(M.scope||"<unnamed>")+'"');throw e.mode=M,e}if("end"===i.type){const e=b(i);if(e!==ARe)return e}if("illegal"===i.type&&""===a)return k+="\n",1;if(P>1e5&&P>3*i.index){throw new Error("potential infinite loop, way more iterations than matches")}return k+=a,a.length}const N=f(e);if(!N)throw i.replace("{}",e),new Error('Unknown language: "'+e+'"');const _=SRe(N);let S="",M=a||_;const C={},E=new o.__emitter(o);!function(){const e=[];for(let t=M;t!==N;t=t.parent)t.scope&&e.unshift(t.scope);e.forEach(e=>E.openNode(e))}();let k="",A=0,T=0,P=0,O=!1;try{if(N.__emitTokens)N.__emitTokens(n,E);else{for(M.matcher.considerAll();;){P++,O?O=!1:M.matcher.considerAll(),M.matcher.lastIndex=T;const e=M.matcher.exec(n);if(!e)break;const t=j(n.substring(T,e.index),e);T=e.index+t}j(n.substring(T))}return E.finalize(),S=E.toHTML(),{language:e,value:S,relevance:A,illegal:!1,_emitter:E,_top:M}}catch(PUe){if(PUe.message&&PUe.message.includes("Illegal"))return{language:e,value:ERe(n),illegal:!0,relevance:0,_illegalBy:{message:PUe.message,index:T,context:n.slice(T-100,T+100),mode:PUe.mode,resultSoFar:S},_emitter:E};if(s)return{language:e,value:ERe(n),illegal:!1,relevance:0,errorRaised:PUe,_emitter:E,_top:M};throw PUe}}function u(e,n){n=n||o.languages||Object.keys(t);const r=function(e){const t={value:ERe(e),illegal:!1,relevance:0,_top:a,_emitter:new o.__emitter(o)};return t._emitter.addText(e),t}(e),s=n.filter(f).filter(x).map(t=>d(t,e,!1));s.unshift(r);const i=s.sort((e,t)=>{if(e.relevance!==t.relevance)return t.relevance-e.relevance;if(e.language&&t.language){if(f(e.language).supersetOf===t.language)return 1;if(f(t.language).supersetOf===e.language)return-1}return 0}),[l,c]=i,u=l;return u.secondBest=c,u}function h(e){let t=null;const r=function(e){let t=e.className+" ";t+=e.parentNode?e.parentNode.className:"";const n=o.languageDetectRe.exec(t);if(n){const e=f(n[1]);return e||i.replace("{}",n[1]),e?n[1]:"no-highlight"}return t.split(/\s+/).find(e=>l(e)||f(e))}(e);if(l(r))return;if(v("before:highlightElement",{el:e,language:r}),e.dataset.highlighted)return;if(e.children.length>0&&(o.ignoreUnescapedHTML,o.throwUnescapedHTML)){throw new CRe("One of your code blocks includes unescaped HTML.",e.innerHTML)}t=e;const s=t.textContent,a=r?c(s,{language:r,ignoreIllegals:!0}):u(s);e.innerHTML=a.value,e.dataset.highlighted="yes",function(e,t,r){const s=t&&n[t]||r;e.classList.add("hljs"),e.classList.add(`language-${s}`)}(e,r,a.language),e.result={language:a.language,re:a.relevance,relevance:a.relevance},a.secondBest&&(e.secondBest={language:a.secondBest.language,relevance:a.secondBest.relevance}),v("after:highlightElement",{el:e,result:a,text:s})}let p=!1;function m(){if("loading"===document.readyState)return p||window.addEventListener("DOMContentLoaded",function(){m()},!1),void(p=!0);document.querySelectorAll(o.cssSelector).forEach(h)}function f(e){return e=(e||"").toLowerCase(),t[e]||t[n[e]]}function g(e,{languageName:t}){"string"==typeof e&&(e=[e]),e.forEach(e=>{n[e.toLowerCase()]=t})}function x(e){const t=f(e);return t&&!t.disableAutodetect}function v(e,t){const n=e;r.forEach(function(e){e[n]&&e[n](t)})}Object.assign(e,{highlight:c,highlightAuto:u,highlightAll:m,highlightElement:h,highlightBlock:function(e){return wRe("10.7.0","highlightBlock will be removed entirely in v12.0"),wRe("10.7.0","Please use highlightElement now."),h(e)},configure:function(e){o=kRe(o,e)},initHighlighting:()=>{m(),wRe("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")},initHighlightingOnLoad:function(){m(),wRe("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")},registerLanguage:function(n,r){let i=null;try{i=r(e)}catch(o){if("Language definition for '{}' could not be registered.".replace("{}",n),!s)throw o;i=a}i.name||(i.name=n),t[n]=i,i.rawDefinition=r.bind(null,e),i.aliases&&g(i.aliases,{languageName:n})},unregisterLanguage:function(e){delete t[e];for(const t of Object.keys(n))n[t]===e&&delete n[t]},listLanguages:function(){return Object.keys(t)},getLanguage:f,registerAliases:g,autoDetection:x,inherit:kRe,addPlugin:function(e){!function(e){e["before:highlightBlock"]&&!e["before:highlightElement"]&&(e["before:highlightElement"]=t=>{e["before:highlightBlock"](Object.assign({block:t.el},t))}),e["after:highlightBlock"]&&!e["after:highlightElement"]&&(e["after:highlightElement"]=t=>{e["after:highlightBlock"](Object.assign({block:t.el},t))})}(e),r.push(e)},removePlugin:function(e){const t=r.indexOf(e);-1!==t&&r.splice(t,1)}}),e.debugMode=function(){s=!1},e.safeMode=function(){s=!0},e.versionString="11.11.1",e.regex={concat:zOe,lookahead:DOe,either:BOe,optional:FOe,anyNumberOfTimes:LOe};for(const y in cRe)"object"==typeof cRe[y]&&MOe(cRe[y]);return Object.assign(e,cRe),e},PRe=TRe({});PRe.newInstance=()=>TRe({});var ORe=PRe;PRe.HighlightJS=PRe,PRe.default=PRe;const RRe=mn(ORe);function IRe(e,t=[]){return e.flatMap(e=>{const n=[...t,...e.properties?e.properties.className:[]];return e.children?IRe(e.children,n):{text:e.value,classes:n}})}function DRe(e){return e.value||e.children||[]}function LRe({doc:e,name:t,lowlight:n,defaultLanguage:r}){const s=[];return GMe(e,e=>e.type.name===t).forEach(e=>{var t;let i=e.pos+1;const a=e.node.attrs.language||r,o=n.listLanguages();var l;IRe(a&&(o.includes(a)||(l=a,Boolean(RRe.getLanguage(l)))||(null==(t=n.registered)?void 0:t.call(n,a)))?DRe(n.highlight(a,e.node.textContent)):DRe(n.highlightAuto(e.node.textContent))).forEach(e=>{const t=i+e.text.length;if(e.classes.length){const n=TSe.inline(i,t,{class:e.classes.join(" ")});s.push(n)}i=t})}),RSe.create(e,s)}function FRe({name:e,lowlight:t,defaultLanguage:n}){if(!["highlight","highlightAuto","listLanguages"].every(e=>"function"==typeof t[e]))throw Error("You should provide an instance of lowlight to use the code-block-lowlight extension");const r=new $je({key:new Xje("lowlight"),state:{init:(r,{doc:s})=>LRe({doc:s,name:e,lowlight:t,defaultLanguage:n}),apply:(r,s,i,a)=>{const o=i.selection.$head.parent.type.name,l=a.selection.$head.parent.type.name,c=GMe(i.doc,t=>t.type.name===e),d=GMe(a.doc,t=>t.type.name===e);return r.docChanged&&([o,l].includes(e)||d.length!==c.length||r.steps.some(e=>void 0!==e.from&&void 0!==e.to&&c.some(t=>t.pos>=e.from&&t.pos+t.node.nodeSize<=e.to)))?LRe({doc:r.doc,name:e,lowlight:t,defaultLanguage:n}):s.map(r.mapping,r.doc)}},props:{decorations:e=>r.getState(e)}});return r}var zRe=iAe.extend({addOptions(){var e;return{...null==(e=this.parent)?void 0:e.call(this),lowlight:{},languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:4,HTMLAttributes:{}}},addProseMirrorPlugins(){var e;return[...(null==(e=this.parent)?void 0:e.call(this))||[],FRe({name:this.name,lowlight:this.options.lowlight,defaultLanguage:this.options.defaultLanguage})]}}),BRe=yOe,URe=gOe;const VRe=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video","defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],HRe=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),WRe=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),$Re=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),GRe=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse();var qRe="[0-9](_*[0-9])*",XRe=`\\.(${qRe})`,KRe="[0-9a-fA-F](_*[0-9a-fA-F])*",YRe={className:"number",variants:[{begin:`(\\b(${qRe})((${XRe})|\\.)?|(${XRe}))[eE][+-]?(${qRe})[fFdD]?\\b`},{begin:`\\b(${qRe})((${XRe})[fFdD]?\\b|\\.([fFdD]\\b)?)`},{begin:`(${XRe})[fFdD]?\\b`},{begin:`\\b(${qRe})[fFdD]\\b`},{begin:`\\b0[xX]((${KRe})\\.?|(${KRe})?\\.(${KRe}))[pP][+-]?(${qRe})[fFdD]?\\b`},{begin:"\\b(0|[1-9](_*[0-9])*)[lL]?\\b"},{begin:`\\b0[xX](${KRe})[lL]?\\b`},{begin:"\\b0(_*[0-7])*[lL]?\\b"},{begin:"\\b0[bB][01](_*[01])*[lL]?\\b"}],relevance:0};function ZRe(e,t,n){return-1===n?"":e.replace(t,r=>ZRe(e,t,n-1))}const JRe="[A-Za-z$_][0-9A-Za-z$_]*",QRe=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends","using"],eIe=["true","false","null","undefined","NaN","Infinity"],tIe=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],nIe=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],rIe=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],sIe=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],iIe=[].concat(rIe,tIe,nIe);var aIe="[0-9](_*[0-9])*",oIe=`\\.(${aIe})`,lIe="[0-9a-fA-F](_*[0-9a-fA-F])*",cIe={className:"number",variants:[{begin:`(\\b(${aIe})((${oIe})|\\.)?|(${oIe}))[eE][+-]?(${aIe})[fFdD]?\\b`},{begin:`\\b(${aIe})((${oIe})[fFdD]?\\b|\\.([fFdD]\\b)?)`},{begin:`(${oIe})[fFdD]?\\b`},{begin:`\\b(${aIe})[fFdD]\\b`},{begin:`\\b0[xX]((${lIe})\\.?|(${lIe})?\\.(${lIe}))[pP][+-]?(${aIe})[fFdD]?\\b`},{begin:"\\b(0|[1-9](_*[0-9])*)[lL]?\\b"},{begin:`\\b0[xX](${lIe})[lL]?\\b`},{begin:"\\b0(_*[0-7])*[lL]?\\b"},{begin:"\\b0[bB][01](_*[01])*[lL]?\\b"}],relevance:0};const dIe=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video","defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],uIe=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),hIe=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),pIe=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),mIe=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse(),fIe=hIe.concat(pIe).sort().reverse();const gIe=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video","defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],xIe=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),vIe=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),yIe=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),bIe=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse();function wIe(e){return e?"string"==typeof e?e:e.source:null}function jIe(e){return NIe("(?=",e,")")}function NIe(...e){return e.map(e=>wIe(e)).join("")}function _Ie(...e){const t=function(e){const t=e[e.length-1];return"object"==typeof t&&t.constructor===Object?(e.splice(e.length-1,1),t):{}}(e);return"("+(t.capture?"":"?:")+e.map(e=>wIe(e)).join("|")+")"}const SIe=e=>NIe(/\b/,e,/\w$/.test(e)?/\b/:/\B/),MIe=["Protocol","Type"].map(SIe),CIe=["init","self"].map(SIe),EIe=["Any","Self"],kIe=["actor","any","associatedtype","async","await",/as\?/,/as!/,"as","borrowing","break","case","catch","class","consume","consuming","continue","convenience","copy","default","defer","deinit","didSet","distributed","do","dynamic","each","else","enum","extension","fallthrough",/fileprivate\(set\)/,"fileprivate","final","for","func","get","guard","if","import","indirect","infix",/init\?/,/init!/,"inout",/internal\(set\)/,"internal","in","is","isolated","nonisolated","lazy","let","macro","mutating","nonmutating",/open\(set\)/,"open","operator","optional","override","package","postfix","precedencegroup","prefix",/private\(set\)/,"private","protocol",/public\(set\)/,"public","repeat","required","rethrows","return","set","some","static","struct","subscript","super","switch","throws","throw",/try\?/,/try!/,"try","typealias",/unowned\(safe\)/,/unowned\(unsafe\)/,"unowned","var","weak","where","while","willSet"],AIe=["false","nil","true"],TIe=["assignment","associativity","higherThan","left","lowerThan","none","right"],PIe=["#colorLiteral","#column","#dsohandle","#else","#elseif","#endif","#error","#file","#fileID","#fileLiteral","#filePath","#function","#if","#imageLiteral","#keyPath","#line","#selector","#sourceLocation","#warning"],OIe=["abs","all","any","assert","assertionFailure","debugPrint","dump","fatalError","getVaList","isKnownUniquelyReferenced","max","min","numericCast","pointwiseMax","pointwiseMin","precondition","preconditionFailure","print","readLine","repeatElement","sequence","stride","swap","swift_unboxFromSwiftValueWithType","transcode","type","unsafeBitCast","unsafeDowncast","withExtendedLifetime","withUnsafeMutablePointer","withUnsafePointer","withVaList","withoutActuallyEscaping","zip"],RIe=_Ie(/[/=\-+!*%<>&|^~?]/,/[\u00A1-\u00A7]/,/[\u00A9\u00AB]/,/[\u00AC\u00AE]/,/[\u00B0\u00B1]/,/[\u00B6\u00BB\u00BF\u00D7\u00F7]/,/[\u2016-\u2017]/,/[\u2020-\u2027]/,/[\u2030-\u203E]/,/[\u2041-\u2053]/,/[\u2055-\u205E]/,/[\u2190-\u23FF]/,/[\u2500-\u2775]/,/[\u2794-\u2BFF]/,/[\u2E00-\u2E7F]/,/[\u3001-\u3003]/,/[\u3008-\u3020]/,/[\u3030]/),IIe=_Ie(RIe,/[\u0300-\u036F]/,/[\u1DC0-\u1DFF]/,/[\u20D0-\u20FF]/,/[\uFE00-\uFE0F]/,/[\uFE20-\uFE2F]/),DIe=NIe(RIe,IIe,"*"),LIe=_Ie(/[a-zA-Z_]/,/[\u00A8\u00AA\u00AD\u00AF\u00B2-\u00B5\u00B7-\u00BA]/,/[\u00BC-\u00BE\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u00FF]/,/[\u0100-\u02FF\u0370-\u167F\u1681-\u180D\u180F-\u1DBF]/,/[\u1E00-\u1FFF]/,/[\u200B-\u200D\u202A-\u202E\u203F-\u2040\u2054\u2060-\u206F]/,/[\u2070-\u20CF\u2100-\u218F\u2460-\u24FF\u2776-\u2793]/,/[\u2C00-\u2DFF\u2E80-\u2FFF]/,/[\u3004-\u3007\u3021-\u302F\u3031-\u303F\u3040-\uD7FF]/,/[\uF900-\uFD3D\uFD40-\uFDCF\uFDF0-\uFE1F\uFE30-\uFE44]/,/[\uFE47-\uFEFE\uFF00-\uFFFD]/),FIe=_Ie(LIe,/\d/,/[\u0300-\u036F\u1DC0-\u1DFF\u20D0-\u20FF\uFE20-\uFE2F]/),zIe=NIe(LIe,FIe,"*"),BIe=NIe(/[A-Z]/,FIe,"*"),UIe=["attached","autoclosure",NIe(/convention\(/,_Ie("swift","block","c"),/\)/),"discardableResult","dynamicCallable","dynamicMemberLookup","escaping","freestanding","frozen","GKInspectable","IBAction","IBDesignable","IBInspectable","IBOutlet","IBSegueAction","inlinable","main","nonobjc","NSApplicationMain","NSCopying","NSManaged",NIe(/objc\(/,zIe,/\)/),"objc","objcMembers","propertyWrapper","requires_stored_property_inits","resultBuilder","Sendable","testable","UIApplicationMain","unchecked","unknown","usableFromInline","warn_unqualified_access"],VIe=["iOS","iOSApplicationExtension","macOS","macOSApplicationExtension","macCatalyst","macCatalystApplicationExtension","watchOS","watchOSApplicationExtension","tvOS","tvOSApplicationExtension","swift"];const HIe="[A-Za-z$_][0-9A-Za-z$_]*",WIe=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends","using"],$Ie=["true","false","null","undefined","NaN","Infinity"],GIe=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],qIe=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],XIe=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],KIe=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],YIe=[].concat(XIe,GIe,qIe);const ZIe={arduino:function(e){const t={type:["boolean","byte","word","String"],built_in:["KeyboardController","MouseController","SoftwareSerial","EthernetServer","EthernetClient","LiquidCrystal","RobotControl","GSMVoiceCall","EthernetUDP","EsploraTFT","HttpClient","RobotMotor","WiFiClient","GSMScanner","FileSystem","Scheduler","GSMServer","YunClient","YunServer","IPAddress","GSMClient","GSMModem","Keyboard","Ethernet","Console","GSMBand","Esplora","Stepper","Process","WiFiUDP","GSM_SMS","Mailbox","USBHost","Firmata","PImage","Client","Server","GSMPIN","FileIO","Bridge","Serial","EEPROM","Stream","Mouse","Audio","Servo","File","Task","GPRS","WiFi","Wire","TFT","GSM","SPI","SD"],_hints:["setup","loop","runShellCommandAsynchronously","analogWriteResolution","retrieveCallingNumber","printFirmwareVersion","analogReadResolution","sendDigitalPortPair","noListenOnLocalhost","readJoystickButton","setFirmwareVersion","readJoystickSwitch","scrollDisplayRight","getVoiceCallStatus","scrollDisplayLeft","writeMicroseconds","delayMicroseconds","beginTransmission","getSignalStrength","runAsynchronously","getAsynchronously","listenOnLocalhost","getCurrentCarrier","readAccelerometer","messageAvailable","sendDigitalPorts","lineFollowConfig","countryNameWrite","runShellCommand","readStringUntil","rewindDirectory","readTemperature","setClockDivider","readLightSensor","endTransmission","analogReference","detachInterrupt","countryNameRead","attachInterrupt","encryptionType","readBytesUntil","robotNameWrite","readMicrophone","robotNameRead","cityNameWrite","userNameWrite","readJoystickY","readJoystickX","mouseReleased","openNextFile","scanNetworks","noInterrupts","digitalWrite","beginSpeaker","mousePressed","isActionDone","mouseDragged","displayLogos","noAutoscroll","addParameter","remoteNumber","getModifiers","keyboardRead","userNameRead","waitContinue","processInput","parseCommand","printVersion","readNetworks","writeMessage","blinkVersion","cityNameRead","readMessage","setDataMode","parsePacket","isListening","setBitOrder","beginPacket","isDirectory","motorsWrite","drawCompass","digitalRead","clearScreen","serialEvent","rightToLeft","setTextSize","leftToRight","requestFrom","keyReleased","compassRead","analogWrite","interrupts","WiFiServer","disconnect","playMelody","parseFloat","autoscroll","getPINUsed","setPINUsed","setTimeout","sendAnalog","readSlider","analogRead","beginWrite","createChar","motorsStop","keyPressed","tempoWrite","readButton","subnetMask","debugPrint","macAddress","writeGreen","randomSeed","attachGPRS","readString","sendString","remotePort","releaseAll","mouseMoved","background","getXChange","getYChange","answerCall","getResult","voiceCall","endPacket","constrain","getSocket","writeJSON","getButton","available","connected","findUntil","readBytes","exitValue","readGreen","writeBlue","startLoop","IPAddress","isPressed","sendSysex","pauseMode","gatewayIP","setCursor","getOemKey","tuneWrite","noDisplay","loadImage","switchPIN","onRequest","onReceive","changePIN","playFile","noBuffer","parseInt","overflow","checkPIN","knobRead","beginTFT","bitClear","updateIR","bitWrite","position","writeRGB","highByte","writeRed","setSpeed","readBlue","noStroke","remoteIP","transfer","shutdown","hangCall","beginSMS","endWrite","attached","maintain","noCursor","checkReg","checkPUK","shiftOut","isValid","shiftIn","pulseIn","connect","println","localIP","pinMode","getIMEI","display","noBlink","process","getBand","running","beginSD","drawBMP","lowByte","setBand","release","bitRead","prepare","pointTo","readRed","setMode","noFill","remove","listen","stroke","detach","attach","noTone","exists","buffer","height","bitSet","circle","config","cursor","random","IRread","setDNS","endSMS","getKey","micros","millis","begin","print","write","ready","flush","width","isPIN","blink","clear","press","mkdir","rmdir","close","point","yield","image","BSSID","click","delay","read","text","move","peek","beep","rect","line","open","seek","fill","size","turn","stop","home","find","step","tone","sqrt","RSSI","SSID","end","bit","tan","cos","sin","pow","map","abs","max","min","get","run","put"],literal:["DIGITAL_MESSAGE","FIRMATA_STRING","ANALOG_MESSAGE","REPORT_DIGITAL","REPORT_ANALOG","INPUT_PULLUP","SET_PIN_MODE","INTERNAL2V56","SYSTEM_RESET","LED_BUILTIN","INTERNAL1V1","SYSEX_START","INTERNAL","EXTERNAL","DEFAULT","OUTPUT","INPUT","HIGH","LOW"]},n=function(e){const t=e.regex,n=e.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),r="decltype\\(auto\\)",s="[a-zA-Z_]\\w*::",i="(?!struct)("+r+"|"+t.optional(s)+"[a-zA-Z_]\\w*"+t.optional("<[^<>]+>")+")",a={className:"type",begin:"\\b[a-z\\d_]*_t\\b"},o={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[e.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'(\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)|.)",end:"'",illegal:"."},e.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},l={className:"number",variants:[{begin:"[+-]?(?:(?:[0-9](?:'?[0-9])*\\.(?:[0-9](?:'?[0-9])*)?|\\.[0-9](?:'?[0-9])*)(?:[Ee][+-]?[0-9](?:'?[0-9])*)?|[0-9](?:'?[0-9])*[Ee][+-]?[0-9](?:'?[0-9])*|0[Xx](?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*(?:\\.(?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)?)?|\\.[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)[Pp][+-]?[0-9](?:'?[0-9])*)(?:[Ff](?:16|32|64|128)?|(BF|bf)16|[Ll]|)"},{begin:"[+-]?\\b(?:0[Bb][01](?:'?[01])*|0[Xx][0-9A-Fa-f](?:'?[0-9A-Fa-f])*|0(?:'?[0-7])*|[1-9](?:'?[0-9])*)(?:[Uu](?:LL?|ll?)|[Uu][Zz]?|(?:LL?|ll?)[Uu]?|[Zz][Uu]|)"}],relevance:0},c={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},e.inherit(o,{className:"string"}),{className:"string",begin:/<.*?>/},n,e.C_BLOCK_COMMENT_MODE]},d={className:"title",begin:t.optional(s)+e.IDENT_RE,relevance:0},u=t.optional(s)+e.IDENT_RE+"\\s*\\(",h={type:["bool","char","char16_t","char32_t","char8_t","double","float","int","long","short","void","wchar_t","unsigned","signed","const","static"],keyword:["alignas","alignof","and","and_eq","asm","atomic_cancel","atomic_commit","atomic_noexcept","auto","bitand","bitor","break","case","catch","class","co_await","co_return","co_yield","compl","concept","const_cast|10","consteval","constexpr","constinit","continue","decltype","default","delete","do","dynamic_cast|10","else","enum","explicit","export","extern","false","final","for","friend","goto","if","import","inline","module","mutable","namespace","new","noexcept","not","not_eq","nullptr","operator","or","or_eq","override","private","protected","public","reflexpr","register","reinterpret_cast|10","requires","return","sizeof","static_assert","static_cast|10","struct","switch","synchronized","template","this","thread_local","throw","transaction_safe","transaction_safe_dynamic","true","try","typedef","typeid","typename","union","using","virtual","volatile","while","xor","xor_eq"],literal:["NULL","false","nullopt","nullptr","true"],built_in:["_Pragma"],_type_hints:["any","auto_ptr","barrier","binary_semaphore","bitset","complex","condition_variable","condition_variable_any","counting_semaphore","deque","false_type","flat_map","flat_set","future","imaginary","initializer_list","istringstream","jthread","latch","lock_guard","multimap","multiset","mutex","optional","ostringstream","packaged_task","pair","promise","priority_queue","queue","recursive_mutex","recursive_timed_mutex","scoped_lock","set","shared_future","shared_lock","shared_mutex","shared_timed_mutex","shared_ptr","stack","string_view","stringstream","timed_mutex","thread","true_type","tuple","unique_lock","unique_ptr","unordered_map","unordered_multimap","unordered_multiset","unordered_set","variant","vector","weak_ptr","wstring","wstring_view"]},p={className:"function.dispatch",relevance:0,keywords:{_hint:["abort","abs","acos","apply","as_const","asin","atan","atan2","calloc","ceil","cerr","cin","clog","cos","cosh","cout","declval","endl","exchange","exit","exp","fabs","floor","fmod","forward","fprintf","fputs","free","frexp","fscanf","future","invoke","isalnum","isalpha","iscntrl","isdigit","isgraph","islower","isprint","ispunct","isspace","isupper","isxdigit","labs","launder","ldexp","log","log10","make_pair","make_shared","make_shared_for_overwrite","make_tuple","make_unique","malloc","memchr","memcmp","memcpy","memset","modf","move","pow","printf","putchar","puts","realloc","scanf","sin","sinh","snprintf","sprintf","sqrt","sscanf","std","stderr","stdin","stdout","strcat","strchr","strcmp","strcpy","strcspn","strlen","strncat","strncmp","strncpy","strpbrk","strrchr","strspn","strstr","swap","tan","tanh","terminate","to_underlying","tolower","toupper","vfprintf","visit","vprintf","vsprintf"]},begin:t.concat(/\b/,/(?!decltype)/,/(?!if)/,/(?!for)/,/(?!switch)/,/(?!while)/,e.IDENT_RE,t.lookahead(/(<[^<>]+>|)\s*\(/))},m=[p,c,a,n,e.C_BLOCK_COMMENT_MODE,l,o],f={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:h,contains:m.concat([{begin:/\(/,end:/\)/,keywords:h,contains:m.concat(["self"]),relevance:0}]),relevance:0},g={className:"function",begin:"("+i+"[\\*&\\s]+)+"+u,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:h,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:r,keywords:h,relevance:0},{begin:u,returnBegin:!0,contains:[d],relevance:0},{begin:/::/,relevance:0},{begin:/:/,endsWithParent:!0,contains:[o,l]},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:h,relevance:0,contains:[n,e.C_BLOCK_COMMENT_MODE,o,l,a,{begin:/\(/,end:/\)/,keywords:h,relevance:0,contains:["self",n,e.C_BLOCK_COMMENT_MODE,o,l,a]}]},a,n,e.C_BLOCK_COMMENT_MODE,c]};return{name:"C++",aliases:["cc","c++","h++","hpp","hh","hxx","cxx"],keywords:h,illegal:"</",classNameAliases:{"function.dispatch":"built_in"},contains:[].concat(f,g,p,m,[c,{begin:"\\b(deque|list|queue|priority_queue|pair|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array|tuple|optional|variant|function|flat_map|flat_set)\\s*<(?!<)",end:">",keywords:h,contains:["self",a]},{begin:e.IDENT_RE+"::",keywords:h},{match:[/\b(?:enum(?:\s+(?:class|struct))?|class|struct|union)/,/\s+/,/\w+/],className:{1:"keyword",3:"title.class"}}])}}(e),r=n.keywords;return r.type=[...r.type,...t.type],r.literal=[...r.literal,...t.literal],r.built_in=[...r.built_in,...t.built_in],r._hints=t._hints,n.name="Arduino",n.aliases=["ino"],n.supersetOf="cpp",n},bash:function(e){const t=e.regex,n={},r={begin:/\$\{/,end:/\}/,contains:["self",{begin:/:-/,contains:[n]}]};Object.assign(n,{className:"variable",variants:[{begin:t.concat(/\$[\w\d#@][\w\d_]*/,"(?![\\w\\d])(?![$])")},r]});const s={className:"subst",begin:/\$\(/,end:/\)/,contains:[e.BACKSLASH_ESCAPE]},i=e.inherit(e.COMMENT(),{match:[/(^|\s)/,/#.*$/],scope:{2:"comment"}}),a={begin:/<<-?\s*(?=\w+)/,starts:{contains:[e.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,className:"string"})]}},o={className:"string",begin:/"/,end:/"/,contains:[e.BACKSLASH_ESCAPE,n,s]};s.contains.push(o);const l={begin:/\$?\(\(/,end:/\)\)/,contains:[{begin:/\d+#[0-9a-f]+/,className:"number"},e.NUMBER_MODE,n]},c=e.SHEBANG({binary:`(${["fish","bash","zsh","sh","csh","ksh","tcsh","dash","scsh"].join("|")})`,relevance:10}),d={className:"function",begin:/\w[\w\d_]*\s*\(\s*\)\s*\{/,returnBegin:!0,contains:[e.inherit(e.TITLE_MODE,{begin:/\w[\w\d_]*/})],relevance:0};return{name:"Bash",aliases:["sh","zsh"],keywords:{$pattern:/\b[a-z][a-z0-9._-]+\b/,keyword:["if","then","else","elif","fi","time","for","while","until","in","do","done","case","esac","coproc","function","select"],literal:["true","false"],built_in:["break","cd","continue","eval","exec","exit","export","getopts","hash","pwd","readonly","return","shift","test","times","trap","umask","unset","alias","bind","builtin","caller","command","declare","echo","enable","help","let","local","logout","mapfile","printf","read","readarray","source","sudo","type","typeset","ulimit","unalias","set","shopt","autoload","bg","bindkey","bye","cap","chdir","clone","comparguments","compcall","compctl","compdescribe","compfiles","compgroups","compquote","comptags","comptry","compvalues","dirs","disable","disown","echotc","echoti","emulate","fc","fg","float","functions","getcap","getln","history","integer","jobs","kill","limit","log","noglob","popd","print","pushd","pushln","rehash","sched","setcap","setopt","stat","suspend","ttyctl","unfunction","unhash","unlimit","unsetopt","vared","wait","whence","where","which","zcompile","zformat","zftp","zle","zmodload","zparseopts","zprof","zpty","zregexparse","zsocket","zstyle","ztcp","chcon","chgrp","chown","chmod","cp","dd","df","dir","dircolors","ln","ls","mkdir","mkfifo","mknod","mktemp","mv","realpath","rm","rmdir","shred","sync","touch","truncate","vdir","b2sum","base32","base64","cat","cksum","comm","csplit","cut","expand","fmt","fold","head","join","md5sum","nl","numfmt","od","paste","ptx","pr","sha1sum","sha224sum","sha256sum","sha384sum","sha512sum","shuf","sort","split","sum","tac","tail","tr","tsort","unexpand","uniq","wc","arch","basename","chroot","date","dirname","du","echo","env","expr","factor","groups","hostid","id","link","logname","nice","nohup","nproc","pathchk","pinky","printenv","printf","pwd","readlink","runcon","seq","sleep","stat","stdbuf","stty","tee","test","timeout","tty","uname","unlink","uptime","users","who","whoami","yes"]},contains:[c,e.SHEBANG(),d,l,i,a,{match:/(\/[a-z._-]+)+/},o,{match:/\\"/},{className:"string",begin:/'/,end:/'/},{match:/\\'/},n]}},c:function(e){const t=e.regex,n=e.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),r="decltype\\(auto\\)",s="[a-zA-Z_]\\w*::",i="("+r+"|"+t.optional(s)+"[a-zA-Z_]\\w*"+t.optional("<[^<>]+>")+")",a={className:"type",variants:[{begin:"\\b[a-z\\d_]*_t\\b"},{match:/\batomic_[a-z]{3,6}\b/}]},o={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[e.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'(\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)|.)",end:"'",illegal:"."},e.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},l={className:"number",variants:[{match:/\b(0b[01']+)/},{match:/(-?)\b([\d']+(\.[\d']*)?|\.[\d']+)((ll|LL|l|L)(u|U)?|(u|U)(ll|LL|l|L)?|f|F|b|B)/},{match:/(-?)\b(0[xX][a-fA-F0-9]+(?:'[a-fA-F0-9]+)*(?:\.[a-fA-F0-9]*(?:'[a-fA-F0-9]*)*)?(?:[pP][-+]?[0-9]+)?(l|L)?(u|U)?)/},{match:/(-?)\b\d+(?:'\d+)*(?:\.\d*(?:'\d*)*)?(?:[eE][-+]?\d+)?/}],relevance:0},c={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef elifdef elifndef include"},contains:[{begin:/\\\n/,relevance:0},e.inherit(o,{className:"string"}),{className:"string",begin:/<.*?>/},n,e.C_BLOCK_COMMENT_MODE]},d={className:"title",begin:t.optional(s)+e.IDENT_RE,relevance:0},u=t.optional(s)+e.IDENT_RE+"\\s*\\(",h={keyword:["asm","auto","break","case","continue","default","do","else","enum","extern","for","fortran","goto","if","inline","register","restrict","return","sizeof","typeof","typeof_unqual","struct","switch","typedef","union","volatile","while","_Alignas","_Alignof","_Atomic","_Generic","_Noreturn","_Static_assert","_Thread_local","alignas","alignof","noreturn","static_assert","thread_local","_Pragma"],type:["float","double","signed","unsigned","int","short","long","char","void","_Bool","_BitInt","_Complex","_Imaginary","_Decimal32","_Decimal64","_Decimal96","_Decimal128","_Decimal64x","_Decimal128x","_Float16","_Float32","_Float64","_Float128","_Float32x","_Float64x","_Float128x","const","static","constexpr","complex","bool","imaginary"],literal:"true false NULL",built_in:"std string wstring cin cout cerr clog stdin stdout stderr stringstream istringstream ostringstream auto_ptr deque list queue stack vector map set pair bitset multiset multimap unordered_set unordered_map unordered_multiset unordered_multimap priority_queue make_pair array shared_ptr abort terminate abs acos asin atan2 atan calloc ceil cosh cos exit exp fabs floor fmod fprintf fputs free frexp fscanf future isalnum isalpha iscntrl isdigit isgraph islower isprint ispunct isspace isupper isxdigit tolower toupper labs ldexp log10 log malloc realloc memchr memcmp memcpy memset modf pow printf putchar puts scanf sinh sin snprintf sprintf sqrt sscanf strcat strchr strcmp strcpy strcspn strlen strncat strncmp strncpy strpbrk strrchr strspn strstr tanh tan vfprintf vprintf vsprintf endl initializer_list unique_ptr"},p=[c,a,n,e.C_BLOCK_COMMENT_MODE,l,o],m={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:h,contains:p.concat([{begin:/\(/,end:/\)/,keywords:h,contains:p.concat(["self"]),relevance:0}]),relevance:0},f={begin:"("+i+"[\\*&\\s]+)+"+u,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:h,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:r,keywords:h,relevance:0},{begin:u,returnBegin:!0,contains:[e.inherit(d,{className:"title.function"})],relevance:0},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:h,relevance:0,contains:[n,e.C_BLOCK_COMMENT_MODE,o,l,a,{begin:/\(/,end:/\)/,keywords:h,relevance:0,contains:["self",n,e.C_BLOCK_COMMENT_MODE,o,l,a]}]},a,n,e.C_BLOCK_COMMENT_MODE,c]};return{name:"C",aliases:["h"],keywords:h,disableAutodetect:!0,illegal:"</",contains:[].concat(m,f,p,[c,{begin:e.IDENT_RE+"::",keywords:h},{className:"class",beginKeywords:"enum class struct union",end:/[{;:<>=]/,contains:[{beginKeywords:"final class struct"},e.TITLE_MODE]}]),exports:{preprocessor:c,strings:o,keywords:h}}},cpp:function(e){const t=e.regex,n=e.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),r="decltype\\(auto\\)",s="[a-zA-Z_]\\w*::",i="(?!struct)("+r+"|"+t.optional(s)+"[a-zA-Z_]\\w*"+t.optional("<[^<>]+>")+")",a={className:"type",begin:"\\b[a-z\\d_]*_t\\b"},o={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[e.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'(\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)|.)",end:"'",illegal:"."},e.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},l={className:"number",variants:[{begin:"[+-]?(?:(?:[0-9](?:'?[0-9])*\\.(?:[0-9](?:'?[0-9])*)?|\\.[0-9](?:'?[0-9])*)(?:[Ee][+-]?[0-9](?:'?[0-9])*)?|[0-9](?:'?[0-9])*[Ee][+-]?[0-9](?:'?[0-9])*|0[Xx](?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*(?:\\.(?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)?)?|\\.[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)[Pp][+-]?[0-9](?:'?[0-9])*)(?:[Ff](?:16|32|64|128)?|(BF|bf)16|[Ll]|)"},{begin:"[+-]?\\b(?:0[Bb][01](?:'?[01])*|0[Xx][0-9A-Fa-f](?:'?[0-9A-Fa-f])*|0(?:'?[0-7])*|[1-9](?:'?[0-9])*)(?:[Uu](?:LL?|ll?)|[Uu][Zz]?|(?:LL?|ll?)[Uu]?|[Zz][Uu]|)"}],relevance:0},c={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},e.inherit(o,{className:"string"}),{className:"string",begin:/<.*?>/},n,e.C_BLOCK_COMMENT_MODE]},d={className:"title",begin:t.optional(s)+e.IDENT_RE,relevance:0},u=t.optional(s)+e.IDENT_RE+"\\s*\\(",h={type:["bool","char","char16_t","char32_t","char8_t","double","float","int","long","short","void","wchar_t","unsigned","signed","const","static"],keyword:["alignas","alignof","and","and_eq","asm","atomic_cancel","atomic_commit","atomic_noexcept","auto","bitand","bitor","break","case","catch","class","co_await","co_return","co_yield","compl","concept","const_cast|10","consteval","constexpr","constinit","continue","decltype","default","delete","do","dynamic_cast|10","else","enum","explicit","export","extern","false","final","for","friend","goto","if","import","inline","module","mutable","namespace","new","noexcept","not","not_eq","nullptr","operator","or","or_eq","override","private","protected","public","reflexpr","register","reinterpret_cast|10","requires","return","sizeof","static_assert","static_cast|10","struct","switch","synchronized","template","this","thread_local","throw","transaction_safe","transaction_safe_dynamic","true","try","typedef","typeid","typename","union","using","virtual","volatile","while","xor","xor_eq"],literal:["NULL","false","nullopt","nullptr","true"],built_in:["_Pragma"],_type_hints:["any","auto_ptr","barrier","binary_semaphore","bitset","complex","condition_variable","condition_variable_any","counting_semaphore","deque","false_type","flat_map","flat_set","future","imaginary","initializer_list","istringstream","jthread","latch","lock_guard","multimap","multiset","mutex","optional","ostringstream","packaged_task","pair","promise","priority_queue","queue","recursive_mutex","recursive_timed_mutex","scoped_lock","set","shared_future","shared_lock","shared_mutex","shared_timed_mutex","shared_ptr","stack","string_view","stringstream","timed_mutex","thread","true_type","tuple","unique_lock","unique_ptr","unordered_map","unordered_multimap","unordered_multiset","unordered_set","variant","vector","weak_ptr","wstring","wstring_view"]},p={className:"function.dispatch",relevance:0,keywords:{_hint:["abort","abs","acos","apply","as_const","asin","atan","atan2","calloc","ceil","cerr","cin","clog","cos","cosh","cout","declval","endl","exchange","exit","exp","fabs","floor","fmod","forward","fprintf","fputs","free","frexp","fscanf","future","invoke","isalnum","isalpha","iscntrl","isdigit","isgraph","islower","isprint","ispunct","isspace","isupper","isxdigit","labs","launder","ldexp","log","log10","make_pair","make_shared","make_shared_for_overwrite","make_tuple","make_unique","malloc","memchr","memcmp","memcpy","memset","modf","move","pow","printf","putchar","puts","realloc","scanf","sin","sinh","snprintf","sprintf","sqrt","sscanf","std","stderr","stdin","stdout","strcat","strchr","strcmp","strcpy","strcspn","strlen","strncat","strncmp","strncpy","strpbrk","strrchr","strspn","strstr","swap","tan","tanh","terminate","to_underlying","tolower","toupper","vfprintf","visit","vprintf","vsprintf"]},begin:t.concat(/\b/,/(?!decltype)/,/(?!if)/,/(?!for)/,/(?!switch)/,/(?!while)/,e.IDENT_RE,t.lookahead(/(<[^<>]+>|)\s*\(/))},m=[p,c,a,n,e.C_BLOCK_COMMENT_MODE,l,o],f={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:h,contains:m.concat([{begin:/\(/,end:/\)/,keywords:h,contains:m.concat(["self"]),relevance:0}]),relevance:0},g={className:"function",begin:"("+i+"[\\*&\\s]+)+"+u,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:h,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:r,keywords:h,relevance:0},{begin:u,returnBegin:!0,contains:[d],relevance:0},{begin:/::/,relevance:0},{begin:/:/,endsWithParent:!0,contains:[o,l]},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:h,relevance:0,contains:[n,e.C_BLOCK_COMMENT_MODE,o,l,a,{begin:/\(/,end:/\)/,keywords:h,relevance:0,contains:["self",n,e.C_BLOCK_COMMENT_MODE,o,l,a]}]},a,n,e.C_BLOCK_COMMENT_MODE,c]};return{name:"C++",aliases:["cc","c++","h++","hpp","hh","hxx","cxx"],keywords:h,illegal:"</",classNameAliases:{"function.dispatch":"built_in"},contains:[].concat(f,g,p,m,[c,{begin:"\\b(deque|list|queue|priority_queue|pair|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array|tuple|optional|variant|function|flat_map|flat_set)\\s*<(?!<)",end:">",keywords:h,contains:["self",a]},{begin:e.IDENT_RE+"::",keywords:h},{match:[/\b(?:enum(?:\s+(?:class|struct))?|class|struct|union)/,/\s+/,/\w+/],className:{1:"keyword",3:"title.class"}}])}},csharp:function(e){const t={keyword:["abstract","as","base","break","case","catch","class","const","continue","do","else","event","explicit","extern","finally","fixed","for","foreach","goto","if","implicit","in","interface","internal","is","lock","namespace","new","operator","out","override","params","private","protected","public","readonly","record","ref","return","scoped","sealed","sizeof","stackalloc","static","struct","switch","this","throw","try","typeof","unchecked","unsafe","using","virtual","void","volatile","while"].concat(["add","alias","and","ascending","args","async","await","by","descending","dynamic","equals","file","from","get","global","group","init","into","join","let","nameof","not","notnull","on","or","orderby","partial","record","remove","required","scoped","select","set","unmanaged","value|0","var","when","where","with","yield"]),built_in:["bool","byte","char","decimal","delegate","double","dynamic","enum","float","int","long","nint","nuint","object","sbyte","short","string","ulong","uint","ushort"],literal:["default","false","null","true"]},n=e.inherit(e.TITLE_MODE,{begin:"[a-zA-Z](\\.?\\w)*"}),r={className:"number",variants:[{begin:"\\b(0b[01']+)"},{begin:"(-?)\\b([\\d']+(\\.[\\d']*)?|\\.[\\d']+)(u|U|l|L|ul|UL|f|F|b|B)"},{begin:"(-?)(\\b0[xX][a-fA-F0-9']+|(\\b[\\d']+(\\.[\\d']*)?|\\.[\\d']+)([eE][-+]?[\\d']+)?)"}],relevance:0},s={className:"string",begin:'@"',end:'"',contains:[{begin:'""'}]},i=e.inherit(s,{illegal:/\n/}),a={className:"subst",begin:/\{/,end:/\}/,keywords:t},o=e.inherit(a,{illegal:/\n/}),l={className:"string",begin:/\$"/,end:'"',illegal:/\n/,contains:[{begin:/\{\{/},{begin:/\}\}/},e.BACKSLASH_ESCAPE,o]},c={className:"string",begin:/\$@"/,end:'"',contains:[{begin:/\{\{/},{begin:/\}\}/},{begin:'""'},a]},d=e.inherit(c,{illegal:/\n/,contains:[{begin:/\{\{/},{begin:/\}\}/},{begin:'""'},o]});a.contains=[c,l,s,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,r,e.C_BLOCK_COMMENT_MODE],o.contains=[d,l,i,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,r,e.inherit(e.C_BLOCK_COMMENT_MODE,{illegal:/\n/})];const u={variants:[{className:"string",begin:/"""("*)(?!")(.|\n)*?"""\1/,relevance:1},c,l,s,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},h={begin:"<",end:">",contains:[{beginKeywords:"in out"},n]},p=e.IDENT_RE+"(<"+e.IDENT_RE+"(\\s*,\\s*"+e.IDENT_RE+")*>)?(\\[\\])?",m={begin:"@"+e.IDENT_RE,relevance:0};return{name:"C#",aliases:["cs","c#"],keywords:t,illegal:/::/,contains:[e.COMMENT("///","$",{returnBegin:!0,contains:[{className:"doctag",variants:[{begin:"///",relevance:0},{begin:"\x3c!--|--\x3e"},{begin:"</?",end:">"}]}]}),e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,{className:"meta",begin:"#",end:"$",keywords:{keyword:"if else elif endif define undef warning error line region endregion pragma checksum"}},u,r,{beginKeywords:"class interface",relevance:0,end:/[{;=]/,illegal:/[^\s:,]/,contains:[{beginKeywords:"where class"},n,h,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{beginKeywords:"namespace",relevance:0,end:/[{;=]/,illegal:/[^\s:]/,contains:[n,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{beginKeywords:"record",relevance:0,end:/[{;=]/,illegal:/[^\s:]/,contains:[n,h,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{className:"meta",begin:"^\\s*\\[(?=[\\w])",excludeBegin:!0,end:"\\]",excludeEnd:!0,contains:[{className:"string",begin:/"/,end:/"/}]},{beginKeywords:"new return throw await else",relevance:0},{className:"function",begin:"("+p+"\\s+)+"+e.IDENT_RE+"\\s*(<[^=]+>\\s*)?\\(",returnBegin:!0,end:/\s*[{;=]/,excludeEnd:!0,keywords:t,contains:[{beginKeywords:["public","private","protected","static","internal","protected","abstract","async","extern","override","unsafe","virtual","new","sealed","partial"].join(" "),relevance:0},{begin:e.IDENT_RE+"\\s*(<[^=]+>\\s*)?\\(",returnBegin:!0,contains:[e.TITLE_MODE,h],relevance:0},{match:/\(\)/},{className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:t,relevance:0,contains:[u,r,e.C_BLOCK_COMMENT_MODE]},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},m]}},css:function(e){const t=e.regex,n=(e=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:e.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:e.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}))(e),r=[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE];return{name:"CSS",case_insensitive:!0,illegal:/[=|'\$]/,keywords:{keyframePosition:"from to"},classNameAliases:{keyframePosition:"selector-tag"},contains:[n.BLOCK_COMMENT,{begin:/-(webkit|moz|ms|o)-(?=[a-z])/},n.CSS_NUMBER_MODE,{className:"selector-id",begin:/#[A-Za-z0-9_-]+/,relevance:0},{className:"selector-class",begin:"\\.[a-zA-Z-][a-zA-Z0-9_-]*",relevance:0},n.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",variants:[{begin:":("+WRe.join("|")+")"},{begin:":(:)?("+$Re.join("|")+")"}]},n.CSS_VARIABLE,{className:"attribute",begin:"\\b("+GRe.join("|")+")\\b"},{begin:/:/,end:/[;}{]/,contains:[n.BLOCK_COMMENT,n.HEXCOLOR,n.IMPORTANT,n.CSS_NUMBER_MODE,...r,{begin:/(url|data-uri)\(/,end:/\)/,relevance:0,keywords:{built_in:"url data-uri"},contains:[...r,{className:"string",begin:/[^)]/,endsWithParent:!0,excludeEnd:!0}]},n.FUNCTION_DISPATCH]},{begin:t.lookahead(/@/),end:"[{;]",relevance:0,illegal:/:/,contains:[{className:"keyword",begin:/@-?\w[\w]*(-\w+)*/},{begin:/\s/,endsWithParent:!0,excludeEnd:!0,relevance:0,keywords:{$pattern:/[a-z-]+/,keyword:"and or not only",attribute:HRe.join(" ")},contains:[{begin:/[a-z-]+(?=:)/,className:"attribute"},...r,n.CSS_NUMBER_MODE]}]},{className:"selector-tag",begin:"\\b("+VRe.join("|")+")\\b"}]}},diff:function(e){const t=e.regex;return{name:"Diff",aliases:["patch"],contains:[{className:"meta",relevance:10,match:t.either(/^@@ +-\d+,\d+ +\+\d+,\d+ +@@/,/^\*\*\* +\d+,\d+ +\*\*\*\*$/,/^--- +\d+,\d+ +----$/)},{className:"comment",variants:[{begin:t.either(/Index: /,/^index/,/={3,}/,/^-{3}/,/^\*{3} /,/^\+{3}/,/^diff --git/),end:/$/},{match:/^\*{15}$/}]},{className:"addition",begin:/^\+/,end:/$/},{className:"deletion",begin:/^-/,end:/$/},{className:"addition",begin:/^!/,end:/$/}]}},go:function(e){const t={keyword:["break","case","chan","const","continue","default","defer","else","fallthrough","for","func","go","goto","if","import","interface","map","package","range","return","select","struct","switch","type","var"],type:["bool","byte","complex64","complex128","error","float32","float64","int8","int16","int32","int64","string","uint8","uint16","uint32","uint64","int","uint","uintptr","rune"],literal:["true","false","iota","nil"],built_in:["append","cap","close","complex","copy","imag","len","make","new","panic","print","println","real","recover","delete"]};return{name:"Go",aliases:["golang"],keywords:t,illegal:"</",contains:[e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,{className:"string",variants:[e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,{begin:"`",end:"`"}]},{className:"number",variants:[{match:/-?\b0[xX]\.[a-fA-F0-9](_?[a-fA-F0-9])*[pP][+-]?\d(_?\d)*i?/,relevance:0},{match:/-?\b0[xX](_?[a-fA-F0-9])+((\.([a-fA-F0-9](_?[a-fA-F0-9])*)?)?[pP][+-]?\d(_?\d)*)?i?/,relevance:0},{match:/-?\b0[oO](_?[0-7])*i?/,relevance:0},{match:/-?\.\d(_?\d)*([eE][+-]?\d(_?\d)*)?i?/,relevance:0},{match:/-?\b\d(_?\d)*(\.(\d(_?\d)*)?)?([eE][+-]?\d(_?\d)*)?i?/,relevance:0}]},{begin:/:=/},{className:"function",beginKeywords:"func",end:"\\s*(\\{|$)",excludeEnd:!0,contains:[e.TITLE_MODE,{className:"params",begin:/\(/,end:/\)/,endsParent:!0,keywords:t,illegal:/["']/}]}]}},graphql:function(e){const t=e.regex;return{name:"GraphQL",aliases:["gql"],case_insensitive:!0,disableAutodetect:!1,keywords:{keyword:["query","mutation","subscription","type","input","schema","directive","interface","union","scalar","fragment","enum","on"],literal:["true","false","null"]},contains:[e.HASH_COMMENT_MODE,e.QUOTE_STRING_MODE,e.NUMBER_MODE,{scope:"punctuation",match:/[.]{3}/,relevance:0},{scope:"punctuation",begin:/[\!\(\)\:\=\[\]\{\|\}]{1}/,relevance:0},{scope:"variable",begin:/\$/,end:/\W/,excludeEnd:!0,relevance:0},{scope:"meta",match:/@\w+/,excludeEnd:!0},{scope:"symbol",begin:t.concat(/[_A-Za-z][_0-9A-Za-z]*/,t.lookahead(/\s*:/)),relevance:0}],illegal:[/[;<']/,/BEGIN/]}},ini:function(e){const t=e.regex,n={className:"number",relevance:0,variants:[{begin:/([+-]+)?[\d]+_[\d_]+/},{begin:e.NUMBER_RE}]},r=e.COMMENT();r.variants=[{begin:/;/,end:/$/},{begin:/#/,end:/$/}];const s={className:"variable",variants:[{begin:/\$[\w\d"][\w\d_]*/},{begin:/\$\{(.*?)\}/}]},i={className:"literal",begin:/\bon|off|true|false|yes|no\b/},a={className:"string",contains:[e.BACKSLASH_ESCAPE],variants:[{begin:"'''",end:"'''",relevance:10},{begin:'"""',end:'"""',relevance:10},{begin:'"',end:'"'},{begin:"'",end:"'"}]},o={begin:/\[/,end:/\]/,contains:[r,i,s,a,n,"self"],relevance:0},l=t.either(/[A-Za-z0-9_-]+/,/"(\\"|[^"])*"/,/'[^']*'/);return{name:"TOML, also INI",aliases:["toml"],case_insensitive:!0,illegal:/\S/,contains:[r,{className:"section",begin:/\[+/,end:/\]+/},{begin:t.concat(l,"(\\s*\\.\\s*",l,")*",t.lookahead(/\s*=\s*[^#\s]/)),className:"attr",starts:{end:/$/,contains:[r,o,i,s,a,n]}}]}},java:function(e){const t=e.regex,n="[-a-zA-Z_$][-a-zA-Z_$0-9]*",r=n+ZRe("(?:<"+n+"~~~(?:\\s*,\\s*"+n+"~~~)*>)?",/~~~/g,2),s={keyword:["synchronized","abstract","private","var","static","if","const ","for","while","strictfp","finally","protected","import","native","final","void","enum","else","break","transient","catch","instanceof","volatile","case","assert","package","default","public","try","switch","continue","throws","protected","public","private","module","requires","exports","do","sealed","yield","permits","goto","when"],literal:["false","true","null"],type:["char","boolean","long","float","int","byte","short","double"],built_in:["super","this"]},i={className:"meta",begin:"@"+n,contains:[{begin:/\(/,end:/\)/,contains:["self"]}]},a={className:"params",begin:/\(/,end:/\)/,keywords:s,relevance:0,contains:[e.C_BLOCK_COMMENT_MODE],endsParent:!0};return{name:"Java",aliases:["jsp"],keywords:s,illegal:/<\/|#/,contains:[e.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{begin:/\w+@/,relevance:0},{className:"doctag",begin:"@[A-Za-z]+"}]}),{begin:/import java\.[a-z]+\./,keywords:"import",relevance:2},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,{begin:/"""/,end:/"""/,className:"string",contains:[e.BACKSLASH_ESCAPE]},e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,{match:[/\b(?:class|interface|enum|extends|implements|new)/,/\s+/,n],className:{1:"keyword",3:"title.class"}},{match:/non-sealed/,scope:"keyword"},{begin:[t.concat(/(?!else)/,n),/\s+/,n,/\s+/,/=(?!=)/],className:{1:"type",3:"variable",5:"operator"}},{begin:[/record/,/\s+/,n],className:{1:"keyword",3:"title.class"},contains:[a,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{beginKeywords:"new throw return else",relevance:0},{begin:["(?:"+r+"\\s+)",e.UNDERSCORE_IDENT_RE,/\s*(?=\()/],className:{2:"title.function"},keywords:s,contains:[{className:"params",begin:/\(/,end:/\)/,keywords:s,relevance:0,contains:[i,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,YRe,e.C_BLOCK_COMMENT_MODE]},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},YRe,i]}},javascript:function(e){const t=e.regex,n=JRe,r="<>",s="</>",i={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(e,t)=>{const n=e[0].length+e.index,r=e.input[n];if("<"===r||","===r)return void t.ignoreMatch();let s;">"===r&&(((e,{after:t})=>{const n="</"+e[0].slice(1);return-1!==e.input.indexOf(n,t)})(e,{after:n})||t.ignoreMatch());const i=e.input.substring(n);((s=i.match(/^\s*=/))||(s=i.match(/^\s+extends\s+/))&&0===s.index)&&t.ignoreMatch()}},a={$pattern:JRe,keyword:QRe,literal:eIe,built_in:iIe,"variable.language":sIe},o="[0-9](_?[0-9])*",l=`\\.(${o})`,c="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",d={className:"number",variants:[{begin:`(\\b(${c})((${l})|\\.)?|(${l}))[eE][+-]?(${o})\\b`},{begin:`\\b(${c})\\b((${l})\\b|\\.)?|(${l})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},u={className:"subst",begin:"\\$\\{",end:"\\}",keywords:a,contains:[]},h={begin:".?html`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,u],subLanguage:"xml"}},p={begin:".?css`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,u],subLanguage:"css"}},m={begin:".?gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,u],subLanguage:"graphql"}},f={className:"string",begin:"`",end:"`",contains:[e.BACKSLASH_ESCAPE,u]},g={className:"comment",variants:[e.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:n+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),e.C_BLOCK_COMMENT_MODE,e.C_LINE_COMMENT_MODE]},x=[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,h,p,m,f,{match:/\$\d+/},d];u.contains=x.concat({begin:/\{/,end:/\}/,keywords:a,contains:["self"].concat(x)});const v=[].concat(g,u.contains),y=v.concat([{begin:/(\s*)\(/,end:/\)/,keywords:a,contains:["self"].concat(v)}]),b={className:"params",begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:a,contains:y},w={variants:[{match:[/class/,/\s+/,n,/\s+/,/extends/,/\s+/,t.concat(n,"(",t.concat(/\./,n),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,n],scope:{1:"keyword",3:"title.class"}}]},j={relevance:0,match:t.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...tIe,...nIe]}},N={variants:[{match:[/function/,/\s+/,n,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[b],illegal:/%/},_={match:t.concat(/\b/,(S=[...rIe,"super","import"].map(e=>`${e}\\s*\\(`),t.concat("(?!",S.join("|"),")")),n,t.lookahead(/\s*\(/)),className:"title.function",relevance:0};var S;const M={begin:t.concat(/\./,t.lookahead(t.concat(n,/(?![0-9A-Za-z$_(])/))),end:n,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},C={match:[/get|set/,/\s+/,n,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},b]},E="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+e.UNDERSCORE_IDENT_RE+")\\s*=>",k={match:[/const|var|let/,/\s+/,n,/\s*/,/=\s*/,/(async\s*)?/,t.lookahead(E)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[b]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:a,exports:{PARAMS_CONTAINS:y,CLASS_REFERENCE:j},illegal:/#(?![$_A-z])/,contains:[e.SHEBANG({label:"shebang",binary:"node",relevance:5}),{label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,h,p,m,f,g,{match:/\$\d+/},d,j,{scope:"attr",match:n+t.lookahead(":"),relevance:0},k,{begin:"("+e.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[g,e.REGEXP_MODE,{className:"function",begin:E,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:e.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:a,contains:y}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:r,end:s},{match:/<[A-Za-z0-9\\._:-]+\s*\/>/},{begin:i.begin,"on:begin":i.isTrulyOpeningTag,end:i.end}],subLanguage:"xml",contains:[{begin:i.begin,end:i.end,skip:!0,contains:["self"]}]}]},N,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+e.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[b,e.inherit(e.TITLE_MODE,{begin:n,className:"title.function"})]},{match:/\.\.\./,relevance:0},M,{match:"\\$"+n,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[b]},_,{relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"},w,C,{match:/\$[(.]/}]}},json:function(e){const t=["true","false","null"],n={scope:"literal",beginKeywords:t.join(" ")};return{name:"JSON",aliases:["jsonc"],keywords:{literal:t},contains:[{className:"attr",begin:/"(\\.|[^\\"\r\n])*"(?=\s*:)/,relevance:1.01},{match:/[{}[\],:]/,className:"punctuation",relevance:0},e.QUOTE_STRING_MODE,n,e.C_NUMBER_MODE,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE],illegal:"\\S"}},kotlin:function(e){const t={keyword:"abstract as val var vararg get set class object open private protected public noinline crossinline dynamic final enum if else do while for when throw try catch finally import package is in fun override companion reified inline lateinit init interface annotation data sealed internal infix operator out by constructor super tailrec where const inner suspend typealias external expect actual",built_in:"Byte Short Char Int Long Boolean Float Double Void Unit Nothing",literal:"true false null"},n={className:"symbol",begin:e.UNDERSCORE_IDENT_RE+"@"},r={className:"subst",begin:/\$\{/,end:/\}/,contains:[e.C_NUMBER_MODE]},s={className:"variable",begin:"\\$"+e.UNDERSCORE_IDENT_RE},i={className:"string",variants:[{begin:'"""',end:'"""(?=[^"])',contains:[s,r]},{begin:"'",end:"'",illegal:/\n/,contains:[e.BACKSLASH_ESCAPE]},{begin:'"',end:'"',illegal:/\n/,contains:[e.BACKSLASH_ESCAPE,s,r]}]};r.contains.push(i);const a={className:"meta",begin:"@(?:file|property|field|get|set|receiver|param|setparam|delegate)\\s*:(?:\\s*"+e.UNDERSCORE_IDENT_RE+")?"},o={className:"meta",begin:"@"+e.UNDERSCORE_IDENT_RE,contains:[{begin:/\(/,end:/\)/,contains:[e.inherit(i,{className:"string"}),"self"]}]},l=cIe,c=e.COMMENT("/\\*","\\*/",{contains:[e.C_BLOCK_COMMENT_MODE]}),d={variants:[{className:"type",begin:e.UNDERSCORE_IDENT_RE},{begin:/\(/,end:/\)/,contains:[]}]},u=d;return u.variants[1].contains=[d],d.variants[1].contains=[u],{name:"Kotlin",aliases:["kt","kts"],keywords:t,contains:[e.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"}]}),e.C_LINE_COMMENT_MODE,c,{className:"keyword",begin:/\b(break|continue|return|this)\b/,starts:{contains:[{className:"symbol",begin:/@\w+/}]}},n,a,o,{className:"function",beginKeywords:"fun",end:"[(]|$",returnBegin:!0,excludeEnd:!0,keywords:t,relevance:5,contains:[{begin:e.UNDERSCORE_IDENT_RE+"\\s*\\(",returnBegin:!0,relevance:0,contains:[e.UNDERSCORE_TITLE_MODE]},{className:"type",begin:/</,end:/>/,keywords:"reified",relevance:0},{className:"params",begin:/\(/,end:/\)/,endsParent:!0,keywords:t,relevance:0,contains:[{begin:/:/,end:/[=,\/]/,endsWithParent:!0,contains:[d,e.C_LINE_COMMENT_MODE,c],relevance:0},e.C_LINE_COMMENT_MODE,c,a,o,i,e.C_NUMBER_MODE]},c]},{begin:[/class|interface|trait/,/\s+/,e.UNDERSCORE_IDENT_RE],beginScope:{3:"title.class"},keywords:"class interface trait",end:/[:\{(]|$/,excludeEnd:!0,illegal:"extends implements",contains:[{beginKeywords:"public protected internal private constructor"},e.UNDERSCORE_TITLE_MODE,{className:"type",begin:/</,end:/>/,excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:/[,:]\s*/,end:/[<\(,){\s]|$/,excludeBegin:!0,returnEnd:!0},a,o]},i,{className:"meta",begin:"^#!/usr/bin/env",end:"$",illegal:"\n"},l]}},less:function(e){const t=(e=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:e.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:e.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}))(e),n=fIe,r="[\\w-]+",s="("+r+"|@\\{"+r+"\\})",i=[],a=[],o=function(e){return{className:"string",begin:"~?"+e+".*?"+e}},l=function(e,t,n){return{className:e,begin:t,relevance:n}},c={$pattern:/[a-z-]+/,keyword:"and or not only",attribute:uIe.join(" ")},d={begin:"\\(",end:"\\)",contains:a,keywords:c,relevance:0};a.push(e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,o("'"),o('"'),t.CSS_NUMBER_MODE,{begin:"(url|data-uri)\\(",starts:{className:"string",end:"[\\)\\n]",excludeEnd:!0}},t.HEXCOLOR,d,l("variable","@@?"+r,10),l("variable","@\\{"+r+"\\}"),l("built_in","~?`[^`]*?`"),{className:"attribute",begin:r+"\\s*:",end:":",returnBegin:!0,excludeEnd:!0},t.IMPORTANT,{beginKeywords:"and not"},t.FUNCTION_DISPATCH);const u=a.concat({begin:/\{/,end:/\}/,contains:i}),h={beginKeywords:"when",endsWithParent:!0,contains:[{beginKeywords:"and not"}].concat(a)},p={begin:s+"\\s*:",returnBegin:!0,end:/[;}]/,relevance:0,contains:[{begin:/-(webkit|moz|ms|o)-/},t.CSS_VARIABLE,{className:"attribute",begin:"\\b("+mIe.join("|")+")\\b",end:/(?=:)/,starts:{endsWithParent:!0,illegal:"[<=$]",relevance:0,contains:a}}]},m={className:"keyword",begin:"@(import|media|charset|font-face|(-[a-z]+-)?keyframes|supports|document|namespace|page|viewport|host)\\b",starts:{end:"[;{}]",keywords:c,returnEnd:!0,contains:a,relevance:0}},f={className:"variable",variants:[{begin:"@"+r+"\\s*:",relevance:15},{begin:"@"+r}],starts:{end:"[;}]",returnEnd:!0,contains:u}},g={variants:[{begin:"[\\.#:&\\[>]",end:"[;{}]"},{begin:s,end:/\{/}],returnBegin:!0,returnEnd:!0,illegal:"[<='$\"]",relevance:0,contains:[e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,h,l("keyword","all\\b"),l("variable","@\\{"+r+"\\}"),{begin:"\\b("+dIe.join("|")+")\\b",className:"selector-tag"},t.CSS_NUMBER_MODE,l("selector-tag",s,0),l("selector-id","#"+s),l("selector-class","\\."+s,0),l("selector-tag","&",0),t.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",begin:":("+hIe.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+pIe.join("|")+")"},{begin:/\(/,end:/\)/,relevance:0,contains:u},{begin:"!important"},t.FUNCTION_DISPATCH]},x={begin:r+`:(:)?(${n.join("|")})`,returnBegin:!0,contains:[g]};return i.push(e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,m,f,x,p,g,h,t.FUNCTION_DISPATCH),{name:"Less",case_insensitive:!0,illegal:"[=>'/<($\"]",contains:i}},lua:function(e){const t="\\[=*\\[",n="\\]=*\\]",r={begin:t,end:n,contains:["self"]},s=[e.COMMENT("--(?!"+t+")","$"),e.COMMENT("--"+t,n,{contains:[r],relevance:10})];return{name:"Lua",aliases:["pluto"],keywords:{$pattern:e.UNDERSCORE_IDENT_RE,literal:"true false nil",keyword:"and break do else elseif end for goto if in local not or repeat return then until while",built_in:"_G _ENV _VERSION __index __newindex __mode __call __metatable __tostring __len __gc __add __sub __mul __div __mod __pow __concat __unm __eq __lt __le assert collectgarbage dofile error getfenv getmetatable ipairs load loadfile loadstring module next pairs pcall print rawequal rawget rawset require select setfenv setmetatable tonumber tostring type unpack xpcall arg self coroutine resume yield status wrap create running debug getupvalue debug sethook getmetatable gethook setmetatable setlocal traceback setfenv getinfo setupvalue getlocal getregistry getfenv io lines write close flush open output type read stderr stdin input stdout popen tmpfile math log max acos huge ldexp pi cos tanh pow deg tan cosh sinh random randomseed frexp ceil floor rad abs sqrt modf asin min mod fmod log10 atan2 exp sin atan os exit setlocale date getenv difftime remove time clock tmpname rename execute package preload loadlib loaded loaders cpath config path seeall string sub upper len gfind rep find match char dump gmatch reverse byte format gsub lower table setn insert getn foreachi maxn foreach concat sort remove"},contains:s.concat([{className:"function",beginKeywords:"function",end:"\\)",contains:[e.inherit(e.TITLE_MODE,{begin:"([_a-zA-Z]\\w*\\.)*([_a-zA-Z]\\w*:)?[_a-zA-Z]\\w*"}),{className:"params",begin:"\\(",endsWithParent:!0,contains:s}].concat(s)},e.C_NUMBER_MODE,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,{className:"string",begin:t,end:n,contains:[r],relevance:5}])}},makefile:function(e){const t={className:"variable",variants:[{begin:"\\$\\("+e.UNDERSCORE_IDENT_RE+"\\)",contains:[e.BACKSLASH_ESCAPE]},{begin:/\$[@%<?\^\+\*]/}]},n={className:"string",begin:/"/,end:/"/,contains:[e.BACKSLASH_ESCAPE,t]},r={className:"variable",begin:/\$\([\w-]+\s/,end:/\)/,keywords:{built_in:"subst patsubst strip findstring filter filter-out sort word wordlist firstword lastword dir notdir suffix basename addsuffix addprefix join wildcard realpath abspath error warning shell origin flavor foreach if or and call eval file value"},contains:[t,n]},s={begin:"^"+e.UNDERSCORE_IDENT_RE+"\\s*(?=[:+?]?=)"},i={className:"section",begin:/^[^\s]+:/,end:/$/,contains:[t]};return{name:"Makefile",aliases:["mk","mak","make"],keywords:{$pattern:/[\w-]+/,keyword:"define endef undefine ifdef ifndef ifeq ifneq else endif include -include sinclude override export unexport private vpath"},contains:[e.HASH_COMMENT_MODE,t,n,r,s,{className:"meta",begin:/^\.PHONY:/,end:/$/,keywords:{$pattern:/[\.\w]+/,keyword:".PHONY"}},i]}},markdown:function(e){const t={begin:/<\/?[A-Za-z_]/,end:">",subLanguage:"xml",relevance:0},n={variants:[{begin:/\[.+?\]\[.*?\]/,relevance:0},{begin:/\[.+?\]\(((data|javascript|mailto):|(?:http|ftp)s?:\/\/).*?\)/,relevance:2},{begin:e.regex.concat(/\[.+?\]\(/,/[A-Za-z][A-Za-z0-9+.-]*/,/:\/\/.*?\)/),relevance:2},{begin:/\[.+?\]\([./?&#].*?\)/,relevance:1},{begin:/\[.*?\]\(.*?\)/,relevance:0}],returnBegin:!0,contains:[{match:/\[(?=\])/},{className:"string",relevance:0,begin:"\\[",end:"\\]",excludeBegin:!0,returnEnd:!0},{className:"link",relevance:0,begin:"\\]\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0},{className:"symbol",relevance:0,begin:"\\]\\[",end:"\\]",excludeBegin:!0,excludeEnd:!0}]},r={className:"strong",contains:[],variants:[{begin:/_{2}(?!\s)/,end:/_{2}/},{begin:/\*{2}(?!\s)/,end:/\*{2}/}]},s={className:"emphasis",contains:[],variants:[{begin:/\*(?![*\s])/,end:/\*/},{begin:/_(?![_\s])/,end:/_/,relevance:0}]},i=e.inherit(r,{contains:[]}),a=e.inherit(s,{contains:[]});r.contains.push(a),s.contains.push(i);let o=[t,n];return[r,s,i,a].forEach(e=>{e.contains=e.contains.concat(o)}),o=o.concat(r,s),{name:"Markdown",aliases:["md","mkdown","mkd"],contains:[{className:"section",variants:[{begin:"^#{1,6}",end:"$",contains:o},{begin:"(?=^.+?\\n[=-]{2,}$)",contains:[{begin:"^[=-]*$"},{begin:"^",end:"\\n",contains:o}]}]},t,{className:"bullet",begin:"^[ \t]*([*+-]|(\\d+\\.))(?=\\s+)",end:"\\s+",excludeEnd:!0},r,s,{className:"quote",begin:"^>\\s+",contains:o,end:"$"},{className:"code",variants:[{begin:"(`{3,})[^`](.|\\n)*?\\1`*[ ]*"},{begin:"(~{3,})[^~](.|\\n)*?\\1~*[ ]*"},{begin:"```",end:"```+[ ]*$"},{begin:"~~~",end:"~~~+[ ]*$"},{begin:"`.+?`"},{begin:"(?=^( {4}|\\t))",contains:[{begin:"^( {4}|\\t)",end:"(\\n)$"}],relevance:0}]},{begin:"^[-\\*]{3,}",end:"$"},n,{begin:/^\[[^\n]+\]:/,returnBegin:!0,contains:[{className:"symbol",begin:/\[/,end:/\]/,excludeBegin:!0,excludeEnd:!0},{className:"link",begin:/:\s*/,end:/$/,excludeBegin:!0}]},{scope:"literal",match:/&([a-zA-Z0-9]+|#[0-9]{1,7}|#[Xx][0-9a-fA-F]{1,6});/}]}},objectivec:function(e){const t=/[a-zA-Z@][a-zA-Z0-9_]*/,n={$pattern:t,keyword:["@interface","@class","@protocol","@implementation"]};return{name:"Objective-C",aliases:["mm","objc","obj-c","obj-c++","objective-c++"],keywords:{"variable.language":["this","super"],$pattern:t,keyword:["while","export","sizeof","typedef","const","struct","for","union","volatile","static","mutable","if","do","return","goto","enum","else","break","extern","asm","case","default","register","explicit","typename","switch","continue","inline","readonly","assign","readwrite","self","@synchronized","id","typeof","nonatomic","IBOutlet","IBAction","strong","weak","copy","in","out","inout","bycopy","byref","oneway","__strong","__weak","__block","__autoreleasing","@private","@protected","@public","@try","@property","@end","@throw","@catch","@finally","@autoreleasepool","@synthesize","@dynamic","@selector","@optional","@required","@encode","@package","@import","@defs","@compatibility_alias","__bridge","__bridge_transfer","__bridge_retained","__bridge_retain","__covariant","__contravariant","__kindof","_Nonnull","_Nullable","_Null_unspecified","__FUNCTION__","__PRETTY_FUNCTION__","__attribute__","getter","setter","retain","unsafe_unretained","nonnull","nullable","null_unspecified","null_resettable","class","instancetype","NS_DESIGNATED_INITIALIZER","NS_UNAVAILABLE","NS_REQUIRES_SUPER","NS_RETURNS_INNER_POINTER","NS_INLINE","NS_AVAILABLE","NS_DEPRECATED","NS_ENUM","NS_OPTIONS","NS_SWIFT_UNAVAILABLE","NS_ASSUME_NONNULL_BEGIN","NS_ASSUME_NONNULL_END","NS_REFINED_FOR_SWIFT","NS_SWIFT_NAME","NS_SWIFT_NOTHROW","NS_DURING","NS_HANDLER","NS_ENDHANDLER","NS_VALUERETURN","NS_VOIDRETURN"],literal:["false","true","FALSE","TRUE","nil","YES","NO","NULL"],built_in:["dispatch_once_t","dispatch_queue_t","dispatch_sync","dispatch_async","dispatch_once"],type:["int","float","char","unsigned","signed","short","long","double","wchar_t","unichar","void","bool","BOOL","id|0","_Bool"]},illegal:"</",contains:[{className:"built_in",begin:"\\b(AV|CA|CF|CG|CI|CL|CM|CN|CT|MK|MP|MTK|MTL|NS|SCN|SK|UI|WK|XC)\\w+"},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,e.C_NUMBER_MODE,e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,{className:"string",variants:[{begin:'@"',end:'"',illegal:"\\n",contains:[e.BACKSLASH_ESCAPE]}]},{className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},e.inherit(e.QUOTE_STRING_MODE,{className:"string"}),{className:"string",begin:/<.*?>/,end:/$/,illegal:"\\n"},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{className:"class",begin:"("+n.keyword.join("|")+")\\b",end:/(\{|$)/,excludeEnd:!0,keywords:n,contains:[e.UNDERSCORE_TITLE_MODE]},{begin:"\\."+e.UNDERSCORE_IDENT_RE,relevance:0}]}},perl:function(e){const t=e.regex,n=/[dualxmsipngr]{0,12}/,r={$pattern:/[\w.]+/,keyword:["abs","accept","alarm","and","atan2","bind","binmode","bless","break","caller","chdir","chmod","chomp","chop","chown","chr","chroot","class","close","closedir","connect","continue","cos","crypt","dbmclose","dbmopen","defined","delete","die","do","dump","each","else","elsif","endgrent","endhostent","endnetent","endprotoent","endpwent","endservent","eof","eval","exec","exists","exit","exp","fcntl","field","fileno","flock","for","foreach","fork","format","formline","getc","getgrent","getgrgid","getgrnam","gethostbyaddr","gethostbyname","gethostent","getlogin","getnetbyaddr","getnetbyname","getnetent","getpeername","getpgrp","getpriority","getprotobyname","getprotobynumber","getprotoent","getpwent","getpwnam","getpwuid","getservbyname","getservbyport","getservent","getsockname","getsockopt","given","glob","gmtime","goto","grep","gt","hex","if","index","int","ioctl","join","keys","kill","last","lc","lcfirst","length","link","listen","local","localtime","log","lstat","lt","ma","map","method","mkdir","msgctl","msgget","msgrcv","msgsnd","my","ne","next","no","not","oct","open","opendir","or","ord","our","pack","package","pipe","pop","pos","print","printf","prototype","push","q|0","qq","quotemeta","qw","qx","rand","read","readdir","readline","readlink","readpipe","recv","redo","ref","rename","require","reset","return","reverse","rewinddir","rindex","rmdir","say","scalar","seek","seekdir","select","semctl","semget","semop","send","setgrent","sethostent","setnetent","setpgrp","setpriority","setprotoent","setpwent","setservent","setsockopt","shift","shmctl","shmget","shmread","shmwrite","shutdown","sin","sleep","socket","socketpair","sort","splice","split","sprintf","sqrt","srand","stat","state","study","sub","substr","symlink","syscall","sysopen","sysread","sysseek","system","syswrite","tell","telldir","tie","tied","time","times","tr","truncate","uc","ucfirst","umask","undef","unless","unlink","unpack","unshift","untie","until","use","utime","values","vec","wait","waitpid","wantarray","warn","when","while","write","x|0","xor","y|0"].join(" ")},s={className:"subst",begin:"[$@]\\{",end:"\\}",keywords:r},i={begin:/->\{/,end:/\}/},a={scope:"attr",match:/\s+:\s*\w+(\s*\(.*?\))?/},o={scope:"variable",variants:[{begin:/\$\d/},{begin:t.concat(/[$%@](?!")(\^\w\b|#\w+(::\w+)*|\{\w+\}|\w+(::\w*)*)/,"(?![A-Za-z])(?![@$%])")},{begin:/[$%@](?!")[^\s\w{=]|\$=/,relevance:0}],contains:[a]},l={className:"number",variants:[{match:/0?\.[0-9][0-9_]+\b/},{match:/\bv?(0|[1-9][0-9_]*(\.[0-9_]+)?|[1-9][0-9_]*)\b/},{match:/\b0[0-7][0-7_]*\b/},{match:/\b0x[0-9a-fA-F][0-9a-fA-F_]*\b/},{match:/\b0b[0-1][0-1_]*\b/}],relevance:0},c=[e.BACKSLASH_ESCAPE,s,o],d=[/!/,/\//,/\|/,/\?/,/'/,/"/,/#/],u=(e,r,s="\\1")=>{const i="\\1"===s?s:t.concat(s,r);return t.concat(t.concat("(?:",e,")"),r,/(?:\\.|[^\\\/])*?/,i,/(?:\\.|[^\\\/])*?/,s,n)},h=(e,r,s)=>t.concat(t.concat("(?:",e,")"),r,/(?:\\.|[^\\\/])*?/,s,n),p=[o,e.HASH_COMMENT_MODE,e.COMMENT(/^=\w/,/=cut/,{endsWithParent:!0}),i,{className:"string",contains:c,variants:[{begin:"q[qwxr]?\\s*\\(",end:"\\)",relevance:5},{begin:"q[qwxr]?\\s*\\[",end:"\\]",relevance:5},{begin:"q[qwxr]?\\s*\\{",end:"\\}",relevance:5},{begin:"q[qwxr]?\\s*\\|",end:"\\|",relevance:5},{begin:"q[qwxr]?\\s*<",end:">",relevance:5},{begin:"qw\\s+q",end:"q",relevance:5},{begin:"'",end:"'",contains:[e.BACKSLASH_ESCAPE]},{begin:'"',end:'"'},{begin:"`",end:"`",contains:[e.BACKSLASH_ESCAPE]},{begin:/\{\w+\}/,relevance:0},{begin:"-?\\w+\\s*=>",relevance:0}]},l,{begin:"(\\/\\/|"+e.RE_STARTERS_RE+"|\\b(split|return|print|reverse|grep)\\b)\\s*",keywords:"split return print reverse grep",relevance:0,contains:[e.HASH_COMMENT_MODE,{className:"regexp",variants:[{begin:u("s|tr|y",t.either(...d,{capture:!0}))},{begin:u("s|tr|y","\\(","\\)")},{begin:u("s|tr|y","\\[","\\]")},{begin:u("s|tr|y","\\{","\\}")}],relevance:2},{className:"regexp",variants:[{begin:/(m|qr)\/\//,relevance:0},{begin:h("(?:m|qr)?",/\//,/\//)},{begin:h("m|qr",t.either(...d,{capture:!0}),/\1/)},{begin:h("m|qr",/\(/,/\)/)},{begin:h("m|qr",/\[/,/\]/)},{begin:h("m|qr",/\{/,/\}/)}]}]},{className:"function",beginKeywords:"sub method",end:"(\\s*\\(.*?\\))?[;{]",excludeEnd:!0,relevance:5,contains:[e.TITLE_MODE,a]},{className:"class",beginKeywords:"class",end:"[;{]",excludeEnd:!0,relevance:5,contains:[e.TITLE_MODE,a,l]},{begin:"-\\w\\b",relevance:0},{begin:"^__DATA__$",end:"^__END__$",subLanguage:"mojolicious",contains:[{begin:"^@@.*",end:"$",className:"comment"}]}];return s.contains=p,i.contains=p,{name:"Perl",aliases:["pl","pm"],keywords:r,contains:p}},php:function(e){const t=e.regex,n=/(?![A-Za-z0-9])(?![$])/,r=t.concat(/[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*/,n),s=t.concat(/(\\?[A-Z][a-z0-9_\x7f-\xff]+|\\?[A-Z]+(?=[A-Z][a-z0-9_\x7f-\xff])){1,}/,n),i=t.concat(/[A-Z]+/,n),a={scope:"variable",match:"\\$+"+r},o={scope:"subst",variants:[{begin:/\$\w+/},{begin:/\{\$/,end:/\}/}]},l=e.inherit(e.APOS_STRING_MODE,{illegal:null}),c="[ \t\n]",d={scope:"string",variants:[e.inherit(e.QUOTE_STRING_MODE,{illegal:null,contains:e.QUOTE_STRING_MODE.contains.concat(o)}),l,{begin:/<<<[ \t]*(?:(\w+)|"(\w+)")\n/,end:/[ \t]*(\w+)\b/,contains:e.QUOTE_STRING_MODE.contains.concat(o),"on:begin":(e,t)=>{t.data._beginMatch=e[1]||e[2]},"on:end":(e,t)=>{t.data._beginMatch!==e[1]&&t.ignoreMatch()}},e.END_SAME_AS_BEGIN({begin:/<<<[ \t]*'(\w+)'\n/,end:/[ \t]*(\w+)\b/})]},u={scope:"number",variants:[{begin:"\\b0[bB][01]+(?:_[01]+)*\\b"},{begin:"\\b0[oO][0-7]+(?:_[0-7]+)*\\b"},{begin:"\\b0[xX][\\da-fA-F]+(?:_[\\da-fA-F]+)*\\b"},{begin:"(?:\\b\\d+(?:_\\d+)*(\\.(?:\\d+(?:_\\d+)*))?|\\B\\.\\d+)(?:[eE][+-]?\\d+)?"}],relevance:0},h=["false","null","true"],p=["__CLASS__","__DIR__","__FILE__","__FUNCTION__","__COMPILER_HALT_OFFSET__","__LINE__","__METHOD__","__NAMESPACE__","__TRAIT__","die","echo","exit","include","include_once","print","require","require_once","array","abstract","and","as","binary","bool","boolean","break","callable","case","catch","class","clone","const","continue","declare","default","do","double","else","elseif","empty","enddeclare","endfor","endforeach","endif","endswitch","endwhile","enum","eval","extends","final","finally","float","for","foreach","from","global","goto","if","implements","instanceof","insteadof","int","integer","interface","isset","iterable","list","match|0","mixed","new","never","object","or","private","protected","public","readonly","real","return","string","switch","throw","trait","try","unset","use","var","void","while","xor","yield"],m=["Error|0","AppendIterator","ArgumentCountError","ArithmeticError","ArrayIterator","ArrayObject","AssertionError","BadFunctionCallException","BadMethodCallException","CachingIterator","CallbackFilterIterator","CompileError","Countable","DirectoryIterator","DivisionByZeroError","DomainException","EmptyIterator","ErrorException","Exception","FilesystemIterator","FilterIterator","GlobIterator","InfiniteIterator","InvalidArgumentException","IteratorIterator","LengthException","LimitIterator","LogicException","MultipleIterator","NoRewindIterator","OutOfBoundsException","OutOfRangeException","OuterIterator","OverflowException","ParentIterator","ParseError","RangeException","RecursiveArrayIterator","RecursiveCachingIterator","RecursiveCallbackFilterIterator","RecursiveDirectoryIterator","RecursiveFilterIterator","RecursiveIterator","RecursiveIteratorIterator","RecursiveRegexIterator","RecursiveTreeIterator","RegexIterator","RuntimeException","SeekableIterator","SplDoublyLinkedList","SplFileInfo","SplFileObject","SplFixedArray","SplHeap","SplMaxHeap","SplMinHeap","SplObjectStorage","SplObserver","SplPriorityQueue","SplQueue","SplStack","SplSubject","SplTempFileObject","TypeError","UnderflowException","UnexpectedValueException","UnhandledMatchError","ArrayAccess","BackedEnum","Closure","Fiber","Generator","Iterator","IteratorAggregate","Serializable","Stringable","Throwable","Traversable","UnitEnum","WeakReference","WeakMap","Directory","__PHP_Incomplete_Class","parent","php_user_filter","self","static","stdClass"],f={keyword:p,literal:(e=>{const t=[];return e.forEach(e=>{t.push(e),e.toLowerCase()===e?t.push(e.toUpperCase()):t.push(e.toLowerCase())}),t})(h),built_in:m},g=e=>e.map(e=>e.replace(/\|\d+$/,"")),x={variants:[{match:[/new/,t.concat(c,"+"),t.concat("(?!",g(m).join("\\b|"),"\\b)"),s],scope:{1:"keyword",4:"title.class"}}]},v=t.concat(r,"\\b(?!\\()"),y={variants:[{match:[t.concat(/::/,t.lookahead(/(?!class\b)/)),v],scope:{2:"variable.constant"}},{match:[/::/,/class/],scope:{2:"variable.language"}},{match:[s,t.concat(/::/,t.lookahead(/(?!class\b)/)),v],scope:{1:"title.class",3:"variable.constant"}},{match:[s,t.concat("::",t.lookahead(/(?!class\b)/))],scope:{1:"title.class"}},{match:[s,/::/,/class/],scope:{1:"title.class",3:"variable.language"}}]},b={scope:"attr",match:t.concat(r,t.lookahead(":"),t.lookahead(/(?!::)/))},w={relevance:0,begin:/\(/,end:/\)/,keywords:f,contains:[b,a,y,e.C_BLOCK_COMMENT_MODE,d,u,x]},j={relevance:0,match:[/\b/,t.concat("(?!fn\\b|function\\b|",g(p).join("\\b|"),"|",g(m).join("\\b|"),"\\b)"),r,t.concat(c,"*"),t.lookahead(/(?=\()/)],scope:{3:"title.function.invoke"},contains:[w]};w.contains.push(j);const N=[b,y,e.C_BLOCK_COMMENT_MODE,d,u,x],_={begin:t.concat(/#\[\s*\\?/,t.either(s,i)),beginScope:"meta",end:/]/,endScope:"meta",keywords:{literal:h,keyword:["new","array"]},contains:[{begin:/\[/,end:/]/,keywords:{literal:h,keyword:["new","array"]},contains:["self",...N]},...N,{scope:"meta",variants:[{match:s},{match:i}]}]};return{case_insensitive:!1,keywords:f,contains:[_,e.HASH_COMMENT_MODE,e.COMMENT("//","$"),e.COMMENT("/\\*","\\*/",{contains:[{scope:"doctag",match:"@[A-Za-z]+"}]}),{match:/__halt_compiler\(\);/,keywords:"__halt_compiler",starts:{scope:"comment",end:e.MATCH_NOTHING_RE,contains:[{match:/\?>/,scope:"meta",endsParent:!0}]}},{scope:"meta",variants:[{begin:/<\?php/,relevance:10},{begin:/<\?=/},{begin:/<\?/,relevance:.1},{begin:/\?>/}]},{scope:"variable.language",match:/\$this\b/},a,j,y,{match:[/const/,/\s/,r],scope:{1:"keyword",3:"variable.constant"}},x,{scope:"function",relevance:0,beginKeywords:"fn function",end:/[;{]/,excludeEnd:!0,illegal:"[$%\\[]",contains:[{beginKeywords:"use"},e.UNDERSCORE_TITLE_MODE,{begin:"=>",endsParent:!0},{scope:"params",begin:"\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0,keywords:f,contains:["self",_,a,y,e.C_BLOCK_COMMENT_MODE,d,u]}]},{scope:"class",variants:[{beginKeywords:"enum",illegal:/[($"]/},{beginKeywords:"class interface trait",illegal:/[:($"]/}],relevance:0,end:/\{/,excludeEnd:!0,contains:[{beginKeywords:"extends implements"},e.UNDERSCORE_TITLE_MODE]},{beginKeywords:"namespace",relevance:0,end:";",illegal:/[.']/,contains:[e.inherit(e.UNDERSCORE_TITLE_MODE,{scope:"title.class"})]},{beginKeywords:"use",relevance:0,end:";",contains:[{match:/\b(as|const|function)\b/,scope:"keyword"},e.UNDERSCORE_TITLE_MODE]},d,u]}},"php-template":function(e){return{name:"PHP template",subLanguage:"xml",contains:[{begin:/<\?(php|=)?/,end:/\?>/,subLanguage:"php",contains:[{begin:"/\\*",end:"\\*/",skip:!0},{begin:'b"',end:'"',skip:!0},{begin:"b'",end:"'",skip:!0},e.inherit(e.APOS_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0}),e.inherit(e.QUOTE_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0})]}]}},plaintext:function(e){return{name:"Plain text",aliases:["text","txt"],disableAutodetect:!0}},python:function(e){const t=e.regex,n=/[\p{XID_Start}_]\p{XID_Continue}*/u,r=["and","as","assert","async","await","break","case","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","in","is","lambda","match","nonlocal|10","not","or","pass","raise","return","try","while","with","yield"],s={$pattern:/[A-Za-z]\w+|__\w+__/,keyword:r,built_in:["__import__","abs","all","any","ascii","bin","bool","breakpoint","bytearray","bytes","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","exec","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","print","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip"],literal:["__debug__","Ellipsis","False","None","NotImplemented","True"],type:["Any","Callable","Coroutine","Dict","List","Literal","Generic","Optional","Sequence","Set","Tuple","Type","Union"]},i={className:"meta",begin:/^(>>>|\.\.\.) /},a={className:"subst",begin:/\{/,end:/\}/,keywords:s,illegal:/#/},o={begin:/\{\{/,relevance:0},l={className:"string",contains:[e.BACKSLASH_ESCAPE],variants:[{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?'''/,end:/'''/,contains:[e.BACKSLASH_ESCAPE,i],relevance:10},{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?"""/,end:/"""/,contains:[e.BACKSLASH_ESCAPE,i],relevance:10},{begin:/([fF][rR]|[rR][fF]|[fF])'''/,end:/'''/,contains:[e.BACKSLASH_ESCAPE,i,o,a]},{begin:/([fF][rR]|[rR][fF]|[fF])"""/,end:/"""/,contains:[e.BACKSLASH_ESCAPE,i,o,a]},{begin:/([uU]|[rR])'/,end:/'/,relevance:10},{begin:/([uU]|[rR])"/,end:/"/,relevance:10},{begin:/([bB]|[bB][rR]|[rR][bB])'/,end:/'/},{begin:/([bB]|[bB][rR]|[rR][bB])"/,end:/"/},{begin:/([fF][rR]|[rR][fF]|[fF])'/,end:/'/,contains:[e.BACKSLASH_ESCAPE,o,a]},{begin:/([fF][rR]|[rR][fF]|[fF])"/,end:/"/,contains:[e.BACKSLASH_ESCAPE,o,a]},e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},c="[0-9](_?[0-9])*",d=`(\\b(${c}))?\\.(${c})|\\b(${c})\\.`,u=`\\b|${r.join("|")}`,h={className:"number",relevance:0,variants:[{begin:`(\\b(${c})|(${d}))[eE][+-]?(${c})[jJ]?(?=${u})`},{begin:`(${d})[jJ]?`},{begin:`\\b([1-9](_?[0-9])*|0+(_?0)*)[lLjJ]?(?=${u})`},{begin:`\\b0[bB](_?[01])+[lL]?(?=${u})`},{begin:`\\b0[oO](_?[0-7])+[lL]?(?=${u})`},{begin:`\\b0[xX](_?[0-9a-fA-F])+[lL]?(?=${u})`},{begin:`\\b(${c})[jJ](?=${u})`}]},p={className:"comment",begin:t.lookahead(/# type:/),end:/$/,keywords:s,contains:[{begin:/# type:/},{begin:/#/,end:/\b\B/,endsWithParent:!0}]},m={className:"params",variants:[{className:"",begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:s,contains:["self",i,h,l,e.HASH_COMMENT_MODE]}]};return a.contains=[l,h,i],{name:"Python",aliases:["py","gyp","ipython"],unicodeRegex:!0,keywords:s,illegal:/(<\/|\?)|=>/,contains:[i,h,{scope:"variable.language",match:/\bself\b/},{beginKeywords:"if",relevance:0},{match:/\bor\b/,scope:"keyword"},l,p,e.HASH_COMMENT_MODE,{match:[/\bdef/,/\s+/,n],scope:{1:"keyword",3:"title.function"},contains:[m]},{variants:[{match:[/\bclass/,/\s+/,n,/\s*/,/\(\s*/,n,/\s*\)/]},{match:[/\bclass/,/\s+/,n]}],scope:{1:"keyword",3:"title.class",6:"title.class.inherited"}},{className:"meta",begin:/^[\t ]*@/,end:/(?=#)|$/,contains:[h,m,l]}]}},"python-repl":function(e){return{aliases:["pycon"],contains:[{className:"meta.prompt",starts:{end:/ |$/,starts:{end:"$",subLanguage:"python"}},variants:[{begin:/^>>>(?=[ ]|$)/},{begin:/^\.\.\.(?=[ ]|$)/}]}]}},r:function(e){const t=e.regex,n=/(?:(?:[a-zA-Z]|\.[._a-zA-Z])[._a-zA-Z0-9]*)|\.(?!\d)/,r=t.either(/0[xX][0-9a-fA-F]+\.[0-9a-fA-F]*[pP][+-]?\d+i?/,/0[xX][0-9a-fA-F]+(?:[pP][+-]?\d+)?[Li]?/,/(?:\d+(?:\.\d*)?|\.\d+)(?:[eE][+-]?\d+)?[Li]?/),s=/[=!<>:]=|\|\||&&|:::?|<-|<<-|->>|->|\|>|[-+*\/?!$&|:<=>@^~]|\*\*/,i=t.either(/[()]/,/[{}]/,/\[\[/,/[[\]]/,/\\/,/,/);return{name:"R",keywords:{$pattern:n,keyword:"function if in break next repeat else for while",literal:"NULL NA TRUE FALSE Inf NaN NA_integer_|10 NA_real_|10 NA_character_|10 NA_complex_|10",built_in:"LETTERS letters month.abb month.name pi T F abs acos acosh all any anyNA Arg as.call as.character as.complex as.double as.environment as.integer as.logical as.null.default as.numeric as.raw asin asinh atan atanh attr attributes baseenv browser c call ceiling class Conj cos cosh cospi cummax cummin cumprod cumsum digamma dim dimnames emptyenv exp expression floor forceAndCall gamma gc.time globalenv Im interactive invisible is.array is.atomic is.call is.character is.complex is.double is.environment is.expression is.finite is.function is.infinite is.integer is.language is.list is.logical is.matrix is.na is.name is.nan is.null is.numeric is.object is.pairlist is.raw is.recursive is.single is.symbol lazyLoadDBfetch length lgamma list log max min missing Mod names nargs nzchar oldClass on.exit pos.to.env proc.time prod quote range Re rep retracemem return round seq_along seq_len seq.int sign signif sin sinh sinpi sqrt standardGeneric substitute sum switch tan tanh tanpi tracemem trigamma trunc unclass untracemem UseMethod xtfrm"},contains:[e.COMMENT(/#'/,/$/,{contains:[{scope:"doctag",match:/@examples/,starts:{end:t.lookahead(t.either(/\n^#'\s*(?=@[a-zA-Z]+)/,/\n^(?!#')/)),endsParent:!0}},{scope:"doctag",begin:"@param",end:/$/,contains:[{scope:"variable",variants:[{match:n},{match:/`(?:\\.|[^`\\])+`/}],endsParent:!0}]},{scope:"doctag",match:/@[a-zA-Z]+/},{scope:"keyword",match:/\\[a-zA-Z]+/}]}),e.HASH_COMMENT_MODE,{scope:"string",contains:[e.BACKSLASH_ESCAPE],variants:[e.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\(/,end:/\)(-*)"/}),e.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\{/,end:/\}(-*)"/}),e.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\[/,end:/\](-*)"/}),e.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\(/,end:/\)(-*)'/}),e.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\{/,end:/\}(-*)'/}),e.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\[/,end:/\](-*)'/}),{begin:'"',end:'"',relevance:0},{begin:"'",end:"'",relevance:0}]},{relevance:0,variants:[{scope:{1:"operator",2:"number"},match:[s,r]},{scope:{1:"operator",2:"number"},match:[/%[^%]*%/,r]},{scope:{1:"punctuation",2:"number"},match:[i,r]},{scope:{2:"number"},match:[/[^a-zA-Z0-9._]|^/,r]}]},{scope:{3:"operator"},match:[n,/\s+/,/<-/,/\s+/]},{scope:"operator",relevance:0,variants:[{match:s},{match:/%[^%]*%/}]},{scope:"punctuation",relevance:0,match:i},{begin:"`",end:"`",contains:[{begin:/\\./}]}]}},ruby:function(e){const t=e.regex,n="([a-zA-Z_]\\w*[!?=]?|[-+~]@|<<|>>|=~|===?|<=>|[<>]=?|\\*\\*|[-/+%^&*~`|]|\\[\\]=?)",r=t.either(/\b([A-Z]+[a-z0-9]+)+/,/\b([A-Z]+[a-z0-9]+)+[A-Z]+/),s=t.concat(r,/(::\w+)*/),i={"variable.constant":["__FILE__","__LINE__","__ENCODING__"],"variable.language":["self","super"],keyword:["alias","and","begin","BEGIN","break","case","class","defined","do","else","elsif","end","END","ensure","for","if","in","module","next","not","or","redo","require","rescue","retry","return","then","undef","unless","until","when","while","yield","include","extend","prepend","public","private","protected","raise","throw"],built_in:["proc","lambda","attr_accessor","attr_reader","attr_writer","define_method","private_constant","module_function"],literal:["true","false","nil"]},a={className:"doctag",begin:"@[A-Za-z]+"},o={begin:"#<",end:">"},l=[e.COMMENT("#","$",{contains:[a]}),e.COMMENT("^=begin","^=end",{contains:[a],relevance:10}),e.COMMENT("^__END__",e.MATCH_NOTHING_RE)],c={className:"subst",begin:/#\{/,end:/\}/,keywords:i},d={className:"string",contains:[e.BACKSLASH_ESCAPE,c],variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/`/,end:/`/},{begin:/%[qQwWx]?\(/,end:/\)/},{begin:/%[qQwWx]?\[/,end:/\]/},{begin:/%[qQwWx]?\{/,end:/\}/},{begin:/%[qQwWx]?</,end:/>/},{begin:/%[qQwWx]?\//,end:/\//},{begin:/%[qQwWx]?%/,end:/%/},{begin:/%[qQwWx]?-/,end:/-/},{begin:/%[qQwWx]?\|/,end:/\|/},{begin:/\B\?(\\\d{1,3})/},{begin:/\B\?(\\x[A-Fa-f0-9]{1,2})/},{begin:/\B\?(\\u\{?[A-Fa-f0-9]{1,6}\}?)/},{begin:/\B\?(\\M-\\C-|\\M-\\c|\\c\\M-|\\M-|\\C-\\M-)[\x20-\x7e]/},{begin:/\B\?\\(c|C-)[\x20-\x7e]/},{begin:/\B\?\\?\S/},{begin:t.concat(/<<[-~]?'?/,t.lookahead(/(\w+)(?=\W)[^\n]*\n(?:[^\n]*\n)*?\s*\1\b/)),contains:[e.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,contains:[e.BACKSLASH_ESCAPE,c]})]}]},u="[0-9](_?[0-9])*",h={className:"number",relevance:0,variants:[{begin:`\\b([1-9](_?[0-9])*|0)(\\.(${u}))?([eE][+-]?(${u})|r)?i?\\b`},{begin:"\\b0[dD][0-9](_?[0-9])*r?i?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*r?i?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*r?i?\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*r?i?\\b"},{begin:"\\b0(_?[0-7])+r?i?\\b"}]},p={variants:[{match:/\(\)/},{className:"params",begin:/\(/,end:/(?=\))/,excludeBegin:!0,endsParent:!0,keywords:i}]},m=[d,{variants:[{match:[/class\s+/,s,/\s+<\s+/,s]},{match:[/\b(class|module)\s+/,s]}],scope:{2:"title.class",4:"title.class.inherited"},keywords:i},{match:[/(include|extend)\s+/,s],scope:{2:"title.class"},keywords:i},{relevance:0,match:[s,/\.new[. (]/],scope:{1:"title.class"}},{relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"},{relevance:0,match:r,scope:"title.class"},{match:[/def/,/\s+/,n],scope:{1:"keyword",3:"title.function"},contains:[p]},{begin:e.IDENT_RE+"::"},{className:"symbol",begin:e.UNDERSCORE_IDENT_RE+"(!|\\?)?:",relevance:0},{className:"symbol",begin:":(?!\\s)",contains:[d,{begin:n}],relevance:0},h,{className:"variable",begin:"(\\$\\W)|((\\$|@@?)(\\w+))(?=[^@$?])(?![A-Za-z])(?![@$?'])"},{className:"params",begin:/\|(?!=)/,end:/\|/,excludeBegin:!0,excludeEnd:!0,relevance:0,keywords:i},{begin:"("+e.RE_STARTERS_RE+"|unless)\\s*",keywords:"unless",contains:[{className:"regexp",contains:[e.BACKSLASH_ESCAPE,c],illegal:/\n/,variants:[{begin:"/",end:"/[a-z]*"},{begin:/%r\{/,end:/\}[a-z]*/},{begin:"%r\\(",end:"\\)[a-z]*"},{begin:"%r!",end:"![a-z]*"},{begin:"%r\\[",end:"\\][a-z]*"}]}].concat(o,l),relevance:0}].concat(o,l);c.contains=m,p.contains=m;const f=[{begin:/^\s*=>/,starts:{end:"$",contains:m}},{className:"meta.prompt",begin:"^([>?]>|[\\w#]+\\(\\w+\\):\\d+:\\d+[>*]|(\\w+-)?\\d+\\.\\d+\\.\\d+(p\\d+)?[^\\d][^>]+>)(?=[ ])",starts:{end:"$",keywords:i,contains:m}}];return l.unshift(o),{name:"Ruby",aliases:["rb","gemspec","podspec","thor","irb"],keywords:i,illegal:/\/\*/,contains:[e.SHEBANG({binary:"ruby"})].concat(f).concat(l).concat(m)}},rust:function(e){const t=e.regex,n=/(r#)?/,r=t.concat(n,e.UNDERSCORE_IDENT_RE),s=t.concat(n,e.IDENT_RE),i={className:"title.function.invoke",relevance:0,begin:t.concat(/\b/,/(?!let|for|while|if|else|match\b)/,s,t.lookahead(/\s*\(/))},a="([ui](8|16|32|64|128|size)|f(32|64))?",o=["drop ","Copy","Send","Sized","Sync","Drop","Fn","FnMut","FnOnce","ToOwned","Clone","Debug","PartialEq","PartialOrd","Eq","Ord","AsRef","AsMut","Into","From","Default","Iterator","Extend","IntoIterator","DoubleEndedIterator","ExactSizeIterator","SliceConcatExt","ToString","assert!","assert_eq!","bitflags!","bytes!","cfg!","col!","concat!","concat_idents!","debug_assert!","debug_assert_eq!","env!","eprintln!","panic!","file!","format!","format_args!","include_bytes!","include_str!","line!","local_data_key!","module_path!","option_env!","print!","println!","select!","stringify!","try!","unimplemented!","unreachable!","vec!","write!","writeln!","macro_rules!","assert_ne!","debug_assert_ne!"],l=["i8","i16","i32","i64","i128","isize","u8","u16","u32","u64","u128","usize","f32","f64","str","char","bool","Box","Option","Result","String","Vec"];return{name:"Rust",aliases:["rs"],keywords:{$pattern:e.IDENT_RE+"!?",type:l,keyword:["abstract","as","async","await","become","box","break","const","continue","crate","do","dyn","else","enum","extern","false","final","fn","for","if","impl","in","let","loop","macro","match","mod","move","mut","override","priv","pub","ref","return","self","Self","static","struct","super","trait","true","try","type","typeof","union","unsafe","unsized","use","virtual","where","while","yield"],literal:["true","false","Some","None","Ok","Err"],built_in:o},illegal:"</",contains:[e.C_LINE_COMMENT_MODE,e.COMMENT("/\\*","\\*/",{contains:["self"]}),e.inherit(e.QUOTE_STRING_MODE,{begin:/b?"/,illegal:null}),{className:"symbol",begin:/'[a-zA-Z_][a-zA-Z0-9_]*(?!')/},{scope:"string",variants:[{begin:/b?r(#*)"(.|\n)*?"\1(?!#)/},{begin:/b?'/,end:/'/,contains:[{scope:"char.escape",match:/\\('|\w|x\w{2}|u\w{4}|U\w{8})/}]}]},{className:"number",variants:[{begin:"\\b0b([01_]+)"+a},{begin:"\\b0o([0-7_]+)"+a},{begin:"\\b0x([A-Fa-f0-9_]+)"+a},{begin:"\\b(\\d[\\d_]*(\\.[0-9_]+)?([eE][+-]?[0-9_]+)?)"+a}],relevance:0},{begin:[/fn/,/\s+/,r],className:{1:"keyword",3:"title.function"}},{className:"meta",begin:"#!?\\[",end:"\\]",contains:[{className:"string",begin:/"/,end:/"/,contains:[e.BACKSLASH_ESCAPE]}]},{begin:[/let/,/\s+/,/(?:mut\s+)?/,r],className:{1:"keyword",3:"keyword",4:"variable"}},{begin:[/for/,/\s+/,r,/\s+/,/in/],className:{1:"keyword",3:"variable",5:"keyword"}},{begin:[/type/,/\s+/,r],className:{1:"keyword",3:"title.class"}},{begin:[/(?:trait|enum|struct|union|impl|for)/,/\s+/,r],className:{1:"keyword",3:"title.class"}},{begin:e.IDENT_RE+"::",keywords:{keyword:"Self",built_in:o,type:l}},{className:"punctuation",begin:"->"},i]}},scss:function(e){const t=(e=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:e.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:e.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}))(e),n=yIe,r=vIe,s="@[a-z-]+",i={className:"variable",begin:"(\\$[a-zA-Z-][a-zA-Z0-9_-]*)\\b",relevance:0};return{name:"SCSS",case_insensitive:!0,illegal:"[=/|']",contains:[e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,t.CSS_NUMBER_MODE,{className:"selector-id",begin:"#[A-Za-z0-9_-]+",relevance:0},{className:"selector-class",begin:"\\.[A-Za-z0-9_-]+",relevance:0},t.ATTRIBUTE_SELECTOR_MODE,{className:"selector-tag",begin:"\\b("+gIe.join("|")+")\\b",relevance:0},{className:"selector-pseudo",begin:":("+r.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+n.join("|")+")"},i,{begin:/\(/,end:/\)/,contains:[t.CSS_NUMBER_MODE]},t.CSS_VARIABLE,{className:"attribute",begin:"\\b("+bIe.join("|")+")\\b"},{begin:"\\b(whitespace|wait|w-resize|visible|vertical-text|vertical-ideographic|uppercase|upper-roman|upper-alpha|underline|transparent|top|thin|thick|text|text-top|text-bottom|tb-rl|table-header-group|table-footer-group|sw-resize|super|strict|static|square|solid|small-caps|separate|se-resize|scroll|s-resize|rtl|row-resize|ridge|right|repeat|repeat-y|repeat-x|relative|progress|pointer|overline|outside|outset|oblique|nowrap|not-allowed|normal|none|nw-resize|no-repeat|no-drop|newspaper|ne-resize|n-resize|move|middle|medium|ltr|lr-tb|lowercase|lower-roman|lower-alpha|loose|list-item|line|line-through|line-edge|lighter|left|keep-all|justify|italic|inter-word|inter-ideograph|inside|inset|inline|inline-block|inherit|inactive|ideograph-space|ideograph-parenthesis|ideograph-numeric|ideograph-alpha|horizontal|hidden|help|hand|groove|fixed|ellipsis|e-resize|double|dotted|distribute|distribute-space|distribute-letter|distribute-all-lines|disc|disabled|default|decimal|dashed|crosshair|collapse|col-resize|circle|char|center|capitalize|break-word|break-all|bottom|both|bolder|bold|block|bidi-override|below|baseline|auto|always|all-scroll|absolute|table|table-cell)\\b"},{begin:/:/,end:/[;}{]/,relevance:0,contains:[t.BLOCK_COMMENT,i,t.HEXCOLOR,t.CSS_NUMBER_MODE,e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,t.IMPORTANT,t.FUNCTION_DISPATCH]},{begin:"@(page|font-face)",keywords:{$pattern:s,keyword:"@page @font-face"}},{begin:"@",end:"[{;]",returnBegin:!0,keywords:{$pattern:/[a-z-]+/,keyword:"and or not only",attribute:xIe.join(" ")},contains:[{begin:s,className:"keyword"},{begin:/[a-z-]+(?=:)/,className:"attribute"},i,e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,t.HEXCOLOR,t.CSS_NUMBER_MODE]},t.FUNCTION_DISPATCH]}},shell:function(e){return{name:"Shell Session",aliases:["console","shellsession"],contains:[{className:"meta.prompt",begin:/^\s{0,3}[/~\w\d[\]()@-]*[>%$#][ ]?/,starts:{end:/[^\\](?=\s*$)/,subLanguage:"bash"}}]}},sql:function(e){const t=e.regex,n=e.COMMENT("--","$"),r=["abs","acos","array_agg","asin","atan","avg","cast","ceil","ceiling","coalesce","corr","cos","cosh","count","covar_pop","covar_samp","cume_dist","dense_rank","deref","element","exp","extract","first_value","floor","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","last_value","lead","listagg","ln","log","log10","lower","max","min","mod","nth_value","ntile","nullif","percent_rank","percentile_cont","percentile_disc","position","position_regex","power","rank","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","row_number","sin","sinh","sqrt","stddev_pop","stddev_samp","substring","substring_regex","sum","tan","tanh","translate","translate_regex","treat","trim","trim_array","unnest","upper","value_of","var_pop","var_samp","width_bucket"],s=r,i=["abs","acos","all","allocate","alter","and","any","are","array","array_agg","array_max_cardinality","as","asensitive","asin","asymmetric","at","atan","atomic","authorization","avg","begin","begin_frame","begin_partition","between","bigint","binary","blob","boolean","both","by","call","called","cardinality","cascaded","case","cast","ceil","ceiling","char","char_length","character","character_length","check","classifier","clob","close","coalesce","collate","collect","column","commit","condition","connect","constraint","contains","convert","copy","corr","corresponding","cos","cosh","count","covar_pop","covar_samp","create","cross","cube","cume_dist","current","current_catalog","current_date","current_default_transform_group","current_path","current_role","current_row","current_schema","current_time","current_timestamp","current_path","current_role","current_transform_group_for_type","current_user","cursor","cycle","date","day","deallocate","dec","decimal","decfloat","declare","default","define","delete","dense_rank","deref","describe","deterministic","disconnect","distinct","double","drop","dynamic","each","element","else","empty","end","end_frame","end_partition","end-exec","equals","escape","every","except","exec","execute","exists","exp","external","extract","false","fetch","filter","first_value","float","floor","for","foreign","frame_row","free","from","full","function","fusion","get","global","grant","group","grouping","groups","having","hold","hour","identity","in","indicator","initial","inner","inout","insensitive","insert","int","integer","intersect","intersection","interval","into","is","join","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","language","large","last_value","lateral","lead","leading","left","like","like_regex","listagg","ln","local","localtime","localtimestamp","log","log10","lower","match","match_number","match_recognize","matches","max","member","merge","method","min","minute","mod","modifies","module","month","multiset","national","natural","nchar","nclob","new","no","none","normalize","not","nth_value","ntile","null","nullif","numeric","octet_length","occurrences_regex","of","offset","old","omit","on","one","only","open","or","order","out","outer","over","overlaps","overlay","parameter","partition","pattern","per","percent","percent_rank","percentile_cont","percentile_disc","period","portion","position","position_regex","power","precedes","precision","prepare","primary","procedure","ptf","range","rank","reads","real","recursive","ref","references","referencing","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","release","result","return","returns","revoke","right","rollback","rollup","row","row_number","rows","running","savepoint","scope","scroll","search","second","seek","select","sensitive","session_user","set","show","similar","sin","sinh","skip","smallint","some","specific","specifictype","sql","sqlexception","sqlstate","sqlwarning","sqrt","start","static","stddev_pop","stddev_samp","submultiset","subset","substring","substring_regex","succeeds","sum","symmetric","system","system_time","system_user","table","tablesample","tan","tanh","then","time","timestamp","timezone_hour","timezone_minute","to","trailing","translate","translate_regex","translation","treat","trigger","trim","trim_array","true","truncate","uescape","union","unique","unknown","unnest","update","upper","user","using","value","values","value_of","var_pop","var_samp","varbinary","varchar","varying","versioning","when","whenever","where","width_bucket","window","with","within","without","year","add","asc","collation","desc","final","first","last","view"].filter(e=>!r.includes(e)),a={match:t.concat(/\b/,t.either(...s),/\s*\(/),relevance:0,keywords:{built_in:s}};function o(e){return t.concat(/\b/,t.either(...e.map(e=>e.replace(/\s+/,"\\s+"))),/\b/)}const l={scope:"keyword",match:o(["create table","insert into","primary key","foreign key","not null","alter table","add constraint","grouping sets","on overflow","character set","respect nulls","ignore nulls","nulls first","nulls last","depth first","breadth first"]),relevance:0};return{name:"SQL",case_insensitive:!0,illegal:/[{}]|<\//,keywords:{$pattern:/\b[\w\.]+/,keyword:function(e,{exceptions:t,when:n}={}){const r=n;return t=t||[],e.map(e=>e.match(/\|\d+$/)||t.includes(e)?e:r(e)?`${e}|0`:e)}(i,{when:e=>e.length<3}),literal:["true","false","unknown"],type:["bigint","binary","blob","boolean","char","character","clob","date","dec","decfloat","decimal","float","int","integer","interval","nchar","nclob","national","numeric","real","row","smallint","time","timestamp","varchar","varying","varbinary"],built_in:["current_catalog","current_date","current_default_transform_group","current_path","current_role","current_schema","current_transform_group_for_type","current_user","session_user","system_time","system_user","current_time","localtime","current_timestamp","localtimestamp"]},contains:[{scope:"type",match:o(["double precision","large object","with timezone","without timezone"])},l,a,{scope:"variable",match:/@[a-z0-9][a-z0-9_]*/},{scope:"string",variants:[{begin:/'/,end:/'/,contains:[{match:/''/}]}]},{begin:/"/,end:/"/,contains:[{match:/""/}]},e.C_NUMBER_MODE,e.C_BLOCK_COMMENT_MODE,n,{scope:"operator",match:/[-+*/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?/,relevance:0}]}},swift:function(e){const t={match:/\s+/,relevance:0},n=e.COMMENT("/\\*","\\*/",{contains:["self"]}),r=[e.C_LINE_COMMENT_MODE,n],s={match:[/\./,_Ie(...MIe,...CIe)],className:{2:"keyword"}},i={match:NIe(/\./,_Ie(...kIe)),relevance:0},a=kIe.filter(e=>"string"==typeof e).concat(["_|0"]),o={variants:[{className:"keyword",match:_Ie(...kIe.filter(e=>"string"!=typeof e).concat(EIe).map(SIe),...CIe)}]},l={$pattern:_Ie(/\b\w+/,/#\w+/),keyword:a.concat(PIe),literal:AIe},c=[s,i,o],d=[{match:NIe(/\./,_Ie(...OIe)),relevance:0},{className:"built_in",match:NIe(/\b/,_Ie(...OIe),/(?=\()/)}],u={match:/->/,relevance:0},h=[u,{className:"operator",relevance:0,variants:[{match:DIe},{match:`\\.(\\.|${IIe})+`}]}],p="([0-9]_*)+",m="([0-9a-fA-F]_*)+",f={className:"number",relevance:0,variants:[{match:`\\b(${p})(\\.(${p}))?([eE][+-]?(${p}))?\\b`},{match:`\\b0x(${m})(\\.(${m}))?([pP][+-]?(${p}))?\\b`},{match:/\b0o([0-7]_*)+\b/},{match:/\b0b([01]_*)+\b/}]},g=(e="")=>({className:"subst",variants:[{match:NIe(/\\/,e,/[0\\tnr"']/)},{match:NIe(/\\/,e,/u\{[0-9a-fA-F]{1,8}\}/)}]}),x=(e="")=>({className:"subst",match:NIe(/\\/,e,/[\t ]*(?:[\r\n]|\r\n)/)}),v=(e="")=>({className:"subst",label:"interpol",begin:NIe(/\\/,e,/\(/),end:/\)/}),y=(e="")=>({begin:NIe(e,/"""/),end:NIe(/"""/,e),contains:[g(e),x(e),v(e)]}),b=(e="")=>({begin:NIe(e,/"/),end:NIe(/"/,e),contains:[g(e),v(e)]}),w={className:"string",variants:[y(),y("#"),y("##"),y("###"),b(),b("#"),b("##"),b("###")]},j=[e.BACKSLASH_ESCAPE,{begin:/\[/,end:/\]/,relevance:0,contains:[e.BACKSLASH_ESCAPE]}],N={begin:/\/[^\s](?=[^/\n]*\/)/,end:/\//,contains:j},_=e=>{const t=NIe(e,/\//),n=NIe(/\//,e);return{begin:t,end:n,contains:[...j,{scope:"comment",begin:`#(?!.*${n})`,end:/$/}]}},S={scope:"regexp",variants:[_("###"),_("##"),_("#"),N]},M={match:NIe(/`/,zIe,/`/)},C=[M,{className:"variable",match:/\$\d+/},{className:"variable",match:`\\$${FIe}+`}],E=[{match:/(@|#(un)?)available/,scope:"keyword",starts:{contains:[{begin:/\(/,end:/\)/,keywords:VIe,contains:[...h,f,w]}]}},{scope:"keyword",match:NIe(/@/,_Ie(...UIe),jIe(_Ie(/\(/,/\s+/)))},{scope:"meta",match:NIe(/@/,zIe)}],k={match:jIe(/\b[A-Z]/),relevance:0,contains:[{className:"type",match:NIe(/(AV|CA|CF|CG|CI|CL|CM|CN|CT|MK|MP|MTK|MTL|NS|SCN|SK|UI|WK|XC)/,FIe,"+")},{className:"type",match:BIe,relevance:0},{match:/[?!]+/,relevance:0},{match:/\.\.\./,relevance:0},{match:NIe(/\s+&\s+/,jIe(BIe)),relevance:0}]},A={begin:/</,end:/>/,keywords:l,contains:[...r,...c,...E,u,k]};k.contains.push(A);const T={begin:/\(/,end:/\)/,relevance:0,keywords:l,contains:["self",{match:NIe(zIe,/\s*:/),keywords:"_|0",relevance:0},...r,S,...c,...d,...h,f,w,...C,...E,k]},P={begin:/</,end:/>/,keywords:"repeat each",contains:[...r,k]},O={begin:/\(/,end:/\)/,keywords:l,contains:[{begin:_Ie(jIe(NIe(zIe,/\s*:/)),jIe(NIe(zIe,/\s+/,zIe,/\s*:/))),end:/:/,relevance:0,contains:[{className:"keyword",match:/\b_\b/},{className:"params",match:zIe}]},...r,...c,...h,f,w,...E,k,T],endsParent:!0,illegal:/["']/},R={match:[/(func|macro)/,/\s+/,_Ie(M.match,zIe,DIe)],className:{1:"keyword",3:"title.function"},contains:[P,O,t],illegal:[/\[/,/%/]},I={match:[/\b(?:subscript|init[?!]?)/,/\s*(?=[<(])/],className:{1:"keyword"},contains:[P,O,t],illegal:/\[|%/},D={match:[/operator/,/\s+/,DIe],className:{1:"keyword",3:"title"}},L={begin:[/precedencegroup/,/\s+/,BIe],className:{1:"keyword",3:"title"},contains:[k],keywords:[...TIe,...AIe],end:/}/},F={begin:[/(struct|protocol|class|extension|enum|actor)/,/\s+/,zIe,/\s*/],beginScope:{1:"keyword",3:"title.class"},keywords:l,contains:[P,...c,{begin:/:/,end:/\{/,keywords:l,contains:[{scope:"title.class.inherited",match:BIe},...c],relevance:0}]};for(const z of w.variants){const e=z.contains.find(e=>"interpol"===e.label);e.keywords=l;const t=[...c,...d,...h,f,w,...C];e.contains=[...t,{begin:/\(/,end:/\)/,contains:["self",...t]}]}return{name:"Swift",keywords:l,contains:[...r,R,I,{match:[/class\b/,/\s+/,/func\b/,/\s+/,/\b[A-Za-z_][A-Za-z0-9_]*\b/],scope:{1:"keyword",3:"keyword",5:"title.function"}},{match:[/class\b/,/\s+/,/var\b/],scope:{1:"keyword",3:"keyword"}},F,D,L,{beginKeywords:"import",end:/$/,contains:[...r],relevance:0},S,...c,...d,...h,f,w,...C,...E,k,T]}},typescript:function(e){const t=e.regex,n=function(e){const t=e.regex,n=HIe,r="<>",s="</>",i={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(e,t)=>{const n=e[0].length+e.index,r=e.input[n];if("<"===r||","===r)return void t.ignoreMatch();let s;">"===r&&(((e,{after:t})=>{const n="</"+e[0].slice(1);return-1!==e.input.indexOf(n,t)})(e,{after:n})||t.ignoreMatch());const i=e.input.substring(n);((s=i.match(/^\s*=/))||(s=i.match(/^\s+extends\s+/))&&0===s.index)&&t.ignoreMatch()}},a={$pattern:HIe,keyword:WIe,literal:$Ie,built_in:YIe,"variable.language":KIe},o="[0-9](_?[0-9])*",l=`\\.(${o})`,c="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",d={className:"number",variants:[{begin:`(\\b(${c})((${l})|\\.)?|(${l}))[eE][+-]?(${o})\\b`},{begin:`\\b(${c})\\b((${l})\\b|\\.)?|(${l})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},u={className:"subst",begin:"\\$\\{",end:"\\}",keywords:a,contains:[]},h={begin:".?html`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,u],subLanguage:"xml"}},p={begin:".?css`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,u],subLanguage:"css"}},m={begin:".?gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,u],subLanguage:"graphql"}},f={className:"string",begin:"`",end:"`",contains:[e.BACKSLASH_ESCAPE,u]},g={className:"comment",variants:[e.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:n+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),e.C_BLOCK_COMMENT_MODE,e.C_LINE_COMMENT_MODE]},x=[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,h,p,m,f,{match:/\$\d+/},d];u.contains=x.concat({begin:/\{/,end:/\}/,keywords:a,contains:["self"].concat(x)});const v=[].concat(g,u.contains),y=v.concat([{begin:/(\s*)\(/,end:/\)/,keywords:a,contains:["self"].concat(v)}]),b={className:"params",begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:a,contains:y},w={variants:[{match:[/class/,/\s+/,n,/\s+/,/extends/,/\s+/,t.concat(n,"(",t.concat(/\./,n),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,n],scope:{1:"keyword",3:"title.class"}}]},j={relevance:0,match:t.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...GIe,...qIe]}},N={variants:[{match:[/function/,/\s+/,n,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[b],illegal:/%/},_={match:t.concat(/\b/,(S=[...XIe,"super","import"].map(e=>`${e}\\s*\\(`),t.concat("(?!",S.join("|"),")")),n,t.lookahead(/\s*\(/)),className:"title.function",relevance:0};var S;const M={begin:t.concat(/\./,t.lookahead(t.concat(n,/(?![0-9A-Za-z$_(])/))),end:n,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},C={match:[/get|set/,/\s+/,n,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},b]},E="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+e.UNDERSCORE_IDENT_RE+")\\s*=>",k={match:[/const|var|let/,/\s+/,n,/\s*/,/=\s*/,/(async\s*)?/,t.lookahead(E)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[b]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:a,exports:{PARAMS_CONTAINS:y,CLASS_REFERENCE:j},illegal:/#(?![$_A-z])/,contains:[e.SHEBANG({label:"shebang",binary:"node",relevance:5}),{label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,h,p,m,f,g,{match:/\$\d+/},d,j,{scope:"attr",match:n+t.lookahead(":"),relevance:0},k,{begin:"("+e.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[g,e.REGEXP_MODE,{className:"function",begin:E,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:e.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:a,contains:y}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:r,end:s},{match:/<[A-Za-z0-9\\._:-]+\s*\/>/},{begin:i.begin,"on:begin":i.isTrulyOpeningTag,end:i.end}],subLanguage:"xml",contains:[{begin:i.begin,end:i.end,skip:!0,contains:["self"]}]}]},N,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+e.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[b,e.inherit(e.TITLE_MODE,{begin:n,className:"title.function"})]},{match:/\.\.\./,relevance:0},M,{match:"\\$"+n,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[b]},_,{relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"},w,C,{match:/\$[(.]/}]}}(e),r=HIe,s=["any","void","number","boolean","string","object","never","symbol","bigint","unknown"],i={begin:[/namespace/,/\s+/,e.IDENT_RE],beginScope:{1:"keyword",3:"title.class"}},a={beginKeywords:"interface",end:/\{/,excludeEnd:!0,keywords:{keyword:"interface extends",built_in:s},contains:[n.exports.CLASS_REFERENCE]},o={$pattern:HIe,keyword:WIe.concat(["type","interface","public","private","protected","implements","declare","abstract","readonly","enum","override","satisfies"]),literal:$Ie,built_in:YIe.concat(s),"variable.language":KIe},l={className:"meta",begin:"@"+r},c=(e,t,n)=>{const r=e.contains.findIndex(e=>e.label===t);if(-1===r)throw new Error("can not find mode to replace");e.contains.splice(r,1,n)};Object.assign(n.keywords,o),n.exports.PARAMS_CONTAINS.push(l);const d=n.contains.find(e=>"attr"===e.scope),u=Object.assign({},d,{match:t.concat(r,t.lookahead(/\s*\?:/))});return n.exports.PARAMS_CONTAINS.push([n.exports.CLASS_REFERENCE,d,u]),n.contains=n.contains.concat([l,i,a,u]),c(n,"shebang",e.SHEBANG()),c(n,"use_strict",{className:"meta",relevance:10,begin:/^\s*['"]use strict['"]/}),n.contains.find(e=>"func.def"===e.label).relevance=0,Object.assign(n,{name:"TypeScript",aliases:["ts","tsx","mts","cts"]}),n},vbnet:function(e){const t=e.regex,n=/\d{1,2}\/\d{1,2}\/\d{4}/,r=/\d{4}-\d{1,2}-\d{1,2}/,s=/(\d|1[012])(:\d+){0,2} *(AM|PM)/,i=/\d{1,2}(:\d{1,2}){1,2}/,a={className:"literal",variants:[{begin:t.concat(/# */,t.either(r,n),/ *#/)},{begin:t.concat(/# */,i,/ *#/)},{begin:t.concat(/# */,s,/ *#/)},{begin:t.concat(/# */,t.either(r,n),/ +/,t.either(s,i),/ *#/)}]},o=e.COMMENT(/'''/,/$/,{contains:[{className:"doctag",begin:/<\/?/,end:/>/}]}),l=e.COMMENT(null,/$/,{variants:[{begin:/'/},{begin:/([\t ]|^)REM(?=\s)/}]});return{name:"Visual Basic .NET",aliases:["vb"],case_insensitive:!0,classNameAliases:{label:"symbol"},keywords:{keyword:"addhandler alias aggregate ansi as async assembly auto binary by byref byval call case catch class compare const continue custom declare default delegate dim distinct do each equals else elseif end enum erase error event exit explicit finally for friend from function get global goto group handles if implements imports in inherits interface into iterator join key let lib loop me mid module mustinherit mustoverride mybase myclass namespace narrowing new next notinheritable notoverridable of off on operator option optional order overloads overridable overrides paramarray partial preserve private property protected public raiseevent readonly redim removehandler resume return select set shadows shared skip static step stop structure strict sub synclock take text then throw to try unicode until using when where while widening with withevents writeonly yield",built_in:"addressof and andalso await directcast gettype getxmlnamespace is isfalse isnot istrue like mod nameof new not or orelse trycast typeof xor cbool cbyte cchar cdate cdbl cdec cint clng cobj csbyte cshort csng cstr cuint culng cushort",type:"boolean byte char date decimal double integer long object sbyte short single string uinteger ulong ushort",literal:"true false nothing"},illegal:"//|\\{|\\}|endif|gosub|variant|wend|^\\$ ",contains:[{className:"string",begin:/"(""|[^/n])"C\b/},{className:"string",begin:/"/,end:/"/,illegal:/\n/,contains:[{begin:/""/}]},a,{className:"number",relevance:0,variants:[{begin:/\b\d[\d_]*((\.[\d_]+(E[+-]?[\d_]+)?)|(E[+-]?[\d_]+))[RFD@!#]?/},{begin:/\b\d[\d_]*((U?[SIL])|[%&])?/},{begin:/&H[\dA-F_]+((U?[SIL])|[%&])?/},{begin:/&O[0-7_]+((U?[SIL])|[%&])?/},{begin:/&B[01_]+((U?[SIL])|[%&])?/}]},{className:"label",begin:/^\w+:/},o,l,{className:"meta",begin:/[\t ]*#(const|disable|else|elseif|enable|end|externalsource|if|region)\b/,end:/$/,keywords:{keyword:"const disable else elseif enable end externalsource if region then"},contains:[l]}]}},wasm:function(e){const t=e.COMMENT(/\(;/,/;\)/);return t.contains.push("self"),{name:"WebAssembly",keywords:{$pattern:/[\w.]+/,keyword:["anyfunc","block","br","br_if","br_table","call","call_indirect","data","drop","elem","else","end","export","func","global.get","global.set","local.get","local.set","local.tee","get_global","get_local","global","if","import","local","loop","memory","memory.grow","memory.size","module","mut","nop","offset","param","result","return","select","set_global","set_local","start","table","tee_local","then","type","unreachable"]},contains:[e.COMMENT(/;;/,/$/),t,{match:[/(?:offset|align)/,/\s*/,/=/],className:{1:"keyword",3:"operator"}},{className:"variable",begin:/\$[\w_]+/},{match:/(\((?!;)|\))+/,className:"punctuation",relevance:0},{begin:[/(?:func|call|call_indirect)/,/\s+/,/\$[^\s)]+/],className:{1:"keyword",3:"title.function"}},e.QUOTE_STRING_MODE,{match:/(i32|i64|f32|f64)(?!\.)/,className:"type"},{className:"keyword",match:/\b(f32|f64|i32|i64)(?:\.(?:abs|add|and|ceil|clz|const|convert_[su]\/i(?:32|64)|copysign|ctz|demote\/f64|div(?:_[su])?|eqz?|extend_[su]\/i32|floor|ge(?:_[su])?|gt(?:_[su])?|le(?:_[su])?|load(?:(?:8|16|32)_[su])?|lt(?:_[su])?|max|min|mul|nearest|neg?|or|popcnt|promote\/f32|reinterpret\/[fi](?:32|64)|rem_[su]|rot[lr]|shl|shr_[su]|store(?:8|16|32)?|sqrt|sub|trunc(?:_[su]\/f(?:32|64))?|wrap\/i64|xor))\b/},{className:"number",relevance:0,match:/[+-]?\b(?:\d(?:_?\d)*(?:\.\d(?:_?\d)*)?(?:[eE][+-]?\d(?:_?\d)*)?|0x[\da-fA-F](?:_?[\da-fA-F])*(?:\.[\da-fA-F](?:_?[\da-fA-D])*)?(?:[pP][+-]?\d(?:_?\d)*)?)\b|\binf\b|\bnan(?::0x[\da-fA-F](?:_?[\da-fA-D])*)?\b/}]}},xml:function(e){const t=e.regex,n=t.concat(/[\p{L}_]/u,t.optional(/[\p{L}0-9_.-]*:/u),/[\p{L}0-9_.-]*/u),r={className:"symbol",begin:/&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;/},s={begin:/\s/,contains:[{className:"keyword",begin:/#?[a-z_][a-z1-9_-]+/,illegal:/\n/}]},i=e.inherit(s,{begin:/\(/,end:/\)/}),a=e.inherit(e.APOS_STRING_MODE,{className:"string"}),o=e.inherit(e.QUOTE_STRING_MODE,{className:"string"}),l={endsWithParent:!0,illegal:/</,relevance:0,contains:[{className:"attr",begin:/[\p{L}0-9._:-]+/u,relevance:0},{begin:/=\s*/,relevance:0,contains:[{className:"string",endsParent:!0,variants:[{begin:/"/,end:/"/,contains:[r]},{begin:/'/,end:/'/,contains:[r]},{begin:/[^\s"'=<>`]+/}]}]}]};return{name:"HTML, XML",aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist","wsf","svg"],case_insensitive:!0,unicodeRegex:!0,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,relevance:10,contains:[s,o,a,i,{begin:/\[/,end:/\]/,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,contains:[s,i,o,a]}]}]},e.COMMENT(/<!--/,/-->/,{relevance:10}),{begin:/<!\[CDATA\[/,end:/\]\]>/,relevance:10},r,{className:"meta",end:/\?>/,variants:[{begin:/<\?xml/,relevance:10,contains:[o]},{begin:/<\?[a-z][a-z0-9]+/}]},{className:"tag",begin:/<style(?=\s|>)/,end:/>/,keywords:{name:"style"},contains:[l],starts:{end:/<\/style>/,returnEnd:!0,subLanguage:["css","xml"]}},{className:"tag",begin:/<script(?=\s|>)/,end:/>/,keywords:{name:"script"},contains:[l],starts:{end:/<\/script>/,returnEnd:!0,subLanguage:["javascript","handlebars","xml"]}},{className:"tag",begin:/<>|<\/>/},{className:"tag",begin:t.concat(/</,t.lookahead(t.concat(n,t.either(/\/>/,/>/,/\s/)))),end:/\/?>/,contains:[{className:"name",begin:n,relevance:0,starts:l}]},{className:"tag",begin:t.concat(/<\//,t.lookahead(t.concat(n,/>/))),contains:[{className:"name",begin:n,relevance:0},{begin:/>/,relevance:0,endsParent:!0}]}]}},yaml:function(e){const t="true false yes no null",n="[\\w#;/?:@&=+$,.~*'()[\\]]+",r={className:"string",relevance:0,variants:[{begin:/"/,end:/"/},{begin:/\S+/}],contains:[e.BACKSLASH_ESCAPE,{className:"template-variable",variants:[{begin:/\{\{/,end:/\}\}/},{begin:/%\{/,end:/\}/}]}]},s=e.inherit(r,{variants:[{begin:/'/,end:/'/,contains:[{begin:/''/,relevance:0}]},{begin:/"/,end:/"/},{begin:/[^\s,{}[\]]+/}]}),i={className:"number",begin:"\\b[0-9]{4}(-[0-9][0-9]){0,2}([Tt \\t][0-9][0-9]?(:[0-9][0-9]){2})?(\\.[0-9]*)?([ \\t])*(Z|[-+][0-9][0-9]?(:[0-9][0-9])?)?\\b"},a={end:",",endsWithParent:!0,excludeEnd:!0,keywords:t,relevance:0},o={begin:/\{/,end:/\}/,contains:[a],illegal:"\\n",relevance:0},l={begin:"\\[",end:"\\]",contains:[a],illegal:"\\n",relevance:0},c=[{className:"attr",variants:[{begin:/[\w*@][\w*@ :()\./-]*:(?=[ \t]|$)/},{begin:/"[\w*@][\w*@ :()\./-]*":(?=[ \t]|$)/},{begin:/'[\w*@][\w*@ :()\./-]*':(?=[ \t]|$)/}]},{className:"meta",begin:"^---\\s*$",relevance:10},{className:"string",begin:"[\\|>]([1-9]?[+-])?[ ]*\\n( +)[^ ][^\\n]*\\n(\\2[^\\n]+\\n?)*"},{begin:"<%[%=-]?",end:"[%-]?%>",subLanguage:"ruby",excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:"!\\w+!"+n},{className:"type",begin:"!<"+n+">"},{className:"type",begin:"!"+n},{className:"type",begin:"!!"+n},{className:"meta",begin:"&"+e.UNDERSCORE_IDENT_RE+"$"},{className:"meta",begin:"\\*"+e.UNDERSCORE_IDENT_RE+"$"},{className:"bullet",begin:"-(?=[ ]|$)",relevance:0},e.HASH_COMMENT_MODE,{beginKeywords:t,keywords:{literal:t}},i,{className:"number",begin:e.C_NUMBER_RE+"\\b",relevance:0},o,l,{className:"string",relevance:0,begin:/'/,end:/'/,contains:[{match:/''/,scope:"char.escape",relevance:0}]},r],d=[...c];return d.pop(),d.push(s),a.contains=d,{name:"YAML",case_insensitive:!0,aliases:["yml"],contains:c}}},JIe={};class QIe{constructor(e){this.options=e,this.root={type:"root",children:[],data:{language:void 0,relevance:0}},this.stack=[this.root]}addText(e){if(""===e)return;const t=this.stack[this.stack.length-1],n=t.children[t.children.length-1];n&&"text"===n.type?n.value+=e:t.children.push({type:"text",value:e})}startScope(e){this.openNode(String(e))}endScope(){this.closeNode()}__addSublanguage(e,t){const n=this.stack[this.stack.length-1],r=e.root.children;t?n.children.push({type:"element",tagName:"span",properties:{className:[t]},children:r}):n.children.push(...r)}openNode(e){const t=this,n=e.split(".").map(function(e,n){return n?e+"_".repeat(n):t.options.classPrefix+e}),r={type:"element",tagName:"span",properties:{className:n},children:[]};this.stack[this.stack.length-1].children.push(r),this.stack.push(r)}closeNode(){this.stack.pop()}finalize(){}toHTML(){return""}}const eDe=function(e){const t=RRe.newInstance();return e&&s(e),{highlight:n,highlightAuto:function(e,s){const i=(s||JIe).subset||r();let a,o=-1,l=0;for(;++o<i.length;){const r=i[o];if(!t.getLanguage(r))continue;const c=n(r,e,s);c.data&&void 0!==c.data.relevance&&c.data.relevance>l&&(l=c.data.relevance,a=c)}return a||{type:"root",children:[],data:{language:void 0,relevance:l}}},listLanguages:r,register:s,registerAlias:function(e,n){if("string"==typeof e)t.registerAliases("string"==typeof n?n:[...n],{languageName:e});else{let n;for(n in e)if(Object.hasOwn(e,n)){const r=e[n];t.registerAliases("string"==typeof r?r:[...r],{languageName:n})}}},registered:function(e){return Boolean(t.getLanguage(e))}};function n(e,n,r){const s=r||JIe,i="string"==typeof s.prefix?s.prefix:"hljs-";if(!t.getLanguage(e))throw new Error("Unknown language: `"+e+"` is not registered");t.configure({__emitter:QIe,classPrefix:i});const a=t.highlight(n,{ignoreIllegals:!0,language:e});if(a.errorRaised)throw new Error("Could not highlight with `Highlight.js`",{cause:a.errorRaised});const o=a._emitter.root,l=o.data;return l.language=a.language,l.relevance=a.relevance,o}function r(){return t.listLanguages()}function s(e,n){if("string"==typeof e)t.registerLanguage(e,n);else{let n;for(n in e)Object.hasOwn(e,n)&&t.registerLanguage(n,e[n])}}}(ZIe);function tDe({content:e="",onChange:t,onSave:n,onPreview:r,autoSave:s=!0,readOnly:i=!1,placeholder:a="Start writing your blog post...",characterLimit:o=5e4}){const[l,c]=hn.useState(!1),[d,u]=hn.useState(""),[h,p]=hn.useState(!1),[m,f]=hn.useState(""),[g,x]=hn.useState(""),[v,y]=hn.useState(!1),[b,w]=hn.useState(null),j=Hke({extensions:[NOe.configure({codeBlock:!1}),SOe.configure({HTMLAttributes:{class:"rounded-lg max-w-full h-auto my-4"}}),pPe.configure({openOnClick:!1,HTMLAttributes:{class:"text-blue-600 hover:text-blue-800 underline"}}),zRe.configure({lowlight:eDe,HTMLAttributes:{class:"rounded-lg bg-gray-900 text-gray-100 p-4 my-4 overflow-x-auto"}}),BRe.configure({placeholder:a}),URe.configure({limit:o})],content:e,editable:!i,onUpdate:({editor:e})=>{const r=e.getHTML();t&&t(r),s&&n&&N()}}),N=()=>{y(!0),setTimeout(()=>{n&&n(),w(new Date),y(!1)},2e3)};if(!j)return null;const _=j.storage.characterCount.characters(),S=j.storage.characterCount.words();return Ot.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden bg-white",children:[!i&&Ot.jsx("div",{className:"border-b border-gray-200 bg-gray-50 p-2",children:Ot.jsxs("div",{className:"flex flex-wrap items-center gap-1",children:[Ot.jsxs("div",{className:"flex items-center gap-1",children:[Ot.jsx(Ln,{type:"button",variant:"ghost",size:"sm",onClick:()=>j.chain().focus().toggleBold().run(),className:j.isActive("bold")?"bg-gray-200":"",children:Ot.jsx(ha,{className:"w-4 h-4"})}),Ot.jsx(Ln,{type:"button",variant:"ghost",size:"sm",onClick:()=>j.chain().focus().toggleItalic().run(),className:j.isActive("italic")?"bg-gray-200":"",children:Ot.jsx(pa,{className:"w-4 h-4"})}),Ot.jsx(Ln,{type:"button",variant:"ghost",size:"sm",onClick:()=>j.chain().focus().toggleStrike().run(),className:j.isActive("strike")?"bg-gray-200":"",children:Ot.jsx(ma,{className:"w-4 h-4"})}),Ot.jsx(Ln,{type:"button",variant:"ghost",size:"sm",onClick:()=>j.chain().focus().toggleCode().run(),className:j.isActive("code")?"bg-gray-200":"",children:Ot.jsx(fa,{className:"w-4 h-4"})})]}),Ot.jsx(rs,{orientation:"vertical",className:"h-6"}),Ot.jsxs("div",{className:"flex items-center gap-1",children:[Ot.jsx(Ln,{type:"button",variant:"ghost",size:"sm",onClick:()=>j.chain().focus().toggleHeading({level:1}).run(),className:j.isActive("heading",{level:1})?"bg-gray-200":"",children:Ot.jsx(ga,{className:"w-4 h-4"})}),Ot.jsx(Ln,{type:"button",variant:"ghost",size:"sm",onClick:()=>j.chain().focus().toggleHeading({level:2}).run(),className:j.isActive("heading",{level:2})?"bg-gray-200":"",children:Ot.jsx(xa,{className:"w-4 h-4"})}),Ot.jsx(Ln,{type:"button",variant:"ghost",size:"sm",onClick:()=>j.chain().focus().toggleHeading({level:3}).run(),className:j.isActive("heading",{level:3})?"bg-gray-200":"",children:Ot.jsx(va,{className:"w-4 h-4"})})]}),Ot.jsx(rs,{orientation:"vertical",className:"h-6"}),Ot.jsxs("div",{className:"flex items-center gap-1",children:[Ot.jsx(Ln,{type:"button",variant:"ghost",size:"sm",onClick:()=>j.chain().focus().toggleBulletList().run(),className:j.isActive("bulletList")?"bg-gray-200":"",children:Ot.jsx(ya,{className:"w-4 h-4"})}),Ot.jsx(Ln,{type:"button",variant:"ghost",size:"sm",onClick:()=>j.chain().focus().toggleOrderedList().run(),className:j.isActive("orderedList")?"bg-gray-200":"",children:Ot.jsx(ba,{className:"w-4 h-4"})}),Ot.jsx(Ln,{type:"button",variant:"ghost",size:"sm",onClick:()=>j.chain().focus().toggleBlockquote().run(),className:j.isActive("blockquote")?"bg-gray-200":"",children:Ot.jsx(wa,{className:"w-4 h-4"})}),Ot.jsx(Ln,{type:"button",variant:"ghost",size:"sm",onClick:()=>j.chain().focus().toggleCodeBlock().run(),className:j.isActive("codeBlock")?"bg-gray-200":"",children:Ot.jsx(ja,{className:"w-4 h-4"})})]}),Ot.jsx(rs,{orientation:"vertical",className:"h-6"}),Ot.jsxs("div",{className:"flex items-center gap-1",children:[Ot.jsxs(yr,{open:l,onOpenChange:c,children:[Ot.jsx(br,{asChild:!0,children:Ot.jsx(Ln,{type:"button",variant:"ghost",size:"sm",children:Ot.jsx(Pr,{className:"w-4 h-4"})})}),Ot.jsxs(jr,{children:[Ot.jsxs(Nr,{children:[Ot.jsx(_r,{children:"Insert Image"}),Ot.jsx(ji,{children:"Enter the URL of the image you want to insert"})]}),Ot.jsx("div",{className:"space-y-4",children:Ot.jsxs("div",{children:[Ot.jsx(ws,{htmlFor:"image-url",children:"Image URL"}),Ot.jsx(zn,{id:"image-url",placeholder:"https://example.com/image.jpg",value:d,onChange:e=>u(e.target.value)})]})}),Ot.jsxs(Ai,{children:[Ot.jsx(Ln,{variant:"outline",onClick:()=>c(!1),children:"Cancel"}),Ot.jsx(Ln,{onClick:()=>{d&&j&&(j.chain().focus().setImage({src:d}).run(),u(""),c(!1))},children:"Insert Image"})]})]})]}),Ot.jsxs(yr,{open:h,onOpenChange:p,children:[Ot.jsx(br,{asChild:!0,children:Ot.jsx(Ln,{type:"button",variant:"ghost",size:"sm",children:Ot.jsx(Na,{className:"w-4 h-4"})})}),Ot.jsxs(jr,{children:[Ot.jsxs(Nr,{children:[Ot.jsx(_r,{children:"Insert Link"}),Ot.jsx(ji,{children:"Enter the URL and optional text for the link"})]}),Ot.jsxs("div",{className:"space-y-4",children:[Ot.jsxs("div",{children:[Ot.jsx(ws,{htmlFor:"link-url",children:"URL"}),Ot.jsx(zn,{id:"link-url",placeholder:"https://example.com",value:m,onChange:e=>f(e.target.value)})]}),Ot.jsxs("div",{children:[Ot.jsx(ws,{htmlFor:"link-text",children:"Link Text (Optional)"}),Ot.jsx(zn,{id:"link-text",placeholder:"Click here",value:g,onChange:e=>x(e.target.value)})]})]}),Ot.jsxs(Ai,{children:[Ot.jsx(Ln,{variant:"outline",onClick:()=>p(!1),children:"Cancel"}),Ot.jsx(Ln,{onClick:()=>{m&&j&&(g?j.chain().focus().insertContent(`<a href="${m}">${g}</a>`).run():j.chain().focus().setLink({href:m}).run(),f(""),x(""),p(!1))},children:"Insert Link"})]})]})]})]}),Ot.jsx(rs,{orientation:"vertical",className:"h-6"}),Ot.jsxs("div",{className:"flex items-center gap-1",children:[Ot.jsx(Ln,{type:"button",variant:"ghost",size:"sm",onClick:()=>j.chain().focus().undo().run(),disabled:!j.can().undo(),children:Ot.jsx(_a,{className:"w-4 h-4"})}),Ot.jsx(Ln,{type:"button",variant:"ghost",size:"sm",onClick:()=>j.chain().focus().redo().run(),disabled:!j.can().redo(),children:Ot.jsx(Sa,{className:"w-4 h-4"})})]}),Ot.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[s&&Ot.jsx("span",{className:"text-xs text-gray-500",children:v?"Saving...":b?`Saved ${nDe(b)}`:"Not saved"}),n&&!s&&Ot.jsxs(Ln,{type:"button",size:"sm",onClick:n,children:[Ot.jsx(ys,{className:"w-4 h-4 mr-2"}),"Save"]}),r&&Ot.jsxs(Ln,{type:"button",variant:"outline",size:"sm",onClick:r,children:[Ot.jsx($r,{className:"w-4 h-4 mr-2"}),"Preview"]})]})]})}),Ot.jsx("div",{className:"p-6 min-h-[500px] prose prose-lg max-w-none",children:Ot.jsx(Lke,{editor:j})}),!i&&Ot.jsx("div",{className:"border-t border-gray-200 bg-gray-50 px-6 py-2",children:Ot.jsx("div",{className:"flex items-center justify-between text-xs text-gray-500",children:Ot.jsxs("div",{className:"flex items-center gap-4",children:[Ot.jsxs("span",{children:[S," words"]}),Ot.jsxs("span",{children:[_," / ",o," characters"]}),Ot.jsxs("span",{children:["~",Math.ceil(S/200)," min read"]})]})})})]})}function nDe(e){const t=Math.floor(((new Date).getTime()-e.getTime())/1e3);if(t<60)return"just now";const n=Math.floor(t/60);if(n<60)return`${n}m ago`;const r=Math.floor(n/60);return r<24?`${r}h ago`:`${Math.floor(r/24)}d ago`}function rDe(){const[e,t]=hn.useState("posts"),[n,r]=hn.useState(""),[s,i]=hn.useState("all"),[a,o]=hn.useState(null),[l,c]=hn.useState(!1),[d,u]=hn.useState({title:"",slug:"",content:"",excerpt:"",status:"draft",featuredImage:"",metaTitle:"",metaDescription:"",metaKeywords:"",canonicalUrl:"",ogTitle:"",ogDescription:"",ogImage:"",twitterCard:"summary_large_image"}),[h,p]=hn.useState([]),{toast:m}=Nn(),{data:f}=za({queryKey:["/api/blog/posts",n,s],queryFn:async()=>{const e=new URLSearchParams;n&&e.append("q",n),"all"!==s&&e.append("status",s),e.append("limit","20");const t=await fetch(`/api/blog/posts?${e}`);if(!t.ok)throw new Error("Failed to fetch posts");return t.json()}}),{data:g}=za({queryKey:["/api/blog/categories"]}),{data:x}=za({queryKey:["/api/blog/tags"]}),v=Fa({mutationFn:async e=>qn("/api/blog/posts",{method:"POST",body:e}),onSuccess:e=>{vr.invalidateQueries({queryKey:["/api/blog/posts"]}),c(!1),_(),h.length>0&&w.mutate({postId:e.id,tagIds:h}),m({title:"Post created!",description:"Your blog post has been created successfully."})},onError:()=>{m({variant:"destructive",title:"Failed to create post",description:"Please try again later."})}}),y=Fa({mutationFn:async({id:e,data:t})=>qn("/api/blog/posts/"+e,{method:"PUT",body:t}),onSuccess:()=>{vr.invalidateQueries({queryKey:["/api/blog/posts"]}),o(null),_(),m({title:"Post updated!",description:"Your blog post has been updated successfully."})},onError:()=>{m({variant:"destructive",title:"Failed to update post",description:"Please try again later."})}}),b=Fa({mutationFn:async e=>qn("/api/blog/posts/"+e,{method:"DELETE"}),onSuccess:()=>{vr.invalidateQueries({queryKey:["/api/blog/posts"]}),m({title:"Post deleted",description:"The blog post has been deleted."})},onError:()=>{m({variant:"destructive",title:"Failed to delete post",description:"Please try again later."})}}),w=Fa({mutationFn:async({postId:e,tagIds:t})=>qn("/api/blog/posts/"+e+"/tags",{method:"POST",body:{tagIds:t}}),onSuccess:()=>{vr.invalidateQueries({queryKey:["/api/blog/posts"]})}}),j=Fa({mutationFn:async e=>qn("/api/blog/categories",{method:"POST",body:e}),onSuccess:()=>{vr.invalidateQueries({queryKey:["/api/blog/categories"]}),m({title:"Category created!",description:"The category has been created successfully."})}}),N=Fa({mutationFn:async e=>qn("/api/blog/tags",{method:"POST",body:e}),onSuccess:()=>{vr.invalidateQueries({queryKey:["/api/blog/tags"]}),m({title:"Tag created!",description:"The tag has been created successfully."})}}),_=()=>{u({title:"",slug:"",content:"",excerpt:"",status:"draft",featuredImage:"",metaTitle:"",metaDescription:"",metaKeywords:"",canonicalUrl:"",ogTitle:"",ogDescription:"",ogImage:"",twitterCard:"summary_large_image"}),p([])},S=e=>e.toLowerCase().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").replace(/--+/g,"-").trim();return Ot.jsx("div",{className:"min-h-screen bg-background",children:Ot.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[Ot.jsxs("div",{className:"flex justify-between items-center mb-8",children:[Ot.jsxs("div",{children:[Ot.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Blog Admin"}),Ot.jsx("p",{className:"text-muted-foreground",children:"Manage your blog content and settings"})]}),Ot.jsxs(Ln,{onClick:()=>c(!0),"data-testid":"button-new-post",children:[Ot.jsx(wr,{className:"mr-2 h-4 w-4"}),"New Post"]})]}),Ot.jsxs(qs,{value:e,onValueChange:t,children:[Ot.jsxs(Xs,{children:[Ot.jsxs(Ks,{value:"posts","data-testid":"tab-posts",children:[Ot.jsx(cs,{className:"mr-2 h-4 w-4"}),"Posts"]}),Ot.jsx(Ks,{value:"categories","data-testid":"tab-categories",children:"Categories"}),Ot.jsx(Ks,{value:"tags","data-testid":"tab-tags",children:"Tags"}),Ot.jsxs(Ks,{value:"analytics","data-testid":"tab-analytics",children:[Ot.jsx(Hs,{className:"mr-2 h-4 w-4"}),"Analytics"]})]}),Ot.jsx(Ys,{value:"posts",className:"mt-6",children:Ot.jsxs(Sn,{children:[Ot.jsx(Lr,{children:Ot.jsxs("div",{className:"flex justify-between items-center",children:[Ot.jsx(zr,{children:"Blog Posts"}),Ot.jsxs("div",{className:"flex gap-2",children:[Ot.jsx(zn,{placeholder:"Search posts...",className:"w-64",value:n,onChange:e=>r(e.target.value),"data-testid":"input-search-posts"}),Ot.jsxs(Un,{value:s,onValueChange:i,children:[Ot.jsx(Vn,{className:"w-32","data-testid":"select-status-filter",children:Ot.jsx(Hn,{})}),Ot.jsxs(Wn,{children:[Ot.jsx($n,{value:"all",children:"All"}),Ot.jsx($n,{value:"draft",children:"Draft"}),Ot.jsx($n,{value:"published",children:"Published"}),Ot.jsx($n,{value:"scheduled",children:"Scheduled"})]})]})]})]})}),Ot.jsx(Mn,{children:Ot.jsxs(vxe,{children:[Ot.jsx(yxe,{children:Ot.jsxs(wxe,{children:[Ot.jsx(jxe,{children:"Title"}),Ot.jsx(jxe,{children:"Category"}),Ot.jsx(jxe,{children:"Status"}),Ot.jsx(jxe,{children:"Published"}),Ot.jsx(jxe,{children:"Views"}),Ot.jsx(jxe,{children:"Actions"})]})}),Ot.jsx(bxe,{children:f?.posts?.map(e=>{return Ot.jsxs(wxe,{children:[Ot.jsx(Nxe,{className:"font-medium",children:Ot.jsx(Yn,{href:`/blog/${e.slug}`,children:Ot.jsx("a",{className:"hover:text-primary","data-testid":`text-post-title-${e.id}`,children:e.title})})}),Ot.jsx(Nxe,{children:g?.find(t=>t.id===e.categoryId)?.name||"-"}),Ot.jsx(Nxe,{children:Ot.jsx(Tn,{variant:"published"===e.status?"default":"secondary",children:e.status})}),Ot.jsx(Nxe,{children:e.publishedAt?(t=e.publishedAt,new Date(t).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})):"-"}),Ot.jsx(Nxe,{children:e.viewCount}),Ot.jsx(Nxe,{children:Ot.jsxs("div",{className:"flex gap-2",children:[Ot.jsx(Ln,{variant:"ghost",size:"sm",onClick:()=>{o(e),u(e),c(!0)},"data-testid":`button-edit-${e.id}`,children:Ot.jsx(Ds,{className:"h-4 w-4"})}),Ot.jsx(Ln,{variant:"ghost",size:"sm",onClick:()=>b.mutate(e.id),"data-testid":`button-delete-${e.id}`,children:Ot.jsx(vs,{className:"h-4 w-4 text-destructive"})})]})})]},e.id);var t})})]})})]})}),Ot.jsx(Ys,{value:"categories",className:"mt-6",children:Ot.jsxs(Sn,{children:[Ot.jsx(Lr,{children:Ot.jsx(zr,{children:"Categories"})}),Ot.jsx(Mn,{children:Ot.jsxs("div",{className:"space-y-4",children:[Ot.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[Ot.jsx(zn,{placeholder:"Category name",id:"new-category-name","data-testid":"input-new-category"}),Ot.jsx(zn,{placeholder:"Slug (optional)",id:"new-category-slug","data-testid":"input-new-category-slug"}),Ot.jsxs(Ln,{onClick:()=>{const e=document.getElementById("new-category-name"),t=document.getElementById("new-category-slug"),n=e.value,r=t.value||S(n);n&&(j.mutate({name:n,slug:r}),e.value="",t.value="")},"data-testid":"button-add-category",children:[Ot.jsx(wr,{className:"mr-2 h-4 w-4"}),"Add Category"]})]}),Ot.jsx("div",{className:"space-y-2",children:g?.map(e=>Ot.jsxs("div",{className:"flex justify-between items-center p-3 border rounded-lg",children:[Ot.jsxs("div",{children:[Ot.jsx("p",{className:"font-medium",children:e.name}),Ot.jsx("p",{className:"text-sm text-muted-foreground",children:e.slug})]}),Ot.jsxs(Tn,{children:[e.postCount||0," posts"]})]},e.id))})]})})]})}),Ot.jsx(Ys,{value:"tags",className:"mt-6",children:Ot.jsxs(Sn,{children:[Ot.jsx(Lr,{children:Ot.jsx(zr,{children:"Tags"})}),Ot.jsx(Mn,{children:Ot.jsxs("div",{className:"space-y-4",children:[Ot.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[Ot.jsx(zn,{placeholder:"Tag name",id:"new-tag-name","data-testid":"input-new-tag"}),Ot.jsx(zn,{placeholder:"Slug (optional)",id:"new-tag-slug","data-testid":"input-new-tag-slug"}),Ot.jsxs(Ln,{onClick:()=>{const e=document.getElementById("new-tag-name"),t=document.getElementById("new-tag-slug"),n=e.value,r=t.value||S(n);n&&(N.mutate({name:n,slug:r}),e.value="",t.value="")},"data-testid":"button-add-tag",children:[Ot.jsx(wr,{className:"mr-2 h-4 w-4"}),"Add Tag"]})]}),Ot.jsx("div",{className:"flex flex-wrap gap-2",children:x?.map(e=>Ot.jsxs(Tn,{variant:"outline",className:"px-3 py-1",children:[e.name," (",e.usageCount||0,")"]},e.id))})]})})]})}),Ot.jsxs(Ys,{value:"analytics",className:"mt-6",children:[Ot.jsxs("div",{className:"grid md:grid-cols-4 gap-4 mb-6",children:[Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ot.jsx(zr,{className:"text-sm font-medium",children:"Total Posts"}),Ot.jsx(cs,{className:"h-4 w-4 text-muted-foreground"})]}),Ot.jsxs(Mn,{children:[Ot.jsx("div",{className:"text-2xl font-bold",children:f?.total||0}),Ot.jsxs("p",{className:"text-xs text-muted-foreground",children:[f?.posts?.filter(e=>"published"===e.status).length||0," published"]})]})]}),Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ot.jsx(zr,{className:"text-sm font-medium",children:"Total Views"}),Ot.jsx($r,{className:"h-4 w-4 text-muted-foreground"})]}),Ot.jsxs(Mn,{children:[Ot.jsx("div",{className:"text-2xl font-bold",children:f?.posts?.reduce((e,t)=>e+(t.viewCount||0),0)||0}),Ot.jsx("p",{className:"text-xs text-muted-foreground",children:"All time"})]})]}),Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ot.jsx(zr,{className:"text-sm font-medium",children:"Engagement"}),Ot.jsx(Zn,{className:"h-4 w-4 text-muted-foreground"})]}),Ot.jsxs(Mn,{children:[Ot.jsx("div",{className:"text-2xl font-bold",children:f?.posts?.reduce((e,t)=>e+(t.likeCount||0),0)||0}),Ot.jsx("p",{className:"text-xs text-muted-foreground",children:"Total likes"})]})]}),Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ot.jsx(zr,{className:"text-sm font-medium",children:"Comments"}),Ot.jsx(Or,{className:"h-4 w-4 text-muted-foreground"})]}),Ot.jsxs(Mn,{children:[Ot.jsx("div",{className:"text-2xl font-bold",children:f?.posts?.reduce((e,t)=>e+(t.commentCount||0),0)||0}),Ot.jsx("p",{className:"text-xs text-muted-foreground",children:"Total comments"})]})]})]}),Ot.jsxs(Sn,{children:[Ot.jsx(Lr,{children:Ot.jsx(zr,{children:"Top Performing Posts"})}),Ot.jsx(Mn,{children:Ot.jsxs(vxe,{children:[Ot.jsx(yxe,{children:Ot.jsxs(wxe,{children:[Ot.jsx(jxe,{children:"Title"}),Ot.jsx(jxe,{children:"Views"}),Ot.jsx(jxe,{children:"Likes"}),Ot.jsx(jxe,{children:"Comments"}),Ot.jsx(jxe,{children:"Shares"})]})}),Ot.jsx(bxe,{children:f?.posts?.sort((e,t)=>(t.viewCount||0)-(e.viewCount||0)).slice(0,5).map(e=>Ot.jsxs(wxe,{children:[Ot.jsx(Nxe,{className:"font-medium",children:Ot.jsx(Yn,{href:`/blog/${e.slug}`,children:Ot.jsx("a",{className:"hover:text-primary",children:e.title})})}),Ot.jsx(Nxe,{children:e.viewCount}),Ot.jsx(Nxe,{children:e.likeCount}),Ot.jsx(Nxe,{children:e.commentCount}),Ot.jsx(Nxe,{children:e.shareCount})]},e.id))})]})})]})]})]}),Ot.jsx(yr,{open:l,onOpenChange:e=>{e||(c(!1),o(null),_())},children:Ot.jsxs(jr,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[Ot.jsx(Nr,{children:Ot.jsx(_r,{children:a?"Edit Post":"Create New Post"})}),Ot.jsxs("div",{className:"space-y-6 py-4",children:[Ot.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsx(ws,{htmlFor:"title",children:"Title"}),Ot.jsx(zn,{id:"title",value:d.title,onChange:e=>u({...d,title:e.target.value}),placeholder:"Enter post title","data-testid":"input-post-title"})]}),Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsx(ws,{htmlFor:"slug",children:"Slug"}),Ot.jsx(zn,{id:"slug",value:d.slug,onChange:e=>u({...d,slug:e.target.value}),placeholder:"post-slug","data-testid":"input-post-slug"})]})]}),Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsx(ws,{htmlFor:"excerpt",children:"Excerpt"}),Ot.jsx(Tr,{id:"excerpt",value:d.excerpt,onChange:e=>u({...d,excerpt:e.target.value}),placeholder:"Brief description of the post",rows:3,"data-testid":"textarea-post-excerpt"})]}),Ot.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsx(ws,{htmlFor:"category",children:"Category"}),Ot.jsxs(Un,{value:d.categoryId,onValueChange:e=>u({...d,categoryId:e}),children:[Ot.jsx(Vn,{id:"category","data-testid":"select-post-category",children:Ot.jsx(Hn,{placeholder:"Select category"})}),Ot.jsx(Wn,{children:g?.map(e=>Ot.jsx($n,{value:e.id,children:e.name},e.id))})]})]}),Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsx(ws,{htmlFor:"status",children:"Status"}),Ot.jsxs(Un,{value:d.status,onValueChange:e=>u({...d,status:e}),children:[Ot.jsx(Vn,{id:"status","data-testid":"select-post-status",children:Ot.jsx(Hn,{})}),Ot.jsxs(Wn,{children:[Ot.jsx($n,{value:"draft",children:"Draft"}),Ot.jsx($n,{value:"published",children:"Published"}),Ot.jsx($n,{value:"scheduled",children:"Scheduled"})]})]})]})]}),Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsx(ws,{children:"Tags"}),Ot.jsx("div",{className:"flex flex-wrap gap-2",children:x?.map(e=>Ot.jsx(Tn,{variant:h.includes(e.id)?"default":"outline",className:"cursor-pointer",onClick:()=>{p(t=>t.includes(e.id)?t.filter(t=>t!==e.id):[...t,e.id])},"data-testid":`badge-select-tag-${e.id}`,children:e.name},e.id))})]}),Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsx(ws,{htmlFor:"featured-image",children:"Featured Image URL"}),Ot.jsx(zn,{id:"featured-image",value:d.featuredImage,onChange:e=>u({...d,featuredImage:e.target.value}),placeholder:"https://example.com/image.jpg","data-testid":"input-featured-image"})]}),Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsx(ws,{children:"Content"}),Ot.jsx(tDe,{content:d.content||"",onChange:e=>u({...d,content:e})})]}),Ot.jsx(rs,{}),Ot.jsxs("div",{className:"space-y-4",children:[Ot.jsx("h3",{className:"font-semibold",children:"SEO Settings"}),Ot.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsx(ws,{htmlFor:"meta-title",children:"Meta Title"}),Ot.jsx(zn,{id:"meta-title",value:d.metaTitle,onChange:e=>u({...d,metaTitle:e.target.value}),placeholder:"SEO title","data-testid":"input-meta-title"})]}),Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsx(ws,{htmlFor:"canonical-url",children:"Canonical URL"}),Ot.jsx(zn,{id:"canonical-url",value:d.canonicalUrl,onChange:e=>u({...d,canonicalUrl:e.target.value}),placeholder:"https://example.com/post","data-testid":"input-canonical-url"})]})]}),Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsx(ws,{htmlFor:"meta-description",children:"Meta Description"}),Ot.jsx(Tr,{id:"meta-description",value:d.metaDescription,onChange:e=>u({...d,metaDescription:e.target.value}),placeholder:"SEO description",rows:2,"data-testid":"textarea-meta-description"})]}),Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsx(ws,{htmlFor:"meta-keywords",children:"Meta Keywords"}),Ot.jsx(zn,{id:"meta-keywords",value:d.metaKeywords,onChange:e=>u({...d,metaKeywords:e.target.value}),placeholder:"keyword1, keyword2, keyword3","data-testid":"input-meta-keywords"})]}),Ot.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsx(ws,{htmlFor:"og-title",children:"Open Graph Title"}),Ot.jsx(zn,{id:"og-title",value:d.ogTitle,onChange:e=>u({...d,ogTitle:e.target.value}),placeholder:"Social media title","data-testid":"input-og-title"})]}),Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsx(ws,{htmlFor:"og-image",children:"Open Graph Image"}),Ot.jsx(zn,{id:"og-image",value:d.ogImage,onChange:e=>u({...d,ogImage:e.target.value}),placeholder:"https://example.com/og-image.jpg","data-testid":"input-og-image"})]})]}),Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsx(ws,{htmlFor:"og-description",children:"Open Graph Description"}),Ot.jsx(Tr,{id:"og-description",value:d.ogDescription,onChange:e=>u({...d,ogDescription:e.target.value}),placeholder:"Social media description",rows:2,"data-testid":"textarea-og-description"})]})]})]}),Ot.jsxs(Ai,{children:[Ot.jsx(Ln,{variant:"outline",onClick:()=>c(!1),children:"Cancel"}),Ot.jsxs(Ln,{onClick:()=>{if(!d.title||!d.content)return void m({variant:"destructive",title:"Missing required fields",description:"Please provide a title and content for the post."});const e={...d,slug:d.slug||S(d.title),categoryId:d.categoryId||void 0};a?y.mutate({id:a.id,data:e}):v.mutate(e)},"data-testid":"button-save-post",children:[a?"Update":"Create"," Post"]})]})]})})]})})}function sDe(){const{user:e}=Ua(),[,t]=_n(),{toast:n}=Nn(),[r,s]=hn.useState("overview"),[i,a]=hn.useState(!0);hn.useEffect(()=>{"1"!==e?.id&&(n({title:"Access Denied",description:"You don't have permission to access this page.",variant:"destructive"}),t("/"))},[e,t,n]);const{data:o}=za({queryKey:["/api/monitoring/health"],refetchInterval:!!i&&5e3});za({queryKey:["/api/monitoring/dashboard"],refetchInterval:!!i&&1e4});const{data:l,isLoading:c}=za({queryKey:["/api/monitoring/errors"],refetchInterval:!!i&&3e4}),{data:d}=za({queryKey:["/api/monitoring/performance"],refetchInterval:!!i&&3e4}),{data:u}=za({queryKey:["/api/monitoring/audits"],refetchInterval:!!i&&6e4}),{data:h}=za({queryKey:["/api/monitoring/ai"],refetchInterval:!!i&&1e4}),{data:p}=za({queryKey:["/api/monitoring/system-info"]}),m=Fa({mutationFn:()=>qn("POST","/api/monitoring/errors/clear"),onSuccess:()=>{vr.invalidateQueries({queryKey:["/api/monitoring/errors"]}),n({title:"Error Logs Cleared",description:"All error logs have been cleared successfully."})}}),f=Fa({mutationFn:()=>qn("POST","/api/monitoring/performance/clear"),onSuccess:()=>{vr.invalidateQueries({queryKey:["/api/monitoring/performance"]}),n({title:"Performance Metrics Cleared",description:"All performance metrics have been reset."})}}),g=Fa({mutationFn:()=>qn("POST","/api/monitoring/circuit-breakers/reset"),onSuccess:()=>{vr.invalidateQueries({queryKey:["/api/monitoring/system-info"]}),n({title:"Circuit Breakers Reset",description:"All circuit breakers have been reset successfully."})}}),x=e=>{switch(e){case"error":return Ot.jsx(Bs,{className:"h-4 w-4 text-red-600"});case"warning":return Ot.jsx(ms,{className:"h-4 w-4 text-yellow-600"});default:return Ot.jsx(Cn,{className:"h-4 w-4 text-blue-600"})}},v=e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,t)*100)/100+" "+["Bytes","KB","MB","GB"][t]};return e&&"1"===e.id?Ot.jsx("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-slate-100 dark:from-slate-950 dark:to-slate-900",children:Ot.jsxs("div",{className:"container mx-auto px-4 py-8",children:[Ot.jsx("div",{className:"mb-8",children:Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{children:[Ot.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-red-600 to-orange-600 bg-clip-text text-transparent",children:"System Monitoring"}),Ot.jsx("p",{className:"text-muted-foreground mt-1",children:"Real-time system health, performance metrics, and logs"})]}),Ot.jsxs("div",{className:"flex items-center gap-4",children:[Ot.jsx(Tn,{variant:"healthy"===o?.status?"default":"destructive",children:o?.status||"Unknown"}),Ot.jsxs(Ln,{variant:i?"default":"outline",size:"sm",onClick:()=>a(!i),children:[Ot.jsx(Fs,{className:bn("h-4 w-4 mr-2",i&&"animate-spin")}),i?"Auto Refresh ON":"Auto Refresh OFF"]})]})]})}),Ot.jsxs("div",{className:"grid gap-4 md:grid-cols-4 mb-8",children:[Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ot.jsx(zr,{className:"text-sm font-medium",children:"System Status"}),Ot.jsx(Ri,{className:"h-4 w-4 text-muted-foreground"})]}),Ot.jsxs(Mn,{children:[Ot.jsx("div",{className:bn("text-2xl font-bold",(e=>{switch(e){case"healthy":return"text-green-600";case"degraded":return"text-yellow-600";case"critical":return"text-red-600";default:return"text-gray-600"}})(o?.status)),children:o?.status||"Loading..."}),Ot.jsxs("p",{className:"text-xs text-muted-foreground",children:["Uptime: ",o?(y=o.uptime,`${Math.floor(y/86400)}d ${Math.floor(y%86400/3600)}h ${Math.floor(y%3600/60)}m`):"N/A"]})]})]}),Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ot.jsx(zr,{className:"text-sm font-medium",children:"Error Rate"}),Ot.jsx(ms,{className:"h-4 w-4 text-muted-foreground"})]}),Ot.jsxs(Mn,{children:[Ot.jsx("div",{className:"text-2xl font-bold text-red-600",children:l?l.filter(e=>"error"===e.level).length:0}),Ot.jsx("p",{className:"text-xs text-muted-foreground",children:"Last 24 hours"})]})]}),Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ot.jsx(zr,{className:"text-sm font-medium",children:"Avg Response Time"}),Ot.jsx(Ma,{className:"h-4 w-4 text-muted-foreground"})]}),Ot.jsxs(Mn,{children:[Ot.jsxs("div",{className:"text-2xl font-bold",children:[d&&d.length>0?Math.round(d.reduce((e,t)=>e+t.avgResponseTime,0)/d.length):0,"ms"]}),Ot.jsx("p",{className:"text-xs text-muted-foreground",children:"Across all endpoints"})]})]}),Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ot.jsx(zr,{className:"text-sm font-medium",children:"AI Tasks"}),Ot.jsx(Ca,{className:"h-4 w-4 text-muted-foreground"})]}),Ot.jsxs(Mn,{children:[Ot.jsx("div",{className:"text-2xl font-bold text-purple-600",children:h?.queueSize||0}),Ot.jsx("p",{className:"text-xs text-muted-foreground",children:"In queue"})]})]})]}),Ot.jsxs(qs,{value:r,onValueChange:s,children:[Ot.jsxs(Xs,{className:"grid w-full grid-cols-6",children:[Ot.jsx(Ks,{value:"overview",children:"Overview"}),Ot.jsx(Ks,{value:"errors",children:"Errors"}),Ot.jsx(Ks,{value:"performance",children:"Performance"}),Ot.jsx(Ks,{value:"audit",children:"Audit Log"}),Ot.jsx(Ks,{value:"ai",children:"AI Stats"}),Ot.jsx(Ks,{value:"system",children:"System Info"})]}),Ot.jsx(Ys,{value:"overview",children:Ot.jsxs("div",{className:"grid gap-6",children:[Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{children:[Ot.jsx(zr,{children:"Service Status"}),Ot.jsx(Ur,{children:"Real-time status of all system services"})]}),Ot.jsx(Mn,{children:Ot.jsxs("div",{className:"space-y-4",children:[Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsx(Li,{className:"h-5 w-5"}),Ot.jsx("span",{className:"font-medium",children:"Database"})]}),Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsx(Tn,{variant:"connected"===o?.services.database.status?"default":"destructive",children:o?.services.database.status||"Unknown"}),Ot.jsxs("span",{className:"text-sm text-muted-foreground",children:[o?.services.database.responseTime,"ms"]})]})]}),Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsx(Fi,{className:"h-5 w-5"}),Ot.jsx("span",{className:"font-medium",children:"Redis Cache"})]}),Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsx(Tn,{variant:"connected"===o?.services.redis.status?"default":"destructive",children:o?.services.redis.status||"Unknown"}),Ot.jsx("span",{className:"text-sm text-muted-foreground",children:o?v(o.services.redis.memory):"N/A"})]})]}),Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsx(Ca,{className:"h-5 w-5"}),Ot.jsx("span",{className:"font-medium",children:"AI Service"})]}),Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsx(Tn,{variant:"operational"===o?.services.ai.status?"default":"destructive",children:o?.services.ai.status||"Unknown"}),Ot.jsxs("span",{className:"text-sm text-muted-foreground",children:[o?.services.ai.queueSize," tasks"]})]})]}),Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsx(Pn,{className:"h-5 w-5"}),Ot.jsx("span",{className:"font-medium",children:"Email Service"})]}),Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsx(Tn,{variant:"operational"===o?.services.email.status?"default":"destructive",children:o?.services.email.status||"Unknown"}),Ot.jsxs("span",{className:"text-sm text-muted-foreground",children:[o?.services.email.sent," sent"]})]})]})]})})]}),p?.circuitBreakers&&Ot.jsxs(Sn,{children:[Ot.jsx(Lr,{children:Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{children:[Ot.jsx(zr,{children:"Circuit Breakers"}),Ot.jsx(Ur,{children:"Service protection status"})]}),Ot.jsxs(Ln,{variant:"outline",size:"sm",onClick:()=>g.mutate(),disabled:g.isPending,children:[Ot.jsx(Fs,{className:"h-4 w-4 mr-2"}),"Reset All"]})]})}),Ot.jsx(Mn,{children:Ot.jsx("div",{className:"space-y-4",children:p.circuitBreakers.map(e=>Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsx("span",{className:"font-medium",children:e.service}),Ot.jsx(Tn,{variant:"closed"===e.state?"default":"half-open"===e.state?"secondary":"destructive",children:e.state})]},e.service))})})]})]})}),Ot.jsx(Ys,{value:"errors",children:Ot.jsxs(Sn,{children:[Ot.jsx(Lr,{children:Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{children:[Ot.jsx(zr,{children:"Error Logs"}),Ot.jsx(Ur,{children:"Recent errors and warnings"})]}),Ot.jsxs(Ln,{variant:"destructive",size:"sm",onClick:()=>m.mutate(),disabled:m.isPending,children:[Ot.jsx(vs,{className:"h-4 w-4 mr-2"}),"Clear All"]})]})}),Ot.jsx(Mn,{children:Ot.jsx(eC,{className:"h-[600px] pr-4",children:c?Ot.jsx("div",{className:"text-center py-8",children:"Loading errors..."}):l&&l.length>0?Ot.jsx("div",{className:"space-y-4",children:l.map(e=>Ot.jsxs("div",{className:bn("p-4 border rounded-lg","error"===e.level&&"border-red-200 bg-red-50 dark:bg-red-950/20","warning"===e.level&&"border-yellow-200 bg-yellow-50 dark:bg-yellow-950/20","info"===e.level&&"border-blue-200 bg-blue-50 dark:bg-blue-950/20"),children:[Ot.jsxs("div",{className:"flex items-start justify-between",children:[Ot.jsxs("div",{className:"flex items-center gap-2",children:[x(e.level),Ot.jsx("span",{className:"font-medium",children:e.category})]}),Ot.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(e.timestamp).toLocaleString()})]}),Ot.jsx("p",{className:"mt-2 text-sm",children:e.message}),e.endpoint&&Ot.jsxs("p",{className:"mt-1 text-xs text-muted-foreground",children:["Endpoint: ",e.endpoint]}),e.stack&&Ot.jsxs("details",{className:"mt-2",children:[Ot.jsx("summary",{className:"cursor-pointer text-xs text-muted-foreground",children:"Stack trace"}),Ot.jsx("pre",{className:"mt-2 text-xs overflow-x-auto bg-slate-100 dark:bg-slate-800 p-2 rounded",children:e.stack})]})]},e.id))}):Ot.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No errors found"})})})]})}),Ot.jsx(Ys,{value:"performance",children:Ot.jsxs(Sn,{children:[Ot.jsx(Lr,{children:Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{children:[Ot.jsx(zr,{children:"Performance Metrics"}),Ot.jsx(Ur,{children:"API endpoint performance statistics"})]}),Ot.jsxs(Ln,{variant:"outline",size:"sm",onClick:()=>f.mutate(),disabled:f.isPending,children:[Ot.jsx(vs,{className:"h-4 w-4 mr-2"}),"Clear Metrics"]})]})}),Ot.jsx(Mn,{children:Ot.jsx(eC,{className:"h-[600px]",children:d&&d.length>0?Ot.jsx("div",{className:"space-y-4",children:d.sort((e,t)=>t.requestCount-e.requestCount).map((e,t)=>Ot.jsxs("div",{className:"p-4 border rounded-lg",children:[Ot.jsxs("div",{className:"flex items-center justify-between mb-2",children:[Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx(Tn,{variant:"outline",children:e.method}),Ot.jsx("span",{className:"font-mono text-sm",children:e.endpoint})]}),Ot.jsxs("span",{className:"text-sm text-muted-foreground",children:[e.requestCount," requests"]})]}),Ot.jsxs("div",{className:"grid grid-cols-3 gap-4 mt-3",children:[Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-xs text-muted-foreground",children:"Avg Response"}),Ot.jsxs("p",{className:"font-medium",children:[Math.round(e.avgResponseTime),"ms"]})]}),Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-xs text-muted-foreground",children:"P95 Response"}),Ot.jsxs("p",{className:"font-medium",children:[Math.round(e.p95ResponseTime),"ms"]})]}),Ot.jsxs("div",{children:[Ot.jsx("p",{className:"text-xs text-muted-foreground",children:"Error Rate"}),Ot.jsxs("p",{className:bn("font-medium",e.errorRate>5&&"text-red-600"),children:[e.errorRate.toFixed(2),"%"]})]})]})]},t))}):Ot.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No performance data available"})})})]})}),Ot.jsx(Ys,{value:"audit",children:Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{children:[Ot.jsx(zr,{children:"Audit Trail"}),Ot.jsx(Ur,{children:"User actions and system changes"})]}),Ot.jsx(Mn,{children:Ot.jsx(eC,{className:"h-[600px]",children:u&&u.length>0?Ot.jsx("div",{className:"space-y-2",children:u.map(e=>Ot.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-slate-50 dark:hover:bg-slate-800",children:[Ot.jsxs("div",{className:"flex-1",children:[Ot.jsxs("div",{className:"flex items-center gap-2",children:[Ot.jsx(Rn,{className:"h-4 w-4 text-muted-foreground"}),Ot.jsx("span",{className:"font-medium",children:e.action}),Ot.jsx(Tn,{variant:"outline",children:e.resource})]}),Ot.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["User ",e.userId,"  ",e.ip]})]}),Ot.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(e.timestamp).toLocaleString()})]},e.id))}):Ot.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No audit logs available"})})})]})}),Ot.jsx(Ys,{value:"ai",children:Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{children:[Ot.jsx(zr,{children:"AI Service Statistics"}),Ot.jsx(Ur,{children:"AI agent performance and queue metrics"})]}),Ot.jsx(Mn,{children:h?Ot.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[Ot.jsxs("div",{className:"space-y-4",children:[Ot.jsx("h3",{className:"font-semibold",children:"Queue Status"}),Ot.jsxs("div",{className:"space-y-3",children:[Ot.jsxs("div",{className:"flex justify-between",children:[Ot.jsx("span",{className:"text-sm",children:"Pending Tasks"}),Ot.jsx("span",{className:"font-medium",children:h.queueSize})]}),Ot.jsxs("div",{className:"flex justify-between",children:[Ot.jsx("span",{className:"text-sm",children:"Processing"}),Ot.jsx("span",{className:"font-medium",children:h.processing})]}),Ot.jsxs("div",{className:"flex justify-between",children:[Ot.jsx("span",{className:"text-sm",children:"Completed Today"}),Ot.jsx("span",{className:"font-medium text-green-600",children:h.completedToday})]}),Ot.jsxs("div",{className:"flex justify-between",children:[Ot.jsx("span",{className:"text-sm",children:"Failed Today"}),Ot.jsx("span",{className:"font-medium text-red-600",children:h.failedToday})]})]})]}),Ot.jsxs("div",{className:"space-y-4",children:[Ot.jsx("h3",{className:"font-semibold",children:"Model Usage"}),Ot.jsx("div",{className:"space-y-3",children:h.modelUsage&&Object.entries(h.modelUsage).map(([e,t])=>Ot.jsxs("div",{className:"flex justify-between",children:[Ot.jsx("span",{className:"text-sm",children:e}),Ot.jsx("span",{className:"font-medium",children:t})]},e))})]})]}):Ot.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Loading AI statistics..."})})]})}),Ot.jsx(Ys,{value:"system",children:Ot.jsxs(Sn,{children:[Ot.jsxs(Lr,{children:[Ot.jsx(zr,{children:"System Information"}),Ot.jsx(Ur,{children:"Server and environment details"})]}),Ot.jsx(Mn,{children:p?Ot.jsxs("div",{className:"space-y-6",children:[Ot.jsxs("div",{children:[Ot.jsx("h3",{className:"font-semibold mb-3",children:"Environment"}),Ot.jsxs("div",{className:"space-y-2",children:[Ot.jsxs("div",{className:"flex justify-between",children:[Ot.jsx("span",{className:"text-sm text-muted-foreground",children:"Node Version"}),Ot.jsx("span",{className:"font-mono text-sm",children:p.nodeVersion})]}),Ot.jsxs("div",{className:"flex justify-between",children:[Ot.jsx("span",{className:"text-sm text-muted-foreground",children:"Platform"}),Ot.jsx("span",{className:"font-mono text-sm",children:p.platform})]}),Ot.jsxs("div",{className:"flex justify-between",children:[Ot.jsx("span",{className:"text-sm text-muted-foreground",children:"CPU Cores"}),Ot.jsx("span",{className:"font-mono text-sm",children:p.cpuCount})]})]})]}),Ot.jsx(rs,{}),Ot.jsxs("div",{children:[Ot.jsx("h3",{className:"font-semibold mb-3",children:"Memory Usage"}),Ot.jsxs("div",{className:"space-y-4",children:[Ot.jsxs("div",{children:[Ot.jsxs("div",{className:"flex justify-between mb-2",children:[Ot.jsx("span",{className:"text-sm",children:"Heap Used"}),Ot.jsxs("span",{className:"text-sm",children:[p.memory&&v(p.memory.heapUsed)," /",p.memory&&v(p.memory.heapTotal)]})]}),Ot.jsx(Vr,{value:p.memory?p.memory.heapUsed/p.memory.heapTotal*100:0})]}),Ot.jsx("div",{children:Ot.jsxs("div",{className:"flex justify-between mb-2",children:[Ot.jsx("span",{className:"text-sm",children:"External"}),Ot.jsx("span",{className:"text-sm",children:p.memory&&v(p.memory.external)})]})})]})]})]}):Ot.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Loading system information..."})})]})})]})]})}):null;var y}function iDe(){const{user:e,isAuthenticated:t}=Ua(),[n]=_n(),{toast:r}=Nn(),[s,i]=hn.useState(!1),[a,o]=hn.useState(!1),[l,c]=hn.useState(""),[d,u]=hn.useState([]),[h,p]=hn.useState(!1),[m,f]=hn.useState(!1),[g,x]=hn.useState(!1),v=hn.useRef(null),{data:y}=za({queryKey:["/api/businesses/my"],enabled:t,staleTime:3e5}),{data:b}=za({queryKey:["/api/ai/business-metrics",y?.[0]?.id],enabled:!!y?.[0]?.id,refetchInterval:6e4});hn.useEffect(()=>{if(s&&0===d.length){const e=function(){const e=(new Date).getHours();let t=(e<12?"Good morning":e<18?"Good afternoon":"Good evening")+"! I'm your AI Business Coach. ",r="tip",s=[];"/business-dashboard"===n?(t+="I see you're checking your dashboard. ",b?.revenue&&b.revenue<1e3?(t+="I notice your revenue could use a boost. Want some tips to increase sales?",r="opportunity",s=["Show me revenue growth strategies","Help me optimize pricing","Suggest marketing campaigns"]):(t+="Your business is doing well! Let me help you scale further.",s=["Analyze my performance","Find growth opportunities","Compare with competitors"])):"/marketing"===n?(t+="Ready to supercharge your marketing? I can help you create campaigns that convert!",s=["Create an email campaign","Optimize for holidays","Analyze campaign performance"]):n.includes("/business/")?(t+="Looking at business profiles? I can help you understand what makes them successful.",s=["Analyze this business","Compare with my business","Learn their strategies"]):(t+="I'm here to help grow your business. What would you like to work on today?",s=["Review my business performance","Get marketing tips","Find new opportunities","Optimize operations"]);return{id:"0",role:"assistant",content:t,timestamp:new Date,suggestions:s,category:r,actionable:!0}}();u([e])}},[s,n]),hn.useEffect(()=>{v.current?.scrollIntoView({behavior:"smooth"})},[d]);const w=Fa({mutationFn:async e=>{x(!0);const t={currentPage:n,businessId:y?.[0]?.id,businessName:y?.[0]?.name,metrics:b};try{return await qn("POST","/api/ai/coach/chat",{message:e,context:t,history:d.slice(-5)})}catch(r){return{content:(await qn("POST","/api/ai/generate",{prompt:`You are an AI business coach helping a Florida local business owner.\n                   Context: They are on ${n} page. Business: ${t.businessName||"Unknown"}.\n                   User message: ${e}\n\n                   Provide actionable, specific advice. Be conversational but professional.`,maxTokens:150})).content||j(e)}}},onSuccess:e=>{const t={id:Date.now().toString(),role:"assistant",content:e.content,timestamp:new Date,suggestions:e.suggestions,category:e.category||"tip",actionable:e.actionable};u(e=>[...e,t]),x(!1),m&&e.content&&_(e.content)},onError:()=>{x(!1),r({title:"Coach unavailable",description:"I'm having trouble connecting. Please try again.",variant:"destructive"})}});function j(e,t){const n=e.toLowerCase();return n.includes("revenue")||n.includes("sales")?"To increase revenue, focus on: 1) Optimizing your product listings with better photos and descriptions, 2) Running targeted promotions during peak hours, 3) Encouraging reviews from satisfied customers. Would you like specific strategies for any of these?":n.includes("marketing")?"For effective marketing: 1) Post consistently on social media (3-4 times/week), 2) Use local SEO keywords in your content, 3) Partner with other local businesses for cross-promotion. What aspect of marketing would you like to focus on?":n.includes("customer")||n.includes("client")?"To improve customer relationships: 1) Respond to all reviews within 24 hours, 2) Create a loyalty program to reward repeat customers, 3) Send personalized thank you messages. Which area would help your business most?":n.includes("competitor")?"For competitive advantage: 1) Identify your unique value proposition, 2) Monitor competitor pricing weekly, 3) Offer services they don't. Let's analyze your main competitors together.":"I understand you're looking for guidance. Based on your business profile, I recommend focusing on customer engagement and local marketing. Would you like specific action items for either area?"}const N=()=>{if(!l.trim())return;const e={id:Date.now().toString(),role:"user",content:l,timestamp:new Date};u(t=>[...t,e]),w.mutate(l),c("")},_=e=>{if("speechSynthesis"in window){const t=new SpeechSynthesisUtterance(e);t.rate=1,t.pitch=1,speechSynthesis.speak(t)}},S=e=>{switch(e){case"insight":return Ot.jsx(Hs,{className:"h-4 w-4"});case"warning":return Ot.jsx(ms,{className:"h-4 w-4"});case"opportunity":return Ot.jsx(Dn,{className:"h-4 w-4"});default:return Ot.jsx(ka,{className:"h-4 w-4"})}},M=e=>{switch(e){case"insight":return"text-blue-600 bg-blue-100";case"warning":return"text-yellow-600 bg-yellow-100";case"opportunity":return"text-green-600 bg-green-100";default:return"text-purple-600 bg-purple-100"}};return t&&"/login"!==n&&"/register"!==n?Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(jo,{children:!s&&Ot.jsxs(wo.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},className:"fixed bottom-6 right-6 z-50",children:[Ot.jsx(Ln,{onClick:()=>i(!0),size:"lg",className:"rounded-full h-16 w-16 shadow-2xl bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700",children:Ot.jsx(ei,{className:"h-8 w-8"})}),Ot.jsxs("span",{className:"absolute top-0 right-0 h-4 w-4",children:[Ot.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-purple-400 opacity-75"}),Ot.jsx("span",{className:"relative inline-flex rounded-full h-4 w-4 bg-purple-500"})]})]})}),Ot.jsx(jo,{children:s&&Ot.jsx(wo.div,{initial:{scale:.8,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.8,opacity:0,y:20},className:bn("fixed z-50 shadow-2xl",a?"bottom-6 right-6 w-80":"bottom-6 right-6 w-96 h-[600px]"),children:Ot.jsxs(Sn,{className:"h-full flex flex-col border-2 border-purple-200 dark:border-purple-800",children:[Ot.jsx(Lr,{className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-t-lg",children:Ot.jsxs("div",{className:"flex items-center justify-between",children:[Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:Ot.jsx(ei,{className:"h-6 w-6"})}),Ot.jsxs("div",{children:[Ot.jsx(zr,{className:"text-lg",children:"AI Business Coach"}),Ot.jsx("p",{className:"text-xs text-white/80",children:"Powered by GPT-4 & Claude"})]})]}),Ot.jsxs("div",{className:"flex items-center gap-1",children:[Ot.jsx(Ln,{variant:"ghost",size:"sm",onClick:()=>o(!a),className:"h-8 w-8 p-0 text-white hover:bg-white/20",children:a?Ot.jsx(pi,{className:"h-4 w-4"}):Ot.jsx(Ea,{className:"h-4 w-4"})}),Ot.jsx(Ln,{variant:"ghost",size:"sm",onClick:()=>i(!1),className:"h-8 w-8 p-0 text-white hover:bg-white/20",children:Ot.jsx(jn,{className:"h-4 w-4"})})]})]})}),!a&&Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(eC,{className:"flex-1 p-4",children:Ot.jsxs("div",{className:"space-y-4",children:[d.map(t=>Ot.jsxs("div",{className:bn("flex gap-3","user"===t.role&&"flex-row-reverse"),children:[Ot.jsx(ou,{className:"h-8 w-8",children:"assistant"===t.role?Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(lu,{src:"/ai-coach-avatar.png"}),Ot.jsx(cu,{className:"bg-gradient-to-br from-purple-500 to-pink-500",children:Ot.jsx(ei,{className:"h-4 w-4 text-white"})})]}):Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(lu,{src:e?.profileImageUrl}),Ot.jsx(cu,{children:e?.firstName?.charAt(0)||"U"})]})}),Ot.jsxs("div",{className:bn("flex-1 space-y-2","user"===t.role&&"items-end flex flex-col"),children:[Ot.jsxs("div",{className:bn("rounded-lg p-3 max-w-[85%]","assistant"===t.role?"bg-gray-100 dark:bg-gray-800":"bg-gradient-to-r from-purple-600 to-pink-600 text-white"),children:[t.category&&"assistant"===t.role&&Ot.jsxs(Tn,{className:bn("mb-2",M(t.category)),children:[S(t.category),Ot.jsx("span",{className:"ml-1 capitalize",children:t.category})]}),Ot.jsx("p",{className:"text-sm",children:t.content})]}),t.suggestions&&t.suggestions.length>0&&Ot.jsx("div",{className:"flex flex-wrap gap-2",children:t.suggestions.map((e,t)=>Ot.jsxs(Ln,{variant:"outline",size:"sm",onClick:()=>(e=>{c(e),N()})(e),className:"text-xs",children:[Ot.jsx(An,{className:"h-3 w-3 mr-1"}),e]},t))})]})]},t.id)),g&&Ot.jsxs("div",{className:"flex gap-3",children:[Ot.jsx(ou,{className:"h-8 w-8",children:Ot.jsx(cu,{className:"bg-gradient-to-br from-purple-500 to-pink-500",children:Ot.jsx(ei,{className:"h-4 w-4 text-white"})})}),Ot.jsx("div",{className:"bg-gray-100 dark:bg-gray-800 rounded-lg p-3",children:Ot.jsxs("div",{className:"flex gap-1",children:[Ot.jsx("span",{className:"w-2 h-2 bg-gray-500 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),Ot.jsx("span",{className:"w-2 h-2 bg-gray-500 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),Ot.jsx("span",{className:"w-2 h-2 bg-gray-500 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})]}),Ot.jsx("div",{ref:v})]})}),Ot.jsxs(Mn,{className:"p-4 border-t",children:[Ot.jsxs("div",{className:"flex gap-2",children:[Ot.jsx(Ln,{variant:"outline",size:"sm",onClick:()=>{if("webkitSpeechRecognition"in window)if(h)p(!1);else{p(!0);const e=new window.webkitSpeechRecognition;e.continuous=!1,e.interimResults=!1,e.lang="en-US",e.onresult=e=>{const t=e.results[0][0].transcript;c(t),p(!1)},e.onerror=()=>{p(!1),r({title:"Voice input error",description:"Could not recognize speech. Please try again.",variant:"destructive"})},e.start()}else r({title:"Not supported",description:"Voice input is not supported in your browser",variant:"destructive"})},className:bn("h-10 w-10 p-0",h&&"bg-red-100 text-red-600 border-red-300"),children:h?Ot.jsx(oi,{className:"h-4 w-4"}):Ot.jsx(li,{className:"h-4 w-4"})}),Ot.jsx(Ln,{variant:"outline",size:"sm",onClick:()=>f(!m),className:bn("h-10 w-10 p-0",m&&"bg-purple-100 text-purple-600 border-purple-300"),children:Ot.jsx(ci,{className:"h-4 w-4"})}),Ot.jsx(zn,{value:l,onChange:e=>c(e.target.value),onKeyPress:e=>"Enter"===e.key&&N(),placeholder:"Ask me anything about your business...",className:"flex-1",disabled:g||h}),Ot.jsx(Ln,{onClick:N,disabled:!l.trim()||g,size:"sm",className:"bg-gradient-to-r from-purple-600 to-pink-600",children:Ot.jsx(ns,{className:"h-4 w-4"})})]}),Ot.jsx("p",{className:"text-xs text-muted-foreground text-center mt-2",children:"AI suggestions  Voice enabled  Always learning"})]})]})]})})})]}):null}function aDe(){const{isAuthenticated:e}=Ua(),{data:t=[]}=za({queryKey:["/api/cart"],enabled:e}),n=t.reduce((e,t)=>e+t.quantity,0);return e?Ot.jsx(Ot.Fragment,{children:Ot.jsx(Ln,{variant:"ghost",size:"sm",asChild:!0,className:"relative rounded-full hover:scale-110 transition-all duration-300",style:{width:"52px",height:"52px",padding:0,position:"relative",background:"linear-gradient(145deg, rgba(168, 85, 247, 0.25) 0%, rgba(168, 85, 247, 0.08) 50%, rgba(168, 85, 247, 0.15) 100%)",backdropFilter:"blur(20px) saturate(180%)",border:"2px solid rgba(168, 85, 247, 0.4)",borderTop:"2px solid rgba(168, 85, 247, 0.6)",borderLeft:"2px solid rgba(168, 85, 247, 0.5)",boxShadow:"0 8px 32px rgba(168, 85, 247, 0.35), inset 0 3px 6px rgba(168, 85, 247, 0.5), inset 0 -2px 4px rgba(0, 0, 0, 0.1), 0 0 30px rgba(168, 85, 247, 0.3)",overflow:"visible",zIndex:1},"data-testid":"button-cart",children:Ot.jsxs(Yn,{href:"/cart",children:[Ot.jsx(Ir,{className:"h-6 w-6 text-purple-400",style:{strokeWidth:2.5,position:"relative",zIndex:1}}),n>0&&Ot.jsx(Tn,{className:"absolute h-6 w-6 rounded-full p-0 flex items-center justify-center text-xs font-bold border-2 border-white",style:{top:"-8px",right:"-8px",background:"linear-gradient(135deg, #D4AF37 0%, #CD7F32 100%)",color:"#ffffff",boxShadow:"0 2px 8px rgba(212, 175, 55, 0.5), 0 0 16px rgba(212, 175, 55, 0.4)",zIndex:9999,pointerEvents:"none",transform:"translateZ(100px)"},"data-testid":"text-cart-count",children:n>99?"99+":n})]})})}):null}const oDe=({type:e})=>{const t="w-4 h-4";switch(e){case"order":return Ot.jsx(tr,{className:t});case"message":case"comment":return Ot.jsx(_i,{className:t});case"follow":return Ot.jsx(On,{className:t});case"like":return Ot.jsx(Zn,{className:t});case"spotlight":return Ot.jsx(In,{className:t});default:return Ot.jsx(Aa,{className:t})}},lDe=e=>{switch(e){case"order":return"from-emerald-500/20 to-green-500/20 border-emerald-500/30";case"message":return"from-blue-500/20 to-cyan-500/20 border-blue-500/30";case"follow":return"from-purple-500/20 to-pink-500/20 border-purple-500/30";case"like":return"from-rose-500/20 to-pink-500/20 border-rose-500/30";case"comment":return"from-cyan-500/20 to-teal-500/20 border-cyan-500/30";case"spotlight":return"from-yellow-500/20 to-amber-500/20 border-yellow-500/30";default:return"from-slate-500/20 to-gray-500/20 border-slate-500/30"}};function cDe(){const{toast:e}=Nn(),[t,n]=hn.useState(!1),{data:r=[]}=za({queryKey:["/api/notifications"],queryFn:async()=>[{id:"1",type:"order",title:"New Order",message:"You received a new order for Premium Product",isRead:!1,createdAt:new Date(Date.now()-3e5).toISOString(),link:"/orders/1",orderId:"1"},{id:"2",type:"follow",title:"New Follower",message:"Sarah Johnson started following your business",isRead:!1,createdAt:new Date(Date.now()-9e5).toISOString(),businessId:"business-1"},{id:"3",type:"spotlight",title:"Spotlight Achievement",message:"Your business is now in the top 3 for daily spotlight!",isRead:!1,createdAt:new Date(Date.now()-18e5).toISOString(),link:"/florida-elite"},{id:"4",type:"message",title:"New Message",message:"Mike Anderson sent you a message",isRead:!0,createdAt:new Date(Date.now()-36e5).toISOString(),link:"/messages"},{id:"5",type:"like",title:"Post Liked",message:"Emma Davis liked your recent post",isRead:!0,createdAt:new Date(Date.now()-72e5).toISOString(),businessId:"business-1"}],refetchInterval:3e4}),s=Fa({mutationFn:async e=>{},onSuccess:()=>{vr.invalidateQueries({queryKey:["/api/notifications"]})}}),i=Fa({mutationFn:async()=>{},onSuccess:()=>{vr.invalidateQueries({queryKey:["/api/notifications"]}),e({title:"All notifications marked as read"})}}),a=r.filter(e=>!e.isRead).length,o=e=>{const t=new Date(e),n=(new Date).getTime()-t.getTime(),r=Math.floor(n/6e4),s=Math.floor(n/36e5),i=Math.floor(n/864e5);return r<1?"Just now":r<60?`${r}m ago`:s<24?`${s}h ago`:`${i}d ago`};return hn.useEffect(()=>{},[a,t]),Ot.jsxs(MD,{open:t,onOpenChange:n,children:[Ot.jsx(CD,{asChild:!0,children:Ot.jsxs(Ln,{variant:"ghost",className:"relative rounded-full hover:scale-110 transition-all duration-300",style:{width:"52px",height:"52px",padding:0,background:"linear-gradient(145deg, rgba(168, 85, 247, 0.25) 0%, rgba(168, 85, 247, 0.08) 50%, rgba(168, 85, 247, 0.15) 100%)",backdropFilter:"blur(20px) saturate(180%)",border:"2px solid rgba(168, 85, 247, 0.4)",borderTop:"2px solid rgba(168, 85, 247, 0.6)",borderLeft:"2px solid rgba(168, 85, 247, 0.5)",boxShadow:"0 8px 32px rgba(168, 85, 247, 0.35), inset 0 3px 6px rgba(168, 85, 247, 0.5), inset 0 -2px 4px rgba(0, 0, 0, 0.1), 0 0 30px rgba(168, 85, 247, 0.3)",position:"relative",overflow:"visible",zIndex:1},children:[Ot.jsx(Aa,{className:"w-6 h-6 text-purple-400",style:{position:"relative",zIndex:1}}),a>0&&Ot.jsx(Tn,{className:"absolute h-6 w-6 flex items-center justify-center p-0 text-xs font-bold border-2 border-white shadow-lg",style:{background:"linear-gradient(135deg, #dc2626 0%, #991b1b 100%)",top:"-8px",right:"-8px",zIndex:9999,pointerEvents:"none",transform:"translateZ(100px)",color:"white"},children:a>9?"9+":a})]})}),Ot.jsxs(ED,{align:"end",className:"w-96 p-0 overflow-hidden",style:{background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(20px) saturate(180%)",border:"1px solid rgba(0, 0, 0, 0.1)",boxShadow:"0 10px 40px rgba(0, 0, 0, 0.15), 0 0 0 1px rgba(255, 255, 255, 0.5) inset",zIndex:60},children:[Ot.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-slate-200",children:[Ot.jsxs("div",{children:[Ot.jsx("h3",{className:"font-semibold text-slate-900",children:"Notifications"}),a>0&&Ot.jsxs("p",{className:"text-xs text-slate-500",children:[a," unread"]})]}),a>0&&Ot.jsxs(Ln,{variant:"ghost",size:"sm",onClick:()=>i.mutate(),className:"text-xs text-cyan-600 hover:text-cyan-700 hover:bg-cyan-50",children:[Ot.jsx(rr,{className:"w-3 h-3 mr-1"}),"Mark all read"]})]}),Ot.jsx(eC,{className:"h-96",children:0===r.length?Ot.jsxs("div",{className:"flex flex-col items-center justify-center py-12 px-4 text-center",children:[Ot.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-100 flex items-center justify-center mb-3",children:Ot.jsx(Aa,{className:"w-8 h-8 text-slate-400"})}),Ot.jsx("p",{className:"text-sm font-medium text-slate-900 mb-1",children:"No notifications yet"}),Ot.jsx("p",{className:"text-xs text-slate-500",children:"We'll notify you when something new happens"})]}):Ot.jsx("div",{className:"divide-y divide-slate-100",children:r.map(e=>Ot.jsx("div",{className:bn("relative px-4 py-3 transition-all duration-200",!e.isRead&&"bg-cyan-50/50","hover:bg-slate-50 cursor-pointer group"),onClick:()=>{e.isRead||s.mutate(e.id),e.link&&(n(!1),window.location.href=e.link)},children:Ot.jsxs("div",{className:"flex gap-3",children:[Ot.jsx("div",{className:bn("flex-shrink-0 w-10 h-10 rounded-xl flex items-center justify-center border","bg-gradient-to-br",lDe(e.type)),children:Ot.jsx(oDe,{type:e.type})}),Ot.jsxs("div",{className:"flex-1 min-w-0",children:[Ot.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1",children:[Ot.jsx("p",{className:"text-sm font-semibold text-slate-900 line-clamp-1",children:e.title}),Ot.jsx("span",{className:"text-xs text-slate-500 whitespace-nowrap",children:o(e.createdAt)})]}),Ot.jsx("p",{className:"text-sm text-slate-600 line-clamp-2",children:e.message})]}),!e.isRead&&Ot.jsx("div",{className:"flex-shrink-0 w-2 h-2 rounded-full bg-cyan-500"})]})},e.id))})}),r.length>0&&Ot.jsx("div",{className:"border-t border-slate-200 px-4 py-2",children:Ot.jsx(Yn,{href:"/notifications",onClick:()=>n(!1),children:Ot.jsx(Ln,{variant:"ghost",className:"w-full text-sm text-cyan-600 hover:text-cyan-700 hover:bg-cyan-50",children:"View all notifications"})})})]})]})}function dDe({open:e,onOpenChange:t,autoStart:n=!0}){return Ot.jsx(yr,{open:e,onOpenChange:t,children:Ot.jsxs(jr,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",style:{background:"linear-gradient(145deg, rgba(15, 23, 42, 0.98) 0%, rgba(30, 41, 59, 0.95) 100%)",backdropFilter:"blur(20px)",border:"2px solid rgba(168, 85, 247, 0.3)",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.5), 0 0 40px rgba(168, 85, 247, 0.2)"},children:[Ot.jsx(Nr,{children:Ot.jsx("div",{className:"flex items-center justify-between",children:Ot.jsxs("div",{className:"flex items-center gap-3",children:[Ot.jsx("div",{className:"p-2 rounded-full bg-purple-500/20 border border-purple-400/30",children:Ot.jsx(li,{className:"h-6 w-6 text-purple-400"})}),Ot.jsxs("div",{children:[Ot.jsx(_r,{className:"text-2xl font-bold bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent",children:"Voice Shopping Assistant"}),Ot.jsx(ji,{className:"text-gray-400",children:"Shop hands-free with AI-powered voice commands"})]})]})})}),Ot.jsx("div",{className:"mt-4",children:Ot.jsx(iK,{autoStart:e&&n})})]})})}function uDe(){const{user:e,isAuthenticated:t}=Ua(),[n,r]=hn.useState(!1),[s,i]=hn.useState(!1),[a]=_n(),[o,l]=hn.useState(!1),{data:c=[]}=za({queryKey:["/api/businesses/my"],enabled:t}),{data:d}=za({queryKey:["/api/loyalty/account"],enabled:t});hn.useEffect(()=>{const e=()=>{l(window.scrollY>20)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]);const u=e=>"/"===e?"/"===a:a.startsWith(e),h=[{href:"/",label:"Discover",icon:bs,testId:"nav-discover"},{href:"/marketplace",label:"Marketplace",icon:fr,testId:"nav-marketplace"},{href:"/messages",label:"Messages",icon:Or,testId:"nav-messages"},{href:"/community",label:"Community",icon:On,testId:"nav-community"},{href:"/registry",label:"Entrepreneurs",icon:sa,testId:"nav-entrepreneurs"},{href:"/florida-local",label:"Florida Local",icon:Bn,testId:"nav-florida-local"},{href:"/ai/tools",label:"AI Tools",icon:An,testId:"nav-ai-tools"}];return Ot.jsxs(Ot.Fragment,{children:[Ot.jsxs("header",{className:"elite-glass-header sticky top-0 w-full "+(o?"scrolled":""),style:{zIndex:9999,pointerEvents:"auto"},children:[Ot.jsx("div",{className:"container mx-auto px-6",style:{position:"relative",zIndex:10,pointerEvents:"auto"},children:Ot.jsxs("div",{className:"flex items-center justify-between",style:{height:"72px",pointerEvents:"auto"},children:[Ot.jsx(Yn,{href:"/",className:"elite-logo-container flex items-center","data-testid":"brand-logo",children:Ot.jsx("img",{src:"/new-logo-trans.webp",alt:"The Florida Local",className:"w-auto object-contain transition-all duration-300 hover:scale-105",style:{height:"70px",filter:"drop-shadow(0 2px 4px rgba(0,0,0,0.4)) drop-shadow(0 0 8px rgba(255,255,255,0.3))"}})}),t&&Ot.jsxs("nav",{className:"hidden lg:flex items-center",style:{gap:"4px"},children:[h.map(e=>{const t=e.icon;return Ot.jsxs(Yn,{href:e.href,className:"elite-nav-item "+(u(e.href)?"elite-nav-active":""),"data-testid":e.testId,style:{color:"white",textShadow:"0 2px 4px rgba(0, 0, 0, 0.8)"},children:[Ot.jsx(t,{}),Ot.jsx("span",{children:e.label})]},e.href)}),Ot.jsxs(MD,{children:[Ot.jsxs(CD,{className:"elite-nav-item",style:{gap:"6px",color:"white",textShadow:"0 2px 4px rgba(0, 0, 0, 0.8)"},children:[Ot.jsx(Zr,{style:{width:"18px",height:"18px"}}),Ot.jsx("span",{children:"Business"}),Ot.jsx(Gn,{style:{width:"14px",height:"14px",marginLeft:"-2px"}})]}),Ot.jsx(ED,{className:"elite-glass-dropdown w-52",style:{background:"linear-gradient(145deg, rgba(255,255,255,0.95) 0%, rgba(255,255,255,0.88) 100%)",backdropFilter:"blur(20px) saturate(180%)",border:"1px solid rgba(0, 139, 139, 0.2)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.15), 0 0 20px rgba(0, 139, 139, 0.1), inset 0 1px 0 rgba(255, 255, 255, 0.8)"},children:c.length>0?Ot.jsxs(Ot.Fragment,{children:[Ot.jsx("div",{className:"px-2 py-1 text-xs font-bold bg-gradient-to-r from-[#008B8B] to-[#d4af37] bg-clip-text text-transparent",children:"PROFILES"}),Ot.jsx(kD,{asChild:!0,children:Ot.jsxs(Yn,{href:`/entrepreneur/${e?.id}`,children:[Ot.jsx(Ii,{className:"h-4 w-4 mr-2 inline text-purple-600"}),"Entrepreneur Profile"]})}),Ot.jsx(kD,{asChild:!0,children:Ot.jsxs(Yn,{href:`/business/${c[0].id}`,children:[Ot.jsx(Zr,{className:"h-4 w-4 mr-2 inline"}),"Business Profile"]})}),Ot.jsx(TD,{}),Ot.jsx("div",{className:"px-2 py-1 text-xs font-bold bg-gradient-to-r from-[#008B8B] to-[#d4af37] bg-clip-text text-transparent",children:"MANAGEMENT"}),Ot.jsx(kD,{asChild:!0,children:Ot.jsxs(Yn,{href:"/business-dashboard",children:[Ot.jsx(Hs,{className:"h-4 w-4 mr-2 inline"}),"Business Dashboard"]})}),Ot.jsx(kD,{asChild:!0,children:Ot.jsxs(Yn,{href:"/marketing",children:[Ot.jsx(Us,{className:"h-4 w-4 mr-2 inline text-purple-600"}),"Marketing Hub",Ot.jsx("span",{className:"ml-auto text-xs bg-purple-100 text-purple-600 px-1.5 py-0.5 rounded",children:"NEW"})]})}),Ot.jsx(kD,{asChild:!0,children:Ot.jsxs(Yn,{href:"/blog/manage",children:[Ot.jsx(da,{className:"h-4 w-4 mr-2 inline text-green-600"}),"Blog Manager",Ot.jsx("span",{className:"ml-auto text-xs bg-green-100 text-green-600 px-1.5 py-0.5 rounded",children:"NEW"})]})}),Ot.jsx(kD,{asChild:!0,children:Ot.jsxs(Yn,{href:"/social-hub",children:[Ot.jsx(Qi,{className:"h-4 w-4 mr-2 inline text-blue-600"}),"Social Media Hub",Ot.jsx("span",{className:"ml-auto text-xs bg-blue-100 text-blue-600 px-1.5 py-0.5 rounded",children:"NEW"})]})}),Ot.jsx(TD,{}),Ot.jsx(kD,{asChild:!0,children:Ot.jsxs(Yn,{href:"/business-analytics",children:[Ot.jsx(Dn,{className:"h-4 w-4 mr-2 inline"}),"Business Analytics"]})}),Ot.jsx(kD,{asChild:!0,children:Ot.jsxs(Yn,{href:"/ai/content-generator",children:[Ot.jsx(An,{className:"h-4 w-4 mr-2 inline"}),"AI Content Generator"]})}),Ot.jsx(TD,{}),Ot.jsx(kD,{asChild:!0,children:Ot.jsxs(Yn,{href:"/spotlight/voting",children:[Ot.jsx(Jn,{className:"h-4 w-4 mr-2 inline text-amber-600"}),"Vote",Ot.jsx("span",{className:"ml-auto text-xs",children:""})]})}),Ot.jsx(kD,{asChild:!0,children:Ot.jsxs(Yn,{href:"/loyalty",children:[Ot.jsx(Ei,{className:"h-4 w-4 mr-2 inline text-purple-600"}),"Rewards",Ot.jsx("span",{className:"ml-auto text-xs bg-purple-100 text-purple-600 px-1.5 py-0.5 rounded",children:"NEW"})]})}),Ot.jsx(kD,{asChild:!0,children:Ot.jsxs(Yn,{href:"/subscription",children:[Ot.jsx(Di,{className:"h-4 w-4 mr-2 inline text-[#d4af37]"}),"Subscription",Ot.jsx("span",{className:"ml-auto text-xs bg-gradient-to-r from-[#d4af37] to-[#ffd700] text-white px-1.5 py-0.5 rounded font-semibold",children:"PRO"})]})}),Ot.jsx(TD,{}),Ot.jsx(kD,{asChild:!0,children:Ot.jsxs(Yn,{href:"/vendor/products",children:[Ot.jsx(as,{className:"h-4 w-4 mr-2 inline"}),"Manage Products"]})}),Ot.jsx(kD,{asChild:!0,children:Ot.jsxs(Yn,{href:"/vendor/payouts",children:[Ot.jsx(Ir,{className:"h-4 w-4 mr-2 inline"}),"Payouts & Billing"]})}),Ot.jsx(TD,{}),Ot.jsx(kD,{asChild:!0,children:Ot.jsxs(Yn,{href:"/integrations/gmb",children:[Ot.jsx(Bn,{className:"h-4 w-4 mr-2 inline"}),"GMB Integration"]})}),Ot.jsx(TD,{}),Ot.jsx(kD,{asChild:!0,children:Ot.jsx(Yn,{href:`/business/${c[0].id}/edit`,children:"Edit Business"})}),Ot.jsx(kD,{asChild:!0,children:Ot.jsx(Yn,{href:"/create-business",children:"Create Another"})})]}):Ot.jsx(kD,{asChild:!0,children:Ot.jsx(Yn,{href:"/create-business",children:"Create Business"})})})]})]}),Ot.jsxs("div",{className:"flex items-center",style:{gap:"24px",position:"relative",zIndex:200,overflow:"visible"},children:[t?Ot.jsxs(Ot.Fragment,{children:[Ot.jsxs("div",{className:"hidden md:flex items-center",style:{gap:"24px",position:"relative",zIndex:200,overflow:"visible"},children:[Ot.jsx(cDe,{}),d&&Ot.jsx(Yn,{href:"/loyalty",children:Ot.jsxs(Ln,{variant:"ghost",className:"rounded-lg hover:bg-black/5 transition-all flex items-center gap-2",style:{height:"40px",padding:"0 12px"},children:[Ot.jsx(In,{className:"h-4 w-4 text-yellow-600 fill-yellow-600"}),Ot.jsx("span",{className:"font-semibold text-sm bg-gradient-to-r from-yellow-600 to-orange-600 bg-clip-text text-transparent",children:d.currentPoints.toLocaleString()})]})}),Ot.jsx(Ln,{variant:"ghost",size:"icon",className:"rounded-full hover:scale-110 transition-all duration-300",style:{width:"52px",height:"52px",padding:0,background:"linear-gradient(145deg, rgba(168, 85, 247, 0.25) 0%, rgba(168, 85, 247, 0.08) 50%, rgba(168, 85, 247, 0.15) 100%)",backdropFilter:"blur(20px) saturate(180%)",border:"2px solid rgba(168, 85, 247, 0.4)",borderTop:"2px solid rgba(168, 85, 247, 0.6)",borderLeft:"2px solid rgba(168, 85, 247, 0.5)",boxShadow:"0 8px 32px rgba(168, 85, 247, 0.35), inset 0 3px 6px rgba(168, 85, 247, 0.5), inset 0 -2px 4px rgba(0, 0, 0, 0.1), 0 0 30px rgba(168, 85, 247, 0.3)"},"data-testid":"button-voice-shop",onClick:()=>i(!0),children:Ot.jsx(li,{className:"h-6 w-6 text-purple-400"})}),Ot.jsx(aDe,{})]}),Ot.jsxs(MD,{children:[Ot.jsx(CD,{asChild:!0,children:Ot.jsx(Ln,{variant:"ghost",className:"rounded-full hover:scale-105 transition-all duration-300",style:{width:"52px",height:"52px",padding:0,background:"linear-gradient(145deg, rgba(255,255,255,0.25) 0%, rgba(255,255,255,0.08) 50%, rgba(255,255,255,0.15) 100%)",backdropFilter:"blur(20px) saturate(180%)",border:"2px solid rgba(255, 255, 255, 0.4)",borderTop:"2px solid rgba(255, 255, 255, 0.6)",borderLeft:"2px solid rgba(255, 255, 255, 0.5)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.35), inset 0 3px 6px rgba(255, 255, 255, 0.5), inset 0 -2px 4px rgba(0, 0, 0, 0.1), 0 0 30px rgba(255, 255, 255, 0.2), 0 1px 0 rgba(255, 255, 255, 0.7) inset"},children:Ot.jsxs(ou,{style:{width:"48px",height:"48px",boxShadow:"0 0 16px rgba(5, 150, 105, 0.5)"},children:[Ot.jsx(lu,{src:e?.profileImageUrl||void 0}),Ot.jsx(cu,{className:"text-lg text-white",style:{fontSize:"36px",fontFamily:"'Great Vibes', 'Edwardian Script ITC', 'Kunstler Script', 'Monotype Corsiva', cursive",fontWeight:400,fontStyle:"normal",background:"linear-gradient(145deg, #34d399 0%, #10b981 15%, #059669 35%, #047857 60%, #065f46 85%, #064e3b 100%)",boxShadow:"inset 0 2px 4px rgba(255, 255, 255, 0.4), inset 0 -2px 4px rgba(0, 0, 0, 0.3), inset -2px 0 4px rgba(0, 0, 0, 0.2), inset 2px 0 4px rgba(255, 255, 255, 0.2)",textShadow:"0 2px 4px rgba(0, 0, 0, 0.5), 0 1px 0 rgba(255, 255, 255, 0.3), 0 -1px 0 rgba(0, 0, 0, 0.5)"},children:e?.firstName?.charAt(0)||"U"})]})})}),Ot.jsxs(ED,{className:"elite-glass-dropdown w-52",style:{background:"linear-gradient(145deg, rgba(255,255,255,0.95) 0%, rgba(255,255,255,0.88) 100%)",backdropFilter:"blur(20px) saturate(180%)",border:"1px solid rgba(0, 139, 139, 0.2)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.15), 0 0 20px rgba(0, 139, 139, 0.1), inset 0 1px 0 rgba(255, 255, 255, 0.8)"},children:[Ot.jsx("div",{className:"px-2 py-1 text-xs font-bold bg-gradient-to-r from-[#008B8B] to-[#d4af37] bg-clip-text text-transparent",children:"PERSONAL"}),Ot.jsx(kD,{asChild:!0,children:Ot.jsxs(Yn,{href:`/entrepreneur/${e?.id}`,children:[Ot.jsx(Ii,{className:"h-4 w-4 mr-2 inline"}),"My Entrepreneur Profile"]})}),Ot.jsx(kD,{asChild:!0,children:Ot.jsxs(Yn,{href:"/profile",children:[Ot.jsx(sa,{className:"h-4 w-4 mr-2 inline"}),"Account Settings"]})}),Ot.jsx(kD,{asChild:!0,children:Ot.jsxs(Yn,{href:"/timeline",children:[Ot.jsx(Vs,{className:"h-4 w-4 mr-2 inline text-purple-600"}),"Timeline Feed",Ot.jsx("span",{className:"ml-auto text-xs bg-purple-100 text-purple-600 px-1.5 py-0.5 rounded",children:"NEW"})]})}),Ot.jsx(TD,{}),"1"===e?.id&&Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(TD,{}),Ot.jsx("div",{className:"px-2 py-1 text-xs font-bold bg-gradient-to-r from-red-600 to-orange-600 bg-clip-text text-transparent",children:"ADMIN"}),Ot.jsx(kD,{asChild:!0,children:Ot.jsxs(Yn,{href:"/admin",children:[Ot.jsx(Rn,{className:"h-4 w-4 mr-2 inline"}),"Admin Dashboard"]})}),Ot.jsx(kD,{asChild:!0,children:Ot.jsxs(Yn,{href:"/admin/monitoring",children:[Ot.jsx(Bi,{className:"h-4 w-4 mr-2 inline text-red-600"}),"System Monitoring",Ot.jsx("span",{className:"ml-auto text-xs bg-red-100 text-red-600 px-1.5 py-0.5 rounded",children:"NEW"})]})}),Ot.jsx(kD,{asChild:!0,children:Ot.jsxs(Yn,{href:"/admin/analytics",children:[Ot.jsx(Hs,{className:"h-4 w-4 mr-2 inline"}),"Platform Analytics"]})}),Ot.jsx(kD,{asChild:!0,children:Ot.jsxs(Yn,{href:"/admin/marketing",children:[Ot.jsx(Us,{className:"h-4 w-4 mr-2 inline text-purple-600"}),"Marketing Oversight",Ot.jsx("span",{className:"ml-auto text-xs bg-purple-100 text-purple-600 px-1.5 py-0.5 rounded",children:"NEW"})]})})]}),Ot.jsx(TD,{}),Ot.jsx(kD,{asChild:!0,children:Ot.jsx("a",{href:"/api/logout",className:"text-red-600",children:"Sign Out"})})]})]})]}):Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(Yn,{href:"/subscription",children:Ot.jsx(Ln,{variant:"ghost",className:"rounded-lg hover:bg-black/5 transition-all text-[#008B8B] font-semibold",style:{height:"40px",padding:"0 20px",fontSize:"15px",position:"relative",zIndex:1e4,pointerEvents:"auto",cursor:"pointer"},children:"Subscriptions"})}),Ot.jsx(Ln,{onClick:e=>{try{window.location.href="/api/login"}catch(t){alert("Failed to initiate login. Please refresh the page and try again.")}},className:"rounded-lg bg-gradient-to-r from-[#D4AF37] to-[#FFD700] hover:from-[#B8941F] hover:to-[#D4AF37] text-gray-900 font-semibold shadow-lg hover:shadow-xl transition-all duration-300",style:{height:"40px",padding:"0 24px",fontSize:"15px",fontWeight:600,textShadow:"0 2px 4px rgba(0,0,0,0.3)",border:"2px solid rgba(255,255,255,0.5)",boxShadow:"0 4px 12px rgba(212,175,55,0.4), inset 0 1px 0 rgba(255,255,255,0.3)",position:"relative",zIndex:1e4,pointerEvents:"auto",cursor:"pointer"},"data-testid":"button-signin",children:"Sign In"})]}),Ot.jsx(Ln,{variant:"ghost",onClick:()=>r(!n),className:"lg:hidden rounded-lg hover:bg-black/5",style:{width:"40px",height:"40px",padding:0},children:n?Ot.jsx(jn,{style:{width:"22px",height:"22px"}}):Ot.jsx(Ta,{style:{width:"22px",height:"22px"}})})]})]})}),n&&Ot.jsx("div",{className:"lg:hidden border-t border-black/8 bg-gradient-to-b from-white/95 to-white/90 backdrop-blur-xl",children:Ot.jsxs("nav",{className:"container mx-auto px-4 py-4 space-y-1",children:[h.map(e=>{const t=e.icon,n=u(e.href);return Ot.jsxs(Yn,{href:e.href,onClick:()=>r(!1),className:"flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-300 "+(n?"bg-gradient-to-r from-cyan-50 to-teal-50 text-cyan-700 font-semibold shadow-sm":"hover:bg-gradient-to-r hover:from-cyan-50/50 hover:to-teal-50/50 text-gray-700"),children:[Ot.jsx(t,{className:"h-5 w-5",strokeWidth:n?2.5:2}),Ot.jsx("span",{className:"text-sm font-medium",children:e.label})]},e.href)}),Ot.jsxs("div",{className:"pt-4 mt-4 border-t border-black/8",children:[Ot.jsx("div",{className:"text-xs font-bold text-gray-500 mb-3 px-4 tracking-wider",children:"BUSINESS"}),c.length>0?Ot.jsxs(Ot.Fragment,{children:[Ot.jsxs(Yn,{href:`/business/${c[0].id}`,className:"flex items-center gap-3 px-4 py-3 rounded-xl hover:bg-gradient-to-r hover:from-cyan-50/50 hover:to-teal-50/50 transition-all text-gray-700",onClick:()=>r(!1),children:[Ot.jsx(Zr,{className:"h-5 w-5"}),Ot.jsx("span",{className:"text-sm font-medium",children:"View Profile"})]}),Ot.jsxs(Yn,{href:"/business-dashboard",className:"flex items-center gap-3 px-4 py-3 rounded-xl hover:bg-gradient-to-r hover:from-cyan-50/50 hover:to-teal-50/50 transition-all text-gray-700",onClick:()=>r(!1),children:[Ot.jsx(Hs,{className:"h-5 w-5"}),Ot.jsx("span",{className:"text-sm font-medium",children:"Business Dashboard"})]}),Ot.jsxs(Yn,{href:"/marketing",className:"flex items-center gap-3 px-4 py-3 rounded-xl hover:bg-gradient-to-r hover:from-cyan-50/50 hover:to-teal-50/50 transition-all text-gray-700",onClick:()=>r(!1),children:[Ot.jsx(Us,{className:"h-5 w-5 text-purple-600"}),Ot.jsx("span",{className:"text-sm font-medium",children:"Marketing Hub"}),Ot.jsx("span",{className:"ml-auto text-xs bg-purple-100 text-purple-600 px-1.5 py-0.5 rounded",children:"NEW"})]}),Ot.jsxs(Yn,{href:"/blog/manage",className:"flex items-center gap-3 px-4 py-3 rounded-xl hover:bg-gradient-to-r hover:from-cyan-50/50 hover:to-teal-50/50 transition-all text-gray-700",onClick:()=>r(!1),children:[Ot.jsx(da,{className:"h-5 w-5 text-green-600"}),Ot.jsx("span",{className:"text-sm font-medium",children:"Blog Manager"}),Ot.jsx("span",{className:"ml-auto text-xs bg-green-100 text-green-600 px-1.5 py-0.5 rounded",children:"NEW"})]}),Ot.jsxs(Yn,{href:"/social-hub",className:"flex items-center gap-3 px-4 py-3 rounded-xl hover:bg-gradient-to-r hover:from-cyan-50/50 hover:to-teal-50/50 transition-all text-gray-700",onClick:()=>r(!1),children:[Ot.jsx(Qi,{className:"h-5 w-5 text-blue-600"}),Ot.jsx("span",{className:"text-sm font-medium",children:"Social Media Hub"}),Ot.jsx("span",{className:"ml-auto text-xs bg-blue-100 text-blue-600 px-1.5 py-0.5 rounded",children:"NEW"})]}),Ot.jsxs(Yn,{href:"/business-analytics",className:"flex items-center gap-3 px-4 py-3 rounded-xl hover:bg-gradient-to-r hover:from-cyan-50/50 hover:to-teal-50/50 transition-all text-gray-700",onClick:()=>r(!1),children:[Ot.jsx(Dn,{className:"h-5 w-5"}),Ot.jsx("span",{className:"text-sm font-medium",children:"Business Analytics"})]}),Ot.jsxs(Yn,{href:"/spotlight/voting",className:"flex items-center gap-3 px-4 py-3 rounded-xl hover:bg-gradient-to-r hover:from-cyan-50/50 hover:to-teal-50/50 transition-all text-gray-700",onClick:()=>r(!1),children:[Ot.jsx(Jn,{className:"h-5 w-5 text-amber-600"}),Ot.jsx("span",{className:"text-sm font-medium",children:"Vote"}),Ot.jsx("span",{className:"ml-auto text-xs",children:""})]}),Ot.jsxs(Yn,{href:"/loyalty",className:"flex items-center gap-3 px-4 py-3 rounded-xl hover:bg-gradient-to-r hover:from-cyan-50/50 hover:to-teal-50/50 transition-all text-gray-700",onClick:()=>r(!1),children:[Ot.jsx(Ei,{className:"h-5 w-5 text-purple-600"}),Ot.jsx("span",{className:"text-sm font-medium",children:"Rewards"}),Ot.jsx("span",{className:"ml-auto text-xs bg-purple-100 text-purple-600 px-1.5 py-0.5 rounded",children:"NEW"})]}),Ot.jsxs(Yn,{href:"/vendor/products",className:"flex items-center gap-3 px-4 py-3 rounded-xl hover:bg-gradient-to-r hover:from-cyan-50/50 hover:to-teal-50/50 transition-all text-gray-700",onClick:()=>r(!1),children:[Ot.jsx(as,{className:"h-5 w-5"}),Ot.jsx("span",{className:"text-sm font-medium",children:"Manage Products"})]}),Ot.jsxs(Yn,{href:"/vendor/payouts",className:"flex items-center gap-3 px-4 py-3 rounded-xl hover:bg-gradient-to-r hover:from-cyan-50/50 hover:to-teal-50/50 transition-all text-gray-700",onClick:()=>r(!1),children:[Ot.jsx(Ir,{className:"h-5 w-5"}),Ot.jsx("span",{className:"text-sm font-medium",children:"Payouts & Billing"})]})]}):Ot.jsxs(Yn,{href:"/create-business",className:"flex items-center gap-3 px-4 py-3 rounded-xl hover:bg-gradient-to-r hover:from-cyan-50/50 hover:to-teal-50/50 transition-all text-gray-700",onClick:()=>r(!1),children:[Ot.jsx(Zr,{className:"h-5 w-5"}),Ot.jsx("span",{className:"text-sm font-medium",children:"Create Business"})]})]})]})})]}),Ot.jsx(dDe,{open:s,onOpenChange:i})]})}function hDe(){const e=(new Date).getFullYear();return Ot.jsxs(Ot.Fragment,{children:[Ot.jsx("div",{className:"relative",children:Ot.jsx(VG,{title:"Empowering Local Commerce",logos:["data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cdefs%3E%3ClinearGradient id='stripe1' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:%2300d4ff;stop-opacity:1' /%3E%3Cstop offset='50%25' style='stop-color:%2300a8ff;stop-opacity:1' /%3E%3Cstop offset='100%25' style='stop-color:%230088ff;stop-opacity:1' /%3E%3C/linearGradient%3E%3C/defs%3E%3Cpath fill='url(%23stripe1)' d='M13.976 9.15c-2.172-.806-3.356-1.426-3.356-2.409 0-.831.683-1.305 1.901-1.305 2.227 0 4.515.858 6.09 1.631l.89-5.494C18.252.975 15.697 0 12.165 0 9.667 0 7.589.654 6.104 1.872 4.56 3.147 3.757 4.992 3.757 7.218c0 4.039 2.467 5.76 6.476 7.219 2.585.92 3.445 1.574 3.445 2.583 0 .98-.84 1.545-2.354 1.545-1.875 0-4.965-.921-6.99-2.109l-.9 5.555C5.175 22.99 8.385 24 11.714 24c2.641 0 4.843-.624 6.328-1.813 1.664-1.305 2.525-3.236 2.525-5.732 0-4.128-2.524-5.851-6.594-7.305h.003z'/%3E%3C/svg%3E","data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cdefs%3E%3ClinearGradient id='pp1' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:%2300ffcc;stop-opacity:1' /%3E%3Cstop offset='50%25' style='stop-color:%2300d4aa;stop-opacity:1' /%3E%3Cstop offset='100%25' style='stop-color:%2300a888;stop-opacity:1' /%3E%3C/linearGradient%3E%3C/defs%3E%3Cpath fill='url(%23pp1)' d='M7.076 21.337H2.47a.641.641 0 0 1-.633-.74L4.944 3.419c.041-.27.269-.466.542-.466h7.311c2.408 0 4.117.358 5.078 1.066.984.722 1.481 1.859 1.481 3.377 0 3.052-1.899 4.975-5.466 4.975h-2.76a.65.65 0 0 0-.644.542l-.886 5.64a.641.641 0 0 1-.634.534H7.34a.283.283 0 0 0-.279.25l-.006.034zm11.266-9.93c0 2.657-1.749 4.282-4.663 4.282H12.15c-.28 0-.522.196-.565.469l-.604 3.832a.351.351 0 0 1-.346.295H8.79a.326.326 0 0 1-.321-.378L9.7 12.175a.652.652 0 0 1 .643-.542h1.132c3.567 0 5.867-1.923 5.867-4.924 0-.598-.088-1.108-.256-1.529a5.804 5.804 0 0 0-.744-.779zm0 0'/%3E%3C/svg%3E","data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cdefs%3E%3ClinearGradient id='sq1' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:%23ccff00;stop-opacity:1' /%3E%3Cstop offset='50%25' style='stop-color:%23aaff00;stop-opacity:1' /%3E%3Cstop offset='100%25' style='stop-color:%2388dd00;stop-opacity:1' /%3E%3C/linearGradient%3E%3C/defs%3E%3Cpath fill='url(%23sq1)' d='M4.01 2v20h15.99V2H4.01zm13.59 15.22c0 .86-.7 1.56-1.56 1.56h-8.1c-.86 0-1.56-.7-1.56-1.56v-8.1c0-.86.7-1.56 1.56-1.56h8.1c.86 0 1.56.7 1.56 1.56v8.1z'/%3E%3C/svg%3E","data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cdefs%3E%3ClinearGradient id='sh1' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:%23ffd700;stop-opacity:1' /%3E%3Cstop offset='50%25' style='stop-color:%23ffb700;stop-opacity:1' /%3E%3Cstop offset='100%25' style='stop-color:%23ff9700;stop-opacity:1' /%3E%3C/linearGradient%3E%3C/defs%3E%3Cpath fill='url(%23sh1)' d='M15.337 23.979l7.216-1.561s-2.604-17.613-2.625-17.73c-.022-.116-.114-.192-.23-.192s-1.918-.136-1.918-.136-1.123-1.12-1.38-1.38a.448.448 0 00-.217-.11l-.005.002-.006-.002s-.233.072-.627.194a8.649 8.649 0 00-.308-1.006c-.456-1.006-1.129-1.534-1.945-1.534-.016 0-.031.002-.046.003-.028-.036-.058-.07-.087-.103-.402-.394-.918-.59-1.535-.558-1.194.065-2.386.894-3.353 2.419-.682 1.074-1.201 2.427-1.348 3.474-.051.02-.102.038-.152.057-1.381.521-1.394.535-1.568.998-.129.343-5 15.507-5 15.507l14.48 2.674.055-.01z'/%3E%3C/svg%3E","data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cdefs%3E%3ClinearGradient id='g1'%3E%3Cstop offset='0%25' style='stop-color:%230088ff'/%3E%3Cstop offset='100%25' style='stop-color:%2300d4ff'/%3E%3C/linearGradient%3E%3ClinearGradient id='g2'%3E%3Cstop offset='0%25' style='stop-color:%2300ff88'/%3E%3Cstop offset='100%25' style='stop-color:%2300ffcc'/%3E%3C/linearGradient%3E%3ClinearGradient id='g3'%3E%3Cstop offset='0%25' style='stop-color:%23ffcc00'/%3E%3Cstop offset='100%25' style='stop-color:%23ffff00'/%3E%3C/linearGradient%3E%3ClinearGradient id='g4'%3E%3Cstop offset='0%25' style='stop-color:%23ff4400'/%3E%3Cstop offset='100%25' style='stop-color:%23ff8800'/%3E%3C/linearGradient%3E%3C/defs%3E%3Cpath fill='url(%23g1)' d='M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z'/%3E%3Cpath fill='url(%23g2)' d='M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z'/%3E%3Cpath fill='url(%23g3)' d='M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z'/%3E%3Cpath fill='url(%23g4)' d='M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z'/%3E%3C/svg%3E","data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cdefs%3E%3ClinearGradient id='ap1' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:%23888888;stop-opacity:1' /%3E%3Cstop offset='50%25' style='stop-color:%23555555;stop-opacity:1' /%3E%3Cstop offset='100%25' style='stop-color:%23333333;stop-opacity:1' /%3E%3C/linearGradient%3E%3C/defs%3E%3Cpath fill='url(%23ap1)' d='M17.05 20.28c-.98.95-2.05.88-3.08.4-1.09-.5-2.08-.48-3.24 0-1.44.62-2.2.44-3.06-.4C2.79 15.25 3.51 7.59 9.05 7.31c1.35.07 2.29.74 3.08.8 1.18-.24 2.31-.9 3.57-.84 1.51.12 2.65.72 3.4 1.8-3.12 1.87-2.38 5.98.48 7.13-.5 1.3-1.14 2.56-2.53 4.08zM12.03 7.25c-.15-2.24 1.66-4.07 3.74-4.25.29 2.58-2.34 4.51-3.74 4.25z'/%3E%3C/svg%3E","data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cdefs%3E%3ClinearGradient id='v1' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:%230099ff;stop-opacity:1' /%3E%3Cstop offset='50%25' style='stop-color:%230066ff;stop-opacity:1' /%3E%3Cstop offset='100%25' style='stop-color:%230044ff;stop-opacity:1' /%3E%3C/linearGradient%3E%3C/defs%3E%3Cpath fill='url(%23v1)' d='M20.29 8.33L16.11 16h-2.35l-2.06-6.88c-.13-.49-.24-.66-.63-.87-.63-.34-1.67-.66-2.59-.86l.06-.25h4.47c.57 0 1.08.37 1.21.93l1.1 5.62L17.63 7h2.34zm-11.27.03l-2.22 7.64H4.64l2.22-7.64zm13.24-.03L21.23 16h-2.02l.14-1h-2.76l-.45 1h-2.35l3.17-7.01c.22-.49.63-.66 1.15-.66h1.73zm-1.77 3.16l-1.15 2.51h1.78z'/%3E%3C/svg%3E","data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cdefs%3E%3ClinearGradient id='m1'%3E%3Cstop offset='0%25' style='stop-color:%23ff3300'/%3E%3Cstop offset='100%25' style='stop-color:%23ff6600'/%3E%3C/linearGradient%3E%3ClinearGradient id='m2'%3E%3Cstop offset='0%25' style='stop-color:%23ffaa00'/%3E%3Cstop offset='100%25' style='stop-color:%23ffdd00'/%3E%3C/linearGradient%3E%3C/defs%3E%3Ccircle cx='7' cy='12' r='7' fill='url(%23m1)'/%3E%3Ccircle cx='17' cy='12' r='7' fill='url(%23m2)' opacity='.9'/%3E%3C/svg%3E","data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cdefs%3E%3ClinearGradient id='ig1' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:%2300d4ff' /%3E%3Cstop offset='50%25' style='stop-color:%23ffaa00' /%3E%3Cstop offset='100%25' style='stop-color:%23ffd700' /%3E%3C/linearGradient%3E%3C/defs%3E%3Cpath fill='url(%23ig1)' d='M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zM5.838 12a6.162 6.162 0 1112.324 0 6.162 6.162 0 01-12.324 0zM12 16a4 4 0 110-8 4 4 0 010 8zm4.965-10.405a1.44 1.44 0 112.881.001 1.44 1.44 0 01-2.881-.001z'/%3E%3C/svg%3E","data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cdefs%3E%3ClinearGradient id='dd1' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:%23ff0000;stop-opacity:1' /%3E%3Cstop offset='50%25' style='stop-color:%23ff4400;stop-opacity:1' /%3E%3Cstop offset='100%25' style='stop-color:%23ff8800;stop-opacity:1' /%3E%3C/linearGradient%3E%3C/defs%3E%3Cpath fill='url(%23dd1)' d='M23.95 9.28c-.25-1.87-1.1-3.39-2.47-4.44C19.8 3.52 17.54 3 14.72 3H5.5c-.55 0-1 .45-1 1 0 .06.01.12.02.18l1.54 11.64c.14 1.03 1.02 1.8 2.06 1.8h5.11c.39 0 .74.22.9.57l1.09 2.31c.26.56.84.91 1.46.91.7 0 1.31-.41 1.58-1.06l3.38-8.12c.29-.69.39-1.43.31-2.17z'/%3E%3C/svg%3E","data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cdefs%3E%3ClinearGradient id='ue1' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:%2300ff44;stop-opacity:1' /%3E%3Cstop offset='50%25' style='stop-color:%2300dd44;stop-opacity:1' /%3E%3Cstop offset='100%25' style='stop-color:%2300bb44;stop-opacity:1' /%3E%3C/linearGradient%3E%3C/defs%3E%3Cpath fill='url(%23ue1)' d='M14.686 14.556c0 3.278-2.634 5.934-5.88 5.934-3.246 0-5.88-2.656-5.88-5.934V2h3.238v12.495c0 1.49 1.186 2.695 2.642 2.695 1.456 0 2.641-1.206 2.641-2.695V2h3.24v12.556zM21.074 8.896h-3.238V2h-3.239v18h6.477v-3.24h-3.239v-4.623h3.24V8.896z'/%3E%3C/svg%3E","data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cdefs%3E%3ClinearGradient id='x1' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:%23333333;stop-opacity:1' /%3E%3Cstop offset='50%25' style='stop-color:%23000000;stop-opacity:1' /%3E%3Cstop offset='100%25' style='stop-color:%23444444;stop-opacity:1' /%3E%3C/linearGradient%3E%3C/defs%3E%3Cpath fill='url(%23x1)' d='M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z'/%3E%3C/svg%3E","data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cdefs%3E%3ClinearGradient id='fb1' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:%230088ff;stop-opacity:1' /%3E%3Cstop offset='50%25' style='stop-color:%230066dd;stop-opacity:1' /%3E%3Cstop offset='100%25' style='stop-color:%230044bb;stop-opacity:1' /%3E%3C/linearGradient%3E%3C/defs%3E%3Cpath fill='url(%23fb1)' d='M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z'/%3E%3C/svg%3E","data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cdefs%3E%3ClinearGradient id='az1' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:%23ffaa00;stop-opacity:1' /%3E%3Cstop offset='50%25' style='stop-color:%23ff8800;stop-opacity:1' /%3E%3Cstop offset='100%25' style='stop-color:%23ff6600;stop-opacity:1' /%3E%3C/linearGradient%3E%3C/defs%3E%3Cpath fill='url(%23az1)' d='M.045 18.02c.072-.116.187-.124.348-.022 3.636 2.11 7.594 3.166 11.87 3.166 2.852 0 5.668-.533 8.447-1.595l.315-.14c.138-.06.234-.1.293-.13.226-.088.39-.046.525.13.12.174.09.336-.12.48-.256.19-.6.41-1.006.654-1.244.743-2.64 1.316-4.185 1.726-1.53.406-3.045.61-4.516.61-2.265 0-4.41-.396-6.435-1.187-2.02-.794-3.82-1.91-5.43-3.35-.1-.074-.15-.15-.15-.22 0-.047.02-.09.05-.13z'/%3E%3C/svg%3E","data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cdefs%3E%3ClinearGradient id='yt1' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:%23ff0000;stop-opacity:1' /%3E%3Cstop offset='50%25' style='stop-color:%23ff2200;stop-opacity:1' /%3E%3Cstop offset='100%25' style='stop-color:%23dd0000;stop-opacity:1' /%3E%3C/linearGradient%3E%3C/defs%3E%3Cpath fill='url(%23yt1)' d='M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z'/%3E%3C/svg%3E"],autoPlay:!0,autoPlayInterval:2e3,itemsPerViewMobile:3,itemsPerViewDesktop:5,padding:"py-12 lg:py-16",containerClassName:"bg-gradient-to-b from-transparent via-background/50 to-background border-t border-border/20",titleClassName:"text-center",logoContainerWidth:"w-56",logoContainerHeight:"h-32",logoImageWidth:"w-24",logoImageHeight:"h-24",logoMaxHeight:"max-h-24",logoClassName:"bg-white/90 backdrop-blur-sm shadow-md"})}),Ot.jsxs("footer",{className:"relative glass-panel footer-marble-section border-t border-border/20 backdrop-blur-lg overflow-hidden",children:[Ot.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-gradient-to-bl from-primary/10 via-accent/5 to-transparent rounded-full blur-3xl opacity-40 pointer-events-none"}),Ot.jsx("div",{className:"absolute bottom-0 left-0 w-80 h-80 bg-gradient-to-tr from-secondary/10 via-cyan-500/5 to-transparent rounded-full blur-3xl opacity-40 pointer-events-none"}),Ot.jsx("div",{className:"absolute top-1/3 left-1/4 w-64 h-64 bg-gradient-to-r from-accent/5 to-transparent rounded-full blur-3xl opacity-30 pointer-events-none"}),Ot.jsx("div",{className:"absolute top-0 left-0 right-0 h-[2px] bg-gradient-to-r from-transparent via-primary via-accent to-transparent opacity-70"}),Ot.jsxs("div",{className:"container mx-auto px-4 lg:px-8 py-16 relative z-10",children:[Ot.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 mb-12",children:[Ot.jsxs("div",{className:"lg:col-span-1",children:[Ot.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[Ot.jsxs("div",{className:"relative group",children:[Ot.jsx(Pa,{className:"text-3xl text-slate-700 group-hover:text-secondary group-hover:scale-105 transition-all duration-500",size:32}),Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-secondary/5 to-primary/5 opacity-0 group-hover:opacity-100 transition-opacity duration-500 rounded-full"})]}),Ot.jsx("div",{className:"flex flex-col",children:Ot.jsx("h2",{className:"text-xl font-bold metallic gradient-text-gold text-luxury font-serif",children:"The Florida Local"})})]}),Ot.jsx("p",{className:"text-muted-foreground text-sm leading-relaxed mb-6",children:"Connecting Florida's finest businesses with discerning customers who appreciate luxury, quality, and exceptional service."}),Ot.jsxs("div",{className:"flex space-x-4",children:[Ot.jsxs("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:"group relative p-3 rounded-full glass-panel hover-lift transition-all duration-300","data-testid":"social-facebook",children:[Ot.jsx(gi,{className:"text-lg group-hover:text-primary transition-colors duration-300",size:18}),Ot.jsx("div",{className:"absolute inset-0 rounded-full bg-gradient-to-r from-primary/20 to-accent/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),Ot.jsxs("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:"group relative p-3 rounded-full glass-panel hover-lift transition-all duration-300","data-testid":"social-instagram",children:[Ot.jsx(fi,{className:"text-lg group-hover:text-accent transition-colors duration-300",size:18}),Ot.jsx("div",{className:"absolute inset-0 rounded-full bg-gradient-to-r from-accent/20 to-secondary/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),Ot.jsxs("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:"group relative p-3 rounded-full glass-panel hover-lift transition-all duration-300","data-testid":"social-twitter",children:[Ot.jsx(ra,{className:"text-lg group-hover:text-primary transition-colors duration-300",size:18}),Ot.jsx("div",{className:"absolute inset-0 rounded-full bg-gradient-to-r from-primary/20 to-accent/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),Ot.jsxs("a",{href:"https://linkedin.com",target:"_blank",rel:"noopener noreferrer",className:"group relative p-3 rounded-full glass-panel hover-lift transition-all duration-300","data-testid":"social-linkedin",children:[Ot.jsx(mi,{className:"text-lg group-hover:text-secondary transition-colors duration-300",size:18}),Ot.jsx("div",{className:"absolute inset-0 rounded-full bg-gradient-to-r from-secondary/20 to-primary/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]})]})]}),Ot.jsxs("div",{className:"lg:col-span-1",children:[Ot.jsx("h3",{className:"text-lg font-semibold gradient-text-gold text-luxury mb-6",children:"For Businesses"}),Ot.jsxs("ul",{className:"space-y-3",children:[Ot.jsx("li",{children:Ot.jsxs(Yn,{href:"/create-business",className:"group relative text-muted-foreground hover:text-foreground transition-all duration-300","data-testid":"footer-create-business",children:[Ot.jsx("span",{className:"relative z-10",children:"Create Business"}),Ot.jsx("div",{className:"absolute bottom-0 left-0 w-0 h-0.5 bg-gradient-to-r from-secondary to-accent transition-all duration-300 group-hover:w-full"})]})}),Ot.jsx("li",{children:Ot.jsxs(Yn,{href:"/vendor/products",className:"group relative text-muted-foreground hover:text-foreground transition-all duration-300","data-testid":"footer-manage-products",children:[Ot.jsx("span",{className:"relative z-10",children:"Manage Products"}),Ot.jsx("div",{className:"absolute bottom-0 left-0 w-0 h-0.5 bg-gradient-to-r from-secondary to-accent transition-all duration-300 group-hover:w-full"})]})}),Ot.jsx("li",{children:Ot.jsxs(Yn,{href:"/spotlight",className:"group relative text-muted-foreground hover:text-foreground transition-all duration-300","data-testid":"footer-spotlight",children:[Ot.jsx("span",{className:"relative z-10",children:"Spotlight Program"}),Ot.jsx("div",{className:"absolute bottom-0 left-0 w-0 h-0.5 bg-gradient-to-r from-secondary to-accent transition-all duration-300 group-hover:w-full"})]})}),Ot.jsx("li",{children:Ot.jsxs("a",{href:"#advertising",className:"group relative text-muted-foreground hover:text-foreground transition-all duration-300","data-testid":"footer-advertising",children:[Ot.jsx("span",{className:"relative z-10",children:"Advertising"}),Ot.jsx("div",{className:"absolute bottom-0 left-0 w-0 h-0.5 bg-gradient-to-r from-secondary to-accent transition-all duration-300 group-hover:w-full"})]})}),Ot.jsx("li",{children:Ot.jsxs("a",{href:"#analytics",className:"group relative text-muted-foreground hover:text-foreground transition-all duration-300","data-testid":"footer-analytics",children:[Ot.jsx("span",{className:"relative z-10",children:"Business Analytics"}),Ot.jsx("div",{className:"absolute bottom-0 left-0 w-0 h-0.5 bg-gradient-to-r from-secondary to-accent transition-all duration-300 group-hover:w-full"})]})})]})]}),Ot.jsxs("div",{className:"lg:col-span-1",children:[Ot.jsx("h3",{className:"text-lg font-semibold gradient-text-cyan text-luxury mb-6",children:"For Customers"}),Ot.jsxs("ul",{className:"space-y-3",children:[Ot.jsx("li",{children:Ot.jsxs(Yn,{href:"/",className:"group relative text-muted-foreground hover:text-foreground transition-all duration-300","data-testid":"footer-discover",children:[Ot.jsx("span",{className:"relative z-10",children:"Discover"}),Ot.jsx("div",{className:"absolute bottom-0 left-0 w-0 h-0.5 bg-gradient-to-r from-primary to-accent transition-all duration-300 group-hover:w-full"})]})}),Ot.jsx("li",{children:Ot.jsxs(Yn,{href:"/marketplace",className:"group relative text-muted-foreground hover:text-foreground transition-all duration-300","data-testid":"footer-marketplace",children:[Ot.jsx("span",{className:"relative z-10",children:"Marketplace"}),Ot.jsx("div",{className:"absolute bottom-0 left-0 w-0 h-0.5 bg-gradient-to-r from-primary to-accent transition-all duration-300 group-hover:w-full"})]})}),Ot.jsx("li",{children:Ot.jsxs(Yn,{href:"/messages",className:"group relative text-muted-foreground hover:text-foreground transition-all duration-300","data-testid":"footer-network",children:[Ot.jsx("span",{className:"relative z-10",children:"Network"}),Ot.jsx("div",{className:"absolute bottom-0 left-0 w-0 h-0.5 bg-gradient-to-r from-primary to-accent transition-all duration-300 group-hover:w-full"})]})}),Ot.jsx("li",{children:Ot.jsxs(Yn,{href:"/orders",className:"group relative text-muted-foreground hover:text-foreground transition-all duration-300","data-testid":"footer-orders",children:[Ot.jsx("span",{className:"relative z-10",children:"My Orders"}),Ot.jsx("div",{className:"absolute bottom-0 left-0 w-0 h-0.5 bg-gradient-to-r from-primary to-accent transition-all duration-300 group-hover:w-full"})]})}),Ot.jsx("li",{children:Ot.jsxs("a",{href:"#rewards",className:"group relative text-muted-foreground hover:text-foreground transition-all duration-300","data-testid":"footer-rewards",children:[Ot.jsx("span",{className:"relative z-10",children:"Loyalty Rewards"}),Ot.jsx("div",{className:"absolute bottom-0 left-0 w-0 h-0.5 bg-gradient-to-r from-primary to-accent transition-all duration-300 group-hover:w-full"})]})})]})]}),Ot.jsxs("div",{className:"lg:col-span-1",children:[Ot.jsx("h3",{className:"text-lg font-semibold gradient-text-magenta text-luxury mb-6",children:"Legal & Support"}),Ot.jsxs("ul",{className:"space-y-3",children:[Ot.jsx("li",{children:Ot.jsxs("a",{href:"#privacy",className:"group relative text-muted-foreground hover:text-foreground transition-all duration-300","data-testid":"footer-privacy",children:[Ot.jsx("span",{className:"relative z-10",children:"Privacy Policy"}),Ot.jsx("div",{className:"absolute bottom-0 left-0 w-0 h-0.5 bg-gradient-to-r from-accent to-secondary transition-all duration-300 group-hover:w-full"})]})}),Ot.jsx("li",{children:Ot.jsxs("a",{href:"#terms",className:"group relative text-muted-foreground hover:text-foreground transition-all duration-300","data-testid":"footer-terms",children:[Ot.jsx("span",{className:"relative z-10",children:"Terms of Service"}),Ot.jsx("div",{className:"absolute bottom-0 left-0 w-0 h-0.5 bg-gradient-to-r from-accent to-secondary transition-all duration-300 group-hover:w-full"})]})}),Ot.jsx("li",{children:Ot.jsxs("a",{href:"#support",className:"group relative text-muted-foreground hover:text-foreground transition-all duration-300","data-testid":"footer-support",children:[Ot.jsx("span",{className:"relative z-10",children:"Customer Support"}),Ot.jsx("div",{className:"absolute bottom-0 left-0 w-0 h-0.5 bg-gradient-to-r from-accent to-secondary transition-all duration-300 group-hover:w-full"})]})}),Ot.jsx("li",{children:Ot.jsxs("a",{href:"#contact",className:"group relative text-muted-foreground hover:text-foreground transition-all duration-300","data-testid":"footer-contact",children:[Ot.jsx("span",{className:"relative z-10",children:"Contact Us"}),Ot.jsx("div",{className:"absolute bottom-0 left-0 w-0 h-0.5 bg-gradient-to-r from-accent to-secondary transition-all duration-300 group-hover:w-full"})]})}),Ot.jsx("li",{children:Ot.jsxs("a",{href:"#accessibility",className:"group relative text-muted-foreground hover:text-foreground transition-all duration-300","data-testid":"footer-accessibility",children:[Ot.jsx("span",{className:"relative z-10",children:"Accessibility"}),Ot.jsx("div",{className:"absolute bottom-0 left-0 w-0 h-0.5 bg-gradient-to-r from-accent to-secondary transition-all duration-300 group-hover:w-full"})]})})]})]})]}),Ot.jsxs("div",{className:"mb-12 p-8 rounded-2xl relative overflow-hidden group hover-lift transition-all duration-500",children:[Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/20 via-accent/15 to-secondary/20 rounded-2xl"}),Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-tl from-cyan-500/10 via-transparent to-yellow-500/10 rounded-2xl opacity-50"}),Ot.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-gradient-to-br from-primary/30 to-transparent rounded-full blur-3xl opacity-60 group-hover:scale-110 transition-transform duration-700"}),Ot.jsx("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-gradient-to-tr from-accent/30 to-transparent rounded-full blur-3xl opacity-60 group-hover:scale-110 transition-transform duration-700"}),Ot.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-72 h-72 bg-gradient-to-r from-secondary/20 via-primary/10 to-accent/20 rounded-full blur-3xl opacity-40"}),Ot.jsx("div",{className:"absolute inset-0 glass-panel rounded-2xl border border-border/30"}),Ot.jsxs("div",{className:"relative z-10 text-center max-w-2xl mx-auto",children:[Ot.jsx("h3",{className:"text-2xl md:text-3xl font-bold text-luxury font-serif mb-4 relative",children:Ot.jsx("span",{className:"text-black dark:text-white font-bold drop-shadow-lg",children:"Stay Connected with Florida's Elite"})}),Ot.jsx("p",{className:"text-foreground/90 mb-6 font-medium drop-shadow-sm",children:"Get exclusive access to premium businesses, special offers, and insider updates from Florida's luxury marketplace."}),Ot.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 max-w-md mx-auto",children:[Ot.jsx("input",{type:"email",placeholder:"Enter your email",className:"flex-1 px-4 py-3 rounded-lg glass-panel border border-border/40 bg-background/80 backdrop-blur-sm focus:border-primary/60 focus:ring-2 focus:ring-primary/30 transition-all duration-300 text-foreground placeholder:text-muted-foreground shadow-md","data-testid":"newsletter-email"}),Ot.jsxs("button",{className:"px-6 py-3 bg-gradient-to-r from-cyan-500 via-blue-600 to-purple-600 hover:from-cyan-400 hover:via-blue-500 hover:to-purple-500 hover-lift btn-press rounded-lg font-semibold transition-all duration-300 shadow-lg hover:shadow-2xl hover:shadow-purple-500/50 text-white relative overflow-hidden group/btn","data-testid":"newsletter-subscribe",children:[Ot.jsx("span",{className:"relative z-10 font-bold",children:"Subscribe"}),Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/0 via-white/30 to-white/0 translate-x-[-100%] group-hover/btn:translate-x-[100%] transition-transform duration-700"})]})]})]})]}),Ot.jsx("div",{className:"pt-8 border-t border-border/20",children:Ot.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[Ot.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-4 text-sm text-muted-foreground",children:[Ot.jsxs("p",{className:"text-luxury",children:[" ",e," The Florida Local. All rights reserved."]}),Ot.jsxs("div",{className:"flex items-center gap-4",children:[Ot.jsx("span",{className:"text-xs text-muted-foreground/70",children:"Made with"}),Ot.jsx(Zn,{className:"text-accent animate-pulse",size:16}),Ot.jsx("span",{className:"text-xs text-muted-foreground/70",children:"in Miami"})]})]}),Ot.jsxs("div",{className:"flex items-center gap-6 text-sm",children:[Ot.jsxs("a",{href:"#security",className:"group relative text-muted-foreground hover:text-foreground transition-all duration-300","data-testid":"footer-security",children:[Ot.jsx(Rn,{className:"mr-2 group-hover:text-secondary transition-colors duration-300",size:16}),Ot.jsx("span",{className:"relative z-10",children:"Secure"}),Ot.jsx("div",{className:"absolute bottom-0 left-0 w-0 h-0.5 bg-gradient-to-r from-secondary to-accent transition-all duration-300 group-hover:w-full"})]}),Ot.jsxs("a",{href:"#certified",className:"group relative text-muted-foreground hover:text-foreground transition-all duration-300","data-testid":"footer-certified",children:[Ot.jsx(sr,{className:"mr-2 group-hover:text-primary transition-colors duration-300",size:16}),Ot.jsx("span",{className:"relative z-10",children:"Certified"}),Ot.jsx("div",{className:"absolute bottom-0 left-0 w-0 h-0.5 bg-gradient-to-r from-primary to-accent transition-all duration-300 group-hover:w-full"})]}),Ot.jsxs("a",{href:"#verified",className:"group relative text-muted-foreground hover:text-foreground transition-all duration-300","data-testid":"footer-verified",children:[Ot.jsx(us,{className:"mr-2 group-hover:text-accent transition-colors duration-300",size:16}),Ot.jsx("span",{className:"relative z-10",children:"Verified"}),Ot.jsx("div",{className:"absolute bottom-0 left-0 w-0 h-0.5 bg-gradient-to-r from-accent to-secondary transition-all duration-300 group-hover:w-full"})]})]})]})})]}),Ot.jsx("div",{className:"absolute inset-0 ambient-particles opacity-30 pointer-events-none"})]})]})}function pDe(){const[e]=_n(),{isAuthenticated:t}=Ua(),{data:n=[]}=za({queryKey:["/api/businesses/my"],enabled:t});if(!t)return null;const r=n.length>0?{href:`/business/${n[0].id}`,icon:Ot.jsx(fr,{size:18}),label:"My Biz",testId:"nav-mobile-my-business"}:{href:"/create-business",icon:Ot.jsx(wr,{size:18}),label:"Create",testId:"nav-mobile-create-business"},s=[{href:"/",icon:Ot.jsx(bs,{size:18}),label:"Home",testId:"nav-mobile-home"},{href:"/marketplace",icon:Ot.jsx(tr,{size:18}),label:"Shop",testId:"nav-mobile-marketplace"},r,{href:"/messages",icon:Ot.jsx(Or,{size:18}),label:"Messages",testId:"nav-mobile-messages",hasNotification:!0}];return Ot.jsxs("nav",{className:"fixed bottom-0 left-0 right-0 premium-mobile-nav nav-marble-mobile-bottom glass-panel border-t border-border/30 backdrop-blur-xl md:hidden z-40",children:[Ot.jsx("div",{className:"absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-primary to-transparent"}),Ot.jsx("div",{className:"flex items-center justify-around py-3",children:s.map(t=>{const n=e===t.href;return Ot.jsxs(Yn,{href:t.href,className:"flex flex-col items-center p-3 relative rounded-xl transition-all duration-300 group "+(n?"text-primary metallic shadow-sm":"text-muted-foreground hover:text-foreground hover:bg-background/50"),"data-testid":t.testId,children:[Ot.jsx("div",{className:"mb-1 group-hover:scale-110 transition-transform duration-300",children:t.icon}),Ot.jsx("span",{className:"text-xs font-medium relative z-10",children:t.label}),t.hasNotification&&Ot.jsxs("div",{className:"absolute -top-1 -right-1 premium-notification-pulse",children:[Ot.jsx("div",{className:"w-3 h-3 bg-accent rounded-full animate-pulse"}),Ot.jsx("div",{className:"absolute inset-0 bg-accent rounded-full animate-ping opacity-20"})]}),n&&Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary/10 to-accent/10 rounded-xl"}),!n&&Ot.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary/5 to-accent/5 opacity-0 group-hover:opacity-100 transition-opacity duration-300 rounded-xl"})]},t.href)})})]})}function mDe(){const e=[{title:"Fine Dining",images:[Wa,$a,qa],stats:[{icon:Ot.jsx(xr,{className:"h-4 w-4"}),label:"Open Daily"},{icon:Ot.jsx(Bn,{className:"h-4 w-4"}),label:"Miami, FL"},{icon:Ot.jsx(In,{className:"h-4 w-4"}),label:"Premium"}],description:"Experience Florida's finest dining with world-class cuisine, elegant atmosphere, and exceptional service. Discover local flavors and premium dining experiences.",href:"#fine-dining"},{title:"Beach Weddings",images:[fM,Qa,Wd],stats:[{icon:Ot.jsx(Zn,{className:"h-4 w-4"}),label:"Full Service"},{icon:Ot.jsx(Bn,{className:"h-4 w-4"}),label:"Coastal FL"},{icon:Ot.jsx(On,{className:"h-4 w-4"}),label:"50-200 Guests"}],description:"Create unforgettable memories with stunning beach wedding ceremonies. Professional planning, beautiful venues, and personalized service for your special day.",href:"#weddings"},{title:"Luxury Spa & Wellness",images:[Hd,Ka,Ya],stats:[{icon:Ot.jsx(An,{className:"h-4 w-4"}),label:"Premium"},{icon:Ot.jsx(xr,{className:"h-4 w-4"}),label:"7 Days/Week"},{icon:Ot.jsx(In,{className:"h-4 w-4"}),label:"5-Star"}],description:"Rejuvenate your mind and body with luxury spa treatments, wellness programs, and serene environments. Expert care in Florida's premier wellness destinations.",href:"#wellness"},{title:"Cuban Cuisine",images:["/assets/images/cuban_sandwich1-BZr_6O31.jpg",Xa,Vd],stats:[{icon:Ot.jsx(xr,{className:"h-4 w-4"}),label:"Lunch & Dinner"},{icon:Ot.jsx(Bn,{className:"h-4 w-4"}),label:"Tampa, FL"},{icon:Ot.jsx(In,{className:"h-4 w-4"}),label:"Authentic"}],description:"Savor authentic Cuban flavors with traditional recipes, fresh ingredients, and warm hospitality. From classic sandwiches to gourmet specialties.",href:"#cuban"}];return Ot.jsx("div",{className:"min-h-screen w-full bg-background p-8",children:Ot.jsxs("div",{className:"mx-auto max-w-7xl",children:[Ot.jsx("h1",{className:"mb-4 text-center text-4xl font-bold tracking-tight",children:"Florida Local Business Showcase"}),Ot.jsx("p",{className:"mb-12 text-center text-muted-foreground",children:"Discover amazing local businesses across Florida. Hover over each card to explore."}),Ot.jsx("div",{className:"grid grid-cols-1 gap-8 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-2",children:e.map((e,t)=>Ot.jsx("div",{className:"flex justify-center",children:Ot.jsx(nu,{...e})},t))})]})})}function fDe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gDe(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}
/*!
 * GSAP 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var xDe,vDe,yDe,bDe,wDe,jDe,NDe,_De,SDe,MDe,CDe,EDe,kDe,ADe,TDe,PDe,ODe,RDe,IDe,DDe,LDe,FDe,zDe,BDe,UDe,VDe,HDe,WDe,$De,GDe,qDe,XDe,KDe={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},YDe={duration:.5,overwrite:!1,delay:0},ZDe=1e8,JDe=1e-8,QDe=2*Math.PI,eLe=QDe/4,tLe=0,nLe=Math.sqrt,rLe=Math.cos,sLe=Math.sin,iLe=function(e){return"string"==typeof e},aLe=function(e){return"function"==typeof e},oLe=function(e){return"number"==typeof e},lLe=function(e){return void 0===e},cLe=function(e){return"object"==typeof e},dLe=function(e){return!1!==e},uLe=function(){return"undefined"!=typeof window},hLe=function(e){return aLe(e)||iLe(e)},pLe="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},mLe=Array.isArray,fLe=/(?:-?\.?\d|\.)+/gi,gLe=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,xLe=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,vLe=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,yLe=/[+-]=-?[.\d]+/,bLe=/[^,'"\[\]\s]+/gi,wLe=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,jLe={},NLe={},_Le=function(e){return(NLe=eFe(e,jLe))&&eBe},SLe=function(e,t){},MLe=function(e,t){return!t&&void 0},CLe=function(e,t){return e&&(jLe[e]=t)&&NLe&&(NLe[e]=t)||jLe},ELe=function(){return 0},kLe={suppressEvents:!0,isStart:!0,kill:!1},ALe={suppressEvents:!0,kill:!1},TLe={suppressEvents:!0},PLe={},OLe=[],RLe={},ILe={},DLe={},LLe=30,FLe=[],zLe="",BLe=function(e){var t,n,r=e[0];if(cLe(r)||aLe(r)||(e=[e]),!(t=(r._gsap||{}).harness)){for(n=FLe.length;n--&&!FLe[n].targetTest(r););t=FLe[n]}for(n=e.length;n--;)e[n]&&(e[n]._gsap||(e[n]._gsap=new mze(e[n],t)))||e.splice(n,1);return e},ULe=function(e){return e._gsap||BLe(TFe(e))[0]._gsap},VLe=function(e,t,n){return(n=e[t])&&aLe(n)?e[t]():lLe(n)&&e.getAttribute&&e.getAttribute(t)||n},HLe=function(e,t){return(e=e.split(",")).forEach(t)||e},WLe=function(e){return Math.round(1e5*e)/1e5||0},$Le=function(e){return Math.round(1e7*e)/1e7||0},GLe=function(e,t){var n=t.charAt(0),r=parseFloat(t.substr(2));return e=parseFloat(e),"+"===n?e+r:"-"===n?e-r:"*"===n?e*r:e/r},qLe=function(e,t){for(var n=t.length,r=0;e.indexOf(t[r])<0&&++r<n;);return r<n},XLe=function(){var e,t,n=OLe.length,r=OLe.slice(0);for(RLe={},OLe.length=0,e=0;e<n;e++)(t=r[e])&&t._lazy&&(t.render(t._lazy[0],t._lazy[1],!0)._lazy=0)},KLe=function(e){return!!(e._initted||e._startAt||e.add)},YLe=function(e,t,n,r){OLe.length&&!vDe&&XLe(),e.render(t,n,!!(vDe&&t<0&&KLe(e))),OLe.length&&!vDe&&XLe()},ZLe=function(e){var t=parseFloat(e);return(t||0===t)&&(e+"").match(bLe).length<2?t:iLe(e)?e.trim():e},JLe=function(e){return e},QLe=function(e,t){for(var n in t)n in e||(e[n]=t[n]);return e},eFe=function(e,t){for(var n in t)e[n]=t[n];return e},tFe=function e(t,n){for(var r in n)"__proto__"!==r&&"constructor"!==r&&"prototype"!==r&&(t[r]=cLe(n[r])?e(t[r]||(t[r]={}),n[r]):n[r]);return t},nFe=function(e,t){var n,r={};for(n in e)n in t||(r[n]=e[n]);return r},rFe=function(e){var t,n=e.parent||bDe,r=e.keyframes?(t=mLe(e.keyframes),function(e,n){for(var r in n)r in e||"duration"===r&&t||"ease"===r||(e[r]=n[r])}):QLe;if(dLe(e.inherit))for(;n;)r(e,n.vars.defaults),n=n.parent||n._dp;return e},sFe=function(e,t,n,r,s){var i,a=e[r];if(s)for(i=t[s];a&&a[s]>i;)a=a._prev;return a?(t._next=a._next,a._next=t):(t._next=e[n],e[n]=t),t._next?t._next._prev=t:e[r]=t,t._prev=a,t.parent=t._dp=e,t},iFe=function(e,t,n,r){void 0===n&&(n="_first"),void 0===r&&(r="_last");var s=t._prev,i=t._next;s?s._next=i:e[n]===t&&(e[n]=i),i?i._prev=s:e[r]===t&&(e[r]=s),t._next=t._prev=t.parent=null},aFe=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},oFe=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var n=e;n;)n._dirty=1,n=n.parent;return e},lFe=function(e,t,n,r){return e._startAt&&(vDe?e._startAt.revert(ALe):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,r))},cFe=function e(t){return!t||t._ts&&e(t.parent)},dFe=function(e){return e._repeat?uFe(e._tTime,e=e.duration()+e._rDelay)*e:0},uFe=function(e,t){var n=Math.floor(e=$Le(e/t));return e&&n===e?n-1:n},hFe=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},pFe=function(e){return e._end=$Le(e._start+(e._tDur/Math.abs(e._ts||e._rts||JDe)||0))},mFe=function(e,t){var n=e._dp;return n&&n.smoothChildTiming&&e._ts&&(e._start=$Le(n._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),pFe(e),n._dirty||oFe(n,e)),e},fFe=function(e,t){var n;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(n=hFe(e.rawTime(),t),(!t._dur||CFe(0,t.totalDuration(),n)-t._tTime>JDe)&&t.render(n,!0)),oFe(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(n=e;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;e._zTime=-1e-8}},gFe=function(e,t,n,r){return t.parent&&aFe(t),t._start=$Le((oLe(n)?n:n||e!==bDe?_Fe(e,n,t):e._time)+t._delay),t._end=$Le(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),sFe(e,t,"_first","_last",e._sort?"_start":0),bFe(t)||(e._recent=t),r||fFe(e,t),e._ts<0&&mFe(e,e._tTime),e},xFe=function(e,t){return jLe.ScrollTrigger?jLe.ScrollTrigger.create(t,e):void 0},vFe=function(e,t,n,r,s){return jze(e,t,s),e._initted?!n&&e._pt&&!vDe&&(e._dur&&!1!==e.vars.lazy||!e._dur&&e.vars.lazy)&&SDe!==tze.frame?(OLe.push(e),e._lazy=[s,r],1):void 0:1},yFe=function e(t){var n=t.parent;return n&&n._ts&&n._initted&&!n._lock&&(n.rawTime()<0||e(n))},bFe=function(e){var t=e.data;return"isFromStart"===t||"isStart"===t},wFe=function(e,t,n,r){var s=e._repeat,i=$Le(t)||0,a=e._tTime/e._tDur;return a&&!r&&(e._time*=i/e._dur),e._dur=i,e._tDur=s?s<0?1e10:$Le(i*(s+1)+e._rDelay*s):i,a>0&&!r&&mFe(e,e._tTime=e._tDur*a),e.parent&&pFe(e),n||oFe(e.parent,e),e},jFe=function(e){return e instanceof gze?oFe(e):wFe(e,e._dur)},NFe={_start:0,endTime:ELe,totalDuration:ELe},_Fe=function e(t,n,r){var s,i,a,o=t.labels,l=t._recent||NFe,c=t.duration()>=ZDe?l.endTime(!1):t._dur;return iLe(n)&&(isNaN(n)||n in o)?(i=n.charAt(0),a="%"===n.substr(-1),s=n.indexOf("="),"<"===i||">"===i?(s>=0&&(n=n.replace(/=/,"")),("<"===i?l._start:l.endTime(l._repeat>=0))+(parseFloat(n.substr(1))||0)*(a?(s<0?l:r).totalDuration()/100:1)):s<0?(n in o||(o[n]=c),o[n]):(i=parseFloat(n.charAt(s-1)+n.substr(s+1)),a&&r&&(i=i/100*(mLe(r)?r[0]:r).totalDuration()),s>1?e(t,n.substr(0,s-1),r)+i:c+i)):null==n?c:+n},SFe=function(e,t,n){var r,s,i=oLe(t[1]),a=(i?2:1)+(e<2?0:1),o=t[a];if(i&&(o.duration=t[1]),o.parent=n,e){for(r=o,s=n;s&&!("immediateRender"in r);)r=s.vars.defaults||{},s=dLe(s.vars.inherit)&&s.parent;o.immediateRender=dLe(r.immediateRender),e<2?o.runBackwards=1:o.startAt=t[a-1]}return new Cze(t[0],o,t[a+1])},MFe=function(e,t){return e||0===e?t(e):t},CFe=function(e,t,n){return n<e?e:n>t?t:n},EFe=function(e,t){return iLe(e)&&(t=wLe.exec(e))?t[1]:""},kFe=[].slice,AFe=function(e,t){return e&&cLe(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&cLe(e[0]))&&!e.nodeType&&e!==wDe},TFe=function(e,t,n){return yDe&&!t&&yDe.selector?yDe.selector(e):!iLe(e)||n||!jDe&&nze()?mLe(e)?function(e,t,n){return void 0===n&&(n=[]),e.forEach(function(e){var r;return iLe(e)&&!t||AFe(e,1)?(r=n).push.apply(r,TFe(e)):n.push(e)})||n}(e,n):AFe(e)?kFe.call(e,0):e?[e]:[]:kFe.call((t||NDe).querySelectorAll(e),0)},PFe=function(e){return e=TFe(e)[0]||MLe()||{},function(t){var n=e.current||e.nativeElement||e;return TFe(t,n.querySelectorAll?n:n===e?MLe()||NDe.createElement("div"):e)}},OFe=function(e){return e.sort(function(){return.5-Math.random()})},RFe=function(e){if(aLe(e))return e;var t=cLe(e)?e:{each:e},n=cze(t.ease),r=t.from||0,s=parseFloat(t.base)||0,i={},a=r>0&&r<1,o=isNaN(r)||a,l=t.axis,c=r,d=r;return iLe(r)?c=d={center:.5,edges:.5,end:1}[r]||0:!a&&o&&(c=r[0],d=r[1]),function(e,a,u){var h,p,m,f,g,x,v,y,b,w=(u||t).length,j=i[w];if(!j){if(!(b="auto"===t.grid?0:(t.grid||[1,ZDe])[1])){for(v=-1e8;v<(v=u[b++].getBoundingClientRect().left)&&b<w;);b<w&&b--}for(j=i[w]=[],h=o?Math.min(b,w)*c-.5:r%b,p=b===ZDe?0:o?w*d/b-.5:r/b|0,v=0,y=ZDe,x=0;x<w;x++)m=x%b-h,f=p-(x/b|0),j[x]=g=l?Math.abs("y"===l?f:m):nLe(m*m+f*f),g>v&&(v=g),g<y&&(y=g);"random"===r&&OFe(j),j.max=v-y,j.min=y,j.v=w=(parseFloat(t.amount)||parseFloat(t.each)*(b>w?w-1:l?"y"===l?w/b:b:Math.max(b,w/b))||0)*("edges"===r?-1:1),j.b=w<0?s-w:s,j.u=EFe(t.amount||t.each)||0,n=n&&w<0?oze(n):n}return w=(j[e]-j.min)/j.max||0,$Le(j.b+(n?n(w):w)*j.v)+j.u}},IFe=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(n){var r=$Le(Math.round(parseFloat(n)/e)*e*t);return(r-r%1)/t+(oLe(n)?0:EFe(n))}},DFe=function(e,t){var n,r,s=mLe(e);return!s&&cLe(e)&&(n=s=e.radius||ZDe,e.values?(e=TFe(e.values),(r=!oLe(e[0]))&&(n*=n)):e=IFe(e.increment)),MFe(t,s?aLe(e)?function(t){return r=e(t),Math.abs(r-t)<=n?r:t}:function(t){for(var s,i,a=parseFloat(r?t.x:t),o=parseFloat(r?t.y:0),l=ZDe,c=0,d=e.length;d--;)(s=r?(s=e[d].x-a)*s+(i=e[d].y-o)*i:Math.abs(e[d]-a))<l&&(l=s,c=d);return c=!n||l<=n?e[c]:t,r||c===t||oLe(t)?c:c+EFe(t)}:IFe(e))},LFe=function(e,t,n,r){return MFe(mLe(e)?!t:!0===n?!!(n=0):!r,function(){return mLe(e)?e[~~(Math.random()*e.length)]:(n=n||1e-5)&&(r=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((e-n/2+Math.random()*(t-e+.99*n))/n)*n*r)/r})},FFe=function(e,t,n){return MFe(n,function(n){return e[~~t(n)]})},zFe=function(e){for(var t,n,r,s,i=0,a="";~(t=e.indexOf("random(",i));)r=e.indexOf(")",t),s="["===e.charAt(t+7),n=e.substr(t+7,r-t-7).match(s?bLe:fLe),a+=e.substr(i,t-i)+LFe(s?n:+n[0],s?0:+n[1],+n[2]||1e-5),i=r+1;return a+e.substr(i,e.length-i)},BFe=function(e,t,n,r,s){var i=t-e,a=r-n;return MFe(s,function(t){return n+((t-e)/i*a||0)})},UFe=function(e,t,n){var r,s,i,a=e.labels,o=ZDe;for(r in a)(s=a[r]-t)<0==!!n&&s&&o>(s=Math.abs(s))&&(i=r,o=s);return i},VFe=function(e,t,n){var r,s,i,a=e.vars,o=a[t],l=yDe,c=e._ctx;if(o)return r=a[t+"Params"],s=a.callbackScope||e,n&&OLe.length&&XLe(),c&&(yDe=c),i=r?o.apply(s,r):o.call(s),yDe=l,i},HFe=function(e){return aFe(e),e.scrollTrigger&&e.scrollTrigger.kill(!!vDe),e.progress()<1&&VFe(e,"onInterrupt"),e},WFe=[],$Fe=function(e){if(e)if(e=!e.name&&e.default||e,uLe()||e.headless){var t=e.name,n=aLe(e),r=t&&!n&&e.init?function(){this._props=[]}:e,s={init:ELe,render:Dze,add:bze,kill:Fze,modifier:Lze,rawVars:0},i={targetTest:0,get:0,getSetter:Pze,aliases:{},register:0};if(nze(),e!==r){if(ILe[t])return;QLe(r,QLe(nFe(e,s),i)),eFe(r.prototype,eFe(s,nFe(e,i))),ILe[r.prop=t]=r,e.targetTest&&(FLe.push(r),PLe[t]=1),t=("css"===t?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}CLe(t,r),e.register&&e.register(eBe,r,Uze)}else WFe.push(e)},GFe=255,qFe={aqua:[0,GFe,GFe],lime:[0,GFe,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,GFe],navy:[0,0,128],white:[GFe,GFe,GFe],olive:[128,128,0],yellow:[GFe,GFe,0],orange:[GFe,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[GFe,0,0],pink:[GFe,192,203],cyan:[0,GFe,GFe],transparent:[GFe,GFe,GFe,0]},XFe=function(e,t,n){return(6*(e+=e<0?1:e>1?-1:0)<1?t+(n-t)*e*6:e<.5?n:3*e<2?t+(n-t)*(2/3-e)*6:t)*GFe+.5|0},KFe=function(e,t,n){var r,s,i,a,o,l,c,d,u,h,p=e?oLe(e)?[e>>16,e>>8&GFe,e&GFe]:0:qFe.black;if(!p){if(","===e.substr(-1)&&(e=e.substr(0,e.length-1)),qFe[e])p=qFe[e];else if("#"===e.charAt(0)){if(e.length<6&&(r=e.charAt(1),s=e.charAt(2),i=e.charAt(3),e="#"+r+r+s+s+i+i+(5===e.length?e.charAt(4)+e.charAt(4):"")),9===e.length)return[(p=parseInt(e.substr(1,6),16))>>16,p>>8&GFe,p&GFe,parseInt(e.substr(7),16)/255];p=[(e=parseInt(e.substr(1),16))>>16,e>>8&GFe,e&GFe]}else if("hsl"===e.substr(0,3))if(p=h=e.match(fLe),t){if(~e.indexOf("="))return p=e.match(gLe),n&&p.length<4&&(p[3]=1),p}else a=+p[0]%360/360,o=+p[1]/100,r=2*(l=+p[2]/100)-(s=l<=.5?l*(o+1):l+o-l*o),p.length>3&&(p[3]*=1),p[0]=XFe(a+1/3,r,s),p[1]=XFe(a,r,s),p[2]=XFe(a-1/3,r,s);else p=e.match(fLe)||qFe.transparent;p=p.map(Number)}return t&&!h&&(r=p[0]/GFe,s=p[1]/GFe,i=p[2]/GFe,l=((c=Math.max(r,s,i))+(d=Math.min(r,s,i)))/2,c===d?a=o=0:(u=c-d,o=l>.5?u/(2-c-d):u/(c+d),a=c===r?(s-i)/u+(s<i?6:0):c===s?(i-r)/u+2:(r-s)/u+4,a*=60),p[0]=~~(a+.5),p[1]=~~(100*o+.5),p[2]=~~(100*l+.5)),n&&p.length<4&&(p[3]=1),p},YFe=function(e){var t=[],n=[],r=-1;return e.split(JFe).forEach(function(e){var s=e.match(xLe)||[];t.push.apply(t,s),n.push(r+=s.length+1)}),t.c=n,t},ZFe=function(e,t,n){var r,s,i,a,o="",l=(e+o).match(JFe),c=t?"hsla(":"rgba(",d=0;if(!l)return e;if(l=l.map(function(e){return(e=KFe(e,t,1))&&c+(t?e[0]+","+e[1]+"%,"+e[2]+"%,"+e[3]:e.join(","))+")"}),n&&(i=YFe(e),(r=n.c).join(o)!==i.c.join(o)))for(a=(s=e.replace(JFe,"1").split(xLe)).length-1;d<a;d++)o+=s[d]+(~r.indexOf(d)?l.shift()||c+"0,0,0,0)":(i.length?i:l.length?l:n).shift());if(!s)for(a=(s=e.split(JFe)).length-1;d<a;d++)o+=s[d]+l[d];return o+s[a]},JFe=function(){var e,t="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(e in qFe)t+="|"+e+"\\b";return new RegExp(t+")","gi")}(),QFe=/hsl[a]?\(/,eze=function(e){var t,n=e.join(" ");if(JFe.lastIndex=0,JFe.test(n))return t=QFe.test(n),e[1]=ZFe(e[1],t),e[0]=ZFe(e[0],t,YFe(e[1])),!0},tze=(RDe=Date.now,IDe=500,DDe=33,LDe=RDe(),FDe=LDe,BDe=zDe=1e3/240,VDe=function e(t){var n,r,s,i,a=RDe()-FDe,o=!0===t;if((a>IDe||a<0)&&(LDe+=a-DDe),((n=(s=(FDe+=a)-LDe)-BDe)>0||o)&&(i=++TDe.frame,PDe=s-1e3*TDe.time,TDe.time=s/=1e3,BDe+=n+(n>=zDe?4:zDe-n),r=1),o||(EDe=kDe(e)),r)for(ODe=0;ODe<UDe.length;ODe++)UDe[ODe](s,PDe,i,t)},TDe={time:0,frame:0,tick:function(){VDe(!0)},deltaRatio:function(e){return PDe/(1e3/(e||60))},wake:function(){_De&&(!jDe&&uLe()&&(wDe=jDe=window,NDe=wDe.document||{},jLe.gsap=eBe,(wDe.gsapVersions||(wDe.gsapVersions=[])).push(eBe.version),_Le(NLe||wDe.GreenSockGlobals||!wDe.gsap&&wDe||{}),WFe.forEach($Fe)),ADe="undefined"!=typeof requestAnimationFrame&&requestAnimationFrame,EDe&&TDe.sleep(),kDe=ADe||function(e){return setTimeout(e,BDe-1e3*TDe.time+1|0)},CDe=1,VDe(2))},sleep:function(){(ADe?cancelAnimationFrame:clearTimeout)(EDe),CDe=0,kDe=ELe},lagSmoothing:function(e,t){IDe=e||1/0,DDe=Math.min(t||33,IDe)},fps:function(e){zDe=1e3/(e||240),BDe=1e3*TDe.time+zDe},add:function(e,t,n){var r=t?function(t,n,s,i){e(t,n,s,i),TDe.remove(r)}:e;return TDe.remove(e),UDe[n?"unshift":"push"](r),nze(),r},remove:function(e,t){~(t=UDe.indexOf(e))&&UDe.splice(t,1)&&ODe>=t&&ODe--},_listeners:UDe=[]},TDe),nze=function(){return!CDe&&tze.wake()},rze={},sze=/^[\d.\-M][\d.\-,\s]/,ize=/["']/g,aze=function(e){for(var t,n,r,s={},i=e.substr(1,e.length-3).split(":"),a=i[0],o=1,l=i.length;o<l;o++)n=i[o],t=o!==l-1?n.lastIndexOf(","):n.length,r=n.substr(0,t),s[a]=isNaN(r)?r.replace(ize,"").trim():+r,a=n.substr(t+1).trim();return s},oze=function(e){return function(t){return 1-e(1-t)}},lze=function e(t,n){for(var r,s=t._first;s;)s instanceof gze?e(s,n):!s.vars.yoyoEase||s._yoyo&&s._repeat||s._yoyo===n||(s.timeline?e(s.timeline,n):(r=s._ease,s._ease=s._yEase,s._yEase=r,s._yoyo=n)),s=s._next},cze=function(e,t){return e&&(aLe(e)?e:rze[e]||function(e){var t,n,r,s,i=(e+"").split("("),a=rze[i[0]];return a&&i.length>1&&a.config?a.config.apply(null,~e.indexOf("{")?[aze(i[1])]:(t=e,n=t.indexOf("(")+1,r=t.indexOf(")"),s=t.indexOf("(",n),t.substring(n,~s&&s<r?t.indexOf(")",r+1):r)).split(",").map(ZLe)):rze._CE&&sze.test(e)?rze._CE("",e):a}(e))||t},dze=function(e,t,n,r){void 0===n&&(n=function(e){return 1-t(1-e)}),void 0===r&&(r=function(e){return e<.5?t(2*e)/2:1-t(2*(1-e))/2});var s,i={easeIn:t,easeOut:n,easeInOut:r};return HLe(e,function(e){for(var t in rze[e]=jLe[e]=i,rze[s=e.toLowerCase()]=n,i)rze[s+("easeIn"===t?".in":"easeOut"===t?".out":".inOut")]=rze[e+"."+t]=i[t]}),i},uze=function(e){return function(t){return t<.5?(1-e(1-2*t))/2:.5+e(2*(t-.5))/2}},hze=function e(t,n,r){var s=n>=1?n:1,i=(r||(t?.3:.45))/(n<1?n:1),a=i/QDe*(Math.asin(1/s)||0),o=function(e){return 1===e?1:s*Math.pow(2,-10*e)*sLe((e-a)*i)+1},l="out"===t?o:"in"===t?function(e){return 1-o(1-e)}:uze(o);return i=QDe/i,l.config=function(n,r){return e(t,n,r)},l},pze=function e(t,n){void 0===n&&(n=1.70158);var r=function(e){return e?--e*e*((n+1)*e+n)+1:0},s="out"===t?r:"in"===t?function(e){return 1-r(1-e)}:uze(r);return s.config=function(n){return e(t,n)},s};HLe("Linear,Quad,Cubic,Quart,Quint,Strong",function(e,t){var n=t<5?t+1:t;dze(e+",Power"+(n-1),t?function(e){return Math.pow(e,n)}:function(e){return e},function(e){return 1-Math.pow(1-e,n)},function(e){return e<.5?Math.pow(2*e,n)/2:1-Math.pow(2*(1-e),n)/2})}),rze.Linear.easeNone=rze.none=rze.Linear.easeIn,dze("Elastic",hze("in"),hze("out"),hze()),HDe=7.5625,GDe=2*($De=1/(WDe=2.75)),qDe=2.5*$De,dze("Bounce",function(e){return 1-XDe(1-e)},XDe=function(e){return e<$De?HDe*e*e:e<GDe?HDe*Math.pow(e-1.5/WDe,2)+.75:e<qDe?HDe*(e-=2.25/WDe)*e+.9375:HDe*Math.pow(e-2.625/WDe,2)+.984375}),dze("Expo",function(e){return Math.pow(2,10*(e-1))*e+e*e*e*e*e*e*(1-e)}),dze("Circ",function(e){return-(nLe(1-e*e)-1)}),dze("Sine",function(e){return 1===e?1:1-rLe(e*eLe)}),dze("Back",pze("in"),pze("out"),pze()),rze.SteppedEase=rze.steps=jLe.SteppedEase={config:function(e,t){void 0===e&&(e=1);var n=1/e,r=e+(t?0:1),s=t?1:0;return function(e){return((r*CFe(0,.99999999,e)|0)+s)*n}}},YDe.ease=rze["quad.out"],HLe("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(e){return zLe+=e+","+e+"Params,"});var mze=function(e,t){this.id=tLe++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:VLe,this.set=t?t.getSetter:Pze},fze=function(){function e(e){this.vars=e,this._delay=+e.delay||0,(this._repeat=e.repeat===1/0?-2:e.repeat||0)&&(this._rDelay=e.repeatDelay||0,this._yoyo=!!e.yoyo||!!e.yoyoEase),this._ts=1,wFe(this,+e.duration,1,1),this.data=e.data,yDe&&(this._ctx=yDe,yDe.data.push(this)),CDe||tze.wake()}var t=e.prototype;return t.delay=function(e){return e||0===e?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+e-this._delay),this._delay=e,this):this._delay},t.duration=function(e){return arguments.length?this.totalDuration(this._repeat>0?e+(e+this._rDelay)*this._repeat:e):this.totalDuration()&&this._dur},t.totalDuration=function(e){return arguments.length?(this._dirty=0,wFe(this,this._repeat<0?e:(e-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(e,t){if(nze(),!arguments.length)return this._tTime;var n=this._dp;if(n&&n.smoothChildTiming&&this._ts){for(mFe(this,e),!n._dp||n.parent||fFe(n,this);n&&n.parent;)n.parent._time!==n._start+(n._ts>=0?n._tTime/n._ts:(n.totalDuration()-n._tTime)/-n._ts)&&n.totalTime(n._tTime,!0),n=n.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&e<this._tDur||this._ts<0&&e>0||!this._tDur&&!e)&&gFe(this._dp,this,this._start-this._delay)}return(this._tTime!==e||!this._dur&&!t||this._initted&&Math.abs(this._zTime)===JDe||!e&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=e),YLe(this,e,t)),this},t.time=function(e,t){return arguments.length?this.totalTime(Math.min(this.totalDuration(),e+dFe(this))%(this._dur+this._rDelay)||(e?this._dur:0),t):this._time},t.totalProgress=function(e,t){return arguments.length?this.totalTime(this.totalDuration()*e,t):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},t.progress=function(e,t){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?e:1-e)+dFe(this),t):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},t.iteration=function(e,t){var n=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(e-1)*n,t):this._repeat?uFe(this._tTime,n)+1:1},t.timeScale=function(e,t){if(!arguments.length)return-1e-8===this._rts?0:this._rts;if(this._rts===e)return this;var n=this.parent&&this._ts?hFe(this.parent._time,this):this._tTime;return this._rts=+e||0,this._ts=this._ps||-1e-8===e?0:this._rts,this.totalTime(CFe(-Math.abs(this._delay),this.totalDuration(),n),!1!==t),pFe(this),function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e}(this)},t.paused=function(e){return arguments.length?(this._ps!==e&&(this._ps=e,e?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(nze(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&Math.abs(this._zTime)!==JDe&&(this._tTime-=JDe)))),this):this._ps},t.startTime=function(e){if(arguments.length){this._start=e;var t=this.parent||this._dp;return t&&(t._sort||!this.parent)&&gFe(t,this,e-this._delay),this}return this._start},t.endTime=function(e){return this._start+(dLe(e)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},t.rawTime=function(e){var t=this.parent||this._dp;return t?e&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?hFe(t.rawTime(e),this):this._tTime:this._tTime},t.revert=function(e){void 0===e&&(e=TLe);var t=vDe;return vDe=e,KLe(this)&&(this.timeline&&this.timeline.revert(e),this.totalTime(-.01,e.suppressEvents)),"nested"!==this.data&&!1!==e.kill&&this.kill(),vDe=t,this},t.globalTime=function(e){for(var t=this,n=arguments.length?e:t.rawTime();t;)n=t._start+n/(Math.abs(t._ts)||1),t=t._dp;return!this.parent&&this._sat?this._sat.globalTime(e):n},t.repeat=function(e){return arguments.length?(this._repeat=e===1/0?-2:e,jFe(this)):-2===this._repeat?1/0:this._repeat},t.repeatDelay=function(e){if(arguments.length){var t=this._time;return this._rDelay=e,jFe(this),t?this.time(t):this}return this._rDelay},t.yoyo=function(e){return arguments.length?(this._yoyo=e,this):this._yoyo},t.seek=function(e,t){return this.totalTime(_Fe(this,e),dLe(t))},t.restart=function(e,t){return this.play().totalTime(e?-this._delay:0,dLe(t)),this._dur||(this._zTime=-1e-8),this},t.play=function(e,t){return null!=e&&this.seek(e,t),this.reversed(!1).paused(!1)},t.reverse=function(e,t){return null!=e&&this.seek(e||this.totalDuration(),t),this.reversed(!0).paused(!1)},t.pause=function(e,t){return null!=e&&this.seek(e,t),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(e){return arguments.length?(!!e!==this.reversed()&&this.timeScale(-this._rts||(e?-1e-8:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-1e-8,this},t.isActive=function(){var e,t=this.parent||this._dp,n=this._start;return!(t&&!(this._ts&&this._initted&&t.isActive()&&(e=t.rawTime(!0))>=n&&e<this.endTime(!0)-JDe))},t.eventCallback=function(e,t,n){var r=this.vars;return arguments.length>1?(t?(r[e]=t,n&&(r[e+"Params"]=n),"onUpdate"===e&&(this._onUpdate=t)):delete r[e],this):r[e]},t.then=function(e){var t=this;return new Promise(function(n){var r=aLe(e)?e:JLe,s=function(){var e=t.then;t.then=null,aLe(r)&&(r=r(t))&&(r.then||r===t)&&(t.then=e),n(r),t.then=e};t._initted&&1===t.totalProgress()&&t._ts>=0||!t._tTime&&t._ts<0?s():t._prom=s})},t.kill=function(){HFe(this)},e}();QLe(fze.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var gze=function(e){function t(t,n){var r;return void 0===t&&(t={}),(r=e.call(this,t)||this).labels={},r.smoothChildTiming=!!t.smoothChildTiming,r.autoRemoveChildren=!!t.autoRemoveChildren,r._sort=dLe(t.sortChildren),bDe&&gFe(t.parent||bDe,fDe(r),n),t.reversed&&r.reverse(),t.paused&&r.paused(!0),t.scrollTrigger&&xFe(fDe(r),t.scrollTrigger),r}gDe(t,e);var n=t.prototype;return n.to=function(e,t,n){return SFe(0,arguments,this),this},n.from=function(e,t,n){return SFe(1,arguments,this),this},n.fromTo=function(e,t,n,r){return SFe(2,arguments,this),this},n.set=function(e,t,n){return t.duration=0,t.parent=this,rFe(t).repeatDelay||(t.repeat=0),t.immediateRender=!!t.immediateRender,new Cze(e,t,_Fe(this,n),1),this},n.call=function(e,t,n){return gFe(this,Cze.delayedCall(0,e,t),n)},n.staggerTo=function(e,t,n,r,s,i,a){return n.duration=t,n.stagger=n.stagger||r,n.onComplete=i,n.onCompleteParams=a,n.parent=this,new Cze(e,n,_Fe(this,s)),this},n.staggerFrom=function(e,t,n,r,s,i,a){return n.runBackwards=1,rFe(n).immediateRender=dLe(n.immediateRender),this.staggerTo(e,t,n,r,s,i,a)},n.staggerFromTo=function(e,t,n,r,s,i,a,o){return r.startAt=n,rFe(r).immediateRender=dLe(r.immediateRender),this.staggerTo(e,t,r,s,i,a,o)},n.render=function(e,t,n){var r,s,i,a,o,l,c,d,u,h,p,m,f=this._time,g=this._dirty?this.totalDuration():this._tDur,x=this._dur,v=e<=0?0:$Le(e),y=this._zTime<0!=e<0&&(this._initted||!x);if(this!==bDe&&v>g&&e>=0&&(v=g),v!==this._tTime||n||y){if(f!==this._time&&x&&(v+=this._time-f,e+=this._time-f),r=v,u=this._start,l=!(d=this._ts),y&&(x||(f=this._zTime),(e||!t)&&(this._zTime=e)),this._repeat){if(p=this._yoyo,o=x+this._rDelay,this._repeat<-1&&e<0)return this.totalTime(100*o+e,t,n);if(r=$Le(v%o),v===g?(a=this._repeat,r=x):((a=~~(h=$Le(v/o)))&&a===h&&(r=x,a--),r>x&&(r=x)),h=uFe(this._tTime,o),!f&&this._tTime&&h!==a&&this._tTime-h*o-this._dur<=0&&(h=a),p&&1&a&&(r=x-r,m=1),a!==h&&!this._lock){var b=p&&1&h,w=b===(p&&1&a);if(a<h&&(b=!b),f=b?0:v%x?x:v,this._lock=1,this.render(f||(m?0:$Le(a*o)),t,!x)._lock=0,this._tTime=v,!t&&this.parent&&VFe(this,"onRepeat"),this.vars.repeatRefresh&&!m&&(this.invalidate()._lock=1),f&&f!==this._time||l!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(x=this._dur,g=this._tDur,w&&(this._lock=2,f=b?x:-1e-4,this.render(f,!0),this.vars.repeatRefresh&&!m&&this.invalidate()),this._lock=0,!this._ts&&!l)return this;lze(this,m)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(c=function(e,t,n){var r;if(n>t)for(r=e._first;r&&r._start<=n;){if("isPause"===r.data&&r._start>t)return r;r=r._next}else for(r=e._last;r&&r._start>=n;){if("isPause"===r.data&&r._start<t)return r;r=r._prev}}(this,$Le(f),$Le(r)),c&&(v-=r-(r=c._start))),this._tTime=v,this._time=r,this._act=!d,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=e,f=0),!f&&v&&!t&&!h&&(VFe(this,"onStart"),this._tTime!==v))return this;if(r>=f&&e>=0)for(s=this._first;s;){if(i=s._next,(s._act||r>=s._start)&&s._ts&&c!==s){if(s.parent!==this)return this.render(e,t,n);if(s.render(s._ts>0?(r-s._start)*s._ts:(s._dirty?s.totalDuration():s._tDur)+(r-s._start)*s._ts,t,n),r!==this._time||!this._ts&&!l){c=0,i&&(v+=this._zTime=-1e-8);break}}s=i}else{s=this._last;for(var j=e<0?e:r;s;){if(i=s._prev,(s._act||j<=s._end)&&s._ts&&c!==s){if(s.parent!==this)return this.render(e,t,n);if(s.render(s._ts>0?(j-s._start)*s._ts:(s._dirty?s.totalDuration():s._tDur)+(j-s._start)*s._ts,t,n||vDe&&KLe(s)),r!==this._time||!this._ts&&!l){c=0,i&&(v+=this._zTime=j?-1e-8:JDe);break}}s=i}}if(c&&!t&&(this.pause(),c.render(r>=f?0:-1e-8)._zTime=r>=f?1:-1,this._ts))return this._start=u,pFe(this),this.render(e,t,n);this._onUpdate&&!t&&VFe(this,"onUpdate",!0),(v===g&&this._tTime>=this.totalDuration()||!v&&f)&&(u!==this._start&&Math.abs(d)===Math.abs(this._ts)||this._lock||((e||!x)&&(v===g&&this._ts>0||!v&&this._ts<0)&&aFe(this,1),t||e<0&&!f||!v&&!f&&g||(VFe(this,v===g&&e>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(v<g&&this.timeScale()>0)&&this._prom())))}return this},n.add=function(e,t){var n=this;if(oLe(t)||(t=_Fe(this,t,e)),!(e instanceof fze)){if(mLe(e))return e.forEach(function(e){return n.add(e,t)}),this;if(iLe(e))return this.addLabel(e,t);if(!aLe(e))return this;e=Cze.delayedCall(0,e)}return this!==e?gFe(this,e,t):this},n.getChildren=function(e,t,n,r){void 0===e&&(e=!0),void 0===t&&(t=!0),void 0===n&&(n=!0),void 0===r&&(r=-1e8);for(var s=[],i=this._first;i;)i._start>=r&&(i instanceof Cze?t&&s.push(i):(n&&s.push(i),e&&s.push.apply(s,i.getChildren(!0,t,n)))),i=i._next;return s},n.getById=function(e){for(var t=this.getChildren(1,1,1),n=t.length;n--;)if(t[n].vars.id===e)return t[n]},n.remove=function(e){return iLe(e)?this.removeLabel(e):aLe(e)?this.killTweensOf(e):(e.parent===this&&iFe(this,e),e===this._recent&&(this._recent=this._last),oFe(this))},n.totalTime=function(t,n){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=$Le(tze.time-(this._ts>0?t/this._ts:(this.totalDuration()-t)/-this._ts))),e.prototype.totalTime.call(this,t,n),this._forcing=0,this):this._tTime},n.addLabel=function(e,t){return this.labels[e]=_Fe(this,t),this},n.removeLabel=function(e){return delete this.labels[e],this},n.addPause=function(e,t,n){var r=Cze.delayedCall(0,t||ELe,n);return r.data="isPause",this._hasPause=1,gFe(this,r,_Fe(this,e))},n.removePause=function(e){var t=this._first;for(e=_Fe(this,e);t;)t._start===e&&"isPause"===t.data&&aFe(t),t=t._next},n.killTweensOf=function(e,t,n){for(var r=this.getTweensOf(e,n),s=r.length;s--;)xze!==r[s]&&r[s].kill(e,t);return this},n.getTweensOf=function(e,t){for(var n,r=[],s=TFe(e),i=this._first,a=oLe(t);i;)i instanceof Cze?qLe(i._targets,s)&&(a?(!xze||i._initted&&i._ts)&&i.globalTime(0)<=t&&i.globalTime(i.totalDuration())>t:!t||i.isActive())&&r.push(i):(n=i.getTweensOf(s,t)).length&&r.push.apply(r,n),i=i._next;return r},n.tweenTo=function(e,t){t=t||{};var n,r=this,s=_Fe(r,e),i=t,a=i.startAt,o=i.onStart,l=i.onStartParams,c=i.immediateRender,d=Cze.to(r,QLe({ease:t.ease||"none",lazy:!1,immediateRender:!1,time:s,overwrite:"auto",duration:t.duration||Math.abs((s-(a&&"time"in a?a.time:r._time))/r.timeScale())||JDe,onStart:function(){if(r.pause(),!n){var e=t.duration||Math.abs((s-(a&&"time"in a?a.time:r._time))/r.timeScale());d._dur!==e&&wFe(d,e,0,1).render(d._time,!0,!0),n=1}o&&o.apply(d,l||[])}},t));return c?d.render(0):d},n.tweenFromTo=function(e,t,n){return this.tweenTo(t,QLe({startAt:{time:_Fe(this,e)}},n))},n.recent=function(){return this._recent},n.nextLabel=function(e){return void 0===e&&(e=this._time),UFe(this,_Fe(this,e))},n.previousLabel=function(e){return void 0===e&&(e=this._time),UFe(this,_Fe(this,e),1)},n.currentLabel=function(e){return arguments.length?this.seek(e,!0):this.previousLabel(this._time+JDe)},n.shiftChildren=function(e,t,n){void 0===n&&(n=0);for(var r,s=this._first,i=this.labels;s;)s._start>=n&&(s._start+=e,s._end+=e),s=s._next;if(t)for(r in i)i[r]>=n&&(i[r]+=e);return oFe(this)},n.invalidate=function(t){var n=this._first;for(this._lock=0;n;)n.invalidate(t),n=n._next;return e.prototype.invalidate.call(this,t)},n.clear=function(e){void 0===e&&(e=!0);for(var t,n=this._first;n;)t=n._next,this.remove(n),n=t;return this._dp&&(this._time=this._tTime=this._pTime=0),e&&(this.labels={}),oFe(this)},n.totalDuration=function(e){var t,n,r,s=0,i=this,a=i._last,o=ZDe;if(arguments.length)return i.timeScale((i._repeat<0?i.duration():i.totalDuration())/(i.reversed()?-e:e));if(i._dirty){for(r=i.parent;a;)t=a._prev,a._dirty&&a.totalDuration(),(n=a._start)>o&&i._sort&&a._ts&&!i._lock?(i._lock=1,gFe(i,a,n-a._delay,1)._lock=0):o=n,n<0&&a._ts&&(s-=n,(!r&&!i._dp||r&&r.smoothChildTiming)&&(i._start+=n/i._ts,i._time-=n,i._tTime-=n),i.shiftChildren(-n,!1,-1/0),o=0),a._end>s&&a._ts&&(s=a._end),a=t;wFe(i,i===bDe&&i._time>s?i._time:s,1,1),i._dirty=0}return i._tDur},t.updateRoot=function(e){if(bDe._ts&&(YLe(bDe,hFe(e,bDe)),SDe=tze.frame),tze.frame>=LLe){LLe+=KDe.autoSleep||120;var t=bDe._first;if((!t||!t._ts)&&KDe.autoSleep&&tze._listeners.length<2){for(;t&&!t._ts;)t=t._next;t||tze.sleep()}}},t}(fze);QLe(gze.prototype,{_lock:0,_hasPause:0,_forcing:0});var xze,vze,yze=function(e,t,n,r,s,i,a){var o,l,c,d,u,h,p,m,f=new Uze(this._pt,e,t,0,1,Ize,null,s),g=0,x=0;for(f.b=n,f.e=r,n+="",(p=~(r+="").indexOf("random("))&&(r=zFe(r)),i&&(i(m=[n,r],e,t),n=m[0],r=m[1]),l=n.match(vLe)||[];o=vLe.exec(r);)d=o[0],u=r.substring(g,o.index),c?c=(c+1)%5:"rgba("===u.substr(-5)&&(c=1),d!==l[x++]&&(h=parseFloat(l[x-1])||0,f._pt={_next:f._pt,p:u||1===x?u:",",s:h,c:"="===d.charAt(1)?GLe(h,d)-h:parseFloat(d)-h,m:c&&c<4?Math.round:0},g=vLe.lastIndex);return f.c=g<r.length?r.substring(g,r.length):"",f.fp=a,(yLe.test(r)||p)&&(f.e=0),this._pt=f,f},bze=function(e,t,n,r,s,i,a,o,l,c){aLe(r)&&(r=r(s||0,e,i));var d,u=e[t],h="get"!==n?n:aLe(u)?l?e[t.indexOf("set")||!aLe(e["get"+t.substr(3)])?t:"get"+t.substr(3)](l):e[t]():u,p=aLe(u)?l?Aze:kze:Eze;if(iLe(r)&&(~r.indexOf("random(")&&(r=zFe(r)),"="===r.charAt(1)&&((d=GLe(h,r)+(EFe(h)||0))||0===d)&&(r=d)),!c||h!==r||vze)return isNaN(h*r)||""===r?yze.call(this,e,t,h,r,p,o||KDe.stringFilter,l):(d=new Uze(this._pt,e,t,+h||0,r-(h||0),"boolean"==typeof u?Rze:Oze,0,p),l&&(d.fp=l),a&&d.modifier(a,this,e),this._pt=d)},wze=function(e,t,n,r,s,i){var a,o,l,c;if(ILe[e]&&!1!==(a=new ILe[e]).init(s,a.rawVars?t[e]:function(e,t,n,r,s){if(aLe(e)&&(e=_ze(e,s,t,n,r)),!cLe(e)||e.style&&e.nodeType||mLe(e)||pLe(e))return iLe(e)?_ze(e,s,t,n,r):e;var i,a={};for(i in e)a[i]=_ze(e[i],s,t,n,r);return a}(t[e],r,s,i,n),n,r,i)&&(n._pt=o=new Uze(n._pt,s,e,0,1,a.render,a,0,a.priority),n!==MDe))for(l=n._ptLookup[n._targets.indexOf(s)],c=a._props.length;c--;)l[a._props[c]]=o;return a},jze=function e(t,n,r){var s,i,a,o,l,c,d,u,h,p,m,f,g,x=t.vars,v=x.ease,y=x.startAt,b=x.immediateRender,w=x.lazy,j=x.onUpdate,N=x.runBackwards,_=x.yoyoEase,S=x.keyframes,M=x.autoRevert,C=t._dur,E=t._startAt,k=t._targets,A=t.parent,T=A&&"nested"===A.data?A.vars.targets:k,P="auto"===t._overwrite&&!xDe,O=t.timeline;if(O&&(!S||!v)&&(v="none"),t._ease=cze(v,YDe.ease),t._yEase=_?oze(cze(!0===_?v:_,YDe.ease)):0,_&&t._yoyo&&!t._repeat&&(_=t._yEase,t._yEase=t._ease,t._ease=_),t._from=!O&&!!x.runBackwards,!O||S&&!x.stagger){if(f=(u=k[0]?ULe(k[0]).harness:0)&&x[u.prop],s=nFe(x,PLe),E&&(E._zTime<0&&E.progress(1),n<0&&N&&b&&!M?E.render(-1,!0):E.revert(N&&C?ALe:kLe),E._lazy=0),y){if(aFe(t._startAt=Cze.set(k,QLe({data:"isStart",overwrite:!1,parent:A,immediateRender:!0,lazy:!E&&dLe(w),startAt:null,delay:0,onUpdate:j&&function(){return VFe(t,"onUpdate")},stagger:0},y))),t._startAt._dp=0,t._startAt._sat=t,n<0&&(vDe||!b&&!M)&&t._startAt.revert(ALe),b&&C&&n<=0&&r<=0)return void(n&&(t._zTime=n))}else if(N&&C&&!E)if(n&&(b=!1),a=QLe({overwrite:!1,data:"isFromStart",lazy:b&&!E&&dLe(w),immediateRender:b,stagger:0,parent:A},s),f&&(a[u.prop]=f),aFe(t._startAt=Cze.set(k,a)),t._startAt._dp=0,t._startAt._sat=t,n<0&&(vDe?t._startAt.revert(ALe):t._startAt.render(-1,!0)),t._zTime=n,b){if(!n)return}else e(t._startAt,JDe,JDe);for(t._pt=t._ptCache=0,w=C&&dLe(w)||w&&!C,i=0;i<k.length;i++){if(d=(l=k[i])._gsap||BLe(k)[i]._gsap,t._ptLookup[i]=p={},RLe[d.id]&&OLe.length&&XLe(),m=T===k?i:T.indexOf(l),u&&!1!==(h=new u).init(l,f||s,t,m,T)&&(t._pt=o=new Uze(t._pt,l,h.name,0,1,h.render,h,0,h.priority),h._props.forEach(function(e){p[e]=o}),h.priority&&(c=1)),!u||f)for(a in s)ILe[a]&&(h=wze(a,s,t,m,l,T))?h.priority&&(c=1):p[a]=o=bze.call(t,l,a,"get",s[a],m,T,0,x.stringFilter);t._op&&t._op[i]&&t.kill(l,t._op[i]),P&&t._pt&&(xze=t,bDe.killTweensOf(l,p,t.globalTime(n)),g=!t.parent,xze=0),t._pt&&w&&(RLe[d.id]=1)}c&&Bze(t),t._onInit&&t._onInit(t)}t._onUpdate=j,t._initted=(!t._op||t._pt)&&!g,S&&n<=0&&O.render(ZDe,!0,!0)},Nze=function(e,t,n,r){var s,i,a=t.ease||r||"power1.inOut";if(mLe(t))i=n[e]||(n[e]=[]),t.forEach(function(e,n){return i.push({t:n/(t.length-1)*100,v:e,e:a})});else for(s in t)i=n[s]||(n[s]=[]),"ease"===s||i.push({t:parseFloat(e),v:t[s],e:a})},_ze=function(e,t,n,r,s){return aLe(e)?e.call(t,n,r,s):iLe(e)&&~e.indexOf("random(")?zFe(e):e},Sze=zLe+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",Mze={};HLe(Sze+",id,stagger,delay,duration,paused,scrollTrigger",function(e){return Mze[e]=1});var Cze=function(e){function t(t,n,r,s){var i;"number"==typeof n&&(r.duration=n,n=r,r=null);var a,o,l,c,d,u,h,p,m=(i=e.call(this,s?n:rFe(n))||this).vars,f=m.duration,g=m.delay,x=m.immediateRender,v=m.stagger,y=m.overwrite,b=m.keyframes,w=m.defaults,j=m.scrollTrigger,N=m.yoyoEase,_=n.parent||bDe,S=(mLe(t)||pLe(t)?oLe(t[0]):"length"in n)?[t]:TFe(t);if(i._targets=S.length?BLe(S):MLe(0,!KDe.nullTargetWarn)||[],i._ptLookup=[],i._overwrite=y,b||v||hLe(f)||hLe(g)){if(n=i.vars,(a=i.timeline=new gze({data:"nested",defaults:w||{},targets:_&&"nested"===_.data?_.vars.targets:S})).kill(),a.parent=a._dp=fDe(i),a._start=0,v||hLe(f)||hLe(g)){if(c=S.length,h=v&&RFe(v),cLe(v))for(d in v)~Sze.indexOf(d)&&(p||(p={}),p[d]=v[d]);for(o=0;o<c;o++)(l=nFe(n,Mze)).stagger=0,N&&(l.yoyoEase=N),p&&eFe(l,p),u=S[o],l.duration=+_ze(f,fDe(i),o,u,S),l.delay=(+_ze(g,fDe(i),o,u,S)||0)-i._delay,!v&&1===c&&l.delay&&(i._delay=g=l.delay,i._start+=g,l.delay=0),a.to(u,l,h?h(o,u,S):0),a._ease=rze.none;a.duration()?f=g=0:i.timeline=0}else if(b){rFe(QLe(a.vars.defaults,{ease:"none"})),a._ease=cze(b.ease||n.ease||"none");var M,C,E,k=0;if(mLe(b))b.forEach(function(e){return a.to(S,e,">")}),a.duration();else{for(d in l={},b)"ease"===d||"easeEach"===d||Nze(d,b[d],l,b.easeEach);for(d in l)for(M=l[d].sort(function(e,t){return e.t-t.t}),k=0,o=0;o<M.length;o++)(E={ease:(C=M[o]).e,duration:(C.t-(o?M[o-1].t:0))/100*f})[d]=C.v,a.to(S,E,k),k+=E.duration;a.duration()<f&&a.to({},{duration:f-a.duration()})}}f||i.duration(f=a.duration())}else i.timeline=0;return!0!==y||xDe||(xze=fDe(i),bDe.killTweensOf(S),xze=0),gFe(_,fDe(i),r),n.reversed&&i.reverse(),n.paused&&i.paused(!0),(x||!f&&!b&&i._start===$Le(_._time)&&dLe(x)&&cFe(fDe(i))&&"nested"!==_.data)&&(i._tTime=-1e-8,i.render(Math.max(0,-g)||0)),j&&xFe(fDe(i),j),i}gDe(t,e);var n=t.prototype;return n.render=function(e,t,n){var r,s,i,a,o,l,c,d,u,h=this._time,p=this._tDur,m=this._dur,f=e<0,g=e>p-JDe&&!f?p:e<JDe?0:e;if(m){if(g!==this._tTime||!e||n||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==f||this._lazy){if(r=g,d=this.timeline,this._repeat){if(a=m+this._rDelay,this._repeat<-1&&f)return this.totalTime(100*a+e,t,n);if(r=$Le(g%a),g===p?(i=this._repeat,r=m):(i=~~(o=$Le(g/a)))&&i===o?(r=m,i--):r>m&&(r=m),(l=this._yoyo&&1&i)&&(u=this._yEase,r=m-r),o=uFe(this._tTime,a),r===h&&!n&&this._initted&&i===o)return this._tTime=g,this;i!==o&&(d&&this._yEase&&lze(d,l),this.vars.repeatRefresh&&!l&&!this._lock&&r!==a&&this._initted&&(this._lock=n=1,this.render($Le(a*i),!0).invalidate()._lock=0))}if(!this._initted){if(vFe(this,f?e:r,n,t,g))return this._tTime=0,this;if(!(h===this._time||n&&this.vars.repeatRefresh&&i!==o))return this;if(m!==this._dur)return this.render(e,t,n)}if(this._tTime=g,this._time=r,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=c=(u||this._ease)(r/m),this._from&&(this.ratio=c=1-c),!h&&g&&!t&&!o&&(VFe(this,"onStart"),this._tTime!==g))return this;for(s=this._pt;s;)s.r(c,s.d),s=s._next;d&&d.render(e<0?e:d._dur*d._ease(r/this._dur),t,n)||this._startAt&&(this._zTime=e),this._onUpdate&&!t&&(f&&lFe(this,e,0,n),VFe(this,"onUpdate")),this._repeat&&i!==o&&this.vars.onRepeat&&!t&&this.parent&&VFe(this,"onRepeat"),g!==this._tDur&&g||this._tTime!==g||(f&&!this._onUpdate&&lFe(this,e,0,!0),(e||!m)&&(g===this._tDur&&this._ts>0||!g&&this._ts<0)&&aFe(this,1),t||f&&!h||!(g||h||l)||(VFe(this,g===p?"onComplete":"onReverseComplete",!0),this._prom&&!(g<p&&this.timeScale()>0)&&this._prom()))}}else!function(e,t,n,r){var s,i,a,o=e.ratio,l=t<0||!t&&(!e._start&&yFe(e)&&(e._initted||!bFe(e))||(e._ts<0||e._dp._ts<0)&&!bFe(e))?0:1,c=e._rDelay,d=0;if(c&&e._repeat&&(d=CFe(0,e._tDur,t),i=uFe(d,c),e._yoyo&&1&i&&(l=1-l),i!==uFe(e._tTime,c)&&(o=1-l,e.vars.repeatRefresh&&e._initted&&e.invalidate())),l!==o||vDe||r||e._zTime===JDe||!t&&e._zTime){if(!e._initted&&vFe(e,t,r,n,d))return;for(a=e._zTime,e._zTime=t||(n?JDe:0),n||(n=t&&!a),e.ratio=l,e._from&&(l=1-l),e._time=0,e._tTime=d,s=e._pt;s;)s.r(l,s.d),s=s._next;t<0&&lFe(e,t,0,!0),e._onUpdate&&!n&&VFe(e,"onUpdate"),d&&e._repeat&&!n&&e.parent&&VFe(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===l&&(l&&aFe(e,1),n||vDe||(VFe(e,l?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)}(this,e,t,n);return this},n.targets=function(){return this._targets},n.invalidate=function(t){return(!t||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(t),e.prototype.invalidate.call(this,t)},n.resetTo=function(e,t,n,r,s){CDe||tze.wake(),this._ts||this.play();var i=Math.min(this._dur,(this._dp._time-this._start)*this._ts);return this._initted||jze(this,i),function(e,t,n,r,s,i,a,o){var l,c,d,u,h=(e._pt&&e._ptCache||(e._ptCache={}))[t];if(!h)for(h=e._ptCache[t]=[],d=e._ptLookup,u=e._targets.length;u--;){if((l=d[u][t])&&l.d&&l.d._pt)for(l=l.d._pt;l&&l.p!==t&&l.fp!==t;)l=l._next;if(!l)return vze=1,e.vars[t]="+=0",jze(e,a),vze=0,o?MLe():1;h.push(l)}for(u=h.length;u--;)(l=(c=h[u])._pt||c).s=!r&&0!==r||s?l.s+(r||0)+i*l.c:r,l.c=n-l.s,c.e&&(c.e=WLe(n)+EFe(c.e)),c.b&&(c.b=l.s+EFe(c.b))}(this,e,t,n,r,this._ease(i/this._dur),i,s)?this.resetTo(e,t,n,r,1):(mFe(this,0),this.parent||sFe(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},n.kill=function(e,t){if(void 0===t&&(t="all"),!(e||t&&"all"!==t))return this._lazy=this._pt=0,this.parent?HFe(this):this.scrollTrigger&&this.scrollTrigger.kill(!!vDe),this;if(this.timeline){var n=this.timeline.totalDuration();return this.timeline.killTweensOf(e,t,xze&&!0!==xze.vars.overwrite)._first||HFe(this),this.parent&&n!==this.timeline.totalDuration()&&wFe(this,this._dur*this.timeline._tDur/n,0,1),this}var r,s,i,a,o,l,c,d=this._targets,u=e?TFe(e):d,h=this._ptLookup,p=this._pt;if((!t||"all"===t)&&function(e,t){for(var n=e.length,r=n===t.length;r&&n--&&e[n]===t[n];);return n<0}(d,u))return"all"===t&&(this._pt=0),HFe(this);for(r=this._op=this._op||[],"all"!==t&&(iLe(t)&&(o={},HLe(t,function(e){return o[e]=1}),t=o),t=function(e,t){var n,r,s,i,a=e[0]?ULe(e[0]).harness:0,o=a&&a.aliases;if(!o)return t;for(r in n=eFe({},t),o)if(r in n)for(s=(i=o[r].split(",")).length;s--;)n[i[s]]=n[r];return n}(d,t)),c=d.length;c--;)if(~u.indexOf(d[c]))for(o in s=h[c],"all"===t?(r[c]=t,a=s,i={}):(i=r[c]=r[c]||{},a=t),a)(l=s&&s[o])&&("kill"in l.d&&!0!==l.d.kill(o)||iFe(this,l,"_pt"),delete s[o]),"all"!==i&&(i[o]=1);return this._initted&&!this._pt&&p&&HFe(this),this},t.to=function(e,n){return new t(e,n,arguments[2])},t.from=function(e,t){return SFe(1,arguments)},t.delayedCall=function(e,n,r,s){return new t(n,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:e,onComplete:n,onReverseComplete:n,onCompleteParams:r,onReverseCompleteParams:r,callbackScope:s})},t.fromTo=function(e,t,n){return SFe(2,arguments)},t.set=function(e,n){return n.duration=0,n.repeatDelay||(n.repeat=0),new t(e,n)},t.killTweensOf=function(e,t,n){return bDe.killTweensOf(e,t,n)},t}(fze);QLe(Cze.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),HLe("staggerTo,staggerFrom,staggerFromTo",function(e){Cze[e]=function(){var t=new gze,n=kFe.call(arguments,0);return n.splice("staggerFromTo"===e?5:4,0,0),t[e].apply(t,n)}});var Eze=function(e,t,n){return e[t]=n},kze=function(e,t,n){return e[t](n)},Aze=function(e,t,n,r){return e[t](r.fp,n)},Tze=function(e,t,n){return e.setAttribute(t,n)},Pze=function(e,t){return aLe(e[t])?kze:lLe(e[t])&&e.setAttribute?Tze:Eze},Oze=function(e,t){return t.set(t.t,t.p,Math.round(1e6*(t.s+t.c*e))/1e6,t)},Rze=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},Ize=function(e,t){var n=t._pt,r="";if(!e&&t.b)r=t.b;else if(1===e&&t.e)r=t.e;else{for(;n;)r=n.p+(n.m?n.m(n.s+n.c*e):Math.round(1e4*(n.s+n.c*e))/1e4)+r,n=n._next;r+=t.c}t.set(t.t,t.p,r,t)},Dze=function(e,t){for(var n=t._pt;n;)n.r(e,n.d),n=n._next},Lze=function(e,t,n,r){for(var s,i=this._pt;i;)s=i._next,i.p===r&&i.modifier(e,t,n),i=s},Fze=function(e){for(var t,n,r=this._pt;r;)n=r._next,r.p===e&&!r.op||r.op===e?iFe(this,r,"_pt"):r.dep||(t=1),r=n;return!t},zze=function(e,t,n,r){r.mSet(e,t,r.m.call(r.tween,n,r.mt),r)},Bze=function(e){for(var t,n,r,s,i=e._pt;i;){for(t=i._next,n=r;n&&n.pr>i.pr;)n=n._next;(i._prev=n?n._prev:s)?i._prev._next=i:r=i,(i._next=n)?n._prev=i:s=i,i=t}e._pt=r},Uze=function(){function e(e,t,n,r,s,i,a,o,l){this.t=t,this.s=r,this.c=s,this.p=n,this.r=i||Oze,this.d=a||this,this.set=o||Eze,this.pr=l||0,this._next=e,e&&(e._prev=this)}return e.prototype.modifier=function(e,t,n){this.mSet=this.mSet||this.set,this.set=zze,this.m=e,this.mt=n,this.tween=t},e}();HLe(zLe+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(e){return PLe[e]=1}),jLe.TweenMax=jLe.TweenLite=Cze,jLe.TimelineLite=jLe.TimelineMax=gze,bDe=new gze({sortChildren:!1,defaults:YDe,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),KDe.stringFilter=eze;var Vze=[],Hze={},Wze=[],$ze=0,Gze=0,qze=function(e){return(Hze[e]||Wze).map(function(e){return e()})},Xze=function(){var e=Date.now(),t=[];e-$ze>2&&(qze("matchMediaInit"),Vze.forEach(function(e){var n,r,s,i,a=e.queries,o=e.conditions;for(r in a)(n=wDe.matchMedia(a[r]).matches)&&(s=1),n!==o[r]&&(o[r]=n,i=1);i&&(e.revert(),s&&t.push(e))}),qze("matchMediaRevert"),t.forEach(function(e){return e.onMatch(e,function(t){return e.add(null,t)})}),$ze=e,qze("matchMedia"))},Kze=function(){function e(e,t){this.selector=t&&PFe(t),this.data=[],this._r=[],this.isReverted=!1,this.id=Gze++,e&&this.add(e)}var t=e.prototype;return t.add=function(e,t,n){aLe(e)&&(n=t,t=e,e=aLe);var r=this,s=function(){var e,s=yDe,i=r.selector;return s&&s!==r&&s.data.push(r),n&&(r.selector=PFe(n)),yDe=r,e=t.apply(r,arguments),aLe(e)&&r._r.push(e),yDe=s,r.selector=i,r.isReverted=!1,e};return r.last=s,e===aLe?s(r,function(e){return r.add(null,e)}):e?r[e]=s:s},t.ignore=function(e){var t=yDe;yDe=null,e(this),yDe=t},t.getTweens=function(){var t=[];return this.data.forEach(function(n){return n instanceof e?t.push.apply(t,n.getTweens()):n instanceof Cze&&!(n.parent&&"nested"===n.parent.data)&&t.push(n)}),t},t.clear=function(){this._r.length=this.data.length=0},t.kill=function(e,t){var n=this;if(e?function(){for(var t,r=n.getTweens(),s=n.data.length;s--;)"isFlip"===(t=n.data[s]).data&&(t.revert(),t.getChildren(!0,!0,!1).forEach(function(e){return r.splice(r.indexOf(e),1)}));for(r.map(function(e){return{g:e._dur||e._delay||e._sat&&!e._sat.vars.immediateRender?e.globalTime(0):-1/0,t:e}}).sort(function(e,t){return t.g-e.g||-1/0}).forEach(function(t){return t.t.revert(e)}),s=n.data.length;s--;)(t=n.data[s])instanceof gze?"nested"!==t.data&&(t.scrollTrigger&&t.scrollTrigger.revert(),t.kill()):!(t instanceof Cze)&&t.revert&&t.revert(e);n._r.forEach(function(t){return t(e,n)}),n.isReverted=!0}():this.data.forEach(function(e){return e.kill&&e.kill()}),this.clear(),t)for(var r=Vze.length;r--;)Vze[r].id===this.id&&Vze.splice(r,1)},t.revert=function(e){this.kill(e||{})},e}(),Yze=function(){function e(e){this.contexts=[],this.scope=e,yDe&&yDe.data.push(this)}var t=e.prototype;return t.add=function(e,t,n){cLe(e)||(e={matches:e});var r,s,i,a=new Kze(0,n||this.scope),o=a.conditions={};for(s in yDe&&!a.selector&&(a.selector=yDe.selector),this.contexts.push(a),t=a.add("onMatch",t),a.queries=e,e)"all"===s?i=1:(r=wDe.matchMedia(e[s]))&&(Vze.indexOf(a)<0&&Vze.push(a),(o[s]=r.matches)&&(i=1),r.addListener?r.addListener(Xze):r.addEventListener("change",Xze));return i&&t(a,function(e){return a.add(null,e)}),this},t.revert=function(e){this.kill(e||{})},t.kill=function(e){this.contexts.forEach(function(t){return t.kill(e,!0)})},e}(),Zze={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach(function(e){return $Fe(e)})},timeline:function(e){return new gze(e)},getTweensOf:function(e,t){return bDe.getTweensOf(e,t)},getProperty:function(e,t,n,r){iLe(e)&&(e=TFe(e)[0]);var s=ULe(e||{}).get,i=n?JLe:ZLe;return"native"===n&&(n=""),e?t?i((ILe[t]&&ILe[t].get||s)(e,t,n,r)):function(t,n,r){return i((ILe[t]&&ILe[t].get||s)(e,t,n,r))}:e},quickSetter:function(e,t,n){if((e=TFe(e)).length>1){var r=e.map(function(e){return eBe.quickSetter(e,t,n)}),s=r.length;return function(e){for(var t=s;t--;)r[t](e)}}e=e[0]||{};var i=ILe[t],a=ULe(e),o=a.harness&&(a.harness.aliases||{})[t]||t,l=i?function(t){var r=new i;MDe._pt=0,r.init(e,n?t+n:t,MDe,0,[e]),r.render(1,r),MDe._pt&&Dze(1,MDe)}:a.set(e,o);return i?l:function(t){return l(e,o,n?t+n:t,a,1)}},quickTo:function(e,t,n){var r,s=eBe.to(e,QLe(((r={})[t]="+=0.1",r.paused=!0,r.stagger=0,r),n||{})),i=function(e,n,r){return s.resetTo(t,e,n,r)};return i.tween=s,i},isTweening:function(e){return bDe.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=cze(e.ease,YDe.ease)),tFe(YDe,e||{})},config:function(e){return tFe(KDe,e||{})},registerEffect:function(e){var t=e.name,n=e.effect,r=e.plugins,s=e.defaults,i=e.extendTimeline;(r||"").split(",").forEach(function(e){return e&&!ILe[e]&&!jLe[e]&&MLe()}),DLe[t]=function(e,t,r){return n(TFe(e),QLe(t||{},s),r)},i&&(gze.prototype[t]=function(e,n,r){return this.add(DLe[t](e,cLe(n)?n:(r=n)&&{},this),r)})},registerEase:function(e,t){rze[e]=cze(t)},parseEase:function(e,t){return arguments.length?cze(e,t):rze},getById:function(e){return bDe.getById(e)},exportRoot:function(e,t){void 0===e&&(e={});var n,r,s=new gze(e);for(s.smoothChildTiming=dLe(e.smoothChildTiming),bDe.remove(s),s._dp=0,s._time=s._tTime=bDe._time,n=bDe._first;n;)r=n._next,!t&&!n._dur&&n instanceof Cze&&n.vars.onComplete===n._targets[0]||gFe(s,n,n._start-n._delay),n=r;return gFe(bDe,s,0),s},context:function(e,t){return e?new Kze(e,t):yDe},matchMedia:function(e){return new Yze(e)},matchMediaRefresh:function(){return Vze.forEach(function(e){var t,n,r=e.conditions;for(n in r)r[n]&&(r[n]=!1,t=1);t&&e.revert()})||Xze()},addEventListener:function(e,t){var n=Hze[e]||(Hze[e]=[]);~n.indexOf(t)||n.push(t)},removeEventListener:function(e,t){var n=Hze[e],r=n&&n.indexOf(t);r>=0&&n.splice(r,1)},utils:{wrap:function e(t,n,r){var s=n-t;return mLe(t)?FFe(t,e(0,t.length),n):MFe(r,function(e){return(s+(e-t)%s)%s+t})},wrapYoyo:function e(t,n,r){var s=n-t,i=2*s;return mLe(t)?FFe(t,e(0,t.length-1),n):MFe(r,function(e){return t+((e=(i+(e-t)%i)%i||0)>s?i-e:e)})},distribute:RFe,random:LFe,snap:DFe,normalize:function(e,t,n){return BFe(e,t,0,1,n)},getUnit:EFe,clamp:function(e,t,n){return MFe(n,function(n){return CFe(e,t,n)})},splitColor:KFe,toArray:TFe,selector:PFe,mapRange:BFe,pipe:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduce(function(e,t){return t(e)},e)}},unitize:function(e,t){return function(n){return e(parseFloat(n))+(t||EFe(n))}},interpolate:function e(t,n,r,s){var i=isNaN(t+n)?0:function(e){return(1-e)*t+e*n};if(!i){var a,o,l,c,d,u=iLe(t),h={};if(!0===r&&(s=1)&&(r=null),u)t={p:t},n={p:n};else if(mLe(t)&&!mLe(n)){for(l=[],c=t.length,d=c-2,o=1;o<c;o++)l.push(e(t[o-1],t[o]));c--,i=function(e){e*=c;var t=Math.min(d,~~e);return l[t](e-t)},r=n}else s||(t=eFe(mLe(t)?[]:{},t));if(!l){for(a in n)bze.call(h,t,a,"get",n[a]);i=function(e){return Dze(e,h)||(u?t.p:t)}}}return MFe(r,i)},shuffle:OFe},install:_Le,effects:DLe,ticker:tze,updateRoot:gze.updateRoot,plugins:ILe,globalTimeline:bDe,core:{PropTween:Uze,globals:CLe,Tween:Cze,Timeline:gze,Animation:fze,getCache:ULe,_removeLinkedListItem:iFe,reverting:function(){return vDe},context:function(e){return e&&yDe&&(yDe.data.push(e),e._ctx=yDe),yDe},suppressOverwrites:function(e){return xDe=e}}};HLe("to,from,fromTo,delayedCall,set,killTweensOf",function(e){return Zze[e]=Cze[e]}),tze.add(gze.updateRoot),MDe=Zze.to({},{duration:0});var Jze=function(e,t){for(var n=e._pt;n&&n.p!==t&&n.op!==t&&n.fp!==t;)n=n._next;return n},Qze=function(e,t){return{name:e,headless:1,rawVars:1,init:function(e,n,r){r._onInit=function(e){var r,s;if(iLe(n)&&(r={},HLe(n,function(e){return r[e]=1}),n=r),t){for(s in r={},n)r[s]=t(n[s]);n=r}!function(e,t){var n,r,s,i=e._targets;for(n in t)for(r=i.length;r--;)(s=e._ptLookup[r][n])&&(s=s.d)&&(s._pt&&(s=Jze(s,n)),s&&s.modifier&&s.modifier(t[n],e,i[r],n))}(e,n)}}}},eBe=Zze.registerPlugin({name:"attr",init:function(e,t,n,r,s){var i,a,o;for(i in this.tween=n,t)o=e.getAttribute(i)||"",(a=this.add(e,"setAttribute",(o||0)+"",t[i],r,s,0,0,i)).op=i,a.b=o,this._props.push(i)},render:function(e,t){for(var n=t._pt;n;)vDe?n.set(n.t,n.p,n.b,n):n.r(e,n.d),n=n._next}},{name:"endArray",headless:1,init:function(e,t){for(var n=t.length;n--;)this.add(e,n,e[n]||0,t[n],0,0,0,0,0,1)}},Qze("roundProps",IFe),Qze("modifiers"),Qze("snap",DFe))||Zze;Cze.version=gze.version=eBe.version="3.13.0",_De=1,uLe()&&nze();
/*!
 * CSSPlugin 3.13.0
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/
var tBe,nBe,rBe,sBe,iBe,aBe,oBe,lBe,cBe={},dBe=180/Math.PI,uBe=Math.PI/180,hBe=Math.atan2,pBe=/([A-Z])/g,mBe=/(left|right|width|margin|padding|x)/i,fBe=/[\s,\(]\S/,gBe={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},xBe=function(e,t){return t.set(t.t,t.p,Math.round(1e4*(t.s+t.c*e))/1e4+t.u,t)},vBe=function(e,t){return t.set(t.t,t.p,1===e?t.e:Math.round(1e4*(t.s+t.c*e))/1e4+t.u,t)},yBe=function(e,t){return t.set(t.t,t.p,e?Math.round(1e4*(t.s+t.c*e))/1e4+t.u:t.b,t)},bBe=function(e,t){var n=t.s+t.c*e;t.set(t.t,t.p,~~(n+(n<0?-.5:.5))+t.u,t)},wBe=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},jBe=function(e,t){return t.set(t.t,t.p,1!==e?t.b:t.e,t)},NBe=function(e,t,n){return e.style[t]=n},_Be=function(e,t,n){return e.style.setProperty(t,n)},SBe=function(e,t,n){return e._gsap[t]=n},MBe=function(e,t,n){return e._gsap.scaleX=e._gsap.scaleY=n},CBe=function(e,t,n,r,s){var i=e._gsap;i.scaleX=i.scaleY=n,i.renderTransform(s,i)},EBe=function(e,t,n,r,s){var i=e._gsap;i[t]=n,i.renderTransform(s,i)},kBe="transform",ABe=kBe+"Origin",TBe=function e(t,n){var r=this,s=this.target,i=s.style,a=s._gsap;if(t in cBe&&i){if(this.tfm=this.tfm||{},"transform"===t)return gBe.transform.split(",").forEach(function(t){return e.call(r,t,n)});if(~(t=gBe[t]||t).indexOf(",")?t.split(",").forEach(function(e){return r.tfm[e]=KBe(s,e)}):this.tfm[t]=a.x?a[t]:KBe(s,t),t===ABe&&(this.tfm.zOrigin=a.zOrigin),this.props.indexOf(kBe)>=0)return;a.svg&&(this.svgo=s.getAttribute("data-svg-origin"),this.props.push(ABe,n,"")),t=kBe}(i||n)&&this.props.push(t,n,i[t])},PBe=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},OBe=function(){var e,t,n=this.props,r=this.target,s=r.style,i=r._gsap;for(e=0;e<n.length;e+=3)n[e+1]?2===n[e+1]?r[n[e]](n[e+2]):r[n[e]]=n[e+2]:n[e+2]?s[n[e]]=n[e+2]:s.removeProperty("--"===n[e].substr(0,2)?n[e]:n[e].replace(pBe,"-$1").toLowerCase());if(this.tfm){for(t in this.tfm)i[t]=this.tfm[t];i.svg&&(i.renderTransform(),r.setAttribute("data-svg-origin",this.svgo||"")),(e=oBe())&&e.isStart||s[kBe]||(PBe(s),i.zOrigin&&s[ABe]&&(s[ABe]+=" "+i.zOrigin+"px",i.zOrigin=0,i.renderTransform()),i.uncache=1)}},RBe=function(e,t){var n={target:e,props:[],revert:OBe,save:TBe};return e._gsap||eBe.core.getCache(e),t&&e.style&&e.nodeType&&t.split(",").forEach(function(e){return n.save(e)}),n},IBe=function(e,t){var n=nBe.createElementNS?nBe.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):nBe.createElement(e);return n&&n.style?n:nBe.createElement(e)},DBe=function e(t,n,r){var s=getComputedStyle(t);return s[n]||s.getPropertyValue(n.replace(pBe,"-$1").toLowerCase())||s.getPropertyValue(n)||!r&&e(t,FBe(n)||n,1)||""},LBe="O,Moz,ms,Ms,Webkit".split(","),FBe=function(e,t,n){var r=(t||iBe).style,s=5;if(e in r&&!n)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);s--&&!(LBe[s]+e in r););return s<0?null:(3===s?"ms":s>=0?LBe[s]:"")+e},zBe=function(){"undefined"!=typeof window&&window.document&&(tBe=window,nBe=tBe.document,rBe=nBe.documentElement,iBe=IBe("div")||{style:{}},IBe("div"),kBe=FBe(kBe),ABe=kBe+"Origin",iBe.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",lBe=!!FBe("perspective"),oBe=eBe.core.reverting,sBe=1)},BBe=function(e){var t,n=e.ownerSVGElement,r=IBe("svg",n&&n.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),s=e.cloneNode(!0);s.style.display="block",r.appendChild(s),rBe.appendChild(r);try{t=s.getBBox()}catch(i){}return r.removeChild(s),rBe.removeChild(r),t},UBe=function(e,t){for(var n=t.length;n--;)if(e.hasAttribute(t[n]))return e.getAttribute(t[n])},VBe=function(e){var t,n;try{t=e.getBBox()}catch(r){t=BBe(e),n=1}return t&&(t.width||t.height)||n||(t=BBe(e)),!t||t.width||t.x||t.y?t:{x:+UBe(e,["x","cx","x1"])||0,y:+UBe(e,["y","cy","y1"])||0,width:0,height:0}},HBe=function(e){return!(!e.getCTM||e.parentNode&&!e.ownerSVGElement||!VBe(e))},WBe=function(e,t){if(t){var n,r=e.style;t in cBe&&t!==ABe&&(t=kBe),r.removeProperty?("ms"!==(n=t.substr(0,2))&&"webkit"!==t.substr(0,6)||(t="-"+t),r.removeProperty("--"===n?t:t.replace(pBe,"-$1").toLowerCase())):r.removeAttribute(t)}},$Be=function(e,t,n,r,s,i){var a=new Uze(e._pt,t,n,0,1,i?jBe:wBe);return e._pt=a,a.b=r,a.e=s,e._props.push(n),a},GBe={deg:1,rad:1,turn:1},qBe={grid:1,flex:1},XBe=function e(t,n,r,s){var i,a,o,l,c=parseFloat(r)||0,d=(r+"").trim().substr((c+"").length)||"px",u=iBe.style,h=mBe.test(n),p="svg"===t.tagName.toLowerCase(),m=(p?"client":"offset")+(h?"Width":"Height"),f=100,g="px"===s,x="%"===s;if(s===d||!c||GBe[s]||GBe[d])return c;if("px"!==d&&!g&&(c=e(t,n,r,"px")),l=t.getCTM&&HBe(t),(x||"%"===d)&&(cBe[n]||~n.indexOf("adius")))return i=l?t.getBBox()[h?"width":"height"]:t[m],WLe(x?c/i*f:c/100*i);if(u[h?"width":"height"]=f+(g?d:s),a="rem"!==s&&~n.indexOf("adius")||"em"===s&&t.appendChild&&!p?t:t.parentNode,l&&(a=(t.ownerSVGElement||{}).parentNode),a&&a!==nBe&&a.appendChild||(a=nBe.body),(o=a._gsap)&&x&&o.width&&h&&o.time===tze.time&&!o.uncache)return WLe(c/o.width*f);if(!x||"height"!==n&&"width"!==n)(x||"%"===d)&&!qBe[DBe(a,"display")]&&(u.position=DBe(t,"position")),a===t&&(u.position="static"),a.appendChild(iBe),i=iBe[m],a.removeChild(iBe),u.position="absolute";else{var v=t.style[n];t.style[n]=f+s,i=t[m],v?t.style[n]=v:WBe(t,n)}return h&&x&&((o=ULe(a)).time=tze.time,o.width=a[m]),WLe(g?i*c/f:i&&c?f/i*c:0)},KBe=function(e,t,n,r){var s;return sBe||zBe(),t in gBe&&"transform"!==t&&~(t=gBe[t]).indexOf(",")&&(t=t.split(",")[0]),cBe[t]&&"transform"!==t?(s=oUe(e,r),s="transformOrigin"!==t?s[t]:s.svg?s.origin:lUe(DBe(e,ABe))+" "+s.zOrigin+"px"):(!(s=e.style[t])||"auto"===s||r||~(s+"").indexOf("calc("))&&(s=eUe[t]&&eUe[t](e,t,n)||DBe(e,t)||VLe(e,t)||("opacity"===t?1:0)),n&&!~(s+"").trim().indexOf(" ")?XBe(e,t,s,n)+n:s},YBe=function(e,t,n,r){if(!n||"none"===n){var s=FBe(t,e,1),i=s&&DBe(e,s,1);i&&i!==n?(t=s,n=i):"borderColor"===t&&(n=DBe(e,"borderTopColor"))}var a,o,l,c,d,u,h,p,m,f,g,x=new Uze(this._pt,e.style,t,0,1,Ize),v=0,y=0;if(x.b=n,x.e=r,n+="","var(--"===(r+="").substring(0,6)&&(r=DBe(e,r.substring(4,r.indexOf(")")))),"auto"===r&&(u=e.style[t],e.style[t]=r,r=DBe(e,t)||r,u?e.style[t]=u:WBe(e,t)),eze(a=[n,r]),r=a[1],l=(n=a[0]).match(xLe)||[],(r.match(xLe)||[]).length){for(;o=xLe.exec(r);)h=o[0],m=r.substring(v,o.index),d?d=(d+1)%5:"rgba("!==m.substr(-5)&&"hsla("!==m.substr(-5)||(d=1),h!==(u=l[y++]||"")&&(c=parseFloat(u)||0,g=u.substr((c+"").length),"="===h.charAt(1)&&(h=GLe(c,h)+g),p=parseFloat(h),f=h.substr((p+"").length),v=xLe.lastIndex-f.length,f||(f=f||KDe.units[t]||g,v===r.length&&(r+=f,x.e+=f)),g!==f&&(c=XBe(e,t,u,f)||0),x._pt={_next:x._pt,p:m||1===y?m:",",s:c,c:p-c,m:d&&d<4||"zIndex"===t?Math.round:0});x.c=v<r.length?r.substring(v,r.length):""}else x.r="display"===t&&"none"===r?jBe:wBe;return yLe.test(r)&&(x.e=0),this._pt=x,x},ZBe={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},JBe=function(e){var t=e.split(" "),n=t[0],r=t[1]||"50%";return"top"!==n&&"bottom"!==n&&"left"!==r&&"right"!==r||(e=n,n=r,r=e),t[0]=ZBe[n]||n,t[1]=ZBe[r]||r,t.join(" ")},QBe=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var n,r,s,i=t.t,a=i.style,o=t.u,l=i._gsap;if("all"===o||!0===o)a.cssText="",r=1;else for(s=(o=o.split(",")).length;--s>-1;)n=o[s],cBe[n]&&(r=1,n="transformOrigin"===n?ABe:kBe),WBe(i,n);r&&(WBe(i,kBe),l&&(l.svg&&i.removeAttribute("transform"),a.scale=a.rotate=a.translate="none",oUe(i,1),l.uncache=1,PBe(a)))}},eUe={clearProps:function(e,t,n,r,s){if("isFromStart"!==s.data){var i=e._pt=new Uze(e._pt,t,n,0,0,QBe);return i.u=r,i.pr=-10,i.tween=s,e._props.push(n),1}}},tUe=[1,0,0,1,0,0],nUe={},rUe=function(e){return"matrix(1, 0, 0, 1, 0, 0)"===e||"none"===e||!e},sUe=function(e){var t=DBe(e,kBe);return rUe(t)?tUe:t.substr(7).match(gLe).map(WLe)},iUe=function(e,t){var n,r,s,i,a=e._gsap||ULe(e),o=e.style,l=sUe(e);return a.svg&&e.getAttribute("transform")?"1,0,0,1,0,0"===(l=[(s=e.transform.baseVal.consolidate().matrix).a,s.b,s.c,s.d,s.e,s.f]).join(",")?tUe:l:(l!==tUe||e.offsetParent||e===rBe||a.svg||(s=o.display,o.display="block",(n=e.parentNode)&&(e.offsetParent||e.getBoundingClientRect().width)||(i=1,r=e.nextElementSibling,rBe.appendChild(e)),l=sUe(e),s?o.display=s:WBe(e,"display"),i&&(r?n.insertBefore(e,r):n?n.appendChild(e):rBe.removeChild(e))),t&&l.length>6?[l[0],l[1],l[4],l[5],l[12],l[13]]:l)},aUe=function(e,t,n,r,s,i){var a,o,l,c=e._gsap,d=s||iUe(e,!0),u=c.xOrigin||0,h=c.yOrigin||0,p=c.xOffset||0,m=c.yOffset||0,f=d[0],g=d[1],x=d[2],v=d[3],y=d[4],b=d[5],w=t.split(" "),j=parseFloat(w[0])||0,N=parseFloat(w[1])||0;n?d!==tUe&&(o=f*v-g*x)&&(l=j*(-g/o)+N*(f/o)-(f*b-g*y)/o,j=j*(v/o)+N*(-x/o)+(x*b-v*y)/o,N=l):(j=(a=VBe(e)).x+(~w[0].indexOf("%")?j/100*a.width:j),N=a.y+(~(w[1]||w[0]).indexOf("%")?N/100*a.height:N)),r||!1!==r&&c.smooth?(y=j-u,b=N-h,c.xOffset=p+(y*f+b*x)-y,c.yOffset=m+(y*g+b*v)-b):c.xOffset=c.yOffset=0,c.xOrigin=j,c.yOrigin=N,c.smooth=!!r,c.origin=t,c.originIsAbsolute=!!n,e.style[ABe]="0px 0px",i&&($Be(i,c,"xOrigin",u,j),$Be(i,c,"yOrigin",h,N),$Be(i,c,"xOffset",p,c.xOffset),$Be(i,c,"yOffset",m,c.yOffset)),e.setAttribute("data-svg-origin",j+" "+N)},oUe=function(e,t){var n=e._gsap||new mze(e);if("x"in n&&!t&&!n.uncache)return n;var r,s,i,a,o,l,c,d,u,h,p,m,f,g,x,v,y,b,w,j,N,_,S,M,C,E,k,A,T,P,O,R,I=e.style,D=n.scaleX<0,L="px",F="deg",z=getComputedStyle(e),B=DBe(e,ABe)||"0";return r=s=i=l=c=d=u=h=p=0,a=o=1,n.svg=!(!e.getCTM||!HBe(e)),z.translate&&("none"===z.translate&&"none"===z.scale&&"none"===z.rotate||(I[kBe]=("none"!==z.translate?"translate3d("+(z.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+("none"!==z.rotate?"rotate("+z.rotate+") ":"")+("none"!==z.scale?"scale("+z.scale.split(" ").join(",")+") ":"")+("none"!==z[kBe]?z[kBe]:"")),I.scale=I.rotate=I.translate="none"),g=iUe(e,n.svg),n.svg&&(n.uncache?(C=e.getBBox(),B=n.xOrigin-C.x+"px "+(n.yOrigin-C.y)+"px",M=""):M=!t&&e.getAttribute("data-svg-origin"),aUe(e,M||B,!!M||n.originIsAbsolute,!1!==n.smooth,g)),m=n.xOrigin||0,f=n.yOrigin||0,g!==tUe&&(b=g[0],w=g[1],j=g[2],N=g[3],r=_=g[4],s=S=g[5],6===g.length?(a=Math.sqrt(b*b+w*w),o=Math.sqrt(N*N+j*j),l=b||w?hBe(w,b)*dBe:0,(u=j||N?hBe(j,N)*dBe+l:0)&&(o*=Math.abs(Math.cos(u*uBe))),n.svg&&(r-=m-(m*b+f*j),s-=f-(m*w+f*N))):(R=g[6],P=g[7],k=g[8],A=g[9],T=g[10],O=g[11],r=g[12],s=g[13],i=g[14],c=(x=hBe(R,T))*dBe,x&&(M=_*(v=Math.cos(-x))+k*(y=Math.sin(-x)),C=S*v+A*y,E=R*v+T*y,k=_*-y+k*v,A=S*-y+A*v,T=R*-y+T*v,O=P*-y+O*v,_=M,S=C,R=E),d=(x=hBe(-j,T))*dBe,x&&(v=Math.cos(-x),O=N*(y=Math.sin(-x))+O*v,b=M=b*v-k*y,w=C=w*v-A*y,j=E=j*v-T*y),l=(x=hBe(w,b))*dBe,x&&(M=b*(v=Math.cos(x))+w*(y=Math.sin(x)),C=_*v+S*y,w=w*v-b*y,S=S*v-_*y,b=M,_=C),c&&Math.abs(c)+Math.abs(l)>359.9&&(c=l=0,d=180-d),a=WLe(Math.sqrt(b*b+w*w+j*j)),o=WLe(Math.sqrt(S*S+R*R)),x=hBe(_,S),u=Math.abs(x)>2e-4?x*dBe:0,p=O?1/(O<0?-O:O):0),n.svg&&(M=e.getAttribute("transform"),n.forceCSS=e.setAttribute("transform","")||!rUe(DBe(e,kBe)),M&&e.setAttribute("transform",M))),Math.abs(u)>90&&Math.abs(u)<270&&(D?(a*=-1,u+=l<=0?180:-180,l+=l<=0?180:-180):(o*=-1,u+=u<=0?180:-180)),t=t||n.uncache,n.x=r-((n.xPercent=r&&(!t&&n.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-r)?-50:0)))?e.offsetWidth*n.xPercent/100:0)+L,n.y=s-((n.yPercent=s&&(!t&&n.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-s)?-50:0)))?e.offsetHeight*n.yPercent/100:0)+L,n.z=i+L,n.scaleX=WLe(a),n.scaleY=WLe(o),n.rotation=WLe(l)+F,n.rotationX=WLe(c)+F,n.rotationY=WLe(d)+F,n.skewX=u+F,n.skewY=h+F,n.transformPerspective=p+L,(n.zOrigin=parseFloat(B.split(" ")[2])||!t&&n.zOrigin||0)&&(I[ABe]=lUe(B)),n.xOffset=n.yOffset=0,n.force3D=KDe.force3D,n.renderTransform=n.svg?fUe:lBe?mUe:dUe,n.uncache=0,n},lUe=function(e){return(e=e.split(" "))[0]+" "+e[1]},cUe=function(e,t,n){var r=EFe(t);return WLe(parseFloat(t)+parseFloat(XBe(e,"x",n+"px",r)))+r},dUe=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,mUe(e,t)},uUe="0deg",hUe="0px",pUe=") ",mUe=function(e,t){var n=t||this,r=n.xPercent,s=n.yPercent,i=n.x,a=n.y,o=n.z,l=n.rotation,c=n.rotationY,d=n.rotationX,u=n.skewX,h=n.skewY,p=n.scaleX,m=n.scaleY,f=n.transformPerspective,g=n.force3D,x=n.target,v=n.zOrigin,y="",b="auto"===g&&e&&1!==e||!0===g;if(v&&(d!==uUe||c!==uUe)){var w,j=parseFloat(c)*uBe,N=Math.sin(j),_=Math.cos(j);j=parseFloat(d)*uBe,w=Math.cos(j),i=cUe(x,i,N*w*-v),a=cUe(x,a,-Math.sin(j)*-v),o=cUe(x,o,_*w*-v+v)}f!==hUe&&(y+="perspective("+f+pUe),(r||s)&&(y+="translate("+r+"%, "+s+"%) "),(b||i!==hUe||a!==hUe||o!==hUe)&&(y+=o!==hUe||b?"translate3d("+i+", "+a+", "+o+") ":"translate("+i+", "+a+pUe),l!==uUe&&(y+="rotate("+l+pUe),c!==uUe&&(y+="rotateY("+c+pUe),d!==uUe&&(y+="rotateX("+d+pUe),u===uUe&&h===uUe||(y+="skew("+u+", "+h+pUe),1===p&&1===m||(y+="scale("+p+", "+m+pUe),x.style[kBe]=y||"translate(0, 0)"},fUe=function(e,t){var n,r,s,i,a,o=t||this,l=o.xPercent,c=o.yPercent,d=o.x,u=o.y,h=o.rotation,p=o.skewX,m=o.skewY,f=o.scaleX,g=o.scaleY,x=o.target,v=o.xOrigin,y=o.yOrigin,b=o.xOffset,w=o.yOffset,j=o.forceCSS,N=parseFloat(d),_=parseFloat(u);h=parseFloat(h),p=parseFloat(p),(m=parseFloat(m))&&(p+=m=parseFloat(m),h+=m),h||p?(h*=uBe,p*=uBe,n=Math.cos(h)*f,r=Math.sin(h)*f,s=Math.sin(h-p)*-g,i=Math.cos(h-p)*g,p&&(m*=uBe,a=Math.tan(p-m),s*=a=Math.sqrt(1+a*a),i*=a,m&&(a=Math.tan(m),n*=a=Math.sqrt(1+a*a),r*=a)),n=WLe(n),r=WLe(r),s=WLe(s),i=WLe(i)):(n=f,i=g,r=s=0),(N&&!~(d+"").indexOf("px")||_&&!~(u+"").indexOf("px"))&&(N=XBe(x,"x",d,"px"),_=XBe(x,"y",u,"px")),(v||y||b||w)&&(N=WLe(N+v-(v*n+y*s)+b),_=WLe(_+y-(v*r+y*i)+w)),(l||c)&&(a=x.getBBox(),N=WLe(N+l/100*a.width),_=WLe(_+c/100*a.height)),a="matrix("+n+","+r+","+s+","+i+","+N+","+_+")",x.setAttribute("transform",a),j&&(x.style[kBe]=a)},gUe=function(e,t,n,r,s){var i,a,o=360,l=iLe(s),c=parseFloat(s)*(l&&~s.indexOf("rad")?dBe:1)-r,d=r+c+"deg";return l&&("short"===(i=s.split("_")[1])&&(c%=o)!==c%180&&(c+=c<0?o:-360),"cw"===i&&c<0?c=(c+36e9)%o-~~(c/o)*o:"ccw"===i&&c>0&&(c=(c-36e9)%o-~~(c/o)*o)),e._pt=a=new Uze(e._pt,t,n,r,c,vBe),a.e=d,a.u="deg",e._props.push(n),a},xUe=function(e,t){for(var n in t)e[n]=t[n];return e},vUe=function(e,t,n){var r,s,i,a,o,l,c,d=xUe({},n._gsap),u=n.style;for(s in d.svg?(i=n.getAttribute("transform"),n.setAttribute("transform",""),u[kBe]=t,r=oUe(n,1),WBe(n,kBe),n.setAttribute("transform",i)):(i=getComputedStyle(n)[kBe],u[kBe]=t,r=oUe(n,1),u[kBe]=i),cBe)(i=d[s])!==(a=r[s])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(s)<0&&(o=EFe(i)!==(c=EFe(a))?XBe(n,s,i,c):parseFloat(i),l=parseFloat(a),e._pt=new Uze(e._pt,r,s,o,l-o,xBe),e._pt.u=c||0,e._props.push(s));xUe(r,d)};HLe("padding,margin,Width,Radius",function(e,t){var n="Top",r="Right",s="Bottom",i="Left",a=(t<3?[n,r,s,i]:[n+i,n+r,s+r,s+i]).map(function(n){return t<2?e+n:"border"+n+e});eUe[t>1?"border"+e:e]=function(e,t,n,r,s){var i,o;if(arguments.length<4)return i=a.map(function(t){return KBe(e,t,n)}),5===(o=i.join(" ")).split(i[0]).length?i[0]:o;i=(r+"").split(" "),o={},a.forEach(function(e,t){return o[e]=i[t]=i[t]||i[(t-1)/2|0]}),e.init(t,o,s)}});var yUe,bUe,wUe,jUe={name:"css",register:zBe,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,n,r,s){var i,a,o,l,c,d,u,h,p,m,f,g,x,v,y,b,w=this._props,j=e.style,N=n.vars.startAt;for(u in sBe||zBe(),this.styles=this.styles||RBe(e),b=this.styles.props,this.tween=n,t)if("autoRound"!==u&&(a=t[u],!ILe[u]||!wze(u,t,n,r,e,s)))if(c=typeof a,d=eUe[u],"function"===c&&(c=typeof(a=a.call(n,r,e,s))),"string"===c&&~a.indexOf("random(")&&(a=zFe(a)),d)d(this,e,u,a,n)&&(y=1);else if("--"===u.substr(0,2))i=(getComputedStyle(e).getPropertyValue(u)+"").trim(),a+="",JFe.lastIndex=0,JFe.test(i)||(h=EFe(i),p=EFe(a)),p?h!==p&&(i=XBe(e,u,i,p)+p):h&&(a+=h),this.add(j,"setProperty",i,a,r,s,0,0,u),w.push(u),b.push(u,0,j[u]);else if("undefined"!==c){if(N&&u in N?(i="function"==typeof N[u]?N[u].call(n,r,e,s):N[u],iLe(i)&&~i.indexOf("random(")&&(i=zFe(i)),EFe(i+"")||"auto"===i||(i+=KDe.units[u]||EFe(KBe(e,u))||""),"="===(i+"").charAt(1)&&(i=KBe(e,u))):i=KBe(e,u),l=parseFloat(i),(m="string"===c&&"="===a.charAt(1)&&a.substr(0,2))&&(a=a.substr(2)),o=parseFloat(a),u in gBe&&("autoAlpha"===u&&(1===l&&"hidden"===KBe(e,"visibility")&&o&&(l=0),b.push("visibility",0,j.visibility),$Be(this,j,"visibility",l?"inherit":"hidden",o?"inherit":"hidden",!o)),"scale"!==u&&"transform"!==u&&~(u=gBe[u]).indexOf(",")&&(u=u.split(",")[0])),f=u in cBe)if(this.styles.save(u),"string"===c&&"var(--"===a.substring(0,6)&&(a=DBe(e,a.substring(4,a.indexOf(")"))),o=parseFloat(a)),g||((x=e._gsap).renderTransform&&!t.parseTransform||oUe(e,t.parseTransform),v=!1!==t.smoothOrigin&&x.smooth,(g=this._pt=new Uze(this._pt,j,kBe,0,1,x.renderTransform,x,0,-1)).dep=1),"scale"===u)this._pt=new Uze(this._pt,x,"scaleY",x.scaleY,(m?GLe(x.scaleY,m+o):o)-x.scaleY||0,xBe),this._pt.u=0,w.push("scaleY",u),u+="X";else{if("transformOrigin"===u){b.push(ABe,0,j[ABe]),a=JBe(a),x.svg?aUe(e,a,0,v,0,this):((p=parseFloat(a.split(" ")[2])||0)!==x.zOrigin&&$Be(this,x,"zOrigin",x.zOrigin,p),$Be(this,j,u,lUe(i),lUe(a)));continue}if("svgOrigin"===u){aUe(e,a,1,v,0,this);continue}if(u in nUe){gUe(this,x,u,l,m?GLe(l,m+a):a);continue}if("smoothOrigin"===u){$Be(this,x,"smooth",x.smooth,a);continue}if("force3D"===u){x[u]=a;continue}if("transform"===u){vUe(this,a,e);continue}}else u in j||(u=FBe(u)||u);if(f||(o||0===o)&&(l||0===l)&&!fBe.test(a)&&u in j)o||(o=0),(h=(i+"").substr((l+"").length))!==(p=EFe(a)||(u in KDe.units?KDe.units[u]:h))&&(l=XBe(e,u,i,p)),this._pt=new Uze(this._pt,f?x:j,u,l,(m?GLe(l,m+o):o)-l,f||"px"!==p&&"zIndex"!==u||!1===t.autoRound?xBe:bBe),this._pt.u=p||0,h!==p&&"%"!==p&&(this._pt.b=i,this._pt.r=yBe);else if(u in j)YBe.call(this,e,u,i,m?m+a:a);else if(u in e)this.add(e,u,i||e[u],m?m+a:a,r,s);else if("parseTransform"!==u){SLe();continue}f||(u in j?b.push(u,0,j[u]):"function"==typeof e[u]?b.push(u,2,e[u]()):b.push(u,1,i||e[u])),w.push(u)}y&&Bze(this)},render:function(e,t){if(t.tween._time||!oBe())for(var n=t._pt;n;)n.r(e,n.d),n=n._next;else t.styles.revert()},get:KBe,aliases:gBe,getSetter:function(e,t,n){var r=gBe[t];return r&&r.indexOf(",")<0&&(t=r),t in cBe&&t!==ABe&&(e._gsap.x||KBe(e,"x"))?n&&aBe===n?"scale"===t?MBe:SBe:(aBe=n||{})&&("scale"===t?CBe:EBe):e.style&&!lLe(e.style[t])?NBe:~t.indexOf("-")?_Be:Pze(e,t)},core:{_removeProperty:WBe,_getMatrix:iUe}};eBe.utils.checkPrefix=FBe,eBe.core.getStyleSaver=RBe,wUe=HLe((yUe="x,y,z,scale,scaleX,scaleY,xPercent,yPercent")+","+(bUe="rotation,rotationX,rotationY,skewX,skewY")+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",function(e){cBe[e]=1}),HLe(bUe,function(e){KDe.units[e]="deg",nUe[e]=1}),gBe[wUe[13]]=yUe+","+bUe,HLe("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",function(e){var t=e.split(":");gBe[t[1]]=wUe[t[0]]}),HLe("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(e){KDe.units[e]="px"}),eBe.registerPlugin(jUe);var NUe=eBe.registerPlugin(jUe)||eBe;function _Ue({children:e,href:t,gradient:n,index:r}){const s=hn.useRef(null),[i,a]=hn.useState(!1);return hn.useEffect(()=>{const e=s.current;if(!e)return;const t=()=>{a(!0),NUe.to(e,{scale:1.05,rotationX:-2,z:20,duration:.6,ease:"power3.out"}),NUe.to(e,{textShadow:"0 5px 20px rgba(255,255,255,0.2)",duration:.5,ease:"power3.out"})},n=()=>{a(!1),NUe.to(e,{scale:1,rotationX:0,z:0,duration:.6,ease:"power3.out"}),NUe.to(e,{textShadow:"0 0 0px rgba(255,255,255,0)",duration:.5,ease:"power3.out"})};return e.addEventListener("mouseenter",t),e.addEventListener("mouseleave",n),()=>{e.removeEventListener("mouseenter",t),e.removeEventListener("mouseleave",n)}},[]),Ot.jsx("a",{ref:s,href:t,className:"block mb-2 text-4xl md:text-6xl lg:text-8xl font-black leading-tight cursor-pointer transition-all duration-300 transform-gpu perspective-1000 "+(i?"z-10":""),style:{background:n,WebkitBackgroundClip:"text",backgroundClip:"text",color:"transparent",filter:i?"brightness(1.2) saturate(1.3)":"brightness(1) saturate(1)"},children:e})}function SUe(){const e=hn.useRef(null),t=hn.useRef(null),n=hn.useRef(null),r=hn.useRef(null),s=hn.useRef({x:0,y:0}),i=hn.useRef(null),a=hn.useRef(null),o=hn.useRef(null),l=hn.useRef(0),c=hn.useRef(null),d=hn.useRef(null),u=hn.useRef(null),h=hn.useRef(null),p=hn.useRef(Date.now()),[m,f]=hn.useState(1),g=(e,t)=>{const n=i.current;if(!n)return null;const r=n.createShader(e);return r?(n.shaderSource(r,t),n.compileShader(r),n.getShaderParameter(r,n.COMPILE_STATUS)?r:(n.deleteShader(r),null)):null},x=()=>{const t=e.current;if(!t)return;const n=t.getContext("webgl");if(!n)return;i.current=n;const r=g(n.VERTEX_SHADER,"\n  attribute vec4 position;\n  void main() {\n    gl_Position = position;\n  }\n"),p=g(n.FRAGMENT_SHADER,"\n  precision mediump float;\n  uniform float u_time;\n  uniform vec2 u_resolution;\n  uniform vec2 u_mouse;\n  uniform float u_intensity;\n  \n  // Advanced noise functions\n  vec3 hash3(vec2 p) {\n    vec3 q = vec3(dot(p, vec2(127.1, 311.7)), \n                  dot(p, vec2(269.5, 183.3)), \n                  dot(p, vec2(419.2, 371.9)));\n    return fract(sin(q) * 43758.5453);\n  }\n  \n  float noise(vec2 p) {\n    vec2 i = floor(p);\n    vec2 f = fract(p);\n    vec2 u = f * f * f * (f * (f * 6.0 - 15.0) + 10.0); // Improved smoothstep\n    return mix(mix(dot(hash3(i + vec2(0.0,0.0)).xy, f - vec2(0.0,0.0)), \n                   dot(hash3(i + vec2(1.0,0.0)).xy, f - vec2(1.0,0.0)), u.x),\n               mix(dot(hash3(i + vec2(0.0,1.0)).xy, f - vec2(0.0,1.0)), \n                   dot(hash3(i + vec2(1.0,1.0)).xy, f - vec2(1.0,1.0)), u.x), u.y);\n  }\n  \n  float fbm(vec2 p, int octaves) {\n    float value = 0.0;\n    float amplitude = 1.0;\n    float frequency = 0.25;\n    \n    for(int i = 0; i < 10; i++) {\n      if(i >= octaves) break;\n      value += amplitude * noise(p * frequency);\n      amplitude *= 0.52;\n      frequency *= 1.13;\n    }\n    return value;\n  }\n  \n  // Smooth voronoi\n  float voronoi(vec2 p) {\n    vec2 n = floor(p);\n    vec2 f = fract(p);\n    float md = 50.0;\n    \n    for(int i = -2; i <= 2; i++) {\n      for(int j = -2; j <= 2; j++) {\n        vec2 g = vec2(i, j);\n        vec2 o = hash3(n + g).xy;\n        o = 0.5 + 0.41 * sin(u_time * 1.5 + 6.28 * o);\n        vec2 r = g + o - f;\n        float d = dot(r, r);\n        md = min(md, d);\n      }\n    }\n    return sqrt(md);\n  }\n  \n  // Smooth plasma\n  float plasma(vec2 p, float time) {\n    float a = sin(p.x * 8.0 + time * 2.0);\n    float b = sin(p.y * 8.0 + time * 1.7);\n    float c = sin((p.x + p.y) * 6.0 + time * 1.3);\n    float d = sin(sqrt(p.x * p.x + p.y * p.y) * 8.0 + time * 2.3);\n    return (a + b + c + d) * 0.5;\n  }\n  \n  // Curl noise for fluid motion\n  vec2 curl(vec2 p, float time) {\n    float eps = 0.5;\n    float n1 = fbm(p + vec2(eps, 0.0), 6);\n    float n2 = fbm(p - vec2(eps, 0.0), 6);\n    float n3 = fbm(p + vec2(0.0, eps), 6);\n    float n4 = fbm(p - vec2(0.0, eps), 6);\n    \n    return vec2((n3 - n4) / (2.0 * eps), (n2 - n1) / (2.0 * eps));\n  }\n\n  // Film grain\n  float grain(vec2 uv, float time) {\n    vec2 seed = uv * time;\n    return fract(sin(dot(seed, vec2(12.9898, 78.233))) * 43758.5453);\n  }\n  \n  void main() {\n    vec2 uv = gl_FragCoord.xy / u_resolution.xy;\n    vec2 st = (uv - 0.5) * 2.0;\n    st.x *= u_resolution.x / u_resolution.y;\n    \n    float time = u_time * 0.25; // Reduced from 0.4 for smoother animation\n    \n    // Fluid motion using curl noise\n    vec2 curlForce = curl(st * 2.0, time) * 0.6;\n    vec2 flowField = st + curlForce;\n    \n    // Multiple smooth distortion layers\n    float dist1 = fbm(flowField * 1.5 + time * 1.2, 8) * 0.4;\n    float dist2 = fbm(flowField * 2.3 - time * 0.8, 6) * 0.3;\n    float dist3 = fbm(flowField * 3.1 + time * 1.8, 4) * 0.2;\n    float dist4 = fbm(flowField * 4.7 - time * 1.1, 3) * 0.15;\n    \n    // Smooth voronoi cellular structure\n    float cells = voronoi(flowField * 2.5 + time * 0.5);\n    cells = smoothstep(0.1, 0.7, cells);\n    \n    // Enhanced plasma effect\n    float plasmaEffect = plasma(flowField + vec2(dist1, dist2), time * 1.5) * 0.2;\n    \n    // Combined smooth distortion\n    float totalDist = dist1 + dist2 + dist3 + dist4 + plasmaEffect;\n    \n    // Smooth vertical streaks with multiple frequencies\n    float streak1 = sin((st.x + totalDist) * 15.0 + time * 3.0) * 0.5 + 0.5;\n    float streak2 = sin((st.x + totalDist * 0.7) * 25.0 - time * 2.0) * 0.5 + 0.5;\n    float streak3 = sin((st.x + totalDist * 1.3) * 35.0 + time * 4.0) * 0.5 + 0.5;\n    \n    // Smooth power curves for streaks\n    streak1 = smoothstep(0.3, 0.7, streak1);\n    streak2 = smoothstep(0.2, 0.8, streak2);\n    streak3 = smoothstep(0.4, 0.6, streak3);\n    \n    float combinedStreaks = streak1 * 0.6 + streak2 * 0.4 + streak3 * 0.5;\n    \n    // Multiple smooth flowing shapes\n    float shape1 = 1.0 - abs(st.x + totalDist * 0.6);\n    float shape2 = 1.0 - abs(st.x + totalDist * 0.4 + sin(st.y * 3.0 + time) * 0.15);\n    float shape3 = 1.0 - abs(st.x + totalDist * 0.8 + cos(st.y * 2.0 - time) * 0.1);\n    \n    shape1 = smoothstep(0.0, 1.0, shape1);\n    shape2 = smoothstep(0.1, 0.9, shape2);\n    shape3 = smoothstep(0.2, 0.8, shape3);\n    \n    float finalShape = max(shape1 * 0.8, max(shape2 * 0.6, shape3 * 0.4));\n    \n    // Enhanced dramatic color palette\n    vec3 color1 = vec3(1.0, 0.1, 0.6);   // Hot pink\n    vec3 color2 = vec3(1.0, 0.3, 0.1);   // Electric orange\n    vec3 color3 = vec3(0.9, 0.1, 1.0);   // Electric purple\n    vec3 color4 = vec3(0.1, 0.5, 1.0);   // Electric blue\n    vec3 color5 = vec3(0.1, 1.0, 0.9);   // Electric cyan\n    vec3 color6 = vec3(0.3, 0.1, 0.9);   // Deep purple\n    vec3 color7 = vec3(1.0, 0.8, 0.1);   // Electric yellow\n    \n    // Smooth color transitions\n    float gradient = 1.0 - uv.y;\n    float colorNoise = fbm(flowField * 3.0 + time * 0.5, 4) * 0.5 + 0.5;\n    float colorShift = sin(time * 1.5 + st.y * 2.0) * 0.5 + 0.5;\n    \n    vec3 finalColor;\n    \n    // Smooth multi-layer color blending\n    float t1 = smoothstep(0.85, 1.0, gradient);\n    float t2 = smoothstep(0.7, 0.85, gradient);\n    float t3 = smoothstep(0.5, 0.7, gradient);\n    float t4 = smoothstep(0.3, 0.5, gradient);\n    float t5 = smoothstep(0.15, 0.3, gradient);\n    float t6 = smoothstep(0.0, 0.15, gradient);\n    \n    finalColor = mix(color6, color7, t6);\n    finalColor = mix(finalColor, color5, t5);\n    finalColor = mix(finalColor, color4, t4);\n    finalColor = mix(finalColor, color3, t3);\n    finalColor = mix(finalColor, color2, t2);\n    finalColor = mix(finalColor, color1, t1);\n    \n    // Smooth color variations\n    finalColor = mix(finalColor, color1, colorNoise * 0.82);\n    finalColor = mix(finalColor, color5, colorShift * 0.5);\n    \n    // Enhanced chromatic aberration\n    vec2 aberration = curlForce * 0.02;\n    vec3 aberrationColor = finalColor;\n    aberrationColor.r = mix(finalColor.r, color1.r, length(aberration) * 2.0);\n    aberrationColor.b = mix(finalColor.b, color4.b, length(aberration) * 1.5);\n    aberrationColor.g = mix(finalColor.g, color5.g, length(aberration) * 1.2);\n    \n    // Smooth energy pulses\n    float pulse1 = sin(time * 3.0 + st.y * 6.0) * 0.5 + 0.5;\n    float pulse2 = sin(time * 4.5 - st.y * 8.0) * 0.5 + 0.5;\n    float energyPulse = smoothstep(0.3, 0.7, pulse1 * pulse2);\n    \n    // Apply all effects smoothly\n    float intensity = finalShape * combinedStreaks * (1.0 + energyPulse * 0.4);\n    intensity *= (1.0 + cells * 0.2);\n    intensity *= u_intensity; // Global intensity control\n    \n    // Enhanced mouse interaction\n    vec2 mouse = u_mouse / u_resolution.xy;\n    mouse = (mouse - 0.5) * 2.0;\n    mouse.x *= u_resolution.x / u_resolution.y;\n    \n    float mouseInfluence = 1.0 - length(st - mouse) * 0.6;\n    mouseInfluence = max(0.0, mouseInfluence);\n    mouseInfluence = smoothstep(0.0, 1.0, mouseInfluence);\n    \n    intensity += mouseInfluence * 0.6;\n    aberrationColor = mix(aberrationColor, color1, 0.3);\n    \n    // Final color application with post-processing\n    vec3 result = aberrationColor * intensity;\n    \n    // Bloom effect\n    float bloom = smoothstep(0.4, 1.0, intensity) * 0.54;\n    result += bloom * finalColor;\n    \n    // Color grading\n    result = pow(result, vec3(0.85)); // Gamma correction\n    result = mix(result, result * result, 0.2); // Contrast boost\n    \n    // Vignette effect\n    float vignette = 1.0 - length(uv - 0.5) * 0.85;\n    vignette = smoothstep(0.2, 1.0, vignette);\n    \n    // Enhanced background with subtle color\n    vec3 bgColor = vec3(0.02, 0.01, 0.12) + finalColor * 0.03;\n    result = mix(bgColor, result, smoothstep(0.0, 0.4, intensity));\n    result *= vignette;\n    \n    // Final saturation and brightness\n    result = mix(vec3(dot(result, vec3(0.299, 0.587, 0.114))), result, 1.3);\n\n    // Film grain effect\n    float grainAmount = 0.11;\n    float grainValue = grain(uv, time * 0.5) * 2.0 - 1.0;\n    result += grainValue * grainAmount;\n\n    // Enhanced chromatic aberration\n    vec2 aberrationOffset = (uv - 0.5) * 0.2;\n    //result.r = mix(result.r, texture2D(u_texture, uv + aberrationOffset).r, 0.3);\n    //result.b = mix(result.b, texture2D(u_texture, uv - aberrationOffset).b, 0.3);\n\n    // Subtle scanlines\n    float scanline = sin(uv.y * u_resolution.y * 2.0) * 0.04;\n    result += scanline;\n    \n    gl_FragColor = vec4(result, 1.0);\n  }\n");if(!r||!p)return;const x=n.createProgram();if(!x)return;if(n.attachShader(x,r),n.attachShader(x,p),n.linkProgram(x),!n.getProgramParameter(x,n.LINK_STATUS))return;a.current=x;const v=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,v),n.bufferData(n.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,1]),n.STATIC_DRAW),o.current=v;const y=n.getAttribLocation(x,"position");l.current=y;const b=n.getUniformLocation(x,"u_time");c.current=b;const w=n.getUniformLocation(x,"u_resolution");d.current=w;const j=n.getUniformLocation(x,"u_mouse");u.current=j;const N=n.getUniformLocation(x,"u_intensity");h.current=N;const _=()=>{const e=t.getBoundingClientRect();t.width=e.width*window.devicePixelRatio,t.height=e.height*window.devicePixelRatio,n.viewport(0,0,t.width,t.height)};_(),window.addEventListener("resize",_);t.addEventListener("mousemove",e=>{const n=t.getBoundingClientRect();s.current.x=(e.clientX-n.left)*window.devicePixelRatio,s.current.y=(n.height-(e.clientY-n.top))*window.devicePixelRatio,NUe.to({intensity:m},{intensity:1.15,duration:.3,ease:"power2.out",onUpdate:function(){f(this.targets()[0].intensity)}}),NUe.to({intensity:1.15},{intensity:1,duration:1,delay:.1,ease:"power2.out",onUpdate:function(){f(this.targets()[0].intensity)}})})};return hn.useEffect(()=>{x()},[]),hn.useEffect(()=>{const e=()=>{const t=.001*(Date.now()-p.current),n=i.current,r=a.current,f=o.current,g=l.current,x=c.current,v=d.current,y=u.current,b=h.current;n&&r&&f&&x&&v&&y&&b&&(n.useProgram(r),n.bindBuffer(n.ARRAY_BUFFER,f),n.enableVertexAttribArray(g),n.vertexAttribPointer(g,2,n.FLOAT,!1,0,0),n.uniform1f(x,t),n.uniform2f(v,n.canvas.width,n.canvas.height),n.uniform2f(y,s.current.x,s.current.y),n.uniform1f(b,m),n.drawArrays(n.TRIANGLE_STRIP,0,4)),requestAnimationFrame(e)};e()},[m]),Ot.jsxs("section",{className:"relative h-screen w-full overflow-hidden bg-black",children:[Ot.jsx("canvas",{ref:e,className:"absolute inset-0 w-full h-full",style:{background:"#000510"}}),Ot.jsxs("div",{className:"relative z-10 h-full flex flex-col justify-between p-8 md:p-12",children:[Ot.jsxs("div",{ref:t,className:"text-left",children:[Ot.jsx("p",{className:"text-gray-300 text-sm md:text-base uppercase tracking-wider font-bold",children:"Break the boundaries,"}),Ot.jsx("p",{className:"text-gray-300 text-sm md:text-base uppercase tracking-wider font-bold",children:"Unleash your potential"})]}),Ot.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-end",children:[Ot.jsx("nav",{ref:n,className:"text-left mb-8 md:mb-0",children:[{text:"IGNITE",href:"/ignite",gradient:"linear-gradient(135deg, #ffffff, #cccccc)"},{text:"TRANSFORM",href:"/transform",gradient:"linear-gradient(135deg, #ffffff, #cccccc)"},{text:"DOMINATE",href:"/dominate",gradient:"linear-gradient(135deg, #ffffff, #cccccc)"},{text:"EVOLVE",href:"/evolve",gradient:"linear-gradient(135deg, #ffffff, #cccccc)"}].map((e,t)=>Ot.jsx(_Ue,{href:e.href,gradient:e.gradient,index:t,children:e.text},e.text))}),Ot.jsxs("div",{ref:r,className:"text-right text-gray-300 text-xs md:text-sm max-w-xs",children:[Ot.jsx("p",{className:"mb-2 font-semibold text-white",children:"The future belongs to those"}),Ot.jsx("p",{className:"mb-2 font-semibold text-white",children:"who dare to dream bigger"}),Ot.jsx("p",{className:"mb-4 text-gray-400",children:"Every revolution starts with a single spark"}),Ot.jsx("p",{className:"mb-2 text-gray-400",children:"Your moment is now."}),Ot.jsx("p",{className:"mb-2 text-gray-400",children:"Your power is limitless."}),Ot.jsx("p",{className:"mb-6 text-gray-400",children:"Your impact will be legendary."}),Ot.jsx("p",{className:"text-transparent bg-gradient-to-r from-pink-400 to-cyan-400 bg-clip-text font-bold",children:"www.revolution.com"})]})]})]})]})}const MUe=()=>Ot.jsx(SUe,{});function CUe(){return Ot.jsx(MUe,{})}function EUe(){const e=hn.useRef(null),t=hn.useRef({x:0,y:0}),n=hn.useRef(null),r=hn.useRef(null),s=hn.useRef(null),i=hn.useRef(0),a=hn.useRef(null),o=hn.useRef(null),l=hn.useRef(null),c=hn.useRef(null),d=hn.useRef(Date.now()),[u,h]=hn.useState(1),p=(e,t)=>{const r=n.current;if(!r)return null;const s=r.createShader(e);return s?(r.shaderSource(s,t),r.compileShader(s),r.getShaderParameter(s,r.COMPILE_STATUS)?s:(r.deleteShader(s),null)):null},m=()=>{const d=e.current;if(!d)return;const m=d.getContext("webgl");if(!m)return;n.current=m;const f=p(m.VERTEX_SHADER,"\n  attribute vec4 position;\n  void main() {\n    gl_Position = position;\n  }\n"),g=p(m.FRAGMENT_SHADER,"\n  precision mediump float;\n  uniform float u_time;\n  uniform vec2 u_resolution;\n  uniform vec2 u_mouse;\n  uniform float u_intensity;\n\n  // Advanced noise functions\n  vec3 hash3(vec2 p) {\n    vec3 q = vec3(dot(p, vec2(127.1, 311.7)),\n                  dot(p, vec2(269.5, 183.3)),\n                  dot(p, vec2(419.2, 371.9)));\n    return fract(sin(q) * 43758.5453);\n  }\n\n  float noise(vec2 p) {\n    vec2 i = floor(p);\n    vec2 f = fract(p);\n    vec2 u = f * f * f * (f * (f * 6.0 - 15.0) + 10.0);\n    return mix(mix(dot(hash3(i + vec2(0.0,0.0)).xy, f - vec2(0.0,0.0)),\n                   dot(hash3(i + vec2(1.0,0.0)).xy, f - vec2(1.0,0.0)), u.x),\n               mix(dot(hash3(i + vec2(0.0,1.0)).xy, f - vec2(0.0,1.0)),\n                   dot(hash3(i + vec2(1.0,1.0)).xy, f - vec2(1.0,1.0)), u.x), u.y);\n  }\n\n  float fbm(vec2 p, int octaves) {\n    float value = 0.0;\n    float amplitude = 1.0;\n    float frequency = 0.25;\n\n    for(int i = 0; i < 10; i++) {\n      if(i >= octaves) break;\n      value += amplitude * noise(p * frequency);\n      amplitude *= 0.52;\n      frequency *= 1.13;\n    }\n    return value;\n  }\n\n  float voronoi(vec2 p) {\n    vec2 n = floor(p);\n    vec2 f = fract(p);\n    float md = 50.0;\n\n    for(int i = -2; i <= 2; i++) {\n      for(int j = -2; j <= 2; j++) {\n        vec2 g = vec2(i, j);\n        vec2 o = hash3(n + g).xy;\n        o = 0.5 + 0.41 * sin(u_time * 1.5 + 6.28 * o);\n        vec2 r = g + o - f;\n        float d = dot(r, r);\n        md = min(md, d);\n      }\n    }\n    return sqrt(md);\n  }\n\n  float plasma(vec2 p, float time) {\n    float a = sin(p.x * 8.0 + time * 2.0);\n    float b = sin(p.y * 8.0 + time * 1.7);\n    float c = sin((p.x + p.y) * 6.0 + time * 1.3);\n    float d = sin(sqrt(p.x * p.x + p.y * p.y) * 8.0 + time * 2.3);\n    return (a + b + c + d) * 0.5;\n  }\n\n  vec2 curl(vec2 p, float time) {\n    float eps = 0.5;\n    float n1 = fbm(p + vec2(eps, 0.0), 6);\n    float n2 = fbm(p - vec2(eps, 0.0), 6);\n    float n3 = fbm(p + vec2(0.0, eps), 6);\n    float n4 = fbm(p - vec2(0.0, eps), 6);\n\n    return vec2((n3 - n4) / (2.0 * eps), (n2 - n1) / (2.0 * eps));\n  }\n\n  float grain(vec2 uv, float time) {\n    vec2 seed = uv * time;\n    return fract(sin(dot(seed, vec2(12.9898, 78.233))) * 43758.5453);\n  }\n\n  void main() {\n    vec2 uv = gl_FragCoord.xy / u_resolution.xy;\n    vec2 st = (uv - 0.5) * 2.0;\n    st.x *= u_resolution.x / u_resolution.y;\n\n    float time = u_time * 0.25;\n\n    vec2 curlForce = curl(st * 2.0, time) * 0.6;\n    vec2 flowField = st + curlForce;\n\n    float dist1 = fbm(flowField * 1.5 + time * 1.2, 8) * 0.4;\n    float dist2 = fbm(flowField * 2.3 - time * 0.8, 6) * 0.3;\n    float dist3 = fbm(flowField * 3.1 + time * 1.8, 4) * 0.2;\n    float dist4 = fbm(flowField * 4.7 - time * 1.1, 3) * 0.15;\n\n    float cells = voronoi(flowField * 2.5 + time * 0.5);\n    cells = smoothstep(0.1, 0.7, cells);\n\n    float plasmaEffect = plasma(flowField + vec2(dist1, dist2), time * 1.5) * 0.2;\n\n    float totalDist = dist1 + dist2 + dist3 + dist4 + plasmaEffect;\n\n    float streak1 = sin((st.x + totalDist) * 15.0 + time * 3.0) * 0.5 + 0.5;\n    float streak2 = sin((st.x + totalDist * 0.7) * 25.0 - time * 2.0) * 0.5 + 0.5;\n    float streak3 = sin((st.x + totalDist * 1.3) * 35.0 + time * 4.0) * 0.5 + 0.5;\n\n    streak1 = smoothstep(0.3, 0.7, streak1);\n    streak2 = smoothstep(0.2, 0.8, streak2);\n    streak3 = smoothstep(0.4, 0.6, streak3);\n\n    float combinedStreaks = streak1 * 0.6 + streak2 * 0.4 + streak3 * 0.5;\n\n    float shape1 = 1.0 - abs(st.x + totalDist * 0.6);\n    float shape2 = 1.0 - abs(st.x + totalDist * 0.4 + sin(st.y * 3.0 + time) * 0.15);\n    float shape3 = 1.0 - abs(st.x + totalDist * 0.8 + cos(st.y * 2.0 - time) * 0.1);\n\n    shape1 = smoothstep(0.0, 1.0, shape1);\n    shape2 = smoothstep(0.1, 0.9, shape2);\n    shape3 = smoothstep(0.2, 0.8, shape3);\n\n    float finalShape = max(shape1 * 0.8, max(shape2 * 0.6, shape3 * 0.4));\n\n    vec3 color1 = vec3(1.0, 0.1, 0.6);\n    vec3 color2 = vec3(1.0, 0.3, 0.1);\n    vec3 color3 = vec3(0.9, 0.1, 1.0);\n    vec3 color4 = vec3(0.1, 0.5, 1.0);\n    vec3 color5 = vec3(0.1, 1.0, 0.9);\n    vec3 color6 = vec3(0.3, 0.1, 0.9);\n    vec3 color7 = vec3(1.0, 0.8, 0.1);\n\n    float gradient = 1.0 - uv.y;\n    float colorNoise = fbm(flowField * 3.0 + time * 0.5, 4) * 0.5 + 0.5;\n    float colorShift = sin(time * 1.5 + st.y * 2.0) * 0.5 + 0.5;\n\n    vec3 finalColor;\n\n    float t1 = smoothstep(0.85, 1.0, gradient);\n    float t2 = smoothstep(0.7, 0.85, gradient);\n    float t3 = smoothstep(0.5, 0.7, gradient);\n    float t4 = smoothstep(0.3, 0.5, gradient);\n    float t5 = smoothstep(0.15, 0.3, gradient);\n    float t6 = smoothstep(0.0, 0.15, gradient);\n\n    finalColor = mix(color6, color7, t6);\n    finalColor = mix(finalColor, color5, t5);\n    finalColor = mix(finalColor, color4, t4);\n    finalColor = mix(finalColor, color3, t3);\n    finalColor = mix(finalColor, color2, t2);\n    finalColor = mix(finalColor, color1, t1);\n\n    finalColor = mix(finalColor, color1, colorNoise * 0.82);\n    finalColor = mix(finalColor, color5, colorShift * 0.5);\n\n    vec2 aberration = curlForce * 0.02;\n    vec3 aberrationColor = finalColor;\n    aberrationColor.r = mix(finalColor.r, color1.r, length(aberration) * 2.0);\n    aberrationColor.b = mix(finalColor.b, color4.b, length(aberration) * 1.5);\n    aberrationColor.g = mix(finalColor.g, color5.g, length(aberration) * 1.2);\n\n    float pulse1 = sin(time * 3.0 + st.y * 6.0) * 0.5 + 0.5;\n    float pulse2 = sin(time * 4.5 - st.y * 8.0) * 0.5 + 0.5;\n    float energyPulse = smoothstep(0.3, 0.7, pulse1 * pulse2);\n\n    float intensity = finalShape * combinedStreaks * (1.0 + energyPulse * 0.4);\n    intensity *= (1.0 + cells * 0.2);\n    intensity *= u_intensity;\n\n    vec2 mouse = u_mouse / u_resolution.xy;\n    mouse = (mouse - 0.5) * 2.0;\n    mouse.x *= u_resolution.x / u_resolution.y;\n\n    float mouseInfluence = 1.0 - length(st - mouse) * 0.6;\n    mouseInfluence = max(0.0, mouseInfluence);\n    mouseInfluence = smoothstep(0.0, 1.0, mouseInfluence);\n\n    intensity += mouseInfluence * 0.6;\n    aberrationColor = mix(aberrationColor, color1, 0.3);\n\n    vec3 result = aberrationColor * intensity;\n\n    float bloom = smoothstep(0.4, 1.0, intensity) * 0.54;\n    result += bloom * finalColor;\n\n    result = pow(result, vec3(0.85));\n    result = mix(result, result * result, 0.2);\n\n    float vignette = 1.0 - length(uv - 0.5) * 0.85;\n    vignette = smoothstep(0.2, 1.0, vignette);\n\n    vec3 bgColor = vec3(0.02, 0.01, 0.12) + finalColor * 0.03;\n    result = mix(bgColor, result, smoothstep(0.0, 0.4, intensity));\n    result *= vignette;\n\n    result = mix(vec3(dot(result, vec3(0.299, 0.587, 0.114))), result, 1.3);\n\n    float grainAmount = 0.11;\n    float grainValue = grain(uv, time * 0.5) * 2.0 - 1.0;\n    result += grainValue * grainAmount;\n\n    float scanline = sin(uv.y * u_resolution.y * 2.0) * 0.04;\n    result += scanline;\n\n    gl_FragColor = vec4(result, 1.0);\n  }\n");if(!f||!g)return;const x=m.createProgram();if(!x)return;if(m.attachShader(x,f),m.attachShader(x,g),m.linkProgram(x),!m.getProgramParameter(x,m.LINK_STATUS))return;r.current=x;const v=m.createBuffer();m.bindBuffer(m.ARRAY_BUFFER,v),m.bufferData(m.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,1]),m.STATIC_DRAW),s.current=v;const y=m.getAttribLocation(x,"position");i.current=y;const b=m.getUniformLocation(x,"u_time");a.current=b;const w=m.getUniformLocation(x,"u_resolution");o.current=w;const j=m.getUniformLocation(x,"u_mouse");l.current=j;const N=m.getUniformLocation(x,"u_intensity");c.current=N;const _=()=>{const e=d.getBoundingClientRect();d.width=e.width*window.devicePixelRatio,d.height=e.height*window.devicePixelRatio,m.viewport(0,0,d.width,d.height)};_(),window.addEventListener("resize",_);d.addEventListener("mousemove",e=>{const n=d.getBoundingClientRect();t.current.x=(e.clientX-n.left)*window.devicePixelRatio,t.current.y=(n.height-(e.clientY-n.top))*window.devicePixelRatio,NUe.to({intensity:u},{intensity:1.15,duration:.3,ease:"power2.out",onUpdate:function(){h(this.targets()[0].intensity)}}),NUe.to({intensity:1.15},{intensity:1,duration:1,delay:.1,ease:"power2.out",onUpdate:function(){h(this.targets()[0].intensity)}})})};return hn.useEffect(()=>{m();const e="webgl-background-override-styles",t=document.getElementById(e);t&&t.remove();const n=document.createElement("style");n.id=e,n.textContent='\n      /* WEBGL BACKGROUND OVERRIDES - NUCLEAR INJECTION */\n\n      /* Target solid white backgrounds */\n      .bg-white:not(.keep-white):not([class*="hover:"]) {\n        background-color: rgba(255, 255, 255, 0.15) !important;\n        backdrop-filter: blur(10px) !important;\n        -webkit-backdrop-filter: blur(10px) !important;\n      }\n\n      /* Target high-opacity white backgrounds */\n      .bg-white\\/95:not(.keep-white),\n      .bg-white\\/90:not(.keep-white),\n      .bg-white\\/80:not(.keep-white) {\n        background-color: rgba(255, 255, 255, 0.20) !important;\n        backdrop-filter: blur(12px) !important;\n        -webkit-backdrop-filter: blur(12px) !important;\n      }\n\n      /* Target inline white backgrounds */\n      [style*="background: white"]:not(.keep-white),\n      [style*="background-color: white"]:not(.keep-white),\n      [style*="background:#fff"]:not(.keep-white),\n      [style*="background-color:#fff"]:not(.keep-white),\n      [style*="background: #fff"]:not(.keep-white),\n      [style*="background-color: #fff"]:not(.keep-white),\n      [style*="background:#FFF"]:not(.keep-white),\n      [style*="background-color:#FFF"]:not(.keep-white) {\n        background: rgba(255, 255, 255, 0.15) !important;\n        background-color: rgba(255, 255, 255, 0.15) !important;\n        backdrop-filter: blur(10px) !important;\n        -webkit-backdrop-filter: blur(10px) !important;\n      }\n\n      /* Target rounded containers with white backgrounds */\n      .bg-white.rounded-3xl:not(.keep-white),\n      .bg-white.rounded-2xl:not(.keep-white),\n      .bg-white.rounded-xl:not(.keep-white),\n      .bg-white.rounded-lg:not(.keep-white) {\n        background-color: rgba(255, 255, 255, 0.18) !important;\n        backdrop-filter: blur(14px) !important;\n        -webkit-backdrop-filter: blur(14px) !important;\n        border: 1px solid rgba(255, 255, 255, 0.3) !important;\n      }\n\n      /* AGGRESSIVE OVERRIDES - Catch everything with bg-white in className */\n      *[class*="bg-white"]:not(.keep-white):not([class*="hover:"]) {\n        background-color: rgba(255, 255, 255, 0.15) !important;\n        backdrop-filter: blur(10px) !important;\n        -webkit-backdrop-filter: blur(10px) !important;\n      }\n\n      /* Target UI component patterns */\n      [class*="card"][class*="bg-white"]:not(.keep-white),\n      [class*="panel"][class*="bg-white"]:not(.keep-white),\n      [class*="container"][class*="bg-white"]:not(.keep-white),\n      [class*="wrapper"][class*="bg-white"]:not(.keep-white),\n      [class*="modal"][class*="bg-white"]:not(.keep-white),\n      [class*="dialog"][class*="bg-white"]:not(.keep-white),\n      [class*="sheet"][class*="bg-white"]:not(.keep-white) {\n        background-color: rgba(255, 255, 255, 0.18) !important;\n        backdrop-filter: blur(14px) !important;\n        -webkit-backdrop-filter: blur(14px) !important;\n        border: 1px solid rgba(255, 255, 255, 0.25) !important;\n      }\n\n      /* Target Radix UI components (shadcn uses these) */\n      [data-radix-popper-content-wrapper] [class*="bg-white"]:not(.keep-white),\n      [role="dialog"] [class*="bg-white"]:not(.keep-white),\n      [role="menu"] [class*="bg-white"]:not(.keep-white) {\n        background-color: rgba(255, 255, 255, 0.20) !important;\n        backdrop-filter: blur(12px) !important;\n        -webkit-backdrop-filter: blur(12px) !important;\n      }\n\n      /* Target common HTML elements with white backgrounds */\n      div[class*="bg-white"]:not(.keep-white),\n      section[class*="bg-white"]:not(.keep-white),\n      article[class*="bg-white"]:not(.keep-white),\n      aside[class*="bg-white"]:not(.keep-white),\n      main[class*="bg-white"]:not(.keep-white) {\n        background-color: rgba(255, 255, 255, 0.15) !important;\n        backdrop-filter: blur(10px) !important;\n        -webkit-backdrop-filter: blur(10px) !important;\n      }\n\n      /* Escape hatch - keep solid white if needed */\n      .keep-white {\n        background-color: rgba(255, 255, 255, 0.95) !important;\n        backdrop-filter: blur(16px) !important;\n        -webkit-backdrop-filter: blur(16px) !important;\n      }\n\n      /* Dark mode transparency */\n      .dark .bg-gray-900:not(.keep-solid),\n      .dark .bg-gray-800:not(.keep-solid),\n      .dark .bg-slate-900:not(.keep-solid) {\n        background-color: rgba(0, 0, 0, 0.40) !important;\n        backdrop-filter: blur(10px) !important;\n        -webkit-backdrop-filter: blur(10px) !important;\n      }\n    ',document.head.appendChild(n);const r=()=>{const e=document.querySelectorAll('[class*="bg-white"]:not(.keep-white)');e.forEach(e=>{const t=e;t.classList.contains("keep-white")||t.className.includes("hover:")||(t.style.backgroundColor="rgba(255, 255, 255, 0.15)",t.style.backdropFilter="blur(10px)",t.style.webkitBackdropFilter="blur(10px)")})};setTimeout(r,100),setTimeout(r,500),setTimeout(r,1e3),setTimeout(r,2e3);const s=new MutationObserver(e=>{let t=!1;e.forEach(e=>{e.addedNodes.length>0&&e.addedNodes.forEach(e=>{e instanceof HTMLElement&&e.className&&e.className.includes("bg-white")&&(t=!0)})}),t&&r()});return s.observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["class","style"]}),()=>{const t=document.getElementById(e);t&&t.remove(),s.disconnect()}},[]),hn.useEffect(()=>{const e=()=>{const h=.001*(Date.now()-d.current),p=n.current,m=r.current,f=s.current,g=i.current,x=a.current,v=o.current,y=l.current,b=c.current;p&&m&&f&&x&&v&&y&&b&&(p.useProgram(m),p.bindBuffer(p.ARRAY_BUFFER,f),p.enableVertexAttribArray(g),p.vertexAttribPointer(g,2,p.FLOAT,!1,0,0),p.uniform1f(x,h),p.uniform2f(v,p.canvas.width,p.canvas.height),p.uniform2f(y,t.current.x,t.current.y),p.uniform1f(b,u),p.drawArrays(p.TRIANGLE_STRIP,0,4)),requestAnimationFrame(e)};e()},[u]),Ot.jsx("canvas",{ref:e,className:"fixed inset-0 w-full h-full -z-10",style:{background:"#000510"}})}function kUe(){const{isAuthenticated:e,isLoading:t}=Ua();return Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(Fd,{}),e&&Ot.jsx(zd,{}),Ot.jsxs(Oa,{children:[Ot.jsx(Ra,{path:"/login-error",component:gbe}),Ot.jsx(Ra,{path:"/florida-elite",component:K$}),Ot.jsx(Ra,{path:"/florida-local",component:K$}),Ot.jsx(Ra,{path:"/registry",component:YG}),Ot.jsx(Ra,{path:"/subscription",component:Qxe}),Ot.jsx(Ra,{path:"/demo/card",component:mDe}),Ot.jsx(Ra,{path:"/demo/revolution-hero",component:CUe}),Ot.jsx(Ra,{path:"/businesses",component:mbe}),Ot.jsx(Ra,{path:"/marketplace",component:bo}),Ot.jsx(Ra,{path:"/blog",component:Nbe}),Ot.jsx(Ra,{path:"/blog/:slug",component:_be}),Ot.jsx(Ra,{path:"/contact",component:au}),Ot.jsx(Ra,{path:"/cart",component:yl}),t||!e?Ot.jsx(Ra,{path:"/",component:au}):Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(Ra,{path:"/",component:gM}),Ot.jsx(Ra,{path:"/profile",component:fbe}),Ot.jsx(Ra,{path:"/create-business",component:Ia}),Ot.jsx(Ra,{path:"/business/:id",component:Da}),Ot.jsx(Ra,{path:"/business/:id/edit",component:sR}),Ot.jsx(Ra,{path:"/messages",component:WO}),Ot.jsx(Ra,{path:"/checkout",component:bl}),Ot.jsx(Ra,{path:"/order-confirmation",component:iR}),Ot.jsx(Ra,{path:"/orders",component:aR}),Ot.jsx(Ra,{path:"/vendor/products",component:oR}),Ot.jsx(Ra,{path:"/vendor/payouts",component:OD}),Ot.jsx(Ra,{path:"/ai/content-generator",component:eq}),Ot.jsx(Ra,{path:"/ai/agents",component:aq}),Ot.jsx(Ra,{path:"/ai/tools",component:VY}),Ot.jsx(Ra,{path:"/integrations/gmb",component:HY}),Ot.jsx(Ra,{path:"/spotlight/voting",component:oZ}),Ot.jsx(Ra,{path:"/community",component:gZ}),Ot.jsx(Ra,{path:"/loyalty",component:_Z}),Ot.jsx(Ra,{path:"/admin",component:Txe}),Ot.jsx(Ra,{path:"/admin/analytics",component:bge}),Ot.jsx(Ra,{path:"/admin/monitoring",component:sDe}),Ot.jsx(Ra,{path:"/business-dashboard",component:Uxe}),Ot.jsx(Ra,{path:"/business-analytics",component:jge}),Ot.jsx(Ra,{path:"/marketing",component:ive}),Ot.jsx(Ra,{path:"/marketing/workflows",component:ybe}),Ot.jsx(Ra,{path:"/marketing/forms",component:jbe}),Ot.jsx(Ra,{path:"/social-hub",component:hbe}),Ot.jsx(Ra,{path:"/entrepreneur/:id",component:pbe}),Ot.jsx(Ra,{path:"/blog/admin",component:rDe})]}),Ot.jsx(Ra,{component:Bd})]})]})}function AUe(){const{isAuthenticated:e}=Ua();return Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(EUe,{}),Ot.jsx(hc,{}),e&&Ot.jsx(iDe,{}),Ot.jsx("div",{className:"min-h-screen relative",children:Ot.jsxs("div",{className:"relative z-10",children:[Ot.jsx(uDe,{}),Ot.jsx(kUe,{}),Ot.jsx(pDe,{})]})}),Ot.jsx(hDe,{})]})}function TUe(){return Ot.jsx(Ba,{client:vr,children:Ot.jsx(yo,{children:Ot.jsx(cr,{children:Ot.jsx(Ld,{children:Ot.jsx(AUe,{})})})})})}"serviceWorker"in navigator&&navigator.serviceWorker.getRegistrations().then(async e=>{if(await Promise.all(e.map(e=>e.unregister().then(e=>e))),"caches"in window){const e=await caches.keys();await Promise.all(e.map(e=>caches.delete(e).then(()=>{})))}e.length>0&&!sessionStorage.getItem("sw-nuclear-cleared")&&(sessionStorage.setItem("sw-nuclear-cleared","true"),window.location.reload())}),wt(document.getElementById("root")).render(Ot.jsx(yo,{children:Ot.jsx(TUe,{})}));
